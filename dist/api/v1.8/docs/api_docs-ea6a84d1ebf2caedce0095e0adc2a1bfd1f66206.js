(() => {
  const __dcg_shared_module_source__ = "// shared.js\n  (() => {\n    const __dcg_chunk_exports__ = {};var Nv=Object.create;var Su=Object.defineProperty,Dv=Object.defineProperties,Rv=Object.getOwnPropertyDescriptor,wv=Object.getOwnPropertyDescriptors,Lv=Object.getOwnPropertyNames,Eu=Object.getOwnPropertySymbols,Av=Object.getPrototypeOf,Zp=Object.prototype.hasOwnProperty,nb=Object.prototype.propertyIsEnumerable;var vA=Math.pow,rb=(e,t,r)=>t in e?Su(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z=(e,t)=>{for(var r in t||(t={}))Zp.call(t,r)&&rb(e,r,t[r]);if(Eu)for(var r of Eu(t))nb.call(t,r)&&rb(e,r,t[r]);return e},oe=(e,t)=>Dv(e,wv(t));var EA=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,r)=>(typeof require!=\"undefined\"?require:t)[r]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var ib=(e,t)=>{var r={};for(var n in e)Zp.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Eu)for(var n of Eu(e))t.indexOf(n)<0&&nb.call(e,n)&&(r[n]=e[n]);return r};var SA=(e,t)=>()=>(e&&(t=e(e=0)),t);var OA=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),In=(e,t)=>{for(var r in t)Su(e,r,{get:t[r],enumerable:!0})},Cv=(e,t,r,n)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of Lv(t))!Zp.call(e,i)&&i!==r&&Su(e,i,{get:()=>t[i],enumerable:!(n=Rv(t,i))||n.enumerable});return e};var NA=(e,t,r)=>(r=e!=null?Nv(Av(e)):{},Cv(t||!e||!e.__esModule?Su(r,\"default\",{value:e,enumerable:!0}):r,e));var DA=(()=>{for(var e=new Uint8Array(128),t=0;t<64;t++)e[t<26?t+65:t<52?t+71:t<62?t-4:t*4-205]=t;return r=>{for(var n=r.length,i=new Uint8Array((n-(r[n-1]==\"=\")-(r[n-2]==\"=\"))*3/4|0),s=0,o=0;s<n;){var a=e[r.charCodeAt(s++)],u=e[r.charCodeAt(s++)],l=e[r.charCodeAt(s++)],c=e[r.charCodeAt(s++)];i[o++]=a<<2|u>>4,i[o++]=u<<4|l>>2,i[o++]=l<<6|c}return i}})();var Nu=typeof self==\"object\"&&self.self===self&&self||typeof global==\"object\"&&global.global===global&&global||Function(\"return this\")()||{},wu=Array.prototype,lf=Object.prototype,sb=typeof Symbol!=\"undefined\"?Symbol.prototype:null,_v=wu.push,ia=wu.slice,Du=lf.toString,fb=lf.hasOwnProperty,Fv=Array.isArray,ob=Object.keys,ab=Object.create,db=Nu.isNaN,Bv=Nu.isFinite,Qp=function(){};function Mt(e){if(e instanceof Mt)return e;if(!(this instanceof Mt))return new Mt(e);this._wrapped=e}var Vv=Mt.VERSION=\"1.10.2\";function sa(e,t,r){if(t===void 0)return e;switch(r==null?3:r){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,s){return e.call(t,n,i,s)};case 4:return function(n,i,s,o){return e.call(t,n,i,s,o)}}return function(){return e.apply(t,arguments)}}function mb(e,t,r){return e==null?bf:on(e)?sa(e,t,r):Es(e)&&!qn(e)?na(e):xf(e)}Mt.iteratee=cf;function cf(e,t){return mb(e,t,1/0)}function jr(e,t,r){return Mt.iteratee!==cf?Mt.iteratee(e,t):mb(e,t,r)}function Jr(e,t){return t=t==null?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var s=Array(t+1);for(i=0;i<t;i++)s[i]=arguments[i];return s[t]=n,e.apply(this,s)}}function yb(e){if(!Es(e))return{};if(ab)return ab(e);Qp.prototype=e;var t=new Qp;return Qp.prototype=null,t}function gb(e){return function(t){return t==null?void 0:t[e]}}function zi(e,t){return e!=null&&fb.call(e,t)}function pf(e,t){for(var r=t.length,n=0;n<r;n++){if(e==null)return;e=e[t[n]]}return r?e:void 0}var Gv=Math.pow(2,53)-1,ri=gb(\"length\");function Gr(e){var t=ri(e);return typeof t==\"number\"&&t>=0&&t<=Gv}function Di(e,t,r){t=sa(t,r);var n,i;if(Gr(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var s=cr(e);for(n=0,i=s.length;n<i;n++)t(e[s[n]],s[n],e)}return e}function Ts(e,t,r){t=jr(t,r);for(var n=!Gr(e)&&cr(e),i=(n||e).length,s=Array(i),o=0;o<i;o++){var a=n?n[o]:o;s[o]=t(e[a],a,e)}return s}function hb(e){var t=function(r,n,i,s){var o=!Gr(r)&&cr(r),a=(o||r).length,u=e>0?0:a-1;for(s||(i=r[o?o[u]:u],u+=e);u>=0&&u<a;u+=e){var l=o?o[u]:u;i=n(i,r[l],l,r)}return i};return function(r,n,i,s){var o=arguments.length>=3;return t(r,sa(n,s,4),i,o)}}var Kp=hb(1),ub=hb(-1);function rf(e,t,r){var n=Gr(e)?df:Cb,i=n(e,t,r);if(i!==void 0&&i!==-1)return e[i]}function po(e,t,r){var n=[];return t=jr(t,r),Di(e,function(i,s,o){t(i,s,o)&&n.push(i)}),n}function qv(e,t,r){return po(e,yf(jr(t)),r)}function lb(e,t,r){t=jr(t,r);for(var n=!Gr(e)&&cr(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(!t(e[o],o,e))return!1}return!0}function cb(e,t,r){t=jr(t,r);for(var n=!Gr(e)&&cr(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(t(e[o],o,e))return!0}return!1}function Gn(e,t,r,n){return Gr(e)||(e=Ms(e)),(typeof r!=\"number\"||n)&&(r=0),Sb(e,t,r)>=0}var kv=Jr(function(e,t,r){var n,i;return on(t)?i=t:qn(t)&&(n=t.slice(0,-1),t=t[t.length-1]),Ts(e,function(s){var o=i;if(!o){if(n&&n.length&&(s=pf(s,n)),s==null)return;o=s[t]}return o==null?o:o.apply(s,r)})});function ff(e,t){return Ts(e,xf(t))}function zv(e,t){return po(e,na(t))}function Uv(e,t){return rf(e,na(t))}function bb(e,t,r){var n=-1/0,i=-1/0,s,o;if(t==null||typeof t==\"number\"&&typeof e[0]!=\"object\"&&e!=null){e=Gr(e)?e:Ms(e);for(var a=0,u=e.length;a<u;a++)s=e[a],s!=null&&s>n&&(n=s)}else t=jr(t,r),Di(e,function(l,c,p){o=t(l,c,p),(o>i||o===-1/0&&n===-1/0)&&(n=l,i=o)});return n}function Hv(e,t,r){var n=1/0,i=1/0,s,o;if(t==null||typeof t==\"number\"&&typeof e[0]!=\"object\"&&e!=null){e=Gr(e)?e:Ms(e);for(var a=0,u=e.length;a<u;a++)s=e[a],s!=null&&s<n&&(n=s)}else t=jr(t,r),Di(e,function(l,c,p){o=t(l,c,p),(o<i||o===1/0&&n===1/0)&&(n=l,i=o)});return n}function $v(e){return xb(e,1/0)}function xb(e,t,r){if(t==null||r)return Gr(e)||(e=Ms(e)),e[of(e.length-1)];var n=Gr(e)?Bb(e):Ms(e),i=ri(n);t=Math.max(Math.min(t,i),0);for(var s=i-1,o=0;o<t;o++){var a=of(o,s),u=n[o];n[o]=n[a],n[a]=u}return n.slice(0,t)}function Wv(e,t,r){var n=0;return t=jr(t,r),ff(Ts(e,function(i,s,o){return{value:i,index:n++,criteria:t(i,s,o)}}).sort(function(i,s){var o=i.criteria,a=s.criteria;if(o!==a){if(o>a||o===void 0)return 1;if(o<a||a===void 0)return-1}return i.index-s.index}),\"value\")}function Lu(e,t){return function(r,n,i){var s=t?[[],[]]:{};return n=jr(n,i),Di(r,function(o,a){var u=n(o,a,r);e(s,o,u)}),s}}var Yv=Lu(function(e,t,r){zi(e,r)?e[r].push(t):e[r]=[t]}),Xv=Lu(function(e,t,r){e[r]=t}),Jv=Lu(function(e,t,r){zi(e,r)?e[r]++:e[r]=1}),jv=/[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;function Zv(e){return e?qn(e)?ia.call(e):hf(e)?e.match(jv):Gr(e)?Ts(e,bf):Ms(e):[]}function Qv(e){return e==null?0:Gr(e)?e.length:cr(e).length}var Kv=Lu(function(e,t,r){e[r?0:1].push(t)},!0);function ef(e,t,r){return e==null||e.length<1?t==null?void 0:[]:t==null||r?e[0]:Pb(e,e.length-t)}function Pb(e,t,r){return ia.call(e,0,Math.max(0,e.length-(t==null||r?1:t)))}function eE(e,t,r){return e==null||e.length<1?t==null?void 0:[]:t==null||r?e[e.length-1]:Ou(e,Math.max(0,e.length-t))}function Ou(e,t,r){return ia.call(e,t==null||r?1:t)}function tE(e){return po(e,Boolean)}function vs(e,t,r,n){n=n||[];for(var i=n.length,s=0,o=ri(e);s<o;s++){var a=e[s];if(Gr(a)&&(qn(a)||ra(a)))if(t)for(var u=0,l=a.length;u<l;)n[i++]=a[u++];else vs(a,t,r,n),i=n.length;else r||(n[i++]=a)}return n}function rE(e,t){return vs(e,t,!1)}var nE=Jr(function(e,t){return Au(e,t)});function Is(e,t,r,n){zb(t)||(n=r,r=t,t=!1),r!=null&&(r=jr(r,n));for(var i=[],s=[],o=0,a=ri(e);o<a;o++){var u=e[o],l=r?r(u,o,e):u;t&&!r?((!o||s!==l)&&i.push(u),s=l):r?Gn(s,l)||(s.push(l),i.push(u)):Gn(i,u)||i.push(u)}return i}var iE=Jr(function(e){return Is(vs(e,!0,!0))});function sE(e){for(var t=[],r=arguments.length,n=0,i=ri(e);n<i;n++){var s=e[n];if(!Gn(t,s)){var o;for(o=1;o<r&&Gn(arguments[o],s);o++);o===r&&t.push(s)}}return t}var Au=Jr(function(e,t){return t=vs(t,!0,!0),po(e,function(r){return!Gn(t,r)})});function Tb(e){for(var t=e&&bb(e,ri).length||0,r=Array(t),n=0;n<t;n++)r[n]=ff(e,n);return r}var oE=Jr(Tb);function aE(e,t){for(var r={},n=0,i=ri(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r}function Ib(e){return function(t,r,n){r=jr(r,n);for(var i=ri(t),s=e>0?0:i-1;s>=0&&s<i;s+=e)if(r(t[s],s,t))return s;return-1}}var df=Ib(1),Mb=Ib(-1);function vb(e,t,r,n){r=jr(r,n,1);for(var i=r(t),s=0,o=ri(e);s<o;){var a=Math.floor((s+o)/2);r(e[a])<i?s=a+1:o=a}return s}function Eb(e,t,r){return function(n,i,s){var o=0,a=ri(n);if(typeof s==\"number\")e>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(r&&s&&a)return s=r(n,i),n[s]===i?s:-1;if(i!==i)return s=t(ia.call(n,o,a),kb),s>=0?s+o:-1;for(s=e>0?o:a-1;s>=0&&s<a;s+=e)if(n[s]===i)return s;return-1}}var Sb=Eb(1,df,vb),uE=Eb(-1,Mb);function lE(e,t,r){t==null&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),s=0;s<n;s++,e+=r)i[s]=e;return i}function cE(e,t){if(t==null||t<1)return[];for(var r=[],n=0,i=e.length;n<i;)r.push(ia.call(e,n,n+=t));return r}function Ob(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var s=yb(e.prototype),o=e.apply(s,i);return Es(o)?o:s}var Nb=Jr(function(e,t,r){if(!on(e))throw new TypeError(\"Bind must be called on a function\");var n=Jr(function(i){return Ob(e,n,t,this,r.concat(i))});return n}),fo=Jr(function(e,t){var r=fo.placeholder,n=function(){for(var i=0,s=t.length,o=Array(s),a=0;a<s;a++)o[a]=t[a]===r?arguments[i++]:t[a];for(;i<arguments.length;)o.push(arguments[i++]);return Ob(e,n,this,this,o)};return n});fo.placeholder=Mt;var pE=Jr(function(e,t){t=vs(t,!1,!1);var r=t.length;if(r<1)throw new Error(\"bindAll must be passed function names\");for(;r--;){var n=t[r];e[n]=Nb(e[n],e)}});function fE(e,t){var r=function(n){var i=r.cache,s=\"\"+(t?t.apply(this,arguments):n);return zi(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return r.cache={},r}var mf=Jr(function(e,t,r){return setTimeout(function(){return e.apply(null,r)},t)}),dE=fo(mf,Mt,1);function mE(e,t,r){var n,i,s,o,a=0;r||(r={});var u=function(){a=r.leading===!1?0:af(),n=null,o=e.apply(i,s),n||(i=s=null)},l=function(){var c=af();!a&&r.leading===!1&&(a=c);var p=t-(c-a);return i=this,s=arguments,p<=0||p>t?(n&&(clearTimeout(n),n=null),a=c,o=e.apply(i,s),n||(i=s=null)):!n&&r.trailing!==!1&&(n=setTimeout(u,p)),o};return l.cancel=function(){clearTimeout(n),a=0,n=i=s=null},l}function yE(e,t,r){var n,i,s=function(a,u){n=null,u&&(i=e.apply(a,u))},o=Jr(function(a){if(n&&clearTimeout(n),r){var u=!n;n=setTimeout(s,t),u&&(i=e.apply(this,a))}else n=mf(s,t,this,a);return i});return o.cancel=function(){clearTimeout(n),n=null},o}function gE(e,t){return fo(t,e)}function yf(e){return function(){return!e.apply(this,arguments)}}function hE(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}}function bE(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function Db(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}var xE=fo(Db,2),Rb=!{toString:null}.propertyIsEnumerable(\"toString\"),pb=[\"valueOf\",\"isPrototypeOf\",\"toString\",\"propertyIsEnumerable\",\"hasOwnProperty\",\"toLocaleString\"];function wb(e,t){var r=pb.length,n=e.constructor,i=on(n)&&n.prototype||lf,s=\"constructor\";for(zi(e,s)&&!Gn(t,s)&&t.push(s);r--;)s=pb[r],s in e&&e[s]!==i[s]&&!Gn(t,s)&&t.push(s)}function cr(e){if(!Es(e))return[];if(ob)return ob(e);var t=[];for(var r in e)zi(e,r)&&t.push(r);return Rb&&wb(e,t),t}function Cu(e){if(!Es(e))return[];var t=[];for(var r in e)t.push(r);return Rb&&wb(e,t),t}function Ms(e){for(var t=cr(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n}function PE(e,t,r){t=jr(t,r);for(var n=cr(e),i=n.length,s={},o=0;o<i;o++){var a=n[o];s[a]=t(e[a],a,e)}return s}function TE(e){for(var t=cr(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n}function Lb(e){for(var t={},r=cr(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t}function nf(e){var t=[];for(var r in e)on(e[r])&&t.push(r);return t.sort()}function gf(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||r==null)return r;for(var i=1;i<n;i++)for(var s=arguments[i],o=e(s),a=o.length,u=0;u<a;u++){var l=o[u];(!t||r[l]===void 0)&&(r[l]=s[l])}return r}}var Ab=gf(Cu),Ru=gf(cr);function Cb(e,t,r){t=jr(t,r);for(var n=cr(e),i,s=0,o=n.length;s<o;s++)if(i=n[s],t(e[i],i,e))return i}function IE(e,t,r){return t in r}var _b=Jr(function(e,t){var r={},n=t[0];if(e==null)return r;on(n)?(t.length>1&&(n=sa(n,t[1])),t=Cu(e)):(n=IE,t=vs(t,!1,!1),e=Object(e));for(var i=0,s=t.length;i<s;i++){var o=t[i],a=e[o];n(a,o,e)&&(r[o]=a)}return r}),ME=Jr(function(e,t){var r=t[0],n;return on(r)?(r=yf(r),t.length>1&&(n=t[1])):(t=Ts(vs(t,!1,!1),String),r=function(i,s){return!Gn(t,s)}),_b(e,r,n)}),Fb=gf(Cu,!0);function vE(e,t){var r=yb(e);return t&&Ru(r,t),r}function Bb(e){return Es(e)?qn(e)?e.slice():Ab({},e):e}function EE(e,t){return t(e),e}function Vb(e,t){var r=cr(t),n=r.length;if(e==null)return!n;for(var i=Object(e),s=0;s<n;s++){var o=r[s];if(t[o]!==i[o]||!(o in i))return!1}return!0}function sf(e,t,r,n){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var i=typeof e;return i!==\"function\"&&i!==\"object\"&&typeof t!=\"object\"?!1:SE(e,t,r,n)}function SE(e,t,r,n){e instanceof Mt&&(e=e._wrapped),t instanceof Mt&&(t=t._wrapped);var i=Du.call(e);if(i!==Du.call(t))return!1;switch(i){case\"[object RegExp]\":case\"[object String]\":return\"\"+e==\"\"+t;case\"[object Number]\":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case\"[object Date]\":case\"[object Boolean]\":return+e==+t;case\"[object Symbol]\":return sb.valueOf.call(e)===sb.valueOf.call(t)}var s=i===\"[object Array]\";if(!s){if(typeof e!=\"object\"||typeof t!=\"object\")return!1;var o=e.constructor,a=t.constructor;if(o!==a&&!(on(o)&&o instanceof o&&on(a)&&a instanceof a)&&\"constructor\"in e&&\"constructor\"in t)return!1}r=r||[],n=n||[];for(var u=r.length;u--;)if(r[u]===e)return n[u]===t;if(r.push(e),n.push(t),s){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!sf(e[u],t[u],r,n))return!1}else{var l=cr(e),c;if(u=l.length,cr(t).length!==u)return!1;for(;u--;)if(c=l[u],!(zi(t,c)&&sf(e[c],t[c],r,n)))return!1}return r.pop(),n.pop(),!0}function Ri(e,t){return sf(e,t)}function OE(e){return e==null?!0:Gr(e)&&(qn(e)||hf(e)||ra(e))?e.length===0:cr(e).length===0}function NE(e){return!!(e&&e.nodeType===1)}function an(e){return function(t){return Du.call(t)===\"[object \"+e+\"]\"}}var qn=Fv||an(\"Array\");function Es(e){var t=typeof e;return t===\"function\"||t===\"object\"&&!!e}var ra=an(\"Arguments\"),on=an(\"Function\"),hf=an(\"String\"),Gb=an(\"Number\"),DE=an(\"Date\"),RE=an(\"RegExp\"),wE=an(\"Error\"),qb=an(\"Symbol\"),LE=an(\"Map\"),AE=an(\"WeakMap\"),CE=an(\"Set\"),_E=an(\"WeakSet\");(function(){ra(arguments)||(ra=function(e){return zi(e,\"callee\")})})();var FE=Nu.document&&Nu.document.childNodes;typeof/./!=\"function\"&&typeof Int8Array!=\"object\"&&typeof FE!=\"function\"&&(on=function(e){return typeof e==\"function\"||!1});function BE(e){return!qb(e)&&Bv(e)&&!db(parseFloat(e))}function kb(e){return Gb(e)&&db(e)}function zb(e){return e===!0||e===!1||Du.call(e)===\"[object Boolean]\"}function VE(e){return e===null}function GE(e){return e===void 0}function qE(e,t){if(!qn(t))return zi(e,t);for(var r=t.length,n=0;n<r;n++){var i=t[n];if(e==null||!fb.call(e,i))return!1;e=e[i]}return!!r}function bf(e){return e}function kE(e){return function(){return e}}function zE(){}function xf(e){return qn(e)?function(t){return pf(t,e)}:gb(e)}function UE(e){return e==null?function(){}:function(t){return qn(t)?pf(e,t):e[t]}}function na(e){return e=Ru({},e),function(t){return Vb(t,e)}}function HE(e,t,r){var n=Array(Math.max(0,e));t=sa(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n}function of(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}var af=Date.now||function(){return new Date().getTime()},Ub={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\",\"`\":\"&#x60;\"},$E=Lb(Ub);function Hb(e){var t=function(s){return e[s]},r=\"(?:\"+cr(e).join(\"|\")+\")\",n=RegExp(r),i=RegExp(r,\"g\");return function(s){return s=s==null?\"\":\"\"+s,n.test(s)?s.replace(i,t):s}}var Pf=Hb(Ub),WE=Hb($E);function YE(e,t,r){qn(t)||(t=[t]);var n=t.length;if(!n)return on(r)?r.call(e):r;for(var i=0;i<n;i++){var s=e==null?void 0:e[t[i]];s===void 0&&(s=r,i=n),e=on(s)?s.call(e):s}return e}var XE=0;function JE(e){var t=++XE+\"\";return e?e+t:t}var jE=Mt.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g},tf=/(.)^/,ZE={\"'\":\"'\",\"\\\\\":\"\\\\\",\"\\r\":\"r\",\"\\n\":\"n\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},QE=/\\\\|'|\\r|\\n|\\u2028|\\u2029/g,KE=function(e){return\"\\\\\"+ZE[e]};function e1(e,t,r){!t&&r&&(t=r),t=Fb({},t,Mt.templateSettings);var n=RegExp([(t.escape||tf).source,(t.interpolate||tf).source,(t.evaluate||tf).source].join(\"|\")+\"|$\",\"g\"),i=0,s=\"__p+='\";e.replace(n,function(l,c,p,f,m){return s+=e.slice(i,m).replace(QE,KE),i=m+l.length,c?s+=`'+\n((__t=(`+c+`))==null?'':_.escape(__t))+\n'`:p?s+=`'+\n((__t=(`+p+`))==null?'':__t)+\n'`:f&&(s+=`';\n`+f+`\n__p+='`),l}),s+=`';\n`,t.variable||(s=`with(obj||{}){\n`+s+`}\n`),s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n`+s+`return __p;\n`;var o;try{o=new Function(t.variable||\"obj\",\"_\",s)}catch(l){throw l.source=s,l}var a=function(l){return o.call(this,l,Mt)},u=t.variable||\"obj\";return a.source=\"function(\"+u+`){\n`+s+\"}\",a}function t1(e){var t=Mt(e);return t._chain=!0,t}function Tf(e,t){return e._chain?Mt(t).chain():t}function $b(e){return Di(nf(e),function(t){var r=Mt[t]=e[t];Mt.prototype[t]=function(){var n=[this._wrapped];return _v.apply(n,arguments),Tf(this,r.apply(Mt,n))}}),Mt}Di([\"pop\",\"push\",\"reverse\",\"shift\",\"sort\",\"splice\",\"unshift\"],function(e){var t=wu[e];Mt.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),(e===\"shift\"||e===\"splice\")&&r.length===0&&delete r[0],Tf(this,r)}});Di([\"concat\",\"join\",\"slice\"],function(e){var t=wu[e];Mt.prototype[e]=function(){return Tf(this,t.apply(this._wrapped,arguments))}});Mt.prototype.value=function(){return this._wrapped};Mt.prototype.valueOf=Mt.prototype.toJSON=Mt.prototype.value;Mt.prototype.toString=function(){return String(this._wrapped)};var r1={default:Mt,VERSION:Vv,iteratee:cf,restArguments:Jr,each:Di,forEach:Di,map:Ts,collect:Ts,reduce:Kp,foldl:Kp,inject:Kp,reduceRight:ub,foldr:ub,find:rf,detect:rf,filter:po,select:po,reject:qv,every:lb,all:lb,some:cb,any:cb,contains:Gn,includes:Gn,include:Gn,invoke:kv,pluck:ff,where:zv,findWhere:Uv,max:bb,min:Hv,shuffle:$v,sample:xb,sortBy:Wv,groupBy:Yv,indexBy:Xv,countBy:Jv,toArray:Zv,size:Qv,partition:Kv,first:ef,head:ef,take:ef,initial:Pb,last:eE,rest:Ou,tail:Ou,drop:Ou,compact:tE,flatten:rE,without:nE,uniq:Is,unique:Is,union:iE,intersection:sE,difference:Au,unzip:Tb,zip:oE,object:aE,findIndex:df,findLastIndex:Mb,sortedIndex:vb,indexOf:Sb,lastIndexOf:uE,range:lE,chunk:cE,bind:Nb,partial:fo,bindAll:pE,memoize:fE,delay:mf,defer:dE,throttle:mE,debounce:yE,wrap:gE,negate:yf,compose:hE,after:bE,before:Db,once:xE,keys:cr,allKeys:Cu,values:Ms,mapObject:PE,pairs:TE,invert:Lb,functions:nf,methods:nf,extend:Ab,extendOwn:Ru,assign:Ru,findKey:Cb,pick:_b,omit:ME,defaults:Fb,create:vE,clone:Bb,tap:EE,isMatch:Vb,isEqual:Ri,isEmpty:OE,isElement:NE,isArray:qn,isObject:Es,isArguments:ra,isFunction:on,isString:hf,isNumber:Gb,isDate:DE,isRegExp:RE,isError:wE,isSymbol:qb,isMap:LE,isWeakMap:AE,isSet:CE,isWeakSet:_E,isFinite:BE,isNaN:kb,isBoolean:zb,isNull:VE,isUndefined:GE,has:qE,identity:bf,constant:kE,noop:zE,property:xf,propertyOf:UE,matcher:na,matches:na,times:HE,random:of,now:af,escape:Pf,unescape:WE,result:YE,uniqueId:JE,templateSettings:jE,template:e1,chain:t1,mixin:$b},uf=$b(r1);uf._=uf;var wA=uf;var Wb=function(){{var e=function(){},t=[\"log\",\"info\",\"warn\",\"error\",\"assert\",\"dir\",\"clear\",\"profile\",\"profileEnd\",\"time\",\"timeEnd\",\"group\",\"groupCollapsed\",\"groupEnd\",\"trace\"],r={},n=function(i){typeof window!=\"undefined\"&&window.console&&window.console[i]?r[i]=function(){Function.prototype.apply.call(window.console[i],window.console,arguments)}:r[i]=e};return t.forEach(n),r}}(),LA=Wb,{log:AA,warn:CA,error:_A,assert:FA,dir:BA,clear:VA,profile:GA,profileEnd:qA,time:kA,timeEnd:zA,group:UA,groupCollapsed:HA,groupEnd:$A,trace:WA}=Wb;var Wu={};In(Wu,{getFrame:()=>m1});function un(e,t,r){return{input:e,start:t,end:r}}function Mn(e,t){return un(e,t,t)}function ln(e,t){if(e.input!==t.input)throw new Error(\"Programming Error: cannot form a span on different inputs\");return un(e.input,e.start,t.end)}function Pr(e){return e.input.slice(e.start,e.end)}var ni=()=>({type:\"empty\"}),Tr=()=>({type:\"unknown\"}),kn=e=>isNaN(e[0])||isNaN(e[1])||e[1]<e[0]?ni():{type:\"known\",bounds:e},mo=(e,t)=>{if(t===0)return e>0?zn():ni();let r=-e/t,n=t<0?[-1/0,r]:[r,1/0];return kn(n)},zn=()=>kn([-1/0,1/0]),Or=(e,t)=>{if(e.type===\"empty\"||t.type===\"empty\")return ni();if(e.type===\"unknown\"||t.type===\"unknown\")return Tr();if(e.bounds&&t.bounds){let r=[Math.max(e.bounds[0],t.bounds[0]),Math.min(e.bounds[1],t.bounds[1])];return kn(r)}return ni()};var me={};In(me,{Action:()=>Ge,AngleMarker:()=>xe,Any:()=>Jt,Arc:()=>X,Bool:()=>be,Circle:()=>Q,DirectedAngleMarker:()=>le,Distribution:()=>Dt,EmptyList:()=>de,ErrorType:()=>vn,Line:()=>J,ListOfAngleMarker:()=>Et,ListOfAny:()=>vt,ListOfArc:()=>Zt,ListOfBool:()=>pr,ListOfCircle:()=>jt,ListOfColor:()=>rr,ListOfDirectedAngleMarker:()=>St,ListOfDistribution:()=>Wt,ListOfLine:()=>Qt,ListOfNumber:()=>Y,ListOfPoint:()=>Le,ListOfPolygon:()=>zt,ListOfRay:()=>Kt,ListOfSegment:()=>Ct,ListOfTransformation:()=>Ir,Number:()=>I,Point:()=>w,Polygon:()=>ye,RGBColor:()=>et,Ray:()=>ge,SeedType:()=>tt,Segment:()=>ue,Transformation:()=>Se,assertTypeIsOneOf:()=>ua,elementType:()=>ot,hasListType:()=>En,isGeometryType:()=>Mf,isList:()=>k,isOneOf:()=>_u,isSubType:()=>Ss,isTypeOrListOfType:()=>pe,isValidOnLogScales:()=>aa,listType:()=>Qr,prettyPrint:()=>Z,repr:()=>Zr,typesMatch:()=>Fu});function T(e,t){return{key:e,vars:t}}var Jt=0,I=1,be=2,w=3,Dt=4,Ge=5,vt=6,Y=7,pr=8,Le=9,Wt=10,de=11,vn=12,tt=13,et=14,rr=15,ye=16,zt=17,ue=18,Ct=19,Q=20,jt=21,X=22,Zt=23,J=24,Qt=25,ge=26,Kt=27,xe=28,Et=29,le=30,St=31,Se=32,Ir=33;function Zr(e){switch(e){case Jt:return\"Any\";case I:return\"Number\";case be:return\"Bool\";case w:return\"Point\";case Dt:return\"Distribution\";case Ge:return\"Action\";case vt:return\"ListOfAny\";case Y:return\"ListOfNumber\";case pr:return\"ListOfBool\";case Le:return\"ListOfPoint\";case Wt:return\"ListOfDistribution\";case de:return\"EmptyList\";case vn:return\"ErrorType\";case tt:return\"SeedType\";case et:return\"RGBColor\";case rr:return\"ListOfColor\";case ye:return\"Polygon\";case zt:return\"ListOfPolygon\";case ue:return\"Segment\";case Ct:return\"ListOfSegment\";case Q:return\"Circle\";case jt:return\"ListOfCircle\";case X:return\"Arc\";case Zt:return\"ListOfArc\";case J:return\"Line\";case Qt:return\"ListOfLine\";case ge:return\"Ray\";case Kt:return\"ListOfRay\";case xe:return\"Angle\";case Et:return\"ListOfAngle\";case le:return\"DirectedAngle\";case St:return\"ListOfDirectedAngle\";case Se:return\"Transformation\";case Ir:return\"ListOfTransformation\";default:let t=e;throw new Error(`Invalid type: ${t}`)}}function Z(e){switch(e){case Jt:return T(\"shared-calculator-label-value-type-any\");case I:return T(\"shared-calculator-label-value-type-number\");case be:return T(\"shared-calculator-label-value-type-bool\");case w:return T(\"shared-calculator-label-value-type-point\");case Dt:return T(\"shared-calculator-label-value-type-distribution\");case Ge:return T(\"shared-calculator-label-value-type-action\");case vt:return T(\"shared-calculator-label-value-type-list-of-any\");case Y:return T(\"shared-calculator-label-value-type-list-of-numbers\");case pr:return T(\"shared-calculator-label-value-type-list-of-bool\");case Le:return T(\"shared-calculator-label-value-type-list-of-points\");case Wt:return T(\"shared-calculator-label-value-type-list-of-distributions\");case de:return T(\"shared-calculator-label-value-type-empty-list\");case vn:return T(\"shared-calculator-label-value-type-error\");case tt:return T(\"shared-calculator-label-value-type-seed\");case et:return T(\"shared-calculator-label-value-type-color\");case rr:return T(\"shared-calculator-label-value-type-list-of-colors\");case ye:return T(\"shared-calculator-label-value-type-polygon\");case zt:return T(\"shared-calculator-label-value-type-list-of-polygons\");case ue:return T(\"shared-calculator-label-value-type-segment\");case Ct:return T(\"shared-calculator-label-value-type-list-of-segments\");case Q:return T(\"shared-calculator-label-value-type-circle\");case jt:return T(\"shared-calculator-label-value-type-list-of-circles\");case X:return T(\"shared-calculator-label-value-type-arc\");case Zt:return T(\"shared-calculator-label-value-type-list-of-arcs\");case J:return T(\"shared-calculator-label-value-type-line\");case Qt:return T(\"shared-calculator-label-value-type-list-of-lines\");case ge:return T(\"shared-calculator-label-value-type-ray\");case Kt:return T(\"shared-calculator-label-value-type-list-of-rays\");case xe:return T(\"shared-calculator-label-value-type-angle\");case Et:return T(\"shared-calculator-label-value-type-list-of-angles\");case le:return T(\"shared-calculator-label-value-type-directed-angle\");case St:return T(\"shared-calculator-label-value-type-list-of-directed-angles\");case Se:return T(\"shared-calculator-label-value-type-transformation\");case Ir:return T(\"shared-calculator-label-value-type-list-of-transformations\");default:let t=e;throw new Error(`Invalid type: ${t}`)}}var XA={[vt]:Jt,[de]:I,[Y]:I,[pr]:be,[Le]:w,[Wt]:Dt,[rr]:et,[zt]:ye,[Ct]:ue,[jt]:Q,[Zt]:X,[Qt]:J,[Kt]:ge,[Et]:xe,[St]:le,[Ir]:Se};function k(e){switch(e){case vt:case Y:case pr:case Le:case Wt:case rr:case zt:case Ct:case jt:case Zt:case Qt:case Kt:case Et:case St:case Ir:case de:return!0;case Jt:case I:case be:case w:case Dt:case vn:case tt:case et:case Ge:case ye:case ue:case Q:case X:case J:case ge:case xe:case le:case Se:return!1;default:throw new Error(`Invalid type: ${e}`)}}function ot(e){switch(e){case de:case Y:return I;case pr:return be;case Le:return w;case Wt:return Dt;case rr:return et;case zt:return ye;case vt:return Jt;case Ct:return ue;case jt:return Q;case Zt:return X;case Qt:return J;case Kt:return ge;case Et:return xe;case St:return le;case Ir:return Se;case Jt:case I:case be:case w:case Dt:case vn:case tt:case et:case Ge:case ye:case ue:case Q:case X:case J:case ge:case xe:case le:case Se:throw new Error(\"Type \"+Zr(e)+\" does not implement elementType.\");default:let t=e;throw new Error(`Invalid type: ${t}`)}}function Qr(e){switch(e){case Jt:return vt;case I:return Y;case be:return pr;case w:return Le;case Dt:return Wt;case et:return rr;case ye:return zt;case ue:return Ct;case Q:return jt;case X:return Zt;case J:return Qt;case ge:return Kt;case xe:return Et;case le:return St;case Se:return Ir;case de:case Y:case pr:case Le:case Wt:case rr:case zt:case Ct:case jt:case Zt:case Qt:case Kt:case Et:case St:case Ir:case vt:case vn:case tt:case Ge:throw new Error(\"Type \"+Zr(e)+\" does not implement listType.\");default:let t=e;throw new Error(`Invalid type: ${t}`)}}function En(e){switch(e){case Jt:case I:case be:case w:case Dt:case et:case ye:case ue:case Q:case X:case J:case ge:case xe:case le:case Se:return!0;case de:case Y:case pr:case Le:case Wt:case rr:case zt:case Ct:case jt:case Zt:case Qt:case Kt:case Et:case St:case Ir:case vt:case tt:case Ge:case vn:return!1;default:throw new Error(`Invalid type: ${e}`)}}function Mf(e){switch(e){case w:case ye:case ue:case Q:case X:case J:case ge:case xe:case le:case Se:return!0;default:return!1}}function aa(e){switch(e){case I:case Jt:case be:case w:case Dt:case Ge:case vt:case Y:case pr:case Le:case Wt:case de:case vn:case tt:case et:case rr:return!0;case ye:case zt:case ue:case Ct:case Q:case jt:case X:case Zt:case J:case Qt:case ge:case Kt:case xe:case Et:case le:case St:case Se:case Ir:return!1;default:let t=e;throw new Error(`Invalid type: ${t}`)}}function _u(e,t){for(let r of t)if(e===r)return!0;return!1}function Ss(e,t){return e===de&&k(t)||t===vt&&k(e)?!0:e===t}function Fu(e,t){return Ss(e,t)||Ss(t,e)}function pe(e,t){return e===t?!0:k(e)?e===de?!0:ot(e)===t:!1}function ua(e,t){if(!_u(e,t))throw new Error(`Programming error: expected one of ${t.map(Z)} but found ${e} instead.`)}var qe=class{constructor(){this.exportPenalty=0;this._dependencies=[],this._dummyDependencies=[],this._updateSymbols=[],this._substitutionSymbols=[],this._scope={definitions:[],dependencies:[],substitutionDependencies:[],isSubstitutionBody:!1,scopes:[]},this._exports=[]}setInputSpan(t){this._inputSpan=t}getInputString(){return this._inputSpan===void 0?\"\":Pr(this._inputSpan)}getInputSpan(){return this._inputSpan}shouldExportAns(){return!1}getAnsVariable(){return this.shouldExportAns()&&this.userData&&this.userData.hasOwnProperty(\"index\")?[\"ans_\"+this.userData.index]:[]}addDependency(t){this._dependencies.indexOf(t)===-1&&this._dependencies.push(t),this._scope.dependencies.indexOf(t)===-1&&this._scope.dependencies.push(t)}addDependencies(t){for(var r=0;r<t.length;r++)this.addDependency(t[r])}addDummyDependency(t){this._dependencies.indexOf(t)===-1&&this._dependencies.push(t),this._dummyDependencies.indexOf(t)===-1&&this._dummyDependencies.push(t)}addDummyDependencies(t){for(var r=0;r<t.length;r++)this.addDummyDependency(t[r])}addUpdateSymbol(t){this._dependencies.indexOf(t)===-1&&this._dependencies.push(t),this._updateSymbols.indexOf(t)===-1&&this._updateSymbols.push(t)}addSubstitutionSymbol(t){this._dummyDependencies.indexOf(t)===-1&&this._dummyDependencies.push(t),this._substitutionSymbols.indexOf(t)===-1&&this._substitutionSymbols.push(t)}addSubstitutionDependencies(t){for(var r=0;r<t.length;r++){var n=t[r];if(this._dependencies.indexOf(n)===-1)throw new Error(\"Programming error: substitution dependency \"+n+\" must also be registered as a regular dependency\");this._scope.substitutionDependencies.indexOf(n)===-1&&this._scope.substitutionDependencies.push(n)}}mergeDependencies(...t){for(var r=0;r<t.length;r++){var n=t[r],i;for(i=0;i<n._dependencies.length;i++)this._dependencies.indexOf(n._dependencies[i])===-1&&this._dependencies.push(n._dependencies[i]);for(i=0;i<n._updateSymbols.length;i++)this._updateSymbols.indexOf(n._updateSymbols[i])===-1&&this._updateSymbols.push(n._updateSymbols[i]);for(i=0;i<n._substitutionSymbols.length;i++)this._substitutionSymbols.indexOf(n._substitutionSymbols[i])===-1&&this._substitutionSymbols.push(n._substitutionSymbols[i]);for(i=0;i<n._scope.dependencies.length;i++)this._scope.dependencies.indexOf(n._scope.dependencies[i])===-1&&this._scope.dependencies.push(n._scope.dependencies[i]);for(i=0;i<n._scope.substitutionDependencies.length;i++)this._scope.substitutionDependencies.indexOf(n._scope.substitutionDependencies[i])===-1&&this._scope.substitutionDependencies.push(n._scope.substitutionDependencies[i]);this.addDummyDependencies(n.getDummyDependencies()),Array.prototype.push.apply(this._scope.scopes,n._scope.scopes)}}mergeDependenciesInScope(t,r,n){this.addDummyDependencies(t);var i=r.getScope(),s={definitions:t,dependencies:i.dependencies,substitutionDependencies:i.substitutionDependencies,scopes:i.scopes,isSubstitutionBody:!!(n&&n.isSubstitutionBody)};this._scope.scopes.push(s);for(var o=0;o<r._dependencies.length;o++)this._dependencies.indexOf(r._dependencies[o])===-1&&this._dependencies.push(r._dependencies[o]);for(o=0;o<r._updateSymbols.length;o++)this._updateSymbols.indexOf(r._updateSymbols[o])===-1&&this._updateSymbols.push(r._updateSymbols[o]);for(o=0;o<r._substitutionSymbols.length;o++)this._substitutionSymbols.indexOf(r._substitutionSymbols[o])===-1&&this._substitutionSymbols.push(r._substitutionSymbols[o]);this.addDummyDependencies(r.getDummyDependencies())}getDependencies(){return this._dependencies}getDummyDependencies(){return this._dummyDependencies}getUpdateSymbols(){return this._updateSymbols}getSubstitutionSymbols(){return this._substitutionSymbols}getScope(){return this._scope}dependsOn(t){return this._dependencies.indexOf(t)>-1}getExports(){var t=this._exports||[];if(this.userData&&\"id\"in this.userData){var r=this.userData.id;t=t.concat([\"idref_\"+r])}return t.concat(this.getAnsVariable())}getLegalExports(t){return this.getExports().filter(function(r){return!t.assignmentForbidden(r)})}exportsSymbol(t){return this._exports.indexOf(t)>-1}exportTo(t,r,n){for(var i=this.getLegalExports(t),s=0;s<i.length;s++){var o=i[s];if(n[o])return;n[o]=r.blocksExport?r:this}}getOperator(){return this.operator||\"=\"}isInequality(){return!1}isShadeBetween(){return!1}getAllIds(){return this.userData?[this.userData.id]:[]}getEvaluationInfo(){return!1}shouldPromoteToSlider(t){return!1}getSliderVariables(t,r){var n=t.sliderVariables(r.getDependencies());return r.valueType===w||r.valueType===Le?n.filter(function(i){return!t.validParametricVariable(i)}):n}getCompiledDerivative(){var t=this.getDependencies(),n=this.takeDerivative(t[0]||\"x\");return n.getCompiledFunction()}asValue(){}boundDomain(t){return Tr()}polynomialOrder(t){}getPolynomialCoefficients(t){}asTypedValue(){}substitute(t){}getExpressionType(t,r){}tableInfo(t,r){}analyzeFourFunction(t,r,n){}analyzeScientific(t,r,n){}analyzeSingleExpressionScientific(t,r,n){}getGraphMode(t,r){}};var V=class extends qe{constructor(r,n){if(!Array.isArray(r))throw new TypeError(\"Argument to expression constructor must be an Array.\");super();this.args=r,(!n||!n.skipRegisterDependencies)&&this.registerDependencies()}shouldExportAns(){return!0}registerDependencies(){for(var r=0;r<this.args.length;r++)this.mergeDependencies(this.args[r])}copyWithArgs(r){return new this.constructor(r)}};function wi(e,t=1e6){if(e===1/0)return{n:1/0,d:1};if(e===-1/0)return{n:-1/0,d:1};if(!isFinite(e))return{n:NaN,d:1};let r,n=0,i=1,s=1,o=0,a,u;for(;r=Math.floor(e),a=r*i+n,u=r*o+s,!(u>t||(n=i,s=o,i=a,o=u,e===r));)e=1/(e-r);return{n:i,d:o}}var fr=Math,Os=fr.cosh||function(e){return .5*(Math.exp(e)+Math.exp(-e))},go=fr.sinh&&fr.sinh(1e-20)!==0?fr.sinh:function(e){let t=e>0?1:-1;return e=e>0?e:-e,-t*.5*Math.exp(e)*ku(-2*e)},Bu=fr.tanh&&fr.tanh(1e-20)!==0?fr.tanh:function(e){let t=e>0?1:-1;e=e>0?e:-e;let r=ku(-2*e);return-t*r/(2+r)},Vu=fr.acosh||function(e){return e<1?NaN:Math.log(e+Ef(e))},Gu=fr.asinh&&fr.asinh(1e-20)!==0?fr.asinh:function(e){let t=e>0?1:-1;return e=e>0?e:-e,1+e*e===1?t*ii(e):t*Math.log(e+vf(e))},qu=fr.atanh&&fr.atanh(1e-20)!==0?fr.atanh:function(e){return .5*(ii(e)-ii(-e))},ku=fr.expm1||function(e){return e+.5*e*e===e?e:Math.exp(e)-1},ii=fr.log1p||function(e){return e-.5*e*e===e?e:Math.log(1+e)},vf=function(e){let t=e*e;return 1+t===1?1:1+t===t?Math.abs(e):Math.sqrt(t+1)},Ef=function(e){let t=e*e;return t<1?NaN:t-1===t?Math.abs(e):Math.sqrt(t-1)},la=fr.sign||function(e){return e===0?0:e>0?1:e<0?-1:NaN},n1=fr.hypot&&fr.hypot(1/0,NaN)===1/0,si=n1?fr.hypot:function(...e){let t=0,r=0;for(let n of e){let i=Math.abs(n);if(i===1/0)return 1/0;i>t&&(r*=t/i*(t/i),t=i),r+=i===0&&t===0?0:i/t*(i/t)}return t*Math.sqrt(r)};function Jb(e,t,r){if(e=ho(e),r>0){let n=ho(t);return e<n&&(e+=2*Math.PI),(e-n)/r}else{let n=ho(t+r);return e<n&&(e+=2*Math.PI),1+(e-n)/r}}function zu(e,t,r){e=ho(e);let n=ho(t),i=ho(t+r);if(r<0){let s=n;n=i,i=s}return n<i?n<=e&&e<=i:n<=e||e<=i}function ho(e){let t=2*Math.PI;return(e%t+t)%t}var Sn=si;function Li(e,t){return e>0==t>0?e+.5*(t-e):.5*(e+t)}function s1(e,t,r,n,i,s){return e*n+t*i+r*s}function Un(e,t,r,n,i,s,o,a,u){let l=Sn(o-n,a-i,u-s);return l===0?0:s1((e-n)/l,(t-i)/l,(r-s)/l,(o-n)/l,(a-i)/l,(u-s)/l)}function o1(e,t,r,n,i,s){let o=Un(e,t,0,r,n,0,i,s,0);return o<=0?[r,n]:o>=1?[i,s]:[r+o*(i-r),n+o*(s-n)]}function tC(e,t,r,n,i,s,o,a){let u=Un(e,t,0,r,n,0,i,s,0);return u<=0&&!o?[r,n]:u>=1&&!a?[i,s]:[r+u*(i-r),n+u*(s-n)]}function jb(e,t,r,n,i,s){let o=o1(e,t,r,n,i,s);return Sn(e-o[0],t-o[1])}function rC(e,t,r,n,i,s,o){var a=Math.atan2(t-n,e-r);if(zu(a,s,o-s))return[i*Math.cos(a)+r,i*Math.sin(a)+n]}function Nr(e,t,r=1){if(e===t)return!0;if(!isFinite(e)||!isFinite(t))return!1;if(r>50)throw new Error(\"Within \"+(52-r)+\" bits isn't really approximate any more\");let n=Math.max(Math.max(Math.abs(e),Math.abs(t)),1),i=r===1?.5:Math.pow(.5,r);return n===n+i*Math.abs(t-e)}function nC(e){return Math.round(e-.5)+.5}function Ns(e,t){if(e=Math.round(e),t=Math.round(t),e<0&&(e=-e),t<0&&(t=-t),t>e){let n=t;t=e,e=n}if(t===0)return e;let r=e%t;for(;r>0;)e=t,t=r,r=e%t;return t}function Ds(e,t){if(!isFinite(e)&&t===0)return NaN;if(e>=0||t===Math.floor(t))return Math.pow(e,t);let r=wi(t,100);return Nr(r.n/r.d,t,2)&&r.d%2===1?(r.n%2===0?1:-1)*Math.pow(-e,t):NaN}function bo(e,t){return{n:e,d:t}}function Ot(e){return typeof e==\"object\"&&typeof e.n==\"number\"&&typeof e.d==\"number\"}var ca=Math.pow(2,53)-1;function Rs(e){let t=e.match(/^(-)?(\\d*)?(?:\\.(\\d*))?$/);if(!t)return NaN;let r=t[1],n=t[2],i=t[3];if(!n&&!i)return NaN;let s=!!r;if(i){let o=i.replace(/0+$/,\"\"),a=o.length,u=Math.pow(10,a),l=parseInt(n||\"0\",10)*u+parseInt(o||\"0\",10);return l>ca||u>ca?parseFloat(e):ie(s?-l:l,u)}else{let o=parseInt(n,10);return o>ca?parseFloat(e):ie(s?-o:o,1)}}function F(e){return Ot(e)?e.n/e.d:+e}function Ai(e){return Ot(e)?!1:isNaN(e)}function ie(e,t){if(!isFinite(e)||!isFinite(t)||t===0||Math.floor(e)!==e||Math.floor(t)!==t||Math.abs(e)>ca||Math.abs(t)>ca)return e/t;t<0&&(e=-e,t=-t);let r=Ns(e,t);return bo(e/r,t/r)}function cn(e){return Ot(e)?bo(-e.n,e.d):-e}function Zb(e){return Ot(e)?bo(Math.abs(e.n),Math.abs(e.d)):Math.abs(e)}function pa(e){return Ot(e)?e.n===0?e.d/e.n:bo(e.n<0?-e.d:e.d,Math.abs(e.n)):1/e}function oi(e,t){if(!Ot(e)||!Ot(t))return F(e)+F(t);var r=Ns(e.d,t.d);return ie(e.n*(t.d/r)+t.n*(e.d/r),e.d/r*t.d)}function ai(e,t){if(!Ot(e)||!Ot(t))return F(e)*F(t);var r=Ns(e.n,t.d),n=Ns(t.n,e.d);return ie(e.n/r*(t.n/n),e.d/n*(t.d/r))}function Hn(e,t){return oi(e,cn(t))}function $n(e,t){return!Ot(e)||!Ot(t)?F(e)/F(t):ai(e,pa(t))}function u1(e,t){let r=e,n=t;if(t.n<0&&(n=cn(t),r=pa(e)),!Ot(r)||!Ot(n))return Ds(F(e),F(t));if(e=r,t=n,t.d===1)return ie(Math.pow(e.n,t.n),Math.pow(e.d,t.n));let i=e.n<0;if(i&&t.d%2!==1)return NaN;let o=(i?-1:1)*Math.round(Math.pow(Math.abs(e.n),1/t.d)),a=Math.round(Math.pow(Math.abs(e.d),1/t.d));return Math.pow(o,t.d)!==e.n||Math.pow(a,t.d)!==e.d?Ds(F(e),F(t)):ie(Math.pow(o,t.n),Math.pow(a,t.n))}function Sf(e,t){if(!Ot(e)||!Ot(t))return Ds(F(e),F(t));let r=u1(e,t);return Ot(r)?r:Ds(F(e),F(t))}function Qb(e){if(!Ot(e))return Math.sqrt(e);let t=Math.round(Math.sqrt(e.n)),r=Math.round(Math.sqrt(e.d));return t*t!==e.n||r*r!==e.d?Math.sqrt(F(e)):ie(t,r)}function Uu(e,t){return Sf(e,pa(t))}function Kb(e,t){if(!Ot(e)||!Ot(t)){let r=F(e),n=F(t);return r-n*Math.floor(r/n)}return Hn(e,ai(t,bo(Math.floor(F($n(e,t))),1)))}function ex(e){let t=bo(0,1);for(let r of e)t=oi(t,r);return t}var ir=class extends V{constructor(r){super([]);this.isConstant=!0;typeof r==\"number\"&&(r=ie(r,1)),this._constantValue=r}asValue(){let r=this._constantValue;return typeof r==\"boolean\"?r:F(r)}asCompilerValue(){return this._constantValue}scalarExprString(){return this.asValue()>0?String(this.asValue()):\"(\"+String(this.asValue())+\")\"}getEvaluationInfo(){return[{val:this.asValue()}]}isNaN(){let r=this.asValue();return typeof r==\"number\"&&isNaN(r)}};var Hu={pi:new ir(Math.PI),tau:new ir(2*Math.PI),e:new ir(Math.E),trigAngleMultiplier:new ir(ie(1,1)),infty:new ir(1/0)};var Qe={};In(Qe,{Action:()=>Ye,Add:()=>$e,And:()=>yt,BeginBroadcast:()=>Be,BeginIntegral:()=>Fe,BeginLoop:()=>ke,BlockVar:()=>we,BroadcastResult:()=>K,Constant:()=>B,DeferredListAccess:()=>Re,Distribution:()=>He,Divide:()=>ut,EndBroadcast:()=>ft,EndIntegral:()=>nt,EndLoop:()=>pt,Equal:()=>dt,Exponent:()=>Ce,ExtendSeed:()=>gt,Greater:()=>mt,GreaterEqual:()=>st,InboundsListAccess:()=>ze,Less:()=>it,LessEqual:()=>Ze,List:()=>Ae,ListAccess:()=>Ve,LoadArg:()=>rt,MAX_LEAF_OPCODE:()=>Of,Multiply:()=>Ue,NativeFunction:()=>he,Negative:()=>lt,Noop:()=>Rt,OrderedPair:()=>We,OrderedPairAccess:()=>ct,Piecewise:()=>Ee,RawExponent:()=>_e,Subtract:()=>at,SymbolicVar:()=>sr});var Rt=0,B=1,rt=2,sr=3,Of=3,$e=8,at=9,Ue=10,ut=11,Ce=12,_e=13,lt=14,We=15,ct=16,ke=17,pt=18,Fe=19,nt=20,Be=21,ft=22,dt=23,it=24,mt=25,Ze=26,st=27,yt=30,Ee=31,he=37,Ae=38,Ve=39,Re=40,ze=41,He=42,gt=44,we=47,K=48,Ye=49;function l1(e){switch(e){case\"default\":case\"trig\":case\"inverseTrig\":case\"trig2\":case\"never-broadcast\":return[I];case\"reducer\":return[Y];case\"doubleReducer\":return[Y,Y];case\"parameterizedReducer\":return[Y,I];case\"color\":return[I,I,I]}}function c1(e){switch(e){case\"default\":case\"trig\":case\"inverseTrig\":case\"trig2\":case\"doubleReducer\":case\"color\":case\"never-broadcast\":return!1;case\"reducer\":case\"parameterizedReducer\":return!0}}function p1(e,t,r){return e===\"reducer\"?1/0:t+r}function R(e,t,r){var l,c,p,f,m,d;let n=(l=r==null?void 0:r.tag)!=null?l:\"default\",i=(c=r==null?void 0:r.argumentTypes)!=null?c:l1(n),s=r!=null&&r.defaultArguments?r.defaultArguments.length:0,o=(p=r==null?void 0:r.minArity)!=null?p:i.length-s,a=(f=r==null?void 0:r.maxArity)!=null?f:p1(n,o,s),u=(m=r==null?void 0:r.allowDotCall)!=null?m:c1(n);return{module:e,symbol:t,argumentTypes:i,defaultArguments:r==null?void 0:r.defaultArguments,returnType:(d=r==null?void 0:r.returnType)!=null?d:I,tag:n,minArity:o,maxArity:a,allowDotCall:u}}function Df(e){if(!Ot(e))throw new Error(\"Programming Error: numeric constants should be rational\");return{type:1,valueType:I,value:e}}var ws=Df(ie(0,1)),Ls=Df(ie(1,1)),Nf=Df(ie(1,2));function Hi(e){let t;return e in or&&(t=or[e].tag),t===\"trig\"||t===\"trig2\"||t===\"inverseTrig\"?!0:e===\"angle\"||e===\"angles\"||e===\"directedangle\"||e===\"directedangles\"}var or={sin:R(\"BuiltIn\",\"sin\",{tag:\"trig\"}),cos:R(\"BuiltIn\",\"cos\",{tag:\"trig\"}),tan:R(\"BuiltIn\",\"tan\",{tag:\"trig\"}),cot:R(\"BuiltIn\",\"cot\",{tag:\"trig\"}),sec:R(\"BuiltIn\",\"sec\",{tag:\"trig\"}),csc:R(\"BuiltIn\",\"csc\",{tag:\"trig\"}),arcsin:R(\"Math\",\"asin\",{tag:\"inverseTrig\"}),arccos:R(\"Math\",\"acos\",{tag:\"inverseTrig\"}),arctan:R(\"Math\",\"atan2\",{argumentTypes:[I,I],defaultArguments:[Ls],tag:\"inverseTrig\"}),arccot:R(\"BuiltIn\",\"acot\",{tag:\"inverseTrig\"}),arcsec:R(\"BuiltIn\",\"asec\",{tag:\"inverseTrig\"}),arccsc:R(\"BuiltIn\",\"acsc\",{tag:\"inverseTrig\"}),sinh:R(\"BuiltIn\",\"sinh\"),cosh:R(\"BuiltIn\",\"cosh\"),tanh:R(\"BuiltIn\",\"tanh\"),coth:R(\"BuiltIn\",\"coth\"),sech:R(\"BuiltIn\",\"sech\"),csch:R(\"BuiltIn\",\"csch\"),arcsinh:R(\"BuiltIn\",\"asinh\"),arccosh:R(\"BuiltIn\",\"acosh\"),arctanh:R(\"BuiltIn\",\"atanh\"),arccoth:R(\"BuiltIn\",\"acoth\"),arcsech:R(\"BuiltIn\",\"asech\"),arccsch:R(\"BuiltIn\",\"acsch\"),sqrt:R(\"Math\",\"sqrt\"),rtxsqpone:R(\"BuiltIn\",\"sqrtxsqp1\"),rtxsqmone:R(\"BuiltIn\",\"sqrtxsqm1\"),nthroot:R(\"BuiltIn\",\"nthroot\",{argumentTypes:[I,I]}),hypot:R(\"BuiltIn\",\"hypot\",{argumentTypes:[I,I]}),log:R(\"BuiltIn\",\"common_log\"),logbase:R(\"BuiltIn\",\"log_base\",{argumentTypes:[I,I]}),ln:R(\"BuiltIn\",\"log\"),exp:R(\"Math\",\"exp\"),floor:R(\"Math\",\"floor\"),ceil:R(\"Math\",\"ceil\"),round:R(\"Math\",\"round\"),abs:R(\"Math\",\"abs\"),sign:R(\"BuiltIn\",\"sign\"),mod:R(\"BuiltIn\",\"mod\",{argumentTypes:[I,I]}),nCr:R(\"BuiltIn\",\"nCr\",{argumentTypes:[I,I]}),nPr:R(\"BuiltIn\",\"nPr\",{argumentTypes:[I,I]}),factorial:R(\"BuiltIn\",\"factorial\"),polyGamma:R(\"BuiltIn\",\"polyGamma\",{argumentTypes:[I,I]}),lcm:R(\"BuiltIn\",\"listLCM\",{tag:\"reducer\"}),gcd:R(\"BuiltIn\",\"listGCD\",{tag:\"reducer\"}),distance:R(\"BuiltIn\",\"distance\",{argumentTypes:[w,w]}),polygon:R(\"BuiltIn\",\"polygon\",{tag:\"reducer\",argumentTypes:[Le],returnType:ye}),area:R(\"BuiltIn\",\"polygonArea\",{argumentTypes:[ye]}),perimeter:R(\"BuiltIn\",\"polygonPerimeter\",{argumentTypes:[ye]}),pointDet:R(\"BuiltIn\",\"pointDet\",{argumentTypes:[w,w]}),pointDot:R(\"BuiltIn\",\"pointDot\",{argumentTypes:[w,w]}),pointPerp:R(\"BuiltIn\",\"pointPerp\",{argumentTypes:[w],returnType:w}),segment:R(\"BuiltIn\",\"segment\",{argumentTypes:[w,w],returnType:ue}),line:R(\"BuiltIn\",\"line\",{argumentTypes:[w,w],returnType:J}),ray:R(\"BuiltIn\",\"ray\",{argumentTypes:[w,w],returnType:ge}),circle:R(\"BuiltIn\",\"circle\",{argumentTypes:[w,I],returnType:Q}),center:R(\"BuiltIn\",\"center\",{argumentTypes:[Q],returnType:w,allowDotCall:!0}),radius:R(\"BuiltIn\",\"radius\",{argumentTypes:[Q],returnType:I,allowDotCall:!0}),arc:R(\"BuiltIn\",\"arc\",{argumentTypes:[w,w,w],returnType:X}),arcCenter:R(\"BuiltIn\",\"arcCenter\",{argumentTypes:[X],returnType:w}),arcOmega:R(\"BuiltIn\",\"arcOmega\",{argumentTypes:[X],returnType:I}),undirectedAngleMarker:R(\"BuiltIn\",\"undirectedAngleMarker\",{argumentTypes:[le],returnType:xe}),directedAngleMarker:R(\"BuiltIn\",\"directedAngleMarker\",{argumentTypes:[w,I,I,I],returnType:le}),directedCoterminalAngle:R(\"BuiltIn\",\"directedCoterminalAngle\",{argumentTypes:[le],returnType:le}),undirectedCoterminalAngle:R(\"BuiltIn\",\"undirectedCoterminalAngle\",{argumentTypes:[xe],returnType:xe}),supplement:R(\"BuiltIn\",\"supplementAngle\",{argumentTypes:[le],returnType:le}),directedAngleMarkerMeasure:R(\"BuiltIn\",\"directedAngleMarkerMeasure\",{argumentTypes:[le],returnType:I,allowDotCall:!0}),undirectedAngleMarkerMeasure:R(\"BuiltIn\",\"undirectedAngleMarkerMeasure\",{argumentTypes:[xe],returnType:I,allowDotCall:!0}),polygonInteriorUndirectedAngles:R(\"BuiltIn\",\"polygonInteriorUndirectedAngles\",{argumentTypes:[ye,I],returnType:Et,allowDotCall:!0,tag:\"never-broadcast\"}),polygonInteriorDirectedAngles:R(\"BuiltIn\",\"polygonInteriorDirectedAngles\",{argumentTypes:[ye,I],returnType:St,allowDotCall:!0,tag:\"never-broadcast\"}),vertices:R(\"BuiltIn\",\"vertices\",{argumentTypes:[ye],returnType:Le,allowDotCall:!0,tag:\"never-broadcast\"}),segments:R(\"BuiltIn\",\"polygonEdges\",{argumentTypes:[ye],returnType:Ct,allowDotCall:!0,tag:\"never-broadcast\"}),scaleTangentSegment:R(\"BuiltIn\",\"scaleTangentSegment\",{argumentTypes:[ue,I],returnType:ue}),scaleTangentLine:R(\"BuiltIn\",\"scaleTangentLine\",{argumentTypes:[J,I],returnType:J}),scaleTangentRay:R(\"BuiltIn\",\"scaleTangentRay\",{argumentTypes:[ge,I],returnType:ge}),scaleTangentCircle:R(\"BuiltIn\",\"scaleTangentCircle\",{argumentTypes:[Q,I],returnType:Q}),scaleTangentArc:R(\"BuiltIn\",\"scaleTangentArc\",{argumentTypes:[X,I],returnType:Q}),addTangentSegment:R(\"BuiltIn\",\"addTangentSegment\",{argumentTypes:[ue,ue],returnType:ue}),addTangentLine:R(\"BuiltIn\",\"addTangentLine\",{argumentTypes:[J,J],returnType:J}),addTangentRay:R(\"BuiltIn\",\"addTangentRay\",{argumentTypes:[ge,ge],returnType:ge}),addTangentCircle:R(\"BuiltIn\",\"addTangentCircle\",{argumentTypes:[Q,Q],returnType:Q}),addTangentArc:R(\"BuiltIn\",\"addTangentArc\",{argumentTypes:[X,X],returnType:X}),segmentGlider:R(\"BuiltIn\",\"segmentGlider\",{argumentTypes:[ue,I],returnType:w}),lineGlider:R(\"BuiltIn\",\"lineGlider\",{argumentTypes:[J,I],returnType:w}),rayGlider:R(\"BuiltIn\",\"rayGlider\",{argumentTypes:[ge,I],returnType:w}),circleGlider:R(\"BuiltIn\",\"circleGlider\",{argumentTypes:[Q,I],returnType:w}),arcGlider:R(\"BuiltIn\",\"arcGlider\",{argumentTypes:[X,I],returnType:w}),polygonGlider:R(\"BuiltIn\",\"polygonGlider\",{argumentTypes:[ye,I],returnType:w}),chooseNonIncidentPoint:R(\"BuiltIn\",\"chooseNonIncidentPoint\",{argumentTypes:[w,w,w],returnType:w}),circleCircleIntersection:R(\"BuiltIn\",\"circleCircleIntersection\",{argumentTypes:[Q,Q,I],returnType:w}),circleArcIntersection:R(\"BuiltIn\",\"circleArcIntersection\",{argumentTypes:[Q,X,I],returnType:w}),circleLineIntersection:R(\"BuiltIn\",\"circleLineIntersection\",{argumentTypes:[Q,J,I],returnType:w}),arcCircleIntersection:R(\"BuiltIn\",\"arcCircleIntersection\",{argumentTypes:[X,Q,I],returnType:w}),arcArcIntersection:R(\"BuiltIn\",\"arcArcIntersection\",{argumentTypes:[X,X,I],returnType:w}),arcLineIntersection:R(\"BuiltIn\",\"arcLineIntersection\",{argumentTypes:[X,J,I],returnType:w}),lineCircleIntersection:R(\"BuiltIn\",\"lineCircleIntersection\",{argumentTypes:[J,Q,I],returnType:w}),lineArcIntersection:R(\"BuiltIn\",\"lineArcIntersection\",{argumentTypes:[J,X,I],returnType:w}),lineLineIntersection:R(\"BuiltIn\",\"lineLineIntersection\",{argumentTypes:[J,J,I],returnType:w}),lineFromSegment:R(\"BuiltIn\",\"identity\",{argumentTypes:[ue],returnType:J}),lineFromRay:R(\"BuiltIn\",\"identity\",{argumentTypes:[ge],returnType:J}),parallel:R(\"BuiltIn\",\"parallel\",{argumentTypes:[J,w],returnType:J}),perpendicular:R(\"BuiltIn\",\"perpendicular\",{argumentTypes:[J,w],returnType:J}),translation:R(\"BuiltIn\",\"translation\",{argumentTypes:[w],returnType:Se}),dilation:R(\"BuiltIn\",\"dilation\",{argumentTypes:[w,I],returnType:Se}),rotation:R(\"BuiltIn\",\"rotation\",{tag:\"trig2\",argumentTypes:[w,I],returnType:Se}),reflection:R(\"BuiltIn\",\"reflection\",{argumentTypes:[J],returnType:Se}),compose:R(\"BuiltIn\",\"composeTransformation\",{argumentTypes:[Se,Se],returnType:Se}),inverse:R(\"BuiltIn\",\"invertTransformation\",{argumentTypes:[Se],returnType:Se}),transformPoint:R(\"BuiltIn\",\"transformPoint\",{argumentTypes:[Se,w],returnType:w}),transformSegment:R(\"BuiltIn\",\"transformSegment\",{argumentTypes:[Se,ue],returnType:ue}),transformLine:R(\"BuiltIn\",\"transformLine\",{argumentTypes:[Se,J],returnType:J}),transformRay:R(\"BuiltIn\",\"transformRay\",{argumentTypes:[Se,ge],returnType:ge}),transformCircle:R(\"BuiltIn\",\"transformCircle\",{argumentTypes:[Se,Q],returnType:Q}),transformArc:R(\"BuiltIn\",\"transformArc\",{argumentTypes:[Se,X],returnType:X}),transformPolygon:R(\"BuiltIn\",\"transformPolygon\",{argumentTypes:[Se,ye],returnType:ye}),transformAngleMarker:R(\"BuiltIn\",\"transformAngleMarker\",{argumentTypes:[Se,xe],returnType:xe}),transformDirectedAngleMarker:R(\"BuiltIn\",\"transformAngleMarker\",{argumentTypes:[Se,le],returnType:le}),mean:R(\"BuiltIn\",\"mean\",{tag:\"reducer\"}),total:R(\"BuiltIn\",\"total\",{tag:\"reducer\"}),stdev:R(\"BuiltIn\",\"stdev\",{tag:\"reducer\"}),stdevp:R(\"BuiltIn\",\"stdevp\",{tag:\"reducer\"}),mad:R(\"BuiltIn\",\"mad\",{tag:\"reducer\"}),count:R(\"BuiltIn\",\"listLength\",{tag:\"reducer\",argumentTypes:[vt]}),min:R(\"BuiltIn\",\"listMin\",{tag:\"reducer\"}),max:R(\"BuiltIn\",\"listMax\",{tag:\"reducer\"}),argmin:R(\"BuiltIn\",\"argMin\",{tag:\"reducer\"}),argmax:R(\"BuiltIn\",\"argMax\",{tag:\"reducer\"}),median:R(\"BuiltIn\",\"median\",{tag:\"reducer\"}),var:R(\"BuiltIn\",\"variance\",{tag:\"reducer\"}),varp:R(\"BuiltIn\",\"varp\",{tag:\"reducer\"}),cov:R(\"BuiltIn\",\"cov\",{tag:\"doubleReducer\"}),covp:R(\"BuiltIn\",\"covp\",{tag:\"doubleReducer\"}),corr:R(\"BuiltIn\",\"corr\",{tag:\"doubleReducer\"}),spearman:R(\"BuiltIn\",\"spearman\",{tag:\"doubleReducer\"}),quantile:R(\"BuiltIn\",\"quantile\",{tag:\"parameterizedReducer\"}),quartile:R(\"BuiltIn\",\"quartile\",{tag:\"parameterizedReducer\"}),upperQuantileIndex:R(\"BuiltIn\",\"upperQuantileIndex\",{tag:\"parameterizedReducer\"}),lowerQuantileIndex:R(\"BuiltIn\",\"lowerQuantileIndex\",{tag:\"parameterizedReducer\"}),quartileIndex:R(\"BuiltIn\",\"quartileIndex\",{tag:\"parameterizedReducer\"}),upperQuartileIndex:R(\"BuiltIn\",\"upperQuartileIndex\",{tag:\"parameterizedReducer\"}),lowerQuartileIndex:R(\"BuiltIn\",\"lowerQuartileIndex\",{tag:\"parameterizedReducer\"}),normalcdf:R(\"BuiltIn\",\"normalcdf\",{argumentTypes:[I,I,I,I],defaultArguments:[ws,Ls]}),normalpdf:R(\"BuiltIn\",\"normalpdf\",{argumentTypes:[I,I,I],defaultArguments:[ws,Ls]}),binomcdf:R(\"BuiltIn\",\"binomcdf\",{argumentTypes:[I,I,I,I],defaultArguments:[Nf]}),binompdf:R(\"BuiltIn\",\"binompdf\",{argumentTypes:[I,I,I],defaultArguments:[Nf]}),poissoncdf:R(\"BuiltIn\",\"poissoncdf\",{argumentTypes:[I,I,I]}),poissonpdf:R(\"BuiltIn\",\"poissonpdf\",{argumentTypes:[I,I,I]}),uniformcdf:R(\"BuiltIn\",\"uniformcdf\",{argumentTypes:[I,I,I,I],defaultArguments:[ws,Ls]}),uniformpdf:R(\"BuiltIn\",\"uniformpdf\",{argumentTypes:[I,I,I],defaultArguments:[ws,Ls]}),invT:R(\"BuiltIn\",\"invT\",{argumentTypes:[I,I]}),invPoisson:R(\"BuiltIn\",\"invPoisson\",{argumentTypes:[I,I]}),invBinom:R(\"BuiltIn\",\"invBinom\",{argumentTypes:[I,I,I]}),invUniform:R(\"BuiltIn\",\"invUniform\",{argumentTypes:[I,I,I]}),tpdf:R(\"BuiltIn\",\"tpdf\",{argumentTypes:[I,I]}),tcdf:R(\"BuiltIn\",\"tcdf\",{argumentTypes:[I,I,I]}),erf:R(\"BuiltIn\",\"erf\"),invNorm:R(\"BuiltIn\",\"invNorm\"),tscore:R(\"BuiltIn\",\"tscore\",{tag:\"parameterizedReducer\",defaultArguments:[ws]}),normalSample:R(\"BuiltIn\",\"normalSample\",{argumentTypes:[tt,I,I]}),uniformSample:R(\"BuiltIn\",\"uniformSample\",{argumentTypes:[tt,I,I]}),tSample:R(\"BuiltIn\",\"tSample\",{argumentTypes:[tt,I]}),poissonSample:R(\"BuiltIn\",\"poissonSample\",{argumentTypes:[tt,I]}),binomSample:R(\"BuiltIn\",\"binomSample\",{argumentTypes:[tt,I,I]}),rgb:R(\"BuiltIn\",\"rgb\",{returnType:et,tag:\"color\"}),hsv:R(\"BuiltIn\",\"hsv\",{returnType:et,tag:\"color\"}),validateRangeLength:R(\"BuiltIn\",\"validateRangeLength\",{returnType:I,argumentTypes:[Y,Y,I,I],tag:\"never-broadcast\"}),validateSampleCount:R(\"BuiltIn\",\"validateSampleCount\",{returnType:I,argumentTypes:[I]}),select:R(\"BuiltIn\",\"select\",{argumentTypes:[vt,pr],returnType:e=>e[0],tag:\"never-broadcast\"}),shuffle:R(\"BuiltIn\",\"shuffle\",{argumentTypes:[tt,vt],returnType:e=>e[1],tag:\"never-broadcast\"}),sortPerm:R(\"BuiltIn\",\"sortPerm\",{argumentTypes:[Y],returnType:Y,tag:\"never-broadcast\"}),elementsAt:R(\"BuiltIn\",\"elementsAt\",{argumentTypes:[vt,Y],returnType:e=>e[0],tag:\"never-broadcast\"}),uniquePerm:R(\"BuiltIn\",\"uniquePerm\",{argumentTypes:[vt],returnType:Y,tag:\"never-broadcast\"})};function f1(e,t){return t?t.length+e:e}function Pe(e,t){var p,f,m,d;let r=t==null?void 0:t.defaultArguments,n=(p=t==null?void 0:t.maxArity)!=null?p:f1(e,r),i=(f=t==null?void 0:t.fallthroughUnlessDistribution)!=null?f:!1,s=(m=t==null?void 0:t.allowDotCall)!=null?m:!1,o=(d=t==null?void 0:t.isSeeded)!=null?d:!1,a=t==null?void 0:t.minArityExampleArgs,u=t==null?void 0:t.maxArityExampleArgs,l=t==null?void 0:t.dotMinArityExampleArgs,c=t==null?void 0:t.dotMaxArityExampleArgs;return{minArity:e,maxArity:n,defaultArguments:r,fallthroughUnlessDistribution:i,minArityExampleArgs:a,maxArityExampleArgs:u,dotMinArityExampleArgs:l,dotMaxArityExampleArgs:c,allowDotCall:s,isSeeded:o}}function Wn(){return Pe(0,{maxArity:1/0})}var $i={midpoint:Pe(1,{maxArity:2,allowDotCall:!0}),glider:Pe(2),circle:Pe(1,{maxArity:2}),center:Pe(1,{allowDotCall:!0}),radius:Pe(1,{allowDotCall:!0}),intersection:Pe(2),strictintersection:Pe(2),parallel:Pe(2),perpendicular:Pe(2),length:Pe(1,{maxArity:1/0,allowDotCall:!0}),translation:Pe(1,{maxArity:2}),reflection:Pe(1),apply:Pe(2),points:Pe(1),lines:Pe(1),circles:Pe(1),arcs:Pe(1),polygons:Pe(1),rays:Pe(1),angle:Pe(3),directedangle:Pe(3),angles:Pe(1,{allowDotCall:!0}),directedangles:Pe(1,{allowDotCall:!0}),measure:Pe(1,{allowDotCall:!0}),abs:Pe(1),coterminal:Pe(1),round:Pe(1,{maxArity:2}),sort:Pe(1,{maxArity:2,minArityExampleArgs:\"([3,2,1])\",maxArityExampleArgs:\"([1,2,3],[3,2,1])\",dotMaxArityExampleArgs:\"([3,4])\",allowDotCall:!0}),shuffle:Pe(2,{maxArity:3,minArityExampleArgs:\"([1,2,3])\",maxArityExampleArgs:\"([1,2,3],2)\",dotMaxArityExampleArgs:\"(2)\",allowDotCall:!0,isSeeded:!0}),join:Pe(2,{maxArity:1/0,minArityExampleArgs:\"([1,2],[3,4])\",dotMinArityExampleArgs:\"([3,4])\",allowDotCall:!0}),unique:Pe(1,{minArityExampleArgs:\"([1,2,3])\",maxArityExampleArgs:\"([1,2,3])\",allowDotCall:!0}),normaldist:Pe(0,{defaultArguments:[ws,Ls]}),tdist:Pe(1),binomialdist:Pe(1,{defaultArguments:[Nf]}),poissondist:Pe(1),uniformdist:Pe(0,{defaultArguments:[ws,Ls]}),pdf:Pe(2,{allowDotCall:!0}),cdf:Pe(2,{maxArity:3,allowDotCall:!0}),mean:Pe(1,{fallthroughUnlessDistribution:!0,allowDotCall:!0}),median:Pe(1,{fallthroughUnlessDistribution:!0,allowDotCall:!0}),stdev:Pe(1,{fallthroughUnlessDistribution:!0,allowDotCall:!0}),var:Pe(1,{fallthroughUnlessDistribution:!0,allowDotCall:!0}),quantile:Pe(2,{fallthroughUnlessDistribution:!0,allowDotCall:!0,minArityExampleArgs:\"([1,2,3], 1)\",maxArityExampleArgs:\"([1,2,3], 1)\",dotMinArityExampleArgs:\"(x)\",dotMaxArityExampleArgs:\"(x)\"}),random:Pe(1,{maxArity:4,allowDotCall:!0,isSeeded:!0}),polygon:Pe(0,{maxArity:1/0}),histogram:Wn(),dotplot:Wn(),boxplot:Wn(),ttest:Wn(),ittest:Wn(),stats:Wn(),det:Wn(),inv:Wn(),transpose:Wn(),rref:Wn(),trace:Wn()};var $u=class extends qe{constructor(){super(...arguments);this.isFunction=!0}},ui,fe={};for(ui in Hu)Hu.hasOwnProperty(ui)&&(fe[ui]=Hu[ui]);for(ui in or)or.hasOwnProperty(ui)&&(fe[ui]=new $u);for(ui in $i)$i.hasOwnProperty(ui)&&(fe[ui]=new $u);function m1(e){var t={};return e.additionalFunctions&&e.additionalFunctions.indexOf(\"sqrt\")!==-1&&(t.sqrt=fe.sqrt),e.width&&(t.width=e.width),e.height&&(t.height=e.height),t}var Rf={};In(Rf,{getFrame:()=>y1});var tx=[\"pi\",\"e\",\"trigAngleMultiplier\"],rx=[\"sqrt\",\"nthroot\",\"abs\",\"ln\",\"sin\",\"cos\",\"tan\",\"log\",\"arcsin\",\"arccos\",\"arctan\",\"mean\",\"round\",\"stdev\",\"stdevp\",\"nCr\",\"nPr\",\"exp\",\"factorial\"];function nx(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error(\"Programming Error: key '\"+n+`' does not exist in table. Must be one of:\n`+Object.keys(t).join(`\n`))}}nx(tx,fe);nx(rx,fe);function y1(e){var t={};return tx.forEach(function(r){t[r]=fe[r]}),rx.forEach(function(r){e.replaceRoundWithReciprocal&&r===\"round\"||(t[r]=fe[r])}),e.trigAngleMultiplier&&(t.trigAngleMultiplier=e.trigAngleMultiplier),e.width&&(t.width=e.width),e.height&&(t.height=e.height),t}var wf={};In(wf,{getFrame:()=>g1});var ix=[\"pi\",\"e\",\"trigAngleMultiplier\"],sx=[\"sqrt\",\"nthroot\",\"abs\",\"ln\",\"sin\",\"cos\",\"tan\",\"log\",\"arcsin\",\"arccos\",\"arctan\",\"exp\",\"factorial\"];function ox(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error(\"Programming Error: key '\"+n+`' does not exist in table. Must be one of:\n`+Object.keys(t).join(`\n`))}}ox(ix,fe);ox(sx,fe);function g1(e){var t={};return ix.forEach(function(r){t[r]=fe[r]}),sx.forEach(function(r){t[r]=fe[r]}),e.trigAngleMultiplier&&(t.trigAngleMultiplier=e.trigAngleMultiplier),e.width&&(t.width=e.width),e.height&&(t.height=e.height),t}var fa={};In(fa,{getFrame:()=>x1});var ax={count:!0,segment:!0,line:!0,ray:!0,circle:!0,arc:!0,glider:!0,parallel:!0,perpendicular:!0,center:!0,radius:!0,area:!0,perimeter:!0,angles:!0,angle:!0,directedangles:!0,directedangle:!0,measure:!0,coterminal:!0,supplement:!0,vertices:!0,segments:!0,intersection:!0,translation:!0,dilation:!0,rotation:!0,reflection:!0,construction:!0,points:!0,lines:!0,circles:!0,arcs:!0,polygons:!0,rays:!0};var ux=[\"csc\",\"sec\",\"cot\",\"arccsc\",\"arcsec\",\"arccot\",\"csch\",\"sech\",\"coth\",\"arccsch\",\"arcsech\",\"arccoth\",\"mad\",\"cov\",\"covp\",\"distance\",\"midpoint\"],lx=[\"erf\",\"ttest\",\"tscore\",\"ittest\",\"normaldist\",\"tdist\",\"poissondist\",\"binomialdist\",\"pdf\",\"cdf\",\"random\",\"histogram\",\"dotplot\",\"boxplot\"],h1=[\"distance\",\"midpoint\"],b1=[\"det\",\"inv\",\"transpose\",\"rref\",\"trace\"],cx=Object.keys(ax).filter(function(e){return e!==\"construction\"});function Lf(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error(\"Programming Error: key '\"+n+`' does not exist in table. Must be one of:\n`+Object.keys(t).join(`\n`))}}Lf(ux,fe);Lf(lx,fe);Lf(cx,fe);function x1(e){var t={},r;for(r in fe)fe.hasOwnProperty(r)&&(e.restrictedFunctions===!0&&ux.indexOf(r)!==-1&&!(e.forceEnableGeometryFunctions===!0&&h1.indexOf(r)!==-1)||e.distributions===!1&&lx.indexOf(r)!==-1||!e.isGeometryCalculator&&cx.indexOf(r)!==-1||b1.indexOf(r)===-1&&(t[r]=fe[r]));return e.trigAngleMultiplier&&(t.trigAngleMultiplier=e.trigAngleMultiplier),e.globalRandomSeed&&(t.globalRandomSeed=e.globalRandomSeed),e.initialEvaluation&&(t.initialEvaluation=e.initialEvaluation),e.globalEventCount&&(t.globalEventCount=e.globalEventCount),e.width&&(t.width=e.width),e.height&&(t.height=e.height),t}var fv={};In(fv,{parse:()=>Ti});function px(e){let t=function(...i){return new e(...i)};t.prototype=e.prototype;var r=Object.getOwnPropertyNames(e);for(var n of r){let i=e[n];if(typeof i==\"function\")try{t[n]=i}catch(s){}}return t}var O=class extends qe{constructor(r){super();this.isError=!0;this._msg=r,this.blocksExport=!0}evaluateOnce(r){return this._msg}getError(){return this._msg}setDependencies(r){return this.addDependencies(r),this}setActionValue(r){this.actionValue=r}allowExport(){return this.blocksExport=!1,this}};var Yu=class extends ir{constructor(){super(...arguments);this.is_mixed_number=!0}};var Ci={};In(Ci,{canDisplayAsFraction:()=>yx,formatSymbol:()=>q,geoParentToLatex:()=>E1,identifierToHTML:()=>S1,identifierToLatex:()=>dr,latexToIdentifier:()=>li,numericLabel:()=>Ju,point:()=>P1,roundDecimal:()=>M1,trimLatex:()=>ci,truncatedHTMLLabel:()=>v1,truncatedLatexLabel:()=>Ff,truncatedPlainmathLabel:()=>_f,value:()=>Af});function Af(e,t=e){if(isNaN(e)||!isFinite(e))return{string:\"undefined\",latex:\"undefined\",value:e};if(e===0)return{string:\"0\",latex:\"0\",value:e};Math.abs(e)>Math.abs(t)&&(t=e);let r=wi(e/Math.PI,24),n,i,s,o,a,u;if(fx(t)&&Nr(r.n/r.d*Math.PI,e,3))return r.n===0?(n=\"0\",o=\"0\"):r.n===1?(n=\"\\u03C0\",o=\"\\\\pi\"):r.n===-1?(n=\"-\\u03C0\",o=\"-\\\\pi\"):(n=r.n.toString()+\"\\u03C0\",o=r.n.toString()+\"\\\\pi\"),r.d===1?(i=\"\",a=\"\"):(i=\"/\"+r.d.toString(),a=r.d.toString()),s=n+i,a===\"\"?u=o:o[0]===\"-\"?u=`-\\\\frac{${o.slice(1)}}{${a}}`:u=`\\\\frac{${o}}{${a}}`,{string:s,latex:u,value:r.n/r.d*Math.PI};if(fx(t))return s=I1(dx(e.toFixed(Xu(t)))),{string:s,latex:s,value:parseFloat(s)};{let l=Cf(e.toExponential(Xu(t/e))).split(\"e\"),c=l[0]+\"\\xD710\",p=l[1].replace(\"+\",\"\");return s=Cf(e.toExponential(Xu(t/e))).replace(\"+\",\"\"),u=`${l[0]}\\\\times10^{${p}}`,{string:s,latex:u,mantissa:c,superscript:p,value:parseFloat(s)}}}function P1(e,t,r,n){let i=Af(e,t),s=Af(n(i.value),r);return[i,s]}var T1=/\\.?0+$/;function dx(e){return e.indexOf(\".\")===-1?e:e.replace(T1,\"\")}function Cf(e){let t=/\\.?0+e/;return e.replace(t,\"e\")}function I1(e){return e===\"-0\"?\"0\":e}function fx(e){return e=Math.abs(e),1e-4<e&&e<1e7}function Xu(e){return e=Math.abs(e),e=Math.max(e,1e-16),Math.max(3,Math.floor(4.5-Math.log(e)/Math.LN10))}function M1(e){return Math.abs(e)>=1e-20?parseFloat(e.toFixed(Xu(e))):e}function mx(e){return 1e6/Math.sqrt(Math.abs(e))}function yx(e){let t=mx(e);if(t<1||t>1e12)return!1;let{n:r,d:n}=wi(e,t);return n===1?!1:e===e+Math.pow(2,-3)*Math.abs(r/n-e)}function Ju(e,t){if(t=t||{},isNaN(e)||!isFinite(e))return{type:\"undefined\"};if(e===0||t.zeroCutoff&&Math.abs(e)<t.zeroCutoff)return{type:\"decimal\",value:\"0\"};let r=t.smallCutoff||.001,n=t.bigCutoff||1e6,i=t.digits||10,o=Cf(e.toExponential(i-2)).match(/([\\d\\.\\-]+)e\\+?([\\d\\-]+)/);if(!o)return{type:\"undefined\"};let a=parseInt(o[2],10)>=i;if(yx(e)&&t.displayAsFraction){let l=wi(e,mx(e));return{type:\"fraction\",numerator:l.n.toString(),denominator:l.d.toString()}}else{if(Math.abs(e)>n||Math.abs(e)<r||a)return{type:\"scientific\",mantissa:o[1],exponent:o[2]};{let l=dx(e.toPrecision(i));return e!==Number(l)&&t.addEllipses&&(l+=\"...\"),{type:\"decimal\",value:l}}}}function v1(e,t){let r=Ju(e,t);switch(r.type){case\"undefined\":return\"undefined\";case\"decimal\":return r.value;case\"scientific\":return r.mantissa+\"<span class='dcg-cross'>\\xD7</span>10<sup>\"+r.exponent+\"</sup>\";case\"fraction\":return r.denominator===\"1\"?r.numerator:`${r.numerator}/${r.denominator}`;default:return r}}function _f(e,t){let r=Ju(e,t);switch(r.type){case\"undefined\":return\"undefined\";case\"decimal\":return r.value;case\"scientific\":return r.mantissa+\" * 10^\"+r.exponent;case\"fraction\":return r.denominator===\"1\"?r.numerator:`${r.numerator}/${r.denominator}`;default:return r}}function Ff(e,t){let r=Ju(e,t);switch(r.type){case\"undefined\":return\"undefined\";case\"decimal\":return r.value;case\"scientific\":return r.mantissa+\"\\\\times10^{\"+r.exponent+\"}\";case\"fraction\":return r.denominator===\"1\"?r.numerator:r.numerator[0]===\"-\"?`-\\\\frac{${r.numerator.slice(1)}}{${r.denominator}}`:`\\\\frac{${r.numerator}}{${r.denominator}}`;default:return r}}function q(e){e=e.replace(\"\\\\\",\"\");let t={pi:\"\\u03C0\",tau:\"\\u03C4\",theta:\"\\u03B8\",phi:\"\\u03D5\",div:\"\\xF7\",cdot:\"\\u22C5\",times:\"\\xD7\",lt:\"<\",gt:\">\",le:\"\\u2264\",ge:\"\\u2265\",sim:\"\\u223C\",ldots:\"\\u2026\",prime:\"\\u2032\",approx:\"\\u2248\",to:\"\\u2192\",\"->\":\"\\u2192\"};return t.hasOwnProperty(e)?t[e]:e}function E1(e){if(!e)return\"\";let t=dr(e[0]);return e[1]!==void 0&&(t+=\"\\\\left[\"+e[1]+\"\\\\right]\"),t}function dr(e){let t=e.match(/^\\$(\\d+)$/);if(t)return`\\\\token{${t[1]}}`;let r=e.split(\"_\"),n=\"\";return r[0].length>1&&(n+=\"\\\\\"),n+=r[0],r[1]&&(n+=\"_{\"+r[1]+\"}\"),n}function S1(e){if(!e)return\"\";let t=e.split(\"_\");t[0]=q(t[0]);let r=t.map(Pf);return r[1]&&(r[1]=\"<sub>\"+r[1]+\"</sub>\"),r.join(\"\")}function li(e){let t=e.match(/\\\\token\\{(\\d+)\\}/);return t?`$${t[1]}`:(e=e.replace(/\\\\operatorname\\{(.*)\\}/,\"$1\"),e.replace(/[{}\\\\]/g,\"\"))}function ci(e){return e.replace(/^(\\\\ | |\\\\space)+/,\"\").replace(/(\\\\ | |\\\\space)+$/,\"\")}var _t=class extends V{constructor(r){super([]);this._symbol=li(r),this._errorSymbol=this._symbol,this.addDependency(this._symbol)}setInputSpan(r){super.setInputSpan(r),this._errorSymbol=li(this.getInputString())}getInputSpan(){return this._inputSpan===void 0?un(this._symbol,0,this._symbol.length):this._inputSpan}};var ju=class extends _t{};function O1(e){for(var t=1/0,r=0;r<e.length;r++)(e[r].isList||e[r].isBroadcast)&&(t=Math.min(t,e[r].length));return t}var Bf=class extends V{constructor(r){super(r);this.isList=!0;this.length=r.length}asValue(){for(var r=[],n=0;n<this.args.length;n++)r.push(this.args[n].asValue());return r}asCompilerValue(){for(var r=[],n=0;n<this.args.length;n++)r.push(this.args[n].asCompilerValue());return r}getEvaluationInfo(){if(this.args.every(function(r){return r.isConstant}))return[{val:this.args.map(function(r){return r.asValue()})}]}},Wi=Bf;Wi.eachArgs=function(r,n){var i=O1(r);if(!isFinite(i)){n(r);return}for(var s=0;s<i;s++){for(var o=[],a=0;a<r.length;a++)o.push(r[a].isList||k(r[a].valueType)?r[a].elementAt(s):r[a]);n(o,s)}},Wi.wrap=function(r){return r.isList||k(r.valueType)?r:new Bf([r])};var Zu=class extends V{constructor(r){super(r);this.beginning=r[0],this.end=r[1]}isHalfEmpty(){return this.end&&this.end.args&&this.end.args.length===0}};var Qu=class extends V{constructor(r){super(r);this.list=r[0],this.index=r[1]}};var Ku=class extends V{registerDependencies(){if(super.registerDependencies(),this.args[1].type===\"Identifier\"){var t=this.args[1]._symbol;Hi(t)&&this.addDependency(\"trigAngleMultiplier\")}}};var el=class extends V{constructor(t){var r=t.map(function(n){return new _t(\"\\\\idref_{\"+n+\"}\")});super(r),this._exports.push(\"construction\")}};var xo=class extends V{};var tl=class extends xo{constructor(r,n,i){super(r);this.isTypedConstant=!0;this.isMovablePoint=!0;this.moveStrategy=n,this.defaultDragMode=i,this.valueType=w}asValue(){return[+this.args[0].asValue(),+this.args[1].asValue()]}asTypedValue(){return{valueType:this.valueType,value:this.asValue()}}asCompilerValue(){return[this.args[0].asCompilerValue(),this.args[1].asCompilerValue()]}};var rl=class extends V{constructor(r){super(r);this.point=r[0],this.index=r[1]}};var nl=class extends V{};var On=class extends V{};var Dr={\"<\":{inclusive:!1,direction:-1},\"!=\":{inclusive:!1,direction:0},\">\":{inclusive:!1,direction:1},\"<=\":{inclusive:!0,direction:-1},\"=\":{inclusive:!0,direction:0},\">=\":{inclusive:!0,direction:1}};function As(e,t){switch(t){case-1:return e?\"<=\":\"<\";case 0:return e?\"=\":\"!=\";case 1:return e?\">=\":\">\";default:throw\"Programming error.  Comparators must have a direction of -1, 0, or 1\"}}var Nn=class extends V{constructor(r){super(r);this._difference=Dr[this.operator].direction===-1?new On([r[1],r[0]]):new On([r[0],r[1]])}static create(r){class n extends Nn{}return n.prototype.operator=r,n}asComparator(){return this}isInequality(){return Dr[this.operator].direction!==0}};var pi={\"<\":Nn.create(\"<\"),\">\":Nn.create(\">\"),\"<=\":Nn.create(\"<=\"),\">=\":Nn.create(\">=\"),\"=\":Nn.create(\"=\")};var sl=class extends qe{constructor(r){super();let[n,i,s,o,a]=r;this.args=r,this._symbol=s._symbol,this._operators=[i,o],this._expressions=[n,a];var u=As(Dr[i].inclusive&&Dr[r[3]].inclusive,Dr[r[1]].direction);this._indicator=new pi[u]([r[0],r[4]]),this.addDependency(this._symbol),this.mergeDependencies(this._expressions[0],this._expressions[1])}isInequality(){return!0}isShadeBetween(){return!0}};var Yi=class extends V{constructor(r){super(r,{skipRegisterDependencies:!0});this._index=r[0],this.registerDependencies()}registerDependencies(){let r=this._index._symbol;this.addDummyDependency(r),this.mergeDependencies(this.args[1]),this.mergeDependencies(this.args[2]),this.mergeDependenciesInScope([r],this.args[3])}};var ol=class extends Yi{constructor(){super(...arguments);this.in_place_operator=\"+=\";this.starting_value=0}evaluateConstant(r){var n=1+Math.round(r[1])-Math.round(r[0]);return n<=0?this.starting_value:n*r[2]}update(r,n){return r+n}};var al=class extends Yi{constructor(){super(...arguments);this.in_place_operator=\"*=\";this.starting_value=1}evaluateConstant(r){var n=1+Math.round(r[1])-Math.round(r[0]);return n<=0?this.starting_value:Math.pow(r[2],n)}update(r,n){return r*n}};var ul=class extends V{constructor(r){super(r,{skipRegisterDependencies:!0});this._differential=r[0],this.registerDependencies()}registerDependencies(){this.mergeDependencies(this.args[1]),this.mergeDependencies(this.args[2]),this.mergeDependenciesInScope([this._differential._symbol],this.args[3])}};var ll=class extends V{constructor(t){super(t),this._symbol=t[0]._symbol}};var cl=class extends V{constructor(r,n,i){super([r,n].concat(i),{skipRegisterDependencies:!0});this._index=r,this._body=n,this._inputLists=i,this.registerDependencies()}registerDependencies(){for(var r=[],n=0;n<this._inputLists.length;n++){var i=this._inputLists[n],s=i._symbol;this.addDummyDependency(s),r.push(s),this.mergeDependencies(i.args[1])}this.addDummyDependency(this._index._symbol),r.push(this._index._symbol),this.mergeDependenciesInScope(r,this._body)}};var Dn=class extends V{constructor(r,n){super(n,{skipRegisterDependencies:!0});typeof r==\"string\"&&(r=new _t(r)),this._identifier=r,this._symbol=r._symbol,this._errorSymbol=r._errorSymbol===\"logbase\"?\"log\":r._errorSymbol,this.registerDependencies()}registerDependencies(){this.addDependency(this._symbol),super.registerDependencies(),Hi(this._symbol)&&this.addDependency(\"trigAngleMultiplier\")}copyWithArgs(r){return new this.constructor(new _t(this._symbol),r)}};var pl=class extends Dn{constructor(r,n){super(r,n);this.seed=n[0]}};var fl=class extends V{registerDependencies(){if(super.registerDependencies(),this.args[0].type===\"Identifier\"){var t=this.args[0]._symbol;Hi(t)&&this.addDependency(\"trigAngleMultiplier\")}}};var dl=class extends V{registerDependencies(){if(this.addDependency(\"factorial\"),super.registerDependencies(),this.args[0].type===\"Identifier\"){var t=this.args[0]._symbol;Hi(t)&&this.addDependency(\"trigAngleMultiplier\")}}};var ml=class extends V{constructor(r,n){super(n);this.order=r}copyWithArgs(r){return new this.constructor(this.order,r)}};var Cs=class extends V{static chain(t,r){for(var n,i=r;t.length;)n=t.pop(),i=new Cs([n.condition,n.if_expr,i]);return i}static empty(){return new Cs([new ir(!0),new ir(ie(1,1)),new ir(NaN)])}};var yl=class extends V{constructor(r,n){super(n);r instanceof _t?this._symbol=r._symbol:this._symbol=new _t(r)._symbol,this.addDependency(this._symbol)}};var gl=class extends V{constructor(r){super(r,{skipRegisterDependencies:!0});this._symbol=r[0]._symbol,this._expression=r[1],this.registerDependencies()}registerDependencies(){this.addUpdateSymbol(this._symbol),this.mergeDependencies(this._expression)}};var hl=class extends V{constructor(r,n){super([r].concat(n),{skipRegisterDependencies:!0});this._body=r,this._assignments=n,this.registerDependencies()}registerDependencies(){for(var r=[],n=0;n<this._assignments.length;n++){var i=this._assignments[n],s=i._symbol;this.addSubstitutionSymbol(s),r.push(s);var o=i.args[1];this.mergeDependencies(o),this.addSubstitutionDependencies(o.getDependencies())}this.mergeDependenciesInScope(r,this._body,{isSubstitutionBody:!0})}};var bl=class extends V{constructor(t){super(t),this._symbol=\"histogram\"}};var xl=class extends V{constructor(t,r){super(t),this._symbol=r}};var Pl=class extends V{constructor(t){super(t),this._symbol=\"dotplot\"}};var Tl=class extends V{constructor(t){super(t),this._symbol=\"boxplot\"}};var Il=class extends V{constructor(t){super(t),this._symbol=\"ttest\"}};var Ml=class extends V{constructor(t){super(t),this._symbol=\"ittest\"}};var vl=class extends V{constructor(t){super(t),this._symbol=\"stats\"}};var Xi=class extends qe{constructor(r,n){super();this.mergeDependencies(r,n),this._lhs=r,this._rhs=n,this._difference=new On([this._lhs,this._rhs])}asComparator(){return new pi[\"=\"]([this._lhs,this._rhs])}};var _s=class extends qe{constructor(r,n){super();r instanceof _t?this._symbol=r._symbol:this._symbol=r,this.mergeDependencies(n),this._expression=n,this._exports=this.computeExports()}shouldExportAns(){return!0}computeExports(){for(var r=this._symbol,n=this.getDependencies(),i=0;i<n.length;i++)if(n[i]===r)return[];return[r]}isEquation(r){return r.getDependencies().indexOf(this._symbol)!==-1}asEquation(){var r=new Xi(new _t(this._symbol),this._expression);return r.userData=this.userData,r.metaData=this.metaData,r}shouldPromoteToSlider(r){if(!this._expression.isConstant||this._expression.is_mixed_number)return!1;let n=this._expression.asValue();return typeof n!=\"number\"||!isFinite(n)?!1:r.isValidSlider(this._symbol)}};var Ft={};In(Ft,{actionMergeFreeVariable:()=>bd,addArgumentsToDefinition:()=>Ta,addTypeError:()=>Gf,adjacentNumbers:()=>Ad,andTypeError:()=>Wf,ansUndefined:()=>jm,assignmentsUnsupported:()=>Oa,badImplicitCall:()=>Fl,badIntegralBoundDependency:()=>Ym,badListComprehensionInputDependency:()=>ty,badLogExponent:()=>Qd,badProductBoundDependency:()=>Bm,badSampleSize:()=>Jm,badSumBoundDependency:()=>Fm,badSymbolContext:()=>Ea,badTrigExponent:()=>Zd,badTupleDimensions:()=>Ld,binaryOperatorMissingOperand:()=>xa,blankExpression:()=>rm,boxplotBreadthInvalid:()=>Ed,boxplotOffsetInvalid:()=>vd,cannotRedefine:()=>Io,cannotSubscript:()=>nm,cdfMaxInvalid:()=>hm,cdfMaxLessThanMin:()=>bm,cdfMinInvalid:()=>gm,cdfRequiresArguments:()=>Sd,cdfTooManyArguments:()=>Od,clickableObjectAlreadyAssigned:()=>F1,clickableObjectAssignmentNotDefined:()=>_1,clickableObjectAssignmentNotIdentifier:()=>B1,clickableObjectInvalidExpression:()=>V1,colonMissingCondition:()=>tm,colorArity:()=>Cl,combineTypeError:()=>ga,comparatorTypeError:()=>$f,complicatedDoubleInequality:()=>Wl,complicatedPolarImplicit:()=>vm,constantUnsupported:()=>ks,cycle:()=>Ul,deeplyNested:()=>Id,derivativeMissingBody:()=>Hm,derivativeTypeError:()=>od,derivativeVariableTypeError:()=>ad,differentialWithSuperscript:()=>qm,distributionAsFunction:()=>Jl,divideTypeError:()=>zf,domainMaxInvalid:()=>mm,domainMaxLessThanMin:()=>ym,domainMinInvalid:()=>dm,dotLHSTypeError:()=>jf,duplicateUpdateRules:()=>yd,emptyParen:()=>Xd,emptyPipe:()=>jd,emptyRadical:()=>Wd,emptyRadicalIndex:()=>Yd,emptySquareBracket:()=>Jd,emptySubscript:()=>Bl,emptySuperscript:()=>kd,equationRequired:()=>Yl,equationsUnsupported:()=>_i,eventHandlerTypeError:()=>ma,exponentTypeError:()=>Uf,featureUnavailable:()=>Ji,fractionEmpty:()=>qd,fractionMissingDenominator:()=>Gd,fractionMissingNumerator:()=>Vd,fractionsUnavailable:()=>Kl,functionDefinitionsUnsupported:()=>Na,functionFreeVariable:()=>R1,functionNotDefined:()=>kl,functionTypeError:()=>Pt,functionUnsupported:()=>pn,geometryLengthTypeError:()=>Sl,heterogeneousList:()=>ya,identifierAsFunction:()=>_d,illegalBinWidth:()=>va,illegalDotCall:()=>da,implicitsDisabled:()=>Mm,incorrectProductLowerBound:()=>_m,incorrectSumLowerBound:()=>Cm,indexTypeError:()=>Po,inequalitiesDisabled:()=>Hl,inequalitiesUnsupported:()=>zs,inequalityChainTooLong:()=>ql,integralArgumentTypeError:()=>sd,integralLowerBoundTypeError:()=>nd,integralMissingBody:()=>Um,integralMissingBound:()=>Vm,integralMissingDifferential:()=>Gm,integralUpperBoundTypeError:()=>id,invalidDependentFirstTableColumn:()=>D1,invalidDoubleInequalityVariables:()=>$l,invalidFirstTableColumn:()=>Om,invalidHalfEmptyRange:()=>wm,invalidImplicitVariables:()=>qs,invalidInequalityVariables:()=>Tm,invalidLHS:()=>xm,invalidOperatorName:()=>Ud,invalidRegressionParameter:()=>Nm,invalidSubscript:()=>zd,invalidTableEntry:()=>vo,invalidTableHeader:()=>Sm,listComprehensionIncorrectInput:()=>Km,listComprehensionInputListTypeError:()=>Qm,listTypeError:()=>Bs,logScaleBoxPlot:()=>Td,logScaleDotPlot:()=>Pd,logScaleHistogram:()=>xd,logScaleTypeError:()=>ha,logbaseUnsupported:()=>Zm,malformedList:()=>wd,malformedPoint:()=>Rd,matrixAddDimensions:()=>q1,matrixAssignment:()=>G1,matrixElementTypeError:()=>$1,matrixFractionalPower:()=>U1,matrixInvalidVariable:()=>W1,matrixMultiplyDimensions:()=>z1,matrixPowerDimensions:()=>H1,matrixSubtractDimensions:()=>k1,maxListSize:()=>ba,methodRequiresList:()=>Rn,mismatchedBraces:()=>$m,mismatchedDoubleInequality:()=>Em,multiplyDefined:()=>Mo,multiplyDefinedByTables:()=>im,multiplyTypeError:()=>kf,negativeTypeError:()=>Hf,nonArithmeticRange:()=>Ma,nonListDoubleReducer:()=>Ia,nonListParameterizedReducer:()=>Rm,nonSquareDeterminant:()=>w1,nonSquareInverse:()=>A1,nonSquareTrace:()=>L1,optimizationError:()=>Dm,orderedPairAccessTypeError:()=>Xf,parameterAlreadyDefined:()=>zl,parseError:()=>Te,pdfWrongArity:()=>Ll,percentMissingOf:()=>Xm,piecewiseBranchTypeError:()=>ld,piecewiseConditionTypeError:()=>ud,piecewiseMissingCondition:()=>Kd,piecewisePartMissingCondition:()=>em,pointTypeError:()=>Yf,pointsUnsupported:()=>Hs,polygonTwoNumbersError:()=>Md,primeWithoutParen:()=>Gl,primedFunctionArity:()=>Gs,productArgumentTypeError:()=>rd,productInfiniteBoundError:()=>Nl,productLowerBoundTypeError:()=>ed,productMissingBody:()=>zm,productMissingBound:()=>Am,productUpperBoundTypeError:()=>td,randomArity:()=>Vs,randomFromBroadcastDistribution:()=>Nd,regressionTypeError:()=>fd,regressionsUnsupported:()=>Us,selfReferentialFunction:()=>Pa,shadowedIndex:()=>sm,shadowedIntegrationVariable:()=>Wm,shadowedListComprehensionInput:()=>ey,singleVariableImplicitEquationsDisabled:()=>Im,singularInverse:()=>C1,sliderLimitReferencesExport:()=>um,sliderMaxInvalid:()=>cm,sliderMaxLessThanMin:()=>pm,sliderMinInvalid:()=>lm,sliderStepInvalid:()=>fm,substitutionAmbiguousComma:()=>Ra,substitutionBodyAction:()=>X1,substitutionBodyDependsOnLocalVariable:()=>uy,substitutionBodyDependsOnRegression:()=>oy,substitutionDuplicateSymbol:()=>ly,substitutionFunctionLHS:()=>nc,substitutionIllegalLHS:()=>rc,substitutionInvalidAssignments:()=>sy,substitutionLocalLHS:()=>tc,substitutionNested:()=>ic,substitutionTypeError:()=>Y1,substitutionUndefinedRHS:()=>ay,subtractTypeError:()=>qf,sumArgumentTypeError:()=>Kf,sumInfiniteBoundError:()=>Ol,sumLowerBoundTypeError:()=>Zf,sumMissingBody:()=>km,sumMissingBound:()=>Lm,sumUpperBoundTypeError:()=>Qf,superscriptWithPrime:()=>$d,tableCycleWithoutGlobalDefinition:()=>om,tableEntryTypeError:()=>pd,tableHeaderTypeError:()=>cd,tdistWrongArity:()=>Al,tickerMinStepNonNegativeNumber:()=>am,todoError:()=>N1,tokenWithSubscript:()=>Cd,tooManyArguments:()=>wl,tooManyVariables:()=>Tt,transformationTypeError:()=>Jf,ttestListTooShort:()=>Eo,unaryOperatorMissingLeft:()=>Fd,unaryOperatorMissingRight:()=>Bd,unexpectedForKeyword:()=>ec,unexpectedInequality:()=>Vf,unexpectedPrime:()=>Vl,unexpectedSubscript:()=>Hd,unexpectedSymbol:()=>qr,unplottablePolarFunction:()=>Pm,unrecognizedSymbol:()=>El,updateRuleFunctionLHS:()=>Dl,updateRuleIllegalLHS:()=>hd,updateRuleLocalLHS:()=>Rl,updateRuleNonIdentifierLHS:()=>md,updateRuleTypeError:()=>dd,updateRuleUndefinedLHS:()=>gd,variableAsFunction:()=>Xl,variableLengthDistributionList:()=>Da,variableLengthProductBodyDependsOnIndex:()=>iy,variableLengthSumBodyDependsOnIndex:()=>ny,variableLengthTopLevelList:()=>ry,variableSeed:()=>jl,variableUnsupported:()=>Ql,variablesUnsupported:()=>Sa,writeIntegral:()=>Zl,wrongArity:()=>Mr,wrongDoubleReducerArity:()=>To,wrongParameterizedReducerArity:()=>_l,zeroArgReducer:()=>Dd});function Te(){return new O(T(\"shared-calculator-error-parse-error\"))}function N1(e){return new O(T(\"shared-calculator-error-todo-error\",{msg:e}))}function El(e){return e=q(e),new O(T(\"shared-calculator-error-unrecognized-symbol\",{symbol:e}))}function Vf(){return new O(T(\"shared-calculator-error-unexpected-inequality\"))}function qr(e){return e=q(e),new O(T(\"shared-calculator-error-unexpected-symbol\",{symbol:e}))}function Gf(e){return new O(T(\"shared-calculator-error-add-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function qf(e){return new O(T(\"shared-calculator-error-subtract-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function kf(e){return new O(T(\"shared-calculator-error-multiply-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function zf(e){return new O(T(\"shared-calculator-error-divide-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function Uf(e){return new O(T(\"shared-calculator-error-exponent-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function Hf(e){return new O(T(\"shared-calculator-error-negative-type-error\",{symbol:e[0]})).allowExport()}function $f(e){return new O(T(\"shared-calculator-error-comparator-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function Wf(e){return new O(T(\"shared-calculator-error-and-type-error\",{symbol:\"and\",symbol1:e[0],symbol2:e[1]})).allowExport()}function Bs(e){return new O(T(\"shared-calculator-error-list-type-error\",{symbol1:e[0]})).allowExport()}function Yf(e){return new O(T(\"shared-calculator-error-point-type-error\",{symbol1:e,symbol2:Z(w)})).allowExport()}function Po(e){return new O(T(\"shared-calculator-error-index-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function Xf(e){return new O(T(\"shared-calculator-error-ordered-pair-access-type-error\",{symbol:e[0]})).allowExport()}function Pt(e,t){switch(t.length){case 1:return new O(T(\"shared-calculator-error-function-type-error-1\",{fn:q(e),arg:t[0]})).allowExport();case 2:return new O(T(\"shared-calculator-error-function-type-error-2\",{fn:q(e),arg1:t[0],arg2:t[1]})).allowExport();default:return new O(T(\"shared-calculator-error-function-type-error-many\",{fn:q(e)})).allowExport()}}function Jf(e,t){switch(t.length){case 1:return new O(T(\"shared-calculator-error-transformation-type-error-1\",{fn:q(e),arg:t[0]})).allowExport();case 2:return new O(T(\"shared-calculator-error-transformation-type-error-2\",{fn:q(e),arg1:t[0],arg2:t[1]})).allowExport();default:return new O(T(\"shared-calculator-error-transformation-type-error-many\",{fn:q(e)})).allowExport()}}function Sl(e,t){let r=q(e),n=q(\"count\");return new O(T(\"shared-calculator-error-geometry-length-type-error\",{fn:r,alternativeFn:n,arg:t})).allowExport()}function da(e){return new O(T(\"shared-calculator-error-illegal-dot-call\",{symbol:q(e)}))}function jf(e,t){return new O(T(\"shared-calculator-error-dot-lhs-type-error\",{symbol:q(e),type:t})).allowExport()}function Zf(e){return new O(T(\"shared-calculator-error-sum-lower-bound-type-error\",{symbol:e[0]})).allowExport()}function Qf(e){return new O(T(\"shared-calculator-error-sum-upper-bound-type-error\",{symbol:e[0]})).allowExport()}function Ol(){return new O(T(\"shared-calculator-error-sum-infinite-bound-type-error\"))}function Kf(e){return new O(T(\"shared-calculator-error-sum-argument-type-error\",{symbol:e[0]})).allowExport()}function ed(e){return new O(T(\"shared-calculator-error-product-lower-bound-type-error\",{symbol:e[0]})).allowExport()}function td(e){return new O(T(\"shared-calculator-error-product-upper-bound-type-error\",{symbol:e[0]})).allowExport()}function Nl(){return new O(T(\"shared-calculator-error-product-infinite-bound-type-error\"))}function rd(e){return new O(T(\"shared-calculator-error-product-argument-type-error\",{symbol:e[0]})).allowExport()}function nd(e){return new O(T(\"shared-calculator-error-integral-lower-bound-type-error\",{symbol:e[0]})).allowExport()}function id(e){return new O(T(\"shared-calculator-error-integral-upper-bound-type-error\",{symbol:e[0]})).allowExport()}function sd(e){return new O(T(\"shared-calculator-error-integral-argument-type-error\",{symbol:e[0]})).allowExport()}function od(e){return new O(T(\"shared-calculator-error-derivative-type-error\",{symbol:e[0]})).allowExport()}function ad(e,t){return new O(T(\"shared-calculator-error-derivative-variable-type-error\",{symbol1:q(e),symbol2:t[0]}))}function ud(e){return new O(T(\"shared-calculator-error-piecewise-condition-type-error\",{symbol1:Z(be),symbol2:e[0]})).allowExport()}function ld(e){return new O(T(\"shared-calculator-error-piecewise-branch-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function cd(e){return new O(T(\"shared-calculator-error-table-header-type-error\",{symbol:e[0]}))}function pd(e){return new O(T(\"shared-calculator-error-table-entry-type-error\",{symbol:e[0]}))}function fd(e){return new O(T(\"shared-calculator-error-regression-type-error\",{symbol1:e[0],symbol2:e[1]}))}function dd(e){return new O(T(\"shared-calculator-error-update-rule-type-error\",{symbol:e}))}function md(){return new O(T(\"shared-calculator-error-update-rule-non-identifier-lhs\",{arrow:\"\\u2192\",example:\"a\"}))}function yd(e){return new O(T(\"shared-calculator-error-duplicate-update-rules\",{symbol:q(e)}))}function gd(e){return new O(T(\"shared-calculator-error-update-rule-undefined-lhs\",{symbol:q(e)}))}function hd(e){return new O(T(\"shared-calculator-error-update-rule-illegal-lhs\",{symbol:q(e)}))}function Dl(e){return new O(T(\"shared-calculator-error-update-rule-function-lhs\",{symbol:q(e)}))}function Rl(e){return new O(T(\"shared-calculator-error-update-rule-local-lhs\",{symbol:q(e)}))}function bd(e){let t=e.filter(r=>r.scope===\"free\").map(r=>r.symbol);return new O(T(\"shared-calculator-error-action-merge-free-variable\",{symbol:q(t[0]||\"\")})).setDependencies(t).allowExport()}function ma(e){return new O(T(\"shared-calculator-error-event-handler-type-error\",{example:\"a\\u2192a+1\"}))}function ya(){return new O(T(\"shared-calculator-error-heterogeneous-list\")).allowExport()}function ga(e){return new O(T(\"shared-calculator-error-combine-type-error\",{symbol1:e[0],symbol2:e[1]})).allowExport()}function ha(e){return new O(T(\"shared-calculator-error-log-scale-type-error\",{symbol:e})).allowExport()}function xd(){return new O(T(\"shared-calculator-error-log-scale-histogram\"))}function Pd(){return new O(T(\"shared-calculator-error-log-scale-dot-plot\"))}function Td(){return new O(T(\"shared-calculator-error-log-scale-box-plot\"))}function Id(){return new O(T(\"shared-calculator-error-deeply-nested\")).allowExport()}function ba(){return new O(T(\"shared-calculator-error-max-list-size\",{maxListSize:1e4 .toLocaleString()})).allowExport()}function Md(){return new O(T(\"shared-calculator-error-two-numbers-error\"))}function vd(){return new O(T(\"shared-calculator-error-boxplot-offset-invalid\"))}function Ed(){return new O(T(\"shared-calculator-error-boxplot-breadth-invalid\"))}function wl(e,t){return new O(T(\"shared-calculator-error-too-many-arguments\",{symbol:e,max:t}))}function Ll(){var e=T(\"shared-calculator-error-pdf-wrong-arity-recommendation\"),t=T(\"shared-calculator-error-pdf-wrong-arity\",{recommendation:e});return new O(t)}function Sd(){var e=T(\"shared-calculator-error-cdf-wrong-arity-recommendation\"),t=T(\"shared-calculator-error-cdf-wrong-arity\",{recommendation:e});return new O(t)}function Od(){var e=T(\"shared-calculator-error-cdf-too-many-arguments-recommendation\"),t=T(\"shared-calculator-error-cdf-too-many-arguments\",{recommendation:e});return new O(t)}function Al(){return new O(T(\"shared-calculator-error-tdist-wrong-arity\"))}function Vs(){return new O(T(\"shared-calculator-error-random-arity\"))}function Nd(){return new O(T(\"shared-calculator-error-random-from-broadcast-distribution\"))}function Cl(e){var t=e===\"rgb\"?[150,30,100]:[180,.5,.5],r=T(\"shared-calculator-error-color-arity-recommendation\",{recommendation:q(e)+\"(\"+t.join(\", \")+\")\"}),n=T(\"shared-calculator-error-color-arity\",{symbol:e,recommendation:r});return new O(n)}function Mr(e,t,r,n){e=q(e);var i,s;if(t===1)n||(n=e+\"(x)\"),s=T(\"shared-calculator-error-wrong-arity-supplement\",{recommendation:n}),r>1?i=T(\"shared-calculator-error-wrong-arity-single-arg-too-many\",{dependency:e,supplement:s}):i=T(\"shared-calculator-error-wrong-arity-single-arg-too-few\",{dependency:e,supplement:s});else{var o=[];if(!n){for(var a=0;a<t;a++)o[a]=a+1;n=q(e)+\"(\"+o.join(\", \")+\")\"}s=T(\"shared-calculator-error-wrong-arity-supplement\",{recommendation:n}),i=T(\"shared-calculator-error-wrong-arity-many-arg\",{dependency:e,assignment_arity:t,supplement:s})}return new O(i)}function _l(e){return new O(T(\"shared-calculator-error-wrong-two-arg-arity\",{symbol:q(e),recommendation:q(e)+\"([1,2,3], 1)\"}))}function To(e){return new O(T(\"shared-calculator-error-wrong-two-arg-arity\",{symbol:q(e),recommendation:q(e)+\"([1,2,3], [3,2,1])\"}))}function Gs(){return new O(T(\"shared-calculator-error-primed-function-arity\"))}function Dd(e){return new O(T(\"shared-calculator-error-zero-arg-reducer\",{symbol:q(e)}))}function Rd(){return new O(T(\"shared-calculator-error-malformed-point\"))}function wd(){return new O(T(\"shared-calculator-error-malformed-list\"))}function Ld(e){return new O(T(\"shared-calculator-error-bad-tuple-dimensions\",{symbol:e}))}function Fl(e){return e=q(e),new O(T(\"shared-calculator-error-bad-implicit-call\",{symbol:e}))}function Ad(e,t){return new O(T(\"shared-calculator-error-adjacent-numbers\",{left:e,right:t}))}function Cd(){return new O(T(\"shared-calculator-error-token-with-subscript\"))}function _d(e){return e=q(e),new O(T(\"shared-calculator-error-identifier-as-function\",{symbol:e}))}function xa(e){return e=q(e),e===\"%\"&&(e=\"% of\"),new O(T(\"shared-calculator-error-binary-operator-missing-operand\",{symbol:e}))}function Fd(e){return e=q(e),new O(T(\"shared-calculator-error-unary-operator-missing-left\",{symbol:e}))}function Bd(e){return e=q(e),new O(T(\"shared-calculator-error-unary-operator-missing-right\",{symbol:e}))}function Vd(){return new O(T(\"shared-calculator-error-fraction-missing-numerator\"))}function Gd(){return new O(T(\"shared-calculator-error-fraction-missing-denominator\"))}function qd(){return new O(T(\"shared-calculator-error-fraction-empty\"))}function Bl(){return new O(T(\"shared-calculator-error-empty-subscript\"))}function kd(){return new O(T(\"shared-calculator-error-empty-superscript\"))}function zd(e){return e=q(e),new O(T(\"shared-calculator-error-invalid-subscript\",{symbol:e}))}function Ud(){return new O(T(\"shared-calculator-error-invalid-operator-name\"))}function Hd(){return new O(T(\"shared-calculator-error-unexpected-subscript\"))}function $d(){return new O(T(\"shared-calculator-error-superscript-with-prime\"))}function Vl(){return new O(T(\"shared-calculator-error-unexpected-prime\"))}function Gl(){return new O(T(\"shared-calculator-error-prime-without-paren\"))}function Wd(){return new O(T(\"shared-calculator-error-empty-radical\"))}function Yd(){return new O(T(\"shared-calculator-error-empty-radical-index\"))}function Xd(){return new O(T(\"shared-calculator-error-empty-paren\"))}function Jd(){return new O(T(\"shared-calculator-error-empty-square-bracket\"))}function jd(){return new O(T(\"shared-calculator-error-empty-pipe\"))}function Zd(e){var t=e+\"^2\",r=e+\"^-1\";return new O(T(\"shared-calculator-error-bad-trig-exponent\",{form1:t,form2:r}))}function Qd(e){var t=e+\"^2\";return new O(T(\"shared-calculator-error-bad-log-exponent\",{form:t}))}function ql(){return new O(T(\"shared-calculator-error-inequality-chain-too-long\"))}function Kd(){return new O(T(\"shared-calculator-error-piecewise-missing-condition\"))}function em(){return new O(T(\"shared-calculator-error-piecewise-part-missing-condition\"))}function tm(){return new O(T(\"shared-calculator-error-colon-missing-condition\"))}function rm(){return new O(T(\"shared-calculator-error-blank-expression\"))}function kl(e){return e=q(e),new O(T(\"shared-calculator-error-function-not-defined\",{dependency:e}))}function zl(e){return e=q(e),new O(T(\"shared-calculator-error-parameter-already-defined\",{dependency:e}))}function Io(e,t){return e=q(e),t===void 0?new O(T(\"shared-calculator-error-cannot-redefine\",{symbol:e})):new O(T(\"shared-calculator-error-cannot-redefine-root\",{symbol:e,symbolRoot:t}))}function nm(e){return e=q(e),new O(T(\"shared-calculator-error-cannot-subscript\",{symbol:e}))}function Mo(e){return e=q(e),new O(T(\"shared-calculator-error-multiply-defined\",{dependency:e}))}function im(e){let t=Mo(e);return t.isMultiplyDefinedByTables=!0,t}function sm(e){return e=q(e),new O(T(\"shared-calculator-error-shadowed-index\",{symbol:e}))}function Ul(e){e=e.map(q);var t=e.pop()||\"\";return new O(T(\"shared-calculator-error-dependency-cycle\",{symbols:e.join(\"', '\"),lastSymbol:t}))}function om(e){let t=Ul(e);return t.isTableCycleWithoutGlobalDefinition=!0,t}function Pa(e){return new O(T(\"shared-calculator-error-self-referential-function\",{symbol:q(e)}))}function am(){return new O(T(\"shared-calculator-error-ticker-min-step-nonnegative\"))}function um(e){return new O(T(\"shared-calculator-error-slider-limit-references-export\",{symbol:q(e)}))}function lm(){return new O(T(\"shared-calculator-error-slider-min-invalid\"))}function cm(){return new O(T(\"shared-calculator-error-slider-max-invalid\"))}function pm(){return new O(T(\"shared-calculator-error-slider-max-less-than-min\"))}function fm(){return new O(T(\"shared-calculator-error-slider-step-invalid\"))}function dm(){return new O(T(\"shared-calculator-error-domain-min-invalid\"))}function mm(){return new O(T(\"shared-calculator-error-domain-max-invalid\"))}function ym(){return new O(T(\"shared-calculator-error-domain-max-less-than-min\"))}function gm(){return new O(T(\"shared-calculator-error-cdf-min-invalid\"))}function hm(){return new O(T(\"shared-calculator-error-cdf-max-invalid\"))}function bm(){return new O(T(\"shared-calculator-error-cdf-max-less-than-min\"))}function Tt(e){if(e=e.map(q),e.length===0)return new O(T(\"shared-calculator-error-too-many-variables-no-symbols\"));var t=e.pop()||\"\";return e.length>0?new O(T(\"shared-calculator-error-too-many-variables-many-symbols\",{variables:e.join(\"', '\"),lastVariable:t})):new O(T(\"shared-calculator-error-too-many-variables-one-symbol\",{variable:t}))}function Ta(e,t,r){e=e.map(q),t=q(t),r=r.map(q);var n=t+\"(\"+r.join(\",\")+\",\"+e.join(\",\")+\")\",i=e.pop()||\"\",s={symbols:e.join(\"', '\"),lastSymbol:i,newSignature:n};return e.length?new O(T(\"shared-calculator-error-add-arguments-to-definition-many\",s)):new O(T(\"shared-calculator-error-add-arguments-to-definition-one\",s))}function xm(e){return e=q(e),new O(T(\"shared-calculator-error-invalid-lhs\",{symbol:e}))}function Pm(){return new O(T(\"shared-calculator-error-unplottable-polar-function\"))}function Tm(){return new O(T(\"shared-calculator-error-invalid-inequality-variables\"))}function qs(){return new O(T(\"shared-calculator-error-invalid-implicit-variables\"))}function Im(){return new O(T(\"shared-calculator-error-single-variable-implicit-equations-disabled\"))}function Mm(){return new O(T(\"shared-calculator-error-implicits-disabled\"))}function Hl(){return new O(T(\"shared-calculator-error-inequalities-disabled\"))}function vm(){return new O(T(\"shared-calculator-error-complicated-polar-implicit\"))}function $l(){return new O(T(\"shared-calculator-error-invalid-double-inequality-variables\"))}function Em(){return new O(T(\"shared-calculator-error-mismatched-double-inequality\",{example:\"1 < y < 2\"}))}function Wl(){return new O(T(\"shared-calculator-error-complicated-double-inequality\"))}function Yl(e){return e?(e=q(e),new O(T(\"shared-calculator-error-equation-required-symbol\",{lhs:e+\"=\"}))):new O(T(\"shared-calculator-error-equation-required\"))}function Xl(e){return e=q(e),new O(T(\"shared-calculator-error-variable-as-function\",{dependency:e}))}function Jl(e){return e=q(e),new O(T(\"shared-calculator-error-distribution-as-function\",{symbol:e}))}function Sm(e){return new O(T(\"shared-calculator-error-invalid-table-header\",{supplement:e}))}function vo(e){return new O(T(\"shared-calculator-error-invalid-table-entry\",{supplement:e}))}function Om(){return new O(T(\"shared-calculator-error-invalid-first-table-column\",{most:\"'y', 'r',\",last:\"'\\u03B8'\"}))}function D1(){return new O(T(\"shared-calculator-error-invalid-dependent-first-table-column\"))}function Nm(e){return new O(T(\"shared-calculator-error-invalid-regression-parameter\",{symbol:q(e)}))}function Dm(){return new O(T(\"shared-calculator-error-optimization-error\"))}function Ia(e){return new O(T(\"shared-calculator-error-non-list-double-reducer\",{symbol:q(e),recommendation:q(e)+\"([1,2,3], [3,2,1])\"})).allowExport()}function Rm(e){return new O(T(\"shared-calculator-error-non-list-parameterized-reducer\",{symbol:q(e),recommendation:q(e)+\"([1,2,3], 1)\"})).allowExport()}function Rn(e){return new O(T(\"shared-calculator-error-method-requires-list\",{symbol:q(e),recommendation:q(e)+\"([1,2,3])\"})).allowExport()}function R1(e,t){return new O(T(\"shared-calculator-error-variable-function-free-variable\",{functionSymbol:e,variableSymbol:t})).allowExport()}function Ma(){return new O(T(\"shared-calculator-error-non-arithmetic-range\")).allowExport()}function wm(){return new O(T(\"shared-calculator-error-invalid-half-empty-range\"))}function Lm(){return new O(T(\"shared-calculator-error-sum-missing-bound\"))}function Am(){return new O(T(\"shared-calculator-error-product-missing-bound\"))}function Cm(){return new O(T(\"shared-calculator-error-incorrect-sum-lower-bound\"))}function _m(){return new O(T(\"shared-calculator-error-incorrect-product-lower-bound\"))}function Fm(e){return new O(T(\"shared-calculator-error-bad-sum-bound-dependency\",{symbol:q(e)}))}function Bm(e){return new O(T(\"shared-calculator-error-bad-product-bound-dependency\",{symbol:q(e)}))}function Vm(){return new O(T(\"shared-calculator-error-integral-missing-bound\"))}function Gm(){return new O(T(\"shared-calculator-error-integral-missing-differential\"))}function qm(){return new O(T(\"shared-calculator-error-differential-with-superscript\"))}function km(){return new O(T(\"shared-calculator-error-sum-missing-body\"))}function zm(){return new O(T(\"shared-calculator-error-product-missing-body\"))}function Um(){return new O(T(\"shared-calculator-error-integral-missing-body\"))}function Hm(){return new O(T(\"shared-calculator-error-derivative-missing-body\"))}function $m(e,t){return e=q(e),t=q(t),new O(T(\"shared-calculator-error-mismatched-braces\",{symbol1:e,symbol2:t}))}function Wm(e){return new O(T(\"shared-calculator-error-shadowed-integration-variable\",{symbol:q(e)}))}function Ym(e){return new O(T(\"shared-calculator-error-bad-integral-bound-dependency\",{symbol:q(e)}))}function Xm(){return new O(T(\"shared-calculator-error-percent-missing-of\"))}function va(e){return e=q(e),new O(T(\"shared-calculator-error-illegal-bin-width\",{symbol:e}))}function Eo(e){return e=q(e),new O(T(\"shared-calculator-error-ttest-list-too-short\",{symbol:e}))}function Jm(){return new O(T(\"shared-calculator-error-bad-sample-size\"))}function jl(e){return new O(T(\"shared-calculator-error-variable-seed\",{symbol:q(e[0].symbol)})).setDependencies(e.filter(t=>t.scope===\"free\").map(t=>t.symbol)).allowExport()}function Ea(e){return new O(T(\"shared-calculator-error-bad-symbol-context\",{symbol:q(e)}))}function Zl(){return new O(T(\"shared-calculator-error-write-integral\",{command:\"integral\",symbol:\"\\u222B\"}))}function jm(){return new O(T(\"shared-calculator-error-ans-undefined\"))}function Sa(e){return new O(T(\"shared-calculator-error-variables-unsupported\",{variable:q(e)}))}function pn(e){return new O(T(\"shared-calculator-error-function-unsupported\",{symbol:q(e)}))}function Zm(){return new O(T(\"shared-calculator-error-logbase-unsupported\"))}function ks(e){return new O(T(\"shared-calculator-error-constant-unsupported\",{symbol:q(e)}))}function Ql(e){return new O(T(\"shared-calculator-error-variable-unsupported\",{symbol:q(e)}))}function Oa(){return new O(T(\"shared-calculator-error-assignments-unsupported\"))}function Na(){return new O(T(\"shared-calculator-error-function-definition-unsupported\"))}function _i(){return new O(T(\"shared-calculator-error-equations-unsupported\"))}function zs(){return new O(T(\"shared-calculator-error-inequalities-unsupported\"))}function Us(){return new O(T(\"shared-calculator-error-regressions-unsupported\"))}function Hs(){return new O(T(\"shared-calculator-error-points-unsupported\"))}function Ji(){return new O(T(\"shared-calculator-error-feature-unavailable\"))}function Kl(){return new O(T(\"basic-calculator-error-fractions-unavailable\"))}function w1(){return new O(T(\"shared-calculator-error-non-square-determinant\"))}function L1(){return new O(T(\"shared-calculator-error-non-square-trace\"))}function A1(){return new O(T(\"shared-calculator-error-non-square-inverse\"))}function C1(){return new O(T(\"shared-calculator-error-non-singular-inverse\"))}function _1(e){return new O(T(\"shared-calculator-error-clickable-object-assignment-not-defined\",{symbol:e}))}function F1(e){return new O(T(\"shared-calculator-error-multiply-defined\",{dependency:e}))}function B1(){return new O(T(\"shared-calculator-error-clickable-object-assignment-not-identifier\"))}function V1(){return new O(T(\"shared-calculator-error-clickable-object-invalid-expression\"))}function G1(){return new O(T(\"shared-calculator-error-matrix-assignment\"))}function q1(){return new O(T(\"shared-calculator-error-matrix-add-dimensions\"))}function k1(){return new O(T(\"shared-calculator-error-matrix-subtract-dimensions\"))}function z1(){return new O(T(\"shared-calculator-error-matrix-multiply-dimensions\"))}function U1(){return new O(T(\"shared-calculator-error-matrix-fractional-power\"))}function H1(){return new O(T(\"shared-calculator-error-matrix-power-dimensions\"))}function $1(e){return new O(T(\"shared-calculator-error-matrix-element-type-error\",{arg:e[0]}))}function W1(e){return new O(T(\"shared-calculator-error-matrix-invalid-variable\",{symbol:q(e)}))}function Qm(e,t){return new O(T(\"shared-calculator-error-list-comprehension-input-type-error\",{identifier:e,actual:t}))}function Km(){return new O(T(\"shared-calculator-error-incorrect-list-comprehension-input\"))}function ec(){return new O(T(\"shared-calculator-error-unexpected-for-keyword\"))}function ey(e){return e=q(e),new O(T(\"shared-calculator-error-shadowed-list-comprehension-input\",{symbol:e}))}function ty(e){return e=q(e),new O(T(\"shared-calculator-error-bad-list-comprehension-input-dependency\",{symbol:e}))}function ry(e){let t=e.filter(r=>r.scope===\"free\").map(r=>r.symbol);return new O(T(\"shared-calculator-error-variable-length-top-level-list\",{symbol:q(t[0]||\"\")})).setDependencies(t).allowExport()}function Da(e){return new O(T(\"shared-calculator-error-variable-length-distribution-list\",{symbol:e[0].symbol})).setDependencies(e.filter(t=>t.scope===\"free\").map(t=>t.symbol))}function ny(e){return new O(T(\"shared-calculator-error-variable-length-sum-body-depends-on-index\",{symbol:e}))}function iy(e){return new O(T(\"shared-calculator-error-variable-length-product-body-depends-on-index\",{symbol:e}))}function Y1(e,t){return new O(T(\"shared-calculator-error-substitution-type-error\",{actual:Z(e),expected:Z(t)}))}function sy(){return new O(T(\"shared-calculator-error-substitution-invalid-assignments\"))}function tc(e){return new O(T(\"shared-calculator-error-substitution-local-lhs\",{symbol:e}))}function rc(e){return new O(T(\"shared-calculator-error-substitution-illegal-lhs\",{symbol:e}))}function nc(e){return new O(T(\"shared-calculator-error-substitution-function-lhs\",{symbol:e}))}function oy(e){return new O(T(\"shared-calculator-error-substitution-body-regression-parameter-dependency\",{symbol:e}))}function ay(e){let t=e.filter(r=>r.scope===\"free\").map(r=>r.symbol);return new O(T(\"shared-calculator-error-substitution-undefined-rhs\",{symbol:t[0]})).setDependencies(t)}function uy(e){return new O(T(\"shared-calculator-error-substitution-body-local-variable-dependency\",{symbol:e}))}function X1(){return new O(T(\"shared-calculator-error-substitution-body-action\"))}function ic(){return new O(T(\"shared-calculator-error-substitution-nested\"))}function Ra(){return new O(T(\"shared-calculator-error-substitution-ambiguous-comma\"))}function ly(e){return new O(T(\"shared-calculator-error-substitution-duplicate-assignment\",{symbol:e}))}var sc=class extends qe{constructor(r,n,i){super();this.isFunction=!0;this._symbol=r._symbol,this._argSymbols=n.map(function(s){return s._symbol}),this._exports=[this._symbol],this._expression=i,this.mergeDependenciesInScope(this._argSymbols,this._expression)}getConcreteInvocationTree(r,n,i,s){if(i.length!==this._argSymbols.length)throw Mr(s,this._argSymbols.length,i.length);for(var o=Object.create(n),a=0;a<this._argSymbols.length;a++)o[this._argSymbols[a]]=i[a];return this._expression.getConcreteTree(r,o)}getSliderVariables(r,n){var i=this._argSymbols;return super.getSliderVariables(r,n).filter(function(s){return i.indexOf(s)===-1})}asEquation(){var r=this._argSymbols.map(function(i){return new _t(i)}),n=new Xi(new Dn(new _t(this._symbol),r),this._expression);return n.userData=this.userData,n.metaData=this.metaData,n}};var oc=class extends qe{constructor(r,n){super();this.isRegression=!0;this._lhs=r,this.isLhsSimple=r instanceof _t,this._logLhs=new Dn(\"ln\",[r]),this._rhs=n,this._difference=new On([r,n]),this._logDifference=new On([new Dn(\"ln\",[r]),new Dn(\"ln\",[n])]),this.mergeDependencies(r,n)}exportTo(r,n,i){if(!n.isError){for(var s in n.parameters)n.parameters.hasOwnProperty(s)&&(r.assignmentForbidden(s)||(i[s]=i[s]?Mo(s):n.parameters[s]));r.assignmentForbidden(n.residualVariable)||(i[n.residualVariable]=n.residuals)}}getSliderVariables(){return[]}};var ac=class extends qe{constructor(r,n){super();this.isImage=!0;this.center=r.center,this.radianAngle=r.radianAngle,this.width=r.width,this.height=r.height,this.opacity=r.opacity,this.moveStrategy=n,this.mergeDependencies(this.center,this.radianAngle,this.width,this.height,this.opacity)}};var uc=class extends qe{constructor(r){super();this.handler=r.handler,this.minStep=r.minStep,this.mergeDependencies(this.handler),this.mergeDependencies(this.minStep)}};var lc=class extends _s{constructor(r,n){super(new _t(r._symbol),r._expression);this.isSlider=!0;this.setInputSpan(r._inputSpan),this.sliderAssignment=r,this.sliderMin=n.sliderMin,this.sliderMax=n.sliderMax,this.sliderSoftMin=n.sliderSoftMin,this.sliderSoftMax=n.sliderSoftMax,this.sliderStep=n.sliderStep,this.sliderIsPlayingOnce=n.sliderIsPlayingOnce,this.sliderMin&&this.mergeDependencies(this.sliderMin),this.sliderMax&&this.mergeDependencies(this.sliderMax),this.sliderStep&&this.mergeDependencies(this.sliderStep)}shouldPromoteToSlider(r){return!1}asAssignment(){return new _s(this._symbol,this._expression)}};var cc=class extends V{constructor(r){let n=new ir(r);super([n]);this._constantNode=n}asValue(){return this._constantNode.asValue()}asCompilerValue(){return this._constantNode.asCompilerValue()}};var pc=class extends qe{constructor(r){super();this.exportPenalty=1;this.isTable=!0;this.columns=r,this._exports=[],this.mergeDependencies.apply(this,r);for(var n=0;n<r.length;n++)Array.prototype.push.apply(this._exports,r[n].getExports())}exportTo(r,n,i){for(var s=0;s<this.columns.length;s++){var o=this.columns[s].getExports();if(o.length){var a=o[0];r.assignmentForbidden(a)||i[a]||(n.isError?i[a]=n:this.columns[s].exportTo(r,n.columns[s],i))}}}getAllIds(){return this.columns.map(function(r){return r.header.userData.id})}};function J1(e){return e.isConstant?new ir(e.asCompilerValue()):new ir(NaN)}var $s=class extends qe{constructor(r,n){super();this.header=r,this.values=n,this.isIndependent=!1,this.registerDependencies(),this._exports=this.computeExports()}registerDependencies(){this.mergeDependencies(this.header),this.mergeDependencies.apply(this,this.values)}computeExports(){return this.header instanceof _t?[this.header._symbol]:[]}_exportSymbolsTo(r,n,i){if(r.length){var s=r[0];if(n.isError)i[s]=n;else try{i[s]=new Wi(n.values.map(J1))}catch(o){if(o instanceof qe)i[s]=o;else throw o}}}exportTo(r,n,i){var s=this.getLegalExports(r);this._exportSymbolsTo(s,n,i)}exportToLocal(r,n){this._exportSymbolsTo(this.getExports(),r,n)}};var fc=class extends qe{constructor(r,n,i,s){super();this._symbol=r,this._expression=n,this.otherVariableSolutionData=i,this.mergeDependencies(n),this.branchMultiplier=s}};var dc=class extends qe{constructor(r,n,i,s,o){super();this.parameters=r,this.residuals=n,this.statistics=i,this.model=s,this.isModelValid=o.isModelValid,this.residualVariable=o.residualVariable,this.residualSuggestionId=o.residualSuggestionId,this.shouldSuggestLogMode=o.shouldSuggestLogMode,this.isLinear=o.isLinear,this.parameterWarning=o.parameterWarning,this._exports=[this.residualVariable];for(var a in r)r.hasOwnProperty(a)&&this._exports.push(a);this.mergeDependencies(s)}getCompiledFunction(){return this.model.getCompiledFunction.apply(this.model,arguments)}getCompiledDerivative(){return this.model.getCompiledDerivative.apply(this.model,arguments)}};var mc=class extends V{constructor(r){typeof r!=\"string\"&&(r=\"\"+r);super([]);this.isString=!0;this._stringValue=r}asValue(){return this._stringValue}};var yc=class extends V{constructor(r,n){super(n);this.seed=n[0],this.userSeed=n[1],this.tag=r}asValue(){return this.seed.asValue()+\"::\"+this.tag+this.userSeed.asValue()}copyWithArgs(r){return new this.constructor(this.tag,r)}};function So(e){return typeof e!=\"object\"||!e?!1:e.type===\"Action\"}function ht(e,t){let r=e.getInstruction(t);switch(r.type){case 1:return Yn(r.value);default:throw new Error(`Unexpected opcode ${r.type}.`)}}function Yn(e){if(Array.isArray(e))return e.map(Yn);switch(typeof e){case\"boolean\":case\"number\":case\"string\":return e;case\"object\":if(So(e)){let t={};for(let r in e.updateRules){let n=e.updateRules[r];t[r]={value:Yn(n.value),valueType:n.valueType}}return{type:\"Action\",updateRules:t}}else return F(e);default:throw new Error(\"Unexpected value: \"+e)}}function gx(e){switch(e){case be:case I:case w:case Ge:case et:case ye:case ue:case Q:case X:case J:case ge:case xe:case le:case Se:return!0;case Jt:case Dt:case vt:case Y:case pr:case Le:case Wt:case de:case vn:case tt:case rr:case zt:case Ct:case jt:case Zt:case Qt:case Kt:case Et:case St:case Ir:return!1;default:let t=e;throw new Error(`Unexpected valueType: ${t}`)}}function fn(e){switch(e){case I:return NaN;case w:return[NaN,NaN];case et:return[NaN,NaN,NaN];case Ge:return{type:\"Action\",updateRules:{}};case ue:case ge:case J:return[[NaN,NaN],[NaN,NaN]];case Q:return[[NaN,NaN],NaN];case X:return[[NaN,NaN],[NaN,NaN],[NaN,NaN]];case be:return!1;case ye:return[];case Se:return[[NaN,NaN],[NaN,NaN],!1];case xe:case le:return[[NaN,NaN],NaN,NaN];default:let t=e;throw new Error(`${t} does not have a NaN type.`)}}function Z1(e){for(var t=0;t<this.length;t++)e(this.elementAt(t),t)}function Q1(e){for(var t=[],r=0;r<this.length;r++)t.push(e(this.elementAt(r),r));return t}var Yt=class extends qe{constructor(r){super();this.eachElement=Z1;this.mapElements=Q1;if(this._chunk=r,this.valueType=r.getReturnType(),this.addDependencies(r.getLiveArgNames()),this.isList=k(this.valueType),this.isList&&(this.length=this._chunk.getConstantListLength(),this.length===void 0))throw ry(r.getListLengthDependencies());var n=r.isConstant();this.isConstant=n&&(this.valueType===I||this.valueType===be),this.isTypedConstant=n,this.isEmptyAction=n&&this.valueType===Ge&&Object.keys(r.asValue().updateRules).length===0}shouldExportAns(){return!0}getCompiledFunction(r){return this._chunk.getCompiledFunction(r)}polynomialOrder(r){return this._chunk.polynomialOrder(r,{allowRestriction:!0,allowClosedBlockReferences:!1})}getPolynomialCoefficients(r){for(var n=this._chunk.getPolynomialCoefficients(r),i=n.chunk,s=n.coefficients,o=[],a=0;a<s.length;a++){var u=i.copy();u.setReturnIndex(s[a]),u.close(),o.push(new Yt(u))}return o}takeDerivative(r){var n=this._chunk.copy().takeDerivative(r).close();return new Yt(n)}interpretWithParameters(r){let n,i=this._chunk.argNames;if(r.length===i.length)n=r;else{n=[];let s=this.getDependencies();for(let o=0,a=0;o<i.length;o++)s[a]===i[o]?(n.push(r[a]),a+=1):n.push(void 0)}return this._chunk.interpretWithParameters(n)}substituteConstantArguments(r){return new Yt(this._chunk.substituteConstantArguments(r))}boundDomain(r){return this._chunk.boundDomain(r)}asValue(){if(this._chunk.isConstant())return this._chunk.asValue();if(this.isList){for(var r=[],n=Yn(fn(ot(this.valueType))),i=0;i<this.length;i++)r.push(n);return r}else return Yn(fn(this.valueType))}asTypedValue(){return{valueType:this.valueType,value:this.asValue()}}asCompilerValue(){return this._chunk.asCompilerValue()}isNaN(){return typeof this.asValue()==\"number\"&&isNaN(this.asValue())}getEvaluationInfo(){return this._chunk.isConstant()&&this.getDependencies().length===0&&(pe(this.valueType,I)||pe(this.valueType,be))?[{val:this.asValue()}]:!1}findLinearSubset(r){return this._chunk.findLinearSubset(r)}deriveRegressionRestrictions(){var r=this._chunk.deriveRegressionRestrictions();return r===this._chunk?this:new Yt(r)}};var gc=class extends V{};var hc=class extends V{};var bc=class extends V{};var Oo=class extends V{};var xc=class extends V{};var Pc=class extends V{isInequality(){return this.args[0].isInequality()&&this.args[1].isInequality()}};var Tc=class extends V{};var Ic=class extends Oo{};function $(e,t){return e=px(e),e.prototype.type=t,e}var b={Base:$(qe,\"Base\"),Expression:$(V,\"Expression\"),Error:$(O,\"Error\"),Constant:$(ir,\"Constant\"),MixedNumber:$(Yu,\"MixedNumber\"),Identifier:$(_t,\"Identifier\"),Ans:$(ju,\"Ans\"),List:$(Wi,\"List\"),Range:$(Zu,\"Range\"),ListAccess:$(Qu,\"ListAccess\"),DotAccess:$(Ku,\"DotAccess\"),Construction:$(el,\"Construction\"),ParenSeq:$(xo,\"ParenSeq\"),MovablePoint:$(tl,\"MovablePoint\"),OrderedPairAccess:$(rl,\"OrderedPairAccess\"),BareSeq:$(nl,\"BareSeq\"),BaseComparator:$(Nn,\"BaseComparator\"),DoubleInequality:$(sl,\"DoubleInequality\"),RepeatedOperator:$(Yi,\"RepeatedOperator\"),Sum:$(ol,\"Sum\"),Product:$(al,\"Product\"),Integral:$(ul,\"Integral\"),AssignmentExpression:$(ll,\"AssignmentExpression\"),ListComprehension:$(cl,\"ListComprehension\"),FunctionCall:$(Dn,\"FunctionCall\"),SeededFunctionCall:$(pl,\"SeededFunctionCall\"),FunctionExponent:$(fl,\"FunctionExponent\"),FunctionFactorial:$(dl,\"FunctionFactorial\"),Prime:$(ml,\"Prime\"),Piecewise:$(Cs,\"Piecewise\"),Derivative:$(yl,\"Derivative\"),UpdateRule:$(gl,\"UpdateRule\"),Substitution:$(hl,\"Substitution\"),Histogram:$(bl,\"Histogram\"),Object3D:$(xl,\"Object3D\"),DotPlot:$(Pl,\"DotPlot\"),BoxPlot:$(Tl,\"BoxPlot\"),TTest:$(Il,\"TTest\"),IndependentTTest:$(Ml,\"IndependentTTest\"),Stats:$(vl,\"Stats\"),Assignment:$(_s,\"Assignment\"),FunctionDefinition:$(sc,\"FunctionDefinition\"),Equation:$(Xi,\"Equation\"),Regression:$(oc,\"Regression\"),Image:$(ac,\"Image\"),Ticker:$(uc,\"Ticker\"),Slider:$(lc,\"Slider\"),RegressionParameter:$(cc,\"RegressionParameter\"),Table:$(pc,\"Table\"),TableColumn:$($s,\"TableColumn\"),SolvedEquation:$(fc,\"SolvedEquation\"),OptimizedRegression:$(dc,\"OptimizedRegression\"),Seed:$(mc,\"Seed\"),ExtendSeed:$(yc,\"ExtendSeed\"),IRExpression:$(Yt,\"IRExpression\"),Add:$(gc,\"Add\"),Subtract:$(On,\"Subtract\"),Multiply:$(hc,\"Multiply\"),Divide:$(bc,\"Divide\"),Exponent:$(Oo,\"Exponent\"),Negative:$(xc,\"Negative\"),And:$(Pc,\"And\"),PercentOf:$(Tc,\"PercentOf\"),RawExponent:$(Ic,\"RawExponent\"),Comparator:{\"<\":$(pi[\"<\"],\"Comparator['<']\"),\">\":$(pi[\">\"],\"Comparator['>']\"),\"<=\":$(pi[\"<=\"],\"Comparator['<=']\"),\">=\":$(pi[\">=\"],\"Comparator['>=']\"),\"=\":$(pi[\"=\"],\"Comparator['=']\")}};function cy(e,t){let r=Math.round(1e6*e)/1e6;return Math.abs(r-e)<t?r:e}function _V(e){let t=!0,r=!0,n=!0;return e.hardMin!==void 0&&e.target<e.hardMin&&(t=!1),e.hardMax!==void 0&&e.target>e.hardMax&&(r=!1),e.step&&Mc({target:e.target,step:e.step,hardMin:t?e.hardMin:void 0,hardMax:r?e.hardMax:void 0})!==e.target&&(n=!1),{min:t,max:r,step:n}}function Mc(e){let{target:t,hardMin:r,hardMax:n,step:i}=e,s=1e-10;if(r!==void 0&&n!==void 0&&(s=Math.min(s,Math.abs(n-r)/1e3)),i&&(s=Math.min(s,i/10)),r!==void 0&&(r=cy(r,s)),n!==void 0&&(n=cy(n,s)),e.forceSliderToMax&&n!==void 0&&(t=n),r>n||t<=r)return r;if(t>=n)return n;if(i){let u=r!==void 0?r:0;var o=Math.round((t-u)/i);t=i*o+u}let a=cy(t,s);return(i||r===a||n===a)&&(t=a),t<=r?r:t>=n?n:t}function hx(e){let{storedMax:t,sliderValue:r,hardMin:n,step:i}=e,s=10;if(t>s&&(s=t),r>s&&(s=r),n>s&&(s=n),i){let o=Mc({target:s,hardMin:n,hardMax:void 0,step:i});o>=s?s=o:s=o+i}return s}var fy=b.Constant,eS=b.Identifier;b.Base.prototype.tryGetConcreteTree=function(e,t){var r;try{r=this.getConcreteTree(e,t)}catch(n){n instanceof b.Base?r=n:r=Te()}return r};b.Base.prototype.getConcreteTree=function(e,t){var r=this.buildIRExpression(e,t);if(r.isError)throw r;return r};b.DoubleInequality.prototype.getConcreteTree=function(e,t){return new this.constructor([new b.Piecewise([this._indicator,this._expressions[0],new fy(NaN)]).getConcreteTree(e,t),this._operators[0],new eS(this._symbol),this._operators[1],new b.Piecewise([this._indicator,this._expressions[1],new fy(NaN)]).getConcreteTree(e,t)])};b.Error.prototype.getConcreteTree=function(e,t){return this};function wa(e,t){return e.isError?e:t.indexOf(e.valueType)===-1?Te():e}b.Image.prototype.getConcreteTree=function(e,t){var r=this.center.tryGetConcreteTree(e,t),n=this.radianAngle.tryGetConcreteTree(e,t),i=this.width.tryGetConcreteTree(e,t),s=this.height.tryGetConcreteTree(e,t),o=this.opacity.tryGetConcreteTree(e,t),a=[w,Le,de],u=[I,Y,de];return r=wa(r,a),n=wa(n,u),i=wa(i,u),s=wa(s,u),o=wa(o,u),new b.Image({center:r,radianAngle:n,width:i,height:s,opacity:o},this.moveStrategy)};b.Ticker.prototype.getConcreteTree=function(e,t){var r=this.handler.tryGetConcreteTree(e,t);!r.isError&&r.valueType!==Ge&&(r=ma(Z(r.valueType)));var n=r.getDependencies().filter(function(i){return!e.validActionVariable(i)});return n.length&&(r=Tt(e.sliderVariables(n)).setDependencies(n)),new b.Ticker({handler:r,minStep:this.minStep.tryGetConcreteTree(e,t)})};function py(e,t,r){if(!t){r.valids[e]=!0;return}var n=t.getDependencies();if(t.isError)r.errors[e]=!0;else if(n.length>0){r.errors[e]=!0;for(var i=0;i<n.length;i++)n[i]===r.exportedSymbol?r.errors.cycle=!0:r.missingVars.push(n[i])}else r.values[e]=+t.asValue();r.valids[e]=isFinite(r.values[e]),r.valids[e]||(r.values[e]=void 0)}function vc(e){return e&&e.valueType===Y&&e.length===1&&e.args?e.args[0]:e}b.Slider.prototype.getConcreteTree=function(e,t){var r=this._expression.getConcreteTree(e,t),n=vc(this.sliderMin&&this.sliderMin.tryGetConcreteTree(e,t)),i=vc(this.sliderMax&&this.sliderMax.tryGetConcreteTree(e,t)),s=vc(this.sliderStep&&this.sliderStep.tryGetConcreteTree(e,t)),o={exportedSymbol:this._symbol,errors:{},values:{},valids:{},missingVars:[],errMsg:void 0};if(py(\"min\",n,o),py(\"max\",i,o),py(\"step\",s,o),s&&o.valids.step&&(o.values.step===0?delete o.values.step:o.values.step=Math.abs(o.values.step)),o.errors.cycle?r=um(o.exportedSymbol):(o.errors.min||!o.valids.min?o.errMsg=lm():o.errors.max||!o.valids.max?o.errMsg=cm():(o.errors.step||!o.valids.step)&&(o.errMsg=fm()),o.values.min>o.values.max&&(o.valids.min=!1,o.valids.max=!1,o.errMsg||(o.errMsg=pm()))),r.isConstant){var a=t.initialEvaluation&&t.initialEvaluation.asValue(),u=a&&this.sliderIsPlayingOnce,l=o.values.max,c=+r.asValue(),p=o.values.min,f=o.values.step;if(u&&!isFinite(l)){var m=vc(this.sliderSoftMax&&this.sliderSoftMax.tryGetConcreteTree(e,t));m&&(l=hx({storedMax:+m.asValue(),sliderValue:c,step:f,hardMin:p}))}var d=Mc({target:c,hardMin:p,hardMax:l,step:f,forceSliderToMax:!!u}),y=Rs(d.toString()),g=isFinite(F(y))?y:d;r=new fy(g).getConcreteTree(e,t)}return r.sliderInfo=o,r};function bx(e,t){if(!t[this._symbol])throw pn(this._symbol);var r=this.args.map(function(i){return i.getConcreteTree(e,t)});if(r.length>0){if(r.length===1&&r.push(new b.Constant(1).getConcreteTree(e,t)),r[1].getDependencies().length)throw va(this._symbol).setDependencies(r[1].getDependencies());if(r[1].valueType!==I)throw va(this._symbol);var n=r[1].asValue();if(!isFinite(n)||n<=0)throw va(this._symbol)}return this.typeCheck(e,r),new this.constructor(r)}b.Histogram.prototype.getConcreteTree=bx;b.DotPlot.prototype.getConcreteTree=bx;b.BoxPlot.prototype.getConcreteTree=function(e,t){if(!t[this._symbol])throw pn(this._symbol);var r=this.args.map(function(n){return n.getConcreteTree(e,t)});return this.typeCheck(e,r),r.length===1&&(r[0].valueType===Y||r[0].valueType===de)?new this.constructor(r):Te()};function dy(e,t){if(!t[this._symbol])throw pn(this._symbol);var r=this.args.map(function(n){return n.getConcreteTree(e,t)});return this.typeCheck(e,r),new this.constructor(r)}b.TTest.prototype.getConcreteTree=dy;b.IndependentTTest.prototype.getConcreteTree=dy;b.Stats.prototype.getConcreteTree=dy;b.Table.prototype.getConcreteTree=function(e,t){for(var r=[],n=Object.create(t),i=0;i<this.columns.length;i++){var s=this.columns[i].getConcreteTree(e,n);s.isIndependent&&this.columns[i].exportToLocal(s,n),r.push(s)}return new this.constructor(r)};b.TableColumn.prototype.getConcreteTree=function(e,t){var u;var r=this.header.getConcreteTree(e,t),n,i,s=this.header instanceof b.Identifier&&!t[this.header._symbol];if(s){n=[];for(var o=0;o<this.values.length;o++){if(this.values[o].tableError()){n.push(vo(this.values[o].tableError()));continue}var a=this.values[o].tryGetConcreteTree(e,t);a.isError?n.push(a):a.tableError()?n.push(vo(a.tableError())):a.valueType===I?n.push(a):n.push(pd([Z(a.valueType)]))}return i=new this.constructor(r,n),i.isIndependent=!0,i}else return r.isList?n=r.mapElements(function(l){return l}):n=[],!r.isError&&r.valueType!==I&&r.valueType!==Y&&r.valueType!==de&&(r=cd([Z((u=r.valueType)!=null?u:Jt)])),i=new this.constructor(r,n),i};function La(e,t,r){return{symbolMap:e,symbolNodeMap:t,maxIndex:r}}function No(e,t){return e.symbolMap[t]}function xx(e,t){return e.symbolNodeMap[t]}function Kr(e,t,r,n){e.symbolNodeMap[t]=n,e.symbolMap[t]=r,e.maxIndex=Math.max(e.maxIndex,r)}function fi(e){return La(Object.create(e.symbolMap),Object.create(e.symbolNodeMap),e.maxIndex)}var Jn={};In(Jn,{acosh:()=>Vu,acot:()=>wS,acoth:()=>GS,acsc:()=>LS,acsch:()=>VS,addTangentArc:()=>WO,addTangentCircle:()=>$O,addTangentLine:()=>UO,addTangentRay:()=>HO,addTangentSegment:()=>Yy,arc:()=>LO,arcArcIntersection:()=>KO,arcCenter:()=>Fo,arcCircleIntersection:()=>QO,arcGlider:()=>NP,arcLineIntersection:()=>AP,arcOmega:()=>Bo,argMax:()=>pO,argMin:()=>cO,asec:()=>AS,asech:()=>BS,asinh:()=>Gu,atanh:()=>qu,bernoulliTable:()=>rP,binomSample:()=>ZS,binomcdf:()=>KS,binompdf:()=>Uc,center:()=>RO,chooseNonIncidentPoint:()=>JO,circle:()=>DO,circleArcIntersection:()=>ZO,circleCircleIntersection:()=>Ha,circleGlider:()=>YO,circleLineIntersection:()=>RP,clamp:()=>kr,common_log:()=>SS,composeTransformation:()=>fN,corr:()=>$c,cos:()=>uP,cosh:()=>Os,cot:()=>RS,cotDerivative:()=>nP,coth:()=>FS,cov:()=>dO,covp:()=>IP,csc:()=>DS,csch:()=>_S,dilation:()=>lN,directedAngleMarker:()=>SP,directedAngleMarkerMeasure:()=>CO,directedCoterminalAngle:()=>OP,distance:()=>Wa,elementsAt:()=>MN,erf:()=>rO,erfcx:()=>Fi,expm1:()=>ku,factorial:()=>Xs,gamma:()=>Ua,gcd:()=>wy,getArcDetails:()=>Wc,hsv:()=>hO,hypot:()=>si,identity:()=>NO,invBinom:()=>dP,invNorm:()=>By,invPoisson:()=>fP,invT:()=>mP,invUniform:()=>iO,invertTransformation:()=>dN,isDegenerateArc:()=>$y,itscore:()=>gP,ittest:()=>Gy,lcm:()=>Kx,line:()=>SO,lineArcIntersection:()=>LP,lineCircleIntersection:()=>jy,lineGlider:()=>Xy,lineLineIntersection:()=>wP,listGCD:()=>TS,listLCM:()=>IS,listLength:()=>sO,listMax:()=>bP,listMin:()=>hP,lnGamma:()=>vS,log:()=>ES,log1p:()=>ii,log_base:()=>sP,lowerQuantileIndex:()=>aO,lowerQuartileIndex:()=>lO,mad:()=>fO,md5Spyable:()=>jx,mean:()=>gi,median:()=>PP,mod:()=>Qx,nCr:()=>Qi,nPr:()=>_c,normalSample:()=>JS,normalcdf:()=>YS,normalpdf:()=>Ay,nthroot:()=>OS,parallel:()=>nN,perpendicular:()=>iN,pointDet:()=>FP,pointDot:()=>sN,pointPerp:()=>oN,poissonSample:()=>QS,poissoncdf:()=>eO,poissonpdf:()=>Ao,polyGamma:()=>iP,polygon:()=>bO,polygonArea:()=>Uy,polygonEdges:()=>PO,polygonGlider:()=>XO,polygonInteriorDirectedAngles:()=>EO,polygonInteriorUndirectedAngles:()=>vO,polygonPerimeter:()=>TO,pow:()=>Zx,quad:()=>gO,quantile:()=>xP,quartile:()=>Js,quartileIndex:()=>Hc,radius:()=>wO,random:()=>Cy,randomPerm:()=>_y,rank:()=>Ny,ray:()=>OO,rayGlider:()=>Dy,reflection:()=>pN,rgb:()=>MP,rotation:()=>cN,scaleTangentArc:()=>zO,scaleTangentCircle:()=>kO,scaleTangentLine:()=>GO,scaleTangentRay:()=>qO,scaleTangentSegment:()=>Wy,sec:()=>NS,sech:()=>CS,segment:()=>Hy,segmentGlider:()=>Jy,select:()=>IN,shuffle:()=>XS,sign:()=>la,sin:()=>aP,sinh:()=>go,sortPerm:()=>js,spearman:()=>mO,sqrtxsqm1:()=>Ef,sqrtxsqp1:()=>vf,stats:()=>qy,stdev:()=>Fc,stdevp:()=>yO,supplementAngle:()=>BO,tSample:()=>jS,tan:()=>lP,tanh:()=>Bu,tcdf:()=>Ac,toFraction:()=>PS,total:()=>qS,tpdf:()=>zc,transformAngleMarker:()=>TN,transformArc:()=>xN,transformCircle:()=>bN,transformLine:()=>gN,transformPoint:()=>yi,transformPolygon:()=>PN,transformRay:()=>hN,transformSegment:()=>Ky,transformation:()=>aN,translation:()=>uN,tscore:()=>yP,ttest:()=>Vy,undirectedAngleMarker:()=>AO,undirectedAngleMarkerMeasure:()=>_O,undirectedCoterminalAngle:()=>FO,uniformSample:()=>Ki,uniformcdf:()=>tO,uniformpdf:()=>Fy,uniquePerm:()=>vN,upperQuantileIndex:()=>oO,upperQuartileIndex:()=>uO,validateRangeLength:()=>ky,validateSampleCount:()=>zy,variance:()=>TP,varp:()=>$a,vertices:()=>xO});var Tx=function(){\"use strict\";function e(y,g){var h=(y&65535)+(g&65535),x=(y>>16)+(g>>16)+(h>>16);return x<<16|h&65535}function t(y,g){return y<<g|y>>>32-g}function r(y,g,h,x,P,D){return e(t(e(e(g,y),e(x,D)),P),h)}function n(y,g,h,x,P,D,M){return r(g&h|~g&x,y,g,P,D,M)}function i(y,g,h,x,P,D,M){return r(g&x|h&~x,y,g,P,D,M)}function s(y,g,h,x,P,D,M){return r(g^h^x,y,g,P,D,M)}function o(y,g,h,x,P,D,M){return r(h^(g|~x),y,g,P,D,M)}function a(y,g){y[g>>5]|=128<<g%32,y[(g+64>>>9<<4)+14]=g;var h,x,P,D,M,E=1732584193,S=-271733879,v=-1732584194,N=271733878;for(h=0;h<y.length;h+=16)x=E,P=S,D=v,M=N,E=n(E,S,v,N,y[h],7,-680876936),N=n(N,E,S,v,y[h+1],12,-389564586),v=n(v,N,E,S,y[h+2],17,606105819),S=n(S,v,N,E,y[h+3],22,-1044525330),E=n(E,S,v,N,y[h+4],7,-176418897),N=n(N,E,S,v,y[h+5],12,1200080426),v=n(v,N,E,S,y[h+6],17,-1473231341),S=n(S,v,N,E,y[h+7],22,-45705983),E=n(E,S,v,N,y[h+8],7,1770035416),N=n(N,E,S,v,y[h+9],12,-1958414417),v=n(v,N,E,S,y[h+10],17,-42063),S=n(S,v,N,E,y[h+11],22,-1990404162),E=n(E,S,v,N,y[h+12],7,1804603682),N=n(N,E,S,v,y[h+13],12,-40341101),v=n(v,N,E,S,y[h+14],17,-1502002290),S=n(S,v,N,E,y[h+15],22,1236535329),E=i(E,S,v,N,y[h+1],5,-165796510),N=i(N,E,S,v,y[h+6],9,-1069501632),v=i(v,N,E,S,y[h+11],14,643717713),S=i(S,v,N,E,y[h],20,-373897302),E=i(E,S,v,N,y[h+5],5,-701558691),N=i(N,E,S,v,y[h+10],9,38016083),v=i(v,N,E,S,y[h+15],14,-660478335),S=i(S,v,N,E,y[h+4],20,-405537848),E=i(E,S,v,N,y[h+9],5,568446438),N=i(N,E,S,v,y[h+14],9,-1019803690),v=i(v,N,E,S,y[h+3],14,-187363961),S=i(S,v,N,E,y[h+8],20,1163531501),E=i(E,S,v,N,y[h+13],5,-1444681467),N=i(N,E,S,v,y[h+2],9,-51403784),v=i(v,N,E,S,y[h+7],14,1735328473),S=i(S,v,N,E,y[h+12],20,-1926607734),E=s(E,S,v,N,y[h+5],4,-378558),N=s(N,E,S,v,y[h+8],11,-2022574463),v=s(v,N,E,S,y[h+11],16,1839030562),S=s(S,v,N,E,y[h+14],23,-35309556),E=s(E,S,v,N,y[h+1],4,-1530992060),N=s(N,E,S,v,y[h+4],11,1272893353),v=s(v,N,E,S,y[h+7],16,-155497632),S=s(S,v,N,E,y[h+10],23,-1094730640),E=s(E,S,v,N,y[h+13],4,681279174),N=s(N,E,S,v,y[h],11,-358537222),v=s(v,N,E,S,y[h+3],16,-722521979),S=s(S,v,N,E,y[h+6],23,76029189),E=s(E,S,v,N,y[h+9],4,-640364487),N=s(N,E,S,v,y[h+12],11,-421815835),v=s(v,N,E,S,y[h+15],16,530742520),S=s(S,v,N,E,y[h+2],23,-995338651),E=o(E,S,v,N,y[h],6,-198630844),N=o(N,E,S,v,y[h+7],10,1126891415),v=o(v,N,E,S,y[h+14],15,-1416354905),S=o(S,v,N,E,y[h+5],21,-57434055),E=o(E,S,v,N,y[h+12],6,1700485571),N=o(N,E,S,v,y[h+3],10,-1894986606),v=o(v,N,E,S,y[h+10],15,-1051523),S=o(S,v,N,E,y[h+1],21,-2054922799),E=o(E,S,v,N,y[h+8],6,1873313359),N=o(N,E,S,v,y[h+15],10,-30611744),v=o(v,N,E,S,y[h+6],15,-1560198380),S=o(S,v,N,E,y[h+13],21,1309151649),E=o(E,S,v,N,y[h+4],6,-145523070),N=o(N,E,S,v,y[h+11],10,-1120210379),v=o(v,N,E,S,y[h+2],15,718787259),S=o(S,v,N,E,y[h+9],21,-343485551),E=e(E,x),S=e(S,P),v=e(v,D),N=e(N,M);return[E,S,v,N]}function u(y){var g,h=\"\",x=y.length*32;for(g=0;g<x;g+=8)h+=String.fromCharCode(y[g>>5]>>>g%32&255);return h}function l(y){var g,h=[];for(h[(y.length>>2)-1]=void 0,g=0;g<h.length;g+=1)h[g]=0;var x=y.length*8;for(g=0;g<x;g+=8)h[g>>5]|=(y.charCodeAt(g/8)&255)<<g%32;return h}function c(y){return u(a(l(y),y.length*8))}function p(y){var g=\"0123456789abcdef\",h=\"\",x,P;for(P=0;P<y.length;P+=1)x=y.charCodeAt(P),h+=g.charAt(x>>>4&15)+g.charAt(x&15);return h}function f(y){return unescape(encodeURIComponent(y))}function m(y){return c(f(y))}function d(y){return p(m(y))}return d}();var Dc={};In(Dc,{color:()=>Oc,hsl:()=>Nc,rgb:()=>Ws});function gy(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Dx(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function _a(){}var Aa=.7,Sc=1/Aa,Do=\"\\\\s*([+-]?\\\\d+)\\\\s*\",Ca=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",mi=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",tS=/^#([0-9a-f]{3,8})$/,rS=new RegExp(\"^rgb\\\\(\"+[Do,Do,Do]+\"\\\\)$\"),nS=new RegExp(\"^rgb\\\\(\"+[mi,mi,mi]+\"\\\\)$\"),iS=new RegExp(\"^rgba\\\\(\"+[Do,Do,Do,Ca]+\"\\\\)$\"),sS=new RegExp(\"^rgba\\\\(\"+[mi,mi,mi,Ca]+\"\\\\)$\"),oS=new RegExp(\"^hsl\\\\(\"+[Ca,mi,mi]+\"\\\\)$\"),aS=new RegExp(\"^hsla\\\\(\"+[Ca,mi,mi,Ca]+\"\\\\)$\"),Ix={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gy(_a,Oc,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Mx,formatHex:Mx,formatHsl:uS,formatRgb:vx,toString:vx});function Mx(){return this.rgb().formatHex()}function uS(){return Rx(this).formatHsl()}function vx(){return this.rgb().formatRgb()}function Oc(e){var t,r;return e=(e+\"\").trim().toLowerCase(),(t=tS.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Ex(t):r===3?new dn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Ec(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Ec(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rS.exec(e))?new dn(t[1],t[2],t[3],1):(t=nS.exec(e))?new dn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=iS.exec(e))?Ec(t[1],t[2],t[3],t[4]):(t=sS.exec(e))?Ec(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=oS.exec(e))?Nx(t[1],t[2]/100,t[3]/100,1):(t=aS.exec(e))?Nx(t[1],t[2]/100,t[3]/100,t[4]):Ix.hasOwnProperty(e)?Ex(Ix[e]):e===\"transparent\"?new dn(NaN,NaN,NaN,0):null}function Ex(e){return new dn(e>>16&255,e>>8&255,e&255,1)}function Ec(e,t,r,n){return n<=0&&(e=t=r=NaN),new dn(e,t,r,n)}function lS(e){return e instanceof _a||(e=Oc(e)),e?(e=e.rgb(),new dn(e.r,e.g,e.b,e.opacity)):new dn}function Ws(e,t,r,n){return arguments.length===1?lS(e):new dn(e,t,r,n==null?1:n)}function dn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}gy(dn,Ws,Dx(_a,{brighter:function(e){return e=e==null?Sc:Math.pow(Sc,e),new dn(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Aa:Math.pow(Aa,e),new dn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Sx,formatHex:Sx,formatRgb:Ox,toString:Ox}));function Sx(){return\"#\"+my(this.r)+my(this.g)+my(this.b)}function Ox(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?\"rgb(\":\"rgba(\")+Math.max(0,Math.min(255,Math.round(this.r)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.g)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?\")\":\", \"+e+\")\")}function my(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?\"0\":\"\")+e.toString(16)}function Nx(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new di(e,t,r,n)}function Rx(e){if(e instanceof di)return new di(e.h,e.s,e.l,e.opacity);if(e instanceof _a||(e=Oc(e)),!e)return new di;if(e instanceof di)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(r-n)/a+(r<n)*6:r===s?o=(n-t)/a+2:o=(t-r)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new di(o,a,u,e.opacity)}function Nc(e,t,r,n){return arguments.length===1?Rx(e):new di(e,t,r,n==null?1:n)}function di(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}gy(di,Nc,Dx(_a,{brighter:function(e){return e=e==null?Sc:Math.pow(Sc,e),new di(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Aa:Math.pow(Aa,e),new di(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new dn(yy(e>=240?e-240:e+120,i,n),yy(e,i,n),yy(e<120?e+240:e-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?\"hsl(\":\"hsla(\")+(this.h||0)+\", \"+(this.s||0)*100+\"%, \"+(this.l||0)*100+\"%\"+(e===1?\")\":\", \"+e+\")\")}}));function yy(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}function gn(e,t){let r;e>t&&(r=e,e=t,t=r);let n=e>0,i=t>0,s=Math.abs(e)>.01,o=Math.abs(t)>.01;if(s||o)return Li(e,t);if(e===0)return t*Math.abs(t);if(t===0)return e*Math.abs(e);if(n!==i)return 0;let a=n?Math.sqrt(e*t):-Math.sqrt(e*t);return a>=e&&t>=a?a:Li(e,t)}function Py(e,t,r,n,i){if(!(isNaN(t)||isNaN(n)||t<0==n<0))for(;;){let s=gn(e,r),o=i(s);if(!isFinite(o))return;if(s===e||s===r)return Math.abs(t)<=Math.abs(n)?[e,t]:[r,n];if(o===0)return Fa(e,t,s,o,r,n,i);t<0!=o<0?(r=s,n=o):(e=s,t=o)}}function Fx(e,t,r,n,i){if(!(hy(t)||hy(n))&&by(t,n))for(;;){let s=gn(e,r),o=i(s);if(hy(o))return;if(s===e||s===r)return s;if(by(t,o))r=s,n=o;else if(by(o,n))e=s,t=o;else return}}function hy(e){for(let t of e)if(isNaN(t))return!0;return!1}function by(e,t){for(let r=0;r<e.length;r++)if(!cS(e[r],t[r]))return!1;return!0}function cS(e,t){return e<=0&&t>=0||e>=0&&t<=0}function Fa(e,t,r,n,i,s,o){let a;if(!isFinite(n))return;isFinite(t)||(a=mn(e,t,r,n,o),a!==void 0&&(e=a,t=o(e))),isFinite(s)||(a=mn(r,n,i,s,o),a!==void 0&&(i=a,s=o(a)));let u,l;t===n?u=[e,t]:u=wx(e,t,r,n,o,n),s===n?l=[i,s]:l=wx(r,n,i,s,o,n);let c;return u&&l&&(c=gn(u[0],l[0])),c!==void 0?[c,o(c)]:void 0}function mn(e,t,r,n,i){if(isFinite(t)!==isFinite(n))for(;;){let s=gn(e,r),o=i(s);if(s===e||s===r)return isFinite(t)?e:r;isFinite(o)!==isFinite(t)?(r=s,n=o):(e=s,t=o)}}function wx(e,t,r,n,i,s){if(t===s!=(n===s))for(;;){let o=gn(e,r),a=i(o);if(o===e||o===r)return t===s?[e,t]:[r,n];a===s!=(t===s)?(r=o,n=a):(e=o,t=a)}}function Bx(e,t,r,n,i,s,o){if(e<r&&r<i&&isFinite(t)&&isFinite(n)&&isFinite(s)&&t!==n&&n!==s&&n>t==n>s)for(;;){let a=gn(e,r),u=o(a),l=gn(r,i),c=o(l);if(!isFinite(u)||!isFinite(c))return;if(a===e||a===r||l===r||l===i)return u>n==n>t?[a,u]:c>n==n>t?[l,c]:[r,n];if(u===n||c===n)return Fa(e,t,r,n,i,s,o);n>t&&u>t&&u>n||n<t&&u<t&&u<n?(i=r,s=n,r=a,n=u):n>t&&c>n&&c>s||n<t&&c<n&&c<s?(e=r,t=n,r=l,n=c):(e=a,t=u,i=l,s=c)}}function yn([e,t],[r,n]){return(r-e)*(r-e)+(n-t)*(n-t)}function Lx(e,t,r,n,i,s){let o=s(e),a=s(t),u=s(r),l=yn(o,n),c=yn(a,n),p=yn(u,n);if(!(t<=e||r<=t)&&!(!isFinite(l)||!isFinite(c)||!isFinite(p))&&!(c>=l||c>=p))for(;;){if(Math.abs(u[0]-o[0])<i&&Math.abs(u[1]-o[1])<i)return[e,r];let f=gn(e,t),m=s(f),d=yn(m,n),y=gn(t,r),g=s(y),h=yn(g,n);if(!isFinite(d)||!isFinite(h))return;if(f===e||f===t||y===t||y===r)return d<c&&d<h?[f,f]:h<d&&h<c?[y,y]:[t,t];if((d===c||h===c)&&(t=.5*(f+t),a=s(t),c=yn(a,n),d===c||h===c))return[e,r];d<c&&d<h?([r,t]=[t,f],[u,a]=[a,m],[p,c]=[c,d]):h<d&&h<c?([e,t]=[t,y],[o,a]=[a,g],[l,c]=[c,h]):([e,r]=[f,y],[o,u]=[m,g],[l,p]=[d,h])}}function Ax(e,t,r){return t===void 0&&(t=-1/0),r===void 0&&(r=1/0),Math.min(r,Math.max(t,e))}function xy(e,t,r,n,i,s){let o;if(n!==void 0&&i!==void 0){let p=.5*(n+i);o=r+.01*(r<p?i-n:n-i)}else o=Math.abs(r)>1?r*1.00001:r+1e-5;let a=e(r),u=e(o),l=yn(a,t),c=yn(u,t);if(!(!isFinite(l)||!isFinite(c))){if(l===c)return[r,o];for(c>l&&([r,o]=[o,r],[a,u]=[u,a],[l,c]=[c,l]);isFinite(r)&&isFinite(o)&&r!==o;){if(i!==void 0&&o>i)return[i,i];if(n!==void 0&&o<n)return[n,n];let p=r+3*(o-r),f=e(p),m=yn(f,t);if(!isFinite(m))return[r,o];if(m===c)return[r,o];if(m>c){let d=o>r?Lx(r,o,p,t,s,e):Lx(p,o,r,t,s,e);return d&&[Ax(d[0],n,i),Ax(d[1],n,i)]}[r,l,o,c]=[o,c,p,m]}return[r,o]}}function Cx(e,t,r,n){return r?n?Math.min(yn(e(n[0]),t),yn(e(n[1]),t))<Math.min(yn(e(r[0]),t),yn(e(r[1]),t)):!1:!0}function VV(e,t,r,n,i,s){let o=xy(e,t,r,n,i,s);if(n!==void 0){let a=xy(e,t,n,n,i,s);Cx(e,t,o,a)&&(o=a)}if(i!==void 0){let a=xy(e,t,i,n,i,s);Cx(e,t,o,a)&&(o=a)}return o}function _x(e,t,r,n,i,s,o,a){let u=Math.abs(n-t),l=Math.abs(s-n),c=Math.abs(a-s);return u>l&&u>c?[e,r]:c>l&&c>u?[i,o]:[r,i]}function Ro(e,t,r,n,i,s,o,a=0){if(!((r-e)*(i-r)<=0)&&!(!isFinite(e)||!isFinite(r)||!isFinite(i))&&!(!isFinite(t)||!isFinite(s))){if(!isFinite(n)){let u=mn(e,t,r,n,o),l=mn(r,n,i,s,o);return u===void 0||l===void 0?void 0:[u,l]}if(!(Math.abs(n-((i-r)*t+(r-e)*s)/(i-e))<a))for(;;){let u=gn(e,r),l=o(u),c=gn(r,i),p=o(c),f=Math.abs(l-Li(t,n)),m=Math.abs(n-Li(l,p)),d=Math.abs(p-Li(n,s));if(f<=a&&m<=a&&d<=a)return;if(!isFinite(l)){let y=mn(e,t,u,l,o),g=mn(u,l,i,s,o);return y===void 0||g===void 0?void 0:[y,g]}if(!isFinite(p)){let y=mn(e,t,c,p,o),g=mn(c,p,i,s,o);return y===void 0||g===void 0?void 0:[y,g]}if((u===e||u===r)&&(c===r||c===i))return Math.abs(n-t)>Math.abs(s-n)?[e,r]:[r,i];if(u===e||u===r)return _x(e,t,r,n,c,p,i,s);if(c===r||c===i)return _x(e,t,u,l,r,n,i,s);f>d&&f>=m?(i=r,s=n,r=u,n=l):d>f&&d>=m?(e=r,t=n,r=c,n=p):(e=u,t=l,i=c,s=p)}}}var fS=Ro,Rc=mn,dS=3.154019550531224,Vx=Math.pow(2,-13),ji=Vx*Vx,Gx=ji*ji,Ty=ji,My=32,Xn=[],Zi=[];function mS(e,t){for(var r=My;r>0;r--){var n=dS/My*r,i=go(n),s=Os(Math.PI/2*i),o=1/(Math.exp(Math.PI/2*i)*s),a=Os(n)/(s*s);e.push(o),t.push(a)}}mS(Xn,Zi);var zx=0;for(wc=0;wc<Zi.length;wc++)zx+=Zi[wc];var wc,Lc=1/(1+2*zx);function Cr(e,t,r){return .5*(t*(2-r)+e*r)}function yS(e,t,r){var n=.5*(t+r),i=fS(t,e(t),n,e(n),r,e(r),e);return i?.5*(i[0]+i[1]):n}function Ba(e,t,r,n,i){return{x1:e,x2:t,value:r,error:n,minerror:i}}function qx(e,t,r){var n=Math.abs(e(Cr(t,r,ji))),i=Math.abs(e(Cr(t,r,2*ji))),s=Math.abs(e(Cr(t,r,4*ji)));return n<ji||i<ji?!1:n>1.95*i&&i>1.95*s}function Iy(e,t,r){var n=Cr(r,t,Xn[0]),i=Cr(t,r,Xn[0]),s=e(n),o=e(i),a=Cr(t,r,1),u=e(a),l,c;if(isFinite(u)&&!isFinite(s)){if(l=Rc(n,s,a,u,e),Math.abs((l-t)/(r-t))>Ty)return Ba(t,r,NaN,NaN,NaN);t=l,s=e(t)}if(isFinite(u)&&!isFinite(o)){if(c=Rc(a,u,i,o,e),Math.abs((c-r)/(r-t))>Ty)return Ba(t,r,NaN,NaN,NaN);r=c,o=e(r)}if(isFinite(s)&&isFinite(o)&&!isFinite(u)){if(l=Rc(n,s,a,u,e),c=Rc(a,u,i,o,e),Math.abs((c-l)/(r-t))>Ty)return Ba(t,r,NaN,NaN,NaN);u=.5*(l+c)}if(qx(e,t,r)||qx(e,r,t))return Ba(t,r,NaN,NaN,NaN);for(var p=u,f=0,m=0,d=0,y=0,g=0,h=0,x=0;x<My;x+=4)g=e(Cr(t,r,Xn[x])),h=e(Cr(r,t,Xn[x])),y=Math.max(y,Math.abs(g),Math.abs(h)),f+=Zi[x]*(g+h),g=e(Cr(t,r,Xn[x+1])),h=e(Cr(r,t,Xn[x+1])),y=Math.max(y,Math.abs(g),Math.abs(h)),d+=Zi[x+1]*(g+h),g=e(Cr(t,r,Xn[x+2])),h=e(Cr(r,t,Xn[x+2])),y=Math.max(y,Math.abs(g),Math.abs(h)),m+=Zi[x+2]*(g+h),g=e(Cr(t,r,Xn[x+3])),h=e(Cr(r,t,Xn[x+3])),y=Math.max(y,Math.abs(g),Math.abs(h)),d+=Zi[x+3]*(g+h);var P=p+f,D=P+m,M=D+d,E=Math.abs(m-P),S=Math.abs(d-D),v=Lc*(r-t)*M,N=Lc*Math.abs(r-t)*y*Zi[0],G;return E===0?G=Lc*Math.abs(r-t)*S:G=Lc*Math.abs(r-t)*S*(S/E)*(S/E),G=Math.max(G,N),Ba(t,r,v,G,N)}function kx(e){for(var t=-1/0,r=-1/0,n=-1,i=0,s=0;s<e.length;s++){var o=e[s];i+=o.value,o.error>t&&(t=o.error,n=s),o.minerror>r&&(r=o.minerror)}return{maxerror:t,maxminerror:r,maxindex:n,totalvalue:i}}function Va(e,t,r,n=32){if(isNaN(t)||isNaN(r))return NaN;var i=1;if(t>r){var s=t;t=r,r=s,i=-1}if(t===1/0&&r===1/0)return NaN;if(t===-1/0&&r===-1/0)return NaN;if(t===-1/0&&r===1/0)return i*Va(function(f){return e(f/((1+f)*(1-f)))*(1+f*f)/((1+f)*(1+f)*(1-f)*(1-f))},-1,1,n);if(t===-1/0)return i*Va(function(f){return-e(r-f/(1-f))/((1-f)*(1-f))},1,0,n);if(r===1/0)return i*Va(function(f){return e(t+f/(1-f))/((1-f)*(1-f))},0,1,n);for(var o=[Iy(e,t,r)],a=kx(o),u=1;u<n&&!(Math.abs(a.maxerror/a.totalvalue)<=32*Gx||a.maxerror<=32*Gx||a.maxerror<=32*a.maxminerror||!isFinite(a.maxerror)||!isFinite(a.maxminerror));u++){var l=o[o.length-1];o[o.length-1]=o[a.maxindex],o[a.maxindex]=l;var c=o.pop(),p=yS(e,Cr(c.x2,c.x1,.125),Cr(c.x1,c.x2,.125));o.push(Iy(e,c.x1,p)),o.push(Iy(e,p,c.x2)),a=kx(o)}return!isFinite(a.maxerror)||!isFinite(a.maxminerror)?NaN:Math.abs(a.totalvalue)<=10*a.maxminerror?0:i*a.totalvalue}var Ga=class{constructor(t){this.comparator=t;this._data=[]}size(){return this._data.length}queue(t){let r=this._data.length;for(this._data.push(t);r>0;){let n=r-1>>>1;if(this.comparator(this._data[r],this._data[n])<0){let i=this._data[n];this._data[n]=this._data[r],this._data[r]=i,r=n}else break}}dequeue(){let t=this._data[0],r=this._data.pop();if(this._data.length>0&&r!==void 0){this._data[0]=r;let n=0,i=this._data.length-1;for(;;){let s=(n<<1)+1,o=s+1,a=n;if(s<=i&&this.comparator(this._data[s],this._data[a])<0&&(a=s),o<=i&&this.comparator(this._data[o],this._data[a])<0&&(a=o),a!==n){let u=this._data[a];this._data[a]=this._data[n],this._data[n]=u,n=a}else break}}return t}peek(){return this._data[0]}clear(){this._data.length=0}};function hS(e,t){let r=e.start[1]-e.end[1],n=e.end[0]-e.start[0],i=t.start[1]-t.end[1],s=t.end[0]-t.start[0],o=r*e.end[0]+n*e.end[1],a=i*t.end[0]+s*t.end[1],u=r*s-i*n;if(u!==0)return(r*a-i*o)/u}function bS(e,t,r){if(r.xSlope>=t.xSlope)return;if(t.scanlineX===r.scanlineX)return e;let n=t.start[1]>t.end[1]?t.start:t.end,i=r.start[1]>r.end[1]?r.start:r.end,s=n[1];if(i[1]<n[1]){if(s=i[1],vy(s,t)<i[0])return}else if(n[1]<i[1]){let a=vy(s,r);if(n[0]<a)return}else if(n[0]<i[0])return;let o=hS(t,r);if(o!==void 0)return Math.max(Math.min(o,s),e)}function vy(e,t){let r=t.end[0],n=t.start[0],i=t.end[1],s=t.start[1];if(i===e)return r;if(s===e)return n;{let o=(e-i)/(s-i),a=(1-o)*r+o*n;if(r<n){if(a<=r)return r;if(n<=a)return n}else{if(a<=n)return n;if(r<=a)return r}return a}}function Ey(e){let t=0,r=0,n=!1,i=0;for(let{scanlineX:s,isClockwise:o}of e)o?i+=1:i-=1,i!==0&&!n?(n=!0,r=s):i===0&&n&&(n=!1,t+=s-r);return t}var qa=class{constructor(t){this.scanlineY=-1/0;let r=1;this.activeEdges=[],this.events=new Ga(function(n,i){return n.y-i.y}),this.scanlineY=-1/0,this.polygonLength=t.length-1;for(let n=t.length-1;n>=1;n--){let i=t[n],s=t[n-1],o={id:r++,index:n-1,end:i,start:s,scanlineX:0,xSlope:1/0,isClockwise:s[1]>i[1],skipIntersectionWith:{}};s[1]>i[1]?(this.events.queue({type:\"+\",y:i[1],edge:o}),this.events.queue({type:\"-\",y:s[1],edge:o}),o.xSlope=(s[0]-i[0])/(s[1]-i[1]),o.scanlineX=i[0]):i[1]>s[1]?(this.events.queue({type:\"+\",y:s[1],edge:o}),this.events.queue({type:\"-\",y:i[1],edge:o}),o.xSlope=(i[0]-s[0])/(i[1]-s[1]),o.scanlineX=s[0]):this.events.queue({type:\"h\",y:s[1],edge:o})}}nextScanline(){var s;let t,r=this.events.peek();if(!r)return;if(r.y<=this.scanlineY)throw new Error(\"Programming error: expected next event to begin a new scanline\");this.scanlineY=r.y,this.updateActiveEdgeScanlineIntersections();let n=Ey(this.activeEdges),i=[];for(;t=this.events.dequeue();)if(t.type===\"x\"?this.swapActiveEdges(t):t.type===\"+\"?this.insertActiveEdge(t):t.type===\"-\"&&this.removeActiveEdge(t),i.push(t),((s=this.events.peek())==null?void 0:s.y)!==this.scanlineY)return{y:this.scanlineY,activeEdges:this.activeEdges,lengthBeforeProcessingEvents:n,events:i}}updateActiveEdgeScanlineIntersections(){let t=-1/0;for(let r of this.activeEdges){let n=vy(this.scanlineY,r);n<t?n=t:t=n,r.scanlineX=n}}insertActiveEdge(t){let r=this.activeEdges,n=t.edge,i=t.y,{xSlope:s,scanlineX:o}=n;for(var a=0;a<r.length;a++){let u=r[a];if(o<u.scanlineX||o===u.scanlineX&&s<=u.xSlope)break}r.splice(a,0,n),this.checkIntersection(i,r[a-1],n),this.checkIntersection(i,n,r[a+1])}checkIntersection(t,r,n){if(!r||!n||r.index===(n.index+1)%this.polygonLength||n.index===(r.index+1)%this.polygonLength)return;if(r.id<n.id){if(r.skipIntersectionWith[n.id])return}else if(n.skipIntersectionWith[r.id])return;let i=bS(t,r,n);if(i===void 0)return;r.id<n.id?r.skipIntersectionWith[n.id]=!0:n.skipIntersectionWith[r.id]=!0;let s={type:\"x\",y:i,edge1:r,edge2:n};this.events.queue(s)}removeActiveEdge(t){let r=this.activeEdges,n=t.edge,i=t.y,s=r.indexOf(n);r.splice(s,1),this.checkIntersection(i,r[s-1],r[s])}swapActiveEdges(t){let r=this.activeEdges,n=t.edge1,i=t.edge2,s=t.y,o=r.indexOf(n),a=o+1;o===-1||r[a]!==i?n.id<i.id?delete n.skipIntersectionWith[i.id]:delete i.skipIntersectionWith[n.id]:(r[o]=i,r[a]=n,this.checkIntersection(s,r[o-1],i),this.checkIntersection(s,n,r[a+1]))}static debugEvent(t){let r=`y=${t.y} `;return r+=t.type===\"x\"?`[x ${t.edge1.index}/${t.edge2.index}]`:`[${t.type} ${t.edge.index}] (${t.edge.end})-(${t.edge.start})`,r}debugState(){return`y=${this.scanlineY}\n${this.activeEdges.map(t=>`[${t.index}] ${t.scanlineX}`)}`}};function xS(e){let t=e.slice(0,2),r=e.slice(-2);return t[0]!==r[0]||t[1]!==r[1]?[...e,...t]:e}function UV(e,t){if(!e)return!1;let r=xS(e),[n,i]=t,s=0;for(var o=r.length-1;o>=3;o-=2){let a=r[o-3],u=r[o-2],l=r[o-1],c=r[o];u>i!=c>i&&n<(l-a)*(i-u)/(c-u)+a&&(u>c?s+=1:u<c&&(s-=1))}return s!==0}function Hx(e){if(e.length<4||e[0][0]!==e[e.length-1][0]||e[0][1]!==e[e.length-1][1])return 0;let t=new qa(e),r,n=0,i;for(;i=t.nextScanline();){let s=i.lengthBeforeProcessingEvents;r&&(n+=.5*(i.y-r.y)*(s+r.length)),r={y:i.y,length:Ey(i.activeEdges)}}return n}function $x(e){if(!e.length)return[];if(e[0][0]!==e[e.length-1][0]||e[0][1]!==e[e.length-1][1])throw new Error(\"Programming error: expected last point to be a duplicate of the first point.\");for(let f=0;f<e.length-1;f++)if(e[f][0]===e[f+1][0]&&e[f][1]===e[f+1][1])throw new Error(`Programming error: unexpected duplicate point at ${f+1}`);let t=new qa(e),r=e.slice(0,-1).map(()=>0),n;for(;n=t.nextScanline();)for(let f of n.events){let m={};if(f.type===\"h\"){let d=f.edge;m[d.index]={xMin:Math.min(d.end[0],d.start[0]),xMax:Math.max(d.end[0],d.start[0]),dx:d.end[0]-d.start[0]}}else if(f.type===\"x\"){let d=f.edge1,y=f.edge2,g=Ux([d.start,d.end],[y.start,y.end]),h=g>0?-1:g<0?1:0;r[d.index]+=h,r[y.index]-=h}for(let d of n.activeEdges){let y=d.end[1]-d.start[1];for(let g in m){let{xMin:h,xMax:x,dx:P}=m[g];if(h<d.scanlineX&&d.scanlineX<x){let D=P*y,M=D>0?-1:D<0?1:0;r[g]+=M,r[d.index]-=M}}}}let i=e.slice(0,-1).map(()=>0),s=e[0][1],o=0;for(let f=1;f<e.length;f++)e[f][1]<s&&(s=e[f][1],o=f);let a=e.length-1,u=o>0?o-1:a-1,l=(o+1)%a,p=Ux([e[u],e[o]],[e[o],e[l]])>0?1:0;i[o]=p>0?-1:1;for(let f=0;f<a-1;f++){let m=(o+f)%a;p+=r[m],i[(m+1)%a]=p>0?-1:1}return i}function Ux(e,t){let r=e[1][0]-e[0][0],n=e[1][1]-e[0][1],i=t[1][0]-t[0][0],s=t[1][1]-t[0][1];return r*s-n*i}var jx={spy:Tx},PS=wi,wy=Ns,Zx=Ds;function kr(e,t,r){return Math.max(t,Math.min(r,e))}function Qx(e,t){let r=e%t;return e*t<0&&r!==0?r+t:r}function Kx(e,t){e=Math.round(e),t=Math.round(t);let r=wy(e,t);return Math.abs(e/r*t)}function TS(e){if(e.length===0)return NaN;let t=e[0];for(let r=1;r<e.length;r++)t=wy(t,e[r]);return t}function IS(e){if(e.length===0)return NaN;let t=e[0];for(let r=1;r<e.length;r++)t=Kx(t,e[r]);return t}function Qi(e,t){if(isNaN(e))return e;if(isNaN(t))return t;if(!isFinite(e)&&!isFinite(t))return NaN;if(t===0||e===t)return 1;if(e===0)return wn(t);let r=isFinite(e)&&e===Math.round(e),n=isFinite(t)&&t===Math.round(t);if(e<0&&t<0&&e-t<0)return r&&n?0:wn(e-t)*wn(t)/(wn(e)*Qi(-e,-t));if(e<0&&t>0&&e-t<0)return r&&n?Math.pow(-1,t)*Qi(t-e-1,t):wn(e-t)/wn(e)*Qi(-(e-t),t);if(e<0&&t<0&&e-t>0)return r&&n?Math.pow(-1,e-t)*Qi(-t-1,e-t):wn(t)/wn(e)*Qi(-t,-e);if(e>0&&t<0&&e-t>0){let a=Math.abs(e)>Math.abs(t)?-t:e;return wn(t)/Qi(e-t,a)}if(e>0&&t>0&&e-t<0)return wn(e-t)/Qi(t,e);if(e<0||t<0||e-t<0||e<15&&t<15&&e-t<15)return _c(e,t)/Xs(t);let i=en(e)-en(t)-en(e-t)-(e-t)*ii(-t/e),s=Math.sqrt(e/(2*Math.PI*t*(e-t)))*Math.pow(e/t,t)*Math.exp(i);return r&&n&&e>0&&t>0&&e-t>0?Math.round(s):s}function _c(e,t){if(isNaN(e))return e;if(isNaN(t))return t;if(!isFinite(e)&&!isFinite(t))return NaN;if(t===0)return 1;if(e===0)return 1/Xs(-t);let r=isFinite(e)&&e===Math.round(e),n=isFinite(t)&&t===Math.round(t);if(e<0&&e-t<0)return r&&n?Math.pow(-1,t)*_c(t-e-1,t):wn(e-t)/wn(e)*_c(-(e-t),t);if(e<0||e-t<0||e<15&&e-t<15)return Xs(e)/Xs(e-t);let i=en(e)-en(e-t)-(e-t)*ii(-t/e),s=Math.sqrt(e/(e-t))*Math.pow(e/Math.E,t)*Math.exp(i);return r&&n&&e>0&&t>0&&e-t>0?Math.round(s):s}function Xs(e){return Ua(e+1)}function Ua(e){if(e===-1/0)return NaN;let t=Math.round(e)===e;if(e<0)return t?1/0:Math.PI/(cP(e)*Ua(1-e));if(e>170)return 1/0;let r;return e<15?r=eP(e):e<120?r=MS(e):r=Math.exp(tP(e)),t?Math.round(r):r}function eP(e){let t=4.077131788261185,r=7.024675027156382,n=6.657107767450176,i=3.766266976716022,s=1.2792371666711133,o=.24304596436338005,a=.020049769312165774,u=4.154347453162709,l=7.270007565107539,c=6.97805297331391,p=3.989651532924167,f=1.367176195613119,m=.26175627691546965,d=.021742722739397567,y=1+e*(t+e*(r+e*(n+e*(i+e*(s+e*(o+e*a)))))),g=1+e*(u+e*(l+e*(c+e*(p+e*(f+e*(m+e*d))))));return Math.E*Math.pow((1+e)/Math.E,1+e)/(e*Math.sqrt(1+e))*(y/g)}function MS(e){let t=e-1;return Math.pow(t,t)*Math.exp(Ly(t)-t)*Math.sqrt(2*Math.PI*t)}function tP(e){let t=e-1;return t*(Math.log(t)-1)+.5*Math.log(2*Math.PI*t)+Ly(t)}function vS(e){return e<0?NaN:e<15?Math.log(eP(e)):tP(e)}var rP=[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-236364091/2730,8553103/6,-23749461029/870];function nP(e,t){if(e!==Math.floor(e))return NaN;if(e<0)return NaN;if(e===0)return 1/lP(t);let r=aP(t);if(e===1)return-1/(r*r);let n=uP(t);if(e===2)return 2*n/(r*r*r);let i=[0,2],s=[];for(let a=3;a<=e;a++){s=[];for(let u=0;u<a;u++){let l=0,c=0;u>0&&(l=(a-u+1)*i[u-1]),u+2<a&&(c=(u+1)*i[u+1]),s.push(-(l+c))}i=s}let o=0;for(let a=e-1;a>=0;a--)o=s[a]+n*o;return o/Math.pow(r,e+1)}function iP(e,t){if(e<0)return NaN;if(e!==Math.floor(e))return NaN;let r=e%2===0?-1:1;if(t<0)return-r*iP(e,1-t)-Math.pow(Math.PI,e+1)*nP(e,Math.PI*t);let n=Xs(e),i=0,s=Math.pow(t,-(e+1));for(;t<10;)i+=s,t++,s=Math.pow(t,-(e+1));i+=e===0?-Math.log(t):s*t/e,i+=.5*s;let o=rP,a=e+1,u=2,l=s*t*a/u,c=1/(t*t);for(let p=1;p<=14;p++)l*=c,i+=l*o[p-1],a++,u++,l*=a/u,a++,u++,l*=a/u;return n*r*i}function ES(e){let t=Math.log(e);return Math.exp(Math.round(t))===e?Math.round(t):t}function sP(e,t){if(t===0)return NaN;let r;return t===Math.E?r=Math.log(e):t===2&&Math.log2?r=Math.log2(e):t===10&&Math.log10?r=Math.log10(e):r=Math.log(e)/Math.log(t),Math.pow(t,Math.round(r))===e?Math.round(r):r}function SS(e){return sP(e,10)}function OS(e,t){return Zx(e,1/t)}var oP=1/Math.PI;function qc(e){return e>1e12?!1:Math.round(oP*e)*Math.PI===e}function kc(e){if(e>1e12)return!1;let t=Math.round(2*oP*e);return t%2===1&&t*Math.PI===2*e}function aP(e){return qc(Math.abs(e))?0:Math.sin(e)}function uP(e){return kc(Math.abs(e))?0:Math.cos(e)}function lP(e){let t=Math.abs(e);return qc(t)?0:kc(t)?1/0:Math.tan(e)}function NS(e){return kc(Math.abs(e))?1/0:1/Math.cos(e)}function DS(e){return qc(Math.abs(e))?1/0:1/Math.sin(e)}function RS(e){let t=Math.abs(e);return qc(t)?1/0:kc(t)?0:1/Math.tan(e)}function wS(e){return Math.PI/2-Math.atan(e)}function LS(e){return Math.asin(1/e)}function AS(e){return Math.acos(1/e)}function CS(e){return 1/Os(e)}function _S(e){return 1/go(e)}function FS(e){return 1/Bu(e)}function BS(e){return Vu(1/e)}function VS(e){return Gu(1/e)}function GS(e){return qu(1/e)}function cP(e){if(e===0||isNaN(e))return e;if(!isFinite(e))return NaN;if(e===Math.floor(e))return e>0?0:-0;let t=Math.round(2*e),r=-.5*t+e,n=t&2?-1:1,i=t&1?Math.cos(Math.PI*r):Math.sin(Math.PI*r);return n*i}function wn(e){return e===1/0||e===-1/0?0:e===0?1:cP(e)/(Math.PI*e)}function gi(e){let t=0;for(let r=0;r<e.length;r++)t+=e[r];return t/e.length}function qS(e){let t=0;for(let r=0;r<e.length;r++)t+=e[r];return t}function Oy(e){return e>50?Math.exp(.5*((1-e)*ii(-1/(e-1))-1)+en(.5*(e-1))-en(.5*(e-2)))*Math.sqrt((1-1/e)/(2*Math.PI)):Ua((e+1)/2)/(Ua(e/2)*Math.sqrt(e*Math.PI))}function Lo(e,t,r=e-t){if(Math.abs(r)<.1*(e+t)){let n=r/(e+t),i=r*r/(e+t),s=2*e*n;for(let o=1;o<10;o++){s*=n*n;let a=i+s/(2*o+1);if(a==i)return a;i=a}}return e*Math.log(e/t)+t-e}var kS=[0,.08106146679532726,.0413406959554093,.02767792568499834,.020790672103765093,.016644691189821193,.013876128823070748,.01189670994589177,.010411265261972096,.009255462182712733,.00833056343336287,.007573675487951841,.00694284010720953,.006408994188004207,.0059513701127588475,.005554733551962801];function en(e){return e>15?Ly(e):e<0?NaN:e===Math.floor(e)?kS[e]:Math.log(Xs(e)/(Math.pow(e,e)*Math.exp(-e)*Math.sqrt(2*Math.PI*e)))}function Ly(e){let t=.08333333333333333,r=.002777777777777778,n=.0007936507936507937,i=.0005952380952380953,s=.0008417508417508417,o=e*e;return(t-(r-(n-(i-s/o)/o)/o)/o)/e}function zc(e,t){return t<=0?NaN:Oy(t)*Math.pow(1+e*e/t,-((t+1)/2))}function Ys(e,t){if(t>0)return 1-Ys(e,-t);if(t===-1/0)return 0;if(t===0)return .5;if(e>=40&&t>-1)return .5+Oy(e)*zS(e,t);if(t/e<-1e3){let n=t*t;return Oy(e)*Math.pow(e,.5*(e-1))*Math.pow(Math.abs(t),-e)*(1-e*e*(e+1)*(1/(2+e)+e*(e+3)/(4*(4+e)*n))/(2*n))}let r=Math.sqrt(t*t+e);return US((t+r)/(2*r),e/2,e/2)}function zS(e,t){let r=t*t/e,n=t,i=n;for(let s=1;s<=15;s++)n*=-(2*s-1)/(2*s+1)*(.5*(e+1)+s-1)/s*r,i+=n;return i}function Ac(e,t,r){return r<=0?NaN:e===-1/0?Ys(r,t):e>0&&t>0?Ys(r,-e)-Ys(r,-t):Ys(r,t)-Ys(r,e)}function US(e,t,r){if(e<0||e>1)throw new RangeError(\"First argument must be between 0 and 1.\");if(t===1&&r===1)return e;if(e===0)return 0;if(e===1)return 1;if(t===0)return 1;if(r===0)return 0;{let n=en(t+r)-en(t)-en(r)-Lo(t,(t+r)*e)-Lo(r,(t+r)*(1-e),(t+r)*e-t),i=Math.exp(n)*Math.sqrt(t*r/(2*Math.PI*(t+r)));return e<(t+1)/(t+r+2)?i*Wx(e,t,r)/t:1-i*Wx(1-e,r,t)/r}}function Wx(e,t,r){let n=Math.pow(2,-52),i=1e-300,s=t+r,o=t+1,a=t-1,u=1,l=1-s*e/o;Math.abs(l)<i&&(l=i),l=1/l;let c=l;for(let p=1;p<=100;p++){let f=2*p,m=p*(r-p)*e/((a+f)*(t+f));l=1+m*l,Math.abs(l)<i&&(l=i),u=1+m/u,Math.abs(u)<i&&(u=i),l=1/l,c*=l*u,m=-(t+p)*(s+p)*e/((t+f)*(o+f)),l=1+m*l,Math.abs(l)<i&&(l=i),u=1+m/u,Math.abs(u)<i&&(u=i),l=1/l;let d=l*u;if(c*=d,Math.abs(d-1)<=n)return c}return c}function HS(e,t){let r=Math.pow(2,-52),n=1e-300,i=1,s=e,o=i/s,a=i/n,u=1/s,l=2,c=0,p=s,f=-(e-1),m=0;do f-=1,p+=1,u=u*f*t+p,u===0&&(u=n),a=p+f*t/a,a===0&&(a=n),u=1/u,c=a*u,o=o*c,m+=1,p+=1,u=u*m*t+p,u===0&&(u=n),a=p+m*t/a,a===0&&(a=n),u=1/u,c=a*u,o*=c,l+=2;while(l<100&&Math.abs(c-1)>r);return o}function $S(e,t){let r=Math.pow(2,-52),n=1e-300,i=1,s=t+1-e,o=i/s,a=i/n,u=1/s,l=2,c=0,p=s;do{let f=-(l-1)*(l-e-1);p+=2,u=u*f+p,u===0&&(u=n),a=p+f/a,a===0&&(a=n),u=1/u,c=a*u,o*=c,l+=1}while(l<100&&Math.abs(c-1)>r);return o}function WS(e,t){let r=t/e,n=la(t-e)*Math.sqrt(2*Lo(1,r)),i=[1,-.3333333333333333,.08333333333333333,-.014814814814814815,.0011574074074074073,.0003527336860670194,-.0001787551440329218,3919263178522438e-20,-2185448510679992e-21,-185406221071516e-20,8296711340953087e-22,-17665952736826078e-23,6707853543401498e-24,10261809784240309e-24,-4382036018453353e-24,914769958223679e-24,-25514193994946248e-27,-5830772132550426e-26,24361948020667415e-27,-50276692801141755e-28,11004392031956135e-29,3371763262400985e-28,-1392388722418162e-28,28534893807047445e-30,-5139111834242572e-31,-19752288294349442e-31,8099521156704561e-31],s=i.length-2,o=0,a=0,u=0,l=0;for(;s>=0;s--)u=(s+2)*o/e+i[s+1],l=n*l+u,o=a,a=u;if(l=e/(e+o)*l,t<e){let c=Math.exp(-.5*e*n*n)*(.5*Fi(-n*Math.sqrt(e/2))-l/Math.sqrt(2*Math.PI*e));return isFinite(c)?1-c:1}else{let c=Math.exp(-.5*e*n*n)*(.5*Fi(n*Math.sqrt(e/2))+l/Math.sqrt(2*Math.PI*e));return isFinite(c)?c:0}}function Yx(e,t,r){return(e-t)/(Math.SQRT2*Math.abs(r))}function ka(e){return e<0?.5*Math.exp(-e*e)*Fi(-e):1-.5*Math.exp(-e*e)*Fi(e)}function YS(e,t,r,n){let i=Yx(t,r,n);if(e===-1/0)return ka(i);let s=Yx(e,r,n);return e>0&&t>0?ka(-s)-ka(-i):ka(i)-ka(s)}function Ay(e,t,r){return 1/Math.sqrt(2*Math.PI*r*r)*Math.exp(-(e-t)*(e-t)/(2*r*r))}function Cy(e){let t=jx.spy(e),r=parseInt(t.slice(0,8),16)&2097151,n=parseInt(t.slice(8,16),16);return(r*4294967296+n)/9007199254740992}function pP(e,t){for(let r=t.length-1;r>0;r--){let n=e+\"::sc\"+r,i=Math.floor(Cy(n)*(r+1)),s=t[r];t[r]=t[i],t[i]=s}}function XS(e,t){let r=t.slice();return pP(e,r),r}function _y(e,t){let r=[];for(let n=0;n<t;n++)r.push(n);return pP(e,r),r}function Ki(e,t,r){return Cy(e)*(r-t)+t}function JS(e,t,r){let n=0,i,s,o,a;do i=e+\"::sc\"+n,n+=1,s=Ki(i,0,1)*2-1,i=e+\"::sc\"+n,n+=1,o=Ki(i,0,1)*2-1,a=s*s+o*o;while(a>=1||a===0);let u=Math.sqrt(-2*Math.log(a)/a);return t+r*s*u}function jS(e,t){if(t<=0)return NaN;let r=0,n,i,s,o;do n=e+\"::sc\"+r,r+=1,i=Ki(n,0,1)*2-1,n=e+\"::sc\"+r,r+=1,s=Ki(n,0,1)*2-1,o=i*i+s*s;while(o>1);let a=i*i/o,u=t*(Math.pow(o,-2/t)-1);return n=e+\"::sc\"+r,r+=1,(Ki(n,0,1)<.5?-1:1)*Math.sqrt(a*u)}function ZS(e,t,r){return t=kr(Math.round(t),0,1/0),t===1/0?NaN:(r=kr(r,0,1),dP(Ki(e,0,1),t,r))}function QS(e,t){return t<0?NaN:fP(Ki(e,0,1),t)}function Cc(e,t,r){return e>=t?1:e<0?0:e<Math.floor((t+1)*r)?Xx(e,t,r):1-Xx(t-e-1,t,1-r)}function Xx(e,t,r){let n=(1-r)/r,i=Uc(e,t,r),s=i;for(;e>0&&(i*=e/(t-e+1)*n,s+i!==s);e--)s+=i;return s}function KS(e,t,r,n){return r=kr(Math.round(r),0,1/0),r===1/0?NaN:(n=kr(n,0,1),t<0?0:(e=Math.ceil(e),t=Math.floor(t),e===-1/0?Cc(t,r,n):Cc(t,r,n)-Cc(e-1,r,n)))}function Uc(e,t,r){if(e=Math.round(e),t=kr(Math.round(t),0,1/0),t===1/0)return NaN;if(r=kr(r,0,1),e<0||e>t)return 0;if(r===0)return e===0?1:0;if(r===1)return e===t?1:0;if(e===0)return Math.exp(t*ii(-r));if(e===t)return Math.pow(r,t);let n=en(t)-en(e)-en(t-e)-Lo(e,t*r)-Lo(t-e,t*(1-r),t*r-e);return Math.exp(n)*Math.sqrt(t/(2*Math.PI*e*(t-e)))}function Ao(e,t){return t<0?NaN:(e=Math.round(e),e<0?0:t===0?e===0?1:0:e===0?Math.exp(-t):Math.exp(-en(e)-Lo(e,t))/Math.sqrt(2*Math.PI*e))}function za(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e===1/0)return 1;if(e=Math.floor(e),e<0)return 0;if(t===0)return 1;if(e+1>12&&2.35*(e+1)>t&&.3*(e+1)<t)return WS(e+1,t);if(e+1>=t){let r=HS(e+1,t);return isFinite(r)?1-t*Ao(e,t)*r:1}else{let r=$S(e+1,t);return isFinite(r)?t*Ao(e,t)*r:0}}function eO(e,t,r){return r<0?NaN:(e=Math.ceil(e),t=Math.floor(t),t<0?0:e===-1/0?za(t,r):za(t,r)-za(e-1,r))}function Fy(e,t,r){return r<=t?NaN:e<t||e>r?0:1/(r-t)}function Jx(e,t,r){return r<=t?NaN:e<t?0:e>r?1:(e-t)/(r-t)}function tO(e,t,r,n){return Jx(t,r,n)-Jx(e,r,n)}function rO(e){let t=-e*e;return t<-750?e>=0?1:-1:e>=.065?1-Math.exp(t)*Fi(e):e<=-.065?Math.exp(t)*Fi(-e)-1:e*(1.1283791670955126+t*(.37612638903183754+t*(.11283791670955126+t*(.026866170645131252+t*.005223977625442188))))}function Fi(e){let t=.9999999999999999,r=2.224574423459406,n=2.444115549920689,i=1.7057986861852539,s=.8257463703357973,o=.28647031042892007,a=.07124513844341643,u=.012296749268608364,l=.001347817214557592,c=7263959403471071e-20,p=1,f=3.352953590554884,m=5.227518529742423,d=5.003720878235473,y=3.266590890998987,g=1.5255421920765353,h=.5185887413188858,x=.12747319185915415,P=.02185979575963238,D=.0023889438122503674,M=.00012875032817508128;if(e<0)return e<-6.1?2*Math.exp(e*e):2*Math.exp(e*e)-Fi(-e);if(e>50){let E=.5641895835477563,S=e*e;return e>5e7?E/e:E*(S*(S+4.5)+2)/(e*(S*(S+5)+3.75))}else{let E=t+e*(r+e*(n+e*(i+e*(s+e*(o+e*(a+e*(u+e*(l+e*c)))))))),S=p+e*(f+e*(m+e*(d+e*(y+e*(g+e*(h+e*(x+e*(P+e*(D+e*M)))))))));return E/S}}function By(e){let t=-39.6968302866538,r=220.946098424521,n=-275.928510446969,i=138.357751867269,s=-30.6647980661472,o=2.50662827745924,a=-54.4760987982241,u=161.585836858041,l=-155.698979859887,c=66.8013118877197,p=-13.2806815528857,f=-.00778489400243029,m=-.322396458041136,d=-2.40075827716184,y=-2.54973253934373,g=4.37466414146497,h=2.93816398269878,x=.00778469570904146,P=.32246712907004,D=2.445134137143,M=3.75440866190742,E=.02425,S,v,N;return e>.5?-By(1-e):e===.5?0:e<0?NaN:e===0?-1/0:(e<E?(S=Math.sqrt(-2*Math.log(e)),N=(((((f*S+m)*S+d)*S+y)*S+g)*S+h)/((((x*S+P)*S+D)*S+M)*S+1)):(S=e-.5,v=S*S,N=(((((t*v+r)*v+n)*v+i)*v+s)*v+o)*S/(((((a*v+u)*v+l)*v+c)*v+p)*v+1)),N-Math.sqrt(2*Math.PI)*(.5*Fi(-N/Math.SQRT2)-Math.exp(.5*N*N)*e))}function fP(e,t){if(t<0||e<0||e>1)return NaN;if(t===0||e===0)return 0;if(e===1)return 1/0;let r=-1,n=Math.ceil(t);for(;za(n,t)<e;)n=2*n;let i=Math.floor(r+(n-r)/2);for(;r<i&&i<n;)za(i,t)<e?r=i:n=i,i=Math.floor(r+(n-r)/2);return n}function dP(e,t,r){if(t!==Math.round(t))return NaN;if(r<0||r>1)return NaN;if(e<0||e>1)return NaN;if(e===0)return 0;if(e===1)return t;if(t===0)return 0;if(r===1)return t;if(r===0)return 0;let n=-1,i=t,s=Math.floor(n+(i-n)/2);for(;n<s&&s<i;)Cc(s,t,r)<e?n=s:i=s,s=Math.floor(n+(i-n)/2);return i}function mP(e,t){if(isNaN(t)||t<=0||e<0||e>1)return NaN;if(e===0)return-1/0;if(e===1)return 1/0;if(t===1||t===2||t===4)return Sy(t,e);let r,n;if(e===.5)return 0;if(e>.5)r=t>1?By(e):Sy(1,e),n=t>1?Sy(1,e):Math.pow(zc(0,t)*Math.pow(t,(t-1)/2)/(1-e),1/t);else return-mP(1-e,t);return nO(t,e,r,n)}function Sy(e,t){let r=4*t*(1-t);switch(e){case 1:return Math.tan(Math.PI*(t-.5));case 2:return 2*(t-.5)*Math.sqrt(2/r);case 4:let n=Math.cos(Math.acos(Math.sqrt(r))/3)/Math.sqrt(r);return la(t-.5)*2*Math.sqrt(n-1);default:throw new Error(\"_invTSimple() must be called with 1, 2, or 4 df.\")}}function nO(e,t,r,n){if(!isFinite(r)||!isFinite(n))return NaN;let i=r,s=n;for(;;){let o=gn(i,s),a=Ys(e,o);if(o===i||o===s)return a>t?i:s;a<t?i=o:s=o}}function iO(e,t,r){return e<0||e>1||r<=t?NaN:e===0?t:e===1?r:t+e*(r-t)}function yP(e,t){let r=Fc(e);return(gi(e)-t)*Math.sqrt(e.length)/r}function gP(e,t){let r=e.length,n=gi(e),i=Fc(e),s=t.length,o=gi(t),a=Fc(t),u=Math.sqrt(((r-1)*i*i+(s-1)*a*a)/(r+s-2));return(n-o)/(u*Math.sqrt(1/r+1/s))}function wo(e,t,r){return r<0?Ac(-1/0,e,t):r>0?Ac(-1/0,-e,t):2*Ac(-1/0,-Math.abs(e),t)}function Vy(e,t){arguments.length===1&&(t=0);let r=yP(e,t),n=e.length-1;return{lessThan:wo(r,n,-1),greaterThan:wo(r,n,1),notEqual:wo(r,n,0)}}function Gy(e,t){let r=gP(e,t),n=e.length+t.length-2;return{lessThan:wo(r,n,-1),greaterThan:wo(r,n,1),notEqual:wo(r,n,0)}}function qy(e){return{min:hP(e),q1:Js(e,1),median:PP(e),q3:Js(e,3),max:bP(e)}}function sO(e){return e.length}function hP(e){if(e.length<1)return NaN;let t=e[0];if(isNaN(t))return NaN;for(let r=1;r<e.length;r++){if(isNaN(e[r]))return NaN;e[r]<t&&(t=e[r])}return t}function bP(e){if(e.length<1)return NaN;let t=e[0];if(isNaN(t))return NaN;for(let r=1;r<e.length;r++){if(isNaN(e[r]))return NaN;e[r]>=t&&(t=e[r])}return t}function xP(e,t){if(!isFinite(t)||t<0||t>1)return NaN;if(e.some(isNaN))return NaN;if(e.length===0)return NaN;let r=e.length,n=js(e),i=t*(r-1);return Math.floor(i)===i?e[n[i]]:(Math.ceil(i)-i)*e[n[Math.floor(i)]]+(i-Math.floor(i))*e[n[Math.ceil(i)]]}function Js(e,t){if(!isFinite(t)||t<0||t>4)return NaN;if(e.some(isNaN))return NaN;let r=js(e),n=Hc(e,t),i=Math.floor(n),s=Math.ceil(n);return(e[r[i]]+e[r[s]])/2}function js(e){let t=e.length,r=[];for(let n=0;n<t;n++)r.push(n);return r.sort(function(n,i){return F(Hn(e[n],e[i]))}),r}function Hc(e,t){t=Math.round(t);let r=e.length,n=r%2===1,i;return r===1?0:(t===0&&(i=0),t===2&&(i=(r-1)/2),t===4&&(i=r-1),t===1&&(i=n?(r+1)/4-1:(r+2)/4-1),t===3&&(i=n?(3*r+3)/4-1:(3*r+2)/4-1),i===void 0?NaN:i)}function oO(e,t){return js(e)[Math.ceil(t*(e.length-1))]+1}function aO(e,t){return js(e)[Math.floor(t*(e.length-1))]+1}function uO(e,t){return js(e)[Math.ceil(Hc(e,t))]+1}function lO(e,t){return js(e)[Math.floor(Hc(e,t))]+1}function PP(e){return xP(e,.5)}function cO(e){if(e.length<1)return 0;let t=e[0];if(isNaN(t))return 0;let r=0;for(let n=1;n<e.length;n++){if(isNaN(e[n]))return 0;e[n]<t&&(r=n,t=e[n])}return r+1}function pO(e){if(e.length<1)return 0;let t=e[0];if(isNaN(t))return 0;let r=0;for(let n=1;n<e.length;n++)if(e[n]>=t){if(isNaN(e[n]))return 0;r=n,t=e[n]}return r+1}function $a(e){let t=gi(e),r=0;for(let n=0;n<e.length;n++){let i=e[n]-t;r+=i*i}return r/e.length}function fO(e){let t=gi(e),r=0;for(let n=0;n<e.length;n++)r+=Math.abs(e[n]-t);return r/e.length}function TP(e){let t=e.length;return $a(e)*t/(t-1)}function IP(e,t){let r=Math.min(e.length,t.length);e.length!==r&&(e=e.slice(0,r)),t.length!==r&&(t=t.slice(0,r));let n=gi(e),i=gi(t),s=0;for(let o=0;o<r;o++)s+=(e[o]-n)*(t[o]-i);return s/r}function dO(e,t){let r=Math.min(e.length,t.length);return IP(e,t)*r/(r-1)}function $c(e,t){let r=Math.min(e.length,t.length);e.length!==r&&(e=e.slice(0,r)),t.length!==r&&(t=t.slice(0,r));let n=gi(e),i=gi(t),s=0,o=0,a=0;for(let u=0;u<r;u++){let l=e[u]-n,c=t[u]-i;s+=l*l,o+=c*c,a+=l*c}return a/Math.sqrt(s*o)}function ky(e,t,r,n){let i=e[0];for(let o=2;o<e.length;o++){let a=F($n(Hn(e[o],i),r));if(!Nr(a,o,10))return 0}let s=F(n);for(let o=0;o<t.length-1;o++){let a=F($n(Hn(t[o],i),r));if(!Nr(a,s-t.length+o,10))return 0}return!isFinite(s)||s<e.length||s<t.length?0:s}function zy(e){return e<0||!isFinite(e)?0:e}function Ny(e){let t=e.length;if(t===0)return[];let r=[],n=[];for(let a=0;a<t;a++)n.push([e[a],a]);n.sort(function(a,u){let l=a[0],c=u[0];return l===1/0&&c===1/0||l===-1/0&&c===-1/0?0:l-c});let i=0,s=1,o=1;for(;i<t;){let a=i;for(;a<t-1&&n[a][0]===n[a+1][0];)a+=1;o=a-i+1;let u;for(a=0;a<o;a++)u=n[i+a][1],r[u]=isNaN(e[u])?NaN:s+.5*(o-1);s+=o,i+=o}return r}function mO(e,t){let r=Math.min(e.length,t.length);return e.length!==r&&(e=e.slice(0,r)),t.length!==r&&(t=t.slice(0,r)),$c(Ny(e),Ny(t))}function Fc(e){return Math.sqrt(TP(e))}function yO(e){return Math.sqrt($a(e))}var gO=Va;function Wa(e,t){return si(t[0]-e[0],t[1]-e[1])}function MP(e,t,r){return[kr(Math.round(e),0,255),kr(Math.round(t),0,255),kr(Math.round(r),0,255)]}function hO(e,t,r){e=kr(e,0,360),t=kr(t,0,1),r=kr(r,0,1);let n=r*(1-t/2);n===0||n===1?t=0:t=(r-n)/Math.min(n,1-n);let{r:i,g:s,b:o}=Nc(e,t,n).rgb();return MP(i,s,o)}function bO(e){return e}function xO(e){return e}function PO(e){let t=[];if(e.length===0)return[];for(let r=0;r<e.length-1;r++)t.push([e[r],e[r+1]]);return t.push([e[e.length-1],e[0]]),t}function Uy(e){if(e.length==0)return 0;let t=[...e,e[0]];return Hx(t)}function TO(e){let t=0;for(let r=0;r<e.length-1;r++){let[n,i]=e[r],[s,o]=e[r+1];t+=Sn(s-n,o-i)}if(e.length>1){let[r,n]=e[e.length-1],[i,s]=e[0];t+=Sn(i-r,s-n)}return t}function IO(e){let t=!1;for(let r=0;r<e.length;r++){let n=(r+1)%e.length;e[r][0]===e[n][0]&&e[r][1]===e[n][1]&&(t=!0)}return t?e.filter((r,n)=>{let i=e[n===0?e.length-1:n-1];return r[0]!==i[0]||r[1]!==i[1]}):e}function MO(e){let[t,r,n,i]=e;return[t,n>=0?r:r+n,n>=0?n:-n,i]}function vP(e,t,r){if(e.length===0)return[];e=IO(e);let n=$x([...e,e[0]]),i=[];for(let s=0;s<e.length;s++){let o=e[s>0?s-1:e.length-1],a=e[s],u=e[s<e.length-1?s+1:0],l=n[s]===1,c=VO(o,a,u,l?\"counterclockwise\":\"clockwise\",r);i.push(t?c:MO(c))}return i}function vO(e,t){return vP(e,!1,t)}function EO(e,t){return vP(e,!0,t)}function Hy(e,t){return[e,t]}var SO=Hy,OO=Hy;function NO(e){return e}function DO(e,t){return[e,t]}function RO(e){return e[0]}function wO(e){return e[1]}function LO(e,t,r){return[e,t,r]}function Fo([e,t,r]){let[n,i]=e,[s,o]=t,[a,u]=r,l=s*s+o*o,c=(n*n+i*i-l)/2,p=(l-a*a-u*u)/2,f=(n-s)*(o-u)-(s-a)*(i-o);f=1/f;let m=(c*(o-u)-p*(i-o))*f,d=((n-s)*p-(s-a)*c)*f;return[m,d]}function Bo(e){let[[t,r],[n,i],[s,o]]=e,a=n-t,u=i-r,l=s-n,c=o-i;return 2*Math.atan2(a*c-l*u,a*l+u*c)}function $y(e){let t=Math.abs(Bo(e));return t<1e-9||t>2*Math.PI-1e-9}function EP(e){return Math.abs(e)===Math.PI?Math.PI:Qx(e+Math.PI,2*Math.PI)-Math.PI}function SP(e,t,r,n){return[e,EP(t),r,n]}function AO([e,t,r,n]){return[e,t,r,n]}function CO(e){return e[2]/e[3]}function _O(e){return Math.abs(e[2]/e[3])}function OP(e){let[t,r,n,i]=e,s=Math.PI*2,o=n===0?s:n>0?n-s:n+s;return[t,r,o,i]}function FO(e){let[t,r,n,i]=OP(e);return[t,r,n,i]}function BO(e){let[t,r,n,i]=e,s=n>=0?Math.PI-n:-Math.PI-n;return[t,EP(r+n),s,i]}function VO(e,t,r,n,i){let s=e[0]-t[0],o=e[1]-t[1],a=r[0]-t[0],u=r[1]-t[1],l=Math.atan2(o,s),c=Math.atan2(s*u-o*a,s*a+o*u),p=2*Math.PI;return n===\"clockwise\"?c-=c<0?0:p:n===\"counterclockwise\"&&(c+=c<0?p:0),SP(t,l,c,i)}function Wy(e,t){let[[r,n],[i,s]]=e;return[[t*r,t*n],[t*i,t*s]]}var GO=Wy,qO=Wy;function kO(e,t){let[[r,n],i]=e;return[[t*r,t*n],t*i]}function zO(e,t){let[[r,n],[i,s],[o,a]]=e;return[[t*r,t*n],[t*i,t*s],[t*o,t*a]]}function Yy(e,t){let[[r,n],[i,s]]=e,[[o,a],[u,l]]=t;return[[r+o,n+a],[i+u,s+l]]}var UO=Yy,HO=Yy;function $O(e,t){let[[r,n],i]=e,[[s,o],a]=t;return[[r+s,n+o],i+a]}function WO(e,t){let[[r,n],[i,s],[o,a]]=e,[[u,l],[c,p],[f,m]]=t;return[[r+u,n+l],[i+c,s+p],[o+f,a+m]]}function Xy(e,t){let[[r,n],[i,s]]=e;return[(1-t)*r+t*i,(1-t)*n+t*s]}function Jy(e,t){return Xy(e,kr(t,0,1))}function Dy(e,t){return Xy(e,kr(t,0,1/0))}function YO(e,t){let[[r,n],i]=e,s=Math.min(1,Math.max(0,t));return[r+i*Math.cos(2*Math.PI*s),n+i*Math.sin(2*Math.PI*s)]}function NP(e,t){let r=Wc(e);if(!r)return[NaN,NaN];if(r.type===\"segment\")return Jy([e[0],e[2]],t);if(r.type===\"rays\")return t<=0?Dy([r.start1,r.end1],-t):t>=1?Dy([r.start2,r.end2],t-1):[NaN,NaN];t=Math.min(1,Math.max(0,t));let n=Fo(e),i=Bo(e),s=Math.atan2(e[0][1]-n[1],e[0][0]-n[0]),o=Wa(n,e[0]),a=s+t*i;return[n[0]+o*Math.cos(a),n[1]+o*Math.sin(a)]}function XO(e,t){if(isNaN(t))return[NaN,NaN];if(t<0||t>=e.length)return e[0];let r=Math.floor(t);return Jy([e[r],e[(r+1)%e.length]],t-r)}function Wc(e){let[t,r,n]=e,[[i,s],[o,a],[u,l]]=[t,r,n];if(isNaN(i)||isNaN(s)||isNaN(o)||isNaN(a)||isNaN(u)||isNaN(l))return;let c=Fo([t,r,n]),p=Wa(c,t);if(isFinite(p)&&!$y([t,r,n])){let f=Math.atan2(t[1]-c[1],t[0]-c[0]),m=f+Bo([t,r,n]);return{type:\"arc\",center:c,radius:p,startAngle:f,endAngle:m}}else{let f=Un(o,a,0,i,s,0,u,l,0);return f<0||f>1?{type:\"rays\",start1:[i,s],end1:[i+(i-u),s+(s-l)],start2:[u,l],end2:[u+(u-i),l+(l-s)]}:{type:\"segment\",start:[i,s],end:[u,l]}}}function JO(e,t,r){let[i,s]=[t,r].map(u=>Wa(e,u));if(isNaN(i))return s>1e-9?r:t;if(isNaN(s))return i>1e-9?t:r;let[o,a]=i>s?[i,t]:[s,r];return o>1e-9?a:e}function Ha(e,t){let[[r,n],i]=e,[[s,o],a]=t,u=si(s-r,o-n),l=i+a,c=i-a,p=u*u,f=Math.sqrt((u+l)*(-u+l)*(u-c)*(u+c))/4,m=i*i,d=a*a;return[(s+r)/2+(s-r)*(m-d)/(2*p)+-2*(o-n)*f/p,(o+n)/2+(o-n)*(m-d)/(2*p)+2*(s-r)*f/p]}function DP(e,t,r){let[[n,i],s]=e,[[o,a],[u,l]]=t,c=o-n,p=u-n,f=a-i,m=l-i,d=p-c,y=m-f,g=d*d+y*y,h=c*m-p*f,x=s*s*g-h*h;if(x<0)return[NaN,NaN];let P=Math.sqrt(x);return P<0?[NaN,NaN]:[n+(h*y+r*d*P)/g,i+(-h*d+r*y*P)/g]}function jO(e,t){let[[r,n],[i,s]]=e,[[o,a],[u,l]]=t,c=s-n,p=r-i,f=l-a,m=o-u,d=c*r+p*n,y=f*o+m*a,g=c*m-f*p;return g===0?[NaN,NaN]:[(m*d-p*y)/g,(c*y-f*d)/g]}function jy(e,t,r=0){let n=DP(t,e,-1);return _o(n,e,r,!0)?n:[NaN,NaN]}function RP(e,t,r=0){let n=DP(e,t,1);return _o(n,t,r,!1)?n:[NaN,NaN]}function wP(e,t,r=0){let n=jO(e,t);return!_o(n,e,r,!0)||!_o(n,t,r,!1)?[NaN,NaN]:n}function ZO(e,t,r=0){let n=CP(t,e,r,-1);return Co(n,t,r,!1)?n:[NaN,NaN]}function LP(e,t,r=0){let n=_P(t,e,r,-1);return!_o(n,e,r,!0)||!Co(n,t,r,!1)?[NaN,NaN]:n}function QO(e,t,r=0){let n=CP(e,t,r,1);return Co(n,e,r,!0)?n:[NaN,NaN]}function AP(e,t,r=0){let n=_P(e,t,r,1);return!Co(n,e,r,!0)||!_o(n,t,r,!1)?[NaN,NaN]:n}function KO(e,t,r=0){let n=eN(e,t,r);return!Co(n,e,r,!0)||!Co(n,t,r,!1)?[NaN,NaN]:n}function eN(e,t,r){let n=Vc(e);if(Gc(n))return LP(n,t,r);let i=Vc(t);return Gc(i)?AP(e,i,r):Zy(()=>Ha(n,i),()=>Ha(i,n),s=>Qy(-1,Bc(e,s),Bc(t,s)))}function CP(e,t,r,n){let i=Vc(e);return Gc(i)?jy(i,t,r):Zy(()=>Ha(i,t),()=>Ha(t,i),s=>Qy(n,Bc(e,s),tN(t,s)))}function _P(e,t,r,n){let i=Vc(e);return Gc(i)?wP(i,t,r):Zy(()=>RP(i,t,r),()=>jy(t,i,r),s=>Qy(n,Bc(e,s),rN(t)))}function Zy(e,t,r){let n=e();if(r(n))return n;let i=t();return r(i)?i:[NaN,NaN]}function Qy(e,t,r){return e*FP(t,r)>0}function Bc(e,[t,r]){let[n,i]=Fo(e);return Bo(e)>0?[i-r,t-n]:[r-i,n-t]}function tN([[e,t]],[r,n]){return[t-n,r-e]}function rN([[e,t],[r,n]]){return[r-e,n-t]}function Vc(e){let t=Fo(e),r=Wa(t,NP(e,0));return isFinite(r)&&!$y(e)?[t,r]:[e[0],e[2]]}function Gc(e){return Array.isArray(e[1])}function Co([e,t],r,n,i){let[s,o]=Fo(r);return(i?(n&3)===0:(n&12)===0)||zu(Math.atan2(t-o,e-s),Math.atan2(r[0][1]-o,r[0][0]-s),Bo(r))}function _o([e,t],[[r,n],[i,s]],o,a){let u=Un(e,t,0,r,n,0,i,s,0),[l,c]=a?[(o&1)===0,(o&2)===0]:[(o&4)===0,(o&8)===0];return!isNaN(u)&&(u>=0||l)&&(u<=1||c)}function nN(e,t){let[[r,n],[i,s]]=e,[o,a]=t;return[[o,a],[o+(i-r),a+(s-n)]]}function iN(e,t){let[[r,n],[i,s]]=e,[o,a]=t;return[[o,a],[o+(s-n),a-(i-r)]]}function FP(e,t){let[r,n]=e,[i,s]=t;return r*s-i*n}function sN(e,t){let[r,n]=e,[i,s]=t;return r*i+n*s}function oN(e){let[t,r]=e;return[-r,t]}function aN(e,t,r){return[e,t,r]}function uN(e){return[[1,0],e,!1]}function lN(e,t){let[r,n]=e;return[[t,0],[(1-t)*r,(1-t)*n],!1]}function cN(e,t){let[r,n]=e,i=Math.cos(t),s=Math.sin(t);return[[i,s],[r*(1-i)+n*s,n*(1-i)-r*s],!1]}function pN(e){let[[t,r],[n,i]]=e,s=n-t,o=i-r,a=s*s+o*o;return[[(s*s-o*o)/a,2*s*o/a],[(1-(s*s-o*o)/a)*t-2*s*o/a*r,(1+(s*s-o*o)/a)*r-2*s*o/a*t],!0]}function fN(e,t){let[[r,n],[i,s],o]=e,[[a,u],[l,c],p]=t;return o&&(u=-u,c=-c,p=!p),[[a*r-u*n,a*n+u*r],[i+r*l-n*c,s+r*c+n*l],p]}function dN(e){let[[t,r],[n,i],s]=e,o=t*t+r*r,a=t/o,u=-r/o,l=-(t/o*n+r/o*i),c=-(t/o*i-r/o*n);return s&&(u=-u,c=-c),[[a,u],[l,c],s]}function yi(e,t){let[[r,n],[i,s],o]=e,[a,u]=t;return o&&(u=-u),[r*a-n*u+i,r*u+n*a+s]}function mN(e,t){let[r,n,i]=e;return yi([r,[0,0],i],t)}function yN(e,t){let[r,n,i]=e;return i?-t:t}function Ky(e,t){let[r,n]=t;return[yi(e,r),yi(e,n)]}var gN=Ky,hN=Ky;function bN(e,t){let[r,n]=t,[[i,s]]=e;return[yi(e,r),si(i,s)*n]}function xN(e,t){let[r,n,i]=t;return[yi(e,r),yi(e,n),yi(e,i)]}function PN(e,t){let r=[];for(let n of t)r.push(yi(e,n));return r}function TN(e,t){let[r,n,i]=t,s=yi(e,r),[o,a]=mN(e,[Math.cos(n),Math.sin(n)]),u=Math.atan2(a,o),l=yN(e,i);return[s,u,l]}function IN(e,t){let r=[];for(let n=0;n<e.length;n++)t[n]&&r.push(e[n]);return r}function MN(e,t){let r=[];for(let n of t)r.push(e[n]);return r}function vN(e){let t=[],r={};for(let n=0;n<e.length;n++){let i=e[n],s=Ry(i);r.hasOwnProperty(s)||(r[s]=!0,t.push(n))}return t}function Ry(e){if(Array.isArray(e))return`[${e.map(Ry).join(\",\")}]`;switch(typeof e){case\"string\":return e;case\"boolean\":case\"number\":return e.toString();case\"object\":if(EN(e)){let r=[];for(let n in e.updateRules)r.push(`\"${n}\": ${Ry(e.updateRules[n].value)}`);return`{${r.join(\",\")}}`}else return F(e).toString();default:return e}}function EN(e){return typeof e!=\"object\"||!e?!1:e.type===\"Action\"}function Rr(e){if(!jn(e))throw new Error(\"Programming error: expected an array but found \"+typeof e)}function jn(e){return Array.isArray(e)}function BP(e){if(jn(e))for(let{compiled:t}of e)t&&eg(t)}function KV(e){if(jn(e))for(let{compiled:t}of e)t&&SN(t)}function eg(e){delete e.fn}function SN(e){e.fn=tg(e.args,e.source,e.constants)}function tg(e,t,r){let i=\"return (function(\"+e.join(\",\")+'){\"use strict\"; '+t+\"})\";return new Function(\"BuiltIn\",\"ErrorMsg\",\"_C\",i)(Jn,Ft,r)}function ne(e){return e.type<=3}function VP(e){return!ne(e)}function _r(e){switch(e.type){case 19:case 21:case 17:return!0;default:return!1}}function mr(e){switch(e.type){case 18:case 20:case 22:return!0;default:return!1}}function qP(e){let t=\"\",r=(e.instructionsLength()-1).toString().length,n=0,i=!1;for(let s=0;s<e.instructionsLength();s++){let o=e.getInstruction(s),a=e.comments[s]||\"\",u=o.type===0&&o.removedInstructionForDebuggingOnly;if((mr(o)||u&&mr(u))&&(n-=1),o.type===0&&!u)i||(t+=`${GP(s,r)}: ${ig(2*n)}...\n`),i=!0;else{i=!1;let l=u?\" [X]\":\"    \";t+=`${GP(s,r)}:${l} ${ig(2*n)}${Zs(e,s)}${a?`\t\t# ${a}`:\"\"}\n`}(_r(o)||u&&_r(u))&&(n+=1)}return t}function Zs(e,t){let r=e.getInstruction(t);switch(r.type===0&&r.removedInstructionForDebuggingOnly&&(r=r.removedInstructionForDebuggingOnly),r.type){case 0:return tn(r.type);case 2:return`${tn(r.type)} ${Zr(r.valueType)} ${e.argNames[t]}`;case 3:return`${tn(r.type)} ${Zr(r.valueType)}`;case 1:return`${tn(r.type)} ${Zr(r.valueType)} ${ng(r.value)}`;case 37:case 42:return`${tn(r.type)} ${Zr(r.valueType)} ${r.symbol} ${r.args.join(\" \")}`;case 44:return`${tn(r.type)} ${Zr(r.valueType)} ${r.tag} ${r.args.join(\" \")}`;case 48:return`${tn(r.type)} ${Zr(r.valueType)} ${r.args.join(\" \")}${r.isConstantBroadcast?\" (constant)\":\"\"}`;case 8:case 9:case 10:case 11:case 13:case 12:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 30:case 31:case 38:case 39:case 40:case 41:case 47:case 49:return`${tn(r.type)} ${Zr(r.valueType)} ${r.args.join(\" \")}`;default:let n=r;throw new Error(`Unexpected opcode ${n.type}`)}}function tn(e){switch(e){case 0:return\"Noop\";case 1:return\"Constant\";case 8:return\"Add\";case 9:return\"Subtract\";case 10:return\"Multiply\";case 11:return\"Divide\";case 12:return\"Exponent\";case 13:return\"RawExponent\";case 14:return\"Negative\";case 15:return\"OrderedPair\";case 16:return\"OrderedPairAccess\";case 17:return\"BeginLoop\";case 18:return\"EndLoop\";case 19:return\"BeginIntegral\";case 20:return\"EndIntegral\";case 21:return\"BeginBroadcast\";case 22:return\"EndBroadcast\";case 23:return\"Equal\";case 24:return\"Less\";case 25:return\"Greater\";case 26:return\"LessEqual\";case 27:return\"GreaterEqual\";case 30:return\"And\";case 31:return\"Piecewise\";case 38:return\"List\";case 39:return\"ListAccess\";case 40:return\"DeferredListAccess\";case 41:return\"InboundsListAccess\";case 37:return\"NativeFunction\";case 42:return\"Distribution\";case 2:return\"LoadArg\";case 47:return\"BlockVar\";case 48:return\"BroadcastResult\";case 3:return\"SymbolicVar\";case 44:return\"ExtendSeed\";case 49:return\"Action\";default:let t=e;throw new Error(`Unexpected opcode ${t.type}`)}}function ng(e){if(Array.isArray(e))return`[${e.map(ng).join(\",\")}]`;switch(typeof e){case\"string\":return e;case\"boolean\":case\"number\":return e.toString();case\"object\":if(So(e)){let t=[];for(let r in e.updateRules)t.push(`\"${r}\": ${ng(e.updateRules[r].value)}`);return`{${t.join(\", \")}}`}else return`${e.n}/${e.d}`;default:throw new Error(\"Unexpected value: \"+e)}}function GP(e,t){let r=e.toString();return ig(t-r.length)+r}function ig(e){let t=\"\";for(let r=0;r<e;r++)t+=\" \";return t}function It(e){return e.type===1}function kP(e){if(!It(e))throw new Error(`Programming error: expected constant instruction but found ${tn(e.type)} instead.`)}function ON(e){return e.type===48&&e.isConstantBroadcast}function es(e){return It(e)||ON(e)}function Xc(e,t,r){let n=e.getInstruction(r);if(!ne(n)){for(let o of n.args)if(!es(e.getInstruction(o)))return!0}if(t<r)return!es(e.getInstruction(t));let i=[!0];for(let o=r+1;o<=t;o++)i.push(!1);let s=[t];for(;s.length;){let o=s.pop();if(i[o-r])continue;i[o-r]=!0;let a=e.getInstruction(o);if(!ne(a))for(let u of a.args)if(u<r){if(!es(e.getInstruction(u)))return!0}else i[u-r]||s.push(u)}return!1}function sg(e,t,r){if(k(t)){let n=[];for(let i=0;i<r.length;i++)n.push(sg(e,ot(t),r[i]));return e.ConstantOfType(t,n)}switch(t){case I:return e.Constant(r);case be:return e.ConstantOfType(t,r);case w:return e.ConstantOfType(t,r);case et:return e.ConstantOfType(t,r);default:throw new Error(\"Cannot reconstitute value of a \"+Z(t)+\".\")}}function Zn(e,t,r){let n=ar(e,t);if(n===void 0)throw new Error(`${r}\nNon-constant instruction: \"${Zs(e,xr(e,t))}\"`);return n}function ar(e,t){let r=Vo(e,t);if(!(r<0))return r}function Vo(e,t,r){var o;let n=r&&r[t];if(n)return n;let i=e.getInstruction(t),s;switch(i.type){case 38:s=i.args.length;break;case 1:s=i.value.length;break;case 48:{s=(o=i.constantLength)!=null?o:-1;break}}return s===void 0&&(r=r||{},s=NN(e,i,r)),r&&(r[t]=s),s}function NN(e,t,r){switch(t.type){case 31:{let n=Vo(e,t.args[1],r),i=Vo(e,t.args[2],r);return n===i?n:-1}case 37:switch(t.symbol){case\"elementsAt\":return Vo(e,t.args[1],r);case\"sortPerm\":return Vo(e,t.args[0],r);case\"shuffle\":return Vo(e,t.args[1],r);default:return-1}default:{if(k(t.valueType))return-1;throw new Error(`Programming Error: cannot find the list length of ${tn(t.type)} ${Z(t.valueType)}.`)}}}function xr(e,t){let r=e.getInstruction(t);if(!k(r.valueType))throw new Error(`Programming Error: cannot find the list length of ${e.printInstruction(t)}`);switch(r.type){case 38:return e.Constant(r.args.length);case 1:return e.Constant(r.value.length);case 48:{let n=e.getInstruction(r.args[0]);return e.getInstruction(n.args[0]).args[0]}case 37:switch(r.symbol){case\"elementsAt\":return xr(e,r.args[1]);case\"sortPerm\":return xr(e,r.args[0]);case\"shuffle\":return xr(e,r.args[1])}}return e.SyntheticNativeFunction(\"count\",[t])}function Ya(e,t){let r=[];for(let o of t)k(e.getInstruction(o).valueType)&&r.push(o);if(r.length===0)return;if(r.length===1)return xr(e,r[0]);let n=[];for(let o of r)n.push(ar(e,o));let i,s=1/0;for(let o=0;o<n.length;o++){let a=r[o],u=n[o];if(u===void 0)return e.SyntheticNativeFunction(\"min\",[e.List(r.map(l=>xr(e,l)))]);u<s&&(i=a,s=u)}return i!==void 0?xr(e,i):e.Constant(s)}function zP(e,t){if(k(e)){let r=ot(e);for(let n=0;n<t.length;n++)if(hn(r,t[n]))return!0;return!1}return hn(e,t)}function hn(e,t){switch(e){case I:return Ai(t);case w:{let[r,n]=t;return Ai(r)||Ai(n)}case et:{let[r,n,i]=t;return Ai(r)||Ai(n)||Ai(i)}case ye:{for(let r of t)if(hn(w,r))return!0;return!1}case ue:case J:case ge:{let[r,n]=t;return hn(w,r)||hn(w,n)}case Q:{let[r,n]=t;return hn(w,r)||hn(I,n)}case X:{let[r,n,i]=t;return hn(w,r)||hn(w,n)||hn(w,i)}case xe:case le:{let[r,n,i]=t;return hn(w,r)||hn(I,n)||hn(I,i)}case Ge:return Object.keys(t.updateRules).length===0;case be:return!1;default:throw new Error(\"Type cannot contain a NaN value: \"+Z(e)+\".\")}}function og(e,t){return oi(e,t)}function ag(e,t){return Hn(e,t)}function ug(e,t){return ai(e,t)}function lg(e,t){return $n(e,t)}function Xa(e,t){return F(e)===Math.E?Math.exp(F(t)):Sf(e,t)}var DN=Xa;function cg(e){return cn(e)}function RN(e,t){return[e,t]}function wN(e,t){return e[F(t)-1]}function pg(e,t){return F(e)===F(t)}function fg(e,t){return F(e)<F(t)}function dg(e,t){return F(e)>F(t)}function mg(e,t){return F(e)<=F(t)}function yg(e,t){return F(e)>=F(t)}function UP(e,t){return e&&t}function LN(e,t,r){let n=Math.floor(F(r))-1;return!isFinite(n)||n<0||n>=t.length?fn(e):t[n]}function gg(e,t,r){return Ot(r)&&(r=F(r)),`${t}::${e}${r}`}function hg(e,t){switch(e){case\"mod\":return Kb(t[0],t[1]);case\"abs\":return Zb(t[0]);case\"sqrt\":return Qb(t[0]);case\"nthroot\":return Uu(t[0],t[1]);case\"total\":return ex(t[0]);case\"count\":return t[0].length;case\"validateRangeLength\":{let r=t[0],n=t[1],i=t[2],s=t[3],o=ky(r,n,i,s);if(o===0)throw Ma();return o}case\"validateSampleCount\":{let r=Yn(t[0]),n=zy(r);if(n===0&&r!==0)throw Jm();return n}case\"select\":case\"elementsAt\":case\"uniquePerm\":case\"sortPerm\":{let r=or[e];return Jn[r.symbol].apply(null,t)}default:{let r=or[e];return(r.module===\"Math\"?Math:Jn)[r.symbol].apply(null,Yn(t))}}}function Jc(e,t){let r=Array(t+1);return Oe(e,t,r)}function HP(e,t,r){let n=Array(t+1);for(let i=0;i<r.length;i++)n[i]=r[i];return Oe(e,t,n)}function $P(e,t,r){let n=Array(t+1);return jc(e,t,r,n)}function WP(e,t,r){let n=Array(t+1),i=[];for(let s of r)i.push(jc(e,t,s,n));return i}function YP(e,t,r){if(t.constantLength)return t.constantLength;let n=t.args[0],s=e.getInstruction(n).args[0],o=e.getInstruction(s);return F(Oe(e,o.args[0],r))}function jc(e,t,r,n){let i=e.getInstruction(t),s=YP(e,i,n);if(!isFinite(r)||r<0||r>=s)return fn(ot(i.valueType));let o=i.args[0],a=t-o,u=e.getInstruction(o),l=u.args[0],c=u.args[a];n[l]=r+1;let p=Oe(e,c,n);for(let f=l;f<=o;f++)n[f]=void 0;return p}function AN(e,t,r){let n=e.getInstruction(t),i=YP(e,n,r),s=[];for(let o=i-1;o>=0;o--)s[o]=jc(e,t,o,r);return s}function XP(e,t,r){let n=Oe(e,t.args[1],r),i=t.args[0],s=e.getInstruction(i);if(s.type===48)return jc(e,i,F(n)-1,r);if(s.type===31){let o=Oe(e,s.args[0],r);return XP(e,oe(z({},t),{args:[o?s.args[1]:s.args[2],t.args[1]]}),r)}else{let o=Oe(e,t.args[0],r);return LN(t.valueType,o,n)}}function Oe(e,t,r){let n=r[t];if(n!==void 0)return n;let i=CN(e,t,r);return typeof i==\"number\"&&i===Math.floor(i)&&(i=ie(i,1)),r[t]=i,i}function CN(e,t,r){let n=e.getInstruction(t);switch(n.type){case 1:return n.value;case 8:return og(Oe(e,n.args[0],r),Oe(e,n.args[1],r));case 9:return ag(Oe(e,n.args[0],r),Oe(e,n.args[1],r));case 10:return ug(Oe(e,n.args[0],r),Oe(e,n.args[1],r));case 11:return lg(Oe(e,n.args[0],r),Oe(e,n.args[1],r));case 12:return Xa(Oe(e,n.args[0],r),Oe(e,n.args[1],r));case 13:return DN(Oe(e,n.args[0],r),Oe(e,n.args[1],r));case 14:return cg(Oe(e,n.args[0],r));case 15:return RN(Oe(e,n.args[0],r),Oe(e,n.args[1],r));case 16:return wN(Oe(e,n.args[0],r),Oe(e,n.args[1],r));case 23:return pg(Oe(e,n.args[0],r),Oe(e,n.args[1],r));case 24:return fg(Oe(e,n.args[0],r),Oe(e,n.args[1],r));case 25:return dg(Oe(e,n.args[0],r),Oe(e,n.args[1],r));case 26:return mg(Oe(e,n.args[0],r),Oe(e,n.args[1],r));case 27:return yg(Oe(e,n.args[0],r),Oe(e,n.args[1],r));case 30:return Oe(e,n.args[0],r)&&Oe(e,n.args[1],r);case 44:return gg(n.tag,Oe(e,n.args[0],r),Oe(e,n.args[1],r));case 31:return Oe(e,n.args[0],r)?Oe(e,n.args[1],r):Oe(e,n.args[2],r);case 37:{let s=[];for(let o of n.args)s.push(Oe(e,o,r));return hg(n.symbol,s)}case 38:{let s=[];for(let o of n.args)s.push(Oe(e,o,r));return s}case 39:case 40:case 41:return XP(e,n,r);case 48:return AN(e,t,r);case 47:{let s=n.args[0],o=e.getInstruction(s).args[0],a=t-s,l=e.getInstruction(s).args[a],c=[];c[l]=!0;for(let m=l;m>=o;m--){if(!c[m])continue;let d=e.getInstruction(m);if(!ne(d))for(let y of d.args)y<o?Oe(e,y,r):c[y]=!0}let p=e.copy();p.truncate(o);for(let m=0;m<o;m++){let d=r[m],y=e.getInstruction(m);if(d!==void 0){let g=y.valueType;p.replaceInstructionWithConstant(m,{type:1,valueType:g,value:d})}}p.reopenAllBlocks();let f=[];for(let m=o;m<t;m++){let d=e.getInstruction(m);if(ne(d))f.push(p.copyInstruction(d));else{let y=[];for(let g of d.args)y.push(g<o?g:f[g-o]);d.type===40?f.push(p.InboundsListAccess(y)):f.push(p.copyInstructionWithArgs(d,y))}}return p.Noop(),p.replaceInstructionWithBlockVar(p.getReturnIndex(),{type:47,valueType:n.valueType,args:[s<o?s:f[s-o]]}),p.close().getCompiledFunction().fn()}case 17:case 18:case 19:case 20:case 21:case 22:case 42:case 0:case 2:case 3:case 49:throw new Error(`Programming Error: cannot interpret opcode ${n.type}`);default:let i=n;throw new Error(`Programming Error: unexpected opcode ${i.type}`)}}function hi(e,t){let r=[],n=[];for(let i=0;i<t;i++)n.push(!1);n.push(!0);for(let i=t;i>=0;i--){if(!n[i])continue;let s=e.getInstruction(i);if(s.type===2)r.push({symbol:e.argNames[i],scope:\"free\"});else if(_r(s))switch(s.type){case 19:r.push({symbol:s.callData.indexSymbol,scope:\"integral\"});break;case 17:r.push({symbol:s.callData.indexSymbol,scope:s.callData.type});break;case 21:if(s.listComprehensionCallData)for(let a of s.listComprehensionCallData.inputListSymbols)r.push({symbol:a,scope:\"comprehension\"});break;default:let o=s;throw new Error(`Programming Error: unexpected loop instruction ${o.type}`)}else s.type===3&&s.symbol&&r.push({symbol:s.symbol,scope:\"symbolic-var\"});if(!ne(s))for(let o of s.args)n[o]=!0}return r.reverse()}function ur(e,t){let r=e.getInstruction(t);if(r.type!==48)return t;if(r.isConstantBroadcast)return JP(e,t,r);let n=r.args[0],i=e.getInstruction(n),s=i.args[0],o=!1;for(let l=s+1;l<n;l++){let c=e.getInstruction(l);if(c.type===40&&c.args[1]===s){o=!0;break}}if(!o)return t;let a=[];for(let l=s;l<=n+i.args.length-1;l++){let c=e.getInstruction(l);if(ne(c))a.push(e.copyInstruction(c));else{let p=[];for(let f of c.args)p.push(f>=s?a[f-s]:f);c.type===40?a.push(e.InboundsListAccess(p)):a.push(e.copyInstructionWithArgs(c,p))}}let u=e.getInstruction(e.getReturnIndex());return u.type===48&&u.isConstantBroadcast?JP(e,e.getReturnIndex(),u):e.getReturnIndex()}function JP(e,t,r){if(r.valueType===Wt){let i=ar(e,t);if(i==null)throw Da(hi(e,t));let s=[];for(let o=0;o<i;o++){let a=e.InboundsListAccess([t,e.Constant(o+1)]);s.push(a)}return e.List(s)}let n=Jc(e,t);return t===e.getReturnIndex()&&e.popInstruction(),e.ConstantOfType(r.valueType,n)}function Ja(e,t,r){let n=e.getInstruction(t);if(k(n.valueType)){let i=ar(e,t);if(r=Math.floor(r),isNaN(r)||r<0||i!==void 0&&r>=i){let s=ot(n.valueType);return e.NanOfType(s)}return n.type===38?n.args[r]:n.type===1&&k(n.valueType)?e.ConstantOfType(ot(n.valueType),n.value[r]):n.type===48&&n.isConstantBroadcast?e.ConstantOfType(ot(n.valueType),$P(e,t,r)):i!==void 0?e.InboundsListAccess([t,e.Constant(r+1)]):e.ListAccess([t,e.Constant(r+1)])}else{if(n.valueType===w)return isNaN(r)||r<0||r>2?e.Constant(NaN):n.type===15?n.args[r]:n.type===1?e.Constant(n.value[r]):e.OrderedPairAccess([t,e.Constant(r+1)]);throw new Error(`Cannot access elements of ${Z(n.valueType)}`)}}function Zc(e,t,r){let n=e.getInstruction(t);if(r.length===0)return e.ConstantOfType(n.valueType,[]);if(n.type===1&&k(n.valueType)){let i=[],s=ot(n.valueType);for(let o of r){let a=Math.floor(o);isNaN(a)||a<0||a>=Zn(e,t,\"Programming error: expected Constant list instruction to have constant length.\")?i.push(fn(s)):i.push(n.value[a])}return e.ConstantOfType(n.valueType,i)}else if(n.type===38){let i=[];for(let s of r){let o=Math.floor(s);if(isNaN(o)||o<0||o>=Zn(e,t,\"Programming error: expected List instruction to have constant length.\")){let a=ot(n.valueType);i.push(e.NanOfType(a))}else i.push(n.args[o])}return e.List(i)}else{if(n.type===48&&n.isConstantBroadcast)return e.ConstantOfType(n.valueType,WP(e,t,r));{let i=[],s=!0,o=ar(e,t);for(let u of r){let l=Math.floor(u);i.push(e.Constant(l+1)),(isNaN(l)||l<0||o===void 0||l>=o)&&(s=!1)}let a=[t,e.List(i)];return s?e.InboundsListAccess(a):e.ListAccess(a)}}}function ZP(e){if(e.instructionsLength()-1!==e.getReturnIndex())throw new Error(\"Programming Error: only the final instruction in a chunk can be constant collapsed\");let t=e.getInstruction(e.getReturnIndex());if(ne(t))return e.getReturnIndex();switch(t.type){case 8:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.Constant(og(n.value,i.value))):n.type===1&&F(n.value)===0?(e.popInstruction(),t.args[1]):i.type===1&&F(i.value)===0?(e.popInstruction(),t.args[0]):e.getReturnIndex()}case 9:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.Constant(ag(n.value,i.value))):n.type===1&&F(n.value)===0?(e.popInstruction(),e.Negative([t.args[1]])):i.type===1&&F(i.value)===0?(e.popInstruction(),t.args[0]):e.getReturnIndex()}case 10:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.Constant(ug(n.value,i.value))):n.type===1&&F(n.value)===1?(e.popInstruction(),t.args[1]):i.type===1&&F(i.value)===1?(e.popInstruction(),t.args[0]):e.getReturnIndex()}case 11:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.Constant(lg(n.value,i.value))):i.type===1&&F(i.value)===1?(e.popInstruction(),t.args[0]):e.getReturnIndex()}case 12:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);if(n.type===1&&i.type===1)return e.popInstruction(),e.Constant(Xa(n.value,i.value));if(n.type===1&&n.valueType===I){let s=F(n.value);if(s===Math.E)return e.popInstruction(),e.SyntheticNativeFunction(\"exp\",[t.args[1]]);if(s>0)return e.popInstruction(),e.RawExponent(t.args)}if(i.type===1&&i.valueType===I){let s=F(i.value);if(s===1)return e.popInstruction(),t.args[0];if(s===Math.floor(s))return e.popInstruction(),e.RawExponent(t.args);if(Ot(i.value)){let{n:o,d:a}=i.value;if(a%2===1){e.popInstruction();let u=e.RawExponent([e.SyntheticNativeFunction(\"abs\",[t.args[0]]),t.args[1]]);return o%2===0?u:e.Multiply([e.SyntheticNativeFunction(\"sign\",[t.args[0]]),u])}}}return e.getReturnIndex()}case 13:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.Constant(Xa(n.value,i.value))):i.type===1&&F(i.value)===1?(e.popInstruction(),t.args[0]):e.getReturnIndex()}case 14:{let n=e.getInstruction(t.args[0]);return n.type===1?(e.popInstruction(),e.Constant(cg(n.value))):e.getReturnIndex()}case 23:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.ConstantOfType(be,pg(n.value,i.value))):e.getReturnIndex()}case 24:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.ConstantOfType(be,fg(n.value,i.value))):e.getReturnIndex()}case 25:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.ConstantOfType(be,dg(n.value,i.value))):e.getReturnIndex()}case 26:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.ConstantOfType(be,mg(n.value,i.value))):e.getReturnIndex()}case 27:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.ConstantOfType(be,yg(n.value,i.value))):e.getReturnIndex()}case 30:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&i.type===1?(e.popInstruction(),e.ConstantOfType(be,UP(n.value,i.value))):e.getReturnIndex()}case 31:{let n=e.getInstruction(t.args[0]);return n.type===1?(e.popInstruction(),n.value?t.args[1]:t.args[2]):e.getReturnIndex()}case 16:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===15&&i.type===1?(e.popInstruction(),n.args[F(i.value)-1]):n.type===1&&n.valueType===w&&i.type===1?(e.popInstruction(),e.Constant(n.value[F(i.value)-1])):e.getReturnIndex()}case 38:{if(FN(e,t.args)){e.popInstruction();let n=[];for(let i of t.args)n.push(e.getInstruction(i).value);return e.ConstantOfType(t.valueType,n)}return e.getReturnIndex()}case 39:case 41:{let n=t.args[0],i=e.getInstruction(n),s=e.getInstruction(t.args[1]);if(i.type===31&&s.type===1){let o=t.type===39?e.ListAccess([i.args[1],t.args[1]]):e.InboundsListAccess([i.args[1],t.args[1]]),a=t.type===39?e.ListAccess([i.args[2],t.args[1]]):e.InboundsListAccess([i.args[2],t.args[1]]);return e.Piecewise([i.args[0],o,a])}if(i.type===48){if(s.type===1&&i.isConstantBroadcast&&i.valueType!==Wt)return e.ConstantOfType(t.valueType,Jc(e,e.getReturnIndex()));e.popInstruction();let o=i.args[0],a=n-o,u=e.getInstruction(o),l=u.args[0],c,p;if(t.type===41)c=t.args[1];else{let m=ar(e,n);if(s.type===1&&s.valueType===I&&m!==void 0){let d=F(s.value),y=Math.floor(d);if(y<1||y>m)return e.NanOfType(t.valueType);c=d===y?t.args[1]:e.Constant(y)}else{let d=e.Constant(1),g=e.getInstruction(l).args[0],h=e.SyntheticNativeFunction(\"floor\",[t.args[1]]),x=e.GreaterEqual([h,d]),P=e.LessEqual([h,g]);c=e.Piecewise([x,e.Piecewise([P,h,g]),d]),p={one:d,lengthIndex:g,roundedIndex:h,greaterEqualIndex:x,lessEqualIndex:P}}}if(u.args[a]<l)return u.args[a];let f=[c];for(let m=l+1;m<=u.args[a];m++){let d=e.getInstruction(m);if(ne(d))f.push(e.copyInstruction(d));else{let y=[];for(let g of d.args)y.push(g>=l?f[g-l]:g);d.type===40?f.push(e.InboundsListAccess(y)):f.push(e.copyInstructionWithArgs(d,y))}}if(p){let{greaterEqualIndex:m,lessEqualIndex:d,lengthIndex:y,one:g}=p,h=ot(i.valueType),x=e.NanOfType(h),P=f[f.length-1],D=e.And([e.And([m,d]),e.GreaterEqual([y,g])]);return e.Piecewise([D,P,x])}else return f[f.length-1]}else if(s.type===1&&s.valueType===I)if(i.type===38){e.popInstruction();let o=Math.floor(F(s.value))-1;return isNaN(o)||o<0||o>=i.args.length?e.NanOfType(t.valueType):i.args[o]}else if(i.type===1){e.popInstruction();let o=Math.floor(F(s.value))-1;return isNaN(o)||o<0||o>=i.value.length?e.NanOfType(t.valueType):e.ConstantOfType(ot(i.valueType),i.value[o])}else return e.getReturnIndex();else return e.getReturnIndex()}case 47:{let n=e.getInstruction(t.args[0]);if(!mr(n)||Xc(e,e.getReturnIndex(),n.args[0]))return e.getReturnIndex();let i=e.copy();i.close();let s=i.getCompiledFunction().fn();return e.popInstruction(),sg(e,t.valueType,s)}case 37:switch(t.symbol){case\"nthroot\":{let n=jP(e,t.args);if(n!==void 0)return e.Constant(Uu(n[0],n[1]));{let i=e.getInstruction(t.args[1]);if(i.type===1&&i.valueType===I)return e.Exponent([t.args[0],e.Constant(pa(i.value))])}return e.getReturnIndex()}case\"count\":{let n=ar(e,t.args[0]);return n!==void 0?(e.popInstruction(),e.Constant(n)):e.getReturnIndex()}case\"select\":if(It(e.getInstruction(t.args[1]))){e.popInstruction();let n=ht(e,t.args[1]),i=[];for(let s=0;s<n.length;s++)n[s]&&i.push(s);return Zc(e,t.args[0],i)}else return e.getReturnIndex();case\"shuffle\":{let n=t.args[0],i=t.args[1],s=ar(e,i);if(s!==void 0&&It(e.getInstruction(n))){e.popInstruction();let o=_y(ht(e,n),s);return Zc(e,i,o)}else return e.getReturnIndex()}case\"elementsAt\":{let n=t.args[0],i=t.args[1];if(It(e.getInstruction(i))){e.popInstruction();let s=ht(e,i);return Zc(e,n,s)}return e.getReturnIndex()}default:{let n=jP(e,t.args);return n===void 0?e.getReturnIndex():(e.popInstruction(),e.ConstantOfType(t.valueType,hg(t.symbol,n)))}}case 44:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return It(n)&&It(i)?e.ConstantOfType(tt,gg(t.tag,ht(e,t.args[0]),ht(e,t.args[1]))):e.getReturnIndex()}case 15:{let n=e.getInstruction(t.args[0]),i=e.getInstruction(t.args[1]);return n.type===1&&n.valueType===I&&i.type===1&&i.valueType===I?e.ConstantOfType(w,[n.value,i.value]):e.getReturnIndex()}case 48:{let n=ar(e,e.getReturnIndex());return n!==void 0&&n===0?(e.popInstruction(),e.ConstantOfType(t.valueType,[])):e.getReturnIndex()}case 49:{for(let i of t.args)if(!es(e.getInstruction(i)))return e.getReturnIndex();e.popInstruction();let n={};for(let i=0;i<t.symbols.length;i++){let s=t.symbols[i],o=e.getInstruction(t.args[i]);if(o.type===48&&(o=e.getInstruction(ur(e,t.args[i]))),o.type!==1)throw new Error(\"Expected instruction to be constant\");let{valueType:a,value:u}=o;zP(a,u)||(n[s]={value:u,valueType:a})}return e.ConstantOfType(Ge,{type:\"Action\",updateRules:n})}case 18:case 20:case 21:case 22:case 40:case 42:case 19:case 17:return e.getReturnIndex();default:let r=t;throw new Error(`Unexpected opcode ${r.type}`)}}function FN(e,t){for(let r of t){let n=e.getInstruction(r);if(!It(n))return!1}return!0}function jP(e,t){let r=[];for(let n of t){let i=e.getInstruction(n);if(It(i))r.push(i.value);else return}return r}function rn(e,t){let r=[];for(let n of t)r.push(Z(e.getInstruction(n).valueType));return r}function vr(e,t){let r=[];for(let n of t){let i=e.getInstruction(n).valueType,s=k(i)?ot(i):i;r.push(Z(s))}return r}function W(e,t,r){return pe(e.getInstruction(t).valueType,r)}function QP(e,t){let r=e.getInstruction(t);if(ne(r))return;let n=bg(e,r),i;if(n.isReducerWithNoListArgs?i=[n.expectedListType]:i=n.expectedTypes,r.type===49){for(let u of r.args){let l=e.getInstruction(u).valueType;if(!pe(l,I)&&!pe(l,w)&&!pe(l,et)&&!pe(l,ye)&&!pe(l,ue)&&!pe(l,J)&&!pe(l,ge)&&!pe(l,Q)&&!pe(l,X)&&!pe(l,xe)&&!pe(l,le))throw dd(Z(l))}let a={};for(let u of r.symbols){if(a[u])throw yd(u);a[u]=!0}return}let s=[];for(let a=0;a<r.args.length;a++){let u=e.getInstruction(r.args[a]).valueType,l=i[a];Ss(u,l)||s.push(r.args[a])}if(s.length===0)return;let o=rn(e,r.args);switch(r.type){case 8:throw Gf(o);case 9:throw qf(o);case 10:throw kf(o);case 11:throw zf(o);case 12:case 13:throw Uf(o);case 14:throw Hf(o);case 23:case 24:case 25:case 26:case 27:throw $f(o);case 30:throw Wf(o);case 31:throw e.getInstruction(r.args[0]).valueType!==be?ud(o):ld([Z(e.getInstruction(r.args[1]).valueType),Z(e.getInstruction(r.args[2]).valueType)]);case 15:throw Yf(Z(e.getInstruction(s[0]).valueType));case 16:throw Xf(o);case 19:{let a=e.getInstruction(r.args[0]).valueType,u=e.getInstruction(r.args[1]).valueType;if(a!==I)throw nd([Z(a)]);if(u!==I)throw id([Z(u)]);return}case 20:{let a=e.getInstruction(r.args[1]).valueType;throw sd([Z(a)])}case 38:{if(r.args.length===0)return;let a=e.getInstruction(r.args[0]).valueType;if(!En(a))throw Bs([Z(a)]);for(let u of r.args){let l=e.getInstruction(u).valueType;if(!En(l))throw Bs([Z(l)]);if(l!==a)throw ya()}return}case 39:case 40:case 41:throw Po(o);case 37:{let a=r.args,u=r.symbol,l=or[u],c=r.callData.errorSymbol;if(l.tag===\"doubleReducer\"){if(!k(e.getInstruction(a[0]).valueType)||!k(e.getInstruction(a[1]).valueType))throw Ia(c)}else if(l.tag===\"parameterizedReducer\"&&!k(e.getInstruction(a[0]).valueType))throw Rm(c);throw Pt(c,rn(e,a))}case 44:{if(e.getInstruction(r.args[0]).valueType!==tt||e.getInstruction(r.args[1]).valueType!==tt&&e.getInstruction(r.args[1]).valueType!==I)throw Te();return}case 42:throw Pt(r.symbol,o);case 48:case 47:case 21:case 22:case 17:case 18:throw Te();default:{let a=r;throw new Error(`Unexpected opcode: ${a.type}`)}}}function bg(e,t){switch(t.type){case 8:case 9:case 10:case 11:case 12:case 13:case 23:case 24:case 25:case 26:case 27:return{expectedTypes:[I,I]};case 14:return{expectedTypes:[I]};case 30:return{expectedTypes:[be,be]};case 31:return{expectedTypes:[be,t.valueType,t.valueType]};case 15:return{expectedTypes:t.args.map(()=>I)};case 16:return{expectedTypes:[w,I]};case 19:return{expectedTypes:[I,I]};case 20:return{expectedTypes:[I,I]};case 38:{let r=t.valueType,n=ot(r);return{expectedTypes:t.args.map(()=>n)}}case 39:case 40:case 41:return{expectedTypes:[vt,I]};case 37:{let r=t.symbol,n=or[r];return n.tag===\"reducer\"&&!BN(e,t.args)&&k(n.argumentTypes[0])?{isReducerWithNoListArgs:!0,expectedListType:n.argumentTypes[0]}:{expectedTypes:n.argumentTypes}}case 44:return e.getInstruction(t.args[0]).valueType===tt&&e.getInstruction(t.args[1]).valueType!==tt?{expectedTypes:[tt,I]}:{expectedTypes:t.args.map(r=>e.getInstruction(r).valueType)};case 47:return{expectedTypes:t.args.map(r=>e.getInstruction(r).valueType)};case 21:return{expectedTypes:[I]};case 17:return{expectedTypes:t.args.map(()=>I)};case 22:case 18:{let r=[I];for(let n=1;n<t.args.length;n++)r.push(e.getInstruction(t.args[n]).valueType);return{expectedTypes:r}}case 42:return{expectedTypes:t.args.map(()=>I)};case 48:case 49:return{expectedTypes:t.args.map(r=>e.getInstruction(r).valueType)};default:{let r=t;throw new Error(`Unexpected opcode: ${r.type}`)}}}function BN(e,t){for(let r of t)if(k(e.getInstruction(r).valueType))return!0;return!1}function Qc(e){let t=[];for(let r=0;r<e.instructionsLength();r++){t.push(0);let n=e.getInstruction(r);if(!ne(n))if(mr(n)&&n.type!==20)for(let i of n.args)t[i]=1/0;else for(let i of n.args)t[i]+=1}return t}function nn(e){return`_${e}`}function ae(e,t){let r=t[e];return r!==void 0?r:nn(e)}function KP(e){let t=Qc(e),r=[],n=[],i=tT(e,e.argNames.length,e.instructionsLength()-1,t),s=0;for(;s<e.instructionsLength();){let o=e.getInstruction(s),{source:a,nextIdx:u}=eT(e,o,s,t,r,n);i+=a,s=u}return i+=`return ${ae(e.getReturnIndex(),r)};`,{source:i,constants:n}}function eT(e,t,r,n,i,s){let o=r+1;switch(t.type){case 0:case 47:case 48:case 20:case 49:return{source:\"\",nextIdx:o};case 19:return{source:GN(e,t,r,n,i,s),nextIdx:t.endIndex};case 2:return i[r]=e.argNames[r],{source:\"\",nextIdx:o};case 21:return{source:qN(e,t,r,i),nextIdx:o};case 22:return{source:kN(e,t,r,i),nextIdx:o};case 17:return{source:zN(e,t,r,i),nextIdx:o};case 18:return{source:UN(e,t,r,i),nextIdx:o};default:{let a=HN(t,i,s);return n[r]<=1?(i[r]=`(${a})`,{source:\"\",nextIdx:o}):{source:`${nn(r)}=${a};\n`,nextIdx:o}}}}function VN(e,t,r,n,i,s){let{endIndex:o}=t,a=`function(${nn(r)}) {\n`;a+=tT(e,r+1,o-1,n);let u=r+1;for(;u<o;){let c=e.getInstruction(u),{source:p,nextIdx:f}=eT(e,c,u,n,i,s);a+=p,u=f}let l=e.getInstruction(o);return a+=`return ${ae(l.args[1],i)};\n}`,a}function GN(e,t,r,n,i,s){let o=\"BuiltIn.quad(\";o+=VN(e,t,r,n,i,s),o+=`,${ae(t.args[0],i)},${ae(t.args[1],i)})`;let{endIndex:a}=t;return n[a+1]<=1?(i[a+1]=o,\"\"):`${nn(a+1)}=${o};`}function tT(e,t,r,n){let i=\"\",s=!1;for(let o=t;o<=r;o++){let a=e.getInstruction(o);if(!(a.type===0||a.type===22||a.type===18)){if(a.type===19){let{endIndex:u}=a;o=n[u+1]<=1?u+1:u;continue}n[o]<=1&&!_r(a)&&!mr(a)&&a.type!==47&&a.type!==48||(s?i+=\",\":(i+=\"var \",s=!0),i+=nn(o))}}return s&&(i+=`;\n`),i}function qN(e,t,r,n){let i=nn(r),s=e.getInstruction(t.endIndex),o=ae(t.args[0],n),a=\"\";for(let u=1;u<s.args.length;u++){let l=t.endIndex+u;if(e.getInstruction(l).type!==48)continue;let c=nn(l);a+=`${c}=[];\n`}return a+=`if(${o}>${1e4}) throw ErrorMsg.maxListSize();\n`,a+=`for(${i}=1;${i}<=${o};${i}++){\n`,a}function kN(e,t,r,n){let i=\"\";for(let s=1;s<t.args.length;s++){let o=r+s;if(o>=e.instructionsLength()||e.getInstruction(o).type!==48)continue;let a=nn(r+s);i+=`${a}.push(${ae(t.args[s],n)});\n`}return i+=`}\n`,i}function zN(e,t,r,n){let i=nn(r),s=`${ae(t.args[0],n)}`,o=`${ae(t.args[1],n)}`,a=`if(${s}>${o}){\n`;for(let u=2;u<t.args.length;u++){let l=t.endIndex+u-1;if(l>=e.instructionsLength()||e.getInstruction(l).type!==47)continue;let c=nn(l);a+=`${c}=${ae(t.args[u],n)};\n`}a+=`}else if(!isFinite(${o}-${s})){\n`;for(let u=2;u<t.args.length;u++){let l=t.endIndex+u-1;if(l>=e.instructionsLength())continue;let c=e.getInstruction(l);if(c.type!==47)continue;let p=nn(l);a+=`${p}=${Kc(fn(c.valueType))};\n`}a+=`}else{\n`;for(let u=2;u<t.args.length;u++){let l=r+u-1;if(e.getInstruction(l).type!==47)continue;let c=nn(l);a+=`${c}=${ae(t.args[u],n)};\n`}return a+=`for(${i}=${s};${i}<=${o};${i}++){\n`,a}function UN(e,t,r,n){let i=\"\";for(let s=1;s<t.args.length;s++){let o=t.args[0]+s;if(e.getInstruction(o).type!==47)continue;let a=nn(o);i+=`${a}=${ae(t.args[s],n)};\n`}i+=`}\n`;for(let s=1;s<t.args.length;s++){let o=r+s;if(o>=e.instructionsLength()||e.getInstruction(o).type!==47)continue;let a=nn(o);i+=`${a}=${ae(t.args[s],n)};\n`}return i+=`}\n`,i}function HN(e,t,r){switch(e.type){case 1:return e.valueType===I||e.valueType===be||e.valueType===w?Kc(e.value):(r.push(Yn(e.value)),`_C[${r.length-1}]`);case 8:return`${ae(e.args[0],t)}+${ae(e.args[1],t)}`;case 9:return`${ae(e.args[0],t)}-${ae(e.args[1],t)}`;case 10:return`${ae(e.args[0],t)}*${ae(e.args[1],t)}`;case 11:return`${ae(e.args[0],t)}/${ae(e.args[1],t)}`;case 12:return`BuiltIn.pow(${ae(e.args[0],t)},${ae(e.args[1],t)})`;case 13:return`Math.pow(${ae(e.args[0],t)},${ae(e.args[1],t)})`;case 14:return`-${ae(e.args[0],t)}`;case 23:return`${ae(e.args[0],t)}===${ae(e.args[1],t)}`;case 24:return`${ae(e.args[0],t)}<${ae(e.args[1],t)}`;case 25:return`${ae(e.args[0],t)}>${ae(e.args[1],t)}`;case 26:return`${ae(e.args[0],t)}<=${ae(e.args[1],t)}`;case 27:return`${ae(e.args[0],t)}>=${ae(e.args[1],t)}`;case 30:return`${ae(e.args[0],t)}&&${ae(e.args[1],t)}`;case 31:return`${ae(e.args[0],t)}?${ae(e.args[1],t)}:${ae(e.args[2],t)}`;case 15:return`[${ae(e.args[0],t)},${ae(e.args[1],t)}]`;case 16:return`${ae(e.args[0],t)}[${ae(e.args[1],t)}-1]`;case 38:return`[${e.args.map(i=>ae(i,t)).join(\",\")}]`;case 40:case 42:case 3:throw new Error(`Programming Error: expect ${tn(e.type)} to be removed before emitting code.`);case 39:{let i=ae(e.args[0],t),s=ae(e.args[1],t);return`(Math.floor(${s})>=1&&Math.floor(${s})<=${i}.length)?${i}[Math.floor(${s})-1]:${Kc(fn(e.valueType))}`}case 41:{let i=ae(e.args[0],t),s=ae(e.args[1],t);return`${i}[${s}-1]`}case 37:{let i=or[e.symbol],s=e.args.map(o=>ae(o,t)).join(\",\");return`${i.module}.${i.symbol}(${s})`}case 44:return`${ae(e.args[0],t)}+'::${e.tag}'+${ae(e.args[1],t)}`;case 2:case 0:case 19:case 20:case 17:case 18:case 21:case 22:case 47:case 48:case 49:throw new Error(`Unexpected opcode ${e.type}`);default:let n=e;throw new Error(`Unexpected opcode ${n.type}`)}}function Kc(e){if(Array.isArray(e))return`[${e.map(Kc).join(\",\")}]`;switch(typeof e){case\"boolean\":case\"number\":return e.toString();case\"string\":return`${JSON.stringify(e)}`;case\"object\":if(So(e))throw new Error(\"Action values cannot be compiled\");return F(e).toString();default:throw new Error(\"Unexpected value: \"+e)}}function wt(e,t,r){switch(t){case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 16:case 19:case 17:case 21:return I;case 23:case 24:case 25:case 26:case 27:case 30:return be;case 31:{let i=e.getInstruction(r[1]).valueType,s=e.getInstruction(r[2]).valueType;return i===de&&k(s)?s:(i===xe||i===le)&&s===I?I:(i===Et||i===St)&&s===Y?Y:i}case 15:return w;case 38:{if(r.length===0)return de;let i=e.getInstruction(r[0]).valueType;if(i===xe||i===le){let s=!1,o=!0;for(let a of r){let u=e.getInstruction(a).valueType;if(u===I&&(s=!0),u!==I&&u!==xe&&u!==le){o=!1;break}}s&&o&&(i=I)}return En(i)?Qr(i):vt}case 39:case 40:case 41:{let i=e.getInstruction(r[0]).valueType;return k(i)?ot(i):Jt}case 44:return tt;case 49:return Ge;case 1:case 2:case 37:case 42:case 47:case 48:case 3:case 0:case 22:case 20:case 18:return Jt;default:let n=t;throw new Error(`Unexpected opcode ${n}`)}}function rT(e){let t=[];for(let r=0;r<e.instructionsLength();r++)t.push(!1);t[e.getReturnIndex()]=!0;for(let r=e.instructionsLength()-1;r>=0;r--){if(!t[r]){e.replaceInstructionWithNoop(r);continue}let n=e.getInstruction(r);if(!ne(n))for(let i of n.args)t[i]=!0}}function Ln(e,t){return e.pushLeafInstruction(t)}function Lt(e,t,r){switch(t.type){case 8:return e.Add(r);case 9:return e.Subtract(r);case 10:return e.Multiply(r);case 11:return e.Divide(r);case 12:return e.Exponent(r);case 13:return e.RawExponent(r);case 14:return e.Negative(r);case 23:return e.Equal(r);case 24:return e.Less(r);case 25:return e.Greater(r);case 26:return e.LessEqual(r);case 27:return e.GreaterEqual(r);case 30:return e.And(r);case 31:return e.Piecewise(r);case 47:return e.BlockVar(t.valueType,r);case 48:return e.BroadcastResult(t.valueType,r);case 15:return e.OrderedPair(r);case 16:return e.OrderedPairAccess(r);case 37:return e.NativeFunction(t.symbol,t.callData,r);case 42:return e.Distribution(t.symbol,r);case 19:return e.BeginIntegral(t.callData,r);case 20:return e.EndIntegral(r);case 21:return e.BeginBroadcast(r);case 22:return e.EndBroadcast(r);case 17:return e.BeginLoop(t.callData,r);case 18:return e.EndLoop(r);case 38:return e.List(r);case 39:return e.ListAccess(r);case 40:return e.DeferredListAccess(r);case 41:return e.InboundsListAccess(r);case 44:return e.ExtendSeed(t.tag,r);case 49:return e.Action(t.symbols,r);default:let n=t;throw new Error(`Unexpected opcode ${n.type}`)}}function nT(e){if(e.instructionsLength()-1!==e.getReturnIndex())throw new Error(\"Programming Error: only the final instruction in a chunk can be converted to broadcast\");let t=e.getInstruction(e.getReturnIndex());if(ne(t))return e.getReturnIndex();switch(t.type){case 8:case 9:case 10:case 11:case 12:case 13:case 23:case 24:case 25:case 26:case 27:case 30:case 15:case 14:case 31:case 16:return Go(e,t);case 42:return ur(e,Go(e,t));case 37:{let n=or[t.symbol];switch(n.tag){case\"default\":case\"trig\":case\"trig2\":case\"inverseTrig\":case\"color\":return Go(e,t);case\"never-broadcast\":{let i=[],s=!1;for(let o of t.args){let a=ur(e,o);a!==o?(s=!0,i.push(a)):i.push(o)}return s?e.copyInstructionWithArgs(t,i):e.getReturnIndex()}case\"reducer\":if($N(e,t.args))if(t.args.length===1){let i=t.args[0],s=ur(e,i);return s!==i?e.copyInstructionWithArgs(t,[s]):e.getReturnIndex()}else return Go(e,t);else return e.getReturnIndex();case\"doubleReducer\":{if(t.args.length!==2)throw new Error(\"Programming error: double reducers must have two arguments\");let i=ur(e,t.args[0]),s=ur(e,t.args[1]);return i!==t.args[0]||s!==t.args[1]?e.copyInstructionWithArgs(t,[i,s]):e.getReturnIndex()}case\"parameterizedReducer\":{if(t.args.length!==2)throw new Error(\"Programming error: double reducers must have two arguments\");let i=ur(e,t.args[0]);return i===t.args[0]?Go(e,t,[!1,!0]):e.copyInstructionWithArgs(t,[i,t.args[1]])}default:{let i=n.tag;throw new Error(`Programming Error: unexpected tag ${i}`)}}}case 39:case 40:case 41:return Go(e,t,[!1,!0]);case 19:case 20:case 17:case 18:return e.getReturnIndex();case 38:case 47:case 21:case 22:case 48:case 44:case 49:return e.getReturnIndex();default:let r=t;throw new Error(`Unexpected opcode ${r.type}`)}}function $N(e,t){for(let r of t)if(k(e.getInstruction(r).valueType))return!0;return!1}function Go(e,t,r){let n=t.args,i=!1,s=[];for(let m=0;m<n.length;m++){if(r&&!r[m])continue;let d=n[m],y=e.getInstruction(d).valueType;k(y)&&s.indexOf(d)===-1&&s.push(d),y===de&&(i=!0)}if(s.length===0)return e.getReturnIndex();if(t.type===31&&s.indexOf(t.args[0])==-1&&s.indexOf(t.args[1])>=0&&s.indexOf(t.args[2])>=0){let m=ur(e,t.args[1]),d=ur(e,t.args[2]);return m!==t.args[1]||d!==t.args[2]?Lt(e,t,[t.args[0],m,d]):e.getReturnIndex()}e.popInstruction();let o=Ya(e,s);if(o===void 0)throw new Error(\"Programming Error: expected minListLength to be defined for \"+s.length+\" lists\");let a=o;if(It(e.getInstruction(a))&&ht(e,a)===0&&i)return e.ConstantOfType(de,[]);let u=e.BeginBroadcast([a]),l=[];for(let m of s)l.push(ts(e,m,u));let c=[];for(let m=0;m<n.length;m++){let d=n[m];if(r&&!r[m])c.push(d);else{let y=s.indexOf(d);c.push(y===-1?d:l[y])}}let p=e.copyInstructionWithArgs(t,c),f=e.EndBroadcast([u,p]);return e.BroadcastResult(Qr(e.getInstruction(p).valueType),[f])}function ts(e,t,r){return e.getInstruction(t).type==48?e.DeferredListAccess([t,r]):e.InboundsListAccess([t,r])}function iT(e){let t=[];t.push(\"digraph {\");for(let r=0;r<e.instructionsLength();r++)e.getInstruction(r).type!==0&&t.push(`${r} [label=\"${r}: ${Zs(e,r)}\"];`);for(let r=0;r<e.instructionsLength();r++){let n=e.getInstruction(r);if(VP(n))for(let i of n.args)t.push(`${r} -> ${i};`)}return t.push(\"}\"),t.join(`\n`)}function qo(e,t){let r=[];for(let n=0;n<e.instructionsLength();n++)r.push(!1);r[t]=!0;for(let n=0;n<=1;n++){let i=!1;for(let s=t+1;s<e.instructionsLength();s++){let o=e.getInstruction(s);if(ne(o)||r[s])continue;let a=!1;for(let u of o.args)if(r[u]){a=!0;break}r[s]=a,a&&mr(o)&&!r[o.args[0]]&&(r[o.args[0]]=!0,i=!0)}if(!i)break}return r}function sT(e,t,r){let n=e.argNames.indexOf(t);if(n===-1)return 0;let i=zr(e,n,r);return Bt(i,e.getReturnIndex())}function zr(e,t,{allowRestriction:r,allowClosedBlockReferences:n}){return{chunk:e,argIndex:t,orderTable:[],mask:qo(e,t),allowRestriction:r,allowClosedBlockReferences:n}}function Bt(e,t){let r=e.orderTable[t];if(r!==void 0)return r;let n=WN(e,t);return e.orderTable[t]=n,n}function WN(e,t){let{chunk:r,mask:n,argIndex:i,allowRestriction:s,allowClosedBlockReferences:o}=e;if(!o&&r.isInClosedBlock(t))return 1/0;if(t===i)return 1;let a=r.getInstruction(t);if(_r(a)||mr(a))return 1/0;switch(a.type){case 8:case 9:case 24:case 26:case 25:case 27:{let[l,c]=a.args;return Math.max(Bt(e,l),Bt(e,c))}case 10:{let[l,c]=a.args;return Bt(e,l)+Bt(e,c)}case 14:return Bt(e,a.args[0]);case 11:{let[l,c]=a.args;return Bt(e,c)>0?1/0:Bt(e,l)}case 12:case 13:{let[l,c]=a.args,p=r.getInstruction(c);if(Bt(e,l)===0&&Bt(e,c)===0)return 0;if(p.type===1){let f=F(p.value);return f===Math.round(f)&&f>0?Bt(e,l)*f:1/0}else return 1/0}case 31:{if(!n[t])return 0;let l=r.getInstruction(a.args[2]);return s&&l.type===1&&isNaN(F(l.value))?Bt(e,a.args[1]):1/0}case 2:case 0:case 1:case 23:case 30:case 15:case 16:case 38:case 39:case 40:case 41:case 37:case 42:case 48:case 47:case 3:case 44:case 49:return n[t]?1/0:0;default:let u=a;throw new Error(`Unexpected opcode ${u.type}`)}}function oT(e,t){let r=e.argNames.indexOf(t),n=An(zr(e,r,{allowRestriction:!0,allowClosedBlockReferences:!1}));if(Bt(n.orderCtx,e.getReturnIndex())>2)throw new Error(\"Programming Error: cannot compute polynomial coefficients for polynomials of order greater than 2\");let i=Ut(n,e.getReturnIndex()),s=!1;for(let o=0;o<e.instructionsLength();o++)e.getInstruction(o).type===31&&n.mask[o]&&(s=!0);return{chunk:n.newChunk,coefficients:i,mappedArgIndex:n.valueMap[r],mappedReturnIndex:n.valueMap[e.getReturnIndex()],isRestrictedPolynomial:s}}function An(e){let{chunk:t,argIndex:r}=e;if(t.isInClosedBlock(r))throw new Error(\"Programming Error: cannot find polynomial coefficients of an instruction in a closed block\");let n,i;r>=0&&r<t.argNames.length?(n=t.argNames.slice(),i=t.argTypes.slice(),n.splice(r,1),i.splice(r,1)):(n=t.argNames,i=t.argTypes);let s=new bi({argNames:n,argTypes:i}),o=[];for(let p=0;p<t.instructionsLength();p++){let f=t.getInstruction(p);if(f.type===2)p<r||r<0?o.push(p):p===r?o.push(s.SymbolicVar(t.argTypes[p])):o.push(p-1);else if(ne(f))o.push(Ln(s,f));else{let m=[];for(let d of f.args)m.push(o[d]);o.push(Lt(s,f,m))}}let a=[],u=s.Constant(0),l=s.Constant(1),c=s.Constant(NaN);return{chunk:t,newChunk:s,orderCtx:e,coefficientTable:a,mask:e.mask,valueMap:o,argIndex:r,zero:u,one:l,nan:c}}function Ut(e,t){let{newChunk:r,orderCtx:n,coefficientTable:i,mask:s,valueMap:o,argIndex:a,zero:u,one:l,nan:c}=e,p=i[t];if(p!==void 0)return p;let f;for(s[t]?t===a?f=[u,l]:Bt(n,t)>2?f=[c]:f=YN(e,t):f=[o[t]];f.length>1;){let m=r.getInstruction(f[f.length-1]);if(m.type===1&&F(m.value)===0)f.pop();else break}if(f.length===0)throw new Error(\"Programming Error: coefficients cannot be empty\");return i[t]=f,f}function YN(e,t){let r=e.chunk.getInstruction(t),{newChunk:n}=e;switch(r.type){case 8:{let[s,o]=r.args,a=Ut(e,s),u=Ut(e,o),l=a.length-1,c=u.length-1,p=[];for(let f=0;f<=Math.max(l,c);f++)l>=f&&c>=f?p.push(n.Add([a[f],u[f]])):p.push(l>c?a[f]:u[f]);return p}case 9:case 24:case 26:case 25:case 27:{let[s,o]=r.args;(r.type===24||r.type==26)&&([s,o]=[o,s]);let a=Ut(e,s),u=Ut(e,o),l=a.length-1,c=u.length-1,p=[];for(let f=0;f<=Math.max(l,c);f++)l>=f&&c>=f?p.push(n.Subtract([a[f],u[f]])):p.push(l>c?a[f]:n.Negative([u[f]]));return p}case 14:{let s=r.args[0],o=Ut(e,s),a=[];for(let u=0;u<o.length;u++)a.push(n.Negative([o[u]]));return a}case 10:{let[s,o]=r.args,a=Ut(e,s),u=Ut(e,o),l=a.length-1,c=u.length-1,p=[];for(let f=0;f<=l;f++)for(let m=0;m<=c;m++){if(f+m>2)continue;let d=n.Multiply([a[f],u[m]]),y=p[f+m];y===void 0?p[f+m]=d:p[f+m]=n.Add([y,d])}return p}case 11:{let[s,o]=r.args,a=Ut(e,s),u=Ut(e,o),l=[];for(let c=0;c<a.length;c++)l.push(n.Divide([a[c],u[0]]));return l}case 12:case 13:{let[s,o]=r.args,a=Ut(e,s),u=Ut(e,o);if(a.length-1===0)return[n.RawExponent([a[0],u[0]])];let c=n.getInstruction(u[0]);switch(F(c.value)){case 0:return[n.Constant(0)];case 1:return a;case 2:return[n.Multiply([a[0],a[0]]),n.Multiply([n.Constant(2),n.Multiply([a[0],a[1]])]),n.Multiply([a[1],a[1]])]}}case 31:return Ut(e,r.args[1]);case 0:case 21:case 2:case 1:case 23:case 30:case 15:case 16:case 38:case 39:case 40:case 41:case 37:case 42:case 19:case 20:case 17:case 18:case 22:case 48:case 47:case 3:case 44:case 49:throw new Error(`Cannot find polynomial coefficients of opcode ${r.type} that depends on symbol.`);default:let i=r;throw new Error(`Unexpected opcode ${i.type}`)}}function aT(e){if(e.instructionsLength()-1!==e.getReturnIndex())throw new Error(\"Programming Error: only the final instruction in a chunk can be converted to broadcast\");let t=e.getInstruction(e.getReturnIndex());if(ne(t))return e.getReturnIndex();switch(t.type){case 8:if(rs(e,t.args[0])&&rs(e,t.args[1])){let n=e.Constant(1),i=e.Constant(2);return e.OrderedPair([e.Add([e.OrderedPairAccess([t.args[0],n]),e.OrderedPairAccess([t.args[1],n])]),e.Add([e.OrderedPairAccess([t.args[0],i]),e.OrderedPairAccess([t.args[1],i])])])}else return e.getReturnIndex();case 9:if(rs(e,t.args[0])&&rs(e,t.args[1])){let n=e.Constant(1),i=e.Constant(2);return e.OrderedPair([e.Subtract([e.OrderedPairAccess([t.args[0],n]),e.OrderedPairAccess([t.args[1],n])]),e.Subtract([e.OrderedPairAccess([t.args[0],i]),e.OrderedPairAccess([t.args[1],i])])])}else return e.getReturnIndex();case 14:if(rs(e,t.args[0])){let n=e.Constant(1),i=e.Constant(2);return e.OrderedPair([e.Negative([e.OrderedPairAccess([t.args[0],n])]),e.Negative([e.OrderedPairAccess([t.args[0],i])])])}else return e.getReturnIndex();case 10:if(rs(e,t.args[0])&&xg(e,t.args[1])){let n=e.Constant(1),i=e.Constant(2);return e.OrderedPair([e.Multiply([e.OrderedPairAccess([t.args[0],n]),t.args[1]]),e.Multiply([e.OrderedPairAccess([t.args[0],i]),t.args[1]])])}else if(xg(e,t.args[0])&&rs(e,t.args[1])){let n=e.Constant(1),i=e.Constant(2);return e.OrderedPair([e.Multiply([t.args[0],e.OrderedPairAccess([t.args[1],n])]),e.Multiply([t.args[0],e.OrderedPairAccess([t.args[1],i])])])}else return e.getReturnIndex();case 11:if(rs(e,t.args[0])&&xg(e,t.args[1])){let n=e.Constant(1),i=e.Constant(2);return e.OrderedPair([e.Divide([e.OrderedPairAccess([t.args[0],n]),t.args[1]]),e.Divide([e.OrderedPairAccess([t.args[0],i]),t.args[1]])])}else return e.getReturnIndex();case 12:case 13:case 23:case 24:case 25:case 26:case 27:case 30:case 15:case 31:case 16:case 37:case 42:case 39:case 40:case 41:case 19:case 20:case 17:case 18:case 38:case 47:case 21:case 22:case 48:case 44:case 49:return e.getReturnIndex();default:let r=t;throw new Error(`Unexpected opcode ${r.type}`)}}function rs(e,t){return e.getInstruction(t).valueType===w}function xg(e,t){return e.getInstruction(t).valueType===I}var XN=[\"Sum\",\"Product\",\"Integral\",\"List\",\"Derivative\",\"Piecewise\",\"Exponent\",\"PercentOf\",\"FunctionDefinition\",\"UpdateRule\",\"Substitution\"],ep={isGeometryEnabled(){return!1},areAllScalesLinear(){return!0},assignmentForbidden(e){return!0},substitutionForbidden(e){return!0},graphingEnabled(){return!1},isValidSlider(e){return!1},sliderVariables(e){return[]},ansEnabled(){return!1},disabledFeatures(){return XN},dimensionVarsEnabled(){return!1}};function uT(e){return 48<=e&&e<=57}function JN(e){return 97<=e&&e<=122}function jN(e){return 65<=e&&e<=90}function tp(e){return JN(e)||jN(e)}function rp(e){return e===92}function Pg(e){return e===39}function lT(e){if(9<=e&&e<=13||8192<=e&&e<=8202)return!0;switch(e){case 32:case 160:case 5760:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}function is(e,t){return ln(e.token.span,t.prevSpan)}function ns(e,t,r){return{type:e,span:t,val:r}}function ZN(e,t,r,n){return{input:e,prevSpan:t,pos:r,token:n}}function cT(e){return pT(e,0,Mn(e,0))}function pT(e,t,r){for(;lT(e.charCodeAt(t));)t+=1;let n=eD(e,t);return ZN(e,r,t,n)}function Qn(e){return pT(e.input,e.token.span.end,e.token.span)}function Ur(e){return e.token}function xi(e,t){if(Ur(e).type!==t)throw`Parse Error: expected ${t}.`;return Qn(e)}function fT(e,t){return Ur(e).type===t}function np(e){return e.pos>=e.input.length}var QN={\"\\\\left\":\"Left\",\"\\\\right\":\"Right\",\"\\\\sqrt\":\"Sqrt\",\"\\\\frac\":\"Frac\",\"\\\\operatorname\":\"OperatorName\",\"\\\\token\":\"Token\"},KN={\"[\":\"[\",\"]\":\"]\",\"{\":\"{\",\"}\":\"}\",\"^\":\"^\",_:\"_\"};function eD(e,t){let r=t;if(t>=e.length)return ns(\"End\",Mn(e,t),\"\");let n=e.charCodeAt(t);if(uT(n)){let i=un(e,r,t+1);return ns(\"Digit\",i,e.charAt(r))}else if(tp(n)){let i=un(e,r,t+1);return ns(\"Letter\",i,e.charAt(r))}else if(rp(n))if(t+=1,tp(e.charCodeAt(t))){for(;tp(e.charCodeAt(t));)t+=1;let i=un(e,r,t),s=Pr(i),o=QN[s]||\"Cmd\";return ns(o,i,s)}else{t+=1;let i=un(e,r,t),s=Pr(i);return ns(\"EscapedSymbol\",i,s)}else if(Pg(n)){for(t+=1;Pg(e.charCodeAt(t));)t+=1;if(e.charAt(t)===\"^\"){t+=1;let i=un(e,r,t),s=Pr(i);return ns(\"Primes^\",i,s)}else{let i=un(e,r,t),s=Pr(i);return ns(\"Primes\",i,s)}}else{let i=un(e,r,t+1),s=e.charAt(r),o=KN[s]||\"Symbol\";return ns(o,i,s)}}function Tg(e,t){return{type:\"Group\",span:e,args:t}}function dT(e,t,r){return{type:\"Sqrt\",span:e,optArg:t,arg:r}}function mT(e,t,r){return{type:\"Frac\",span:e,num:t,den:r}}function yT(e,t,r,n){return{type:\"SupSub\",span:e,sup:t,sub:r,nprimes:n}}function gT(e,t,r,n){return{type:\"LeftRight\",span:e,left:t,right:r,arg:n}}function hT(e,t){return{type:\"OperatorName\",span:e,arg:t}}function bT(e,t){return{type:\"TokenNode\",span:e,arg:t}}function xT(e,t){return{type:\"Symbol\",span:e,val:t}}function PT(e){switch(e){case\"Frac\":return 2;case\"^\":case\"_\":case\"Primes^\":case\"Left\":case\"Sqrt\":case\"OperatorName\":case\"Token\":return 1;default:return 0}}function TT(e){let{state:t,tree:r}=ip(cT(e),!1);if(!np(t))throw`Parse error: unexpected ${Pr(Ur(t).span)}.`;return r}function Cn(e,t){return{state:e,tree:t}}function ip(e,t){let r=e,n=[];e:for(;!np(e);){let s=Ur(e);switch(s.type){case\"Cmd\":case\"EscapedSymbol\":case\"Letter\":case\"Digit\":case\"Symbol\":case\"[\":case\"{\":case\"^\":case\"_\":case\"Primes\":case\"Primes^\":case\"Left\":case\"Frac\":case\"Sqrt\":case\"OperatorName\":case\"Token\":case\"]\":{if(s.type===\"]\"&&t)break e;let a;if({state:e,tree:a}=IT(e),a.type===\"Group\")for(let u of a.args)n.push(u);else n.push(a);break}case\"}\":case\"Right\":case\"End\":break e;default:throw`Unexpected token type ${s.type}.`}}let i=is(r,e);return Cn(e,Tg(i,n))}function IT(e){let t=Ur(e);switch(t.type){case\"Cmd\":case\"EscapedSymbol\":case\"Letter\":case\"Digit\":case\"Symbol\":return e=Qn(e),Cn(e,t);case\"[\":case\"]\":return e=Qn(e),Cn(e,xT(t.span,t.val));case\"{\":{e=Qn(e);let n;return{state:e,tree:n}=ip(e,!1),e=xi(e,\"}\"),Cn(e,n)}case\"^\":case\"_\":case\"Primes\":case\"Primes^\":return aD(e);case\"Left\":return oD(e);case\"Frac\":return sD(e);case\"Sqrt\":return iD(e);case\"OperatorName\":return rD(e);case\"Token\":return nD(e);case\"}\":case\"Right\":throw`Parse Error: unexpected ${t.val}.`;case\"End\":throw\"Parse Error: unexpected end.\";default:throw`Unexpected token type ${t.type}.`}}function rD(e){let t=e,r=Ur(e);e=xi(e,\"OperatorName\");let n;({state:e,tree:n}=ss(e,r));let i=is(t,e);return Cn(e,hT(i,n))}function nD(e){let t=e,r=Ur(e);e=xi(e,\"Token\");let n;({state:e,tree:n}=ss(e,r));let i=is(t,e);return Cn(e,bT(i,n))}function iD(e){let t=e,r=Ur(e);e=xi(e,\"Sqrt\");let n;fT(e,\"[\")&&({state:e,tree:n}=uD(e));let i;({state:e,tree:i}=ss(e,r));let s=is(t,e);return Cn(e,dT(s,n,i))}function sD(e){let t=e,r=Ur(e);e=xi(e,\"Frac\");let n;({state:e,tree:n}=ss(e,r));let i;({state:e,tree:i}=ss(e,r));let s=is(t,e);return Cn(e,mT(s,n,i))}function oD(e){let t=e;e=xi(e,\"Left\");let r=Ur(e);e=Qn(e);let n;({state:e,tree:n}=ip(e,!1)),e=xi(e,\"Right\");let i=Ur(e);e=Qn(e);let s=is(t,e);return Cn(e,gT(s,r,i,n))}function aD(e){let t=e,r,n,i=0;e:for(;!np(e);){let o=Ur(e);switch(o.type){case\"^\":if(e=Qn(e),r)throw\"Parse Error: double superscript.\";({state:e,tree:r}=ss(e,o));break;case\"_\":if(e=Qn(e),n)throw\"Parse Error: double subscript.\";({state:e,tree:n}=ss(e,o));break;case\"Primes\":if(e=Qn(e),i>0)throw\"Parse Error: double primes.\";i=o.val.length;break;case\"Primes^\":if(e=Qn(e),i>0)throw\"Parse Error: double primes.\";if(r)throw\"Parse Error: double superscript\";i=o.val.length-1,{state:e,tree:r}=ss(e,o);break;default:break e}}let s=is(t,e);return Cn(e,yT(s,r,n,i))}function ss(e,t){let r=PT(t.type),n;if(r<=0)throw new Error(\"Programming Error: greediness must be greater than 0.\");let i=PT(Ur(e).type);if(i>0&&i<=r){let s=Pr(t.span);throw`Parse Error: can't use ${Pr(Ur(e).span)} as argument of ${s}. Use {}.`}return{state:e,tree:n}=IT(e),n.type!==\"Group\"&&(n=Tg(n.span,[n])),Cn(e,n)}function uD(e){e=xi(e,\"[\");let t;return{state:e,tree:t}=ip(e,!0),e=xi(e,\"]\"),Cn(e,t)}var lD={mcd:\"gcd\",gcf:\"gcd\",mcm:\"lcm\",signum:\"sign\",sgn:\"sign\",stdDevP:\"stdevp\",stddevp:\"stdevp\",stdDev:\"stdev\",stddev:\"stdev\",variance:\"var\",TTest:\"ttest\",TScore:\"tscore\",IndependentTTest:\"ittest\",iTTest:\"ittest\",inverseCdf:\"quantile\",inversecdf:\"quantile\",arsinh:\"arcsinh\",arcosh:\"arccosh\",artanh:\"arctanh\",arcsch:\"arccsch\",arsech:\"arcsech\",arcoth:\"arccoth\"};function MT(e){let t=0;for(;rp(e.charCodeAt(t));)t+=1;return t>0&&(e=e.slice(t)),lD[e]||e}function vT(e,t){return{type:\"Equals\",span:e,args:t}}function ja(e,t,r){return{type:\"Inequality\",span:e,symbol:t,args:r}}function ET(e,t,r){return{type:\"TrailingInequalityPiece\",span:e,symbol:t,args:r}}function ST(e,t,r){return{type:\"InequalityChain\",span:e,first:t,chain:r}}function OT(e,t){return{type:\"Tilde\",span:e,args:t}}function NT(e,t){return{type:\"Pos\",span:e,args:t}}function DT(e,t){return{type:\"Neg\",span:e,args:t}}function RT(e,t){return{type:\"Add\",span:e,args:t}}function wT(e,t){return{type:\"Sub\",span:e,args:t}}function LT(e,t){return{type:\"Mul\",span:e,args:t}}function AT(e,t){return{type:\"Div\",span:e,args:t}}function CT(e,t){return{type:\"Bang\",span:e,args:t}}function Za(e,t){return{type:\"Call\",span:e,args:t}}function Ig(e,t){return{type:\"ImplicitCall\",span:e,args:t}}function _T(e,t){return{type:\"Index\",span:e,args:t}}function Mg(e,t){return{type:\"Paren\",span:e,args:t}}function vg(e,t){return{type:\"List\",span:e,args:t}}function FT(e,t){return{type:\"Pipes\",span:e,args:t}}function Eg(e,t){return{type:\"Subscript\",span:e,args:t}}function sp(e,t){return{type:\"Superscript\",span:e,args:t}}function Qa(e,t,r){return{type:\"Prime\",span:e,nprimes:t,args:r}}function op(e,t){return{type:\"Seq\",span:e,args:t}}function BT(e,t){return{type:\"Sqrt\",span:e,args:t}}function VT(e,t){return{type:\"Nthroot\",span:e,args:t}}function GT(e,t){return{type:\"Frac\",span:e,args:t}}function qT(e,t){return{type:\"Derivative\",span:e,args:t}}function kT(e,t){return{type:\"Integral\",span:e,args:t}}function zT(e,t){return{type:\"EmptyIntegral\",span:e,args:t}}function UT(e,t){return{type:\"Sum\",span:e,args:t}}function HT(e,t){return{type:\"Product\",span:e,args:t}}function $T(e,t){return{type:\"Piecewise\",span:e,args:t}}function WT(e){return{type:\"EmptyPiecewise\",span:e}}function YT(e){return{type:\"EmptyRangeEnd\",span:e}}function XT(e,t){return{type:\"Colon\",span:e,args:t}}function Sg(e,t){return{type:\"Ellipsis\",span:e,args:t}}function JT(e,t){return{type:\"For\",span:e,args:t}}function jT(e,t){return{type:\"With\",span:e,args:t}}function ZT(e,t){return{type:\"Dot\",span:e,args:t}}function QT(e,t){return{type:\"PercentOf\",span:e,args:t}}function KT(e,t){return{type:\"RightArrow\",span:e,args:t}}function Og(e,t){return{type:\"Juxt\",span:e,args:t}}function eI(e,t){return{type:\"Letter\",span:e,val:t}}function ap(e,t){return{type:\"Decimal\",span:e,val:t}}function Qs(e,t){return{type:\"Cmd\",span:e,val:MT(t)}}function tI(e,t){return{type:\"Alphanumeric\",span:e,val:t}}function rI(e,t,r,n){return{type:\"MixedNumber\",span:e,whole:t,num:r,den:n}}function Er(e){if(e.type===\"Subscript\"){if(e.args[1].type!==\"Alphanumeric\")return!1;e=e.args[0]}switch(e.type){case\"Cmd\":return!0;case\"Letter\":return!0;default:return!1}}function nI(e){return e.type!==\"Superscript\"?!1:Er(e.args[0])}function iI(e,t){if(e.type!==\"Letter\"||e.val!==\"d\"||t.type!==\"Juxt\")return!1;let[r,n]=t.args;return r.type!==\"Letter\"||r.val!==\"d\"?!1:Er(n)}function lr(e){return e.type===\"Seq\"?e.args:[e]}function j(e,t){return{type:\"Err\",span:e,error:t}}function Ng(){return{type:\"UnexpectedParseError\"}}function sI(){return{type:\"EmptyInput\"}}function oI(){return{type:\"EmptyGroup\"}}function Dg(){return{type:\"EmptySubscript\"}}function aI(){return{type:\"EmptySuperscript\"}}function Rg(){return{type:\"EmptyRadical\"}}function uI(){return{type:\"EmptySquareBracket\"}}function lI(){return{type:\"EmptyPipe\"}}function cI(){return{type:\"EmptyRadicalIndex\"}}function wg(){return{type:\"UnexpectedEnd\"}}function os(e){return{type:\"BinaryOperatorMissingRight\",val:e}}function pI(e){return{type:\"BinaryOperatorMissingLeft\",val:e}}function Lg(e){return{type:\"UnaryOperatorMissingRight\",val:e}}function Ag(e){return{type:\"UnaryOperatorMissingLeft\",val:e}}function fI(e,t){return{type:\"MissingCloseDelimiter\",open:e,close:t}}function Ka(e,t){return{type:\"UnexpectedCloseDelimiter\",open:e,close:t}}function dI(){return{type:\"UnexpectedDifferential\"}}function mI(e){return{type:\"UnrecognizedSymbol\",val:e}}function yI(e){return{type:\"InvalidSubscript\",val:e}}function gI(e){return{type:\"UnexpectedSubscript\",base:e}}function Cg(e){return{type:\"FunctionMissingArgument\",val:e}}function hI(){return{type:\"PercentMissingOf\"}}function _g(){return{type:\"PrimeWithoutParen\"}}function bI(){return{type:\"SuperscriptWithPrime\"}}function up(){return{type:\"UnexpectedPrime\"}}function xI(){return{type:\"SumMissingBound\"}}function PI(){return{type:\"ProductMissingBound\"}}function Fg(){return{type:\"MissingBound\"}}function TI(){return{type:\"IntegralMissingBound\"}}function II(){return{type:\"SumMissingBody\"}}function MI(){return{type:\"ProductMissingBody\"}}function vI(){return{type:\"IntegralMissingBody\"}}function EI(){return{type:\"DerivativeMissingBody\"}}function SI(){return{type:\"IntegralMissingDifferential\"}}function OI(){return{type:\"DifferentialWithSuperscript\"}}function NI(){return{type:\"FractionMissingNumerator\"}}function DI(){return{type:\"FractionMissingDenominator\"}}function RI(){return{type:\"FractionEmpty\"}}function Bg(e){return{type:\"AdjacentNumbers\",args:e}}function wI(){return{type:\"UnexpectedFor\"}}function LI(){return{type:\"TokenWithSubscript\"}}var fD={\"+\":!0,\"-\":!0,\"*\":!0,\"/\":!0,\"!\":!0,\"(\":!0,\")\":!0,\"\\\\{\":!0,\"\\\\}\":!0,\"(|\":!0,\"|)\":!0,\"[\":!0,\"]\":!0,\",\":!0,\"...\":!0,\":\":!0,\"=\":!0,\">\":!0,\"<\":!0,\">=\":!0,\"<=\":!0,\"->\":!0,\"~\":!0,\"%\":!0,\".\":!0,for:!0,with:!0,Letter:!0,Decimal:!0,Cmd:!0,TokenNode:!0,Differential:!0,End:!0,Trig:!0,Ln:!0,Log:!0,Int:!0,Sum:!0,Prod:!0,Err:!0},as={\"\\\\lt\":\"<\",\"\\\\gt\":\">\",\"\\\\le\":\"<=\",\"\\\\ge\":\">=\",\"\\\\leq\":\"<=\",\"\\\\geq\":\">=\",\"\\\\ldots\":\"...\",\"\\\\sim\":\"~\",\"\\\\to\":\"->\",\"\\\\cdot\":\"*\",\"\\\\times\":\"*\",\"\\\\div\":\"/\",\"\\\\ln\":\"Ln\",\"\\\\log\":\"Log\",\"\\\\int\":\"Int\",\"\\\\sum\":\"Sum\",\"\\\\prod\":\"Prod\",\"\\\\backslash\":\"Err\",\"\\\\for\":\"for\",\"\\\\with\":\"with\"},dD=[\"sin\",\"cos\",\"tan\",\"cot\",\"sec\",\"csc\"];for(let e of dD)as[\"\\\\\"+e]=\"Trig\",as[\"\\\\\"+e+\"h\"]=\"Trig\",as[\"\\\\arc\"+e]=\"Trig\",as[\"\\\\arc\"+e+\"h\"]=\"Trig\",as[\"\\\\ar\"+e+\"h\"]=\"Trig\";var Vg={\"+\":\"+\",\"-\":\"-\",\"*\":\"*\",\"/\":\"/\",\"!\":\"!\",\"(\":\"(\",\")\":\")\",\"[\":\"[\",\"]\":\"]\",\",\":\",\",\"...\":\"...\",\":\":\":\",\"=\":\"=\",\">=\":\">=\",\"<=\":\"<=\",\">\":\">\",\"<\":\"<\",\"~\":\"~\",\".\":\".\"},AI={\"\\\\{\":\"\\\\{\",\"\\\\}\":\"\\\\}\",\"\\\\%\":\"%\"},CI={\"|\":\"(|\",\"\\\\{\":\"\\\\{\",\"[\":\"[\",\"(\":\"(\"},_I={\"|\":\"|)\",\"\\\\}\":\"\\\\}\",\"]\":\"]\",\")\":\")\"},FI=Object.keys(fD);function BI(e,t,r,n,i,s,o,a){return{opts:e,input:t,prevSpan:r,startIndex:n,endIndex:i,token:s,mode:o,parent:a}}function U(e,t){return ln(e.token.span,t.prevSpan)}function qt(e,t){return ln(e,t.prevSpan)}function qg(e){return Mn(e.token.span.input,e.token.span.start)}function mD(e,t){return{type:\"Differential\",span:e,val:t}}function wr(e,t,r){return{type:e,span:t,val:r}}function Bi(e,t){let r=Mn(e.span.input,e.span.start);return kg(t,e,0,r,void 0,void 0)}function kg(e,t,r,n,i,s){let o=t.args;if(r>o.length&&s)return VI(s,n);r=eu(o,r);let{token:a,endIndex:u}=GI(t,r,i);if(a.type===\"End\"&&s){let l=s.input.args[s.startIndex];if(l.type===\"LeftRight\"){let c=l.right,p=_I[c.val]||\"Err\",f=wr(p,c.span,c.val);return BI(e,t,n,r,u,f,i,s)}}else a.type===\"Int\"?i=yD(i):a.type===\"Differential\"&&(i=gD(i));return BI(e,t,n,r,u,a,i,s)}function ee(e){let t=e.input.args[e.startIndex],r=e.token.span;return t&&t.type===\"LeftRight\"?kg(e.opts,t.arg,0,r,e.mode,e):VI(e,r)}function VI(e,t){let{input:r,endIndex:n,mode:i,parent:s}=e;return kg(e.opts,r,n+1,t,i,s)}function yr(e){return e.token}function yD(e){return{type:\"integral\",parent:e}}function gD(e){if(!e||e.type!==\"integral\")throw new Error(\"Programming Error: expected lexer to be in integral mode.\");return e.parent}function gr(e,t){return yr(e).type===t}function pp(e){return e.startIndex>=e.input.args.length}function zg(e,t){return t.token.span.start>e.token.span.start}function er(e,t){return{token:t,endIndex:e}}function GI(e,t,r){let n=e.args;if(t>=n.length){let o=Mn(e.span.input,e.span.end);return er(t,wr(\"End\",o,\"\"))}let i=e.args[t];switch(i.type){case\"Sqrt\":case\"Frac\":case\"SupSub\":return er(t,i);case\"Letter\":{if(!r||r.type!==\"integral\"||i.val!=\"d\")return er(t,i);let{endIndex:c,token:p}=GI(e,t+1,r);if(p.type===\"Letter\"||p.type===\"Cmd\"){let f=mD(ln(i.span,p.span),p.val);return er(c,f)}else return er(t,i)}case\"LeftRight\":{let c=i.left,p=CI[c.val]||\"Err\";var s=ln(i.span,c.span);return er(t,wr(p,s,c.val))}case\"OperatorName\":let o=[];for(let c of i.arg.args){if(c.type!==\"Letter\")return er(t,wr(\"Err\",i.span,Pr(i.arg.span)));o.push(c.val)}let a=\"\\\\\"+o.join(\"\"),u=as[a]||\"Cmd\";return er(t,wr(u,i.span,a));case\"TokenNode\":{let c=\"$\";if(i.arg.args.length===0)return er(t,wr(\"Err\",i.span,Pr(i.arg.span)));for(let p of i.arg.args){if(p.type!==\"Digit\")return er(t,wr(\"Err\",i.span,Pr(i.arg.span)));c+=p.val}return er(t,wr(\"TokenNode\",i.span,c))}case\"Cmd\":{let c=as[i.val]||\"Cmd\";return er(t,wr(c,i.span,i.val))}case\"EscapedSymbol\":{let c=AI[i.val]||\"Err\";return er(t,wr(c,i.span,i.val))}case\"Symbol\":return hD(e,t,i);case\"Digit\":return qI(e,t);default:throw`Unexpected atom ${i.type}.`}}function hD(e,t,r){switch(r.val){case\".\":return bD(e,t);case\"-\":{let i=e.args[t+1];if(i&&lp(i,\">\")){let s=wr(\"->\",ln(r.span,i.span),\"->\");return er(t+1,s)}break}case\"<\":{let i=e.args[t+1];if(i&&lp(i,\"=\")){let s=wr(\"<=\",ln(r.span,i.span),\"<=\");return er(t+1,s)}break}case\">\":{let i=e.args[t+1];if(i&&lp(i,\"=\")){let s=wr(\">=\",ln(r.span,i.span),\">=\");return er(t+1,s)}break}}let n=Vg[r.val]||\"Err\";return er(t,wr(n,r.span,r.val))}function bD(e,t){let r=e.args[t];if(r.type!==\"Symbol\"||r.val!==\".\")throw new Error(\"Programming Error: expected '.'\");if(t+2<e.args.length&&cp(e.args[t+1])&&cp(e.args[t+2])){let s=ln(r.span,e.args[t+2].span);return er(t+2,wr(\"...\",s,Pr(s)))}let n=eu(e.args,t+1);if(n<e.args.length&&e.args[n].type===\"Digit\")return qI(e,t);let i=Vg[r.val]||\"Err\";return er(t,wr(i,r.span,r.val))}function qI(e,t){let r=xD(e,t);if(r)return r;let n=e.args,i=e.args[t].span,s=[],o=!1,a=!1;for(;t<n.length;t++){let l=eu(n,t);if(l>=n.length)break;let c=n[l];if(c.type===\"Digit\")t=l,o=!0,s.push(c.val);else if(!a&&cp(c)){if(l+1<n.length&&cp(e.args[l+1]))break;t=l,a=!0,s.push(\".\")}else break}if(!o)throw new Error(\"Programming Error: decimals must have at least one digit.\");let u=ln(i,e.args[t-1].span);return er(t-1,wr(\"Decimal\",u,s.join(\"\")))}function xD(e,t){let r=e.args,n=r[t].span,i=[];for(;t<r.length;t++){let l=eu(r,t);if(l>=r.length)break;let c=r[l];if(c.type!==\"Digit\")break;t=l,i.push(c.val)}if(t=eu(r,t),t>=r.length)return;let s=r[t];if(s.type!==\"Frac\")return;let o=[],a=[];for(let l of s.num.args)if(!Gg(l)){if(l.type!==\"Digit\")return;o.push(l.val)}for(let l of s.den.args)if(!Gg(l)){if(l.type!==\"Digit\")return;a.push(l.val)}let u=ln(n,s.span);return er(t,rI(u,i.join(\"\"),o.join(\"\"),a.join(\"\")))}function Gg(e){switch(e.type){case\"Sqrt\":case\"Frac\":case\"SupSub\":case\"LeftRight\":case\"OperatorName\":case\"TokenNode\":case\"Symbol\":case\"Letter\":case\"Digit\":return!1;case\"Cmd\":return e.val===\"\\\\space\";case\"EscapedSymbol\":return e.val===\"\\\\ \"||e.val===\"\\\\:\"||e.val===\"\\\\,\"||e.val===\"\\\\;\";default:throw`Unexpected atom ${e.type}.`}}function eu(e,t){for(;t<e.length&&Gg(e[t]);)t+=1;return t}function cp(e){return lp(e,\".\")}function lp(e,t){return e.type===\"Symbol\"&&e.val===t}function ko(e){return{type:\"initial\",tokenType:e}}function tu(e){return{type:\"l\",tokenType:e}}function ru(e){return{type:\"r\",tokenType:e}}function Xe(e){return{type:\"la\",tokenType:e}}function zo(e){return{type:\"ra\",tokenType:e}}function kI(e,t){for(let r of FI)if(t[r]===void 0)throw new Error(`Programming Error: token ${r} must be a assigned a ${e} precedence`)}function Ks(e,t,r,n){if(t[r]!==void 0)throw new Error(`Programming Error: duplicate ${e} entry for token ${r}.`);t[r]=n}function zI(e){let t={},r={},n={};for(let a=0;a<e.length;a++){let u=e[a];for(let{type:l,tokenType:c}of u)switch(l){case\"initial\":Ks(\"initial\",t,c,a);break;case\"l\":Ks(\"left\",r,c,a);break;case\"r\":Ks(\"right\",n,c,a);break;case\"la\":Ks(\"left\",r,c,a),Ks(\"right\",n,c,a);break;case\"ra\":Ks(\"left\",r,c,a),Ks(\"right\",n,c,a-1);break}}kI(\"left\",r),kI(\"right\",n);function i(a){return n[a]}function s(a){return r[a]}function o(a){let u=t[a];return u===void 0?i(a):u}return{rightPrec:i,leftPrec:s,initialPrec:o}}var Uo={},PD=[\"sin\",\"cos\",\"tan\",\"cot\",\"sec\",\"csc\",\"sinh\",\"cosh\",\"tanh\",\"coth\",\"sech\",\"csch\"];PD.forEach(function(e){Uo[e]=\"arc\"+e,Uo[\"arc\"+e]=e});var TD=0;function YI(e,t){return ID(e,t)}function Ie(e,t){let r=[];for(let n=0;n<t.length;n++)r.push(kt(e,t[n]));return r}function ID(e,t){return e.setInput(MD(e,t),t.span)}function XI(e){if(e.type!==\"Call\")return;let[t,r]=e.args,n=lr(r);if(Er(t)&&n.every(Er))return{base:t,args:n}}function JI(e){return XI(e)!==void 0}function Hg(e){return Er(e)}function MD(e,t){let r=e.nodes;switch(t.type){case\"Equals\":{let[n,i]=t.args,s=XI(n);if(s){let{base:o,args:a}=s;return r.FunctionDefinition(kt(e,o),Ie(e,a),kt(e,i))}else if(Hg(n)){let o=kt(e,i);return r.Assignment(kt(e,n),o)}return r.Equation(kt(e,n),kt(e,i))}case\"Tilde\":{let[n,i]=Ie(e,t.args);return r.Regression(n,i)}case\"Inequality\":return eo(e,t);case\"InequalityChain\":{if(t.chain.length>1)throw ql();let{first:{symbol:n,args:[i,s]},chain:[{symbol:o,args:[a]}]}=t;return Er(s)?r.DoubleInequality([kt(e,i),n,kt(e,s),o,kt(e,a)]):eo(e,t)}case\"Call\":{let[n,i]=t.args;if(n.type===\"Cmd\")switch(n.val){case\"histogram\":return r.Histogram(Ie(e,lr(i)));case\"cube\":case\"sphere\":case\"cone\":case\"dodecahedron\":case\"octahedron\":case\"tetrahedron\":return r.Object3D(Ie(e,lr(i)),n.val);case\"dotplot\":return r.DotPlot(Ie(e,lr(i)));case\"boxplot\":return r.BoxPlot(Ie(e,lr(i)));case\"ttest\":return r.TTest(Ie(e,lr(i)));case\"ittest\":return r.IndependentTTest(Ie(e,lr(i)));case\"stats\":return r.Stats(Ie(e,lr(i)));default:return Pi(e,t)}return Pi(e,t)}default:return Pi(e,t)}}function jI(e){if(e.type!==\"Paren\")return!1;let[t]=e.args;return t.type!==\"Seq\"?!1:t.args.length===2}function kt(e,t){return e.setInput(Pi(e,t),t.span)}function Pi(e,t){let r=e.nodes;switch(t.type){case\"Pos\":return Pi(e,t.args[0]);case\"Neg\":let n=-1,i=t.args[0];for(;;)if(i.type===\"Pos\"||i.type===\"Paren\"&&!jI(i))i=i.args[0];else if(i.type===\"Neg\")i=i.args[0],n*=-1;else break;switch(i.type){case\"Decimal\":{let o=HI(i);return r.Constant(n===-1?cn(o):o)}case\"MixedNumber\":{let o=$I(i);return r.MixedNumber(n===-1?cn(o):o)}default:return n===-1?r.Negative([kt(e,i)]):Pi(e,i)}case\"Add\":return r.Add(Ie(e,t.args));case\"Sub\":return r.Subtract(Ie(e,t.args));case\"Mul\":return r.Multiply(Ie(e,t.args));case\"Div\":return r.Divide(Ie(e,t.args));case\"Bang\":{let[o]=t.args;return o.type===\"Call\"?r.FunctionFactorial(Ie(e,o.args)):r.FunctionCall(\"\\\\factorial\",Ie(e,t.args))}case\"PercentOf\":return r.PercentOf(Ie(e,t.args));case\"Call\":return UI(e,t);case\"ImplicitCall\":return DD(t),UI(e,t);case\"Dot\":{let o=t.args[1],[a,u]=Ie(e,t.args);if(KI(o)){let l=Mn(o.span.input,o.span.end),c=e.setInput(e0(e),l);u=e.setInput(r.SeededFunctionCall(u,[c]),o.span)}else if(o.type===\"Letter\")switch(o.val){case\"x\":return r.OrderedPairAccess([a,r.Constant(1)]);case\"y\":return r.OrderedPairAccess([a,r.Constant(2)]);default:break}else if(o.type===\"Call\"){let l=o.args[0];if(l.type===\"Letter\")switch(l.val){case\"x\":return r.Multiply([r.OrderedPairAccess([a,r.Constant(1)]),kt(e,o.args[1])]);case\"y\":return r.Multiply([r.OrderedPairAccess([a,r.Constant(2)]),kt(e,o.args[1])])}}return r.DotAccess([a,u])}case\"Prime\":{let[o]=t.args;if(o.type===\"Call\"){let[a,u]=o.args,l=lr(u).length;if(a.type===\"Cmd\"&&a.val===\"logbase\"){if(l!==2)throw Gs()}else if(l!==1)throw Gs();return r.Prime(t.nprimes,Ie(e,t.args))}else throw o.type===\"ImplicitCall\"?Gl():Vl()}case\"Index\":{let[o,a]=t.args;if(a.type===\"Seq\")return r.ListAccess([Pi(e,o),r.List(Ie(e,a.args))]);if(a.type===\"Ellipsis\"){let[u,l]=a.args;return r.ListAccess([Pi(e,o),r.Range([r.List(Ie(e,lr(u))),r.List(l.type===\"EmptyRangeEnd\"?[]:Ie(e,lr(l)))])])}return QI(a)?r.ListAccess([Pi(e,o),eo(e,a)]):r.ListAccess(Ie(e,t.args))}case\"Paren\":{let[o]=t.args;if(o.type===\"Seq\"){if(o.args.length===0)throw Xd();return r.ParenSeq(Ie(e,o.args))}else return Pi(e,o)}case\"List\":{if(t.args.length===0)return r.List([]);let o=t.args[0];if(o.type===\"Ellipsis\"){let[a,u]=o.args;return r.Range([r.List(Ie(e,lr(a))),r.List(Ie(e,lr(u)))])}else if(o.type===\"For\"){let[a,u]=o.args,l=e.setInput(r.Identifier(`_comprehensionIndex_${TD++}`),a.span),c=kt(fp(e,{prefix:\"li\",expr:l}),a),p=[];for(let f of lr(u)){if(!nu(f))throw Km();p.push(e.setInput(r.AssignmentExpression(Ie(e,f.args)),f.span))}return r.ListComprehension(l,c,p)}return r.List(Ie(e,lr(o)))}case\"Pipes\":return r.FunctionCall(\"\\\\abs\",Ie(e,t.args));case\"Subscript\":{let[o,a]=t.args;if(a.val.length===0)throw Bl();let u;switch(o.type){case\"Letter\":u=o.val;break;case\"Cmd\":u=o.val;break;default:throw Hd()}return r.Identifier(`${u}_${a.val}`)}case\"Superscript\":{let[o,a]=t.args;if(o.type===\"Call\"&&o.args[1].type!==\"Seq\"&&!RD(o))return r.FunctionExponent(Ie(e,[o.args[0],o.args[1],a]));if(o.type===\"Dot\"){let u=o.args[1],[l,c]=Ie(e,o.args),p=kt(e,a);if(u.type===\"Letter\")switch(u.val){case\"x\":return r.Exponent([r.OrderedPairAccess([l,r.Constant(1)]),p]);case\"y\":return r.Exponent([r.OrderedPairAccess([l,r.Constant(2)]),p]);default:break}else if(u.type===\"Call\"){let f=u.args[0];if(f.type===\"Letter\")switch(f.val){case\"x\":return r.Multiply([r.OrderedPairAccess([l,r.Constant(1)]),r.Exponent([kt(e,u.args[1]),p])]);case\"y\":return r.Multiply([r.OrderedPairAccess([l,r.Constant(2)]),r.Exponent([kt(e,u.args[1]),p])]);default:break}}return r.Exponent([r.DotAccess([l,c]),p])}else return r.Exponent(Ie(e,t.args))}case\"Sqrt\":return r.FunctionCall(\"sqrt\",Ie(e,t.args));case\"Nthroot\":return r.FunctionCall(\"nthroot\",Ie(e,[t.args[1],t.args[0]]));case\"Frac\":return r.Divide(Ie(e,t.args));case\"Derivative\":{let o=Ie(e,t.args);if(!Er(t.args[0]))throw Te();return r.Derivative(o[0],[o[1]])}case\"Integral\":{let[o,a,u,l]=t.args,c=Ie(e,[o,a,u,l]);return r.Integral(c)}case\"EmptyIntegral\":{let[o,a,u]=Ie(e,t.args),l=r.Constant(ie(1,1));return r.Integral([o,a,u,l])}case\"Sum\":{let[o,a,u]=t.args;if(!nu(a))throw Cm();let l=Ie(e,[a.args[0],a.args[1],u]),c=kt(fp(e,{prefix:\"ro\",expr:l[0]}),o);return r.Sum(l.concat(c))}case\"Product\":{let[o,a,u]=t.args;if(!nu(a))throw _m();let l=Ie(e,[a.args[0],a.args[1],u]),c=kt(fp(e,{prefix:\"ro\",expr:l[0]}),o);return r.Product(l.concat(c))}case\"Juxt\":{if(e.writeIntegral){let[o,a]=t.args;if(a.type===\"Letter\"&&a.val===\"t\"&&o.type===\"Juxt\"&&([o,a]=o.args,a.type===\"Letter\"&&a.val===\"n\")){if(o.type===\"Juxt\"){if([o,a]=o.args,a.type===\"Letter\"&&a.val===\"i\")throw Zl()}else if(o.type===\"Letter\"&&o.val===\"i\")throw Zl()}}return r.Multiply(Ie(e,t.args))}case\"Letter\":return r.Identifier(t.val);case\"Cmd\":{let o=t.val;switch(o){case\"ans\":{if(e.currentIndex===void 0)throw Ea(\"ans\");return r.Ans(`ans_{${e.currentIndex-1}}`)}case\"approx\":throw El(o);case\"dt\":{if(!e.allowDt)throw Ea(o);return r.Identifier(o)}case\"index\":{if(!e.allowIndex)throw Ea(o);return r.Identifier(o)}default:return r.Identifier(o)}}case\"With\":{if(e.isSubstitutionRHS)throw ic();let[o,a]=t.args,u=oe(z({},e),{isSubstitutionRHS:!0});return r.Substitution(kt(u,o),SD(u,a))}case\"Decimal\":return r.Constant(HI(t));case\"MixedNumber\":return r.MixedNumber($I(t));case\"Piecewise\":return ND(e,t);case\"RightArrow\":return OD(e,t);case\"Seq\":return r.BareSeq(Ie(e,t.args));case\"EmptyPiecewise\":if(!r.Piecewise.empty)throw Ji();return r.Piecewise.empty();case\"Equals\":throw qr(\"=\");case\"Inequality\":case\"InequalityChain\":throw Vf();case\"Tilde\":throw qr(\"~\");case\"Colon\":throw qr(\":\");case\"Ellipsis\":throw qr(\"...\");case\"For\":throw ec();case\"EmptyRangeEnd\":throw wm();case\"Err\":throw wD(t.error);default:throw`Unexpected surface node ${t.type}.`}}function Ug(e){return Uo.hasOwnProperty(e)}function ZI(e){return e===\"ln\"||e===\"log\"||e===\"logbase\"}function vD(e){return e.type===\"Decimal\"&&e.val===\"2\"}function ED(e){return e.type!==\"Neg\"?!1:(e=e.args[0],e.type===\"Decimal\"&&e.val===\"1\")}function UI(e,t){let r=e.nodes,[n,i]=t.args,s=kt(e,n),o=lr(i),a=Ie(e,o);if(KI(n)){let u=Mn(i.span.input,i.span.start),l=e.setInput(e0(e),u);return r.SeededFunctionCall(s,[l].concat(a))}if(Er(n))return r.FunctionCall(s,a);if(n.type===\"Superscript\"){let[u,l]=n.args;if(u.type===\"Cmd\"){let c=u.val;if(Ug(c)||ZI(c)){if(vD(l))return r.Exponent([r.FunctionCall(c,a),kt(e,l)]);if(ED(l)&&Uo[c]!==void 0)return r.FunctionCall(Uo[c],a);throw Ug(c)?Zd(c):Qd(c===\"logbase\"?\"log\":c)}}}return r.Multiply([s,kt(e,i)])}function SD(e,t){let r=e.nodes;if(t.type===\"Seq\"){let o=!1,a=!1;for(let u=0;u<t.args.length;u++){if(t.args[u].type===\"With\")throw Ra();nu(t.args[u])?o=!0:a=!0}if(o&&a)throw Ra()}if(t.type===\"With\")throw ic();let n=lr(t),i=[],s=[];for(let o of n){if(!nu(o))throw sy();let a=r.AssignmentExpression(Ie(e,o.args)),u=a._symbol;if(s.indexOf(u)>=0)throw ly(u);s.push(u),i.push(a)}return i}function OD(e,t){let r=e.nodes;if(!Er(t.args[0]))throw md();return e=fp(e,{prefix:\"ec\",expr:e.setInput(r.Identifier(\"globalEventCount\"),Mn(t.span.input,t.span.start))}),r.UpdateRule(Ie(e,t.args))}function ND(e,t){let r=e.nodes,[n]=t.args,i=lr(n),s,o=[];e:for(s=0;s<i.length;s++){let u=i[s];switch(u.type){case\"Colon\":{let[l,c]=u.args;if(!QI(l))throw tm();if(c.type===\"With\"&&c.args[1].type===\"Seq\")throw Ra();o.push({condition:eo(e,l),if_expr:kt(e,c)});break}case\"Equals\":case\"Inequality\":case\"InequalityChain\":o.push({condition:eo(e,u),if_expr:r.Constant(ie(1,1))});break;default:break e}}if(s===0)throw Kd();if(s<i.length-1)throw em();let a=s===i.length-1?kt(e,i[s]):r.Constant(NaN);if(!r.Piecewise.chain)throw Ji();return r.Piecewise.chain(o,a)}function QI(e){return e.type===\"Equals\"||e.type===\"Inequality\"||e.type===\"InequalityChain\"}function eo(e,t){let r=e.nodes;switch(t.type){case\"Equals\":return r.Comparator[\"=\"](Ie(e,t.args));case\"Inequality\":return r.Comparator[t.symbol](Ie(e,t.args));case\"InequalityChain\":if(t.chain.length>1)throw ql();let{first:{symbol:n,args:[i,s]},chain:[{symbol:o,args:[a]}]}=t,u=Mn(t.span.input,t.span.start);return r.And([eo(e,ja(u,n,[i,s])),eo(e,ja(u,o,[s,a]))]);default:throw Te()}}function DD(e){let[t,r]=e.args;if(t.type===\"Superscript\"&&(t=t.args[0]),t.type===\"Cmd\"&&t.val===\"logbase\"&&r.type===\"Seq\"&&r.args.length===2){if(!Kn(r.args[0]))throw Fl(\"log\")}else if(!Kn(r))throw t.type===\"Cmd\"?Fl(t.val):Te()}function HI(e){return Rs(e.val)}function $I(e){let t=Rs(e.whole),r=Rs(e.num),n=Rs(e.den);return oi(t,$n(r,n))}function RD(e){if(e.type!==\"Call\")return!1;let t=e.args[0];for(;t.type===\"Superscript\"||t.type===\"Subscript\"||t.type===\"Prime\";)t=t.args[0];return t.type!==\"Cmd\"?!1:Ug(t.val)||ZI(t.val)}function nu(e){return e.type===\"Equals\"&&Er(e.args[0])}function wD(e){switch(e.type){case\"UnexpectedParseError\":case\"MissingBound\":case\"EmptyGroup\":case\"UnexpectedDifferential\":case\"UnexpectedEnd\":return Te();case\"InvalidOperatorName\":return Ud();case\"UnexpectedCloseDelimiter\":case\"MissingCloseDelimiter\":return $m(e.open,e.close);case\"UnrecognizedSymbol\":return e.val===\".\"?qr(e.val):El(e.val);case\"EmptyInput\":return rm();case\"BinaryOperatorMissingRight\":case\"BinaryOperatorMissingLeft\":return xa(e.val===\"%\"?\"% of\":e.val);case\"UnaryOperatorMissingLeft\":return Fd(e.val);case\"UnaryOperatorMissingRight\":return Bd(e.val);case\"UnexpectedSubscript\":return nm(e.base);case\"PercentMissingOf\":return Xm();case\"SumMissingBound\":return Lm();case\"ProductMissingBound\":return Am();case\"IntegralMissingBound\":return Vm();case\"SumMissingBody\":return km();case\"ProductMissingBody\":return zm();case\"IntegralMissingBody\":return Um();case\"DerivativeMissingBody\":return Hm();case\"IntegralMissingDifferential\":return Gm();case\"DifferentialWithSuperscript\":return qm();case\"FractionMissingNumerator\":return Vd();case\"FractionMissingDenominator\":return Gd();case\"FractionEmpty\":return qd();case\"EmptySuperscript\":return kd();case\"EmptySubscript\":return Bl();case\"InvalidSubscript\":return zd(e.val);case\"SuperscriptWithPrime\":return $d();case\"PrimeWithoutParen\":return Gl();case\"UnexpectedPrime\":return Vl();case\"EmptyRadical\":return Wd();case\"EmptyRadicalIndex\":return Yd();case\"EmptySquareBracket\":return Jd();case\"EmptyPipe\":return jd();case\"FunctionMissingArgument\":return Mr(e.val,1,0);case\"AdjacentNumbers\":return Ad(WI(e.args[0]),WI(e.args[1]));case\"TokenWithSubscript\":return Cd();case\"UnexpectedFor\":return ec();default:throw`Unexpected surface node ${e.type}.`}}function WI(e){switch(e.type){case\"Decimal\":return e.val;case\"MixedNumber\":return`${e.whole} ${e.num}/${e.den}`;default:let t=e;throw new Error(`Unexpected node type ${t.type}`)}}function Kn(e){switch(e.type){case\"Letter\":case\"Decimal\":case\"MixedNumber\":case\"Cmd\":case\"EmptyPiecewise\":return!0;case\"Neg\":{let r=e.args[0];for(;;)if(r.type===\"Pos\"||r.type===\"Paren\"&&!jI(r))r=r.args[0];else if(r.type===\"Neg\")r=r.args[0];else break;return r.type===\"Decimal\"||r.type===\"MixedNumber\"}case\"Pos\":return Kn(e.args[0]);case\"Paren\":return Kn(e.args[0]);case\"Juxt\":case\"Mul\":case\"Div\":return Kn(e.args[0])&&Kn(e.args[1]);case\"Subscript\":return Kn(e.args[0]);case\"Superscript\":case\"Frac\":case\"Add\":case\"Sub\":return Kn(e.args[0])&&Kn(e.args[1]);case\"Piecewise\":{let[r]=e.args;return r.type===\"Equals\"||r.type===\"Inequality\"||r.type===\"InequalityChain\"}case\"Call\":{let[r,n]=e.args;return Er(r)||nI(r)?!1:Kn(r)&&Kn(n)}case\"Derivative\":case\"Sqrt\":case\"Nthroot\":case\"Pipes\":case\"Bang\":return!1;case\"Equals\":case\"Inequality\":case\"InequalityChain\":case\"Tilde\":case\"ImplicitCall\":case\"Index\":case\"List\":case\"Seq\":case\"Integral\":case\"EmptyIntegral\":case\"Sum\":case\"Product\":case\"Colon\":case\"Ellipsis\":case\"For\":case\"With\":case\"Dot\":case\"PercentOf\":case\"Prime\":case\"EmptyRangeEnd\":case\"RightArrow\":return!1;default:throw`Unexpected surface node ${e.type}.`}}function KI(e){return e.type!==\"Cmd\"?!1:e.val===\"random\"||e.val===\"shuffle\"}function e0(e){let t=e.nodes.ExtendSeed(\"\",[e.nodes.Identifier(\"globalRandomSeed\"),e.nodes.Seed(e.nextSeed())]);if(!e.seedExtensions)return t;for(let{prefix:r,expr:n}of e.seedExtensions)t=e.nodes.ExtendSeed(r,[t,n]);return t}function fp(e,t){let r=e.seedExtensions||[];return oe(z({},e),{seedExtensions:r.concat(t)})}var LD=[[ko(\"(\"),Xe(\")\"),ko(\"\\\\{\"),Xe(\"\\\\}\"),ru(\"[\"),Xe(\"]\"),ko(\"(|\"),Xe(\"|)\"),Xe(\"Differential\"),Xe(\"End\")],[Xe(\"for\")],[ru(\"with\")],[zo(\"...\")],[Xe(\",\")],[zo(\":\")],[ru(\"->\")],[tu(\"with\")],[Xe(\"=\"),Xe(\">\"),Xe(\"<\"),Xe(\">=\"),Xe(\"<=\"),Xe(\"~\")],[tu(\"->\")],[Xe(\"+\"),Xe(\"-\")],[Xe(\"*\"),Xe(\"/\"),Xe(\"Decimal\"),Xe(\"MixedNumber\"),Xe(\"Letter\"),Xe(\"Cmd\"),Xe(\"TokenNode\"),Xe(\"%\"),ru(\"(\"),Xe(\"\\\\{\"),Xe(\"(|\"),Xe(\"Frac\"),Xe(\"Sqrt\"),Xe(\"Trig\"),Xe(\"Ln\"),Xe(\"Log\"),zo(\"Int\"),zo(\"Sum\"),zo(\"Prod\")],[ko(\"+\"),ko(\"-\")],[Xe(\"!\")],[Xe(\"SupSub\")],[tu(\"[\"),Xe(\".\")],[tu(\"(\")],[Xe(\"Err\")]],{leftPrec:dp,rightPrec:t0,initialPrec:s0}=zI(LD),r0={trailingComma:!1};function o0(e,t){let r=t?z(z({},r0),t):r0,n=Bi(e,r),i=AD(n);return i.type===\"Err\"&&i.error.type===\"EmptyGroup\"?j(i.span,sI()):i}function AD(e){return us(e,{isToplevel:!0})}function us(e,{isToplevel:t}={isToplevel:!1}){if(pp(e))return j(U(e,e),oI());let{state:r,tree:n}=Ht(e,0,{isToplevel:t});return n.type!==\"Err\"&&!pp(r)?Wg(r).tree:n}function A(e,t){return{state:e,tree:t}}function Ht(e,t,{isToplevel:r}={isToplevel:!1}){let n=e,i;if({state:n,tree:i}=CD(n),i.type===\"Err\")return A(n,i);if(!zg(e,n))throw new Error(\"Programming Error: parseInitial did not advance state.\");for(;!pp(n);){let s;if(gr(n,\"(\")&&!BD(i)?s=t0(\"(\"):s=dp(yr(n).type),t>=s)break;let o=n,a=_D(n,i,r)?dp(\",\")-1:t0(yr(n).type);if({state:n,tree:i}=FD(n,i,a),i.type===\"Err\")return A(n,i);if(!zg(o,n))throw new Error(\"Programming Error: parseSuccessor did not advance state.\")}return A(n,i)}function Hr(e){return e.type===\"UnexpectedDifferential\"||e.type===\"UnexpectedCloseDelimiter\"||e.type===\"UnexpectedEnd\"||e.type===\"BinaryOperatorMissingLeft\"}function CD(e){let t=e,r=yr(e),n=s0(r.type),i;switch(r.type){case\"+\":{if(e=ee(e),{state:e,tree:i}=Ht(e,n),i.type===\"Err\"){if(!Hr(i.error))return A(e,i);let o=U(t,e),a=j(o,Lg(r.val));return A(e,a)}return A(e,NT(U(t,e),[i]))}case\"-\":if(e=ee(e),{state:e,tree:i}=Ht(e,n),i.type===\"Err\"){if(!Hr(i.error))return A(e,i);let o=U(t,e),a=j(o,Lg(r.val));return A(e,a)}else return A(e,DT(U(t,e),[i]));case\"(\":return iu(e);case\"\\\\{\":return e=ee(e),gr(e,\"\\\\}\")?(e=ee(e),A(e,WT(U(t,e)))):({state:e,tree:i}=Ht(e,n),{state:e,tree:i}=su(t,e,i,\"\\\\{\",\"\\\\}\"),i.type===\"Err\"?A(e,i):A(e,$T(U(t,e),[i])));case\"[\":return e=ee(e),gr(e,\"]\")?(e=ee(e),A(e,vg(U(t,e),[]))):({state:e,tree:i}=Ht(e,n),{state:e,tree:i}=su(t,e,i,\"[\",\"]\"),i.type===\"Err\"?A(e,i):A(e,vg(U(t,e),[i])));case\"(|\":{if(e=ee(e),gr(e,\"|)\")){e=ee(e);let o=U(t,e);return A(e,j(o,lI()))}return{state:e,tree:i}=Ht(e,n),{state:e,tree:i}=su(t,e,i,\"(|\",\"|)\"),i.type===\"Err\"?A(e,i):A(e,FT(U(t,e),[i]))}case\"Frac\":{if(e.opts.disallowFrac)throw Kl();e=ee(e);let o=us(Bi(r.num,e.opts)),a=us(Bi(r.den,e.opts));if(o.type===\"Err\"&&o.error.type===\"EmptyGroup\"&&a.type===\"Err\"&&a.error.type===\"EmptyGroup\"){let u=U(t,e),l=j(u,RI());return A(e,l)}if(o.type===\"Err\"&&o.error.type===\"EmptyGroup\"){let u=U(t,e),l=j(u,NI());return A(e,l)}if(a.type===\"Err\"&&a.error.type===\"EmptyGroup\"){let u=U(t,e),l=j(u,DI());return A(e,l)}if(o.type===\"Err\")return A(e,o);if(a.type===\"Err\")return A(e,a);if(iI(o,a)&&a.type===\"Juxt\"){let u=a.args[1],l;if({state:e,tree:l}=Ht(e,dp(\"*\")-1),l.type===\"Err\"){if(Hr(l.error)){let c=U(t,e);return A(e,j(c,EI()))}return A(e,l)}return A(e,qT(U(t,e),[u,l]))}return A(e,GT(U(t,e),[o,a]))}case\"Sqrt\":if(e=ee(e),r.optArg){let o=us(Bi(r.optArg,e.opts));if(o.type===\"Err\")return o.error.type===\"EmptyGroup\"?A(e,j(o.span,cI())):A(e,o);let a=us(Bi(r.arg,e.opts));return a.type===\"Err\"?a.error.type===\"EmptyGroup\"?A(e,j(a.span,Rg())):A(e,a):A(e,VT(U(t,e),[o,a]))}else{let o=us(Bi(r.arg,e.opts));return o.type===\"Err\"?o.error.type===\"EmptyGroup\"?A(e,j(o.span,Rg())):A(e,o):A(e,BT(U(t,e),[o]))}case\"Trig\":case\"Ln\":{e=ee(e);let o=Qs(U(t,e),r.val),a=0,u=yr(e);if(u.type===\"SupSub\"){if(e=ee(e),u.sub){let p=U(t,e),f=j(p,gI(o.val));return A(e,f)}let c=mp(u,e.opts);if(c){if(c.type===\"Err\")return A(e,c);o=sp(U(t,e),[o,c])}a=u.nprimes}let l=gr(e,\"(\");if(l){if({state:e,tree:i}=iu(e),i.type===\"Err\")return A(e,i);i=Za(U(t,e),[o,i.args[0]])}else{if({state:e,tree:i}=Ht(e,n-1),i.type===\"Err\")return Hr(i.error)?A(e,j(U(t,e),Cg(r.val))):A(e,i);i=Ig(U(t,e),[o,i])}if(a>0){let c=U(t,e);if(!l){let p=j(c,_g());return A(e,p)}i=Qa(c,a,[i])}return A(e,i)}case\"Log\":{e=ee(e);let o=U(t,e),a=Qs(o,r.val),u=0,l,c,p=yr(e);if(p.type===\"SupSub\"&&(e=ee(e),l=a0(p,e.opts),c=mp(p,e.opts),u=p.nprimes),l&&l.type===\"Err\")return A(e,l);if(c&&c.type===\"Err\")return A(e,c);let f=gr(e,\"(\");if(f){if({state:e,tree:i}=iu(e),i.type===\"Err\")return A(e,i);i=i.args[0]}else if({state:e,tree:i}=Ht(e,n-1),i.type===\"Err\")return Hr(i.error)?A(e,j(U(t,e),Cg(r.val))):A(e,i);let m=l?Qs(o,\"\\\\logbase\"):a,d=l?op(U(t,e),lr(i).concat(l)):i;if(c&&(m=sp(U(t,e),[m,c])),f?i=Za(U(t,e),[m,d]):i=Ig(U(t,e),[m,d]),u>0){let y=U(t,e);if(!f){let g=j(y,_g());return A(e,g)}i=Qa(y,u,[i])}return A(e,i)}case\"Int\":{e=ee(e);let o=yr(e);e=ee(e);let a=$g(o,t,e);if(a.type===\"Err\")return a.error.type===\"MissingBound\"?A(e,j(a.span,TI())):A(e,a);let{sup:u,sub:l}=a,c;if(gr(e,\"Differential\"))return{state:e,tree:c}=i0(e),c.type===\"Err\"?A(e,c):A(e,zT(U(t,e),[c,l,u]));if({state:e,tree:i}=Ht(e,n),i.type===\"Err\")return Hr(i.error)?A(e,j(i.span,vI())):A(e,i);let p=i;return gr(e,\"Differential\")?({state:e,tree:c}=i0(e),c.type===\"Err\"?A(e,c):A(e,kT(U(t,e),[c,l,u,p]))):A(e,j(U(t,e),SI()))}case\"Sum\":{e=ee(e);let o=yr(e);e=ee(e);let a=$g(o,t,e);if(a.type===\"Err\")return a.error.type===\"MissingBound\"?A(e,j(a.span,xI())):A(e,a);let{sup:u,sub:l}=a;return{state:e,tree:i}=Ht(e,n),i.type===\"Err\"?Hr(i.error)?A(e,j(i.span,II())):A(e,i):A(e,UT(U(t,e),[i,l,u]))}case\"Prod\":{e=ee(e);let o=yr(e);e=ee(e);let a=$g(o,t,e);if(a.type===\"Err\")return a.error.type===\"MissingBound\"?A(e,j(a.span,PI())):A(e,a);let{sup:u,sub:l}=a;return{state:e,tree:i}=Ht(e,n),i.type===\"Err\"?Hr(i.error)?A(e,j(i.span,MI())):A(e,i):A(e,HT(U(t,e),[i,l,u]))}case\"Cmd\":return e=ee(e),i=Qs(U(t,e),r.val),A(e,i);case\"TokenNode\":{e=ee(e);let o=yr(e);return o.type===\"SupSub\"&&o.sub?(e=ee(e),A(e,j(U(t,e),LI()))):(i=Qs(U(t,e),r.val),A(e,i))}case\"Letter\":return e=ee(e),i=eI(U(t,e),r.val),A(e,i);case\"Decimal\":{e=ee(e);let o=ap(U(t,e),r.val),a=e.token;if(a.type===\"Decimal\"||a.type===\"MixedNumber\"){let u=e;e=ee(e);let l=U(t,e),c=a.type===\"MixedNumber\"?a:ap(U(u,e),a.val);return A(e,j(l,Bg([o,c])))}return A(e,o)}case\"MixedNumber\":{if(e.opts.disallowFrac)throw Kl();e=ee(e);let o=e.token;if(o.type===\"Decimal\"||o.type===\"MixedNumber\"){let a=e;e=ee(e);let u=U(t,e),l=o.type===\"MixedNumber\"?o:ap(U(a,e),o.val);return A(e,j(u,Bg([r,l])))}return A(e,r)}case\"*\":case\"/\":case\",\":case\"=\":case\">\":case\"<\":case\">=\":case\"<=\":case\"->\":case\"~\":case\":\":case\"...\":case\"%\":case\".\":{e=ee(e);let o=U(t,e),a=j(o,pI(r.val));return A(e,a)}case\"for\":{e=ee(e);let o=U(t,e),a=j(o,wI());return A(e,a)}case\"with\":{e=ee(e);let o=U(t,e),a=j(o,Ng());return A(e,a)}case\"!\":{e=ee(e);let o=U(t,e),a=j(o,Ag(r.val));return A(e,a)}case\"SupSub\":{e=ee(e);let o=\"supsub\";r.sub?o=\"subscript\":r.sup?o=\"superscript\":r.nprimes>0&&(o=\"prime\");let a=U(t,e),u=j(a,Ag(o));return A(e,u)}case\")\":case\"\\\\}\":case\"]\":case\"|)\":case\"Differential\":return Wg(e);case\"Err\":{e=ee(e);let o=U(t,e),a=j(o,mI(r.val));return A(e,a)}case\"End\":{let o=U(t,e),a=j(o,wg());return A(e,a)}default:throw`Unexpected token type ${r.type}.`}}function _D(e,t,r){return gr(e,\"=\")&&r&&(JI(t)||Hg(t))}function FD(e,t,r){let n=yr(e),i;switch(n.type){case\"+\":case\"-\":case\"*\":case\"/\":case\"=\":case\"~\":case\":\":case\".\":case\"->\":case\"for\":{if(e=ee(e),{state:e,tree:i}=Ht(e,r),i.type===\"Err\")if(Hr(i.error)){let o=qt(t.span,e),a=j(o,os(n.val));return A(e,a)}else return A(e,i);return A(e,n0(n.type,qt(t.span,e),[t,i]))}case\"with\":{if(e=ee(e),{state:e,tree:i}=Ht(e,r),i.type===\"Err\")if(Hr(i.error)){let o=qt(t.span,e),a=j(o,os(n.val));return A(e,a)}else return A(e,i);return A(e,n0(n.type,qt(t.span,e),[t,i]))}case\"%\":{e=ee(e);let o=yr(e);if(o.type!==\"Cmd\"||o.val!==\"of\"&&o.val!==\"\\\\of\"){let a=j(n.span,hI());return A(e,a)}if(e=ee(e),{state:e,tree:i}=Ht(e,r),i.type===\"Err\")if(Hr(i.error)){let a=qt(t.span,e),u=j(a,os(n.val));return A(e,u)}else return A(e,i);return A(e,QT(qt(t.span,e),[t,i]))}case\">=\":case\"<=\":case\">\":case\"<\":{let o=n.type;if(e=ee(e),{state:e,tree:i}=Ht(e,r),i.type===\"Err\")if(Hr(i.error)){let c=qt(t.span,e),p=j(c,os(n.val));return A(e,p)}else return A(e,i);let a=ja(qt(t.span,e),o,[t,i]),u=[],l=yr(e).type;for(;l===\">=\"||l===\"<=\"||l===\">\"||l===\"<\";){let c=e;if(o=l,e=ee(e),{state:e,tree:i}=Ht(e,r),i.type===\"Err\")if(Hr(i.error)){let p=qt(t.span,e),f=j(p,os(n.val));return A(e,f)}else return A(e,i);u.push(ET(U(c,e),o,[i])),l=yr(e).type}return u.length?A(e,ST(qt(t.span,e),a,u)):A(e,a)}case\"!\":return e=ee(e),A(e,CT(qt(t.span,e),[t]));case\"[\":{let o=e;if(e=ee(e),gr(e,\"]\")){e=ee(e);let a=U(o,e);return A(e,j(a,uI()))}return{state:e,tree:i}=Ht(e,r),{state:e,tree:i}=su(o,e,i,\"[\",\"]\"),i.type===\"Err\"?A(e,i):A(e,_T(qt(t.span,e),[t,i]))}case\"Sqrt\":case\"Frac\":case\"Letter\":case\"Cmd\":case\"TokenNode\":case\"Trig\":case\"Ln\":case\"Log\":case\"Sum\":case\"Int\":case\"Prod\":case\"Decimal\":case\"MixedNumber\":case\"\\\\{\":case\"(|\":return{state:e,tree:i}=Ht(e,r),i.type===\"Err\"?A(e,i):A(e,Og(qt(t.span,e),[t,i]));case\"(\":if(Er(t)){if({state:e,tree:i}=iu(e),i.type===\"Err\")return A(e,i);let o=qt(t.span,e);return A(e,Za(o,[t,i.args[0]]))}else if(t.type===\"Prime\"&&Er(t.args[0])){if({state:e,tree:i}=iu(e),i.type===\"Err\")return A(e,i);let o=qt(t.span,e);return A(e,Qa(o,t.nprimes,[Za(o,[t.args[0],i.args[0]])]))}else return{state:e,tree:i}=Ht(e,r),i.type===\"Err\"?A(e,i):A(e,Og(qt(t.span,e),[t,i]));case\"SupSub\":{e=ee(e);let o=u0(n),a=mp(n,e.opts);if(o&&o.type===\"Err\")return A(e,o);if(a&&a.type===\"Err\")return A(e,a);if(o&&(t=Eg(qt(t.span,e),[t,o])),a&&(t=sp(qt(t.span,e),[t,a])),n.nprimes>0){let u=qt(t.span,e);if(!Er(t)){let l=j(u,up());return A(e,l)}t=Qa(u,n.nprimes,[t])}return A(e,t)}case\",\":{let o=[t];for(;gr(e,\",\")&&(e=ee(e),!(gr(e,\"...\")||e.opts.trailingComma&&VD(e)));){if({state:e,tree:i}=Ht(e,r),i.type===\"Err\")if(Hr(i.error)){let a=qt(t.span,e),u=j(a,os(n.val));return A(e,u)}else return A(e,i);o.push(i)}return A(e,op(qt(t.span,e),o))}case\"...\":{if(e=ee(e),gr(e,\",\")&&(e=ee(e)),r>=dp(yr(e).type))return A(e,Sg(qt(t.span,e),[t,YT(qg(e))]));if({state:e,tree:i}=Ht(e,r),i.type===\"Err\")if(Hr(i.error)){let o=qt(t.span,e),a=j(o,os(n.val));return A(e,a)}else return A(e,i);return A(e,Sg(qt(t.span,e),[t,i]))}case\"]\":case\")\":case\"\\\\}\":case\"|)\":case\"Differential\":return Wg(e);case\"Err\":return Ht(e,r);case\"End\":{let o=U(e,e),a=j(o,wg());return A(e,a)}default:throw`Unexpected token type ${n.type}.`}}function BD(e){return!!(Er(e)||e.type===\"Prime\"&&Er(e.args[0]))}function n0(e,t,r){switch(e){case\"+\":return RT(t,r);case\"-\":return wT(t,r);case\"*\":return LT(t,r);case\"/\":return AT(t,r);case\"=\":return vT(t,r);case\"~\":return OT(t,r);case\":\":return XT(t,r);case\".\":return ZT(t,r);case\"->\":return KT(t,r);case\"for\":return JT(t,r);case\"with\":return jT(t,r);default:throw`Unexpected token type ${e}.`}}function a0(e,t){if(!e.sub)return;let r=e.sub,n=us(Bi(r,t));return n.type===\"Err\"&&n.error.type===\"EmptyGroup\"?j(n.span,Dg()):n}function u0(e){if(!e.sub)return;let t=e.sub;if(t.args.length===0)return j(t.span,Dg());let r=[];for(let n of t.args)if(n.type===\"Digit\"||n.type===\"Letter\")r.push(n.val);else{let i=n.span;return j(i,yI(Pr(i)))}return tI(t.span,r.join(\"\"))}function mp(e,t){if(!e.sup)return;let r=us(Bi(e.sup,t));return r.type===\"Err\"?r.error.type===\"EmptyGroup\"?j(r.span,aI()):r:e.nprimes>0?j(e.span,bI()):r}function $g(e,t,r){if(e.type!==\"SupSub\"){let s=U(t,r);return j(s,Fg())}if(e.nprimes>0){let s=U(t,r);return j(s,up())}let n=a0(e,r.opts),i=mp(e,r.opts);if(!n||n.type===\"Err\"&&n.error.type===\"EmptySubscript\"||!i||i.type===\"Err\"&&i.error.type===\"EmptySuperscript\"){let s=U(t,r);return j(s,Fg())}return n.type===\"Err\"?n:i.type===\"Err\"?i:{type:\"Bounds\",sup:i,sub:n}}function iu(e){let t=e,r=yr(e),n=s0(r.type);if(gr(e,\"(\"))e=ee(e);else throw new Error(\"Programming Error: expected '(' at start of parseParen.\");if(gr(e,\")\")){let s=op(qg(e),[]);e=ee(e);let o=U(t,e);return A(e,Mg(o,[s]))}let i;return{state:e,tree:i}=Ht(e,n),{state:e,tree:i}=su(t,e,i,\"(\",\")\"),i.type===\"Err\"?A(e,i):A(e,Mg(U(t,e),[i]))}function i0(e){let t=e,r=yr(e);if(r.type!==\"Differential\")throw new Error(\"Programming Error: expected differential\");e=ee(e);let n=Qs(r.span,r.val),i=yr(e);if(i.type===\"SupSub\"){e=ee(e);let s=U(t,e),o=u0(i);if(o){if(o.type===\"Err\")return A(e,o);n=Eg(s,[n,o])}if(i.sup)return A(e,j(s,OI()));if(i.nprimes>0)return A(e,j(s,up()))}return A(e,n)}function su(e,t,r,n,i){if(r.type===\"Err\"&&r.error.type!==\"UnexpectedEnd\")return A(t,r);if(r.type===\"Err\"||!gr(t,i)){let s=U(e,t),o=j(s,fI(n,i));return A(t,o)}return t=ee(t),A(t,r)}function Wg(e){let t=e;switch(yr(e).type){case\")\":{e=ee(e);let n=U(t,e);return A(e,j(n,Ka(\"(\",\")\")))}case\"]\":{e=ee(e);let n=U(t,e);return A(e,j(n,Ka(\"[\",\"]\")))}case\"\\\\}\":{e=ee(e);let n=U(t,e);return A(e,j(n,Ka(\"\\\\{\",\"\\\\}\")))}case\"|)\":{e=ee(e);let n=U(t,e);return A(e,j(n,Ka(\"|\",\"|\")))}case\"Differential\":{e=ee(e);let n=U(t,e);return A(e,j(n,dI()))}default:{e=ee(e);let n=U(t,e);return A(e,j(n,Ng()))}}}function VD(e){return gr(e,\")\")||gr(e,\"]\")||gr(e,\"\\\\}\")}function GD(){throw Ji()}function qD(e,t){return e.setInputSpan(t),e}function Ti(e,t={}){let r=typeof e;if(r!==\"string\")throw new Error(`Type Error: parse can only be called with strings, got ${JSON.stringify(e)} of type ${r}`);let n=b;if(t.disabledFeatures){n=Object.create(n);for(let l of t.disabledFeatures){if(!n[l])throw new Error(`Programming Error: ${l} cannot be disabled because it is not a parsenode.`);n[l]=GD}}let i=t.seedPrefix===void 0?\"\":t.seedPrefix,s=0,o=()=>{let l=`${i}::vc${s}`;return s+=1,l},a={nodes:n,currentIndex:t.index,setInput:qD,nextSeed:o,allowDt:!!t.allowDt,allowIndex:!!t.allowIndex,writeIntegral:!!t.writeIntegral},u={};t.trailingComma!==void 0&&(u.trailingComma=t.trailingComma),t.disallowFrac&&(u.disallowFrac=!0);try{let l=TT(e),c=o0(l,u);return YI(a,c)}catch(l){return l instanceof b.Error?l:typeof l==\"string\"?new b.Error(l):Te()}}function zD(e,t,r){return{chunk:e,argMap:t,start:r}}function ls(e,t,r,n){let i=zD(e,[t],r);return ou(i,n)}function ou(e,t){let{chunk:r,argMap:n,start:i}=e;if(t<i)return t;let s=n[t-i];if(s!==void 0)return s;let o=UD(e,t);e.argMap[t-i]=o;let a=r.getInstruction(t);if(_r(a))switch(a.type){case 21:case 19:break;case 17:{let l=a.args.length-2;for(let c=0;c<l;c++)ou(e,t+1+c);break}default:let u=a;throw new Error(`Programming Error. Unexpected OpCode: ${u.type}`)}else if(mr(a)){let u=a.args.length-1;for(let l=0;l<u;l++)ou(e,t+1+l)}return o}function UD(e,t){let{chunk:r,start:n}=e,i=r.getInstruction(t);if(mr(i)){let a=i.args[0];for(let u=a;u<=t;u++){let l=r.getInstruction(u);if(!ne(l))for(let c of l.args)c<a&&ou(e,c)}}if(ne(i))return Ln(r,i);let s=[];for(let a of i.args)s.push(ou(e,a));let o=e.argMap[t-n];return o!==void 0?o:Lt(r,i,s)}var Fr={};function Ho(e,t){return Yg(e,t).freeDependencies}function Yg(e,t){let r={};return t.type===\"FunctionDefinition\"&&(t=t._expression),Xg(e,t,r)}function l0(e,t,r){let n=[],i=[],s=[],o=[],a=[];for(let u of t.scopes){let l=l0(e,u,r);for(let c of l.freeDependencies)n.indexOf(c)===-1&&t.definitions.indexOf(c)===-1&&n.push(c);for(let c of l.substitutionDependencies)o.indexOf(c)===-1&&t.definitions.indexOf(c)===-1&&o.push(c);for(let c of l.substitutionBodyDependencies)a.indexOf(c)===-1&&t.definitions.indexOf(c)===-1&&a.push(c);for(let c of l.updateSymbols)i.indexOf(c)===-1&&i.push(c);for(let c of l.substitutionSymbols)s.indexOf(c)===-1&&s.push(c)}for(let u of t.dependencies){if(t.definitions.indexOf(u)!==-1)continue;let l=HD(e,u,r),c=t.substitutionDependencies.indexOf(u)!==-1;for(let p of l.freeDependencies)n.indexOf(p)===-1&&t.definitions.indexOf(p)===-1&&n.push(p),c&&o.indexOf(p)===-1&&t.definitions.indexOf(p)===-1&&o.push(p),t.isSubstitutionBody&&a.indexOf(p)===-1&&t.definitions.indexOf(p)===-1&&a.push(p);for(let p of l.substitutionDependencies)o.indexOf(p)===-1&&t.definitions.indexOf(p)===-1&&o.push(p);for(let p of l.updateSymbols)i.indexOf(p)===-1&&i.push(p);for(let p of l.substitutionSymbols)s.indexOf(p)===-1&&s.push(p)}return{freeDependencies:n,updateSymbols:i,substitutionSymbols:s,substitutionDependencies:o,substitutionBodyDependencies:a}}function Xg(e,t,r){if(t.type===\"Slider\"||t.type===\"Assignment\")return Xg(e,t._expression,r);{let{freeDependencies:n,substitutionDependencies:i,updateSymbols:s,substitutionSymbols:o,substitutionBodyDependencies:a}=l0(e,t.getScope(),r),u=t.getUpdateSymbols();if(u.length>0){s=s.slice();for(let c of u)s.indexOf(c)===-1&&s.push(c)}let l=t.getSubstitutionSymbols();if(l.length>0){o=o.slice();for(let c of l)o.indexOf(c)===-1&&o.push(c)}return{freeDependencies:n,updateSymbols:s,substitutionSymbols:o,substitutionDependencies:i,substitutionBodyDependencies:a}}}function HD(e,t,r){if(r[t])return r[t];if(fe[t])return r[t]={freeDependencies:[],updateSymbols:[],substitutionSymbols:[],substitutionDependencies:[],substitutionBodyDependencies:[]},r[t];let n=e[t];return n?(r[t]={freeDependencies:[t],updateSymbols:[],substitutionSymbols:[],substitutionDependencies:[],substitutionBodyDependencies:[]},r[t]=Xg(e,n,r),r[t]):(r[t]={freeDependencies:[t],updateSymbols:[],substitutionSymbols:[],substitutionDependencies:[],substitutionBodyDependencies:[]},r[t])}function c0(e,t){for(var r={},n=t.getDependencies().slice();n.length;){var i=n.pop();if(!r.hasOwnProperty(i)){var s=e[i];if(s===Fr)return;r[i]=s,s&&s.getDependencies&&Array.prototype.push.apply(n,s.getDependencies())}}return $D(r)}function $D(e){let t=[];for(let r in e)t.push([r,e[r]]);return t}function au(e,t,r){let n=e.getInstruction(t);if(!pe(n.valueType,I)&&!pe(n.valueType,w))throw od([Z(n.valueType)]);let i=e.getInstruction(r);if(!pe(i.valueType,I)&&i.type!==0)throw Te();let s=e.Constant(0);if(t<r)return s;let o=e.Constant(1),a=e.Constant(NaN),u=qo(e,r),l=eR(e,t);e.derivativeMaps[r]||(e.derivativeMaps[r]={maxValidReference:e.instructionsLength()-1,map:[]});let{map:c,maxValidReference:p}=e.derivativeMaps[r];for(let y=0;y<c.length;y++){let g=c[y];g!==void 0&&g>p&&(c[y]=void 0)}let f=[],m=!1;for(let y=0;y<r;y++)f[y]=y,c[y]=s;return Jg({chunk:e,derivativeVarIndex:r,forwardMask:u,backwardMask:l,valueMap:f,derivativeMap:c,mustCopy:m,ZERO:s,ONE:o,NAN:a},r,t),e.derivativeMaps[r].maxValidReference=e.instructionsLength()-1,c[t]}function Jg(e,t,r){let{chunk:n,valueMap:i,derivativeMap:s,backwardMask:o}=e;for(let a=t;a<=r;a++){let u=s[a];if(u!==void 0)if(n.getInstruction(u).type===0)s[a]=void 0;else{i[a]=yp(e,a);continue}if(!o[a]){i[a]=yp(e,a);continue}let l=n.getInstruction(a);if(_r(l)&&l.endIndex!==-1)switch(l.type){case 19:{a=WD(e,a);continue}case 17:case 21:{a=JD(e,a);continue}}i[a]=yp(e,a),s[a]=jD(e,a)}return r}function WD(e,t){let{chunk:r,forwardMask:n,valueMap:i,derivativeMap:s,ZERO:o}=e,a=r.getInstruction(t),u=a.endIndex,l=r.getInstruction(u),c=o;if(n[a.args[1]]){let p=i[a.args[1]];c=r.Add([c,r.Multiply([s[a.args[1]],ls(r,p,t,l.args[1])])])}if(n[a.args[0]]){let p=i[a.args[0]];c=r.Subtract([c,r.Multiply([s[a.args[0]],ls(r,p,t,l.args[1])])])}if(YD(r,t,n)){let p=i.slice();p[t]=Lt(r,a,[p[a.args[0]],p[a.args[1]]]),s[t]=o,Jg(oe(z({},e),{valueMap:p,mustCopy:!0}),t+1,u-1);let f=Lt(r,l,[p[l.args[0]],s[l.args[1]]]);s[u]=f,c=r.Add([c,Lt(r,r.getInstruction(u+1),[f])])}else for(let p=t;p<=u;p++)s[p]=o;if(XD(r,t,i)){let p=oe(z({},e),{mustCopy:!0});for(let f=t;f<=u+1;f++)i[f]=yp(p,f)}else for(let p=t;p<=u+1;p++)i[p]=p;return s[u+1]=c,u+l.args.length-1}function YD(e,t,r){let n=e.getInstruction(t),i=e.getInstruction(n.endIndex);if(i.args[1]<t+1)return r[i.args[1]];for(let s=t+1;s<=i.args[1];s++){let o=e.getInstruction(s);if(!ne(o)){for(let a of o.args)if(a<t&&r[a])return!0}}return!1}function XD(e,t,r){let n=e.getInstruction(t);for(let i=t;i<=n.endIndex;i++){let s=e.getInstruction(i);if(!ne(s)){for(let o of s.args)if(r[o]!==o)return!0}}return!1}function JD(e,t){let{chunk:r,derivativeMap:n,valueMap:i,ZERO:s}=e,o=r.getInstruction(t),a=o.endIndex,u=r.getInstruction(a),l;if(o.type===21)i[t]=Lt(r,o,[i[o.args[0]]]),n[t]=s,l=t+1;else{let p=[];p.push(i[o.args[0]],i[o.args[1]]);for(let f=2;f<o.args.length;f++)p.push(i[o.args[f]],n[o.args[f]]);i[t]=Lt(r,o,p),n[t]=s;for(let f=2;f<o.args.length;f++)i[t+f-1]=Lt(r,r.getInstruction(t+f-1),[i[t]]),n[t+f-1]=Lt(r,r.getInstruction(t+f-1),[i[t]]);l=t+o.args.length-1}Jg(oe(z({},e),{mustCopy:!0}),l,a-1);let c=[];c.push(i[u.args[0]]);for(let p=1;p<u.args.length;p++)c.push(i[u.args[p]],n[u.args[p]]);i[a]=Lt(r,u,c),n[a]=s;for(let p=1;p<u.args.length;p++)i[a+p]=Lt(r,r.getInstruction(a+p),[i[a]]),n[a+p]=Lt(r,r.getInstruction(a+p),[i[a]]);return a+u.args.length-1}function yp(e,t){let{chunk:r,valueMap:n,mustCopy:i}=e,s=r.getInstruction(t);if(ne(s))return i?Ln(r,s):t;{let o=[],a=!1;for(let u of s.args)o.push(n[u]),n[u]!==u&&(a=!0);return a||i?Lt(r,s,o):t}}function jD(e,t){let{chunk:r,derivativeVarIndex:n,forwardMask:i,valueMap:s,derivativeMap:o,ZERO:a,ONE:u,NAN:l}=e,c=r.getInstruction(t);if(t===n)if(k(c.valueType)){let f=xr(r,t),m=r.BeginBroadcast([f]),d=r.EndBroadcast([m,u]);return r.BroadcastResult(Y,[d])}else return u;if(_r(c)||mr(c)||c.type===47||c.type===48||c.type===23||c.type===25||c.type===24||c.type===27||c.type===26||c.type===30||c.type===42||c.type===44||c.type===49)return a;if(!i[t]||ne(c))return c.valueType!==I?QD(r,[s[t],a]):c.type!==1||isFinite(F(c.value))?a:l;if(c.type===38||c.type===15){let f=[];for(let m of c.args)f.push(o[m]);return Lt(r,c,f)}if(c.type===31)return Lt(r,c,[s[c.args[0]],o[c.args[1]],o[c.args[2]]]);let p=a;for(let f=0;f<c.args.length;f++){if(!i[c.args[f]])continue;let m=o[c.args[f]];if(m===a)continue;let d=ZD(e,s[t],f,m);d!==a&&(p=p===a?d:KD(r,[d,p]))}return p}function ZD(e,t,r,n){let{chunk:i,ZERO:s,ONE:o,NAN:a}=e,u=i.getInstruction(t);switch(u.type){case 8:return n;case 9:switch(r){case 0:return n;default:return i.Negative([n])}case 10:switch(r){case 0:return i.Multiply([n,u.args[1]]);default:return i.Multiply([u.args[0],n])}case 11:switch(r){case 0:return i.Divide([n,u.args[1]]);default:return i.Multiply([u.args[0],i.Divide([i.Negative([n]),i.Multiply([u.args[1],u.args[1]])])])}case 14:return i.Negative([n]);case 12:case 13:switch(r){case 0:return i.Multiply([i.Multiply([u.args[1],i.Exponent([u.args[0],i.Subtract([u.args[1],o])])]),n]);default:return i.Multiply([i.Piecewise([i.Equal([u.args[0],s]),i.Piecewise([i.GreaterEqual([u.args[1],s]),s,a]),i.Multiply([i.SyntheticNativeFunction(\"ln\",[u.args[0]]),t])]),n])}case 37:return tR(i,t,f0[u.symbol][r],n);case 39:case 40:case 41:case 16:switch(r){case 0:return Lt(i,u,[n,u.args[1]]);default:return s}default:{let l=u;throw new Error(`Unimplemented derivative for opcode ${l.type}`)}}}function QD(e,t){switch(e.getInstruction(t[0]).valueType){case ue:return e.SyntheticNativeFunction(\"scaleTangentSegment\",t);case J:return e.SyntheticNativeFunction(\"scaleTangentLine\",t);case ge:return e.SyntheticNativeFunction(\"scaleTangentRay\",t);case Q:return e.SyntheticNativeFunction(\"scaleTangentCircle\",t);case X:return e.SyntheticNativeFunction(\"scaleTangentArc\",t);default:return e.Multiply(t)}}function KD(e,t){switch(e.getInstruction(t[0]).valueType){case ue:return e.SyntheticNativeFunction(\"addTangentSegment\",t);case J:return e.SyntheticNativeFunction(\"addTangentLine\",t);case ge:return e.SyntheticNativeFunction(\"addTangentRay\",t);case Q:return e.SyntheticNativeFunction(\"addTangentCircle\",t);case X:return e.SyntheticNativeFunction(\"addTangentArc\",t);default:return e.Add(t)}}function eR(e,t){let r=[];for(let n=0;n<t;n++)r.push(!1);r.push(!0);for(let n=t;n>=0;n--){if(!r[n])continue;let i=e.getInstruction(n);if(!ne(i))if(i.type===31)r[i.args[1]]=!0,r[i.args[2]]=!0;else for(let s of i.args)r[s]=!0}return r}function tR(e,t,r,n){let i=Object.create(fe),s=La({},{},-1),a=e.getInstruction(t).args;for(let u=0;u<a.length;u++){let l=rR[u];Kr(s,l,a[u]),i[l]=Fr}return Kr(s,\"x_1\",n),i.x_1=Fr,Kr(s,\"q\",t),i.q=Fr,ce($r(ep,i,e,s,void 0,{}),r)}var rR=[\"x\",\"y\",\"z\",\"u\"],p0={exp:[\"q*x_1\"],ln:[\"\\\\{x >= 0: x_1/x \\\\}\"],log:[\"\\\\{x >= 0: x_1/(x*\\\\ln(10)) \\\\}\"],sqrt:[\"x_1/(2*q)\"],rtxsqpone:[\"x*x_1/q\"],rtxsqmone:[\"x*x_1/q\"],sin:[\"\\\\cos(x)*x_1\"],cos:[\"-\\\\sin(x)*x_1\"],tan:[\"(1+q^2)*x_1\"],arcsin:[\"x_1/\\\\sqrt{1 - x^2}\"],arccos:[\"-x_1/\\\\sqrt{1 - x^2}\"],sinh:[\"\\\\cosh(x)*x_1\"],cosh:[\"\\\\sinh(x)*x_1\"],tanh:[\"(\\\\sech(x))^2*x_1\"],arcsinh:[\"x_1/\\\\rtxsqpone(x)\"],arccosh:[\"\\\\{ x > 0: x_1/\\\\rtxsqmone(x) \\\\}\"],arctanh:[\"\\\\{ \\\\abs(x) < 1: x_1/(1 - x^2) \\\\}\"],csc:[\"-\\\\cot(x)*q*x_1\"],sec:[\"\\\\tan(x)*q*x_1\"],cot:[\"-(1+q^2)*x_1\"],arccsc:[\"-x_1/(\\\\abs(x)*\\\\rtxsqmone(x))\"],arcsec:[\"x_1/(\\\\abs(x)*\\\\rtxsqmone(x))\"],arccot:[\"-x_1/(1+x^2)\"],csch:[\"-\\\\coth(x)*q*x_1\"],sech:[\"-\\\\tanh(x)*q*x_1\"],coth:[\"-(\\\\csch(x))^2*x_1\"],arccsch:[\"-x_1/(\\\\abs(x)*\\\\rtxsqpone(x))\"],arcsech:[\"\\\\{ x >= 0: -x_1/(x*\\\\sqrt{1 - x^2}) \\\\}\"],arccoth:[\"\\\\{ \\\\abs(x) > 1 : x_1/(1 - x^2) \\\\}\"],factorial:[\"q*\\\\polyGamma(0, x + 1)*x_1\"],floor:[\"\\\\{ q=x: 0/0, 0*x_1 \\\\}\"],ceil:[\"\\\\{ q=x: 0/0, 0*x_1 \\\\}\"],round:[\"\\\\{ \\\\abs(\\\\mod(x, 1) - 0.5) > 0: 0*x_1 \\\\}\"],abs:[\"\\\\{ x=0: 0/0, \\\\sign(x)*x_1 \\\\}\"],sign:[\"\\\\{ x=0: 0/0, 0*x_1 \\\\}\"],distance:[\"-((y.x-x.x)*x_1.x+(y.y-x.y)*x_1.y)/q\",\"((y.x-x.x)*x_1.x+(y.y-x.y)*x_1.y)/q\"],pointDet:[\"\\\\pointDet(x_1,y)\",\"\\\\pointDet(x,x_1)\"],pointDot:[\"\\\\pointDot(x_1,y)\",\"\\\\pointDot(x,x_1)\"],pointPerp:[\"\\\\pointPerp(x_1)\"],segment:[\"\\\\segment(x_1,(0,0))\",\"\\\\segment((0,0),x_1)\"],line:[\"\\\\line(x_1,(0,0))\",\"\\\\line((0,0),x_1)\"],ray:[\"\\\\ray(x_1,(0,0))\",\"\\\\ray((0,0),x_1)\"],circle:[\"\\\\circle(x_1,0)\",\"\\\\circle((0,0),x_1)\"],arc:[\"\\\\arc(x_1,(0,0),(0,0))\",\"\\\\arc((0,0),x_1,(0,0))\",\"\\\\arc((0,0),(0,0),x_1)\"],arcCenter:[\"(0/0,0/0)\"],arcOmega:[\"0/0\"],center:[\"\\\\center(x_1)\"],radius:[\"\\\\radius(x_1)\"],undirectedAngleMarker:[\"\\\\undirectedAngleMarker(x_1)\"],directedAngleMarker:[\"\\\\directedAngleMarker(x_1,0,0,0)\",\"\\\\directedAngleMarker((0,0),x_1,0,0)\",\"\\\\directedAngleMarker((0,0),0,x_1,0)\",\"\\\\directedAngleMarker((0,0),0,0,x_1)\"],directedCoterminalAngle:[\"\\\\directedCoterminalAngle(x_1)\"],undirectedCoterminalAngle:[\"\\\\undirectedCoterminalAngle(x_1)\"],supplement:[\"\\\\supplement(x_1)\"],directedAngleMarkerMeasure:[\"0/0\"],undirectedAngleMarkerMeasure:[\"0/0\"],polygonInteriorUndirectedAngles:[\"\\\\polygonInteriorUndirectedAngles(x_1)\"],polygonInteriorDirectedAngles:[\"\\\\polygonInteriorDirectedAngles(x_1)\"],lineFromSegment:[\"x_1\"],lineFromRay:[\"x_1\"],segmentGlider:[\"\\\\segmentGlider(x_1,y)\",\"\\\\{0<y<1:(\\\\segmentGlider(x,1)-\\\\segmentGlider(x,0))*x_1,(0,0)\\\\}\"],rayGlider:[\"\\\\rayGlider(x_1,y)\",\"\\\\{0<y:(\\\\rayGlider(x,1)-\\\\rayGlider(x,0))*x_1,(0,0)\\\\}\"],lineGlider:[\"\\\\lineGlider(x_1,y)\",\"(\\\\lineGlider(x,1)-\\\\lineGlider(x,0))*x_1\"],circleGlider:[\"\\\\circleGlider(x_1,y)\",\"2*\\\\pi*\\\\pointPerp(q-\\\\center(x))*x_1\"],arcGlider:[\"(0/0,0/0)\",\"(0/0,0/0)\"],polygonGlider:[\"(0/0,0/0)\",\"(0/0,0/0)\"],chooseNonIncidentPoint:[\"(0/0,0/0)\"],circleCircleIntersection:[\"(\\\\radius(x)*\\\\radius(x_1)+\\\\pointDot(\\\\center(x_1),(q-\\\\center(x))))/\\\\pointDot(\\\\pointPerp(q-\\\\center(y)),q-\\\\center(x))*\\\\pointPerp(q-\\\\center(y))\",\"(\\\\radius(y)*\\\\radius(x_1)+\\\\pointDot(\\\\center(x_1),(q-\\\\center(y))))/\\\\pointDot(\\\\pointPerp(q-\\\\center(x)),q-\\\\center(y))*\\\\pointPerp(q-\\\\center(x))\"],circleArcIntersection:[\"(0/0,0/0)\"],circleLineIntersection:[\"(\\\\radius(x)*\\\\radius(x_1)+\\\\pointDot(\\\\center(x_1),(q-\\\\center(x))))/\\\\pointDot((\\\\lineGlider(y,1)-\\\\lineGlider(y,0)),q-\\\\center(x))*(\\\\lineGlider(y,1)-\\\\lineGlider(y,0))\",\"(\\\\pointDet(\\\\lineGlider(x_1,0),\\\\lineGlider(y,1))+\\\\pointDet(\\\\lineGlider(y,0),\\\\lineGlider(x_1,1))-\\\\pointDet(q,\\\\lineGlider(x_1,1)-\\\\lineGlider(x_1,0)))/(\\\\pointDet(\\\\pointPerp(q-\\\\center(x)),\\\\lineGlider(y,1)-\\\\lineGlider(y,0)))*(\\\\pointPerp(q-\\\\center(x)))\"],arcCircleIntersection:[\"(0/0,0/0)\"],arcArcIntersection:[\"(0/0,0/0)\"],arcLineIntersection:[\"(0/0,0/0)\"],lineCircleIntersection:[\"(\\\\pointDet(\\\\lineGlider(x_1,0),\\\\lineGlider(x,1))+\\\\pointDet(\\\\lineGlider(x,0),\\\\lineGlider(x_1,1))-\\\\pointDet(q,\\\\lineGlider(x_1,1)-\\\\lineGlider(x_1,0)))/(\\\\pointDet(\\\\pointPerp(q-\\\\center(y)),\\\\lineGlider(x,1)-\\\\lineGlider(x,0)))*(\\\\pointPerp(q-\\\\center(y)))\",\"(\\\\radius(y)*\\\\radius(x_1)+\\\\pointDot(\\\\center(x_1),(q-\\\\center(y))))/\\\\pointDot((\\\\lineGlider(x,1)-\\\\lineGlider(x,0)),q-\\\\center(y))*(\\\\lineGlider(x,1)-\\\\lineGlider(x,0))\"],lineArcIntersection:[\"(0/0,0/0)\"],lineLineIntersection:[\"(\\\\pointDet(\\\\lineGlider(x_1,0),\\\\lineGlider(x,1))+\\\\pointDet(\\\\lineGlider(x,0),\\\\lineGlider(x_1,1))-\\\\pointDet(q,\\\\lineGlider(x_1,1)-\\\\lineGlider(x_1,0)))/(\\\\pointDet(\\\\lineGlider(y,1)-\\\\lineGlider(y,0),\\\\lineGlider(x,1)-\\\\lineGlider(x,0)))*(\\\\lineGlider(y,1)-\\\\lineGlider(y,0))\",\"(\\\\pointDet(\\\\lineGlider(x_1,0),\\\\lineGlider(y,1))+\\\\pointDet(\\\\lineGlider(y,0),\\\\lineGlider(x_1,1))-\\\\pointDet(q,\\\\lineGlider(x_1,1)-\\\\lineGlider(x_1,0)))/(\\\\pointDet(\\\\lineGlider(x,1)-\\\\lineGlider(x,0),\\\\lineGlider(y,1)-\\\\lineGlider(y,0)))*(\\\\lineGlider(x,1)-\\\\lineGlider(x,0))\"],parallel:[\"\\\\parallel(x_1,(0,0))\",\"\\\\parallel(\\\\line((0,0),(0,0)),x_1)\"],perpendicular:[\"\\\\perpendicular(x_1,(0,0))\",\"\\\\perpendicular(\\\\line((0,0),(0,0)),x_1)\"],scaleTangentSegment:[\"\\\\scaleTangentSegment(x_1, y)\",\"\\\\scaleTangentSegment(x, x_1)\"],scaleTangentLine:[\"\\\\scaleTangentLine(x_1, y)\",\"\\\\scaleTangentLine(x, x_1)\"],scaleTangentRay:[\"\\\\scaleTangentRay(x_1, y)\",\"\\\\scaleTangentRay(x, x_1)\"],scaleTangentCircle:[\"\\\\scaleTangentCircle(x_1, y)\",\"\\\\scaleTangentCircle(x, x_1)\"],scaleTangentArc:[\"\\\\scaleTangentArc(x_1, y)\",\"\\\\scaleTangentArc(x, x_1)\"],addTangentSegment:[\"\\\\addTangentSegment(x_1, y)\",\"\\\\addTangentSegment(x, x_1)\"],addTangentLine:[\"\\\\addTangentLine(x_1, y)\",\"\\\\addTangentLine(x, x_1)\"],addTangentRay:[\"\\\\addTangentRay(x_1, y)\",\"\\\\addTangentRay(x, x_1)\"],addTangentCircle:[\"\\\\addTangentCircle(x_1, y)\",\"\\\\addTangentCircle(x, x_1)\"],addTangentArc:[\"\\\\addTangentArc(x_1, y)\",\"\\\\addTangentArc(x, x_1)\"],translation:[\"\\\\translation(x_1)\"],dilation:[\"\\\\dilation(x_1, y)\",\"\\\\dilation(x, x_1)\"],reflection:[\"\\\\reflection(x_1)\"],rotation:[\"\\\\rotation((0/0,0/0),0/0]\"],compose:[\"\\\\reflection(\\\\line((0/0,0/0),(0/0,0/0)))\",\"\\\\reflection(\\\\line((0/0,0/0),(0/0,0/0)))\"],inverse:[\"\\\\reflection(\\\\line((0/0,0/0),(0/0,0/0)))\"],transformPoint:[\"(0/0,0/0)\",\"(0/0,0/0)\"],transformSegment:[\"\\\\segment((0/0,0/0),(0/0,0/0))\",\"\\\\segment((0/0,0/0),(0/0,0/0))\"],transformLine:[\"\\\\line((0/0,0/0),(0/0,0/0))\",\"\\\\line((0/0,0/0),(0/0,0/0))\"],transformRay:[\"\\\\ray((0/0,0/0),(0/0,0/0))\",\"\\\\ray((0/0,0/0),(0/0,0/0))\"],transformCircle:[\"\\\\circle((0/0,0/0),0/0)\",\"\\\\circle((0/0,0/0),0/0)\"],transformArc:[\"\\\\arc((0/0,0/0),(0/0,0/0),(0/0,0/0))\",\"\\\\arc((0/0,0/0),(0/0,0/0),(0/0,0/0))\"],transformPolygon:[\"\\\\polygon([])\",\"\\\\polygon([])\"],transformAngleMarker:[\"\\\\undirectedAngleMarker(directedAngleMarker([0/0,0/0],0/0,0/0,0/0))\",\"\\\\undirectedangleMarker(directedAngleMarker([0/0,0/0],0/0,0/0,0/0))\"],transformDirectedAngleMarker:[\"\\\\directedAngleMarker([0/0,0/0],0/0,0/0,0/0)\",\"\\\\directedangleMarker([0/0,0/0],0/0,0/0,0/0)\"],mean:[\"\\\\mean(x_1)\"],total:[\"\\\\total(x_1)\"],count:[\"0\"],var:[\"2*\\\\cov(x, x_1)\"],varp:[\"2*\\\\cov(x, x_1)*(\\\\count(x)-1)/\\\\count(x)\"],stdev:[\"\\\\cov(x, x_1)/q\"],stdevp:[\"\\\\covp(x, x_1)/q\"],mad:[\"\\\\mean(\\\\sign(x-\\\\mean(x))*(x_1 - \\\\mean(x_1)))\"],min:[\"x_1[\\\\argmin(x)]\"],max:[\"x_1[\\\\argmax(x)]\"],median:[\"0.5*(x_1[\\\\lowerQuantileIndex(x, 0.5)] + x_1[\\\\upperQuantileIndex(x, 0.5)])\"],argmin:[\"0/0\"],argmax:[\"0/0\"],gcd:[\"0/0\"],lcm:[\"0/0\"],erf:[\"\\\\frac{2x_1}{\\\\sqrt{\\\\pi }}\\\\exp(-x^2)\"],invNorm:[\"\\\\frac{x_1}{\\\\pdf(\\\\normaldist(0,1),q)}\"],logbase:[\"\\\\{x > 0: \\\\frac{x_1}{x*\\\\ln(y)} \\\\}\",\"\\\\frac{-q*x_1}{y*\\\\ln(y)}\"],nthroot:[\"x^{1/y - 1}/y*x_1\",\"-\\\\frac{q*\\\\ln(x)*x_1}{y^2}\"],hypot:[\"x_1*x/q\",\"x_1*y/q\"],polyGamma:[\"0/0\",\"\\\\polyGamma(1 + x, y)*x_1\"],mod:[\"\\\\{ q=0: 0/0, x_1 \\\\}\",\"\\\\{ \\\\mod(x/y, 1) > 0: -\\\\floor(x/y)*x_1 \\\\}\"],cov:[\"\\\\cov(x_1, y)\",\"\\\\cov(x, x_1)\"],covp:[\"\\\\covp(x_1, y)\",\"\\\\covp(x, x_1)\"],corr:[\"(\\\\cov(x_1, y) - (\\\\cov(x, y)*\\\\cov(x, x_1)/\\\\var(x)))/(\\\\stdevp(x)\\\\stdevp(y))\",\"(\\\\cov(x, x_1) - (\\\\cov(x, y)*\\\\cov(y, x_1)/\\\\var(y)))/(\\\\stdevp(x)\\\\stdevp(y))\"],spearman:[\"0/0\",\"0/0\"],quantile:[\"\\\\{ \\\\floor(y*(\\\\count(x)-1)) = y*(\\\\count(x)-1) :   x_1[\\\\upperQuantileIndex(x, y)],  (\\\\ceil(y*(\\\\count(x)-1)) - y*(\\\\count(x)-1))*x_1[\\\\lowerQuantileIndex(x, y)] +   (y*(\\\\count(x)-1) - \\\\floor(y*(\\\\count(x)-1)))*x_1[\\\\upperQuantileIndex(x, y)]\\\\}\",\"\\\\{ \\\\floor(y*(\\\\count(x)-1)) < y*(\\\\count(x)-1) :   (\\\\count(x)-1)*(x[\\\\upperQuantileIndex(x, y)] - x[\\\\lowerQuantileIndex(x, y)])*x_1\\\\}\"],quartile:[\"0.5*(x_1[\\\\lowerQuartileIndex(x, y)] + x_1[\\\\upperQuartileIndex(x, y)])\",\"0/0\"],tscore:[\"\\\\frac{\\\\sqrt{\\\\count(x)}(\\\\stdev(x)*\\\\mean(x_1)-(\\\\mean(x)-y)*\\\\frac{\\\\cov(x,x_1)}{\\\\stdev(x)})}{\\\\stdev(x)^2}\",\"-x_1*\\\\sqrt{\\\\count(x)}/\\\\stdev(x)\"],quartileIndex:[\"0/0\",\"0/0\"],upperQuartileIndex:[\"0/0\",\"0/0\"],lowerQuartileIndex:[\"0/0\",\"0/0\"],upperQuantileIndex:[\"0/0\",\"0/0\"],lowerQuantileIndex:[\"0/0\",\"0/0\"],nCr:[\"q*(\\\\polyGamma(0, 1 + x) - \\\\polyGamma(0, 1 + x - y))\",\"q*(\\\\polyGamma(0, 1 + x - y) - \\\\polyGamma(0, 1 + y))\"],nPr:[\"q*(\\\\polyGamma(0, 1 + x) - \\\\polyGamma(0, 1 + x - y))\",\"q*\\\\polyGamma(0, 1 + x - y)\"],arctan:[\"x_1*y/(y^2+x^2)\",\"-x_1*x/(y^2+x^2)\"],poissonpdf:[\"0/0\",\"x_1\\\\frac{\\\\exp(-y)(\\\\floor(x)-y)y^{(\\\\floor(x)-1)}}{(\\\\floor(x))!}\"],invPoisson:[\"0/0\",\"0/0\"],tpdf:[\"x_1*q*\\\\frac{-(y+1)*x}{y+x^2}\",\"x_1*\\\\frac{1}{2}q*(  \\\\frac{x^2-1}{y + x^2} + \\\\ln(\\\\frac{y}{y + x^2}) +   \\\\polyGamma(0, \\\\frac{1+y}{2}) - \\\\polyGamma(0, y/2))\"],invT:[\"x_1/\\\\pdf(\\\\tdist(y),q)\",\"0/0\"],tcdf:[\"-x_1*\\\\pdf(\\\\tdist(z),x)\",\"x_1*\\\\pdf(\\\\tdist(z),y)\",\"0/0\"],poissoncdf:[\"0/0\",\"0/0\",\"x_1\\\\sum _{n=\\\\max(0,\\\\floor(\\\\min(x,y)))}^{\\\\floor(\\\\max(x,y))}\\\\frac{\\\\exp(-z)(n-z)z^{(n-1)}}{n!}\"],normalpdf:[\"-x_1*\\\\frac{x-y}{z^2} q\",\"x_1*\\\\frac{x-y}{z^2} q\",\"x_1*(\\\\frac{(x-y-z)*(x-y+z)}{z^3}) q\"],binompdf:[\"0/0\",\"0/0\",\"\\\\{0<=z<=1: x_1*q*(\\\\frac{\\\\round(x)}{z}-\\\\frac{\\\\round(y)-\\\\round(x)}{1-z}), 0 \\\\}\"],invBinom:[\"0/0\",\"0/0\",\"0/0\"],uniformpdf:[\"0\",\"\\\\{y<=x: \\\\frac{x_1}{(z-y)^2}, 0\\\\}\",\"\\\\{z>=x: -\\\\frac{x_1}{(z-y)^2}, 0\\\\}\"],invUniform:[\"\\\\{y<=x<=z: x_1*(z-y), 0\\\\}\",\"\\\\{y<=x<=z: x_1*(1-x), 0\\\\}\",\"\\\\{y<=x<=z: x_1*x, 0\\\\}\"],normalcdf:[\"-x_1\\\\pdf(\\\\normaldist(z,u), x)\",\"x_1\\\\pdf(\\\\normaldist(z,u), y)\",\"-x_1*(\\\\pdf(\\\\normaldist(z,u), y) - \\\\pdf(\\\\normaldist(z,u), x))\",\"x_1*(  \\\\{\\\\abs(y)=1/0:0,\\\\frac{z-y}{u}\\\\pdf(\\\\normaldist(z,u),y)\\\\} -   \\\\{\\\\abs(x)=1/0:0,\\\\frac{z-x}{u}\\\\pdf(\\\\normaldist(z,u),x)\\\\})\"],binomcdf:[\"0/0\",\"0/0\",\"0/0\",\"\\\\{0<=u<=1: x_1*\\\\sum _{n=\\\\max(0,\\\\round(\\\\min(x,y)))}^{\\\\round(\\\\max(x,y))}(  \\\\pdf(\\\\binomialdist(z,u),n)*(\\\\frac{n}{u}-\\\\frac{\\\\round(z)-n}{1-u})), 0 \\\\}\"],uniformcdf:[\"\\\\{z>u: 0/0, -x_1\\\\pdf(\\\\uniformdist(z,u), x)\\\\}\",\"\\\\{z>u: 0/0, x_1\\\\pdf(\\\\uniformdist(z,u), y)\\\\}\",\"\\\\{z>u: 0/0, x_1*(\\\\frac{\\\\{z<x<u:u-x,0\\\\} + \\\\{z<y<u:y-u,0\\\\}}{(u-z)^2})\\\\}\",\"\\\\{z>u: 0/0, x_1*(\\\\frac{\\\\{z<x<u:x-z,0\\\\} + \\\\{z<y<u:z-y,0\\\\}}{(u-z)^2})\\\\}\"],normalSample:[\"0/0\",\"0/0\",\"0/0\"],uniformSample:[\"0/0\",\"0/0\",\"0/0\"],tSample:[\"0/0\",\"0/0\"],poissonSample:[\"0/0\",\"0/0\"],binomSample:[\"0/0\",\"0/0\",\"0/0\"],rgb:[\"0/0\",\"0/0\",\"0/0\"],hsv:[\"0/0\",\"0/0\",\"0/0\"],polygon:[\"\\\\polygon(x_1)\"],area:[\"0/0\"],perimeter:[\"0/0\"],vertices:[\"\\\\vertices(x_1)\"],segments:[\"\\\\segments(x_1)\"],validateRangeLength:[\"0\",\"0\",\"0\",\"\\\\{q \\\\ge 1: x_1, 0\\\\}\"],validateSampleCount:[\"\\\\{x<0:0,1\\\\}*x_1\"],select:[\"\\\\select(x_1, y)\",\"0*q\"],shuffle:[\"0*y\",\"\\\\shuffle(x, x_1)\"],sortPerm:[\"0*x\"],elementsAt:[\"\\\\elementsAt(x_1, y)\",\"0*q\"],uniquePerm:[\"0*q\"]},f0={};for(let e in p0){let t=e,r=p0[t],n=[];for(let i=0;i<r.length;i++){let s=r[i];n.push(Ti(s,{}))}f0[t]=n}function d0(e,t){e.map.length=Math.min(e.map.length,t),e.maxValidReference=Math.min(e.maxValidReference,t-1)}function m0(e,t,r){let n=e.argNames.indexOf(t);if(n===-1){let o=e.getInstruction(r);return o.type===1&&o.valueType===I&&isNaN(F(o.value))?ni():zn()}let i=zr(e,n,{allowRestriction:!0,allowClosedBlockReferences:!1}),s=nR(i);return to(s,r)}function nR(e){let{chunk:t,mask:r}=e;return{chunk:t,mask:r,orderCtx:e,domainTable:[]}}function to(e,t){let{domainTable:r}=e,n=r[t];if(n!==void 0)return n;let i=iR(e,t);return r[t]=i,i}function iR(e,t){let{chunk:r,mask:n,orderCtx:i}=e,s=r.getInstruction(t);if(ne(s)){if(s.type===1){if(s.valueType==I){if(isNaN(F(s.value)))return ni()}else if(s.valueType===Y){for(let o of s.value)if(isNaN(F(o)))return Tr()}}return zn()}switch(s.type){case 30:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 47:case 48:case 15:case 16:case 37:case 42:case 19:case 20:case 21:case 22:case 17:case 18:case 39:case 40:case 41:case 44:case 49:{let o=zn();for(let a of s.args)o=Or(o,to(e,a));return o}case 38:{if(!n[t])return zn();let o=to(e,s.args[0]);if(o.type!==\"known\")return Tr();for(let a=1;a<s.args.length;a++){let u=to(e,s.args[a]);if(u.type!==\"known\")return Tr();if(u.bounds[0]!==o.bounds[0]||u.bounds[1]!==o.bounds[1])return Tr()}return o}case 23:return n[t]?Tr():zn();case 31:{let o=r.getInstruction(s.args[2]);return o.type!==1||o.valueType!==I||!isNaN(F(o.value))?Tr():Or(to(e,s.args[0]),to(e,s.args[1]))}case 24:case 25:case 26:case 27:{if(!n[t])return zn();if(Bt(i,t)>1)return Tr();let o=e.coefficientCtx;o===void 0&&(o=An(i),e.coefficientCtx=o);let a=o.newChunk,u=Ut(o,t),[l,c]=u;if(!It(a.getInstruction(l)))return Tr();let p=ht(a,l);if(isNaN(p))return ni();let f=zn();for(let m of s.args)f=Or(f,to(e,m));if(c===void 0)return s.type===26||s.type===27?p>=0?f:ni():p>0?f:ni();{let m=ht(a,c);return Or(f,mo(p,m))}}}}function g0(e){let t=[],r=[];for(let n=0;n<e.argNames.length;n++){let i=[],s=[];for(let o=0;o<e.argNames.length;o++)i.push(e.argTypes[o]===I),s.push(n===o);r.push(s),t.push(i)}for(let n=e.argNames.length;n<=e.getReturnIndex();n++)r.push(sR(e,r,n)),t.push(oR(e,r,t,n));return t[e.getReturnIndex()]}function sR(e,t,r){let n=e.getInstruction(r),i=aR(e.argNames.length);if(ne(n))return i;for(let s of n.args){let o=t[s];for(let a=0;a<o.length;a++)i[a]=i[a]||o[a]}return i}function oR(e,t,r,n){let i=e.getInstruction(n);if(ne(i))return y0(e.argNames.length);switch(i.type){case 8:case 9:case 14:case 38:{let a=y0(e.argNames.length);for(let u=0;u<i.args.length;u++){let l=r[i.args[u]];for(let c=0;c<l.length;c++)a[c]=a[c]&&l[c]}return a}case 11:{let a=[],u=r[i.args[0]],l=t[i.args[1]];for(let c=0;c<u.length;c++)a.push(u[c]&&!l[c]);return a}case 10:{let a=r[i.args[0]].slice(),u=r[i.args[1]].slice(),l=t[i.args[0]],c=t[i.args[1]],p=0,f=0;for(let m=0;m<a.length;m++){let d=a[m]&&!c[m],y=u[m]&&!l[m];a[m]=d,u[m]=y,d&&(p+=1),y&&(f+=1)}return p>=f?a:u}case 31:{let a=t[i.args[0]],u=r[i.args[1]],l=r[i.args[2]];for(var s=[],n=0;n<a.length;n++)s.push(!a[n]&&u[n]&&l[n]);return s}case 39:case 40:case 41:{let a=r[i.args[0]],u=t[i.args[1]],l=[];for(var n=0;n<u.length;n++)l.push(a[n]&&!u[n]);return l}case 48:{let a=i.args[0],u=e.getInstruction(a),l=n-a;return r[u.args[l]]}case 15:case 16:case 12:case 13:case 24:case 26:case 25:case 27:case 23:case 30:case 37:case 42:case 19:case 20:case 17:case 18:case 21:case 22:case 47:case 44:case 49:{let a=t[n],u=[];for(let l of a)u.push(!l);return u}default:let o=i;throw new Error(`Unexpected opcode ${o.type}`)}}function aR(e){let t=[];for(let r=0;r<e;r++)t.push(!1);return t}function y0(e){let t=[];for(let r=0;r<e;r++)t.push(!0);return t}function b0(e){let t=e.getInstruction(e.getReturnIndex());if(t.type!==48)return e;let r=t.args[0],n=e.getReturnIndex()-r,i=e.getInstruction(r),s=i.args[0],o=i.args[n],a=[],u=[];a.push(s);let l=Zn(e,e.getReturnIndex(),\"Programming error: cannot optimize regression on non-constant-length list\");u.push({min:1,max:l,length:l});let c=!1,p=!1;for(let M=s+1;M<=o;M++){let E=e.getInstruction(M);if(E.type===39||E.type===41||E.type===40){if(E.args[1]!==s)continue;let S=E.args[0];if(e.getInstruction(S).valueType!==Y||!It(e.getInstruction(S)))continue;let v=ht(e,S),N=cR(v);if(!isFinite(N.min)||!isFinite(N.max))continue;a.push(M),u.push(N)}else h0(E)?c=!0:(E.type===12||E.type===13)&&(p=!0)}if(a.length===0||!p&&!c)return e;let f=[],m=[];for(let M=0;M<e.argNames.length;M++)m.push(M),f.push(zn());let d=[],y=[];for(let M=0;M<=o;M++)d.push(jg(e,m,d,M)),y.push(jg(e,a,y,M));for(let M=0;M<=o;M++){let E=e.getInstruction(M);if(E.type===31){let S=d[M];for(let v=0;v<S.length;v++)S[v]&&(f[v]=Tr())}else if(E.type===12||E.type===13){let S=!1,v=!1;for(let ve=0;ve<a.length;ve++)y[E.args[0]][ve]&&(S=!0),y[E.args[1]][ve]&&(v=!0);if(S||!v)continue;let N=d[E.args[0]],G=0,C;for(let ve=0;ve<N.length;ve++)N[ve]&&(C=ve,G+=1);if(G!==1||C===void 0)continue;let H=m[C],te=zr(e.copy().reopenFinalBlock(),H,{allowRestriction:!1,allowClosedBlockReferences:!1});if(Bt(te,E.args[0])!==1)continue;let je=An(te),[Me,Ke]=Ut(je,E.args[0]);if(Ke===void 0)continue;let xt=ht(je.newChunk,Ke),re=ht(je.newChunk,Me);f[C]=Or(f[C],mo(re,xt))}}if(c){let M=e.copy().reopenFinalBlock();for(let E=0;E<a.length;E++){let S=zr(M,a[E],{allowRestriction:!1,allowClosedBlockReferences:!1}),v=An(S);for(let N=s+1;N<=o;N++){let G=M.getInstruction(N);if(h0(G)){let C=G.args[0];if(Bt(S,C)!==1)continue;let H=Ut(v,C)[1];if(H===void 0)continue;let te=lR(v.newChunk,H),je,Me=0;for(let Gt=0;Gt<te.length;Gt++)te[Gt]&&(je=Gt,Me+=1);if(Me!==1||je===void 0)continue;let Ke=zr(v.newChunk,je,{allowRestriction:!1,allowClosedBlockReferences:!1});if(Bt(Ke,H)!==1)continue;let xt=An(Ke),[re,ve]=Ut(xt,H);if(ve===void 0||!It(xt.newChunk.getInstruction(re))||!It(xt.newChunk.getInstruction(ve)))continue;let Ne=ht(xt.newChunk,re),De=ht(xt.newChunk,ve),se=(u[E].max-u[E].min)/Math.min(u[E].length-1,31),bt=Math.PI/se;if(!isFinite(bt)||bt<=0)continue;f[je]=Or(f[je],mo(Ne,De)),f[je]=Or(f[je],mo(bt-Ne,-De))}}}}let g=!1;for(let M of f){if(M.type!==\"known\")return e;(M.bounds[0]!==-1/0||M.bounds[1]!==1/0)&&(g=!0)}if(!g)return e;let h=e.copy(),x=e.getReturnIndex(),P=h.Constant(1),D=h.Constant(NaN);for(let M=0;M<h.argNames.length;M++)x=uR(h,f[M],x,M,P,D);return h.close(),h}function uR(e,t,r,n,i,s){if(t.type!==\"known\"||t.bounds[0]===-1/0&&t.bounds[1]===1/0)return r;let o=e.And([e.LessEqual([e.Constant(t.bounds[0]),n]),e.LessEqual([n,e.Constant(t.bounds[1])])]);return e.Multiply([r,e.Piecewise([o,i,s])])}function lR(e,t){let r=[];for(let i=0;i<e.argNames.length;i++)r.push(i);let n=[];for(let i=0;i<=t;i++)n.push(jg(e,r,n,i));return n[t]}function h0(e){return e.type===37&&(e.symbol===\"sin\"||e.symbol===\"cos\")}function cR(e){var t=1/0,r=-1/0,n=e.length;for(let i of e)t=Math.min(t,i),r=Math.max(r,i);return{min:t,max:r,length:n}}function jg(e,t,r,n){let i=e.getInstruction(n),s=pR(t.length);for(let o=0;o<t.length;o++)if(t[o]===n)return s[o]=!0,s;if(ne(i))return s;for(let o of i.args){let a=r[o];for(let u=0;u<a.length;u++)s[u]=s[u]||a[u]}return s}function pR(e){let t=[];for(let r=0;r<e;r++)t.push(!1);return t}function x0(e){let t=e.getInstruction(e.getReturnIndex());if(ne(t))return e.getReturnIndex();let r=!1,n=[],i=bg(e,t),s;if(i.isReducerWithNoListArgs){let o=ot(i.expectedListType);s=t.args.map(()=>o)}else s=i.expectedTypes;if(s.length<t.args.length)return e.getReturnIndex();for(let o=0;o<t.args.length;o++){let a=s[o],u=t.args[o],l=u;pe(a,I)&&(l=$o(e,u)),l!==u&&(r=!0),n.push(l)}if(i.isReducerWithNoListArgs){let o=fR(e,n);if(Ss(o,i.expectedListType)){r||e.popInstruction();let a=e.List(t.args);return e.copyInstructionWithArgs(t,[a])}}else r&&e.copyInstructionWithArgs(t,n);return e.getReturnIndex()}function $o(e,t){let r=e.getInstruction(t);return r.valueType===de?t:pe(r.valueType,xe)?e.SyntheticNativeFunction(\"undirectedAngleMarkerMeasure\",[t]):pe(r.valueType,le)?e.SyntheticNativeFunction(\"directedAngleMarkerMeasure\",[t]):t}function fR(e,t){let r=e.getInstruction(t[0]).valueType;if(!En(r))return vt;for(let n of t)if(e.getInstruction(n).valueType!==r)return vt;return Qr(r)}function _n(e){var t=e;if(t&&typeof t.toJSON==\"function\"&&(t=t.toJSON()),!t||typeof t!=\"object\")return t;if(Array.isArray(t))return t.map(_n);var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=_n(t[n]));return r}function P0(e,t){let r=[],n=[],i=[];for(let o=0;o<e.argNames.length;o++)t.hasOwnProperty(e.argNames[o])||(r.push(e.argNames[o]),n.push(e.argTypes[o]));let s=new bi({argNames:r,argTypes:n});for(let o=0,a=0;o<e.argNames.length;o++)t.hasOwnProperty(e.argNames[o])?i[o]=s.ConstantOfType(e.argTypes[o],t[e.argNames[o]]):(i[o]=a,a+=1);for(let o=e.argNames.length;o<e.instructionsLength();o++){let a=e.getInstruction(o);if(ne(a))i.push(Ln(s,a));else{let u=[];for(let l of a.args)u.push(i[l]);i.push(Lt(s,a,u))}}return s}var bi=class{constructor(t){this.derivativeMaps={};if(this.instructions=[],this.blockMask=[],this.comments=[],t.argNames.length!==t.argTypes.length)throw new Error(\"Programming Error: length of argNames must match length of argTypes\");this.argNames=t.argNames,this.argTypes=t.argTypes;for(let r=0;r<this.argTypes.length;r++){let n=this.argTypes[r];this.LoadArg(n)}this.returnIndex=this.Constant(NaN)}getReturnIndex(){return this.returnIndex}setReturnIndex(t){if(!(0<=t&&t<this.instructions.length))throw new Error(`Programming Error: out of bounds return index ${t}`);this.returnIndex=t}addComments(t){for(let r in t){let n=this.comments[r]||\"\";this.comments[r]=n+t[r]}return this}instructionsLength(){return this.instructions.length}getInstruction(t){return this.instructions[t]}popInstruction(){this.truncate(this.instructions.length-1)}truncate(t){this.instructions.length=Math.min(t,this.instructions.length),this.blockMask.length=Math.min(t,this.blockMask.length),this.comments.length=Math.min(t,this.comments.length);for(let r in this.derivativeMaps)d0(this.derivativeMaps[r],t);this.setReturnIndex(this.instructions.length-1)}pushInstructionChecked(t){if(this.instructions.length>=32768)throw Id();this.instructions.push(t),this.setReturnIndex(this.instructions.length-1)}pushLeafInstruction(t){return this.pushInstructionChecked(t),this.getReturnIndex()}pushInstruction(t){return this.checkInstructionArguments(t),this.pushInstructionChecked(t),this.setReturnIndex(nT(this)),this.setReturnIndex(aT(this)),this.setReturnIndex(x0(this)),QP(this,this.getReturnIndex()),this.returnIndex===this.instructions.length-1&&this.setReturnIndex(ZP(this)),this.getReturnIndex()}checkInstructionArguments(t){for(let r of t.args)if(this.blockMask[r])throw new Error(\"Programming Error: cannot reference an instruction in a closed block\")}markClosedBlock(t,r){for(let n=t;n<r;n++)this.blockMask[n]=!0}LoadArg(t){return this.pushLeafInstruction({type:2,valueType:t})}BlockVar(t,r){return this.pushInstruction({type:47,valueType:t,args:r})}SymbolicVar(t,r){return this.pushLeafInstruction({type:3,valueType:t,symbol:r})}BroadcastResult(t,r){let n=r[0],i=this.instructions[n],s=i.args[0],o=this.instructions.length-n,a=i.args[o],u=!Xc(this,a,s),c=this.getInstruction(s).args[0],p=this.getInstruction(c);return this.pushInstruction({type:48,valueType:t,args:r,isConstantBroadcast:u,constantLength:It(p)?ht(this,c):void 0})}Constant(t){return this.ConstantOfType(I,t)}ConstantOfType(t,r){if(typeof r==\"number\"&&(r=ie(r,1)),k(t)&&r.length>1e4)throw ba();return this.pushLeafInstruction({type:1,valueType:t,value:r})}NanOfType(t){if(t===Dt){let r=this.Constant(NaN);return this.Distribution(\"uniformdist\",[r,r])}else return this.ConstantOfType(t,fn(t))}Add(t){let r=8,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Subtract(t){let r=9,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Multiply(t){let r=10,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Divide(t){let r=11,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Exponent(t){let r=12,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}RawExponent(t){let r=13,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Negative(t){let r=14,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Equal(t){let r=23,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Less(t){let r=24,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Greater(t){let r=25,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}LessEqual(t){let r=26,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}GreaterEqual(t){let r=27,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}And(t){let r=30,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}Piecewise(t){let r=31,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}OrderedPair(t){let r=15,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}OrderedPairAccess(t){let r=16,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}List(t){let r=38,n=wt(this,r,t);if(t.length>1e4)throw ba();return this.pushInstruction({type:r,valueType:n,args:t})}ListAccess(t){let r=39,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}DeferredListAccess(t){let r=40,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}InboundsListAccess(t){let r=41,n=wt(this,r,t);return this.pushInstruction({type:r,valueType:n,args:t})}NativeFunction(t,r,n){let i=37,s=or[t].returnType,o=typeof s==\"function\"?s(n.map(a=>this.getInstruction(a).valueType)):s;return this.pushInstruction({type:i,valueType:o,args:n,symbol:t,callData:r})}SyntheticNativeFunction(t,r){let n=37,i=or[t].returnType,s=typeof i==\"function\"?i(r.map(a=>this.getInstruction(a).valueType)):i,o={errorSymbol:t,providedArity:r.length,isDotCall:!1};return this.pushInstruction({type:n,valueType:s,args:r,symbol:t,callData:o})}Distribution(t,r){let n=42,i=Dt;return this.pushInstruction({type:n,valueType:i,args:r,symbol:t})}BeginIntegral(t,r){let n=19,i=wt(this,n,[]);return this.pushInstruction({type:n,valueType:i,args:r,endIndex:-1,callData:t})}EndIntegral(t){let r=20,n=wt(this,r,t),i=t[0],s=this.getInstruction(i);this.instructions[i]={type:s.type,valueType:s.valueType,args:s.args,endIndex:this.instructionsLength(),callData:s.callData};let o=this.pushInstruction({type:r,valueType:n,args:t});return this.markClosedBlock(i,o),o}BeginBroadcast(t,r){let n=21,i=wt(this,n,[]),s=this.getInstruction(t[0]);if(It(s)&&ht(this,t[0])>1e4)throw ba();return this.pushInstruction({type:n,valueType:i,endIndex:-1,args:t,listComprehensionCallData:r})}EndBroadcast(t){let r=22,n=wt(this,r,t),i=t[0],s=this.getInstruction(i),o={type:s.type,valueType:s.valueType,args:s.args,endIndex:this.instructionsLength()};this.instructions[i]=o;let a=this.pushInstruction({type:r,valueType:n,args:t});return this.markClosedBlock(i,a),a}BeginLoop(t,r){let n=17,i=wt(this,n,r);return this.pushInstruction({type:n,valueType:i,args:r,endIndex:-1,callData:t})}EndLoop(t){let r=18,n=wt(this,r,t),i=t[0],s=this.getInstruction(i);this.instructions[i]={type:s.type,valueType:s.valueType,args:s.args,endIndex:this.instructionsLength(),callData:s.callData};let o=this.pushInstruction({type:r,valueType:n,args:t});return this.markClosedBlock(i,o),o}ExtendSeed(t,r){let n=44,i=tt;return this.pushInstruction({type:n,valueType:i,args:r,tag:t})}Noop(){let t=0,r=Jt;return this.pushLeafInstruction({type:t,valueType:r})}Action(t,r){return this.pushInstruction({type:49,valueType:Ge,args:r,symbols:t})}replaceInstructionWithConstant(t,r){this.instructions[t]=r,this.blockMask[t]=void 0}replaceInstructionWithBlockVar(t,r){this.instructions[t]=r}reopenFinalBlock(){let t=this.getInstruction(this.getReturnIndex());if(t.type!==48)return this;let r=t.args[0],i=this.getInstruction(r).args[0];for(let s=i;s<r;s++)this.blockMask[s]=void 0;return this.truncate(r),this}reopenAllBlocks(){this.blockMask=[]}isInClosedBlock(t){return!!this.blockMask[t]}copy(){let t=new bi({argNames:this.argNames,argTypes:this.argTypes});return t.instructions=this.instructions.slice(),t.blockMask=this.blockMask.slice(),t.comments=this.comments.slice(),t.derivativeMaps=_n(this.derivativeMaps),t.setReturnIndex(this.getReturnIndex()),t}close(){return this.setReturnIndex(ur(this,this.getReturnIndex())),rT(this),this}copyInstruction(t){return Ln(this,t)}copyInstructionWithArgs(t,r){return Lt(this,t,r)}replaceInstructionWithNoop(t){this.instructions[t]={type:0,valueType:Jt}}getReturnType(){return this.instructions[this.getReturnIndex()].valueType}isConstant(){return It(this.instructions[this.getReturnIndex()])}asValue(){return ht(this,this.getReturnIndex())}asCompilerValue(){let t=this.instructions[this.getReturnIndex()];switch(t.type){case 1:return t.value;default:throw new Error(`Unexpected opcode ${t.type}.`)}}getConstantListLength(){return ar(this,this.getReturnIndex())}getListLengthDependencies(){let t=this.copy(),r=xr(t,t.getReturnIndex());return hi(t,r)}elementAt(t){let r=this.copy(),n=r.getReturnIndex();return r.setReturnIndex(Ja(r,n,t)),r.close(),r}substituteConstantArguments(t){return P0(this,t)}interpretWithParameters(t){return HP(this,this.getReturnIndex(),t)}getCompiledFunction(t){let r;if(t){r=t.slice();for(let s of this.argNames)r.indexOf(s)===-1&&r.push(s)}else r=this.argNames;let{source:n,constants:i}=KP(this);return{args:r,source:n,constants:i,fn:tg(r,n,i)}}polynomialOrder(t,r){return sT(this,t,r)}getPolynomialCoefficients(t){return oT(this,t)}takeDerivative(t){let r=this.copy(),n=this.argNames.indexOf(t);return n===-1?(r.Constant(0),r.close(),r):(r.setReturnIndex(au(r,r.getReturnIndex(),n)),r.close(),r)}deriveRegressionRestrictions(){return b0(this)}boundDomain(t){return m0(this,t,this.getReturnIndex())}findLinearSubset(t){let r=g0(this),n=[];for(let i of t){let s=this.argNames.indexOf(i);if(s===-1)throw new Error(\"Programming Error: findLinearSubset called with a non-dependency\");n.push(r[s])}return n}print(){return qP(this)}printInstruction(t){return Zs(this,t)}toDot(){return iT(this)}getLiveArgNames(){let t=[];for(let r=0;r<this.argNames.length;r++)this.instructions[r].type===2&&t.push(this.argNames[r]);return t}};var Ii={normaldist:{pdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"normalpdf\",r.concat(n.args))},cdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"normalcdf\",r.concat(n.args))},mean:function(e,t,r){return e.getInstruction(t).args[0]},median:function(e,t,r){return Ii.normaldist.mean(e,t,r)},stdev:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"abs\",[n.args[1]])},var:function(e,t,r){let n=e.getInstruction(t);return e.Multiply([n.args[1],n.args[1]])},quantile:function(e,t,r){let n=e.getInstruction(t);return e.Add([e.Multiply([e.SyntheticNativeFunction(\"invNorm\",r),e.SyntheticNativeFunction(\"abs\",[n.args[1]])]),n.args[0]])},random:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"normalSample\",[r[0],n.args[0],n.args[1]])}},tdist:{pdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"tpdf\",r.concat(n.args))},cdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"tcdf\",r.concat(n.args))},mean:function(e,t,r){return e.Constant(0)},median:function(e,t,r){return e.Constant(0)},stdev:function(e,t,r){return e.SyntheticNativeFunction(\"sqrt\",[Ii.tdist.var(e,t,r)])},var:function(e,t,r){let n=e.getInstruction(t),i=e.Constant(2),s=n.args[0];return e.Piecewise([e.GreaterEqual([s,i]),e.Divide([s,e.Subtract([s,i])]),e.Constant(NaN)])},quantile:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"invT\",[r[0],n.args[0]])},random:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"tSample\",[r[0],n.args[0]])}},poissondist:{pdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"poissonpdf\",r.concat(n.args))},cdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"poissoncdf\",r.concat(n.args))},mean:function(e,t,r){return e.getInstruction(t).args[0]},median:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"invPoisson\",[e.Constant(.5),n.args[0]])},stdev:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"sqrt\",[n.args[0]])},var:function(e,t,r){return Ii.poissondist.mean(e,t,r)},quantile:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"invPoisson\",[r[0],n.args[0]])},random:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"poissonSample\",[r[0],n.args[0]])}},binomialdist:{pdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"binompdf\",r.concat(n.args))},cdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"binomcdf\",r.concat(n.args))},mean:function(e,t,r){let n=e.getInstruction(t);return e.Multiply([n.args[0],n.args[1]])},median:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"invBinom\",[e.Constant(.5),n.args[0],n.args[1]])},stdev:function(e,t,r){return e.SyntheticNativeFunction(\"sqrt\",[Ii.binomialdist.var(e,t,r)])},var:function(e,t,r){let n=e.getInstruction(t),[i,s]=n.args;return e.Multiply([i,e.Multiply([s,e.Subtract([e.Constant(1),s])])])},quantile:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"invBinom\",[r[0],n.args[0],n.args[1]])},random:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"binomSample\",[r[0],n.args[0],n.args[1]])}},uniformdist:{pdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"uniformpdf\",r.concat(n.args))},cdf:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"uniformcdf\",r.concat(n.args))},mean:function(e,t,r){let n=e.getInstruction(t);return e.Divide([e.Add([n.args[0],n.args[1]]),e.Constant(2)])},median:function(e,t,r){return Ii.uniformdist.mean(e,t,r)},stdev:function(e,t,r){return e.SyntheticNativeFunction(\"sqrt\",[Ii.uniformdist.var(e,t,r)])},var:function(e,t,r){let n=e.getInstruction(t),i=e.Subtract([n.args[1],n.args[0]]);return e.Divide([e.Multiply([i,i]),e.Constant(12)])},quantile:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"invUniform\",[r[0],n.args[0],n.args[1]])},random:function(e,t,r){let n=e.getInstruction(t);return e.SyntheticNativeFunction(\"uniformSample\",[r[0],n.args[0],n.args[1]])}}};function T0(e,t,r){let n=r[0],i=e.Constant(0),s=e.Constant(1);if(ar(e,t)===0)return e.Constant(NaN);let a=xr(e,t);return e.InboundsListAccess([t,e.Add([e.SyntheticNativeFunction(\"floor\",[e.Multiply([e.SyntheticNativeFunction(\"uniformSample\",[n,i,s]),a])]),s])])}function gp(e,t,r){if(t===r)return!0;if(t<r)return!1;let n=[!0];for(let s=r+1;s<=t;s++)n.push(!1);let i=[t];for(;i.length;){let s=i.pop();if(n[s-r])continue;n[s-r]=!0;let o=e.getInstruction(s);if(!ne(o))for(let a of o.args){if(a===r)return!0;a<r||n[a-r]||i.push(a)}}return!1}var Vi;function I0(e){Vi=e}function M0(){Vi&&(Vi.cacheHits+=1)}function v0(){Vi&&(Vi.cacheMisses+=1)}function E0(){Vi&&(Vi.cacheWrites+=1)}function S0(){Vi&&(Vi.cacheReads+=1)}var dR={segment:!0,ray:!0,line:!0,circle:!0,arc:!0,polygon:!0,glider:!0,midpoint:!0,intersection:!0,strictintersection:!0,perpendicular:!0,parallel:!0,translation:!0,rotation:!0,dilation:!0,reflection:!0,apply:!0,segments:!0,vertices:!0,angle:!0,angles:!0,directedangle:!0,directedangles:!0,clockwise:!0,counterclockwise:!0,reflex:!0};function Zg(e){if(e.type===\"ListAccess\"&&e.list.type===\"Identifier\"&&e.index.type===\"Constant\")return[e.list._symbol,e.index.asValue()];if(e.type===\"Identifier\")return[e._symbol,void 0]}function hp(e){let t=e;if(t.type===\"Assignment\"&&(t=t._expression),t.type===\"FunctionCall\"){let r=t._symbol;if(dR[r])return{symbol:r,parents:t.args.map(Zg)};if(t.type===\"FunctionCall\")return{symbol:\"apply\",parents:[[t._symbol,void 0],...t.args.map(Zg)]}}else if(t.type===\"DotAccess\"){let r=t.args.map(Zg);if(r.length===2&&r[1]&&r[1][0]===\"segments\")return{symbol:\"segment\",parents:[r[0]]}}}function D0(e,t,r,n,i){let s=pe(r,Q)||pe(r,X),o=pe(i,Q)||pe(i,X);if(!s&&!o)return;let a=N0(e,t,r),u=N0(e,n,i),l=a.filter(c=>u.some(p=>Qg(c,p))&&!!e.lookup(c[0]));for(let c of a)O0(e,c,n)&&l.every(p=>!Qg(c,p))&&l.push(c);for(let c of u)O0(e,c,t)&&l.every(p=>!Qg(c,p))&&l.push(c);if(l.length===1)return l[0]}function Qg(e,t){return e[0]===t[0]&&e[1]===t[1]}function O0(e,[t,r],n){let i=e.lookup(t),s=i&&e.getGeometryTree(i);return((s==null?void 0:s.symbol)===\"glider\"||(s==null?void 0:s.symbol)===\"intersection\"||(s==null?void 0:s.symbol)===\"strictintersection\"||(s==null?void 0:s.symbol)===\"midpoint\")&&(s==null?void 0:s.parents.some(o=>o&&e.resolvesTo(o[0],n)&&(r===void 0||o[1]===void 0||o[1]===r)))}function N0(e,t,r){var s;let n=[],i=((s=e.getGeometryTree(t))==null?void 0:s.parents)||[];for(let o=0;o<i.length;o++){let a=i[o];if(pe(r,Q)&&o===0||!a)continue;let u=e.lookup(a[0]);if(!u)continue;let l=e.getValueType(u);pe(l,w)&&n.push(a)}return n}function mR(e){let t=La({},{},-1);for(let r=0;r<e.argNames.length;r++)Kr(t,e.argNames[r],r);return t}function $r(e,t,r,n,i,s){return{policy:e,frame:t,chunk:r,scope:n,parentNode:i,substitutionContext:s}}function ih(e){let{policy:t,frame:r,argNames:n,argTypes:i}=e,s=new bi({argNames:n,argTypes:i}),o=mR(s);return $r(t,r,s,o,void 0,{})}function Pp(e,t){let{policy:r,frame:n,argNames:i,argTypes:s}=e,o=Yg(n,t),{freeDependencies:a,updateSymbols:u}=o;if(i||(i=a),!s){s=[];for(let c=0;c<i.length;c++)s.push(I)}let l=ih({policy:r,frame:n,argNames:i,argTypes:s});return ce(l,t),e.wrapInList&&!k(l.chunk.getReturnType())&&l.chunk.List([l.chunk.getReturnIndex()]),l.chunk.close(),gR(l,t,o),yR(l,t,u),l.chunk}function yR(e,t,r){if(t.type===\"FunctionDefinition\")for(let i of r){if(t._argSymbols.indexOf(i)!==-1||t._symbol===i)throw Rl(i);if(t._sybmol===i)throw Dl(i)}let n=[];for(let i of r)e.frame[i]||n.push(i);if(n.length){let i=V0(e,n[0]).setDependencies(e.chunk.argNames.concat(n));throw e.chunk.isConstant()&&e.chunk.getReturnType()===Ge&&i.setActionValue(e.chunk.asValue()),i}}function gR(e,t,{substitutionSymbols:r,substitutionBodyDependencies:n}){if(t.type===\"FunctionDefinition\"){for(let s of r){if(t._argSymbols.indexOf(s)!==-1||t._symbol===s)throw tc(s);if(t._sybmol===s)throw nc(s)}for(let s of n)if(t._argSymbols.indexOf(s)!==-1||t._symbol===s)throw uy(s)}let i=[];for(let s of r)e.frame[s]||i.push(s);if(i.length){let s=i[0];if(e.policy.substitutionForbidden(s))throw rc(s)}}function ce(e,t){let r;if(S0(),xR(e,t))M0(),r=e.chunk.copyInstruction(t.__IRCache.instruction);else{v0();let n=e.chunk.instructionsLength(),{policy:i,frame:s,chunk:o,scope:a,parentNode:u,substitutionContext:l}=e,c=$r(i,s,o,a,t,l);if(r=PR(c,t),!C0(t,u)){let p=o.getInstruction(r);p.type===48&&p.isConstantBroadcast&&(r=ur(o,r))}r=hR(e,n,r),bR(e,t,r)}return e.chunk.setReturnIndex(r),r}function hR(e,t,r){let{chunk:n,scope:i}=e;if(r<=t)return r;let s=n.getInstruction(r);return It(s)?(n.truncate(Math.max(t,i.maxIndex+1)),Ln(n,s)):r}function C0(e,t){if(!t||!e.getScope||!t.getScope)return!1;let r=t.getScope().dependencies,n=e.getScope().dependencies;if(n.length===r.length)return!0;let i=0;for(let o of n)fe[o]||(i+=1);let s=0;for(let o of r)fe[o]||(s+=1);return i===s}function bR(e,t,r){let{frame:n,chunk:i,parentNode:s}=e,o=i.getInstruction(r);if(!It(o)||C0(t,s))return;let a=c0(n,t);a&&(E0(),t.__IRCache={keys:a,instruction:o})}function xR(e,t){let{frame:r,substitutionContext:n}=e;if(!t.__IRCache)return!1;let i=t.__IRCache.keys;for(let[s,o]of i){let a=r[s];if(a!==o||a&&a.type===\"RegressionParameter\"&&n.body)return!1}return!0}function PR(e,t){let{policy:r,frame:n,chunk:i,scope:s,parentNode:o,substitutionContext:a}=e;switch(t.type){case\"Constant\":{let c=t._constantValue,p=typeof c==\"boolean\"?be:I;return i.ConstantOfType(p,c)}case\"RegressionParameter\":return i.Constant(t._constantNode._constantValue);case\"MixedNumber\":return i.Constant(t._constantValue);case\"Negative\":return i.Negative(TR(e,t.args));case\"Add\":return i.Add(Wr(e,t.args));case\"Subtract\":return i.Subtract(Wr(e,t.args));case\"Multiply\":return i.Multiply(Wr(e,t.args));case\"Divide\":return i.Divide(Wr(e,t.args));case\"Exponent\":return i.Exponent(Wr(e,t.args));case\"Comparator['=']\":return i.Equal(Wr(e,t.args));case\"Comparator['>']\":return i.Greater(Wr(e,t.args));case\"Comparator['<']\":return i.Less(Wr(e,t.args));case\"Comparator['>=']\":return i.GreaterEqual(Wr(e,t.args));case\"Comparator['<=']\":return i.LessEqual(Wr(e,t.args));case\"And\":return i.And(Wr(e,t.args));case\"PercentOf\":return i.Divide([i.Multiply(Wr(e,t.args)),i.Constant(100)]);case\"ParenSeq\":return SR(e,t);case\"BareSeq\":return OR(e,t);case\"OrderedPairAccess\":return i.OrderedPairAccess(Wr(e,t.args));case\"UpdateRule\":{let c=t._symbol;var u=n[c];if(u!==void 0){if(u.isError)throw u;if(u.type!==\"Assignment\"&&u.type!==\"Slider\")throw V0(e,c)}let p=ce($r(r,n,i,s,o,a),t.args[1]);return i.Action([c],[p])}case\"List\":{if(t.getDependencies().length>0)return Rr(t.args),i.List(Wo(e,t.args));if(t.args.length===0)return i.ConstantOfType(de,[]);{let c=i.instructionsLength(),p=[],f,m;Rr(t.args);for(let d of t.args){let y=ce(e,d),g=i.getInstruction(y);if(f===void 0){if(f=g.valueType,!En(f))throw Bs([Z(f)]);m=Qr(f)}else if(g.valueType!==f)throw ya();if(g.type!==1)throw new Error(\"Programming error: expected list with no dependencies to constant collapse.\");p.push(g.value),i.truncate(c)}return i.ConstantOfType(m,p)}}case\"ListAccess\":{let c=ce(e,t.args[0]),p=i.getInstruction(c);if(t.args[1].type===\"Range\"&&t.args[1].args[1].length===0){if(!k(p.valueType))throw Po([Z(p.valueType),Z(I)]);let f=xr(i,c),m=th(e,ce(e,t.args[1].args[0]),i.List([f]),{stepMustBePositive:!0});return i.ListAccess([c,m])}else{let f=ce(e,t.args[1]),m=i.getInstruction(f);if(!k(p.valueType))throw Po([Z(p.valueType),Z(m.valueType)]);return m.valueType===pr?i.SyntheticNativeFunction(\"select\",[c,f]):i.ListAccess([c,f])}}case\"Range\":{let[c,p]=Wr(e,t.args);return th(e,c,p,{stepMustBePositive:!1})}case\"ListComprehension\":return NR(e,t);case\"Piecewise\":{let c=IR(e,t.args),p=i.getInstruction(c[0]),f=i.getInstruction(c[1]),m=i.getInstruction(c[2]);if(p.type===1&&p.valueType===be&&Fu(f.valueType,m.valueType)){let d=c[p.value?1:2],y=i.getInstruction(d),g=f.valueType!==de?f.valueType:m.valueType;return y.valueType===de&&g!==de?i.ConstantOfType(g,[]):d}if(!Fu(f.valueType,m.valueType)&&It(m)&&m.valueType===I&&Ai(m.value)&&gx(f.valueType)){let d=i.NanOfType(f.valueType);c=[c[0],c[1],d]}return i.Piecewise(c)}case\"Ans\":case\"Identifier\":{let c=t._symbol,p=t._errorSymbol;if(t.type===\"Ans\"&&i.argNames.indexOf(c)!==-1)throw jm();let f=No(s,c),m=n[c];if(f!==void 0&&(s.symbolMap.hasOwnProperty(c)||m===void 0||m===Fr))return f;if(m===void 0)throw fe[t._symbol]?fe[t._symbol].isFunction?pn(p):ks(p):new Error(`Programming Error: reached undefined symbol ${c}`);if(m.isError)throw m;if(m.isFunction)throw _d(p);if(a.body&&m.type===\"RegressionParameter\")throw oy(p);let d=$r(r,n,i,s,void 0,a),y=ce(d,m);return Kr(s,c,y,m),y}case\"FunctionCall\":case\"SeededFunctionCall\":{Rr(t.args);let c=Wo(e,t.args);return Rr(t.args),bp(e,t._symbol,t._errorSymbol,c,t.args)}case\"Substitution\":return RR(e,t);case\"FunctionExponent\":{let c=t.args[0]._symbol;return n[c]&&n[c].isFunction?ce(e,new b.Exponent([new b.FunctionCall(c,[t.args[1]]),t.args[2]])):ce(e,new b.Multiply([t.args[0],new b.Exponent([t.args[1],t.args[2]])]))}case\"FunctionFactorial\":{let c=t.args[0]._symbol;return n[c]&&n[c].isFunction?ce(e,new b.FunctionCall(\"\\\\factorial\",[new b.FunctionCall(c,[t.args[1]])])):ce(e,new b.Multiply([t.args[0],new b.FunctionCall(\"\\\\factorial\",[t.args[1]])]))}case\"DotAccess\":{let c=t.args[0],p=t.args[1];if(c.type===\"Identifier\"&&c._symbol===\"construction\")return wR(e,p);if((p.type===\"Identifier\"||p.type===\"FunctionCall\")&&n[p._symbol]&&n[p._symbol].isFunction){let f=p._symbol,m=p._errorSymbol,d=p.type===\"Identifier\"?[c]:[c].concat(p.args),y=Wo(e,d);return bp(e,f,m,y,d,{dotLHSIndex:y[0]})}else if(p.type===\"SeededFunctionCall\"){let f=p._symbol,m=p._errorSymbol,d=[p.seed,c].concat(p.args.slice(1)),y=Wo(e,d);return bp(e,f,m,y,d,{dotLHSIndex:y[1]})}else throw qr(\".\")}case\"Seed\":return i.ConstantOfType(tt,t._stringValue);case\"ExtendSeed\":return i.ExtendSeed(t.tag,Wr(e,t.args));case\"Integral\":{let c=t._differential._symbol,p=No(s,c);if(n[c]!==void 0||p!==void 0&&i.getInstruction(p).type!==2)throw Wm(c);let f=Object.create(n);f[c]=Ym(c);let m=fi(s),d=$r(r,f,i,m,o,a),y=ce(d,t.args[1]),g=ce(d,t.args[2]),h=i.getInstruction(y),x=i.getInstruction(g),P=i.SymbolicVar(I,c),D=fi(s);Kr(D,c,P);let M=Object.create(n);M[c]=Fr;let E=ce($r(r,M,i,D,o,a),t.args[3]);if(!gp(i,E,P))return i.Multiply([E,i.Subtract([g,y])]);let S=Ya(i,[y,g,E]),v=S!==void 0?i.BeginBroadcast([S]):void 0,N=y;v!==void 0&&k(h.valueType)&&(N=ts(i,y,v));let G=g;v!==void 0&&k(x.valueType)&&(G=ts(i,g,v));let C=i.BeginIntegral({indexSymbol:c},[N,G]),H=ls(i,C,P,E),te=i.getInstruction(H);v!==void 0&&k(te.valueType)&&(H=ts(i,H,v));let je=i.EndIntegral([C,H]),Me=i.BlockVar(I,[je]);if(v!==void 0){let Ke=i.EndBroadcast([v,Me]);return i.BroadcastResult(Y,[Ke])}else return Me}case\"Sum\":case\"Product\":{let c=t._index._symbol,p=No(s,c);if(n[c]!==void 0||p!==void 0&&i.getInstruction(p).type!==2)throw sm(c);let f=t.type===\"Sum\",m=Object.create(n);m[c]=f?Fm(c):Bm(c);let d=fi(s),y=$r(r,m,i,d,o,a),g=ce(y,t.args[1]);g=$o(y.chunk,g);let h=ce(y,t.args[2]);if(h=$o(y.chunk,h),!W(i,g,I)){let se=vr(i,[g]);throw f?Zf(se):ed(se)}if(!W(i,h,I)){let se=vr(i,[h]);throw f?Qf(se):td(se)}let x=i.SyntheticNativeFunction(\"round\",[g]),P=i.SyntheticNativeFunction(\"round\",[h]),D=i.getInstruction(x),M=i.getInstruction(P);if(D.type===1&&D.valueType===I&&!isFinite(F(D.value)))throw f?Ol():Nl();if(M.type===1&&M.valueType===I&&!isFinite(F(M.value)))throw f?Ol():Nl();let E=i.SymbolicVar(I,c),S=fi(s);Kr(S,c,E);let v=Object.create(n);v[c]=Fr;let N=ce($r(r,v,i,S,o,a),t.args[3]);if(!gp(i,N,E)){let se=i.Add([i.Subtract([P,x]),i.Constant(1)]);se=i.SyntheticNativeFunction(\"max\",[se,i.Constant(0)]);let bt=f?i.Multiply([N,se]):i.Exponent([N,se]);return i.Piecewise([i.Less([se,i.Constant(1/0)]),bt,i.Constant(NaN)])}if(!W(i,N,I)){let se=vr(i,[N]);throw f?Kf(se):rd(se)}let G=Ya(i,[x,P,N]);if(G!==void 0&&gp(i,G,E))throw f?ny(c):iy(c);let C=G!==void 0?i.BeginBroadcast([G]):void 0,H=x;C!==void 0&&k(D.valueType)&&(H=ts(i,x,C));let te=P;C!=null&&k(M.valueType)&&(te=ts(i,P,C));let je=i.Constant(f?0:1),Me=i.BeginLoop({type:f?\"sum\":\"product\",indexSymbol:c},[H,te,je]),Ke=i.BlockVar(I,[Me]),xt=ls(i,Me,E,N),re=i.getInstruction(xt);C!==void 0&&k(re.valueType)&&(xt=ts(i,xt,C));let ve=f?i.Add([Ke,xt]):i.Multiply([Ke,xt]),Ne=i.EndLoop([Me,ve]),De=i.BlockVar(I,[Ne]);if(C!==void 0){let se=i.EndBroadcast([C,De]);return i.BroadcastResult(Y,[se])}else return De}case\"Derivative\":{let c=ce(e,new b.Identifier(t._symbol));if(!W(i,c,I))throw ad(t._symbol,vr(i,[c]));let p=i.getInstruction(c),f,m;if((p.type===2||p.type===3)&&p.valueType===I)f=e,m=c;else{let h=fi(s);m=i.SymbolicVar(p.valueType),Kr(h,t._symbol,m);let x=Object.create(n);x[t._symbol]=Fr,f=$r(r,x,i,h,o,a)}let d=1;for(;t.args[0].type===\"Derivative\"&&t.args[0]._symbol===t._symbol;)d+=1,t=t.args[0];let g=ur(i,ce(f,t.args[0]));for(let h=0;h<d;h++)g=au(i,g,m);return m===c?g:ls(i,c,m,g)}case\"Prime\":{let c=t.args[0];if(!n[c._symbol])throw kl(c._symbol);let p=ce(e,c.args[0]),f=i.getInstruction(p),m;(f.type===2||f.type===3)&&f.valueType===I?m=p:m=i.SymbolicVar(f.valueType);let d,y;if(c._symbol===\"logbase\"){if(c.args.length!==2)throw Gs();d=[m,ce(e,c.args[1])],y=[c.args[0],c.args[1]]}else{if(c.args.length!==1)throw Gs();d=[m],y=[c.args[0]]}let h=ur(i,bp(e,c._symbol,c._errorSymbol,d,y));for(let x=0;x<t.order;x++)h=au(i,h,m);return m===p?h:ls(i,p,m,h)}case\"Slider\":return e.chunk.Constant(t.getConcreteTree(r,n).asCompilerValue());case\"Assignment\":return ce(e,t._expression);case\"FunctionDefinition\":{for(var l=0;l<t._argSymbols.length;l++){if(n[t._argSymbols[l]])throw zl(t._argSymbols[l]);if(t._argSymbols[l]===t._symbol)throw zl(t._argSymbols[l])}return ce(e,t._expression)}case\"Construction\":throw qr(\"construction\");default:throw new Error(`Programming error, unimplemented node type ${t.type}`)}}function TR(e,t){return[ce(e,t[0])]}function Wr(e,t){return[ce(e,t[0]),ce(e,t[1])]}function IR(e,t){return[ce(e,t[0]),ce(e,t[1]),ce(e,t[2])]}function Wo(e,t){let r=[];for(let n of t)r.push(ce(e,n));return r}function bp(e,t,r,n,i,s){let{policy:o,frame:a,chunk:u,scope:l,parentNode:c,substitutionContext:p}=e,f=No(l,t);if(f!==void 0){if(pe(u.getInstruction(f).valueType,Se))return nh(e.chunk,[f,...n],r,!0);if(n.length==1)return u.Multiply([f,n[0]]);throw u.getInstruction(f).type===2?kl(r):u.getInstruction(f).valueType===Dt?Jl(r):Xl(r)}let m=a[t];if(m&&m.isError)throw m;if(m===void 0||!m.isFunction){if(fe[t]&&fe[t].isFunction)throw t===\"logbase\"&&a.ln&&a.log?Zm():pn(r);if(m){let d=ce(e,m);if(u.getInstruction(d).valueType===Dt)throw Jl(r);if(pe(u.getInstruction(d).valueType,Se))return nh(e.chunk,[d,...n],r,!0)}if(n.length==1)return u.Multiply([ce(e,new b.Identifier(t)),n[0]]);throw m?Xl(r):new Error(`Programming Error: reached undefined symbol ${t}`)}if(m.type===\"FunctionDefinition\"){if(s&&s.dotLHSIndex!==void 0)throw da(r);if(n.length!==m._argSymbols.length)throw Mr(r,m._argSymbols.length,n.length);let d=fi(l),y=Object.create(a);for(let g=0;g<m._argSymbols.length;g++)Kr(d,m._argSymbols[g],n[g],i[g]),y[m._argSymbols[g]]=Fr;return ce($r(o,y,u,d,c,p),m._expression)}else{if($i.hasOwnProperty(t))return MR(e,t,r,n,i,s);if(or.hasOwnProperty(t))return eh(e,t,r,n,s);throw pn(r)}}function _0(e,t,r){let n=e.getInstruction(t).valueType;if(!k(n)&&n!==Dt&&(n===w||!Mf(n)))throw jf(r,Z(n))}function eh(e,t,r,n,i){let{chunk:s}=e,o=or[t],a=!!(i&&i.dotLHSIndex!==void 0),u=n.length,{minArity:l,maxArity:c,allowDotCall:p}=o;if(i&&i.dotLHSIndex!==void 0){if(!p)throw da(r);_0(s,i.dotLHSIndex,\".\"+r)}if(t===\"logbase\"&&u!==2)throw Mr(r,1,u-1);if(u>c)throw a&&(l-=1,c-=1,u-=1,r=\".\"+r),o.tag===\"doubleReducer\"?To(r):o.tag===\"parameterizedReducer\"?_l(r):o.tag===\"color\"?Cl(r):Mr(r,c,u);if(u<l)throw a&&(l-=1,c-=1,u-=1,r=\".\"+r),o.tag===\"reducer\"&&u===0?Dd(r):o.tag===\"doubleReducer\"?To(r):o.tag===\"parameterizedReducer\"?_l(r):o.tag===\"color\"?Cl(r):Mr(r,l,u);let f=F0(s,n,o),m={errorSymbol:r,providedArity:u,isDotCall:a};switch(o.tag){case\"default\":case\"reducer\":case\"doubleReducer\":case\"parameterizedReducer\":case\"color\":case\"never-broadcast\":return s.NativeFunction(t,m,f);case\"trig\":{let d=ce(e,new b.Identifier(\"trigAngleMultiplier\")),y=s.Multiply([f[0],d]);return s.NativeFunction(t,m,[y])}case\"trig2\":{let d=ce(e,new b.Identifier(\"trigAngleMultiplier\")),y=s.Multiply([f[1],d]);return s.NativeFunction(t,m,[f[0],y])}case\"inverseTrig\":{let d=ce(e,new b.Identifier(\"trigAngleMultiplier\")),y=s.NativeFunction(t,m,f);return s.Divide([y,d])}default:{let d=o.tag;throw new Error(`Programming Error: unexpected tag ${d}`)}}}function F0(e,t,{minArity:r,defaultArguments:n}){if(!n||!(t.length-r<n.length))return t;let i=t.slice();for(;i.length-r<n.length;)i.push(e.copyInstruction(n[i.length-r]));return i}function MR(e,t,r,n,i,s){let{chunk:o,policy:a}=e,u=!!(s&&s.dotLHSIndex!==void 0),l=$i[t];if(l.fallthroughUnlessDistribution&&(n.length===0||o.getInstruction(n[0]).valueType===de||!pe(o.getInstruction(n[0]).valueType,Dt)))return eh(e,t,r,n,s);let{minArity:c,maxArity:p,allowDotCall:f}=l;if(s&&s.dotLHSIndex!==void 0){if(!f)throw da(r);_0(o,s.dotLHSIndex,\".\"+r)}let m=n.length;if(m<c)throw vR(t,r,c,m,{isDotCall:u});if(m>p)throw ER(t,r,p,m,{isDotCall:u});let d;if(t===\"cdf\")m===2?d=[n[0],o.Constant(-1/0),n[1]]:d=n;else if(t===\"random\")if(m===1||m<4&&!k(o.getInstruction(n[1]).valueType)&&o.getInstruction(n[1]).valueType!==Dt){let y=o.Distribution(\"uniformdist\",[o.Constant(0),o.Constant(1)]);d=[n[0],y].concat(n.slice(1))}else d=n;else d=F0(o,n,l);switch(t){case\"length\":if(a.isGeometryEnabled()){if(d.length!==1)throw Pt(r,rn(o,d));let y=d[0];if(o.getInstruction(y).valueType===de)throw Sl(r,rn(o,d)[0]);if(W(o,y,ue)){let g=o.Constant(0),h=o.Constant(1);return o.SyntheticNativeFunction(\"distance\",[o.SyntheticNativeFunction(\"segmentGlider\",[y,g]),o.SyntheticNativeFunction(\"segmentGlider\",[d[0],h])])}else if(W(o,y,X)){let g=o.SyntheticNativeFunction(\"abs\",[o.SyntheticNativeFunction(\"arcOmega\",[d[0]])]),{radius:h,startPoint:x}=rh(o,d[0]),P=o.SyntheticNativeFunction(\"arcGlider\",[d[0],o.Constant(1)]);return o.Piecewise([o.Equal([g,o.Constant(0)]),o.SyntheticNativeFunction(\"distance\",[x,P]),o.Multiply([h,g])])}else throw k(o.getInstruction(y).valueType)?Sl(r,rn(o,d)[0]):Pt(r,rn(o,d))}else return o.SyntheticNativeFunction(\"count\",d);case\"round\":{if(d.length===1)return o.SyntheticNativeFunction(\"round\",d);if(!W(o,d[0],I)||!W(o,d[1],I))throw Pt(r,vr(o,d));let y=o.SyntheticNativeFunction(\"round\",[d[1]]),g=o.RawExponent([o.Constant(10),y]);return o.Divide([o.SyntheticNativeFunction(\"round\",[o.Multiply([d[0],g])]),g])}case\"midpoint\":if(d.length===1&&W(o,d[0],ue)){let y=o.Constant(ie(1,2));return o.SyntheticNativeFunction(\"segmentGlider\",[d[0],y])}else if(d.length===1&&W(o,d[0],X)){let y=o.Constant(ie(1,2));return o.SyntheticNativeFunction(\"arcGlider\",[d[0],y])}else if(d.length===2&&W(o,d[0],w)&&W(o,d[1],w)){let y=o.Constant(ie(1,2));return o.Multiply([y,o.Add(d)])}else throw Pt(r,vr(o,d));case\"circle\":if(d.length===1){if(!W(o,d[0],X))throw Pt(r,vr(o,d));let{center:y,radius:g}=rh(o,d[0]);return o.SyntheticNativeFunction(\"circle\",[y,g])}else if(W(o,d[1],ue)){let y=o.Constant(0),g=o.Constant(1);return o.SyntheticNativeFunction(\"circle\",[d[0],o.SyntheticNativeFunction(\"distance\",[o.SyntheticNativeFunction(\"segmentGlider\",[d[1],y]),o.SyntheticNativeFunction(\"segmentGlider\",[d[1],g])])])}else return W(o,d[1],w)?o.SyntheticNativeFunction(\"circle\",[d[0],o.SyntheticNativeFunction(\"distance\",d)]):o.SyntheticNativeFunction(\"circle\",d);case\"center\":{let y=R0(o,d[0]);return o.SyntheticNativeFunction(\"center\",[y])}case\"radius\":{let y=R0(o,d[0]);return o.SyntheticNativeFunction(\"radius\",[y])}case\"glider\":{if(!W(o,d[1],I))throw Pt(r,vr(o,d));if(W(o,d[0],ue))return o.SyntheticNativeFunction(\"segmentGlider\",d);if(W(o,d[0],J))return o.SyntheticNativeFunction(\"lineGlider\",d);if(W(o,d[0],ge))return o.SyntheticNativeFunction(\"rayGlider\",d);if(W(o,d[0],Q))return o.SyntheticNativeFunction(\"circleGlider\",d);if(W(o,d[0],X))return o.SyntheticNativeFunction(\"arcGlider\",d);if(W(o,d[0],ye))return o.SyntheticNativeFunction(\"polygonGlider\",d);throw Pt(r,vr(o,d))}case\"intersection\":case\"strictintersection\":{let y=0;t===\"strictintersection\"&&((W(o,d[0],ue)||W(o,d[0],X))&&(y+=3),(W(o,d[1],ue)||W(o,d[1],X))&&(y+=12)),W(o,d[0],ge)&&(y+=1),W(o,d[1],ge)&&(y+=4);let g=DR(e,i,d);if(!g)return Kg(o,d,r,y);let h=ce(e,new b.Identifier(g[0]));return g[1]!==void 0&&(h=o.ListAccess([h,o.Constant(g[1])])),o.SyntheticNativeFunction(\"chooseNonIncidentPoint\",[h,Kg(o,[d[0],d[1]],r,y),Kg(o,[d[1],d[0]],r,y<<2&12|y>>2&3)])}case\"parallel\":case\"perpendicular\":{let y=xp(o,d[0]),g=[y,d[1]];if(W(o,y,J)&&W(o,d[1],w))return o.SyntheticNativeFunction(t,g);throw Pt(r,vr(o,d))}case\"translation\":{if(d.length===1&&W(o,d[0],w))return o.SyntheticNativeFunction(\"translation\",d);if(d.length===2&&W(o,d[0],w)&&W(o,d[1],w))return o.SyntheticNativeFunction(\"translation\",[o.Subtract([d[1],d[0]])]);if(d.length===2&&W(o,d[0],I)&&W(o,d[1],I))return o.SyntheticNativeFunction(\"translation\",[o.OrderedPair(d)]);throw Pt(r,vr(o,d))}case\"reflection\":{let y=xp(o,d[0]);if(W(o,y,J))return o.SyntheticNativeFunction(t,[y]);throw Pt(r,vr(o,d))}case\"apply\":return nh(o,d,r,!1);case\"normaldist\":case\"tdist\":case\"poissondist\":case\"binomialdist\":case\"uniformdist\":return o.Distribution(t,d);case\"pdf\":case\"cdf\":case\"mean\":case\"median\":case\"stdev\":case\"var\":case\"quantile\":{let y=d[0],g=o.getInstruction(y);if(!pe(g.valueType,Dt))throw Pt(r,vr(o,n));let h=d.slice(1);for(let x of h)if(!pe(o.getInstruction(x).valueType,I))throw Pt(r,vr(o,n));if(k(g.valueType)){let x=[],P=1/0;for(let M of d){let E=ur(o,M);x.push(E);let S=o.getInstruction(E);if(k(S.valueType)){let v=ar(o,E);if(v===void 0)throw Da(hi(o,E));P=Math.min(P,v)}}let D=[];for(let M=0;M<P;M++){let E=Ja(o,x[0],M),S=o.getInstruction(E);if(S.type!==42)throw Te();let v=[];for(let N of x.slice(1))k(o.getInstruction(N).valueType)?v.push(Ja(o,N,M)):v.push(N);D.push(Ii[S.symbol][t](o,E,v))}return o.List(D)}else{if(g.type!==42)throw Te();return Ii[g.symbol][t](o,y,h)}}case\"random\":{let y=d[0],g=d[1],h=o.getInstruction(d[0]),x=o.getInstruction(g);if(h.valueType!==tt)throw Te();if(x.valueType===Wt)throw Nd();let P;if(k(x.valueType))P=T0;else{if(x.valueType!==Dt)throw Vs();if(x.type!==42)throw Te();P=Ii[x.symbol][t]}if(d.length>2){let D=d[2];if(o.getInstruction(D).valueType!==I)throw Vs();if(d.length===4){let C=o.getInstruction(d[3]);if(C.valueType!==I)throw Vs();if(!It(C))throw jl(hi(o,d[3]));y=o.ExtendSeed(\"us\",[y,d[3]])}let E=o.Constant(1),S=o.SyntheticNativeFunction(\"round\",[o.SyntheticNativeFunction(\"validateSampleCount\",[D])]),v=o.BeginBroadcast([S]);y=o.ExtendSeed(\"lc\",[y,o.Subtract([v,E])]);let N=P(o,g,[y]),G=o.EndBroadcast([v,N]);return o.BroadcastResult(Qr(o.getInstruction(N).valueType),[G])}return P(o,g,[y])}case\"shuffle\":{let y=d[0],g=d[1],h=d[2];if(!k(o.getInstruction(g).valueType)||h!==void 0&&o.getInstruction(h).valueType!==I)throw Pt(r,rn(o,n.slice(1)));if(h!==void 0){if(!It(o.getInstruction(h)))throw jl(hi(o,h));y=o.ExtendSeed(\"us\",[y,h])}return o.SyntheticNativeFunction(\"shuffle\",[y,g])}case\"sort\":{let y=d.length===2?d[1]:d[0],g=o.getInstruction(y);if(!k(o.getInstruction(d[0]).valueType)||g.valueType!==Y&&g.valueType!==de)throw Pt(r,rn(o,n));if(ar(o,y)===0)return y;let x=o.SyntheticNativeFunction(\"min\",[xr(o,d[0]),xr(o,y)]);return y=o.ListAccess([y,th(e,o.List([o.Constant(1)]),o.List([x]),{stepMustBePositive:!0})]),o.SyntheticNativeFunction(\"elementsAt\",[d[0],o.SyntheticNativeFunction(\"sortPerm\",[y])])}case\"join\":{let y=[],g=!0;for(let C of d){let H=o.getInstruction(C);es(H)||(g=!1);let te=H.valueType;if(te!==de)if(k(te))y.push({isList:!0,index:C,elementType:ot(te)});else if(En(te))y.push({isList:!1,index:C,elementType:te});else throw Pt(r,rn(o,n))}if(y.length===0)return o.ConstantOfType(de,[]);for(let C of y)if(C.elementType!==y[0].elementType)throw Pt(r,rn(o,n));if(g){let C=[];for(let H of y){let te=o.getInstruction(ur(o,H.index));kP(te),H.isList?C.push(...te.value):C.push(te.value)}return o.ConstantOfType(Qr(y[0].elementType),C)}let h=o.Constant(0),x=o.Constant(1),P={};for(let C of y)C.isList&&P[C.index]===void 0&&(P[C.index]=xr(o,C.index));let D=o.SyntheticNativeFunction(\"total\",y.map(C=>C.isList?P[C.index]:x)),M=o.BeginBroadcast([D]),E=h,S=[],v=[];for(let C of y){let H=C.isList?o.ListAccess([C.index,o.Subtract([M,E])]):C.index;if(v.push(H),C!==y[y.length-1]){let te=C.isList?P[C.index]:x;E=o.Add([E,te]),S.push(o.LessEqual([M,E]))}}let N=v[v.length-1];for(let C=v.length-2;C>=0;C--)N=o.Piecewise([S[C],v[C],N]);let G=o.EndBroadcast([M,N]);return o.BroadcastResult(Qr(y[0].elementType),[G])}case\"unique\":{let y=d[0],g=o.getInstruction(y);if(!k(g.valueType)||g.valueType===Wt)throw Pt(\"unique\",[Z(g.valueType)]);return o.SyntheticNativeFunction(\"elementsAt\",[y,o.SyntheticNativeFunction(\"uniquePerm\",[y])])}case\"polygon\":{let y=d.map(g=>o.getInstruction(g));if(y.length===0){let g=o.ConstantOfType(Le,[]);return o.SyntheticNativeFunction(\"polygon\",[g])}else if(y.length===2&&pe(y[0].valueType,I)&&pe(y[1].valueType,I)){if(y[0].valueType===I&&y[1].valueType===I)throw Md();let g=o.OrderedPair(d);return o.SyntheticNativeFunction(\"polygon\",[g])}else return o.SyntheticNativeFunction(\"polygon\",d)}case\"directedangle\":return w0(e,d,r,n);case\"angle\":return o.SyntheticNativeFunction(\"undirectedAngleMarker\",[w0(e,d,r,n)]);case\"angles\":return o.SyntheticNativeFunction(\"polygonInteriorUndirectedAngles\",[d[0],ce(e,new b.Identifier(\"trigAngleMultiplier\"))]);case\"directedangles\":return o.SyntheticNativeFunction(\"polygonInteriorDirectedAngles\",[d[0],ce(e,new b.Identifier(\"trigAngleMultiplier\"))]);case\"abs\":return d.length===1&&(W(o,d[0],xe)||W(o,d[0],le))?o.SyntheticNativeFunction(\"abs\",[L0(e,d,r,n)]):eh(e,t,r,n,s);case\"measure\":return L0(e,d,r,n);case\"coterminal\":{if(W(o,d[0],le))return o.SyntheticNativeFunction(\"directedCoterminalAngle\",d);if(W(o,d[0],xe))return o.SyntheticNativeFunction(\"undirectedCoterminalAngle\",d);throw Pt(r,rn(o,n))}case\"histogram\":case\"dotplot\":case\"boxplot\":case\"ttest\":case\"ittest\":case\"stats\":case\"det\":case\"inv\":case\"transpose\":case\"rref\":case\"trace\":case\"points\":case\"lines\":case\"circles\":case\"polygons\":case\"rays\":case\"arcs\":throw qr(r);default:{let y=t;throw new Error(`Programming Error: unexpected compiler function ${y}`)}}}function vR(e,t,r,n,{isDotCall:i}){i&&(r-=1,n-=1,t=\".\"+t);let s=$i[e];s.isSeeded&&(r-=1,n-=1);let o;switch(i&&s.dotMinArityExampleArgs?o=t+s.dotMinArityExampleArgs:s.minArityExampleArgs&&(o=t+s.minArityExampleArgs),e){case\"pdf\":return i?Mr(t,r,n,o):Ll();case\"cdf\":return i?Mr(t,r,n,o):Sd();case\"tdist\":return Al();case\"random\":return Vs();case\"length\":case\"round\":case\"midpoint\":case\"circle\":case\"center\":case\"radius\":case\"glider\":case\"intersection\":case\"strictintersection\":case\"parallel\":case\"perpendicular\":case\"angle\":case\"directedangle\":case\"angles\":case\"directedangles\":case\"apply\":case\"translation\":case\"reflection\":case\"normaldist\":case\"poissondist\":case\"binomialdist\":case\"uniformdist\":case\"mean\":case\"median\":case\"stdev\":case\"var\":case\"quantile\":case\"sort\":case\"shuffle\":case\"join\":case\"unique\":case\"polygon\":case\"measure\":case\"abs\":case\"coterminal\":return Mr(t,r,n,o);case\"points\":case\"lines\":case\"circles\":case\"polygons\":case\"rays\":case\"arcs\":throw qr(t);case\"histogram\":case\"dotplot\":case\"boxplot\":case\"ttest\":case\"ittest\":case\"stats\":case\"det\":case\"inv\":case\"transpose\":case\"rref\":case\"trace\":throw Te();default:let a=e;throw new Error(`Unexpected compiler function ${a}`)}}function ER(e,t,r,n,{isDotCall:i}){i&&(r-=1,n-=1,t=\".\"+t);let s=$i[e];s.isSeeded&&(r-=1,n-=1);let o;switch(i&&s.dotMaxArityExampleArgs?o=t+s.dotMaxArityExampleArgs:s.maxArityExampleArgs&&(o=t+s.maxArityExampleArgs),e){case\"pdf\":return i?Mr(t,r,n,o):Ll();case\"cdf\":return i?Mr(t,r,n,o):Od();case\"tdist\":return Al();case\"random\":return Vs();case\"length\":case\"round\":case\"midpoint\":case\"glider\":case\"circle\":case\"center\":case\"radius\":case\"intersection\":case\"strictintersection\":case\"parallel\":case\"perpendicular\":case\"angle\":case\"directedangle\":case\"angles\":case\"directedangles\":case\"apply\":case\"translation\":case\"reflection\":case\"normaldist\":case\"poissondist\":case\"binomialdist\":case\"uniformdist\":case\"mean\":case\"median\":case\"stdev\":case\"var\":case\"quantile\":case\"sort\":case\"shuffle\":case\"join\":case\"unique\":case\"polygon\":case\"measure\":case\"abs\":case\"coterminal\":return Mr(t,r,n,o);case\"points\":case\"lines\":case\"circles\":case\"polygons\":case\"rays\":case\"arcs\":throw qr(t);case\"histogram\":case\"dotplot\":case\"boxplot\":case\"ttest\":case\"ittest\":case\"stats\":case\"det\":case\"inv\":case\"transpose\":case\"rref\":case\"trace\":throw Te();default:let a=e;throw new Error(`Unexpected compiler function ${a}`)}}function SR(e,t){var a,u;let{chunk:r,policy:n}=e;Rr(t.args);let i=Wo(e,t.args),s=!1,o;for(let l=0;l<i.length;l++){let p=r.getInstruction(i[l]).valueType;if(p===Ge){if(s=!0,o!==void 0)throw ga([Z(o),Z(Ge)])}else{if(s)throw ga([Z(Ge),Z(p)]);o=p}}if(s)return B0(e,i);{let l=(u=(a=n.dimensions)==null?void 0:a.call(n))!=null?u:2;if(l!==2)throw new Error(\"3D points not implemented.\");if(i.length!==l)throw Ld(l);return r.OrderedPair(i)}}function OR(e,t){let{chunk:r}=e;Rr(t.args);let n=Wo(e,t.args);if(n.length<2)throw qr(\",\");let i=r.getInstruction(n[0]).valueType;for(let s=1;s<n.length;s++){let o=r.getInstruction(n[s]).valueType;if(i!==o)throw ga([Z(i),Z(o)])}if(i===I)throw n.length===2?Rd():wd();return i===Ge?B0(e,n):r.List(n)}function B0(e,t){let{chunk:r}=e,n=[],i=[];for(let o of t){let a=r.getInstruction(o);switch(a.type){case 49:{Array.prototype.push.apply(n,a.symbols),Array.prototype.push.apply(i,a.args);break}case 1:{let l=a.value.updateRules;for(let c in l)n.push(c),i.push(r.ConstantOfType(l[c].valueType,l[c].value));break}default:{var s=hi(r,o);throw s.length>0?bd(s):Te()}}}return r.Action(n,i)}function V0(e,t){var r=e.frame[t];return r===Fr?Rl(t):e.policy.assignmentForbidden(t)?hd(t):r&&r.type===\"FunctionDefinition\"?Dl(t):gd(t).allowExport()}function NR(e,t){let{policy:r,frame:n,chunk:i,scope:s,parentNode:o,substitutionContext:a}=e,u=t._body,l=[],c=i.Constant(1),p=Object.create(n);Rr(t._inputLists);for(let{_symbol:M}of t._inputLists)p[M]=ty(M);let f=fi(s);for(let M=t._inputLists.length-1;M>=0;M--){let E=t._inputLists[M],S=E._symbol,v=ce($r(r,p,i,f,o,a),E.args[1]),N=i.getInstruction(v);if(!k(N.valueType))throw Qm(S,Z(N.valueType));let G=xr(i,v);l.push({symbol:S,assignedList:v,lengthIndex:G}),c=i.Multiply([c,G])}let m=i.Constant(1),d=i.BeginBroadcast([c],{inputListSymbols:l.map(M=>M.symbol)}),y=fi(s);Kr(y,t._index._symbol,d);let g=m;for(let M=l.length-1;M>=0;M--){let{symbol:E,assignedList:S,lengthIndex:v}=l[M],N;if(l.length===1)N=d;else{let C=i.SyntheticNativeFunction(\"floor\",[i.Divide([i.Subtract([d,m]),g])]);N=i.Add([i.SyntheticNativeFunction(\"mod\",[C,v]),m]),M>0&&(g=i.Multiply([g,v]))}let G=No(y,E);if(n[E]!==void 0||G!==void 0&&i.getInstruction(G).type!==2)throw ey(E);Kr(y,E,i.ListAccess([S,N]))}let h=Object.create(n);for(let M of l)h[M.symbol]=Fr;let x=ce($r(r,h,i,y,o,a),u),P=i.getInstruction(x);if(!En(P.valueType))throw Bs([Z(P.valueType)]);let D=i.EndBroadcast([d,x]);return i.BroadcastResult(Qr(P.valueType),[D])}function th(e,t,r,n){let{stepMustBePositive:i}=n,{chunk:s}=e;t=$o(s,t),r=$o(s,r);let o=s.getInstruction(t),a=s.getInstruction(r),u=Zn(s,t,\"Programming error: expected range start list to have constant length.\"),l=Zn(s,r,\"Programming error: expected range start list to have constant length.\");if(o.valueType!==Y||a.valueType!==Y)throw Ma();let c=s.Constant(1),p=s.Constant(0),f=s.ListAccess([t,c]),m=s.ListAccess([t,s.Constant(2)]),d=s.ListAccess([r,s.Constant(l)]),y=s.Subtract([d,f]),g=u>1?s.Subtract([m,f]):s.Piecewise([s.GreaterEqual([y,p]),c,s.Constant(-1)]),h=s.Add([c,s.SyntheticNativeFunction(\"round\",[s.Divide([y,g])])]),x=s.SyntheticNativeFunction(\"validateRangeLength\",[t,r,g,h]);i&&(x=s.Piecewise([s.GreaterEqual([g,p]),x,p]));let P=s.BeginBroadcast([x]),D=s.Add([f,s.Multiply([g,s.Subtract([P,c])])]),M=s.EndBroadcast([P,D]);return s.addComments({[f]:\"start\",[m]:\"second\",[d]:\"last\",[h]:\"proposedLength\",[g]:\"step\",[D]:\"body\"}),s.BroadcastResult(Qr(s.getInstruction(D).valueType),[M])}function xp(e,t){return W(e,t,ue)?e.SyntheticNativeFunction(\"lineFromSegment\",[t]):W(e,t,ge)?e.SyntheticNativeFunction(\"lineFromRay\",[t]):t}function R0(e,t){if(W(e,t,X)){let{center:r,radius:n}=rh(e,t);return e.SyntheticNativeFunction(\"circle\",[r,n])}return t}function rh(e,t){let r=e.SyntheticNativeFunction(\"arcCenter\",[t]),n=e.SyntheticNativeFunction(\"arcGlider\",[t,e.Constant(0)]),i=e.SyntheticNativeFunction(\"distance\",[r,n]);return{center:r,radius:i,startPoint:n}}function w0(e,t,r,n){let{chunk:i}=e;if(t.length===3&&W(i,t[0],w)&&W(i,t[1],w)&&W(i,t[2],w)){let s=i.Constant(1),o=i.Constant(2),a=t[0],u=t[1],l=t[2],c=i.Subtract([a,u]),p=i.Subtract([l,u]),f=i.OrderedPairAccess([c,s]),m=i.OrderedPairAccess([c,o]),d=i.OrderedPairAccess([p,s]),y=i.OrderedPairAccess([p,o]),g=i.SyntheticNativeFunction(\"arctan\",[m,f]),h=i.Subtract([i.Multiply([f,y]),i.Multiply([m,d])]),x=i.Add([i.Multiply([f,d]),i.Multiply([m,y])]),P=i.SyntheticNativeFunction(\"arctan\",[h,x]),D=i.SyntheticNativeFunction(\"abs\",[P]),M=i.Constant(Math.PI),E=i.Constant(Math.PI*2);return P=i.Piecewise([i.Equal([D,M]),M,i.Piecewise([i.Less([D,M]),P,i.Multiply([i.Multiply([i.SyntheticNativeFunction(\"sign\",[P]),i.Constant(-1)]),i.Subtract([E,D])])])]),i.SyntheticNativeFunction(\"directedAngleMarker\",[u,g,P,ce(e,new b.Identifier(\"trigAngleMultiplier\"))])}else throw Pt(r,rn(i,n))}function L0(e,t,r,n){let{chunk:i}=e,{valueType:s}=i.getInstruction(t[0]);if(pe(s,le))return i.SyntheticNativeFunction(\"directedAngleMarkerMeasure\",t);if(pe(s,xe))return i.SyntheticNativeFunction(\"undirectedAngleMarkerMeasure\",t);throw Pt(r,rn(i,n))}function nh(e,t,r,n){if(t.length===2&&W(e,t[0],Se)){if(W(e,t[1],w))return e.SyntheticNativeFunction(\"transformPoint\",t);if(W(e,t[1],ue))return e.SyntheticNativeFunction(\"transformSegment\",t);if(W(e,t[1],J))return e.SyntheticNativeFunction(\"transformLine\",t);if(W(e,t[1],ge))return e.SyntheticNativeFunction(\"transformRay\",t);if(W(e,t[1],Q))return e.SyntheticNativeFunction(\"transformCircle\",t);if(W(e,t[1],X))return e.SyntheticNativeFunction(\"transformArc\",t);if(W(e,t[1],ye))return e.SyntheticNativeFunction(\"transformPolygon\",t);if(W(e,t[1],xe))return e.SyntheticNativeFunction(\"transformAngleMarker\",t);if(W(e,t[1],le))return e.SyntheticNativeFunction(\"transformDirectedAngleMarker\",t)}throw n?Jf(r,vr(e,t.slice(1))):Pt(r,vr(e,t))}function Kg(e,t,r,n){let i=xp(e,t[0]),s=xp(e,t[1]),o=[i,s,e.ConstantOfType(I,n)];if(W(e,i,Q)){if(W(e,s,Q))return e.SyntheticNativeFunction(\"circleCircleIntersection\",o);if(W(e,s,X))return e.SyntheticNativeFunction(\"circleArcIntersection\",o);if(W(e,s,J))return e.SyntheticNativeFunction(\"circleLineIntersection\",o)}if(W(e,i,X)){if(W(e,s,Q))return e.SyntheticNativeFunction(\"arcCircleIntersection\",o);if(W(e,s,X))return e.SyntheticNativeFunction(\"arcArcIntersection\",o);if(W(e,s,J))return e.SyntheticNativeFunction(\"arcLineIntersection\",o)}if(W(e,i,J)){if(W(e,s,Q))return e.SyntheticNativeFunction(\"lineCircleIntersection\",o);if(W(e,s,X))return e.SyntheticNativeFunction(\"lineArcIntersection\",o);if(W(e,s,J))return e.SyntheticNativeFunction(\"lineLineIntersection\",o)}throw Pt(r,vr(e,t))}function DR(e,[t,r],[n,i]){let{chunk:s,frame:o}=e,a=s.getInstruction(n).valueType,u=s.getInstruction(i).valueType,l=f=>{let m=o[f];return m&&m!==Fr?m:xx(e.scope,f)},c=t.type===\"Identifier\"?l(t._symbol):t,p=r.type===\"Identifier\"?l(r._symbol):r;if(!(!c||!p))return D0({getGeometryTree:f=>hp(f),lookup:l,getValueType:f=>{let m=ce(e,f);return s.getInstruction(m).valueType},resolvesTo:(f,m)=>o[f]===m},c,a,p,u)}function RR(e,t){let{policy:r,frame:n,chunk:i,scope:s,parentNode:o,substitutionContext:a}=e,u=t._body,l=fi(s),c=Object.create(n);for(let f=0;f<t._assignments.length;f++){let m=t._assignments[f]._symbol,d=t._assignments[f].args[1],y=n[m];if(y){if(y.isError)throw y;if(y.type===\"FunctionDefinition\")throw nc(m);if(y===Fr)throw tc(m);if(r.assignmentForbidden(m))throw rc(m)}let g=ce(e,d),h=hi(i,g);for(let x of h)if(x.scope===\"free\")throw ay(h).allowExport();Kr(l,m,g,d),c[m]=Fr}return ce($r(r,c,i,l,o,oe(z({},a),{body:!0})),u)}var A0={points:Le,lines:Qt,segments:Ct,polygons:zt,circles:jt,arcs:Zt,angles:Et,directedangles:St,rays:Kt};function wR(e,t){let{chunk:r,frame:n}=e,i=n.construction;if(i.isError)throw i;if(i.type!==\"Construction\")throw Te();if(t.type!==\"Identifier\")throw Te();let s=t._symbol;if(!(s in A0))throw qr(\"construction\");let o=A0[s];if(i.args.length===0)return r.ConstantOfType(o,[]);let a=ot(o),u=[];for(let l of i.args)try{let c=ce(e,l);r.getInstruction(c).valueType===a&&u.push(c)}catch(c){if(c instanceof b.Base)continue;throw c}return r.List(u)}qe.prototype.buildIRExpression=function(e,t,r){try{var n=Pp({policy:e,frame:t,wrapInList:r&&r.wrapInList},this);return new Yt(n)}catch(i){return i instanceof qe?i:Te()}};O.prototype.buildIRExpression=function(e,t,r){return this};var G0=_u;function sh(e){for(var t=[],r=0;r<e.length;r++)t.push(Z(e[r].valueType));return t}function q0(e,t){var r=t.length,n=t[0];if(r<2)throw Rn(this._symbol);if(!G0(n.valueType,[Y,de]))throw Rn(this._symbol);if(r>2)throw wl(this._symbol,2)}b.Object3D.prototype.typeCheck=function(e,t){if(t.length<3)throw Mr(this._symbol,3,t.length)};b.Histogram.prototype.typeCheck=q0;b.DotPlot.prototype.typeCheck=q0;b.BoxPlot.prototype.typeCheck=function(e,t){var r=t.length,n=t[0];if(r===0)throw Rn(this._symbol);if(!G0(n.valueType,[Y,de]))throw Rn(this._symbol);if(r>1)throw Rn(this._symbol)};b.TTest.prototype.typeCheck=function(e,t){var r=this._symbol;if(t.length===0)throw Rn(r);if(t[0].valueType===de)throw Eo(r);if(t[0].valueType!==Y)throw Rn(r);if(t.length>2)throw wl(r,2);if(t[0].length<2)throw Eo(r);if(t[1]&&t[1].valueType!==I)throw Pt(r,sh(t))};b.IndependentTTest.prototype.typeCheck=function(e,t){var r=this._symbol;if(t.length!==2)throw To(r);if(!k(t[0].valueType)||!k(t[1].valueType))throw Ia(r);if(t[0].valueType===de||t[1].valueType===de)throw Eo(\"ittest\");if(t[0].valueType!==Y||t[1].valueType!==Y)throw Pt(r,sh(t));if(t[0].length<2||t[1].length<2)throw Eo(\"ittest\")},b.Stats.prototype.typeCheck=function(e,t){var r=t.length,n=t[0];if(r===0)throw Rn(this._symbol);if(n.valueType===de)throw Pt(this._symbol,sh(t));if(n.valueType!==Y)throw Rn(this._symbol);if(r>1)throw Rn(this._symbol)};var ro=function(e,t,r){r=r||0;var n=Array(r+1).join(\"  \"),i=n+\"  \";return`[\n`+i+e.map(function(s){return s.repr(t,r+1)}).join(`,\n`+i)+`\n`+n+\"]\"},hr=function(e,t){return t=t||\"\",\"\"+t+e};b.Expression.prototype.repr=function(e,t){return hr(this.type,e)+\"(\"+ro(this.args,e,t)+\")\"};b.IRExpression.prototype.repr=function(e,t){t=t||0;var r=Array(t+1).join(\"  \"),n=r+\"  \",i=this._chunk.print().split(`\n`);return i.pop(),hr(this.type,e)+\"(`\\n\"+n+i.join(`\n`+n)+`\n`+r+\"`)\"};b.DoubleInequality.prototype.repr=function(e,t){t=t||0;var r=Array(t+1).join(\"  \"),n=r+\"  \";return hr(this.type,e)+`([\n`+n+this.args[0].repr(e,t+1)+`,\n`+n+\"'\"+this.args[1]+`',\n`+n+this.args[2].repr(e,t+1)+`,\n`+n+\"'\"+this.args[3]+`',\n`+n+this.args[4].repr(e,t+1)+`\n`+r+\"])\"};b.Identifier.prototype.repr=function(e){return hr(this.type,e)+\"('\"+this._symbol+\"')\"};b.Constant.prototype.repr=function(e){return hr(this.type,e)+\"(\"+this.asValue()+\")\"};b.ExtendSeed.prototype.repr=function(e,t){return hr(this.type,e)+\"('\"+this.tag+\"', \"+ro(this.args,e,t)+\")\"};b.Seed.prototype.repr=function(e){return hr(this.type,e)+\"(\"+this.asValue()+\")\"};b.FunctionCall.prototype.repr=function(e,t){return hr(this.type,e)+\"('\"+this._symbol+\"', \"+ro(this.args,e,t)+\")\"};b.Assignment.prototype.repr=function(e,t){return hr(this.type,e)+\"(\"+new b.Identifier(this._symbol).repr(e,t)+\", \"+this._expression.repr(e,t)+\")\"};b.Regression.prototype.repr=b.Equation.prototype.repr=function(e,t){return hr(this.type,e)+\"(\"+this._lhs.repr(e,t)+\", \"+this._rhs.repr(e,t)+\")\"};b.FunctionDefinition.prototype.repr=function(e,t){return hr(this.type,e)+\"(\"+new b.Identifier(this._symbol).repr(e,t)+\", \"+ro(this._argSymbols.map(function(r){return new b.Identifier(r)}),e,t)+\", \"+this._expression.repr(e,t)+\")\"};b.Error.prototype.repr=function(e,t){return hr(this.type,e)+\"('\"+this._msg+\"')\"};b.Derivative.prototype.repr=function(e,t){return hr(this.type,e)+\"('\"+this._symbol+\"', \"+ro(this.args,e,t)+\")\"};b.SolvedEquation.prototype.repr=function(e,t){return hr(this.type,e)+\"('\"+this._symbol+\"', \"+this._expression.repr(e,t)+\")\"};b.OptimizedRegression.prototype.repr=function(e,t){return hr(this.type,e)+\"(\"+JSON.stringify(this.parameters)+\", \"+JSON.stringify(this.residuals)+\", \"+JSON.stringify(this.statistics)+\", \"+this.model.repr(e,t+1)+\", \"+JSON.stringify({isModelValid:this.isModelValid,residualVariable:this.residualVariable,residualSuggestionId:this.residualSuggestionId,shouldSuggestLogMode:this.shouldSuggestLogMode,isLinear:this.isLinear,parameterWarning:this.parameterWarning})+\")\"};b.Table.prototype.repr=function(e,t){return hr(this.type,e)+\"(\"+ro(this.columns,e,t)+\")\"};b.TableColumn.prototype.repr=function(e,t){return hr(this.type,e)+\"(\"+this.header.repr(e,t)+\", \"+this.length+\", \"+ro(this.values,e,t)+\")\"};b.Image.prototype.repr=function(e,t){var r=Array(t+1).join(\"  \"),n=r+\"  \";return hr(this.type,e)+`({\n`+n+\"center: \"+this.center.repr(e,t+1)+`,\n`+n+\"radianAngle: \"+this.radianAngle.repr(e,t+1)+`,\n`+n+\"width: \"+this.width.repr(e,t+1)+`,\n`+n+\"height: \"+this.height.repr(e,t+1)+`},\n`+n+\"opacity: \"+this.opacity.repr(e,t+1)+`,\n`+n+JSON.stringify(this.moveStrategy)+`\n`+r+\"})\"};b.Ticker.prototype.repr=function(e,t){var r=Array(t+1).join(\"  \"),n=r+\"  \";return hr(this.type,e)+`({\n`+n+\"handler: \"+this.handler.repr(e,t+1)+`,\n`+n+\"minStep: \"+this.minStep.repr(e,t+1)+`\n`+r+\"})\"};b.Slider.prototype.repr=function(e,t){var r=Array(t+1).join(\"  \"),n=r+\"  \";return hr(this.type,e)+`({\n`+n+\"sliderAssignment: \"+this.sliderAssignment.repr(e,t+1)+`,\n`+n+\"sliderMin: \"+(this.sliderMin&&this.sliderMin.repr(e,t+1))+`,\n`+n+\"sliderMax: \"+(this.sliderMax&&this.sliderMax.repr(e,t+1))+`,\n`+n+\"sliderStep: \"+(this.sliderStep&&this.sliderStep.repr(e,t+1))+`},\n`+r+\")\"};var Tp=function(e,t){return e.map(function(r){return r.substitute(t)})};b.Identifier.prototype.substitute=function(e){return e[this._symbol]?e[this._symbol]:this};b.FunctionCall.prototype.substitute=function(e){var t=e[this._symbol];if(t){if(t.type===\"Identifier\")return new b.FunctionCall(t,Tp(this.args,e));if(t.type===\"Constant\")return new b.Multiply([t,this.args.length===1?this.args[0].substitute(e):new b.Constant(NaN)])}return b.Expression.prototype.substitute.call(this,e)};b.Constant.prototype.substitute=function(e){return this};b.Expression.prototype.substitute=function(e){return this.copyWithArgs(Tp(this.args,e))};b.Derivative.prototype.substitute=function(e){var t=e[this._symbol];if(t){if(t.type===\"Identifier\")return new b.Derivative(t,Tp(this.args,e));throw new Error(\"Cannot substitute for a derivative variable with a non-Identifier\")}return new b.Derivative(this._symbol,Tp(this.args,e))};b.Expression.prototype.simpleFunctionExpression=function(){return this};b.Assignment.prototype.simpleFunctionExpression=function(){return this._expression};b.FunctionDefinition.prototype.simpleFunctionExpression=function(){return this._expression};b.Equation.prototype.simpleFunctionExpression=function(){return this.asComparator().simpleFunctionExpression()};var Ip={normaldist:{type:\"distribution\",symbol:\"normaldist\",params:[\"mean\",\"stdev\"],defaults:[\"0\",\"1\"],discrete:!1},tdist:{type:\"distribution\",symbol:\"tdist\",params:[\"dof\"],defaults:[void 0],discrete:!1},binomialdist:{type:\"distribution\",symbol:\"binomialdist\",params:[\"trials\",\"probsuccess\"],defaults:[void 0,\"0.5\"],discrete:!0},poissondist:{type:\"distribution\",symbol:\"poissondist\",params:[\"mean\"],defaults:[void 0],discrete:!0},uniformdist:{type:\"distribution\",symbol:\"uniformdist\",params:[\"min\",\"max\"],defaults:[\"0\",\"1\"],discrete:!1}},LR={Histogram:{type:\"visualization\",symbol:\"histogram\",params:[\"data\",\"binwidth\"],defaults:[void 0,\"1\"]},DotPlot:{type:\"visualization\",symbol:\"dotplot\",params:[\"data\",\"binwidth\"],defaults:[void 0,\"1\"]},BoxPlot:{type:\"visualization\",symbol:\"boxplot\",params:[\"data\"],defaults:[void 0]}};function k0(e){let t=Ti(e,{trailingComma:!0});return cs(t)}function cs(e){let t=e,r=LR[t.type];if(!r)switch(t.type===\"Assignment\"&&(t=t._expression),t.type){case\"FunctionCall\":{r=Ip[t._symbol];break}default:return}if(!r)return;let n={},i=r.params,s=t.args;for(let o=0;o<i.length;o++){let a=s[o];n[i[o]]=a&&a.getInputString()||\"\"}return oe(z({},r),{span:t.getInputSpan(),values:n})}function no(e){if(typeof e==\"string\")return e;if(e===void 0)return\"\";if(isNaN(e))return\"\\\\frac{0}{0}\";if(e===1/0)return\"\\\\infty\";if(e===-1/0)return\"-\\\\infty\";let t=e+\"\";return t=t.replace(/^1e\\+?([-\\d]+)/,\"10^{$1}\"),t=t.replace(/([-\\d\\.]+)e\\+?([-\\d]+)/,\"$1\\\\cdot 10^{$2}\"),t}function CR(e){let t=e+\"\";if(/\\d+\\.?\\d*e[\\+\\-]*\\d+/i.test(t)){let n=\"0\",i=String(t).toLowerCase().split(\"e\"),s=parseFloat(i[0]),o=parseInt(i[1],10),a=Math.abs(o),u=Math.abs(s).toString().split(\".\");if(o<0)t=\"0.\"+new Array(a).join(n)+u.join(\"\");else{var r=u[1];r&&(a=a-r.length),t=u.join(\"\")+new Array(a+1).join(n)}s<0&&(t=\"-\"+t)}return t}function s8(e,t=2){var r=CR(e),n=r.indexOf(\".\");if(n===-1)return r;for(var i,s=n+1;s<r.length;s++)if(i){if(r[s]!==i)break}else if(r[s]===\"0\"||r[s]===\"9\")i=r[s];else break;return r.substr(0,Math.max(n+5,s+t))}function $t(e,t){if(k(e)){let r=[];for(let n=0;n<t.length;n++)r.push($t(ot(e),t[n]));return`\\\\left[${r.join(\",\")}\\\\right]`}switch(e){case I:return no(t);case w:{let[r,n]=t;return`\\\\left(${no(r)},${no(n)}\\\\right)`}case et:return\"\\\\operatorname{rgb}\\\\left(\"+[$t(I,t[0]),$t(I,t[1]),$t(I,t[2])].join(\",\")+\"\\\\right)\";case ye:{let r=[];for(let n of t)r.push($t(w,n));return\"\\\\operatorname{polygon}\\\\left(\"+r.join(\",\")+\"\\\\right)\"}case ue:return\"\\\\operatorname{segment}\\\\left(\"+[$t(w,t[0]),$t(w,t[1])].join(\",\")+\"\\\\right)\";case J:return\"\\\\operatorname{line}\\\\left(\"+[$t(w,t[0]),$t(w,t[1])].join(\",\")+\"\\\\right)\";case ge:return\"\\\\operatorname{ray}\\\\left(\"+[$t(w,t[0]),$t(w,t[1])].join(\",\")+\"\\\\right)\";case Q:return\"\\\\operatorname{circle}\\\\left(\"+[$t(w,t[0]),$t(I,t[1])].join(\",\")+\"\\\\right)\";case X:return\"\\\\operatorname{arc}\\\\left(\"+[$t(w,t[0]),$t(w,t[1]),$t(w,t[2])].join(\",\")+\"\\\\right)\";case xe:return\"\\\\operatorname{angle}\\\\left(\"+[$t(w,t[0]),$t(I,t[1]),$t(I,t[2])].join(\",\")+\"\\\\right)\";case le:return\"\\\\operatorname{directedangle}\\\\left(\"+[$t(w,t[0]),$t(I,t[1]),$t(I,t[2])].join(\",\")+\"\\\\right)\";default:throw new Error(\"Cannot serialize a value of type \"+Z(e)+\".\")}}function oh(e){let t={};for(let r in e.updateRules)t[r]=ah(e,r);return t}function ah(e,t){let{valueType:r,value:n}=e.updateRules[t];return`${dr(t)}=${$t(r,n)}`}function _R(e){return e.isError?e.getError():e.asValue()===void 0?\"\":+e.asValue()}function FR(e,t,r){let n=[];for(var i=0;i<t.columns.length;i++){let s=r.columns[i],o=s.isError?[]:s.values.map(_R),a={dependent:!s.isIndependent,discrete:!!s.isIndependent,values:o};s.isError&&(a.error=s.getError()),n.push(a)}return{column_data:n}}function BR(e,t,r){let n={variables:[],errorMap:{},dimensions:{}};if(e.areAllScalesLinear()||(n.errorMap.scale=!0),r.center.isError&&(n.errorMap.center=!0),r.radianAngle.isError&&(n.errorMap.angle=!0),r.width.isError&&(n.errorMap.width=!0),r.height.isError&&(n.errorMap.height=!0),r.opacity.isError&&(n.errorMap.opacity=!0),Object.keys(n.errorMap).length>0)return n.variables=t.getSliderVariables(e,r),n;n.dimensions.x=[],n.dimensions.y=[],n.dimensions.radianAngle=[],n.dimensions.width=[],n.dimensions.height=[],n.dimensions.opacity=[];let i=[r.center,r.radianAngle,r.width,r.height,r.opacity];return i.some(o=>o&&o.valueType&&k(o.valueType))&&(n.is_concrete_list=!0),b.List.eachArgs(i,function(o){let a=o[0].asValue(),u=+o[1].asValue(),l=Math.atan2(Math.sin(u),Math.cos(u));n.dimensions.x.push(+a[0]),n.dimensions.y.push(+a[1]),n.dimensions.radianAngle.push(l),n.dimensions.width.push(+o[2].asValue()),n.dimensions.height.push(+o[3].asValue()),n.dimensions.opacity.push(Math.max(0,Math.min(1,+o[4].asValue())))}),(e.graphingEnabled()?t.getGraphMode(e,r):10)!==10&&(n.is_graphable=!0),r.moveStrategy&&(n.move_strategy=r.moveStrategy),t.center&&(t.center.type===\"Identifier\"?(n.center_reference_id=t.center.referencedStatementId,n.center_reference_symbol=t.center._symbol):t.center.type===\"ParenSeq\"&&r.center.valueType===w&&(n.center_is_point_literal=!0)),n}function VR(e,t,r){let n=r.handler,i=r.minStep,s={},o={};for(let p of n.getDependencies())e.validActionVariable(p)||(s[p]=!0);for(let p of i.getDependencies())o[p]=!0;let a;if(i.isError)a={status:\"error\",error:i.getError()};else{let p=i.asValue();typeof p==\"number\"&&!isNaN(p)&&p>=0?a={status:\"valid\",value:p}:a={status:\"error\",error:am().getError()}}let u=Object.keys(s);u.length>0&&(n=Tt(u).setDependencies(n.getDependencies()));let l;n.isError&&!lh(e,n)?l={status:\"error\",error:n.getError()}:n.isEmptyAction?l={status:\"empty\"}:l={status:\"maybe-valid\"};let c={handler:l,minStep:a,variables:[]};return io(c,e,z(z({},s),o)),c}function GR(){return{operator:\"=\",variables:[]}}function z0(e,t,r,n){if(r.isTable)return FR(e,r,n);if(r.isImage)return BR(e,r,n);if(r instanceof b.Ticker)return VR(e,r,n);let i=GR();if(n.isError&&!(r instanceof b.FunctionDefinition&&!n.blocksExport)){i.error=n.getError(),i.variables=r.getSliderVariables(e,n),i.is_single_identifier=r instanceof b.Identifier,n.actionValue&&(i.action_value=oh(n.actionValue));let l=uh(e,t,r,n);return Object.keys(l).length>0&&(i.geometry=uh(e,t,r,n)),i}if(n.valueType===et&&n.getDependencies().length===0){let l=n.asValue();i.rgb_value=Ws(l[0],l[1],l[2]).formatHex()}n.valueType===Ge&&n.getDependencies().length===0&&(i.action_value=oh(n.asValue())),n.moveStrategy&&(i.move_strategy=n.moveStrategy,i.default_drag_mode=n.defaultDragMode),r.isInequality()&&(i.is_inequality=!0),i.operator=r.getOperator(),n instanceof b.SolvedEquation?n._expression.asValue()!==!0&&n._expression.asValue()!==!1&&(i.assignment=n._symbol):r instanceof b.Assignment&&(i.assignment=r._symbol);let s=e.graphingEnabled()?r.getGraphMode(e,n):10;if(s!==10){i.is_graphable=!0,i.expression_type=r.getExpressionType(s,n.valueType),n.isShadeBetween()&&(i.is_shade_between=!0);let l=r.tableInfo(e,n);l&&(i.is_tableable=!0,i.table_info=l)}if(n.valueType!==void 0&&k(n.valueType)&&(i.is_concrete_list=!0,n.valueType===rr&&n.getDependencies().length===0)){let l=n.asValue();l&&(i.rgb_value=l.map(c=>Ws(c[0],c[1],c[2]).formatHex()))}if(i.variables=i.is_graphable?[]:r.getSliderVariables(e,n),i.is_single_identifier=r instanceof b.Identifier,n.isTypedConstant){let l=n.asTypedValue();i.typed_constant_value=l,(l.valueType===I||l.valueType===be)&&(i.constant_value=l.value),qR(l.valueType)&&(i.geometry=uh(e,t,r,n))}let o=n.getEvaluationInfo();if(o&&i.operator===\"=\"&&!r.isConstant&&!r.isFunction&&n.valueType!==be&&n.valueType!==pr&&!(r instanceof b.Equation)&&!(r instanceof b.And)&&(i.is_evaluable=!0,i.zero_values=o),n instanceof b.OptimizedRegression){let l=n,c={};for(var a in l.parameters)l.parameters.hasOwnProperty(a)&&(c[dr(a)]=+l.parameters[a].asValue());i.is_regression=!0,i.regression={parameters:c,residualVariable:dr(l.residualVariable),residualSuggestionId:l.residualSuggestionId,shouldSuggestLogMode:l.shouldSuggestLogMode,isLinear:l.isLinear,statistics:l.statistics,parameterWarning:l.parameterWarning}}let u=cs(r);return u&&u.discrete&&(i.is_discrete_distribution=!0),i}function qR(e){switch(e){case w:case Le:case J:case Qt:case ue:case Ct:case ge:case Kt:case Q:case jt:case X:case Zt:case ye:case zt:case xe:case Et:case le:case St:case Se:case Ir:return!0;default:return!1}}function uh(e,t,r,n){let i={};n.valueType!==void 0&&(i.valueType=n.valueType);let s=r;if(s.type===\"Assignment\"&&(i.identifier=r._symbol,s=r._expression),s.type===\"ListAccess\"&&s.index.type===\"Constant\"&&(i.listAccess=s.index.asValue(),s=s.list),i.identifier&&s.type===\"Identifier\"){let u=s._symbol,l=i.listAccess;i.assignmentRhsReference=[u,l]}let o=hp(s);if(o&&(i.call=o,n.valueType&&pe(n.valueType,Se)&&r.type===\"Assignment\")){let u=r._expression;i.transformation_preview_info={type:o.symbol,args:u.args.map(l=>l.tryGetConcreteTree(e,t).asTypedValue())}}let a=n.moveStrategy&&n.moveStrategy[0];return a&&\"initialValue\"in a&&a.initialValue!==void 0&&(i.gliderParameter=a.initialValue),i}function io(e,t,r){let n=e.variables;if(n&&n.length){let i={};for(let s of n)i[s]=!0;for(let s in r)i[s]=!0;r=i}e.variables=t.sliderVariables(Object.keys(r))}function lh(e,t){if(t.blocksExport)return!1;let r=t.getDependencies();if(r.length===0)return!1;for(let n of r)if(!e.validActionVariable(n))return!1;return!0}var sn={pointsOfInterest:!0,plotSingleVariableImplicitEquations:!0,plotImplicits:!0,plotInequalities:!0,sliders:!0};var _=class{constructor(t,r,n,i){this.policy=t,this.rawTree=n,this.concreteTree=i,this.evaluationState=z0(t,r,n,i)}exportTo(t,r){this.rawTree.exportTo(t,this.concreteTree,r)}graph(t,r){return this.rawTree.tryGraph(this.policy,this.concreteTree,t,r)}getGraphMode(){return this.rawTree.getGraphMode(this.policy,this.concreteTree)}getGraphInfo(){return this.rawTree.getGraphInfo(this.policy,this.concreteTree)}shouldIntersect(){if(!this.evaluationState.is_graphable||!this.rawTree.userData.shouldGraph||!sn.pointsOfInterest)return!1;var t=this.getGraphMode();return t===1||t===2}};var kR={X_OR_Y:{points:!1,lines:!0,fill:!1},SINGLE_POINT:{points:!0,lines:!1,fill:!1},POINT_LIST:{points:!0,lines:!1,fill:!1},PARAMETRIC:{points:!1,lines:!0,fill:!1},POLAR:{points:!1,lines:!0,fill:!1},IMPLICIT:{points:!1,lines:!0,fill:!1},POLYGON:{points:!1,lines:!0,fill:!0},HISTOGRAM:{points:!1,lines:!0,fill:!0},DOTPLOT:{points:!0,lines:!1,fill:!1},BOXPLOT:{points:!1,lines:!0,fill:!1},TTEST:{points:!1,lines:!1,fill:!1},STATS:{points:!1,lines:!1,fill:!1},CUBE:{points:!1,lines:!1,fill:!0},SPHERE:{points:!1,lines:!1,fill:!0}};function U0(e,t){if(e===void 0)return{points:!1,lines:!1,fill:!1};let r=kR[e];switch(e){case\"SINGLE_POINT\":return{points:!0,lines:!1,fill:!1};case\"POINT_LIST\":case\"DOTPLOT\":return{points:t.points===void 0?r.points:t.points,lines:t.lines===void 0?r.lines:t.lines,fill:!1};case\"PARAMETRIC\":case\"POLYGON\":case\"X_OR_Y\":case\"POLAR\":case\"IMPLICIT\":case\"HISTOGRAM\":case\"BOXPLOT\":case\"TTEST\":case\"STATS\":case\"CUBE\":case\"SPHERE\":return{points:!1,lines:t.lines===void 0?r.lines:t.lines,fill:t.fill===void 0?r.fill:t.fill};default:return e}}function H0(e){if(e===void 0)return!1;switch(e){case\"SINGLE_POINT\":case\"POINT_LIST\":case\"PARAMETRIC\":case\"POLYGON\":case\"X_OR_Y\":case\"POLAR\":case\"IMPLICIT\":return!0;case\"HISTOGRAM\":case\"BOXPLOT\":case\"DOTPLOT\":case\"TTEST\":case\"STATS\":case\"CUBE\":case\"SPHERE\":return!1;default:return e}}function $0(e,t){let{mappedArgIndex:r,mappedReturnIndex:n,solutionIndex:i}=t,s=[],o=qo(e,r),a=UR(e,o,n),u=i,l=e.NanOfType(e.getReturnType());for(let c=0;c<n;c++){let p=e.getInstruction(c);if(c===r){s.push(i);continue}if(!o[c]&&!e.isInClosedBlock(c)){s.push(c);continue}if(ne(p))s.push(e.copyInstruction(p));else{let f=zR(s,p.args);s.push(e.copyInstructionWithArgs(p,f)),p.type===31&&a[c]&&(u=e.Piecewise([f[0],u,l]))}}return u}function zR(e,t){let r=[];for(let n of t)r.push(e[n]);return r}function UR(e,t,r){let n=[];for(let i=0;i<r;i++)n.push(!1);n[r]=t[r];for(let i=r;i>=0;i--){if(!n[i]||!t[i])continue;let s=e.getInstruction(i);if(s.type===31)n[s.args[1]]=!0;else if(!ne(s))for(let o of s.args)n[o]=!0}return n}function W0(e,t){try{return HR(e,t)}catch(r){return r instanceof b.Base?r:Te()}}function HR({policy:e,frame:t},r){let n=Ho(t,r),i=[];for(let D=0;D<n.length;D++)i.push(I);let s=ih({policy:e,frame:t,argNames:n,argTypes:i}),{chunk:o}=s,a=ce(s,r.args[0]),u=ce(s,r.args[1]),l=r.getOperator(),c=l!==\"=\";switch(l){case\"<\":o.Less([a,u]);break;case\">\":o.Greater([a,u]);break;case\"<=\":o.LessEqual([a,u]);break;case\">=\":o.GreaterEqual([a,u]);break;case\"=\":o.Equal([a,u]);break}if(o.setReturnIndex(ur(o,o.getReturnIndex())),o.isConstant())return new Yt(o.close());let f=o.getInstruction(a).type!==2||Ho(t,r.args[1]).indexOf(o.argNames[a])!==-1;if(!sn.plotImplicits&&f)throw Mm();Dr[l].direction===-1?o.Subtract([u,a]):o.Subtract([a,u]),o.close();let m=o.getLiveArgNames();if(m.length===0)throw Te();if(m.length===1&&!c&&!sn.plotSingleVariableImplicitEquations)return Im();if(m.length>2)return Tt(e.sliderVariables(m)).setDependencies(m);if(c&&!e.validInequalityVariables(m))return Tm().setDependencies(m);let{localFrames:d,effectiveOrder:y,variableOfInterest:g}=$R(s,c);if(e.complicatedPolarImplicit(g,y))return vm().setDependencies(m);if(!e.validImplicitVariables(m))return qs();if(y>2)return new Yt(o.close());let h=[],x=[],P=1;for(let D=0;D<d.length;D++){let M=d[D],E=WR(M,c);P=E.length;for(let v of E){let N=M.chunk.copy();if(N.setReturnIndex(v),M.isRestrictedPolynomial){let{mappedArgIndex:G,mappedReturnIndex:C}=M;N.setReturnIndex($0(N,{mappedArgIndex:G,mappedReturnIndex:C,solutionIndex:N.getReturnIndex()}))}N.close(),h.push(new Yt(N))}let S=!1;for(let v of M.coefficients){let N=M.chunk.getInstruction(v);N.type===1&&N.value!==0&&(S=!0)}if(o.argNames.length!==2||S)x.push(void 0);else{let v=M.chunk.copy(),N=M.coefficients.slice();v.List(N),v.close();let G=k(o.getReturnType())?o.elementAt(D):o.copy(),H=G.argNames.indexOf(g)===0?1:0,te=G.getReturnIndex();G.Add([H,G.Multiply([G.Constant(0),te])]),x.push({coefficients:v,restriction:G})}}return new b.SolvedEquation(g,new b.List(h),x,P)}function $R(e,t){let r=e.chunk,n=e.policy,i=r.argNames,s=k(r.getReturnType()),o=[];e:for(let a=0;a<i.length;a++){let u=i[a],l=i.length>1&&!n.validSolvedVariable(u);o[a]={localFrames:[],effectiveOrder:0,variableOfInterest:u};let c=!t;if(l){o[a].effectiveOrder=1/0;continue}let p=s?r.getConstantListLength():1;if(p==null)throw new Error(\"Programming error: cannot solve a variable-length list expression\");for(let f=0;f<p;f++){let m=s?r.elementAt(f):r;if(m.polynomialOrder(u,{allowRestriction:c,allowClosedBlockReferences:!1})>2){o[a].effectiveOrder=1/0;continue e}let y=m.getPolynomialCoefficients(u);o[a].localFrames.push(y),o[a].effectiveOrder=Math.max(o[a].effectiveOrder,y.coefficients.length-1)}}return i.length===1?o[0]:(i[0]===\"y\"&&(o=[o[1],o[0]]),o[0].effectiveOrder===0?o[1]:o[1].effectiveOrder===0?o[0]:o[o[0].effectiveOrder<o[1].effectiveOrder?0:1])}function WR(e,t){return t?XR(e):YR(e)}function YR({chunk:e,coefficients:t}){let[r,n,i]=t,s=e.Constant(ie(0,1)),o=e.Constant(NaN);if(i===void 0){n===void 0&&(n=s);let a=e.Negative([e.Divide([r,n])]),u=e.Equal([n,s]);return[e.Piecewise([u,o,a])]}else{let a=e.Constant(ie(2,1)),u=e.Multiply([a,i]),l=e.Negative([n]),c=e.Subtract([e.Multiply([n,n]),e.Multiply([a,e.Multiply([u,r])])]),p=e.Equal([i,s]),f=e.getInstruction(c);if(f.type===1&&F(f.value)===0)return[e.Piecewise([p,o,e.Divide([l,u])])];{let m=e.SyntheticNativeFunction(\"sqrt\",[c]),d=e.Less([n,s]),y=e.Greater([n,s]),g=e.Divide([e.Add([l,m]),u]),h=e.Divide([e.Subtract([l,m]),u]),x=e.Negative([e.Divide([r,n])]);return[e.Piecewise([p,e.Piecewise([d,x,o]),h]),e.Piecewise([p,e.Piecewise([y,x,o]),g])]}}}function XR({chunk:e,coefficients:t}){let[r,n,i]=t,s=e.Constant(ie(0,1));i===void 0&&(i=s),n===void 0&&(n=s),r===void 0&&(r=s);let o=e.Constant(ie(2,1)),a=e.Constant(NaN),u=e.Constant(ie(1e305,1)),l=e.Negative([u]),c=e.Multiply([o,i]),p=e.Negative([n]),f=e.Subtract([e.Multiply([n,n]),e.Multiply([o,e.Multiply([c,r])])]),m=e.SyntheticNativeFunction(\"sqrt\",[f]),d=e.Divide([e.Add([p,m]),c]),y=e.Divide([e.Subtract([p,m]),c]),g=e.Negative([e.Divide([r,n])]),h=e.Equal([i,s]),x=e.Greater([i,s]),P=e.Equal([n,s]),D=e.Greater([n,s]),M=e.Less([n,s]),E=e.Greater([r,s]),S=e.Less([f,s]);return[e.Piecewise([h,e.Piecewise([M,g,a]),e.Piecewise([x,y,a])]),e.Piecewise([h,e.Piecewise([P,e.Piecewise([E,l,a]),a]),e.Piecewise([x,e.Piecewise([S,l,a]),d])]),e.Piecewise([h,e.Piecewise([P,e.Piecewise([E,u,a]),a]),e.Piecewise([x,e.Piecewise([S,u,a]),y])]),e.Piecewise([h,e.Piecewise([D,g,a]),e.Piecewise([x,d,a])])]}var L=function(){};L.version=\"1.2.6\";L._myIndexOf=function(t){var r=this.length,n;for(n=0;n<r;++n)if(this[n]===t)return n;return-1};L.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:L._myIndexOf;L.precision=4;L.largeArray=50;L.compile=function(){var e=Array.prototype.slice.call(arguments),t=e.pop();return t=\"return function (\"+e.join(\",\")+\") {\"+t+\"}\",new Function([\"numeric\"],t)(L)};L._dim=function(t){for(var r=[];typeof t==\"object\";)r.push(t.length),t=t[0];return r};L.dim=function(t){var r,n;return typeof t==\"object\"?(r=t[0],typeof r==\"object\"?(n=r[0],typeof n==\"object\"?L._dim(t):[t.length,r.length]):[t.length]):[]};L.mapreduce=function(t,r){return L.compile(\"x\",\"accum\",\"_s\",\"_k\",'if(typeof accum === \"undefined\") accum = '+r+`;\nif(typeof x === \"number\") { var xi = x; `+t+`; return accum; }\nif(typeof _s === \"undefined\") _s = numeric.dim(x);\nif(typeof _k === \"undefined\") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    `+t+`;\n    xi = x[i-1];\n    `+t+`;\n}\nif(i === 0) {\n    xi = x[i];\n    `+t+`\n}\nreturn accum;`)};L.mapreduce2=function(t,r){return L.compile(\"x\",`var n = x.length;\nvar i,xi;\n`+r+`\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    `+t+`\n}\nreturn accum;`)};L.rep=function(t,r,n){typeof n==\"undefined\"&&(n=0);var i=t[n],s=Array(i),o;if(n===t.length-1){for(o=i-2;o>=0;o-=2)s[o+1]=r,s[o]=r;return o===-1&&(s[0]=r),s}for(o=i-1;o>=0;o--)s[o]=L.rep(t,r,n+1);return s};L.dotMMsmall=function(t,r){var n,i,s,o,a,u,l,c,p,f,m,d,y,g;for(o=t.length,a=r.length,u=r[0].length,l=Array(o),n=o-1;n>=0;n--){for(c=Array(u),p=t[n],s=u-1;s>=0;s--){for(f=p[a-1]*r[a-1][s],i=a-2;i>=1;i-=2)m=i-1,f+=p[i]*r[i][s]+p[m]*r[m][s];i===0&&(f+=p[0]*r[0][s]),c[s]=f}l[n]=c}return l};L._getCol=function(t,r,n){var i=t.length,s;for(s=i-1;s>0;--s)n[s]=t[s][r],--s,n[s]=t[s][r];s===0&&(n[0]=t[0][r])};L.dotMMbig=function(t,r){var n=L._getCol,i=r.length,s=Array(i),o=t.length,a=r[0].length,u=new Array(o),l,c=L.dotVV,p,f,m,d;for(--i,--o,p=o;p!==-1;--p)u[p]=Array(a);for(--a,p=a;p!==-1;--p)for(n(r,p,s),f=o;f!==-1;--f)d=0,l=t[f],u[f][p]=c(l,s);return u};L.dotMV=function(t,r){var n=t.length,i=r.length,s,o=Array(n),a=L.dotVV;for(s=n-1;s>=0;s--)o[s]=a(t[s],r);return o};L.dotVM=function(t,r){var n,i,s,o,a,u,l,c,p,f,m,d,y,g,h,x,P,D,M;for(o=t.length,a=r[0].length,l=Array(a),s=a-1;s>=0;s--){for(f=t[o-1]*r[o-1][s],i=o-2;i>=1;i-=2)m=i-1,f+=t[i]*r[i][s]+t[m]*r[m][s];i===0&&(f+=t[0]*r[0][s]),l[s]=f}return l};L.dotVV=function(t,r){var n,i=t.length,s,o=t[i-1]*r[i-1];for(n=i-2;n>=1;n-=2)s=n-1,o+=t[n]*r[n]+t[s]*r[s];return n===0&&(o+=t[0]*r[0]),o};L.dot=function(t,r){var n=L.dim;switch(n(t).length*1e3+n(r).length){case 2002:return r.length<10?L.dotMMsmall(t,r):L.dotMMbig(t,r);case 2001:return L.dotMV(t,r);case 1002:return L.dotVM(t,r);case 1001:return L.dotVV(t,r);case 1e3:return L.mulVS(t,r);case 1:return L.mulSV(t,r);case 0:return t*r;default:throw new Error(\"numeric.dot only works on vectors and matrices\")}};L.diag=function(t){var r,n,i,s=t.length,o=Array(s),a;for(r=s-1;r>=0;r--){for(a=Array(s),n=r+2,i=s-1;i>=n;i-=2)a[i]=0,a[i-1]=0;for(i>r&&(a[i]=0),a[r]=t[r],i=r-1;i>=1;i-=2)a[i]=0,a[i-1]=0;i===0&&(a[0]=0),o[r]=a}return o};L.getDiag=function(e){var t=Math.min(e.length,e[0].length),r,n=Array(t);for(r=t-1;r>=1;--r)n[r]=e[r][r],--r,n[r]=e[r][r];return r===0&&(n[0]=e[0][0]),n};L.identity=function(t){return L.diag(L.rep([t],1))};L.pointwise=function(t,r,n){typeof n==\"undefined\"&&(n=\"\");var i=[],s,o=/\\[i\\]$/,a,u=\"\",l=!1;for(s=0;s<t.length;s++)o.test(t[s])?(a=t[s].substring(0,t[s].length-3),u=a):a=t[s],a===\"ret\"&&(l=!0),i.push(a);return i[t.length]=\"_s\",i[t.length+1]=\"_k\",i[t.length+2]='if(typeof _s === \"undefined\") _s = numeric.dim('+u+`);\nif(typeof _k === \"undefined\") _k = 0;\nvar _n = _s[_k];\nvar i`+(l?\"\":\", ret = Array(_n)\")+`;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee(`+t.join(\",\")+`,_s,_k+1);\n    return ret;\n}\n`+n+`\nfor(i=_n-1;i!==-1;--i) {\n    `+r+`\n}\nreturn ret;`,L.compile.apply(null,i)};L.pointwise2=function(t,r,n){typeof n==\"undefined\"&&(n=\"\");var i=[],s,o=/\\[i\\]$/,a,u=\"\",l=!1;for(s=0;s<t.length;s++)o.test(t[s])?(a=t[s].substring(0,t[s].length-3),u=a):a=t[s],a===\"ret\"&&(l=!0),i.push(a);return i[t.length]=\"var _n = \"+u+`.length;\nvar i`+(l?\"\":\", ret = Array(_n)\")+`;\n`+n+`\nfor(i=_n-1;i!==-1;--i) {\n`+r+`\n}\nreturn ret;`,L.compile.apply(null,i)};L._biforeach=function e(t,r,n,i,s){if(i===n.length-1){s(t,r);return}var o,a=n[i];for(o=a-1;o>=0;o--)e(typeof t==\"object\"?t[o]:t,typeof r==\"object\"?r[o]:r,n,i+1,s)};L._biforeach2=function e(t,r,n,i,s){if(i===n.length-1)return s(t,r);var o,a=n[i],u=Array(a);for(o=a-1;o>=0;--o)u[o]=e(typeof t==\"object\"?t[o]:t,typeof r==\"object\"?r[o]:r,n,i+1,s);return u};L._foreach=function e(t,r,n,i){if(n===r.length-1){i(t);return}var s,o=r[n];for(s=o-1;s>=0;s--)e(t[s],r,n+1,i)};L._foreach2=function e(t,r,n,i){if(n===r.length-1)return i(t);var s,o=r[n],a=Array(o);for(s=o-1;s>=0;s--)a[s]=e(t[s],r,n+1,i);return a};L.ops2={add:\"+\",sub:\"-\",mul:\"*\",div:\"/\",mod:\"%\",and:\"&&\",or:\"||\",eq:\"===\",neq:\"!==\",lt:\"<\",gt:\">\",leq:\"<=\",geq:\">=\",band:\"&\",bor:\"|\",bxor:\"^\",lshift:\"<<\",rshift:\">>\",rrshift:\">>>\"};L.opseq={addeq:\"+=\",subeq:\"-=\",muleq:\"*=\",diveq:\"/=\",modeq:\"%=\",lshifteq:\"<<=\",rshifteq:\">>=\",rrshifteq:\">>>=\",bandeq:\"&=\",boreq:\"|=\",bxoreq:\"^=\"};L.mathfuns=[\"abs\",\"acos\",\"asin\",\"atan\",\"ceil\",\"cos\",\"exp\",\"floor\",\"log\",\"round\",\"sin\",\"sqrt\",\"tan\",\"isNaN\",\"isFinite\"];L.mathfuns2=[\"atan2\",\"pow\",\"max\",\"min\"];L.ops1={neg:\"-\",not:\"!\",bnot:\"~\",clone:\"\"};L.mapreducers={any:[\"if(xi) return true;\",\"var accum = false;\"],all:[\"if(!xi) return false;\",\"var accum = true;\"],sum:[\"accum += xi;\",\"var accum = 0;\"],prod:[\"accum *= xi;\",\"var accum = 1;\"],norm2Squared:[\"accum += xi*xi;\",\"var accum = 0;\"],norminf:[\"accum = max(accum,abs(xi));\",\"var accum = 0, max = Math.max, abs = Math.abs;\"],norm1:[\"accum += abs(xi);\",\"var accum = 0, abs = Math.abs;\"],sup:[\"accum = max(accum,xi);\",\"var accum = -Infinity, max = Math.max;\"],inf:[\"accum = min(accum,xi);\",\"var accum = Infinity, min = Math.min;\"]};(function(){var e,t;for(e=0;e<L.mathfuns2.length;++e)t=L.mathfuns2[e],L.ops2[t]=t;for(e in L.ops2)if(L.ops2.hasOwnProperty(e)){t=L.ops2[e];var r,n,i=\"\";L.myIndexOf.call(L.mathfuns2,e)!==-1?(i=\"var \"+t+\" = Math.\"+t+`;\n`,r=function(s,o,a){return s+\" = \"+t+\"(\"+o+\",\"+a+\")\"},n=function(s,o){return s+\" = \"+t+\"(\"+s+\",\"+o+\")\"}):(r=function(s,o,a){return s+\" = \"+o+\" \"+t+\" \"+a},L.opseq.hasOwnProperty(e+\"eq\")?n=function(s,o){return s+\" \"+t+\"= \"+o}:n=function(s,o){return s+\" = \"+s+\" \"+t+\" \"+o}),L[e+\"VV\"]=L.pointwise2([\"x[i]\",\"y[i]\"],r(\"ret[i]\",\"x[i]\",\"y[i]\"),i),L[e+\"SV\"]=L.pointwise2([\"x\",\"y[i]\"],r(\"ret[i]\",\"x\",\"y[i]\"),i),L[e+\"VS\"]=L.pointwise2([\"x[i]\",\"y\"],r(\"ret[i]\",\"x[i]\",\"y\"),i),L[e]=L.compile(`var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric.`+e+\"VV, VS = numeric.\"+e+\"VS, SV = numeric.\"+e+`SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === \"object\") {\n      if(typeof y === \"object\") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === \"object\") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else `+n(\"x\",\"y\")+`\n}\nreturn x;\n`),L[t]=L[e],L[e+\"eqV\"]=L.pointwise2([\"ret[i]\",\"x[i]\"],n(\"ret[i]\",\"x[i]\"),i),L[e+\"eqS\"]=L.pointwise2([\"ret[i]\",\"x\"],n(\"ret[i]\",\"x\"),i),L[e+\"eq\"]=L.compile(`var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric.`+e+\"eqV, S = numeric.\"+e+`eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === \"object\") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n`)}for(e=0;e<L.mathfuns2.length;++e)t=L.mathfuns2[e],delete L.ops2[t];for(e=0;e<L.mathfuns.length;++e)t=L.mathfuns[e],L.ops1[t]=t;for(e in L.ops1)L.ops1.hasOwnProperty(e)&&(i=\"\",t=L.ops1[e],L.myIndexOf.call(L.mathfuns,e)!==-1&&Math.hasOwnProperty(t)&&(i=\"var \"+t+\" = Math.\"+t+`;\n`),L[e+\"eqV\"]=L.pointwise2([\"ret[i]\"],\"ret[i] = \"+t+\"(ret[i]);\",i),L[e+\"eq\"]=L.compile(\"x\",'if(typeof x !== \"object\") return '+t+`x\nvar i;\nvar V = numeric.`+e+`eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n`),L[e+\"V\"]=L.pointwise2([\"x[i]\"],\"ret[i] = \"+t+\"(x[i]);\",i),L[e]=L.compile(\"x\",'if(typeof x !== \"object\") return '+t+`(x)\nvar i;\nvar V = numeric.`+e+`V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n`));for(e=0;e<L.mathfuns.length;++e)t=L.mathfuns[e],delete L.ops1[t];for(e in L.mapreducers)L.mapreducers.hasOwnProperty(e)&&(t=L.mapreducers[e],L[e+\"V\"]=L.mapreduce2(t[0],t[1]),L[e]=L.compile(\"x\",\"s\",\"k\",t[1]+`if(typeof x !== \"object\") {    xi = x;\n`+t[0]+`\n    return accum;\n}if(typeof s === \"undefined\") s = numeric.dim(x);\nif(typeof k === \"undefined\") k = 0;\nif(k === s.length-1) return numeric.`+e+`V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n`+t[0]+`\n}\nreturn accum;\n`))})();L.inv=function(y){var r=L.dim(y),n=Math.abs,i=r[0],s=r[1],o=L.clone(y),a,u,l=L.identity(i),c,p,f,m,d,y;for(m=0;m<s;++m){var g=-1,h=-1;for(f=m;f!==i;++f)d=n(o[f][m]),d>h&&(g=f,h=d);for(u=o[g],o[g]=o[m],o[m]=u,p=l[g],l[g]=l[m],l[m]=p,y=u[m],d=m;d!==s;++d)u[d]/=y;for(d=s-1;d!==-1;--d)p[d]/=y;for(f=i-1;f!==-1;--f)if(f!==m){for(a=o[f],c=l[f],y=a[m],d=m+1;d!==s;++d)a[d]-=u[d]*y;for(d=s-1;d>0;--d)c[d]-=p[d]*y,--d,c[d]-=p[d]*y;d===0&&(c[0]-=p[0]*y)}}return l};L.det=function(t){var r=L.dim(t);if(r.length!==2||r[0]!==r[1])throw new Error(\"numeric: det() only works on square matrices\");var n=r[0],i=1,s,o,a,u=L.clone(t),l,c,p,f,m,d,y;for(o=0;o<n-1;o++){for(a=o,s=o+1;s<n;s++)Math.abs(u[s][o])>Math.abs(u[a][o])&&(a=s);for(a!==o&&(f=u[a],u[a]=u[o],u[o]=f,i*=-1),l=u[o],s=o+1;s<n;s++){for(c=u[s],p=c[o]/l[o],a=o+1;a<n-1;a+=2)m=a+1,c[a]-=l[a]*p,c[m]-=l[m]*p;a!==n&&(c[a]-=l[a]*p)}if(l[o]===0)return 0;i*=l[o]}return i*u[o][o]};L.transpose=function(t){var r,n,i=t.length,s=t[0].length,o=Array(s),a,u,l;for(n=0;n<s;n++)o[n]=Array(i);for(r=i-1;r>=1;r-=2){for(u=t[r],a=t[r-1],n=s-1;n>=1;--n)l=o[n],l[r]=u[n],l[r-1]=a[n],--n,l=o[n],l[r]=u[n],l[r-1]=a[n];n===0&&(l=o[0],l[r]=u[0],l[r-1]=a[0])}if(r===0){for(a=t[0],n=s-1;n>=1;--n)o[n][0]=a[n],--n,o[n][0]=a[n];n===0&&(o[0][0]=a[0])}return o};L.negtranspose=function(t){var r,n,i=t.length,s=t[0].length,o=Array(s),a,u,l;for(n=0;n<s;n++)o[n]=Array(i);for(r=i-1;r>=1;r-=2){for(u=t[r],a=t[r-1],n=s-1;n>=1;--n)l=o[n],l[r]=-u[n],l[r-1]=-a[n],--n,l=o[n],l[r]=-u[n],l[r-1]=-a[n];n===0&&(l=o[0],l[r]=-u[0],l[r-1]=-a[0])}if(r===0){for(a=t[0],n=s-1;n>=1;--n)o[n][0]=-a[n],--n,o[n][0]=-a[n];n===0&&(o[0][0]=-a[0])}return o};L.norm2=function(t){return Math.sqrt(L.norm2Squared(t))};L.linspace=function(t,r,n){if(typeof n==\"undefined\"&&(n=Math.max(Math.round(r-t)+1,1)),n<2)return n===1?[t]:[];var i,s=Array(n);for(n--,i=n;i>=0;i--)s[i]=(i*r+(n-i)*t)/n;return s};L.getBlock=function(t,r,n){var i=L.dim(t);function s(o,a){var u,l=r[a],c=n[a]-l,p=Array(c);if(a===i.length-1){for(u=c;u>=0;u--)p[u]=o[u+l];return p}for(u=c;u>=0;u--)p[u]=s(o[u+l],a+1);return p}return s(t,0)};L.setBlock=function(t,r,n,i){var s=L.dim(t);function o(a,u,l){var c,p=r[l],f=n[l]-p;if(l===s.length-1)for(c=f;c>=0;c--)a[c+p]=u[c];for(c=f;c>=0;c--)o(a[c+p],u[c],l+1)}return o(t,i,0),t};L.getRange=function(t,r,n){var i=r.length,s=n.length,o,a,u=Array(i),l,c;for(o=i-1;o!==-1;--o)for(u[o]=Array(s),l=u[o],c=t[r[o]],a=s-1;a!==-1;--a)l[a]=c[n[a]];return u};L.blockMatrix=function(t){var r=L.dim(t);if(r.length<4)return L.blockMatrix([t]);var n=r[0],i=r[1],s,o,a,u,l;for(s=0,o=0,a=0;a<n;++a)s+=t[a][0].length;for(u=0;u<i;++u)o+=t[0][u][0].length;var c=Array(s);for(a=0;a<s;++a)c[a]=Array(o);var p=0,f,m,d,y,g;for(a=0;a<n;++a){for(f=o,u=i-1;u!==-1;--u)for(l=t[a][u],f-=l[0].length,d=l.length-1;d!==-1;--d)for(g=l[d],m=c[p+d],y=g.length-1;y!==-1;--y)m[f+y]=g[y];p+=t[a][0].length}return c};L.tensor=function(t,r){if(typeof t==\"number\"||typeof r==\"number\")return L.mul(t,r);var n=L.dim(t),i=L.dim(r);if(n.length!==1||i.length!==1)throw new Error(\"numeric: tensor product is only defined for vectors\");var s=n[0],o=i[0],a=Array(s),u,l,c,p;for(l=s-1;l>=0;l--){for(u=Array(o),p=t[l],c=o-1;c>=3;--c)u[c]=p*r[c],--c,u[c]=p*r[c],--c,u[c]=p*r[c],--c,u[c]=p*r[c];for(;c>=0;)u[c]=p*r[c],--c;a[l]=u}return a};L.epsilon=2220446049250313e-31;L.LU=function(e,t){t=t||!1;var r=Math.abs,n,i,s,o,a,u,l,c,p,f=e.length,m=f-1,d=new Array(f);for(t||(e=L.clone(e)),s=0;s<f;++s){for(l=s,u=e[s],p=r(u[s]),i=s+1;i<f;++i)o=r(e[i][s]),p<o&&(p=o,l=i);for(d[s]=l,l!=s&&(e[s]=e[l],e[l]=u,u=e[s]),a=u[s],n=s+1;n<f;++n)e[n][s]/=a;for(n=s+1;n<f;++n){for(c=e[n],i=s+1;i<m;++i)c[i]-=c[s]*u[i],++i,c[i]-=c[s]*u[i];i===m&&(c[i]-=c[s]*u[i])}}return{LU:e,P:d}};L.LUsolve=function(t,r){var n,i,s=t.LU,o=s.length,a=L.clone(r),u=t.P,l,c,p,f;for(n=o-1;n!==-1;--n)a[n]=r[n];for(n=0;n<o;++n)for(l=u[n],u[n]!==n&&(f=a[n],a[n]=a[l],a[l]=f),c=s[n],i=0;i<n;++i)a[n]-=a[i]*c[i];for(n=o-1;n>=0;--n){for(c=s[n],i=n+1;i<o;++i)a[n]-=a[i]*c[i];a[n]/=c[n]}return a};L.solve=function(t,r,n){return L.LUsolve(L.LU(t,n),r)};var At=L;function JR(e,t){let r=e.length,n=t.length,i=0,s=0;for(let a=n-r;a<n;a++)i+=e[a+r-n]*t[a],s+=e[a+r-n]*e[a+r-n];let o=i/s;for(let a=n-r;a<n;a++)t[a]=2*o*e[a+r-n]-t[a]}function jR(e,t,r){let n=e.length,i=t.length,s=0,o=0;for(let u=i-n;u<i;u++)s+=e[u+n-i]*t[u][r],o+=e[u+n-i]*e[u+n-i];let a=s/o;for(let u=i-n;u<i;u++)t[u][r]=2*a*e[u+n-i]-t[u][r]}function ZR(e,t,r,n){let i=Array(e.length-t);if(i.length===1)return i[0]=1,i;if(n===0){i[0]=1;for(let o=1;o<i.length;o++)i[o]=0;return i}let s=e[t][r]<0?-1:1;i[0]=e[t][r]+s*Math.sqrt(n);for(let o=t+1;o<e.length;o++)i[o-t]=e[o][r];return i}function QR(e,t,r){let n=0;for(;t<e.length;t++)n+=e[t][r]*e[t][r];return n}function Mp(e,t){if(!t||!t.mutateInput){let s=e;e=Array(e.length);for(let o=0;o<s.length;o++)e[o]=s[o].slice()}let r=Math.min(e.length,e[0].length),n=Array(r),i=[];for(let s=0;s<r;s++){let o=-1/0,a=s;for(let l=s;l<e[s].length;l++){let c=QR(e,s,l);c>o&&(o=c,a=l)}if(n[s]=a,a!==s)for(let l=0;l<e.length;l++){let c=e[l][a];e[l][a]=e[l][s],e[l][s]=c}let u=ZR(e,s,s,o);for(let l=s;l<e[s].length;l++)jR(u,e,l);i.push(u)}return{reflectors:i,r:e,p:n}}function Y0(e,t,r){let{reflectors:n,r:i,p:s}=e,o=t.slice();for(let l=0;l<n.length;l++)JR(n[l],o);for(let l=n.length;l<i[0].length;l++)o[l]=0;o.length=i[0].length;let a=Math.pow(2,-52),u=r.regularize?a*Math.abs(i[0][0])*Math.max(i.length,i[0].length):0;for(let l=n.length-1;l>=0;l--){let c=i[l];if(Math.abs(c[l])<=u)o[l]=0;else{for(let p=l+1;p<n.length;p++)o[l]-=o[p]*c[p];o[l]/=c[l]}}for(let l=s.length-1;l>=0;l--)if(s[l]!==l){let c=o[l];o[l]=o[s[l]],o[s[l]]=c}return o}function KR(e,t,r){let n=Array(e.r[0].length);for(let s=0;s<n.length;s++)n[s]=Array(t[0].length);let i=Array(t.length);for(let s=0;s<t[0].length;s++){for(let a=0;a<t.length;a++)i[a]=t[a][s];let o=Y0(e,i,r);for(let a=0;a<o.length;a++)n[a][s]=o[a]}return n}function so(e,t,r){return Array.isArray(t[0])?KR(e,t,r):Y0(e,t,r)}function ew(e){let t=e.r,r=Math.min(t.length,t[0].length),n=t[0][0],i=t[r-1][r-1];return n===0?1/0:Math.abs(n/i)}function X0(e){let t=Math.pow(2,-52);return Math.max(e.r.length,e.r[0].length)*t*ew(e)<1}var tw=Math.pow(2,-52);function Ep(e){for(let t of e)for(let r of t)if(!Ot(r))return!1;return!0}function rw(e){let t=[];for(let r of e)t.push(r.slice());return t}function j0(e){let{numRows:t,numCols:r}=vp(e),n=[];for(let i=0;i<r;i++)n.push([]);for(let i=0;i<t;i++)for(let s=0;s<r;s++)n[s].push(e[i][s]);return n}function vp(e){let t=e.length,r=t>0?e[0].length:0;return{numRows:t,numCols:r}}function nw(){throw new Error(\"Matrix dimension mismatch\")}function ch(e,t){let r=vp(e),n=vp(t);r.numCols!==n.numRows&&nw();let i=[];for(let s=0;s<r.numRows;s++){let o=[];for(let a=0;a<n.numCols;a++){let u=ie(0,1);for(let l=0;l<e[s].length;l++)u=oi(u,ai(e[s][l],t[l][a]));o.push(u)}i.push(o)}return i}function Z0(e){let t=rw(e);return sw(t),t}function iw(e){let t=0;for(let r of e)for(let n of r){let i=Math.abs(F(n));if(!isFinite(i))return NaN;i>t&&(t=i)}return t}function J0(e){for(let t=0;t<e.length;t++)for(let r=0;r<e[t].length;r++)e[t][r]=NaN}function sw(e){let{numRows:t,numCols:r}=vp(e),n=iw(e);if(!isFinite(n))return J0(e),{determinant:NaN,rank:0};let i=Math.max(t,r)*n*tw,s=ie(1,1),o=0,a=0;for(;o<t&&a<r;){let u=o,l=Math.abs(F(e[o][a]));for(let p=o+1;p<t;p++){let f=Math.abs(F(e[p][a]));(!isFinite(f)||f>l)&&(l=f,u=p)}if(!isFinite(l))return J0(e),{determinant:NaN,rank:0};if(l===0){s=ie(0,1),a+=1;continue}if(!Ot(e[u][a])&&l<i){for(let p=o;p<t;p++)e[o][p]=0;s=0,a+=1;continue}if(u!==o){s=cn(s);let p=e[o];e[o]=e[u],e[u]=p}for(let p=0;p<t;p++){if(p===o)continue;let f=$n(e[p][a],e[o][a]);e[p][a]=ie(0,1);for(let m=a+1;m<r;m++)e[p][m]=Hn(e[p][m],ai(f,e[o][m]))}let c=e[o][a];s=ai(s,c),e[o][a]=ie(1,1);for(let p=a+1;p<r;p++)e[o][p]=$n(e[o][p],c);o+=1,a+=1}return{rank:o,determinant:o===t&&o===r?s:ie(0,1)}}function Op(e,t){let r=[];for(let n=0;n<t;n++)r.push(e);return r}function fs(e,t){let r=ps(e,t),n=0;for(let i of r){let s=i;n+=s*s}return n/r.length}function ps(e,t){return e.apply(void 0,t)}function Sp(e,t){let r=[];for(let n of e){let i=n.apply(void 0,t);r.push(i)}return r}function Q0(e,t){let r=[];for(let n=0;n<e.length;n++)t[n]&&r.push(e[n]);return r}function ph(e,t,r){let n=[];for(let i=0,s=0;i<e.length;i++){let o=0;r[i]&&(o=t[s],s+=1),n.push(e[i]+o)}return n}function mh(e,t){let r=t.solution.map(u=>Math.abs(u)<1e-6?0:u),n=t.solution.map(()=>0),i=fs(e,r),s=ps(e,r),o=ps(e,n),a=0;for(let u=0;u<s.length;u++){let l=o[u]*1e-15;a+=Math.abs(s[u]*l)+l*l}return a/=s.length,isFinite(a)||(a=0),isFinite(t.MSE)&&!isFinite(i)?t:i<=t.MSE+a?{solution:r,MSE:i}:t}function yh(e,t){if(!Ep(t)||!Ep([e]))return;let r=j0(t),n=ch([e],r)[0],i=ch(t,r);for(let l=0;l<n.length;l++)i[l].push(cn(n[l]));let s=Z0(i);if(!Ep(s))return;let o=[],a=n.length,u=0;for(let l of s)for(;u<a;)if(F(l[u])===1){o.push(l[l.length-1]),u++;break}else o.push(ie(0,1)),u++;for(;u<a;)o.push(ie(0,1)),u++;return o}function gh(e,t){let r=Op(0,t.length),n=Sp(t,r),i=Mp(At.transpose(n),{mutateInput:!0});for(var s=0;s<2;s++){let l=ps(e,r),c=At.neg(so(i,l,{regularize:!1}));r=At.add(r,c)}let o=fs(e,r);if(X0(i))return{solution:r,MSE:o};let a=Op(0,t.length);for(var s=0;s<2;s++){let c=ps(e,a),p=At.neg(so(i,c,{regularize:!0}));a=At.add(a,p)}let u=fs(e,a);return .999*u<=o?{solution:a,MSE:u}:{solution:r,MSE:o}}function fh(e,t,r,n){let i=n.maxIterations,s=n.linearSubset||Op(!1,r.length),o=At.not(s),a=Q0(t,s),u=Q0(t,o),l=2,c=.1,p=r,f=0,m=.001,d;if(At.any(s)){let h=At.transpose(Sp(a,p)),x=Mp(h);d={Jv:h,F:x};let P=ps(e,p),D=At.neg(so(x,P,{regularize:!0}));p=ph(p,D,s)}let y=!1,g=fs(e,p);for(;f<i&&!y&&isFinite(g);){let h=ps(e,p),x=Sp(u,p),P=At.transpose(x),D,M;if(d){let{F:v,Jv:N}=d;D=At.dot(x,At.sub(h,At.dot(N,so(v,h,{regularize:!0})))),M=At.dot(x,At.sub(P,At.dot(N,so(v,P,{regularize:!0}))))}else D=At.dot(x,h),M=At.dot(x,P);let E=p,S=!1;for(;f<i&&!y&&!S;){f+=1;let v=At.add(M,At.diag(Op(m,u.length))),N=At.neg(At.solve(v,D,!0));E=ph(p,N,o),y=At.all(At.eq(E,p));let G;if(d){let H=At.transpose(Sp(a,E)),te=Mp(H);G={Jv:H,F:te};let je=ps(e,E),Me=At.neg(so(te,je,{regularize:!0}));E=ph(E,Me,s)}let C=fs(e,E);S=C<g,S?(p=E,g=C,d=G,m*=c):(m=Math.max(m,1e-64),m*=l)}}return{solution:p,MSE:g}}var dh=[18.9,.105,.0113,.089,4.414,.373,.06,.149,1.84,9.26,5,.7,.2,1.13,2.61,1,.007,30,120,1500,4e-4,7.23,-1,-.0081,-.03,-28.6,-1.71,-.4,-6.94,-.777,-500],aw=function(e){let t=e*503%dh.length;return dh[t]},uw=function(e){let t=[];for(let r=0;r<dh.length;r++){let n=[];for(let i=0;i<e;i++)r===0&&e!==1?n[i]=0:r===1&&e!==1?n[i]=1:n[i]=aw(r*e+i);t.push(n)}return t},K0=function(e,t,r,n,i){let s=[];for(let a of r)s.push({soln:fh(e,t,a,i),initialGuess:a});s.sort(function(a,u){return isNaN(a.soln.MSE)?1:isNaN(u.soln.MSE)?-1:a.soln.MSE-u.soln.MSE});let o=[];for(let a=0;a<n;a++)o.push(s[a].initialGuess);return o};function lw(e,t,r,n){if(!t||t.type!==\"known\")return e;let i=t.bounds;return i[0]===-1/0&&i[1]===1/0?e:i[0]===-1/0?i[1]-Math.exp(-e):i[1]===1/0?i[0]+Math.exp(e):r/(n-1)*i[1]+(n-1-r)/(n-1)*i[0]}var eM=[3,5,7,11,13,17,19];function cw(e,t){let r=[];for(let i=0;i<e.length;i++){let s=e[i],o=[];for(let a=0;a<s.length;a++){var n=eM[a%eM.length]*i%e.length;o.push(lw(s[a],t[a],n,e.length))}r.push(o)}return r}function tM(e,t,r){r||(r={});let{linearSubset:n,bounds:i,preferredInitialGuess:s}=r,o=uw(t.length);i&&(o=cw(o,i));let a=K0(e,t,o,5,{maxIterations:3,linearSubset:n}),u=K0(e,t,a,1,{maxIterations:60,linearSubset:n}),l=fh(e,t,u[0],{maxIterations:250,linearSubset:n});if(!s)return l;let c=fh(e,t,s,{maxIterations:100,linearSubset:n});return isFinite(c.MSE)&&(c.MSE<l.MSE||Nr(c.MSE,l.MSE,8))?c:l}function hh(e){return{chunk:e,isLazy:!0}}function rM(e){return e.slice()}function Dp(e){if(!e.isLazy)return e;let t=e.chunk.copy();return t.reopenFinalBlock(),{chunk:t,forwardParameterMap:rM,reverseParameterMap:rM,isLazy:!1,valueMap:gw(e.chunk.instructionsLength()),replacementMask:Yo(e.chunk.argNames.length)}}function nM(e){let{chunk:t,forwardParameterMap:r,reverseParameterMap:n,isLazy:i,valueMap:s,replacementMask:o,didShiftScale:a}=e;return{chunk:t.copy(),forwardParameterMap:r,reverseParameterMap:n,isLazy:i,valueMap:s.slice(),replacementMask:o.slice(),didShiftScale:a}}function pw(e){var t=1/0,r=-1/0,n=e.length;for(let i of e)t=Math.min(t,i),r=Math.max(r,i);return{min:t,max:r,length:n}}function oM(e){let t=e.getInstruction(e.getReturnIndex());if(t.type!==48)return;let r=t.args[0],n=e.getReturnIndex()-r,i=e.getInstruction(r);if(i.args.length!==2)return;let s=i.args[0],o=i.args[n],a=[],u=[];a.push(s),u.push({min:1,max:Zn(e,e.getReturnIndex(),\"Programming error: cannot optimize regression on non-constant-length list\"),length:Zn(e,e.getReturnIndex(),\"Programming error: cannot optimize regression on non-constant-length list\")});let l=!1,c=!1;for(let g=s+1;g<=o;g++){let h=e.getInstruction(g);if(h.type===39||h.type===41||h.type===40){if(h.args[1]!==s)continue;let x=h.args[0];if(e.getInstruction(x).valueType!==Y||!It(e.getInstruction(x)))continue;let P=ht(e,x),D=pw(P);if(!isFinite(D.min)||!isFinite(D.max))continue;a.push(g),u.push(D)}else if(h.type===37)h.symbol===\"exp\"?c=!0:sM(h)&&(l=!0);else if(h.type===12||h.type===13)c=!0;else if(_r(h)||mr(h))return}if(a.length===0||!c&&!l)return;let p=[];for(let g=0;g<=o;g++){let h=a.indexOf(g);if(h!==-1){let x=Yo(a.length);x[h]=!0,p.push(x)}else p.push(Np(e,p,a.length,g))}let f=[];for(let g=0;g<=e.getReturnIndex();g++)if(e.getInstruction(g).type===2){let x=Yo(e.argNames.length);x[g]=!0,f.push(x)}else f.push(Np(e,f,e.argNames.length,g));let m={listAccessDependencyTable:p,listAccesses:a,listStatisticsTable:u},d;for(let g=s+1;g<=e.getReturnIndex();g++){let h=e.getInstruction(g);switch(h.type){case 37:{if(h.symbol===\"exp\"){let Me=h.args[0],Ke=bh(m,Me);if(Ke===void 0){Gi(e,f,d,g);break}let{listStatistics:xt,listAccessIndex:re}=Ke,ve=uu(hh(e),g,Me,re,xt);ve?d=[ve]:Gi(e,f,d,g)}break}case 12:case 13:{let[Me,Ke]=h.args,xt=bh(m,Ke);if(xt===void 0||iM(m,Me)){Gi(e,f,d,g);break}let{listStatistics:re,listAccessIndex:ve}=xt,Ne=dw(hh(e),g,ve,re);Ne?d=[Ne]:Gi(e,f,d,g);break}case 10:if(d&&d.length>1){Gi(e,f,d,g);break}let x=d&&d.length>0?d[0]:hh(e),[P,D]=h.args,M=x.isLazy?P:x.valueMap[P],E=x.isLazy?D:x.valueMap[D],S=x.chunk.getInstruction(M),v=x.chunk.getInstruction(E),N,G,C;if(S.type===37)N=P,C=S,G=D;else if(v.type===37)N=D,C=v,G=P;else{Gi(e,f,d,g);break}let H=bh(m,N);if(H===void 0||iM(m,G)){Gi(e,f,d,g);break}let{listAccessIndex:te,listStatistics:je}=H;if(C.symbol===\"exp\"){let Me=mw(x,g,G,N,te,je);if(Me){d=Me;break}}else if(sM(C)){let Me=fw(x,g,G,N,te);if(Me){d=[Me];break}}Gi(e,f,d,g);break;default:{Gi(e,f,d,g);break}}}if(d===void 0||d.length===0)return;let y=[];for(let g of d)y.push({chunk:g.chunk.close(),forwardParameterMap:g.forwardParameterMap,reverseParameterMap:g.reverseParameterMap});return y}function Gi(e,t,r,n){if(r===void 0)return;let i=e.getInstruction(n);if(ne(i))for(let s of r)s.valueMap[n]=n;else for(let s of r){let{chunk:o,valueMap:a}=s,u=[],l=0;for(let c of i.args){if(a[c]!==c){if(l+=1,l>1){r.length=0;return}}else{let p=t[c];for(let f=0;f<p.length;f++)if(p[f]&&s.replacementMask[f]){r.length=0;return}}u.push(a[c])}a[n]=l>0?Lt(o,i,u):n}}function bh(e,t){let{listAccessDependencyTable:r,listAccesses:n,listStatisticsTable:i}=e,s,o=r[t];for(let a=0;a<o.length;a++)if(o[a]){if(s)return;s={listAccessIndex:n[a],listStatistics:i[a]}}return s}function iM(e,t){let{listAccessDependencyTable:r}=e,n=r[t];for(let i of n)if(i)return!0;return!1}function xh(e,t){let r=[];for(let s=0;s<=t;s++)if(e.getInstruction(s).type===2){let a=Yo(e.argNames.length);a[s]=!0,r.push(a)}else r.push(Np(e,r,e.argNames.length,s));let n,i=r[t];for(let s=0;s<i.length;s++)if(i[s]){if(n!==void 0)return;n=s}return n}function fw(e,t,r,n,i){let s=e.chunk,o=xh(s,r);if(o===void 0)return;let a=Ph(e,r,o);if(a===void 0)return;let u=s.getInstruction(n),l=u.args[0];if(a=aM(a,l,i),a===void 0)return;let{chunk:c,valueMap:p}=a,f=c.getInstruction(p[l]);if(f.type!==8)return;let m=f.args[1],d=c.getInstruction(f.args[0]);if(d.type!==10)return;let[y,g]=d.args,h=o,x=m,P=y,D=g,M=c.Multiply([P,D]),E=c.SyntheticNativeFunction(\"cos\",[M]),S=c.SyntheticNativeFunction(\"sin\",[M]),v=u.symbol===\"sin\"?c.Add([c.Multiply([h,S]),c.Multiply([x,E])]):c.Subtract([c.Multiply([h,E]),c.Multiply([x,S])]);p[t]=v;function N(H){let te=a.forwardParameterMap(H),je=te[o],Me=te[m],Ke=je*Math.cos(Me),xt=je*Math.sin(Me);return te[o]=Ke,te[m]=xt,te}function G(H){let te=H.slice(),je=H[o],Me=H[m],Ke=si(je,Me),xt=Math.atan2(Me,je);return te[o]=Ke,te[m]=xt,a.reverseParameterMap(te)}let C=a.replacementMask.slice();return C[o]=!0,C[y]=!0,C[m]=!0,{chunk:c,forwardParameterMap:N,reverseParameterMap:G,valueMap:p,replacementMask:C,isLazy:!1}}function dw(e,t,r,n){let i=e.chunk,s=i.getInstruction(t),[o,a]=s.args,u=i.getInstruction(o);if(u.type===1&&u.valueType===I&&F(u.value)>0){let x=Dp(e),{chunk:P,valueMap:D}=x,M=P.Multiply([P.SyntheticNativeFunction(\"ln\",[D[o]]),D[a]]);return D[a]=M,D[t]=P.SyntheticNativeFunction(\"exp\",[M]),uu(x,t,a,r,n)||x}let l=xh(i,o);if(l===void 0)return;let c=Ph(e,o,l);if(c===void 0)return;let{chunk:p,valueMap:f}=c,m=p.Multiply([f[o],f[a]]);f[a]=m,f[t]=p.SyntheticNativeFunction(\"exp\",[m]);function d(x){let P=c.forwardParameterMap(x),D=P[l],M=Math.log(D);return P[l]=M,P}function y(x){let P=x.slice(),D=P[l],M=Math.exp(D);return P[l]=M,c.reverseParameterMap(P)}let g=c.replacementMask.slice();g[l]=!0;let h={chunk:p,forwardParameterMap:d,reverseParameterMap:y,isLazy:!1,valueMap:f,replacementMask:g};return uu(h,t,a,r,n)||h}function mw(e,t,r,n,i,s){if(!e.isLazy&&e.didShiftScale)return;let o=e.isLazy?e:nM(e),a=e.chunk,u=xh(a,r);if(u===void 0)return;let l=Ph(e,r,u);if(l===void 0)return;let{chunk:c,valueMap:p}=l,f=c.getInstruction(p[n]).args[0],m=c.Add([f,p[r]]);p[r]=m,p[t]=c.SyntheticNativeFunction(\"exp\",[m]);function d(E){let S=l.forwardParameterMap(E),v=S[u],N=Math.log(v);return S[u]=N,S}function y(E){let S=E.slice(),v=S[u],N=Math.exp(v);return S[u]=N,l.reverseParameterMap(S)}function g(E){let S=l.forwardParameterMap(E),v=S[u],N=Math.log(-v);return S[u]=N,S}function h(E){let S=E.slice(),v=S[u],N=-Math.exp(v);return S[u]=N,l.reverseParameterMap(S)}let x=l.replacementMask.slice();x[u]=!0;let P=Dp(o);P.valueMap[t]=P.chunk.Multiply([P.valueMap[r],P.valueMap[n]]);let D={chunk:c,forwardParameterMap:d,reverseParameterMap:y,isLazy:!1,valueMap:p,replacementMask:x},M=nM(D);return M.forwardParameterMap=g,M.reverseParameterMap=h,D=uu(D,t,r,i,s)||D,M=uu(M,t,r,i,s)||M,M.valueMap[t]=M.chunk.Negative([M.valueMap[t]]),[P,D,M]}function uu(e,t,r,n,i){let s=yw(e,r,n,i);if(s!==void 0)return s.valueMap[t]=s.chunk.SyntheticNativeFunction(\"exp\",[s.valueMap[r]]),s}function yw(e,t,r,n){let i=aM(e,t,r);if(i===void 0)return;let{chunk:s,valueMap:o}=i,a=s.getInstruction(o[t]);if(a.type!==8)return;let u=a.args[1],l=s.getInstruction(a.args[0]);if(l.type!==10)return;let[c,p]=l.args,{min:f,max:m}=n,d=m-f,y=.5*(m+f),g=s.Divide([s.Subtract([p,s.Constant(y)]),s.Constant(d)]),h=s.Add([s.Multiply([c,g]),u]);o[t]=h;function x(D){let M=i.forwardParameterMap(D),E=M[c],S=M[u],v=E*d,N=S+y*E;return M[c]=v,M[u]=N,M}function P(D){let M=D.slice(),E=D[c],S=D[u],v=E/d,N=S-v*y;return M[c]=v,M[u]=N,i.reverseParameterMap(M)}return{chunk:s,forwardParameterMap:x,reverseParameterMap:P,isLazy:!1,valueMap:o,replacementMask:i.replacementMask,didShiftScale:!0}}function Ph(e,t,r){let n=e.chunk,i=zr(n,r,{allowRestriction:!1,allowClosedBlockReferences:!1});if(Bt(i,t)!==1)return;let s=An(i),[o,a]=Ut(s,t);if(a===void 0)return;let u=s.newChunk.getInstruction(o);if(u.type!==1||u.valueType!==I)return;let l=s.newChunk.getInstruction(a);if(l.type!==1||l.valueType!==I)return;let c=Dp(e),{chunk:p,valueMap:f}=c,m=F(u.value),d=F(l.value);f[t]=r;function y(x){let P=c.forwardParameterMap(x),D=P[r],M=m+d*D;return P[r]=M,P}function g(x){let P=x.slice(),M=(P[r]-m)/d;return P[r]=M,c.reverseParameterMap(P)}let h=c.replacementMask.slice();return h[r]=!0,{chunk:p,forwardParameterMap:y,reverseParameterMap:g,isLazy:!1,valueMap:f,replacementMask:h}}function aM(e,t,r){let n=e.chunk,i=e.isLazy?t:e.valueMap[t],s=zr(n,r,{allowRestriction:!1,allowClosedBlockReferences:!0});if(Bt(s,i)!==1)return;e.isLazy&&(s=zr(n.copy().reopenFinalBlock(),r,{allowRestriction:!1,allowClosedBlockReferences:!1}));let o=An(s),[a,u]=Ut(o,i);if(u===void 0)return;let l=o.newChunk,c=Math.max(u,a),p=[];for(let De=0;De<=c;De++)if(l.getInstruction(De).type===2){let bt=Yo(l.argNames.length);bt[De]=!0,p.push(bt)}else p.push(Np(l,p,l.argNames.length,De));let f,m;for(let De=0;De<n.argNames.length;De++)if(p[u][De])if(f===void 0)f=De;else return;else if(p[a][De])if(m===void 0)m=De;else return;if(f===void 0||m===void 0)return;let d=zr(l,f,{allowRestriction:!1,allowClosedBlockReferences:!1});if(Bt(d,u)!==1)return;let y=zr(l,m,{allowRestriction:!1,allowClosedBlockReferences:!1});if(Bt(y,a)!==1)return;let g=An(d),h=An(y),[x,P]=Ut(g,u),D=g.newChunk.getInstruction(x);if(D.type!==1||D.valueType!==I)return;let M=g.newChunk.getInstruction(P);if(M.type!==1||M.valueType!==I)return;let E=Dp(e),{chunk:S,valueMap:v}=E,N=S.Add([S.Multiply([f,r]),m]);v[t]=N;let G=l.copy();G.List([u,a]);let C=G.close().getCompiledFunction().fn;function H(De){let se=E.forwardParameterMap(De),[bt,Gt]=C.apply(null,se);return se[f]=bt,se[m]=Gt,se}let te=F(D.value),je=F(M.value),[Me,Ke]=Ut(h,a),xt=h.newChunk.copy();xt.List([Me,Ke]);let re=xt.close().getCompiledFunction().fn;function ve(De){let se=De.slice(),bt=De[f],Gt=De[m],Tn=(bt-te)/je,ta=De.slice();ta[f]=Tn,ta.splice(m,1);let[vu,Sv]=re.apply(null,ta),Ov=(Gt-vu)/Sv;return se[f]=Tn,se[m]=Ov,E.reverseParameterMap(se)}let Ne=E.replacementMask.slice();return Ne[f]=!0,Ne[m]=!0,{chunk:S,forwardParameterMap:H,reverseParameterMap:ve,isLazy:!1,valueMap:v,replacementMask:Ne}}function Np(e,t,r,n){let i=e.getInstruction(n),s=Yo(r);if(ne(i))return s;for(let o of i.args){let a=t[o];for(let u=0;u<a.length;u++)s[u]=s[u]||a[u]}return s}function Yo(e){let t=[];for(let r=0;r<e;r++)t.push(!1);return t}function gw(e){let t=[];for(let r=0;r<e;r++)t.push(r);return t}function sM(e){return e.type===37&&(e.symbol===\"sin\"||e.symbol===\"cos\")}function Nt(e,t){switch(e){case I:case be:return new b.Constant(t);case tt:return new b.Seed(t);case w:return new b.ParenSeq([Nt(I,t[0]),Nt(I,t[1])]);case et:return new b.FunctionCall(\"rgb\",[Nt(I,t[0]),Nt(I,t[1]),Nt(I,t[2])]);case ye:return new b.FunctionCall(\"polygon\",[Nt(Le,t)]);case ue:return new b.FunctionCall(\"segment\",[Nt(w,t[0]),Nt(w,t[1])]);case J:return new b.FunctionCall(\"line\",[Nt(w,t[0]),Nt(w,t[1])]);case ge:return new b.FunctionCall(\"ray\",[Nt(w,t[0]),Nt(w,t[1])]);case Q:return new b.FunctionCall(\"circle\",[Nt(w,t[0]),Nt(I,t[1])]);case X:return new b.FunctionCall(\"arc\",[Nt(w,t[0]),Nt(w,t[1]),Nt(w,t[2])]);case xe:return new b.FunctionCall(\"angle\",[Nt(w,t[0]),Nt(I,t[1]),Nt(I,t[2])]);case le:return new b.FunctionCall(\"directedangle\",[Nt(w,t[0]),Nt(I,t[1]),Nt(I,t[2])]);case de:case Y:case pr:case Le:case rr:case zt:case Ct:case Qt:case Kt:case Et:case St:case jt:case Zt:{let n=[],i=ot(e);for(let s of t)n.push(Nt(i,s));return new b.List(n)}case Jt:case Dt:case vt:case Wt:case Ge:case Se:case Ir:case vn:throw new Error(`Programming error: cannot create parse node from valueType: ${Zr(e)}`);default:let r=e;throw new Error(`Programming error: unexpected valueType: ${Zr(r)}`)}}function mM(e,t){try{return hw(e,t)}catch(r){return r instanceof b.Error?r:Te()}}function hw(e,t){let{policy:r,frame:n,exportFrame:i,lastExportFrame:s,priorAnalysis:o}=e,a=t._lhs.buildIRExpression(r,n),u=t._rhs.buildIRExpression(r,n);if(a.isError)throw a;if(u.isError)throw u;if(a.valueType!==I&&a.valueType!==Y||u.valueType!==I&&u.valueType!==Y)throw fd([Z(a.valueType),Z(u.valueType)]);let l=t._difference.buildIRExpression(r,n,{wrapInList:!0});if(l.isError)throw l;for(let M of l.getDependencies())if(!r.validRegressionParameter(M))throw Nm(M);let c=xw(l.getDependencies(),t.userData.regressionParameters,s),{parameters:p,residuals:f,isLinear:m,parameterWarning:d}=dM(c,l),y={policy:r,frame:n},g=uM(y,t,p),h=Iw(t,a,g),x;if(t.userData.isLogModeRegression&&(h===Lr.LOGLIN||h===Lr.LOGLOG)){let M=t._logDifference.buildIRExpression(r,n,{wrapInList:!0});if(M.isError)throw M;let E=t._logLhs.buildIRExpression(r,n,{wrapInList:!0});if(E.isError)throw E;({parameters:p,isLinear:m,parameterWarning:d}=dM(c,M)),g=uM(y,t,p),f=fM(y,t._difference,p);let S=fM(y,t._logDifference,p);x=pM(t,E,g,S,t.userData.isLogModeRegression,h)}else x=pM(t,a,g,f,t.userData.isLogModeRegression,h);let P=bw(t,i),D=Tw(t,P,o);return t.userData.residualVariable=dr(P),new b.OptimizedRegression(p,Nt(Y,f),x,g.substituted,{isModelValid:g.isValid,residualVariable:P,residualSuggestionId:D,shouldSuggestLogMode:h!==Lr.NONE,isLinear:m,parameterWarning:d})}function bw(e,t){if(e.userData&&e.userData.residualVariable){let s=li(e.userData.residualVariable);if(!t[s])return s}let r=e.getDependencies().filter(s=>s[0]!==\"_\"),n;for(let s of r){let o=s.match(/_(.*)/);if(o&&(n=\"e_\"+o[1],!t[n]))return n}let i=1;for(;;){if(n=\"e_\"+i,!t[n])return n;i++}}function uM({policy:e,frame:t},r,n){let i=r._rhs.getDependencies(),s,o;for(let p of i){if(n.hasOwnProperty(p))continue;let f=t[p];if(!f||(f.type===\"Assignment\"&&(f=f._expression),!f.buildIRExpression))continue;let m=f.buildIRExpression(e,t);if(!m.isError&&m.valueType===Y){if(s!==void 0){s=void 0,o=void 0;break}m.getDependencies().length===0&&(s=p,o=m)}}let a=Object.create(t);s!==void 0&&(a[s]=void 0);let u=r._rhs.buildIRExpression(e,a),l=Object.create(a);for(let p in n)l[p]=n[p];let c=r._rhs.buildIRExpression(e,l);return o?{node:u,substituted:c,listNode:o,isValid:!0}:{node:u,substituted:c,listNode:o,isValid:!1}}function xw(e,t,r){let n=[];t||(t={}),r||(r={});for(let i of e){let s=dr(i);r[i]&&isFinite(r[i].asValue())?n.push(+r[i].asValue()):t.hasOwnProperty(s)&&isFinite(+t[s])?n.push(+t[s]):n.push(1)}return n}function lM(e,t){let r=t.getDependencies(),n=t.getCompiledFunction(r).fn;if(r.length){let i=t.findLinearSubset(r),s=i.every(a=>a),o=[];for(let a of r)o.push(t.takeDerivative(a).getCompiledFunction(r).fn);if(s){let a=r.map(()=>ie(0,1)),u=t.interpretWithParameters(a),l=[];for(let m of r)l.push(t.takeDerivative(m).interpretWithParameters(a));let c=yh(u,l);if(c){let m=t.interpretWithParameters(c);return{solution:c,residuals:m,MSE:Ih(m),isLinear:s}}let{solution:p,MSE:f}=mh(n,gh(n,o));return{solution:p,residuals:n.apply(void 0,p),MSE:f,isLinear:s}}else{let a=[];for(let p of r)a.push(t.boundDomain(p));let u={linearSubset:i,bounds:a,preferredInitialGuess:e},{solution:l,MSE:c}=mh(n,tM(n,o,u));return{solution:l,residuals:n.apply(void 0,l),MSE:c,isLinear:s}}}else return{solution:[],residuals:t.interpretWithParameters([]),MSE:fs(n,[]),isLinear:!0}}function cM(e,t){let r={},n=t.getDependencies();for(let i=0;i<n.length;i++){let s=new b.RegressionParameter(e[i]);r[n[i]]=s}return r}function pM(e,t,r,n,i,s){let o=Ih(n);if(!isFinite(o))throw Dm();if(t.getDependencies().length>0)return{RMSE:Math.sqrt(o)};let a=k(t.valueType)?$a(t.asValue()):0;if(t.getDependencies().length||!isFinite(a)||a<=0||!e.isLhsSimple)return{RMSE:Math.sqrt(o)};{let u=1-o/a;if(r.isValid){let l=[],c=[],p=i&&(s===Lr.LINLOG||s===Lr.LOGLOG);b.List.eachArgs([r.listNode,t],function(m){let d=m[0].isConstant?m[0].asCompilerValue():NaN,y=m[1].isConstant?m[1].asCompilerValue():NaN;l.push(p?Math.log(F(d)):d),c.push(y)});let f=$c(l.map(m=>F(m)),c.map(m=>F(m)));if(Nr(Pw(l,c).MSE,o,8))return{r:f,rsquared:f*f}}return{Rsquared:u}}}function Pw(e,t){let r=t,n=[e.map(a=>cn(a)),e.map(()=>ie(-1,1))],i=yh(r,n);if(i){let[a,u]=i,l=[];for(let c=0;c<t.length;c++)l.push(Hn(t[c],oi(ai(a,e[c]),u)));return{solution:i,MSE:Ih(l)}}function s(a,u){let l=[];for(let c=0;c<e.length;c++)l.push(F(t[c])-(a*F(e[c])+u));return l}return gh(s,[function(){return e.map(function(a){return-F(a)})},function(){return e.map(function(){return-1})}])}function Tw(e,t,r){let n=e._rhs.getDependencies(),i;for(let s in r){if(!r.hasOwnProperty(s))continue;let o=r[s].concreteTree;if(!o.isTable||!o.columns[0])continue;let a=r[s].rawTree.columns;if(!a||!a.length)continue;let u=a[0].getExports();if(u.length===1&&n.indexOf(u[0])!==-1){for(let l=1;l<a.length;l++)if(a[l].getDependencies().indexOf(t)!==-1)return;i=i||s}}return i||void 0}function Th(e,t){let r=e.length,n=e[0],i=t[0],s=e[r-1],o=t[r-1];if(!isFinite(n)||!isFinite(s)||!isFinite(i)||!isFinite(o)||o-i===0)return!1;let a=s-n;if(a===0)return!1;for(let u=1;u<r-1;u++){let l=e[u],c=t[u],p=(o*(l-n)+i*(s-l))/a;if(!Nr(c,p,5))return!1}return!0}var Lr={NONE:0,LOGLIN:1,LOGLOG:2,LINLOG:3};function Iw(e,t,r){if(!e.isLhsSimple||!r.isValid)return Lr.NONE;let n=r.substituted;if(n.isError||n.valueType!==I)return Lr.NONE;let i=n.getDependencies();if(i.length!==1||isFinite(r.node.polynomialOrder(i[0])))return Lr.NONE;let s=n.getCompiledFunction(i).fn,o=r.listNode;if(n.valueType!==I)return Lr.NONE;let a=o.mapElements(f=>+f.asValue());if(a.length<3)return Lr.NONE;a.sort(function(f,m){return f-m});let u=a.map(s),l=u.map(Math.log),c=a.map(Math.log),p=!0;return b.List.wrap(t).eachElement(f=>{isFinite(Math.log(+f.asValue()))||(p=!1)}),Th(a,l)&&p?Lr.LOGLIN:Th(c,l)&&p?Lr.LOGLOG:Th(c,u)?Lr.LINLOG:Lr.NONE}function fM({policy:e,frame:t},r,n){let i=Object.create(t);for(let o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);return Pp({policy:e,frame:i,wrapInList:!0},r).asCompilerValue()}function Ih(e){let t=0;for(let r of e){let n=F(r);t+=n*n}return t/e.length}function dM(e,t){let r,n,i=t._chunk;if(i&&(n=oM(i)),!n||n.length===0)return t=t.deriveRegressionRestrictions(),r=lM(e,t),{parameters:cM(r.solution,t),residuals:r.residuals,isLinear:r.isLinear,parameterWarning:!1};let s=t.getDependencies(),o=t.getCompiledFunction(s).fn,a=1/0,u={},l,c=!1;for(let p of n){let f=new Yt(p.chunk);if(f=f.deriveRegressionRestrictions(),r=lM(p.forwardParameterMap(e),f),r.MSE<a){let m=p.reverseParameterMap(r.solution.map(y=>F(y))),d=fs(o,m);if(u&&(!isFinite(d)||d>=a)){isFinite(d)||(c=!0);continue}a=r.MSE,u=cM(m,t),l=o.apply(void 0,m)}}return{parameters:u,residuals:l,isLinear:!1,parameterWarning:c}}b.Base.prototype.analyze=function(e,t){return Br(this)?Vr(e,t,this):new _(e,t,this,this.tryGetConcreteTree(e,t))};function Mh(e,t,r,n){if(n.isError)return new _(e,t,r,n);if(!e.areAllScalesLinear()&&!aa(n.valueType))return new _(e,t,r,ha(Z(n.valueType)));var i=n.getDependencies();switch(n.valueType){case Dt:case Wt:case de:return new _(e,t,r,n);case et:case rr:case ue:case Ct:case Q:case jt:case X:case Zt:case J:case Qt:case ge:case Kt:case xe:case Et:case le:case St:case Se:case Ir:case Ge:case ye:case zt:return i.length?new _(e,t,r,Tt(r.getSliderVariables(e,n)).setDependencies(i)):new _(e,t,r,n);case w:case Le:if(i.length){if(!e.validParametricVariables(i)){var s=r.getSliderVariables(e,n);return new _(e,t,r,Tt(s).setDependencies(s))}return new _(e,t,r,n)}return new _(e,t,r,n);case I:case Y:return i.length===0?new _(e,t,r,n):i.length<=e.dimensions()-1?e.validExpressionVariables(i)?new _(e,t,r,n):new _(e,t,r,Yl(e.implicitDependency(i)).setDependencies(i)):e.validImplicitVariables(i)?new _(e,t,r,Yl().setDependencies(i)):new _(e,t,r,Tt(r.getSliderVariables(e,n)).setDependencies(i));default:return new _(e,t,r,Te())}}function gM(e){return new b.FunctionCall(\"pdf\",[e,new b.Identifier(\"x\")])}b.FunctionCall.prototype.analyze=function(e,t,r){var n;Ip[this._symbol]&&Ho(t,this).length===0?n=gM(this).tryGetConcreteTree(e,t):n=this.tryGetConcreteTree(e,t);var i=Mh(e,t,this,n);if(Br(this)&&!bM(i))return Vr(e,t,this);var s=this.getMoveStrategy(e,t,n,r,this.userData);if(s){var o=this.getDefaultDragMode(s),a=n.asCompilerValue(),u=[new b.Constant(a[0]),new b.Constant(a[1])];return new _(e,t,this,new b.MovablePoint(u,s,o))}return i};b.Expression.prototype.analyze=function(e,t){var r=Mh(e,t,this,this.tryGetConcreteTree(e,t));return Br(this)&&!bM(r)?Vr(e,t,this):r};b.FunctionDefinition.prototype.analyze=function(e,t){if(Br(this))return Vr(e,t,this);if(fe[this._symbol])return this.asEquation().analyze(e,t);var r=this._symbol.split(\"_\")[0];if(fe[r]&&fe[r].isFunction)return new _(e,t,this,Io(this._symbol,r));var n=this.tryGetConcreteTree(e,t);if(n.isError)return new _(e,t,this,n);var i=this._argSymbols,s=n.getDependencies();if(s.indexOf(this._symbol)!==-1)return new _(e,t,this,Pa(this._symbol));var o=s.filter(function(u){return i.indexOf(u)===-1});if(e.unplottablePolarFunction(this._symbol,s))return new _(e,t,this,Pm());if(o.some(function(u){return e.assignmentForbidden(u)}))return new _(e,t,this,Ta(o,this._symbol,i).setDependencies(s));if(o.length){var a=this.getSliderVariables(e,n);return new _(e,t,this,Tt(a).setDependencies(a))}return!e.areAllScalesLinear()&&!aa(n.valueType)?new _(e,t,this,ha(Z(n.valueType))):new _(e,t,this,n)};b.Assignment.prototype.analyze=function(e,t,r){if(Br(this))return Vr(e,t,this);var n=this._symbol;if(!e.validLHS(n))return new _(e,t,this,xm(n));if(fe[n])return this.asEquation().analyze(e,t);var i;if(this._expression instanceof b.FunctionCall&&Ip[this._expression._symbol]&&Ho(t,this).length===0)i=gM(this._expression).tryGetConcreteTree(e,t);else{var s=Object.create(t);s[n]=e.validSolvedVariable(n)?void 0:qs(),i=this.tryGetConcreteTree(e,s)}if(i.isError)return new _(e,t,this,i);if(!e.areAllScalesLinear()&&!aa(i.valueType))return new _(e,t,this,ha(Z(i.valueType)));var o=i.getDependencies();if(this.isEquation(i))return this.asEquation().analyze(e,t);var a=i.valueType===et||i.valueType===rr;if(o.length>1||a&&o.length){var u=this.getSliderVariables(e,i);return a||u.length?new _(e,t,this,Tt(u).allowExport().setDependencies(u)):new _(e,t,this,i)}var l=this.getMoveStrategy(e,t,i,r,this.userData);if(l){var c=this.getDefaultDragMode(l);return new _(e,t,this,new b.MovablePoint([i.elementAt(0),i.elementAt(1)],l,c))}else return new _(e,t,this,i)};b.Regression.prototype.analyze=function(e,t,r,n,i){if(Br(this))return Vr(e,t,this);var s={policy:e,frame:t,exportFrame:r,lastExportFrame:n,priorAnalysis:i};return new _(e,t,this,mM(s,this))};function Rp(e,t){var r=this.tryGetConcreteTree(e,t),n=r.getDependencies();return n.length?new _(e,t,this,Tt(this.getSliderVariables(e,r)).setDependencies(n)):new _(e,t,this,this.tryGetConcreteTree(e,t))}b.Object3D.prototype.analyze=Rp;b.Histogram.prototype.analyze=function(e,t){return Br(this)?Vr(e,t,this):e.areAllScalesLinear()?Rp.call(this,e,t):new _(e,t,this,xd())};b.DotPlot.prototype.analyze=function(e,t){return Br(this)?Vr(e,t,this):e.areAllScalesLinear()?Rp.call(this,e,t):new _(e,t,this,Pd())};b.BoxPlot.prototype.analyze=function(e,t){return Br(this)?Vr(e,t,this):e.areAllScalesLinear()?Rp.call(this,e,t):new _(e,t,this,Td())};function hM(e){return function(t,r){if(Br(this))return Vr(t,r,this);var n=this.tryGetConcreteTree(t,r),i=n.getDependencies();if(i.length)return new _(t,r,this,Tt(this.getSliderVariables(t,n)).setDependencies(i));var s=new _(t,r,this,this.tryGetConcreteTree(t,r));if(!n.isError){s.evaluationState.expression_type=\"TTEST\";var o=n.args.map(function(a){return a.asValue()});s.evaluationState.ttest_results=e.apply(null,o)}return s}}b.TTest.prototype.analyze=hM(Vy);b.IndependentTTest.prototype.analyze=hM(Gy);b.Stats.prototype.analyze=function(e,t){if(Br(this))return Vr(e,t,this);var r=this.tryGetConcreteTree(e,t),n=r.getDependencies();if(n.length)return new _(e,t,this,Tt(this.getSliderVariables(e,r)).setDependencies(n));var i=new _(e,t,this,this.tryGetConcreteTree(e,t));if(!r.isError){i.evaluationState.expression_type=\"STATS\";var s=r.args.map(function(o){return o.asValue()});i.evaluationState.stats_results=qy.apply(null,s)}return i};b.Equation.prototype.analyze=b.BaseComparator.prototype.analyze=function(e,t){if(Br(this))return Vr(e,t,this);var r=this.getOperator()!==\"=\";if(!sn.plotInequalities&&r)return new _(e,t,this,Hl());var n=W0({policy:e,frame:t},this.asComparator());if(n.isError)return new _(e,t,this,n);if(n instanceof b.SolvedEquation&&n.getDependencies().length){var i=n.getDependencies().concat(n._symbol);if(!e.validImplicitVariables(i))return new _(e,t,this,qs().setDependencies(i))}return this.getGraphMode(e,n)===8&&!e.validImplicitVariables(n.getDependencies())?new _(e,t,this,qs().setDependencies(n.getDependencies())):new _(e,t,this,n)};b.DoubleInequality.prototype.analyze=function(e,t){if(Br(this))return Vr(e,t,this);if(!sn.plotInequalities)return new _(e,t,this,Hl());var r=this.tryGetConcreteTree(e,t);if(r.isError)return new _(e,t,this,r);var n=r.getDependencies();return Dr[this._operators[0]].direction!==Dr[this._operators[1]].direction?new _(e,t,this,Em()):e.validDoubleInequalitySymbol(r._symbol)?e.validDoubleInequalityVariables(n)?n.length>2?new _(e,t,this,Tt(this.getSliderVariables(e,r)).setDependencies(n)):r._expressions[0].getDependencies().indexOf(r._symbol)!==-1||r._expressions[1].getDependencies().indexOf(r._symbol)!==-1?new _(e,t,this,Wl().setDependencies(n)):new _(e,t,this,r):new _(e,t,this,$l().setDependencies(n)):new _(e,t,this,$l().setDependencies(n))};b.And.prototype.analyze=function(e,t){if(Br(this))return Vr(e,t,this);var r=this.tryGetConcreteTree(e,t);if(r.isError)return new _(e,t,this,r);var n=r.getDependencies();return n.length?e.validDoubleInequalityVariables(n)?new _(e,t,this,Wl().setDependencies(n)):new _(e,t,this,Tt(this.getSliderVariables(e,r)).setDependencies(n)):new _(e,t,this,r)};b.ParenSeq.prototype.analyze=function(e,t,r){if(Br(this))return Vr(e,t,this);var n=this.tryGetConcreteTree(e,t);if(n.isError)return new _(e,t,this,n);var i=this.getMoveStrategy(e,t,n,r,this.userData);if(i){var s=this.getDefaultDragMode(i),o=n.asCompilerValue(),a=[new b.Constant(o[0]),new b.Constant(o[1])];return new _(e,t,this,new b.MovablePoint(a,i,s))}return Mh(e,t,this,n)};function Mw(e,t){return e.filter(function(r){return!t[r]})}function vw(e){for(var t={},r=0;r<e.length;r++){var n=e[r];if(n instanceof $s&&n.header instanceof b.Identifier){var i=n.header._symbol;t[i]===void 0&&(t[i]=0),t[i]+=1}}return t}b.Table.prototype.analyze=function(e,t){var r=Object.create(t),n=[],i=vw(this.columns),s;for(s=0;s<this.columns.length;s++){var o=this.columns[s];if(o instanceof $s&&o.header instanceof b.Identifier){var a=o.header._symbol,u=r[a],l=i[a]>1;u&&u.isError&&(u.isTableCycleWithoutGlobalDefinition||u.isMultiplyDefinedByTables&&!l)&&(r[a]=void 0)}var c=o.analyze(e,r);if(s===0&&c.concreteTree.isIndependent){var p=c.concreteTree.getDependencies()[0];e.validFirstColumnVariable(p)||(c=new _(e,t,o,Om()))}if(c.concreteTree.isIndependent)c.rawTree.exportToLocal(c.concreteTree,r);else if(!c.concreteTree.isError){var f=c.concreteTree.header.getDependencies(),m=Mw(f,r);m.length&&(c=new _(e,t,o,Tt(m).setDependencies(m)))}n.push(c.concreteTree)}var d=1;for(s=0;s<n.length;s++)n[s].isError||(d=Math.max(n[s].values.length,d));for(s=0;s<n.length;s++)if(!n[s].isError&&n[s].header.isConstant){for(var y=[],g=0;g<d;g++)y.push(n[s].header);n[s]=new b.TableColumn(n[s].header,y)}var h=new b.Table(n),x=new _(e,t,this,h);return x.evaluationState.is_graphable=!0,x};b.TableColumn.prototype.analyze=function(e,t){var r=this.header.tableError();if(r)return new _(e,t,this,Sm(r));var n=this.tryGetConcreteTree(e,t);if(n.isError)return new _(e,t,this,n);if(n.header.isError)return new _(e,t,this,n.header);if(n.values.isError)return new _(e,t,this,n.values);for(var i=0;i<n.values.length;i++)if(!n.values[i].isError){var s=this.values[i]&&this.values[i].tableError();if(s){n.values[i]=vo(s);continue}var o=n.values[i].getDependencies();o.length&&(n.values[i]=Tt(o).setDependencies(o))}return new _(e,t,this,n)};b.Image.prototype.analyze=function(e,t,r){var n=this.tryGetConcreteTree(e,t);if(n.radianAngle.isError||n.center.isError||n.width.isError||n.height.isError||n.opacity.isError)return new _(e,t,this,n);var i=n.center.getDependencies(),s=n.radianAngle.getDependencies(),o=n.width.getDependencies(),a=n.height.getDependencies(),u=n.opacity.getDependencies();return i.length||s.length||o.length||a.length||u.length?new _(e,t,this,new b.Image({center:i.length?Tt(s).setDependencies(i):n.center,radianAngle:s.length?Tt(s).setDependencies(s):n.radianAngle,width:o.length?Tt(o).setDependencies(o):n.width,height:a.length?Tt(a).setDependencies(a):n.height,opacity:u.length?Tt(u).setDependencies(u):n.opacity})):(n.moveStrategy=this.getMoveStrategy(e,t,n,r,this.userData),new _(e,t,this,n))};b.Slider.prototype.analyze=function(e,t){if(Br(this))return Vr(e,t,this);var r=this.tryGetConcreteTree(e,t),n=r.sliderInfo,i;if(n.missingVars.length){var s=Is(n.missingVars);i=new _(e,t,this,Tt(e.sliderVariables(s)).setDependencies(s).allowExport())}else i=new _(e,t,this,r);var o=i.evaluationState;if(sn.sliders){o.assignment=n.exportedSymbol,o.slider_min_number=n.values.min,o.slider_max_number=n.values.max,o.slider_step_number=n.values.step,o.slider_min_valid=n.valids.min,o.slider_max_valid=n.valids.max,o.slider_step_valid=n.valids.step;var a=o.slider_min_valid&&o.slider_max_valid&&o.slider_step_valid;o.is_slider=!0,o.raw_slider_latex=this.getInputString(),o.is_slidable=a,o.is_animatable=o.is_slidable&&!o.is_graphable,n.errMsg&&(o.error=n.errMsg.getError())}return delete o.is_evaluable,delete o.zero_values,i};function Br(e){return\"latex\"in e.userData&&ci(e.userData.latex).slice(-1)===\"=\"}function Vr(e,t,r){return new _(e,t,r,xa(\"=\"))}function bM(e){return e.concreteTree.isConstant&&e.concreteTree.valueType===I}b.Base.prototype.analyzeFourFunction=function(e,t){var r=this.tryGetConcreteTree(e,t);return r.isError?new _(e,t,this,r):new _(e,t,this,Te())};b.Expression.prototype.analyzeFourFunction=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return new _(e,t,this,r);var n=r.getDependencies();if(n.length>0){var i=n[0],s,o=fe[i];return o?s=o.isFunction?pn(i):ks(i):s=Sa(i),new _(e,t,this,s)}return new _(e,t,this,r)};b.Assignment.prototype.analyzeFourFunction=function(e,t){return new _(e,t,this,Oa())};b.FunctionDefinition.prototype.analyzeFourFunction=function(e,t){return new _(e,t,this,Na())};b.Equation.prototype.analyzeFourFunction=function(e,t){return new _(e,t,this,_i())};function vh(e,t){return new _(e,t,this,zs())}b.And.prototype.analyzeFourFunction=vh;b.DoubleInequality.prototype.analyzeFourFunction=vh;b.BaseComparator.prototype.analyzeFourFunction=vh;b.Regression.prototype.analyzeFourFunction=function(e,t){return new _(e,t,this,Us())};b.ParenSeq.prototype.analyzeFourFunction=function(e,t){return new _(e,t,this,Hs())};b.Base.prototype.analyzeScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);return r.isError?new _(e,t,this,r):new _(e,t,this,Te())};b.Expression.prototype.analyzeScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return new _(e,t,this,r);var n=r.getDependencies();return n.length>0?new _(e,t,this,Tt(n)):new _(e,t,this,r)};b.Assignment.prototype.analyzeScientific=function(e,t){var r=this._symbol;if(fe[r])return new _(e,t,this,Io(r));var n=Object.create(t);n[r]=_i();var i=this.tryGetConcreteTree(e,n);if(i.isError)return new _(e,t,this,i);var s=i.getDependencies();return this.isEquation(i)?new _(e,t,this,_i()):s.length>0?new _(e,t,this,Tt(s)):new _(e,t,this,i)};b.FunctionDefinition.prototype.analyzeScientific=function(e,t){if(fe[this._symbol])return new _(e,t,this,Io(this._symbol));var r=this.tryGetConcreteTree(e,t);if(r.isError)return new _(e,t,this,r);var n=this._argSymbols,i=r.getDependencies();if(i.indexOf(this._symbol)!==-1)return new _(e,t,this,Pa(this._symbol));var s=i.filter(function(o){return n.indexOf(o)===-1});return s.length?new _(e,t,this,Ta(s,this._symbol,n)):new _(e,t,this,r)};b.Equation.prototype.analyzeScientific=function(e,t){return new _(e,t,this,_i())};function Eh(e,t){return new _(e,t,this,zs())}b.And.prototype.analyzeScientific=Eh;b.DoubleInequality.prototype.analyzeScientific=Eh;b.BaseComparator.prototype.analyzeScientific=Eh;b.Regression.prototype.analyzeScientific=function(e,t){return new _(e,t,this,Us())};b.ParenSeq.prototype.analyzeScientific=function(e,t){return new _(e,t,this,Hs())};b.Base.prototype.analyzeSingleExpressionScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);return r.isError?new _(e,t,this,r):new _(e,t,this,Te())};b.Expression.prototype.analyzeSingleExpressionScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return new _(e,t,this,r);var n=r.getDependencies();if(n.length>0){var i=n[0],s,o=fe[i];return o?s=o.isFunction?pn(i):ks(i):s=Sa(i),new _(e,t,this,s)}return new _(e,t,this,r)};b.Assignment.prototype.analyzeSingleExpressionScientific=function(e,t){return new _(e,t,this,Oa())};b.FunctionDefinition.prototype.analyzeSingleExpressionScientific=function(e,t){return new _(e,t,this,Na())};b.Equation.prototype.analyzeSingleExpressionScientific=function(e,t){return new _(e,t,this,_i())};function Sh(e,t){return new _(e,t,this,zs())}b.And.prototype.analyzeSingleExpressionScientific=Sh;b.DoubleInequality.prototype.analyzeSingleExpressionScientific=Sh;b.BaseComparator.prototype.analyzeSingleExpressionScientific=Sh;b.Regression.prototype.analyzeSingleExpressionScientific=function(e,t){return new _(e,t,this,Us())};b.ParenSeq.prototype.analyzeSingleExpressionScientific=function(e,t){return new _(e,t,this,Hs())};function Ew(e){return!e||e[0].type===\"none\"&&e[1].type===\"none\"?\"NONE\":e[1].type===\"none\"?\"X\":e[0].type===\"none\"?\"Y\":\"XY\"}function xM(e,t){var r=Ew(t);switch(e){case\"NONE\":return\"NONE\";case\"AUTO\":return r;case\"XY\":return r;case\"X\":return r===\"X\"||r===\"XY\"?\"X\":\"NONE\";case\"Y\":return r===\"Y\"||r===\"XY\"?\"Y\":\"NONE\";default:return\"NONE\"}}b.Base.prototype.getGraphMode=function(e,t){return 10};function Sw(e,t){var r;return e&&e.hasOwnProperty(\"dragMode\")?e.dragMode===\"AUTO\"?r=t.defaultDragMode:r=e.dragMode:r=t.defaultDragMode,xM(r,t.moveStrategy)}function PM(e,t){if(t.isMovablePoint&&Sw(this.userData,t)!==\"NONE\")return 4;var r=t.getDependencies();switch(t.valueType){case w:case Le:return r.length===0?3:e.validParametricVariables(r)?e.dimensions()===2?5:14:10;case I:case Y:return e.dimensions()===2&&r.length===1?2:e.dimensions()===3&&r.length===2?13:10;case ye:case zt:return 16;case Q:case jt:return 20;case X:case Zt:return 21;case ue:case Ct:return 17;case J:case Qt:return 18;case ge:case Kt:return 19;case xe:case Et:case le:case St:return 23;default:return 10}}b.Expression.prototype.getGraphMode=PM;function TM(e,t){var r=t._expression.getDependencies();if(r.length>1)return 10;if(t._expression.isList&&t._expression.length===0)return 10;var n=t._symbol;return e.graphMode(n,r)}b.Equation.prototype.getGraphMode=b.BaseComparator.prototype.getGraphMode=function(e,t){var r=t.getDependencies();return t.isConstant?10:t instanceof b.SolvedEquation?r.length===0?e.graphableAsConstant(t._symbol)?e.constantGraphMode(t._symbol):10:TM(e,t):r.length===1||r.length===2?8:10};b.DoubleInequality.prototype.getGraphMode=function(e,t){return e.constantGraphMode(t._symbol)};b.Assignment.prototype.getGraphMode=function(e,t){if(t instanceof b.SolvedEquation)return TM(e,t);if(this.isEquation(t))return this.asEquation().getGraphMode(e,t);var r=t.getDependencies();switch(t.valueType){case I:case Y:case de:switch(r.length){case 0:return e.graphableAsConstant(this._symbol)?e.constantGraphMode(this._symbol):10;case 1:return t.valueType===Y&&!e.graphableListVariables(this._symbol,r[0])?10:this.isSlider?10:e.graphMode(this._symbol,r);case 2:return e.dimensions()===3&&this._symbol===\"z\"?13:10;default:return 10}break;default:return PM.call(this,e,t)}};b.FunctionDefinition.prototype.getGraphMode=function(e,t){if(this._argSymbols.length!==1)return 10;var r=e.graphMode(this._symbol,this._argSymbols),n=t.getDependencies();switch(t.valueType){case I:case Y:switch(n.length){case 0:return r;case 1:return n[0]!==this._argSymbols[0]?10:r;default:return 10}break;default:return 10}};b.Regression.prototype.getGraphMode=function(e,t){return this.isLhsSimple?t.isModelValid?t.model.getDependencies().length!==1?10:2:10:10};function Dh(e,t){return t.isError?10:11}b.Object3D.prototype.getGraphMode=function(e,t){return t.isError?10:12};b.Histogram.prototype.getGraphMode=Dh;b.DotPlot.prototype.getGraphMode=Dh;b.BoxPlot.prototype.getGraphMode=Dh;b.Image.prototype.getGraphMode=function(e,t){return this.userData.showPoints?this.center.isError||this.radianAngle.isError||this.width.isError||this.height.isError||this.opacity.isError?10:3:10};var Lw={};In(Lw,{colors:()=>ww,getDisplayColor:()=>Si,invertColor:()=>Nw,isValidHexColor:()=>_p,mutateOpacity:()=>Rw,normalizeColor:()=>Rh,parseHex:()=>Dw,shadeColor:()=>Ow});function Rh(e){return _p(e)?(e.match(/^#([A-Fa-f0-9]{3})$/g)&&(e=\"#\"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),e.toLowerCase()):e}function _p(e){return typeof e==\"string\"&&(e.match(/^#([A-Fa-f0-9]{3})$/g)||e.match(/^#([A-Fa-f0-9]{6})$/g))}function Ow(e,t){if(e=Rh(e),!_p(e))return e;t>1&&(t=1),t<-1&&(t=-1);var r=parseInt(e.slice(1),16),n=t<0?0:255,i=t<0?t*-1:t,s=r>>16,o=r>>8&255,a=r&255;return\"#\"+(16777216+(Math.round((n-s)*i)+s)*65536+(Math.round((n-o)*i)+o)*256+(Math.round((n-a)*i)+a)).toString(16).slice(1)}function Nw(e){if(e=Rh(e),!_p(e))return e;let t=\"0123456789abcdef\";return\"#\"+e.slice(1).split(\"\").map(r=>t[15-t.indexOf(r)]).join(\"\")}function Dw(e){if(e=e.replace(/#/,\"\"),e.length===3)var t=parseInt(e.slice(0,1)+e.slice(0,1),16),r=parseInt(e.slice(1,2)+e.slice(1,2),16),n=parseInt(e.slice(2,3)+e.slice(2,3),16);else if(e.length===6)var t=parseInt(e.slice(0,2),16),r=parseInt(e.slice(2,4),16),n=parseInt(e.slice(4,6),16);else var t=0,r=0,n=0;return{r:t,g:r,b:n}}function Rw(e,t){let r=/(rgba\\([\\d]+\\,\\ ?[\\d]+\\,\\ ?[\\d]+\\,\\ ?)[\\d.]+(\\))/;return e.match(r)?e.replace(r,`$1${t}$2`):e}function Si(e,t){if(t&&t.colorLatexValue){var r=t.colorLatexValue;return Array.isArray(r)?r[0]:r}return e.color}var ww={RED:\"#c74440\",BLUE:\"#2d70b3\",GREEN:\"#388c46\",PURPLE:\"#6042a6\",ORANGE:\"#fa7e19\",BLACK:\"#000000\",GRAY:\"#aaaaaa\"};b.Base.prototype.getGraphInfo=function(e,t){var r=t.getDependencies(),n,i;switch(r.length){case 0:n=IM(t),i=t.boundDomain(\"x\");break;case 1:i=t.boundDomain(r[0]),i.type===\"known\"&&(n=IM(t));break;case 2:i=Tr();break}return{graphMode:this.getGraphMode(e,t),color:Si(this.userData,this.metaData),pointStyle:this.userData.pointStyle,lineStyle:this.userData.lineStyle,arrowMode:this.userData.arrowMode,operator:this.getOperator(),isLinear:!!n,linearCoefficients:n,domainBound:i}};function IM(e){switch(e.valueType){case I:return wh(e);case w:{var t=wh(e.elementAt(0)),r=wh(e.elementAt(1));return!t||!r?void 0:[t,r]}default:return}}function wh(e){var t=e.getDependencies();switch(t.length){case 0:return[+e.asValue(),0];case 1:if(e.polynomialOrder(t[0])>1)return;var r=e.getPolynomialCoefficients(t[0]);return[r[0]?+r[0].asValue():0,r[1]?+r[1].asValue():0];default:return}}var MM=new b.Constant(ie(0,1));b.Base.prototype.getMoveStrategy=function(){};b.Assignment.prototype.getMoveStrategy=function(e,t,r,n,i){return this._expression.getMoveStrategy(e,t,r,n,i)};function Aw(e){return{type:\"updateSliderNonlinear\",id:e.id,initialValue:e.initialValue,min:e.min,max:e.max,compiled:e.compiled,movesOn:e.movesOn,hasLinearComponent:e.hasLinearComponent}}function Cw(e){return{type:\"updateGliderParameter\",span:e.span,movesOn:e.movesOn}}function _w(e){return{type:\"updateSliderForGlider\",id:e.sliderId,movesOn:e.movesOn,min:e.min,max:e.max}}function vM(e,t,r,n,i,s){var o=t.getDependencies();for(let g of o)if(i[g])return;for(var a=o.length-1;a>=0;a--){var u=o[a];if(!s[u]){var l=n[u];if(l!==void 0){var c=r[u];if(c.order===1){var p=c.tree,f=p.getPolynomialCoefficients(u),m=f[1]||MM,d=f[0]||MM;if(!(!d.isConstant||!m.isConstant)&&!(!isFinite(d.asValue())||!isFinite(m.asValue()))&&m.asValue()!==0){var y=[-d.asValue()/m.asValue(),1/m.asValue()];return{symbol:u,id:l,coefficients:y}}}}}}}function Fw(e,t){for(var r in t){var n=t[r].evaluationState,i=n.assignment;if(i===e)return r}}function Bw(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}function Lh(e,t){var r=Bw(e),n={};for(var i in t){var s=t[i].evaluationState.assignment;t[i].evaluationState.is_slidable&&r[s]&&(n[s]=i)}return n}function EM(e,t,r,n){for(var i=[],s=0;s<r.length;s++){var o=r[s],a={};i.push(a);for(var u=0;u<n.length;u++){var l=n[u],c=Object.create(t);c[l]=void 0;var p=o.tryGetConcreteTree(e,c);if(p.isError){a[l]={tree:p,order:1/0};continue}else a[l]={tree:p,order:p.polynomialOrder(l)}}}return i}function SM(e,t,r){for(var n=0;n<e.length;n++){var i=e[n];t[i].order!==0&&(r[i]=!0)}}b.ParenSeq.prototype.getMoveStrategy=function(e,t,r,n,i){if(r.valueType!==w||r.getDependencies().length!==0)return;for(var s=this.getDependencies(),o=Lh(s,n),a=Object.keys(o),u=this.args,l=EM(e,t,u,a),c=[],p={},f={},m=0;m<2;m++){var d=u[m];if(d.isConstant){c[m]={type:\"updateCoordinate\",inputSpan:d.getInputSpan()};continue}var y=vM(e,d,l[m],o,p,f);y&&(c[m]={type:\"updateSlider\",id:y.id,coefficients:y.coefficients},p[y.symbol]=!0,SM(a,l[m],f)),c[m]||(c[m]={type:\"none\"})}let[g,h]=c,x;if(g.type===\"none\"&&h.type===\"none\"&&a.length===1&&(x=a[0]),!x)return g.type!==\"none\"||h.type!==\"none\"?c:void 0;var P=o[x],D;try{var M=Object.create(t);M[x]=void 0,D=this.getConcreteTree(e,M).getCompiledFunction()}catch(S){return}eg(D);var E=n[P].evaluationState;return[Aw({id:P,initialValue:E.constant_value,min:E.slider_min_number,max:E.slider_max_number,compiled:D,hasLinearComponent:g.type===\"updateSlider\"||h.type===\"updateSlider\"}),{type:\"none\"}]};b.FunctionCall.prototype.getMoveStrategy=function(e,t,r,n,i){if(this._symbol===\"glider\"&&!(!r.isTypedConstant||r.valueType!==w)){var s,o,a;switch(this.args[1].type){case\"Constant\":{var u=this.args[1].asValue();return typeof u!=\"number\"||(s=this.args[0].getConcreteTree(e,t),!s.isTypedConstant)?void 0:(a=s.asTypedValue(),[Cw({span:this.args[1].getInputSpan(),movesOn:a}),{type:\"none\"}])}case\"Identifier\":{var l=this.args[1]._symbol,c=Lh([l],n),p=c[l];if(p===void 0)return;var f=n[p].evaluationState,m=Object.create(t);return m[l]=void 0,s=this.args[0].getConcreteTree(e,m),s.isTypedConstant?(a=s.asTypedValue(),o={min:f.slider_min_number,max:f.slider_max_number},[_w({min:o.min,max:o.max,movesOn:a,sliderId:p}),{type:\"none\"}]):void 0}default:return}}};b.Image.prototype.getMoveStrategy=function(e,t,r,n,i){if(!(r.center.valueType!==w||r.center.getDependencies().length!==0||!r.width.isConstant||!r.height.isConstant||!r.radianAngle.isConstant||!r.opacity.isConstant)){var s=this.getDependencies(),o=Lh(s,n),a=Object.keys(o),u=[this.width,this.height];this.center.type===\"ParenSeq\"?u.push(this.center.args[0],this.center.args[1]):this.center.type===\"Identifier\"&&(this.center.referencedStatementId=Fw(this.center._symbol,n));for(var l={},c={},p=EM(e,t,u,a),f=[],m=[2,3,0,1],d=0;d<m.length;d++){var y=m[d],g=u[y];if(!g){f[y]={type:\"none\"};continue}if(g.isConstant){f[y]={type:\"updateCoordinate\",inputSpan:g.getInputSpan()};continue}var h=vM(e,g,p[y],o,l,c);h&&(f[y]={type:\"updateSlider\",id:h.id,coefficients:h.coefficients},l[h.symbol]=!0,SM(a,p[y],c)),f[y]||(f[y]={type:\"none\"})}if(!(f[0].type===\"none\"&&f[1].type===\"none\"&&f[2].type===\"none\"&&f[3].type===\"none\"))return f}};b.Base.prototype.getDefaultDragMode=function(e){return\"NONE\"};b.Assignment.prototype.getDefaultDragMode=function(e){return e[0].type!==\"none\"&&e[1].type!==\"none\"?\"XY\":e[0].type!==\"none\"?\"X\":e[1].type!==\"none\"?\"Y\":\"NONE\"};b.ParenSeq.prototype.getDefaultDragMode=function(e){return e[0].type===\"updateSlider\"&&e[1].type===\"updateSlider\"?\"XY\":e[0].type===\"updateSlider\"?\"X\":e[1].type===\"updateSlider\"?\"Y\":e[0].type===\"updateSliderNonlinear\"&&e[0].hasLinearComponent?\"X\":\"NONE\"};b.FunctionCall.prototype.getDefaultDragMode=function(e){return this._symbol!==\"glider\"?\"NONE\":b.Assignment.prototype.getDefaultDragMode.call(this,e)};var Vw=b.List;b.Base.prototype.tableInfo=function(e,t){return!1};b.Identifier.prototype.tableInfo=function(e,t){return e.validFirstColumnVariable(this._symbol)?{independent_variable:this._symbol,dependent_column:this.getInputString(),by_reference:!1}:!1};b.Expression.prototype.tableInfo=function(e,t){var r=t.getDependencies();if(cs(this))return!1;switch(t.valueType){case w:case Le:if(r.length!==0||t.isMovablePoint&&(t.moveStrategy[0].type===\"updateSlider\"||t.moveStrategy[1].type===\"updateSlider\"))return!1;var n=Vw.wrap(t).asValue();return{independent_variable:\"x\",dependent_column:\"y\",by_reference:!1,values:n};case I:if(r.length!==1)return!1;var i=r[0];return e.validFirstColumnVariable(i)?{independent_variable:i,dependent_column:this.getInputString(),by_reference:!1}:!1;default:return!1}};b.Assignment.prototype.tableInfo=function(e,t){if(t instanceof b.SolvedEquation||!this.getInputString().length||cs(this))return!1;var r=t.getDependencies();if(r.length>1)return!1;var n;if(r.length===0){if(!e.tableableAsConstant(this._symbol))return!1;n=e.implicitIndependent(this._symbol)}else n=r[0];if(!e.validFirstColumnVariable(n))return!1;var i=e.assignmentForbidden(this._symbol)?ci(this.getInputString().replace(/[^=]*=/,\"\")):ci(this.getInputString().split(\"=\")[0]);return{independent_variable:n,dependent_column:i,by_reference:!e.assignmentForbidden(this._symbol)}};b.FunctionDefinition.prototype.tableInfo=function(e,t){if(this._argSymbols.length!==1||!this.getInputString().length)return!1;var r=t.getDependencies();if(r.length>1)return!1;var n=this._argSymbols[0];if(!e.validFirstColumnVariable(n))return!1;var i=e.assignmentForbidden(this._symbol),s=i?ci(this.getInputString().replace(/[^=]*=/,\"\")):ci(this.getInputString().split(\"=\")[0]);return{independent_variable:n,dependent_column:s,by_reference:!i}};b.BaseComparator.prototype.tableInfo=function(e,t){return!1};b.DoubleInequality.prototype.tableInfo=function(e,t){return!1};b.Equation.prototype.tableInfo=function(e,t){return!1};b.Base.prototype.tableError=function(){return this.isInequality()?T(\"shared-calculator-error-table-inequality-supplement\"):!(this instanceof b.Expression)&&!(this instanceof b.IRExpression)?T(\"shared-calculator-error-table-generic-supplement\"):!1};b.List.prototype.tableError=function(){return T(\"shared-calculator-error-table-list-supplement\")};b.Equation.prototype.tableError=b.Assignment.prototype.tableError=function(){return T(\"shared-calculator-error-table-equation-supplement\")};b.FunctionDefinition.prototype.tableError=function(){return T(\"shared-calculator-error-table-function-definition-supplement\")};b.Regression.prototype.tableError=function(){return T(\"shared-calculator-error-table-regression-supplement\")};var qi=class{constructor(t){this.xtolerance=t.xtolerance||t.tolerance||0,this.ytolerance=t.ytolerance||t.tolerance||0,this.ztolerance=t.ztolerance||t.tolerance||0,this.map=t.map,this.segments=[],this.segment=[],this.pivotPoint=void 0,this.pendingPoint=void 0}colinear(t,r,n){this.map&&(t=this.map(t),r=this.map(r),n=this.map(n));var i=Un(n[0],n[1],n[2]||0,t[0],t[1],t[2]||0,r[0],r[1],r[2]||0);if(i<1)return!1;var s=[t[0]+i*(r[0]-t[0]),t[1]+i*(r[1]-t[1]),t.length===3?t[2]+i*(r[2]-t[2]):0];return Math.abs(n[0]-s[0])<=this.xtolerance&&Math.abs(n[1]-s[1])<=this.ytolerance&&(t.length===2||Math.abs(n[2]-s[2])<=this.ztolerance)}addPoint(t){if(this.dimensions=t.length,this.xtolerance<0&&this.ytolerance<0&&(this.dimensions===2||this.ztolerance<0)){this.segment.push.apply(this.segment,t);return}if(!this.segment.length){this.segment.push.apply(this.segment,t);return}let r=this.dimensions===2?[this.segment[this.segment.length-2],this.segment[this.segment.length-1]]:[this.segment[this.segment.length-3],this.segment[this.segment.length-2],this.segment[this.segment.length-1]];if(!(t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2])){if(!this.pivotPoint||!this.pendingPoint){this.pivotPoint=t,this.pendingPoint=t;return}(!this.colinear(r,this.pivotPoint,t)||Sn(r[0]-t[0],r[1]-t[1],(r[2]||0)-(t[2]||0))<Sn(r[0]-this.pendingPoint[0],r[1]-this.pendingPoint[1],(r[2]||0)-(this.pendingPoint[2]||0)))&&(this.flushPending(),this.pivotPoint=t),this.pendingPoint=t}}flushPending(){this.pendingPoint&&(this.segment.push.apply(this.segment,this.pendingPoint),this.pivotPoint=void 0,this.pendingPoint=void 0)}breakSegment(){this.flushPending(),this.segment.length>(this.dimensions||2)&&this.segments.push(this.segment),this.segment=[]}getSegments(){return this.breakSegment(),this.segments}finish(){return{segments:this.getSegments(),resolved:!0}}};var NM=5,Gw=Math.pow(2,14);function DM(e,t){let r=qw(e,t);return{segments:r.contours.strokeSegments,fillSegments:r.contours.fillSegments,resolved:r.quadTree.resolved}}function qw(e,t){let r=Math.pow(2,-NM),n=OM(t,r),i=OM(t,2*r),s=kw(e,n,i),o=Xw(s.root,e,n),a=Kw(o,e,n);return{paddedDomain:n,rootDomain:i,quadTree:s,triangles:o,contours:a}}function Zo(e,t,r){return{x:e,y:t,z:r}}function Fp(e,t,r){return{x:e,y:t,isZero:r}}function Bp(e,t,r){return{vertices:[e,t,r],visited:!1,next:void 0}}function OM(e,t){let{mathToPixels:r}=e,n=r.interpolateX(e.xmin,e.xmax,-t),i=r.interpolateX(e.xmax,e.xmin,-t),s=r.interpolateY(e.ymin,e.ymax,-t),o=r.interpolateY(e.ymax,e.ymin,-t);return oe(z({},e),{xmin:n,ymin:s,xmax:i,ymax:o})}function lu(e,t){return{depth:e,vertices:t,children:void 0,center:void 0}}function Ah(e,t,r){e.center=RM(e.vertices[0],e.vertices[1],e.vertices[2],e.vertices[3],t,r)}function kw(e,t,r){let n=zw(e,r),i=[],s=[];s.push(n);let o=1,a=!0;e:for(;s.length;){let u=i;i=s,s=u;let l;for(;l=i.pop();)if(Hw(l,e,t)){if(Uw(l,e,t),!l.children){a=!1;break e}if(s.push(l.children[0]),s.push(l.children[1]),s.push(l.children[2]),s.push(l.children[3]),o+=3,o>=Gw){a=!1;break e}}else Ah(l,e,t)}for(let u=0;u<i.length;u++)Ah(i[u],e,t);for(let u=0;u<s.length;u++)Ah(s[u],e,t);return{root:n,resolved:a}}function zw(e,t){let r=t.xmin,n=t.xmax,i=t.ymin,s=t.ymax;return lu(0,[jo(r,s,e),jo(n,s,e),jo(n,i,e),jo(r,i,e)])}function Uw(e,t,r){let n=e.depth+1,i=e.vertices[0],s=e.vertices[1],o=e.vertices[2],a=e.vertices[3],u=Ar(i,s,t,r),l=Ar(s,o,t,r),c=Ar(o,a,t,r),p=Ar(a,i,t,r),f=Ar(i,o,t,r);e.children=[lu(n,[i,u,f,p]),lu(n,[u,s,l,f]),lu(n,[f,l,o,c]),lu(n,[p,f,c,a])]}function Hw(e,t,r){if(e.depth<NM)return!0;if(Ww(e,r)||$w(e,r))return!1;let n=e.vertices[0],i=e.vertices[1],s=e.vertices[2],o=e.vertices[3];if(isNaN(n.z)&&isNaN(i.z)&&isNaN(s.z)&&isNaN(o.z))return!1;if(isNaN(n.z)||isNaN(i.z)||isNaN(s.z)||isNaN(o.z))return!0;let a=RM(n,i,s,o,t,r),u=Ni(n,i,t,r),l=Ni(i,s,t,r),c=Ni(s,o,t,r),p=Ni(o,n,t,r);return ms(n,u,t,r)||ms(i,u,t,r)||ms(i,l,t,r)||ms(s,l,t,r)||ms(s,c,t,r)||ms(o,c,t,r)||ms(o,p,t,r)||ms(n,p,t,r)||ds(n,u,a,t,r)||ds(u,i,a,t,r)||ds(i,l,a,t,r)||ds(l,s,a,t,r)||ds(s,c,a,t,r)||ds(c,o,a,t,r)||ds(o,p,a,t,r)||ds(p,n,a,t,r)}function ds(e,t,r,n,i){if(e.z>0==t.z>0&&t.z>0==r.z>0)return!1;let s,o,a,u;if(e.z>0==t.z>0){if(s=Ar(e,t,n,i),s.z>0!=e.z>0)return!0;o=Oi(e,r,n,i),a=Oi(t,r,n,i),u=Oi(s,r,n,i)}else if(t.z>0==r.z>0){if(s=Ar(t,r,n,i),s.z>0!=t.z>0)return!0;o=Oi(t,e,n,i),a=Oi(r,e,n,i),u=Oi(s,e,n,i)}else{if(s=Ar(r,e,n,i),s.z>0!=r.z>0)return!0;o=Oi(r,t,n,i),a=Oi(e,t,n,i),u=Oi(s,t,n,i)}let{mathToPixels:l}=i,[c,p]=l.mapCoordinatePair([u.x,u.y]),[f,m]=l.mapCoordinatePair([o.x,o.y]),[d,y]=l.mapCoordinatePair([a.x,a.y]);return jb(c,p,f,m,d,y)>i.tolerance}function ms(e,t,r,n){if(isNaN(e.z)&&isNaN(t.z))return!1;if(isNaN(e.z)||isNaN(t.z))return e.z>0||t.z>0;let s=4*Ar(e,t,r,n).z-t.z-3*e.z,o=1e-4,a=(r((1-o)*e.x+o*t.x,(1-o)*e.y+o*t.y)-e.z)/o,u=Math.max(Math.abs(e.z),Math.abs(t.z));return Math.abs(s-a)>.125*u}function $w(e,t){let{mathToPixels:r}=t,[n,i]=r.mapCoordinatePair([e.vertices[1].x,e.vertices[1].y]),[s,o]=r.mapCoordinatePair([e.vertices[0].x,e.vertices[0].y]),[a,u]=r.mapCoordinatePair([e.vertices[3].x,e.vertices[3].y]);return Math.abs(n-s)<10*t.tolerance||Math.abs(o-u)<10*t.tolerance}function Ww(e,t){return e.vertices[0].x<t.xmin||e.vertices[0].y>t.ymax||e.vertices[2].x>t.xmax||e.vertices[2].y<t.ymin}function Qo(e,t){return e.x<t.xmin||e.x>t.xmax||e.y<t.ymin||e.y>t.ymax}function jo(e,t,r){return Zo(e,t,r(e,t))}function Ar(e,t,r,n){let{mathToPixels:i}=n;return jo(i.interpolateX(e.x,t.x,.5),i.interpolateY(e.y,t.y,.5),r)}function Ni(e,t,r,n){if(Qo(e,n)||Qo(t,n))return Ar(e,t,r,n);if(isNaN(e.z)||isNaN(t.z))return Yw(e,t,r,n);if(e.z>0!=t.z>0)return Ar(e,t,r,n);let i=.01,s=r((1-i)*e.x+i*t.x,(1-i)*e.y+i*t.y)-e.z,o=t.z-r(i*e.x+(1-i)*t.x,i*e.y+(1-i)*t.y);return isNaN(s)||isNaN(o)||s>0==o>0?Ar(e,t,r,n):wM(Zo(e.x,e.y,s),Zo(t.x,t.y,o),r,n)}function RM(e,t,r,n,i,s){let o=Ni(e,r,i,s);return e.z>0==r.z>0&&o.z>0!=e.z>0||(o=Ni(t,n,i,s),t.z>0==n.z>0&&o.z>0!=t.z>0)?o:Ar(e,r,i,s)}function wM(e,t,r,n){if(isNaN(e.z))return t;if(isNaN(t.z))return e;if(!isFinite(e.z)&&!isFinite(t.z))return Ar(e,t,r,n);if(isFinite(e.z))if(isFinite(t.z)){let i=1-e.z/t.z,s=1-t.z/e.z;return jo(e.x/i+t.x/s,e.y/i+t.y/s,r)}else return e;else return t}function Oi(e,t,r,n){let{mathToPixels:i}=n,s=e.x,o=t.x,a=e.y,u=t.y,l=e.z,c=t.z;if(Qo(e,n)||Qo(t,n)){let y=Ar(e,t,r,n);return Fp(y.x,y.y,!1)}let[p,f]=i.mapCoordinatePair([s,a]),[m,d]=i.mapCoordinatePair([o,u]);for(;Math.abs(p-m)>n.tolerance||Math.abs(f-d)>n.tolerance;){let y=.5*(s+o),g=.5*(a+u),h=r(y,g);h>0==l>0?(s=y,a=g,l=h):(o=y,u=g,c=h),[p,f]=i.mapCoordinatePair([s,a]),[m,d]=i.mapCoordinatePair([o,u])}if(isNaN(l))return Fp(o,u,!1);if(isNaN(c))return Fp(s,a,!1);{let y=wM(Zo(s,a,l),Zo(o,u,c),r,n),g=l===0||c===0||y.z===0||y.z>=l==c>=y.z&&Math.abs(y.z)<1e250;return Fp(y.x,y.y,g)}}function Yw(e,t,r,n){let{mathToPixels:i}=n;if(isNaN(e.z)===isNaN(t.z))return Ar(e,t,r,n);if(isNaN(e.z)){let d=e;e=t,t=d}let s=e.x,o=t.x,a=e.y,u=t.y,l=e.z,[c,p]=i.mapCoordinatePair([s,a]),[f,m]=i.mapCoordinatePair([o,u]);for(;Math.abs(c-f)>n.tolerance||Math.abs(p-m)>n.tolerance;){let d=.5*(s+o),y=.5*(a+u),g=r(d,y);isNaN(g)===isNaN(l)?(s=d,a=y,l=g):(o=d,u=y),[c,p]=i.mapCoordinatePair([s,a]),[f,m]=i.mapCoordinatePair([o,u])}return Zo(s,a,l)}function Xw(e,t,r){let n={triangles:[],edgeCache:{},domain:r,fn:t};return cu(e,n),n.triangles}function cu(e,t){e.children&&(cu(e.children[0],t),cu(e.children[1],t),cu(e.children[2],t),cu(e.children[3],t),ys(e.children[0],e.children[1],t),ys(e.children[3],e.children[2],t),gs(e.children[1],e.children[2],t),gs(e.children[0],e.children[3],t))}function ys(e,t,r){e.children&&t.children?(ys(e.children[1],t.children[0],r),ys(e.children[2],t.children[3],r)):e.children?(ys(e.children[1],t,r),ys(e.children[2],t,r)):t.children?(ys(e,t.children[0],r),ys(e,t.children[3],r)):Jw(e,t,r)}function gs(e,t,r){e.children&&t.children?(gs(e.children[2],t.children[1],r),gs(e.children[3],t.children[0],r)):e.children?(gs(e.children[2],t,r),gs(e.children[3],t,r)):t.children?(gs(e,t.children[1],r),gs(e,t.children[0],r)):jw(e,t,r)}function Jw(e,t,r){if(!e.center||!t.center)return;let n,i;e.depth>=t.depth?(n=Ni(e.vertices[1],e.vertices[2],r.fn,r.domain),i=qp(e.vertices[1],t.center,e.vertices[2],e.center,n)):(n=Ni(t.vertices[0],t.vertices[3],r.fn,r.domain),i=qp(t.vertices[0],t.center,t.vertices[3],e.center,n)),LM(i,r.edgeCache,r.domain);for(let s=0;s<4;s++)r.triangles.push(i[s])}function jw(e,t,r){if(!e.center||!t.center)return;let n,i;e.depth>=t.depth?(n=Ni(e.vertices[3],e.vertices[2],r.fn,r.domain),i=qp(e.vertices[2],t.center,e.vertices[3],e.center,n)):(n=Ni(t.vertices[1],t.vertices[0],r.fn,r.domain),i=qp(t.vertices[1],t.center,t.vertices[0],e.center,n)),LM(i,r.edgeCache,r.domain);for(let s=0;s<4;s++)r.triangles.push(i[s])}function qp(e,t,r,n,i){return[Bp(e,i,t),Bp(t,i,r),Bp(r,i,n),Bp(n,i,e)]}function pu(e,t,r){return e.z>0&&!Qo(e,r)&&(!(t.z>0)||Qo(t,r))}function Vp(e,t){return\"\"+e.x+\",\"+e.y+\",\"+t.x+\",\"+t.y}function LM(e,t,r){Gp(e[0],e[1],e[2],Vp(e[1].vertices[2],e[1].vertices[0]),t,r),Gp(e[1],e[2],e[3],Vp(e[2].vertices[0],e[2].vertices[2]),t,r),Gp(e[2],e[3],e[0],Vp(e[3].vertices[2],e[3].vertices[0]),t,r),Gp(e[3],e[0],e[1],Vp(e[0].vertices[0],e[0].vertices[2]),t,r)}function Gp(e,t,r,n,i,s){let o=t.vertices[0],a=t.vertices[1],u=t.vertices[2];pu(a,u,s)&&(t.next=r),pu(o,a,s)&&(t.next=e),pu(u,o,s)&&Qw(t,n,i),pu(o,u,s)&&Zw(t,n,i)}function Zw(e,t,r){r[t]?r[t].next=e:r[t]=e}function Qw(e,t,r){r[t]?e.next=r[t]:r[t]=e}function Kw(e,t,r){let{tolerance:n,mathToPixels:i}=r,s={tolerance:n,map:a=>i.mapCoordinatePair(a)},o={fillAccumulator:new qi(s),strokeAccumulator:new qi(s),fn:t,domain:r};for(let a=0;a<e.length;a++){let u=e[a];u.next&&!u.visited&&eL(u,o)}return{strokeSegments:o.strokeAccumulator.finish().segments,fillSegments:o.fillAccumulator.finish().segments}}function eL(e,t){for(;;){let r=e.vertices[0],n=e.vertices[1],i=e.vertices[2];if(Ch(r,n,t),Ch(n,i,t),Ch(i,r,t),e.visited||!e.next)break;e.visited=!0,e=e.next}t.strokeAccumulator.breakSegment(),t.fillAccumulator.breakSegment()}function Ch(e,t,r){if(pu(e,t,r.domain)){let n=Oi(e,t,r.fn,r.domain);r.fillAccumulator.addPoint([n.x,n.y]),n.isZero?r.strokeAccumulator.addPoint([n.x,n.y]):r.strokeAccumulator.breakSegment()}}function _h(e){return Math.abs(e)<5e-8}var fu=class extends qi{constructor(r,n,i){let{tolerance:s,mathToPixels:o}=r;super({tolerance:s,map:a=>o.mapCoordinatePair(a)});this.fn=n,this.mappedFn=a=>o.mapY(n(a)),this.derivative=i,this.poiData={zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}},this.zeroBuffer=[],this.extremumBuffer=[]}getPOI(){return sn.pointsOfInterest?(this.poiData.intercept=this.findIntercept(this.fn),this.poiData):{zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}}}addPoint(r){this.segment.length===0&&_h(r[1])&&(this.poiData.zeros.x.push(r[0]),this.poiData.zeros.y.push(r[1])),this.updateZeroBuffer(r),this.updateExtremumBuffer(r),super.addPoint(r)}updateZeroBuffer(r){let[n,i]=this.map?this.map(r):r;if(!isFinite(n)||!isFinite(i)){this.zeroBuffer.length=0;return}switch(this.zeroBuffer.length){case 0:{if(_h(r[1]))return;this.zeroBuffer.push(r);return}case 1:if(r[1]===0){this.zeroBuffer.push(r);return}else if(r[1]>0!=this.zeroBuffer[0][1]>0){let s=Py(this.zeroBuffer[0][0],this.zeroBuffer[0][1],r[0],r[1],this.fn);s&&(this.poiData.zeros.x.push(s[0]),this.poiData.zeros.y.push(s[1])),this.zeroBuffer.length=0,this.zeroBuffer.push(r);return}else{this.zeroBuffer.length=0,this.zeroBuffer.push(r);return}case 2:{if(r[1]===0)return;if(r[1]>0!=this.zeroBuffer[0][1]>0){let s=Fa(this.zeroBuffer[0][0],this.zeroBuffer[0][1],this.zeroBuffer[1][0],this.zeroBuffer[1][1],r[0],r[1],this.fn);s&&(this.poiData.zeros.x.push(s[0]),this.poiData.zeros.y.push(s[1])),this.zeroBuffer.length=0,this.zeroBuffer.push(r);return}else{this.zeroBuffer.length=0,this.zeroBuffer.push(r);return}}}}updateExtremumBuffer(r){let[n,i]=this.map?this.map(r):r;if(!isFinite(n)||!isFinite(i)){this.extremumBuffer.length=0;return}switch(this.extremumBuffer.length){case 0:{this.extremumBuffer.push(r);return}case 1:{r[1]===this.extremumBuffer[0][1]&&(this.extremumBuffer.length=0),this.extremumBuffer.push(r);return}case 2:if(r[1]===this.extremumBuffer[1][1]){this.extremumBuffer.push(r);return}else if(r[1]>this.extremumBuffer[1][1]!=this.extremumBuffer[1][1]>this.extremumBuffer[0][1]){let s=this.bisectExtremumUsingDerivative(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],r[0],r[1]);s&&(this.poiData.extrema.x.push(s[0]),this.poiData.extrema.y.push(s[1]),!Ro(this.extremumBuffer[0][0],this.mappedFn(this.extremumBuffer[0][0]),s[0],this.mappedFn(s[0]),r[0],this.mappedFn(r[0]),this.mappedFn,this.ytolerance)&&s[0]>this.segment[this.segment.length-2]&&(this.pendingPoint=s)),this.extremumBuffer.shift(),this.extremumBuffer.push(r);return}else{this.extremumBuffer.shift(),this.extremumBuffer.push(r);return}case 3:{if(r[1]===this.extremumBuffer[1][1])return;if(r[1]>this.extremumBuffer[1][1]!=this.extremumBuffer[1][1]>this.extremumBuffer[0][1]){let s,o=.5*(this.extremumBuffer[1][0]+this.extremumBuffer[2][0]),a=this.fn(o);a===this.extremumBuffer[1][1]?s=Fa(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],r[0],r[1],this.fn):s=this.bisectExtremumUsingDerivative(this.extremumBuffer[1][0],this.extremumBuffer[1][1],o,a,this.extremumBuffer[2][0],this.extremumBuffer[2][1]),s&&(this.poiData.extrema.x.push(s[0]),this.poiData.extrema.y.push(s[1])),this.extremumBuffer.shift(),this.extremumBuffer.shift(),this.extremumBuffer.push(r);return}else{this.extremumBuffer.shift(),this.extremumBuffer.shift(),this.extremumBuffer.push(r);return}}}}bisectExtremumUsingDerivative(r,n,i,s,o,a){let u;if(this.derivative){let l=this.derivative(r),c=this.derivative(o);if(!isNaN(l)&&!isNaN(c)&&(s>n&&l>0&&c<0||s<n&&l<0&&c>0)){let p=Py(r,l,o,c,this.derivative);p&&(u=[p[0],this.fn(p[0])])}}return u||(u=Bx(r,n,i,s,o,a,this.fn)),u}breakSegment(){this.zeroBuffer.length=0,this.extremumBuffer.length=0,this.flushPending(),this.segment.length>2&&(this.segments.push(this.segment),_h(this.segment[this.segment.length-1])&&(this.poiData.zeros.x.push(this.segment[this.segment.length-2]),this.poiData.zeros.y.push(this.segment[this.segment.length-1]))),this.segment=[]}findIntercept(r){if(!r)return{x:[],y:[]};let n=r(0);return isFinite(n)?{x:[0],y:[r(0)]}:{x:[],y:[]}}finish(){return{segments:this.getSegments(),resolved:!0,poi:this.getPOI()}}};var tL=e=>{for(var t=[],r=[],n=e.length,i=0;i<n;i++)t.push(e[i][0]),r.push(e[i][1]);return{defined:{x:t,y:r}}},Bn=tL;function AM(e,t){return{type:\"linear\",s:e,t}}function CM(e,t){return{type:\"logarithmic\",s:e,t}}function _M(e,t){return{type:\"exponential\",s:e,t}}function rL([e,t],[r,n]){let i=(n-r)/(t-e),s=(t*r-e*n)/(t-e);return AM(i,s)}function nL([e,t],[r,n]){let i=(n-r)/(Math.log(t)-Math.log(e)),s=(Math.log(t)*r-Math.log(e)*n)/(Math.log(t)-Math.log(e));return CM(i,s)}function iL([e,t],[r,n]){let i=(Math.log(n)-Math.log(r))/(t-e),s=(t*Math.log(r)-e*Math.log(n))/(t-e);return _M(i,s)}function Fh(e,t,r){switch(e){case\"linear\":return rL(t,r);case\"logarithmic\":return nL(t,r);case\"exponential\":return iL(t,r);default:{let n=e;throw new Error(\"Unexpected scale type: \"+n)}}}function Bh({type:e,s:t,t:r},n){switch(e){case\"linear\":return t*n+r;case\"logarithmic\":return t*Math.log(n)+r;case\"exponential\":return Math.exp(t*n+r);default:let i=e;throw new Error(\"Unexpected scale type: \"+i)}}function Vh({type:e},t,r,n){switch(e){case\"linear\":return sL(t,r,n);case\"logarithmic\":return Math.pow(t,1-n)*Math.pow(r,n);case\"exponential\":return n===0?t:n===1?r:Math.log((1-n)*Math.exp(t)+n*Math.exp(r));default:let i=e;throw new Error(\"Unexpected scale type: \"+i)}}function sL(e,t,r){return(1-r)*e+r*t}function Gh({type:e,s:t,t:r}){switch(e){case\"linear\":return AM(1/t,-r/t);case\"logarithmic\":return _M(1/t,-r/t);case\"exponential\":return CM(1/t,-r/t);default:let n=e;throw new Error(\"Unexpected scale type: \"+n)}}function FM({width:e,height:t}){return{left:0,right:e,top:0,bottom:t}}function BM({xmin:e,xmax:t,ymin:r,ymax:n}){return{left:e,right:t,bottom:r,top:n}}var hs=class{constructor(t,r){this.xScale=t,this.yScale=r}static fromRects(t,r,{xAxisScale:n,yAxisScale:i}){return new hs(Fh(n,[t.left,t.right],[r.left,r.right]),Fh(i,[t.bottom,t.top],[r.bottom,r.top]))}inverse(){return new hs(Gh(this.xScale),Gh(this.yScale))}mapX(t){return Bh(this.xScale,t)}mapY(t){return Bh(this.yScale,t)}mapPoint({x:t,y:r}){return{x:this.mapX(t),y:this.mapY(r)}}mapCoordinatePair([t,r]){return[this.mapX(t),this.mapY(r)]}mapRect({top:t,bottom:r,left:n,right:i}){return{left:this.mapX(n),right:this.mapX(i),bottom:this.mapY(r),top:this.mapY(t)}}interpolateX(t,r,n){return Vh(this.xScale,t,r,n)}interpolateY(t,r,n){return Vh(this.yScale,t,r,n)}dangerouslyGetXScaleFactor(){if(this.xScale.type!==\"linear\")throw new Error(`Cannot get scale factor a '${this.xScale.type}' scale`);return this.xScale.s}dangerouslyGetYScaleFactor(){if(this.yScale.type!==\"linear\")throw new Error(`Cannot get scale factor a '${this.yScale.type}' scale`);return this.yScale.s}};function VM(){return{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}}}function HM(e){return{graphMode:15,error:e,segments:[]}}function zh(e,t){let r=e[0]+t.min*e[1],n=e[0]+t.max*e[1],i={zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}};if(!isFinite(r)||!isFinite(n))return{segments:[],poi:i,resolved:!0};let s=[[t.min,r,t.max,n]],o=-e[0]/e[1];return!isNaN(o)&&o>=t.min&&o<=t.max&&(i.zeros.x.push(o),i.zeros.y.push(0)),0>=t.min&&0<=t.max&&(i.intercept.x.push(0),i.intercept.y.push(e[0])),{segments:s,poi:i,resolved:!0}}function aL(e,t){let r=zh(e[0],t),n=zh(e[1],t);return r.segments.length&&n.segments.length&&r.segments[0].length===4&&n.segments[0].length===4?{segments:[[r.segments[0][1],n.segments[0][1],r.segments[0][3],n.segments[0][3]]],resolved:!0}:{segments:[],resolved:!0}}function GM(e,t){let r=e(t);return{segments:[[...r,...r]],resolved:!0}}function qM(e,t,r){let{mappedFn:n,jumpTolerance:i,screen:s}=r,[o,a]=e,[u,l]=t,c=Li(o,u),p=n(c),f=s.height;if(!(a<0&&l<0&&(a>=p||l>=p))&&!(a>f&&l>f&&(a<=p||l<=p)))return Ro(o,a,c,p,u,l,n,i)}var qh=(e,t,r)=>{let{fn:n,mappedFn:i,jumpTolerance:s,accumulator:o}=r;if(!isFinite(s)||s<=0)return;let a=qM(e,t,r);if(!a)return;let u=(t[0]-e[0])/10,l=[-u,u],c;for(let p=0;p<l.length;p++){let f=e[0]+l[p],m=i(f);isFinite(m)||([f,m]=e,f=e[0],m=e[1]);let d=t[0]+l[p],y=i(d);if(isFinite(y)?c=d:[d,y]=t,qM([f,m],[d,y],r)){let[g,h]=a;o.addPoint([g,n(g)]),o.breakSegment(),o.addPoint([h,n(h)]);return}}return c},Uh=class{constructor(t,r,n){let i=s=>r.mathToPixels.mapY(t(s));this.derivative=n,this.accumulator=new fu(r,t,n),this.fn=t,this.mathToPixels=r.mathToPixels,this.mappedFn=i,this.jumpTolerance=r.tolerance||0,this.screen=r.screen}};function kM(e,t,r,n){let i=r,s=e(i),o=t.mapY(s);return isFinite(o)||(i=r+n,s=e(i),o=t.mapY(s)),isFinite(o)||(i=r-n,s=e(i),o=t.mapY(s)),[i,s,o]}function $h(e,t,r){let n=new Uh(e,t,r),{mathToPixels:i,mappedFn:s}=n,o=t.nInitialSamples,a=Math.abs(i.interpolateX(t.min,t.max,1/(o-1))-t.min)/10,[u,l,c]=kM(e,i,t.min,a);isFinite(c)&&n.accumulator.addPoint([u,l]);for(var p=1;p<o;p++){let f=i.interpolateX(t.min,t.max,p/(o-1)),m=Math.abs(u-f)/10,[d,y,g]=kM(e,i,f,m);if(isFinite(g)&&isFinite(c)){let h=qh([u,c],[d,g],n);h!==void 0&&(d=h,y=e(d),g=i.mapY(y)),n.accumulator.addPoint([d,y])}else if(isFinite(g)&&!isFinite(c)){let h=mn(u,c,d,g,s);if(h!==void 0){h!==d&&n.accumulator.addPoint([h,e(h)]);let x=qh([h,s(h)],[d,g],n);x!==void 0&&(d=x,y=e(d),g=i.mapY(y)),n.accumulator.addPoint([d,y])}}else if(!isFinite(g)&&isFinite(c)){let h=mn(u,c,d,g,s);if(h!==void 0){let x=qh([u,c],[h,s(h)],n);x!==void 0&&(h=x),h!==u&&n.accumulator.addPoint([h,e(h)]),n.accumulator.breakSegment()}}u=d,l=y,c=g}return n.accumulator.finish()}function uL(e){let{fn:t,min:r,max:n}=e,i=Math.floor(r),s=Math.ceil(n),o=[];for(let a=i;a<=s;a++){let u=t(a);!isFinite(a)||!isFinite(u)||o.push([a,u])}return{segments:o,resolved:!0}}function lL(e,t,r,n){let i=t.min,s=t.max-t.min,o=t.xtolerance&&t.ytolerance?Math.min(t.xtolerance,t.ytolerance):0,a=Math.floor(s/(Math.PI/r)),u,l,c;function p(f,m){let d=m%2===0?1:-1;if(!n&&d===-1)return!1;let y=m*(Math.PI/r),g=[i,i+1,i+2,i+3],h=!1;for(let x=0,P=g.length;x<P;x++){let D=f(g[x]),M=f(g[x]+y);if(isFinite(D)&&isFinite(M)&&(h=!0),isFinite(D)!==isFinite(M)||Math.abs(D-d*M)>o)return!1}return!!h}for(u=1;u<=a;u++)if(p(e,u)){for(c=u,l=2;l*u<=a;l++)p(e,l*u)||(c=void 0);if(c)break}return c?c*(Math.PI/r):null}function $M(e){return[e[1]*Math.cos(e[0]),e[1]*Math.sin(e[0])]}function kh(e,t){if(t.max<t.min)return{segments:[],resolved:!0};let{xtolerance:r,ytolerance:n,ztolerance:i,map:s}=t,o=new qi({xtolerance:r,ytolerance:n,ztolerance:i,map:s}),a=10,u=t.min,l=e(u);isFinite(l[0])&&isFinite(l[1])&&o.addPoint(l);let c=t.nInitialSamples;for(let p=1;p<c;p++){let f=p/(c-1),m=(1-f)*t.min+f*t.max,d=e(m);du(e,u,l,m,d,a,o,t.screen),u=m,l=d}return o.finish()}function cL(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function du(e,t,r,n,i,s,o,a){if(n===t)return;let{xtolerance:u,ytolerance:l,ztolerance:c,map:p}=o,f=Li(t,n),m=e(f),d=p(r),y=p(i),g=p(m),h=isFinite(d[0])&&isFinite(d[1])&&(d.length===2||isFinite(d[2])),x=isFinite(y[0])&&isFinite(y[1])&&(y.length===2||isFinite(y[2])),P=isFinite(g[0])&&isFinite(g[1])&&(g.length===2||isFinite(g[2]));if(s===0||f===t||f===n){o.breakSegment(),x&&o.addPoint(i);return}if(!(!h&&!x)){if(h!==x){let D=t,M=n,E=r,S=i;for(;t!==f&&f!==n;)P==h?(t=f,r=m,d=g,h=P):(n=f,i=m,y=g,x=P),f=t+(n-t)/2,m=e(f),g=p(m),P=isFinite(g[0])&&isFinite(g[1])&&(g.length===2||isFinite(g[2]));h?(du(e,D,E,t,r,s-1,o,a),o.breakSegment()):(o.breakSegment(),o.addPoint(i),du(e,n,i,M,S,s-1,o,a));return}if(h&&P&&x){let D=cL(d,y),M=Un(g[0],g[1],g[2]||0,d[0],d[1],d[2]||0,y[0],y[1],y[2]||0),E=M>.2&&M<.8&&Math.abs(g[0]-(d[0]+M*(y[0]-d[0])))<=u&&Math.abs(g[1]-(d[1]+M*(y[1]-d[1])))<=l&&(d.length===2||Math.abs(g[2]-(d[2]+M*(y[2]-d[2])))<=c);if(D||E||a&&pL(d,g,y,a)){o.addPoint(i);return}}du(e,t,r,f,m,s-1,o,a),du(e,f,m,n,i,s-1,o,a)}}function pL(e,t,r,{width:n,height:i}){return e[0]<0&&r[0]<0&&(e[0]>=t[0]||r[0]>=t[0])||e[0]>n&&r[0]>n&&(e[0]<=t[0]||r[0]<=t[0])||e[1]<0&&r[1]<0&&(e[1]>=t[1]||r[1]>=t[1])||e[1]>i&&r[1]>i&&(e[1]<=t[1]||r[1]<=t[1])}function fL(e,t){let r=e.fn,{xmin:n,xmax:i,ymin:s,ymax:o}=t,a=30,u=30,l=(i-n)/a,c=(o-s)/u,p=[],f=[],m=[],d=l/1e3,y=c/1e3;for(let g=0;g<a;g++)for(let h=0;h<u;h++){let x=n+g*l,P=s+h*c,D=r(x,P);p.push(x,P,D);let M=r(x+d,P)-D,E=r(x,P+y)-D,S=M*y,v=E*d,N=-d*y,G=Math.sqrt(S*S+v*v+N*N);f.push(S/G,v/G,N/G)}for(let g=0;g<a-1;g++)for(let h=0;h<u-1;h++){let x=h*u+g,P=h*u+g+1,D=(h+1)*u+g,M=(h+1)*u+g+1;m.push(x,D,P),m.push(D,M,P)}return{cacheKey:e.source+\":\"+JSON.stringify(t),positions:new Float32Array(p),normals:new Float32Array(f),faces:new Int16Array(m)}}function zM(e){for(let t of e)if(t!==0)return!1;return!0}function WM(e,t){let{min:r,max:n,mathToPixels:i,nInitialSamples:s}=t,o=i.interpolateX(r,n,0),a=e(o),u=zM(a),l=!1,c=[];for(var p=1;p<s;p++){let f=i.interpolateX(r,n,p/(s-1)),m=e(f),d=zM(m);if(u){o=f,a=m,d||(u=!1);continue}if(d){l?(u=!0,l=!1):l=!0;continue}let y=Fx(o,a,f,m,e);y!==void 0&&c.push(y),o=f,a=m}return c}function YM(e){if(!e)return!1;let t=e.viewport.xmin,r=e.viewport.xmax,n=e.viewport.ymin,i=e.viewport.ymax;return!(!isFinite(t)||!isFinite(r)||r<=t||!isFinite(n)||!isFinite(i)||i<=n||!isFinite(e.screen.width)||e.screen.width<=0||!isFinite(e.screen.height)||e.screen.height<=0)}function UM(e,t){let r=t-e;return 1+Math.ceil(r/(r/1e3))}function Ko(e,t,r){var D;let{viewport:n,screen:i,xAxisScale:s,yAxisScale:o}=e,a=e.viewport.xmin,u=e.viewport.xmax,l=e.viewport.ymin,c=e.viewport.ymax;var p=t.lineWidth;if(p>3){var f=p*(u-a)/e.screen.width,m=p*(c-l)/e.screen.height;a-=f,u+=f,l-=m,c+=m}let y=1/4,g=t.domainBound,h,x=hs.fromRects(BM(n),FM(i),{xAxisScale:s,yAxisScale:o}),P;switch(t.graphMode){case 1:switch(h=Or(kn([l,c]),g),h.type){case\"empty\":return!1;case\"known\":l=h.bounds[0],c=h.bounds[1]}let M=1+Math.ceil(Math.abs(x.mapY(c)-x.mapY(l))/y),E=new hs(x.yScale,x.xScale);P={min:l,max:c,tolerance:y,nInitialSamples:M,mathToPixels:E,screen:{width:i.height,height:i.width}};break;case 2:{switch(h=Or(kn([a,u]),g),h.type){case\"empty\":return!1;case\"known\":a=h.bounds[0],u=h.bounds[1]}let S=1+Math.ceil(Math.abs(x.mapX(u)-x.mapX(a))/y);P={min:a,max:u,tolerance:y,nInitialSamples:S,mathToPixels:x,screen:i};break}case 6:{let S=e.degreeMode?Math.PI/180:1;if(!t.domain)throw new Error(\"Expected polar graph to have domain\");let{min:v,max:N}=t.domain;switch(h=Or(kn([v,N]),g),h.type){case\"empty\":return!1;case\"known\":v=h.bounds[0],N=h.bounds[1]}let G=1+Math.min(Math.ceil(S*Math.abs(N-v)/(2*Math.PI)*1e3),12e3);if(P={min:v,max:N,screen:i,nInitialSamples:G,xtolerance:y,ytolerance:y,map:([C,H])=>x.mapCoordinatePair($M([C,H]))},!t.domain.isExplicit){let C=lL(r,P,S,t.operator===\"=\");C&&(P.max=P.min+C,P.nInitialSamples=1+Math.min(Math.ceil(S*Math.abs(P.max-P.min)/(2*Math.PI)*1e3),12e3))}break}case 5:case 14:{let S={min:0,max:1},{min:v,max:N}=(D=t.domain)!=null?D:S;switch(h=Or(kn([v,N]),g),h.type){case\"empty\":return!1;case\"known\":v=h.bounds[0],N=h.bounds[1]}if(t.graphMode===14){let G=y*(u-a)/e.screen.width,C=y*(c-l)/e.screen.height;P={min:v,max:N,nInitialSamples:UM(v,N),xtolerance:G,ytolerance:C,ztolerance:Math.min(G,C),map:H=>H}}else P={min:v,max:N,screen:i,nInitialSamples:UM(v,N),xtolerance:y,ytolerance:y,ztolerance:y,map:([G,C])=>x.mapCoordinatePair([G,C])};break}case 8:P={xmin:a,xmax:u,ymin:l,ymax:c,mathToPixels:x,tolerance:y};break;case 13:return{xmin:-10,xmax:10,ymin:-10,ymax:10};default:return!1}return P}function kp(e){let{viewState:t,graphInfo:r,compiled:n,maxOverride:i,showPoint:s}=e,o=n.fn,a=Ko(t,r,o),u;a||(u={segments:[],resolved:!0});let{min:l,max:c}=a;u=uL({fn:o,min:Math.max(l,0),max:i!==void 0?Math.min(i,c):c});let{points:p,droppedIndices:f}=mu(u.segments);return{segments:[p],droppedIndices:f,graphMode:3,color:r.color,style:r.pointStyle,poi:Bn(u.segments),showPoint:s}}function ao(e){let{viewState:t,graphInfo:r,compiled:n,derivative:i}=e,s=n.fn,o=Ko(t,r,s),a,u,l,c=r.graphMode,p=t.xAxisScale===\"linear\"&&t.yAxisScale===\"linear\";if(!o)a={segments:[],resolved:!0};else{switch(c){case 1:case 2:let m=i?i.fn:void 0;a=r.isLinear&&p&&jn(r.linearCoefficients)?zh(r.linearCoefficients,o):$h(s,o,m);break;case 6:a=kh(g=>[g,s(g)],o);break;case 8:a=DM(s,o);break;case 5:o.max===o.min?a=GM(s,o.min):a=r.isLinear&&p&&jn(r.linearCoefficients)?aL(r.linearCoefficients,o):kh(s,o);break;case 14:return o.max===o.min?a=GM(s,o.min):a=kh(s,o),{graphMode:14,segments:a.segments,cacheKey:n.source+\":\"+JSON.stringify(o),color:r.color,style:\"dummy\"};break;case 13:return{meshData:fL(n,o),color:r.color,graphMode:13,poi:VM(),compiled:n,style:\"dummy\"};default:throw new Error(\"Programming Error: unexpected graphmode \"+c)}l=a.poi}if((!l||l.zeros.x.length+l.extrema.x.length+l.intercept.x.length>250)&&(l=VM()),c===1)for(let m in l){if(!l.hasOwnProperty(m))continue;let d=m;u=l[d].y,l[d].y=l[d].x,l[d].x=u}let f={segments:a.segments,resolved:a.resolved,graphMode:c,color:r.color,style:r.lineStyle,lineWidth:r.lineWidth,lineOpacity:r.lineOpacity,listIndex:r.listIndex,operator:r.operator,poi:l,compiled:n};if(c===6){let m=o;f.sampledDomain={min:m.min,max:m.max}}return a.fillSegments&&(f.fillSegments=a.fillSegments),f}function dL(e,t,r){let n,i,s,o,a=[],u=null;switch(r){case 6:u=$M;break;case 1:u=function(l){return[l[1],l[0]]};break}for(n=0;n<e.length;n++)for(o=e[n],i=0;i<o.length;i+=2)s=[o[i],o[i+1]],u&&(s=u(s)),a.push(s[0],s[1]);for(n=t.length-1;n>=0;n--)for(o=t[n],i=o.length-2;i>=0;i-=2)s=[o[i],o[i+1]],u&&(s=u(s)),a.push(s[0],s[1]);return a}function zp(e,t,r){let n=p=>{let f=p[p.length-1];return f[f.length-2]},i=[],s=0,o=0,a=[],u=[],l=-1/0,c=-1/0;for(;;){if(l<=c){if(s>=t.length)break;u.push(t[s++])}if(c<=l){if(o>=e.length)break;a.push(e[o++])}if(l=n(u),c=n(a),Nr(l,c,4)){i.push(dL(a,u,r)),u=[],a=[];let p=Math.max(l,c);l=p,c=p}}return i}function mu(e){let t=[],r={};for(let n=0;n<e.length;n++){let i=e[n],[s,o]=i;!isNaN(s)&&!isNaN(o)?t.push(i):r[n]=!0}return{points:t,droppedIndices:r}}var mL=(e,t)=>{let r=e.segments[0],n=t.segments[0],i=[[...r,...n]];return oe(z({},e),{segments:i})};function yL(e){let{viewState:t,graphInfo:r,compiled:n,derivative:i,bounds:s}=e,o=_n(r),a=Or(r.domainBound,kn(s));if(a.type===\"known\")return o.domainBound=a,o.lineStyle=\"SOLID\",ao({graphInfo:o,viewState:t,compiled:n,derivative:i})}function bs(e){let{viewState:t,graphInfo:r,compiled:n,bounds:i,included:s,showPoint:o}=e,a=_n(r),u=Or(r.domainBound,kn(i));if(u.type===\"known\")return a.domainBound=u,a.pointStyle=s?\"POINT\":\"OPEN\",kp({graphInfo:a,viewState:t,compiled:n,showPoint:o,maxOverride:void 0})}function jM(e){let{viewState:t,graphInfo:r,compiled:n,bounds:i,maxOverride:s,showPoint:o}=e,[a,u]=i,l=[],c;a=Math.ceil(a),u=Math.floor(u);let p=s!==void 0?s:1/0;if(a===-1/0&&u>=p)c=bs({bounds:[a,p],included:!0,viewState:t,graphInfo:r,compiled:n,showPoint:o}),l.push(c);else if(a===-1/0&&u<1/0)c=bs({bounds:[a,u],included:!0,viewState:t,graphInfo:r,compiled:n,showPoint:o}),l.push(c),l.push(bs({bounds:[u+1,p],included:!1,viewState:t,graphInfo:r,compiled:n,showPoint:o}));else if(a>-1/0&&u>=p)c=bs({bounds:[a,p],included:!0,viewState:t,graphInfo:r,compiled:n,showPoint:o}),l.push(bs({bounds:[-1/0,a-1],included:!1,viewState:t,graphInfo:r,compiled:n,showPoint:o})),l.push(c);else{c=bs({bounds:[a,u],included:!0,viewState:t,graphInfo:r,compiled:n,showPoint:o});let f=bs({bounds:[-1/0,a-1],included:!1,viewState:t,graphInfo:r,compiled:n,showPoint:o}),m=bs({bounds:[u+1,p],included:!1,viewState:t,graphInfo:r,compiled:n,showPoint:o});l.push(c);let d;f&&m&&(d=mL(f,m),l.push(d))}return{cdfTopBranch:c,topBranches:l}}var ZM=e=>{let{viewState:t,graphInfo:r,compiled:n,derivative:i,bounds:s}=e,[o,a]=s,u=yL({bounds:[o,a],viewState:t,graphInfo:r,compiled:n,derivative:i}),l=[ao({viewState:t,graphInfo:r,compiled:n,derivative:i})];return{cdfTopBranch:u,topBranches:l}};function M5(e){switch(e){case\"LOOP_FORWARD\":return\"dcg-icon-arrow-one-way\";case\"LOOP_FORWARD_REVERSE\":return\"dcg-icon-arrow-two-way\";case\"PLAY_ONCE\":return\"dcg-icon-arrow-once\";case\"PLAY_INDEFINITELY\":return\"dcg-icon-arrow-infinite\"}}function yu(e,t){let r={};for(let n in t)t.hasOwnProperty(n)&&(Ri(e[n],t[n])||(r[n]=t[n]));return r}function Hp(e,t){let r,n={};for(let i in t)t.hasOwnProperty(i)&&(Ri(e[i],t[i])||(n[i]=t[i],r=n));return r}function O5(e,t){t||(t={});let r={};for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(r[n]=_n(e[n]));for(let n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}function D5({from:e,to:t,props:r}){for(var n in r)r[n]&&e.hasOwnProperty(n)&&(t[n]=_n(e[n]))}function R5(e,t){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}function KM(e,t){let r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=e[n]);return r}function w5(e){let t={};for(let r in e)e.hasOwnProperty(r)&&(t[r]=!0);return t}var gL=(n=>(n.NONE=\"NONE\",n.POSITIVE=\"POSITIVE\",n.BOTH=\"BOTH\",n))(gL||{});var ev={collapsed:!1,hidden:!1,secret:!1,readonly:!1,title:\"\"};function C5(e){return z(z({},ev),e)}function _5(e){return yu(ev,e)}var tv=\"**dcg_geo_folder**\";var Wh={show:!1,min:\"\",max:\"\"},Yh={breadth:\"\",axisOffset:\"\",alignedAxis:\"x\",showBoxplotOutliers:!0,binAlignment:\"center\",dotplotXMode:\"exact\",histogramMode:\"\"},Xh={enabled:!1,latex:\"\"};var hL=4e3,$p={polarDomain:{min:\"\",max:\"\"},parametricDomain:{min:\"\",max:\"\"},cdf:Wh,colorLatex:\"\",description:\"\",fillOpacity:\"\",lineOpacity:\"\",pointOpacity:\"\",pointSize:\"\",lineWidth:\"\",labelAngle:\"\",vizProps:Yh,clickableInfo:Xh},rv=oe(z({folderId:\"\",latex:\"\",color:\"\",showLabel:!1,label:\"\",hidden:!1,secret:!1,readonly:!1,dragMode:\"AUTO\",labelSize:\"\",labelOrientation:\"default\",suppressTextOutline:!1,interactiveLabel:!1,editableLabelMode:\"NONE\",residualVariable:\"\",isLogModeRegression:!1,pointStyle:\"POINT\",lineStyle:\"SOLID\",arrowMode:\"DEFAULT\",regressionParameters:{},displayEvaluationAsFraction:!1,slider:{},strictIntersection:!1},$p),{points:void 0,lines:void 0,fill:void 0}),nv={hardMin:!1,hardMax:!1,animationPeriod:hL,loopMode:\"LOOP_FORWARD_REVERSE\",playDirection:1,isPlaying:!1,min:\"-10\",max:\"10\",step:\"\"};function X5(e){return oe(z(z({},rv),e),{slider:z(z({},nv),e.slider),cdf:z(z({},Wh),e.cdf),vizProps:z(z({},Yh),e.vizProps),clickableInfo:z(z({},Xh),e.clickableInfo)})}function J5(e){var t=yu(rv,oe(z({},e),{slider:yu(nv,e.slider)})),r=Hp(Wh,e.cdf);r===void 0?delete t.cdf:t.cdf=r;var n=Hp(Yh,e.vizProps);n===void 0?delete t.vizProps:t.vizProps=n;var i=Hp(Xh,e.clickableInfo);return i===void 0?delete t.clickableInfo:t.clickableInfo=i,t}function bL(e){return KM(e,$p)}function j5(e,t){for(var r in $p)if($p.hasOwnProperty(r)&&e[r]!==t[r])return!1;return!0}function Z5(e){return z({type:\"statement\",id:e.id,latex:e.latex,label:e.label,color:e.color,fill:e.fill,points:e.points,lines:e.lines,pointStyle:e.pointStyle,lineStyle:e.lineStyle,arrowMode:e.arrowMode,dragMode:e.dragMode,labelSize:e.labelSize,labelOrientation:e.labelOrientation,suppressTextOutline:e.suppressTextOutline,interactiveLabel:e.interactiveLabel,editableLabelMode:e.editableLabelMode,residualVariable:e.residualVariable,regressionParameters:e.regressionParameters,isLogModeRegression:e.isLogModeRegression,showLabel:e.showLabel,shouldGraph:e.hidden,slider:{min:e.slider.hardMin?e.slider.min:\"\",max:e.slider.hardMax?e.slider.max:\"\",softMin:e.slider.hardMin?\"\":e.slider.min,softMax:e.slider.hardMax?\"\":e.slider.max,step:e.slider.step,isPlayingOnce:e.slider.isPlaying&&e.slider.loopMode===\"PLAY_ONCE\"},strictIntersection:e.strictIntersection,isInConstructionsFolder:e.folderId===tv},bL(e))}function Jh(e,t){let r;switch(t){case\"solvedEquation\":r=2;break;case\"baseComparator\":r=4;break;default:r=1;break}return Math.floor(e/r)}var PL=!1,gu=b.List;function br(){return{}}function TL(){return{segments:[],poi:{},graphMode:1,color:\"\"}}function uo(e,t,r){let n=1/0;for(let s of t){let o=e[s];Array.isArray(o)&&o.length<n&&(n=o.length)}let i=1;return r===\"solvedEquation\"?i=2:r===\"baseComparator\"&&(i=4),i*n}function ea(e,t,r){return Array.isArray(e)?e[Jh(t,r)]:e}function IL(e,t){var r=t.viewport.xmax-t.viewport.xmin,n=t.viewport.ymax-t.viewport.ymin;let i=Sn(r,n),s=Sn(30,30),o=Math.round(2-Math.log(i/s)/Math.LN10);if(o<=0)return Math.round(e)+\"\";{let a=Math.pow(10,o);return Math.round(e*a)/a+\"\"}}function ML(e,t){var r=t.viewport.xmax-t.viewport.xmin,n=t.viewport.ymax-t.viewport.ymin;let i=r*n,s=30*30,o=Math.round(2-Math.log(i/s)/Math.LN10);if(o<=0)return Math.round(e)+\"\";{let a=Math.pow(10,o);return Math.round(e*a)/a+\"\"}}function vL(e,t){return t.degreeMode?Math.round(e/(Math.PI/180)*10)/10+\"\\xB0\":Math.round(e*100)/100+\"\"}function lo(e,t,r){let n=Jh(t,r),i=e.userData.lineStyle,s=ea(e.metaData.computedLineWidth,t,r),o=ea(e.metaData.computedLineOpacity,t,r),a=ea(e.metaData.computedFillOpacity,t,r),u=e.metaData.colorLatexValue?ea(e.metaData.colorLatexValue,t,r):e.userData.color;return{listIndex:n,style:i,lineWidth:s,lineOpacity:o,fillOpacity:a,color:u}}b.Base.prototype._graph=EL;function EL(e,t,r,n,i,s){if(t instanceof b.SolvedEquation){let l=this._graph(e,t._expression,r,n,i,t.branchMultiplier===2?\"solvedEquation\":void 0),c=lv(this,t,r,e);return c&&(l||(l=[]),Array.prototype.push.apply(l,c)),l}function o(l){let c=l.editableLabelMode;return c===\"TEXT\"||c===\"MATH\"}let a=t.getExpressionType(n.graphMode,t.valueType),u=U0(a,{points:this.userData.points,lines:this.userData.lines,fill:this.userData.fill});switch(n.graphMode){case 4:let{points:l,droppedIndices:c}=mu([t.asValue()]),p=this.userData.shouldGraph&&u.points,f=this.userData.showLabel&&!p;return p?[{segments:[l],graphMode:n.graphMode,droppedIndices:c,color:Si(this.userData,this.metaData),style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,labelSize:this.metaData.computedLabelSize,labelAngle:this.metaData.computedLabelAngle,labelOrientation:this.userData.labelOrientation,pointOpacity:this.metaData.computedPointOpacity,suppressTextOutline:this.userData.suppressTextOutline,editableLabel:o(this.userData),labels:this.computedLabels||[],poi:Bn(l),movablePointInfo:[]}]:f?[{segments:[l],graphMode:3,color:Si(this.userData,this.metaData),style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,nakedLabel:!0,labelSize:this.metaData.computedLabelSize,labelAngle:this.metaData.computedLabelAngle,labelOrientation:this.userData.labelOrientation,pointOpacity:this.metaData.computedPointOpacity,suppressTextOutline:this.userData.suppressTextOutline,editableLabel:o(this.userData),labels:this.computedLabels||[],poi:Bn(l),showPoint:!1}]:[];case 3:{let d=[],y=this.userData.shouldGraph&&u.points,g=this.userData.shouldGraph&&u.lines,h=[\"colorLatexValue\"];y&&h.push(\"computedPointOpacity\",\"computedPointSize\"),(this.userData.showLabel||y)&&h.push(\"computedLabelSize\",\"computedLabelAngle\");let x=uo(this.metaData,h,s),P=gu.wrap(t).asValue();Rr(P),P.length>x&&(P.length=x);let D=this.userData.showLabel&&!y&&!g,M=mu(P);return(this.userData.showLabel||y)&&d.push({segments:[M.points],graphMode:n.graphMode,droppedIndices:M.droppedIndices,color:this.metaData.colorLatexValue||this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,showPoint:y,labelSize:this.metaData.computedLabelSize,labelAngle:this.metaData.computedLabelAngle,labelOrientation:this.userData.labelOrientation,pointSize:this.metaData.computedPointSize,pointOpacity:this.metaData.computedPointOpacity,suppressTextOutline:this.userData.suppressTextOutline,interactiveLabel:!!this.userData.interactiveLabel,editableLabel:o(this.userData),nakedLabel:D,labels:this.computedLabels||[],poi:Bn(P)}),g&&d.push({segments:uv(P),graphMode:5,color:Si(this.userData,this.metaData),style:this.userData.lineStyle,lineWidth:this.metaData.computedLineWidth,lineOpacity:this.metaData.computedLineOpacity,poi:br()}),d}case 5:case 14:{let d=this.userData,y=this.metaData,g=[],h=[\"colorLatexValue\"];u.lines&&h.push(\"computedLineOpacity\",\"computedLineWidth\"),u.fill&&h.push(\"computedFillOpacity\");let x=uo(this.metaData,h,s),P=gu.wrap(t).mapElements((D,M)=>{if(M>=x)return TL();let{listIndex:E,lineWidth:S,lineOpacity:v,color:N}=lo(this,M,s);if(D.getDependencies().length===0){let{points:C,droppedIndices:H}=mu([D.asValue()]);return{segments:[C],graphMode:3,droppedIndices:H,color:Si(d,y),style:d.lineStyle,lineWidth:S,lineOpacity:v,poi:Bn(C)}}else{let C=D.getCompiledFunction(),H=this.getGraphInfo(e,D);return H.graphMode=n.graphMode,H.domain={min:this.metaData.evaluatedDomainMin,max:this.metaData.evaluatedDomainMax},H.style=this.userData.lineStyle,H.lineWidth=S,H.lineOpacity=v,H.color=N,H.listIndex=E,ao({viewState:r,graphInfo:H,compiled:C})}});if(u.fill)if(P.forEach((D,M)=>{if(M>=x)return;let{color:E,fillOpacity:S,listIndex:v}=lo(this,M,s);g.push({segments:D.segments,color:E,fillOpacity:S,listIndex:v,graphMode:7,poi:br()})}),u.lines)P=P.concat(g);else return g;return P}case 1:case 2:case 8:case 6:case 13:case 20:case 21:case 18:case 19:case 17:case 23:{let d=[],y=t.valueType===I,g=uo(this.metaData,[\"computedLineOpacity\",\"computedLineWidth\",\"colorLatexValue\",\"fillOpacity\"],s);return gu.wrap(t).eachElement((h,x)=>{if(x>=g)return;let P=this.getGraphInfo(e,h);P.graphMode=n.graphMode;let{listIndex:D,style:M,lineWidth:E,lineOpacity:S,fillOpacity:v,color:N}=lo(this,x,s);if(P.listIndex=D,P.style=M,P.lineWidth=E,P.lineOpacity=S,P.fillOpacity=v,P.color=N,n.graphMode===6&&(P.domain={min:this.metaData.evaluatedDomainMin,max:this.metaData.evaluatedDomainMax,isExplicit:this.metaData.isExplicitDomain}),n.graphMode===20){let[[re,ve],Ne]=h.asValue();if(isNaN(re)||isNaN(ve)||isNaN(Ne))return;d.push({segments:[[re,ve,Ne]],resolved:!0,graphMode:P.graphMode,color:P.color,style:P.lineStyle,lineWidth:P.lineWidth,lineOpacity:P.lineOpacity,listIndex:P.listIndex,operator:P.operator,poi:br()});return}else if(n.graphMode===21){let re=Wc(h.asValue());if(!re)return;let ve=[];re.type===\"arc\"?ve.push({graphMode:n.graphMode,segments:[[re.center[0],re.center[1],re.radius,re.startAngle,re.endAngle]],color:P.color,style:P.lineStyle,lineWidth:P.lineWidth,lineOpacity:P.lineOpacity,listIndex:P.listIndex,operator:n.operator,poi:br()}):re.type===\"rays\"?ve.push({graphMode:19,segments:[[re.start1[0],re.start1[1],re.end1[0],re.end1[1]]],color:P.color,style:P.lineStyle,lineWidth:P.lineWidth,lineOpacity:P.lineOpacity,listIndex:P.listIndex,operator:n.operator,poi:br()},{graphMode:19,segments:[[re.start2[0],re.start2[1],re.end2[0],re.end2[1]]],color:P.color,style:P.lineStyle,lineWidth:P.lineWidth,lineOpacity:P.lineOpacity,listIndex:P.listIndex,operator:n.operator,poi:br()}):ve.push({graphMode:17,segments:[[re.start[0],re.start[1],re.end[0],re.end[1]]],color:P.color,style:P.lineStyle,lineWidth:P.lineWidth,lineOpacity:P.lineOpacity,listIndex:P.listIndex,operator:n.operator,poi:br()}),d.push(...ve),d.push(...ov(ve,i));return}else if(n.graphMode===17||n.graphMode===18||n.graphMode===19){let[[re,ve],[Ne,De]]=h.asValue();if(isNaN(re)||isNaN(ve)||isNaN(Ne)||isNaN(De))return;let se={segments:[[re,ve,Ne,De]],resolved:!0,graphMode:P.graphMode,color:n.color,style:n.lineStyle,arrowMode:P.arrowMode,lineWidth:P.lineWidth,lineOpacity:P.lineOpacity,listIndex:P.listIndex,operator:n.operator,poi:br()};if(d.push(se),d.push(...ov([se],i)),this.userData.showLabel&&n.graphMode===17){let bt=P.listIndex,Gt=this.computedLabels&&this.computedLabels[bt||0];d.push({graphMode:22,objectType:17,segments:[[re,ve,Ne,De]],color:n.color,listIndex:bt,showLabel:!0,labelSize:this.metaData.computedLabelSize,labelAngle:this.metaData.computedLabelAngle,labelOrientation:this.userData.labelOrientation,labels:Gt?[Gt]:[IL(Sn(Ne-re,De-ve),r)]})}return}else if(n.graphMode===23){let{value:re,valueType:ve}=h.asTypedValue(),[[Ne,De],se,bt]=re;if(isNaN(Ne)||isNaN(De)||isNaN(se)||isNaN(bt))return;let Gt=P.listIndex,Tn=ve===le,ta=Tn?bt:Math.abs(bt);if(d.push({graphMode:23,segments:[[Ne,De,se,bt,Tn?1:0]],color:P.color,style:P.lineStyle,lineWidth:P.lineWidth,lineOpacity:P.lineOpacity,listIndex:Gt,operator:n.operator,poi:br()}),this.userData.showLabel){let vu=this.computedLabels&&this.computedLabels[Gt||0];d.push({graphMode:22,objectType:23,segments:[[Ne,De,se,bt]],color:N,listIndex:Gt,showLabel:!0,labelSize:this.metaData.computedLabelSize,labelAngle:this.metaData.computedLabelAngle,labelOrientation:this.userData.labelOrientation,labels:vu?[vu]:[vL(ta,r)]})}return}let G=n.graphMode===8||n.graphMode===13?h.getCompiledFunction([\"x\",\"y\"]):h.getCompiledFunction(),C=cs(this),H=C&&C.discrete,te=OL(C,h),je;try{je=h.getCompiledDerivative()}catch(re){}let Me=this.metaData.evaluatedCDFMin,Ke=this.metaData.evaluatedCDFMax;if(Me!==void 0&&Ke!==void 0&&!isNaN(Me)&&!isNaN(Ke)&&y)if(H){let re={viewState:r,graphInfo:P,compiled:G,bounds:[Me,Ke],maxOverride:av(C,h),showPoint:this.userData.shouldGraph},ve=jM(re),Ne=ve.cdfTopBranch,De=ve.topBranches;if(De.forEach(function(se){!se||!te||(se.boundingBox=te)}),De.every(se=>se!==void 0)&&(d=De,Ne&&Ne.segments[0].length)){let se=[];Ne.segments[0].forEach(function(bt){!isNaN(bt[0])&&!isNaN(bt[1])&&se.push([bt[0],0,bt[0],bt[1]])}),d.push({graphMode:5,segments:se,boundingBox:te,poi:br(),color:N})}}else{let ve=ZM({viewState:r,graphInfo:P,compiled:G,derivative:je,bounds:[Me,Ke]}),Ne=ve.cdfTopBranch,De=ve.topBranches;if(De.forEach(function(se){!se||!te||(se.boundingBox=te)}),d=De,Ne&&Ne.segments.length){let se,bt;for(let Gt=0;Gt<Ne.segments.length;Gt++){let Tn=Ne.segments[Gt];if(Tn.length>=4){se=Tn[0];break}}for(let Gt=Ne.segments.length-1;Gt>=0;Gt--){let Tn=Ne.segments[Gt];if(Tn.length>=4){bt=Tn[Tn.length-2];break}}if(se!==void 0&&bt!==void 0&&isFinite(se)&&isFinite(bt)){let Gt=zp(Ne.segments,[[se,0,bt,0]],Ne.graphMode);d.push({graphMode:7,segments:Gt,poi:br(),color:N})}}}else if(H){let re=kp({viewState:r,graphInfo:P,compiled:G,showPoint:this.userData.shouldGraph,maxOverride:av(C,h)});te&&(re.boundingBox=te),d.push(re)}else{let re=this.userData.lines===void 0?!0:this.userData.lines,Ne=ao({viewState:r,graphInfo:P,compiled:G,derivative:je});if(te&&(Ne.boundingBox=te),Ne.fillSegments){let xt=Ne,{fillSegments:De}=xt,se=ib(xt,[\"fillSegments\"]);re||(se.lineWidth=0),d.push(se)}else re||(Ne.lineWidth=0),d.push(Ne);P.graphMode===8&&P.operator!==\"=\"&&d.push({graphMode:7,segments:Ne.fillSegments,poi:br(),listIndex:P.listIndex,color:N,fillOpacity:v})}}),d}case 16:{let d=[],y=this.userData.lines===void 0?!0:this.userData.lines,g=this.userData.fill===void 0?!0:this.userData.fill;if(!g&&!y)return d;let h=uo(this.metaData,[\"computedLineOpacity\",\"computedLineWidth\",\"colorLatexValue\",\"fillOpacity\"],s),x=t.asValue();k(t.valueType)||(x=[x]);for(let P=0;P<x.length;P++){if(P>h-1)continue;let D=x[P];if(!D.length)continue;let M=this.getGraphInfo(e,t),{listIndex:E,lineWidth:S,lineOpacity:v,fillOpacity:N,color:G}=lo(this,P,s);this.userData.isToolPreview||(D=[...D,D[0]]),Rr(D);let C=uv(D);if(C.length&&(g&&d.push({segments:C,graphMode:7,poi:br(),color:G,fillOpacity:N,style:M.style,listIndex:E}),y&&d.push({segments:C,graphMode:5,poi:br(),color:G,style:this.userData.lineStyle,lineWidth:S,lineOpacity:v,listIndex:E}),PL&&this.userData.showLabel)){let H=this.computedLabels&&this.computedLabels[E||0];d.push({graphMode:22,objectType:16,segments:C,color:G,listIndex:E,showLabel:!0,labelSize:this.metaData.computedLabelSize,labelAngle:this.metaData.computedLabelAngle,labelOrientation:this.userData.labelOrientation,labels:H?[H]:[ML(Uy(D),r)]})}}return d}case 7:case 11:case 12:case 10:case 15:case 22:return!1;default:let m=n.graphMode;throw new Error(`Unexpected graphMode: ${m}`)}}function Yp(e,t,r){return{resolved:!0,graphMode:t,segments:r,operator:e.operator,poi:br(),color:e.color,style:\"DASHED\",lineWidth:1,lineOpacity:.5,isIntersectionExtension:!0}}function ov(e,t){var n,i;if(!t)return[];let r=[];for(let s of e)if(s.graphMode===17){let o=t[(n=s.listIndex)!=null?n:0];if(!o)continue;let a=0,u,l=1,c,[p,f,m,d]=s.segments[0];for(let y=0;y<o.length;y++){let[g,h]=o[y],x=Un(g,h,0,p,f,0,m,d,0);x<a&&(a=x,u=y),s.graphMode===17&&x>l&&(l=x,c=y)}u!==void 0&&r.push(Yp(s,17,[[p,f,o[u][0],o[u][1]]])),c!==void 0&&r.push(Yp(s,17,[[m,d,o[c][0],o[c][1]]]))}else if(s.graphMode===21){let o=t[(i=s.listIndex)!=null?i:0];if(!o)continue;let[a,u,l,c,p]=s.segments[0],f=p-c+(p<c?1:-1)*2*Math.PI,m=[];for(let d of o){let[y,g]=d,h=Math.atan2(g-u,y-a),x=Jb(h,c,f);0<x&&x<1&&m.push(x)}if(m.length){m.push(0,1),m.sort();let d=0,y=0;for(let x=0;x<m.length-1;x++){let P=m[x+1]-m[x];(d===void 0||P>d)&&(d=P,y=x)}let g=m[y],h=m[y+1];g>0&&r.push(Yp(s,21,[[a,u,l,c,c+g*f]])),h<1&&r.push(Yp(s,21,[[a,u,l,p,p-(1-h)*f]]))}}return r}function SL(){throw new Error(\"Programming error: this function is not expected to be called\")}function lv(e,t,r,n){let i=[];for(let s=0;s<t.otherVariableSolutionData.length;s++){let o=t.otherVariableSolutionData[s];if(!o)continue;let{coefficients:a,restriction:u}=o,l=a.argNames[0];if(l!==\"x\"&&l!==\"y\")continue;let c=a.getCompiledFunction().fn,p,f;l===\"y\"?(p=1,f=2):(p=2,f=1);let m=void 0,{listIndex:d,style:y,lineWidth:g,lineOpacity:h,color:x}=lo(e,s,m),P=Ko(r,{graphMode:p,domainBound:Tr(),lineWidth:g,operator:\"=\"},SL);if(!P)continue;let D=WM(c,P);for(let M of D){let E=new Yt(u.substituteConstantArguments({[l]:M})),S=e.getGraphInfo(n,E);S=oe(z({},S),{graphMode:f,lineWidth:g});let v=void 0,N=e._graph(n,E,r,S,v,t.branchMultiplier===2?\"solvedEquation\":void 0);if(jn(N))for(let G of N)i.push(oe(z({},G),{listIndex:d,style:y,lineWidth:g,lineOpacity:h,color:x}))}}return i.length>0?i:!1}b.Base.prototype.tryGraph=function(e,t,r,n){try{return this.graph(e,t,r,n)}catch(i){let s=i instanceof b.Error?i.getError():Te().getError();return[HM(s)]}};b.Base.prototype.graph=function(e,t,r,n){let i=this.getGraphInfo(e,t);return this._graph(e,t,r,i,n)};b.BaseComparator.prototype.graph=function(e,t,r){let n=this.getGraphInfo(e,t),i=n.graphMode,s=\"baseComparator\",o=this.userData.lines===void 0?!0:this.userData.lines;if(i===8)return this._graph(e,t,r,n);if(i===10||!(t instanceof b.SolvedEquation))return!1;let a=this.getOperator(),u=[],l=[],c=!0;t._expression.eachElement(function(g){u.push(g.getCompiledFunction());try{l.push(g.getCompiledDerivative())}catch(h){c=!1}}),c||(l=void 0);let p=[],f=[-1,0,0,1],m=uo(this.metaData,[\"computedLineWidth\",\"computedLineOpacity\",\"computedFillOpacity\",\"colorLatexValue\"],s),d=Math.min(u.length,m);for(let g=0;g<d;g++){let h=this.getGraphInfo(e,t._expression.args[g]);h.graphMode=i;let{listIndex:x,style:P,color:D,lineWidth:M,lineOpacity:E,fillOpacity:S}=lo(this,g,s);h.listIndex=x,h.style=P,h.color=D,n.graphMode===6&&(h.domain={min:this.metaData.evaluatedDomainMin,max:this.metaData.evaluatedDomainMax,isExplicit:this.metaData.isExplicitDomain});let v=ao({viewState:r,graphInfo:h,compiled:u[g],derivative:l?l[g]:void 0});v.lineWidth=M,v.lineOpacity=E,v.fillOpacity=S,v.operator=As(Dr[a].inclusive,f[g%4]),o||(v.lineWidth=0),p.push(v)}for(let g=0;g<d;g+=4){let h=zp(p[g+1].segments,p[g+2].segments,i);p.push({graphMode:7,listIndex:p[g].listIndex,segments:h,poi:br(),fillOpacity:p[g].fillOpacity,color:p[g].color})}let y=lv(this,t,r,e);if(y){for(let g of y)g.operator=As(Dr[a].inclusive,0);Array.prototype.push.apply(p,y)}return p};b.DoubleInequality.prototype.graph=function(e,t,r){let n=this.getGraphInfo(e,t);if(n.graphMode===10)return!1;let i=[],s=As(Dr[this._operators[0]].inclusive,0),o=As(Dr[this._operators[1]].inclusive,0),a=this.userData,u=this.metaData,l=a.lines===void 0?!0:a.lines,c=[\"colorLatexValue\",\"computedFillOpacity\"];l&&c.push(\"computedLineWidth\",\"computedLineOpacity\");let p=uo(u,c),f=t._expressions;return Rr(f),gu.eachArgs(f,(m,d)=>{let y=d;if(y>=p)return;m[0].userData=m[1].userData=a,m[0].metaData=m[1].metaData=u;let g=void 0,{color:h,lineWidth:x,lineOpacity:P,fillOpacity:D}=lo(this,y,g),M=this._graph(e,m[0],r,n)[0];M.listIndex=y,M.operator=s,M.color=h,M.lineWidth=x,M.lineOpacity=P,i.push(M);let E=this._graph(e,m[1],r,n)[0];E.listIndex=y,E.operator=o,E.color=h,E.lineWidth=x,E.lineOpacity=P,i.push(E);let S=M.segments,v=E.segments;Rr(S),Rr(v);let N=zp(S,v,M.graphMode);l||(M.lineWidth=0,E.lineWidth=0),i.push({graphMode:7,listIndex:M.listIndex,segments:N,lineOpacity:P,fillOpacity:D,poi:br(),color:h})}),i};b.Regression.prototype.graph=function(e,t,r){let n=this.getGraphInfo(e,t);return this._graph(e,t.model,r,n)};function Zh(e,t){let r=1/0,n=-1/0,i=1/0,s=-1/0;for(let a of t)for(var o=0;o<a.length;o+=2){let u=a[o],l=a[o+1];u<r&&(r=u),u>n&&(n=u),l<i&&(i=l),l>s&&(s=l)}if(isFinite(r)&&isFinite(i))return{type:e,xmin:r,ymin:i,xmax:n,ymax:s}}function OL(e,t){if(!e||!(t instanceof Yt))return;let r=t._chunk,n=r.getInstruction(r.getReturnIndex());if(n.type!==37)return;let i=e.discrete?\"discreteDistribution\":\"continuousDistribution\";if(e.symbol===\"binomialdist\"&&n.symbol===\"binompdf\"){let s=ht(r,n.args[1]),o=ht(r,n.args[2]),a=Uc(o*s,s,o);return{type:i,xmin:0,xmax:s,ymin:0,ymax:a}}if(e.symbol===\"poissondist\"&&n.symbol===\"poissonpdf\"){let s=ht(r,n.args[1]),o=Math.max(Ao(Math.floor(s),s),Ao(Math.ceil(s),s));return{type:i,xmin:0,xmax:2.5*s,ymin:0,ymax:o}}if(e.symbol===\"normaldist\"&&n.symbol===\"normalpdf\"){let s=ht(r,n.args[1]),o=ht(r,n.args[2]),a=Ay(s,s,o);return{type:i,xmin:s-2*Math.abs(o),xmax:s+2*Math.abs(o),ymin:0,ymax:a}}if(e.symbol===\"uniformdist\"&&n.symbol===\"uniformpdf\"){let s=ht(r,n.args[1]),o=ht(r,n.args[2]),a=(s+o)/2,u=o-s,l=Fy(a,s,o);return{type:i,xmin:s-u/3,xmax:o+u/3,ymin:0,ymax:l}}if(e.symbol===\"tdist\"&&n.symbol===\"tpdf\"){let s=ht(r,n.args[1]),o=zc(0,s);return{type:i,xmin:-3,xmax:3,ymin:0,ymax:o}}}function av(e,t){if(e===void 0||e.symbol!==\"binomialdist\"||!(t instanceof Yt))return;let r=t._chunk,n=r.getInstruction(r.getReturnIndex());if(n.type===37&&n.symbol===\"binompdf\")return ht(r,n.args[1])}function cv(e,t,r){let n={};r-=.5*t;for(var i=e.length-1;i>=0;i--){let s=e[i],o=Math.floor((s-r)/t);n[o]?n[o].data.push(s):n[o]={id:o,data:[s],min:o*t+r,max:o*t+r+t,center:o*t+r+t/2}}return n}var NL=function(e){let t=[];return gu.wrap(e).eachElement(function(r){t.push(r.args.map(n=>n.asValue()))}),t};b.Object3D.prototype.graph=function(e,t,r){let n=this.getGraphInfo(e,t);return[{segments:[NL(t)],color:n.color,objectName:this._symbol,graphMode:12}]};b.Histogram.prototype.graph=function(e,t,r){let n=this.getGraphInfo(e,t),i=t.args[0].asValue(),s=t.args[1].asValue(),o=this.userData.vizProps&&this.userData.vizProps.binAlignment===\"left\"?s/2:0;Rr(i);let a=cv(i,s,o),u=1;this.userData.vizProps&&this.userData.vizProps.histogramMode===\"density\"?u=1/(i.length*s):this.userData.vizProps&&this.userData.vizProps.histogramMode===\"relative\"&&(u=1/i.length);let l=[],c=[];for(let f in a){let m=a[f],d=m.data.length;c.push([m.min,0*u,m.min,d*u,m.max,d*u,m.max,0*u]);let y=0;a[m.id+1]&&(y=a[m.id+1].data.length);let g=[m.min,0*u,m.min,d*u,m.max,d*u];y<d&&g.push(m.max,y*u),l.push(g)}let p=Zh(\"histogram\",c);return p&&s&&(p.binWidth=s),[{segments:c,graphMode:7,boundingBox:p,poi:br(),color:n.color,fillOpacity:.4},{segments:l,graphMode:2,poi:{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}},color:n.color}]};b.DotPlot.prototype.graph=function(e,t,r){let n=this.getGraphInfo(e,t),i=t.args[1].asValue(),s=this.userData.vizProps&&this.userData.vizProps.binAlignment===\"left\"?i/2:0,o=t.args[0].asValue();Rr(o);let a=cv(o,i,s),u=!1,l,c=[];for(let h in a){let x=a[h];for(var p=x.data.length-1;p>=0;p--)x.center!==x.data[p]&&(u=!0)}if(this.userData.vizProps&&this.userData.vizProps.dotplotXMode===\"exact\")for(let h in a){l=a[h].data,l.reverse();for(let P=0;P<l.length;P++)c.push([l[P],P+1])}else for(let h in a){let x=a[h];l=x.data;for(let P=0;P<l.length;P++)c.push([x.center,P+1])}let f=Zh(\"dotplot\",c);f&&i&&(f.ymin=0,f.xmin-=.5*i,f.xmax+=.5*i,f.binWidth=i);let{computedPointOpacity:m,computedPointSize:d}=this.metaData,y=ea(m,0),g=this.userData.pointSize?ea(d,0):14;return[{segments:[c],graphMode:3,boundingBox:f,poi:Bn(c),color:n.color,style:this.userData.pointStyle,pointSize:g,pointOpacity:y,showPoint:!0,needsDotplotXMode:u}]};b.BoxPlot.prototype.graph=function(e,t,r){let n=this.getGraphInfo(e,t),i=this.metaData.evaluatedAxisOffset,s=this.metaData.evaluatedBreadth,o=t.args[0].asValue();if(Rr(o),isNaN(s)||isNaN(i))return!1;let a=Math.min.apply(null,o),u=Math.max.apply(null,o),l=Js(o,1),c=Js(o,2),p=Js(o,3),f=i,m=f-s/2,d=f+s/2,y=s/10,g=[];if(this.userData.vizProps.showBoxplotOutliers){let D=p-l,M=l-1.5*D,E=p+1.5*D;a=1/0,u=-1/0,o.forEach(function(S){M<=S&&S<a&&(a=S),u<S&&S<=E&&(u=S),(S<M||S>E)&&g.push([S,f])})}let h=[[l,m,p,m,p,d,l,d,l,m],[c,m,c,d],[l,f,a,f],[p,f,u,f],[a,f-y,a,f+y],[u,f-y,u,f+y]];if(this.userData.vizProps&&this.userData.vizProps.alignedAxis===\"y\"){for(let D of h)for(var x=0;x<D.length;x+=2){let M=D[x];D[x]=D[x+1],D[x+1]=M}for(let D of g){let M=D[0];D[0]=D[1],D[1]=M}}let P=[{segments:h,graphMode:5,boundingBox:Zh(\"boxplot\",h.concat(g)),poi:br(),color:n.color}];return g.length&&P.push({segments:[g],graphMode:3,color:n.color,style:\"OPEN\",showPoint:!0,poi:Bn(g)}),P};function DL(e){return Array.prototype.concat.apply([],e)}b.Table.prototype.isValueDraggable=function(e,t,r){if(!e.columns[t].isIndependent)return!1;let i=this.columns[t].values,s=i&&i[r];return!!(s&&isFinite(s.asValue())&&s.getDependencies().length===0)};b.Table.prototype.graph=function(e,t,r){let n={};if(t.columns[0].isError)return n;let s=t.columns[0].values;for(let o=1;o<this.columns.length;o++){let a=t.columns[o];if(a.isError)continue;let u=this.columns[o].header.userData,l=this.columns[o].header.metaData;if(u.hidden)continue;let c=uo(l,[\"colorLatexValue\",\"computedPointSize\",\"computedPointOpacity\"]),p=u.dragMode,f=p===\"X\"||p===\"XY\",m=p===\"Y\"||p===\"XY\",d=!!u.points,y=!!u.lines,g=[],h=[],x=[],P=[],D=[],M=[],E=1/0,S=-1/0,v=1/0,N=-1/0,G={};for(let H=0;H<s.length;H++){let te=s[H],je=a.values[H];if(!te||!je||!isFinite(te.asValue())||!isFinite(je.asValue())){G[H]=!0,y&&(M.length>1&&D.push(M),M=[]);continue}let Me=te.asValue(),Ke=je.asValue();if(d){if(H>=c)continue;let xt=f&&this.isValueDraggable(t,0,H),re=m&&this.isValueDraggable(t,o,H);xt||re?(x.push([Me,Ke]),P.push({index:H,dragX:xt,dragY:re})):h.push([Me,Ke])}y&&M.push([Me,Ke]),Me<E&&(E=Me),Me>S&&(S=Me),Ke<v&&(v=Ke),Ke>N&&(N=Ke)}let C={type:\"table\",xmin:E,xmax:S,ymin:v,ymax:N};x.length&&g.push({graphMode:4,segments:[x],color:l.colorLatexValue||u.color,tableId:u.tableId,poi:Bn(x),movablePointInfo:P,boundingBox:C,pointOpacity:l.computedPointOpacity}),h.length&&g.push({segments:[h],droppedIndices:G,graphMode:3,showPoint:!0,poi:Bn(h),color:l.colorLatexValue||u.color,pointSize:l.computedPointSize,pointOpacity:l.computedPointOpacity,style:u.pointStyle,tableId:u.tableId,boundingBox:C}),(D.length||M.length)&&(D.push(M),g.push({segments:D.map(DL),graphMode:5,poi:br(),color:Si(u,l),style:u.lineStyle,lineWidth:Array.isArray(l.computedLineWidth)?l.computedLineWidth[0]:l.computedLineWidth,lineOpacity:Array.isArray(l.computedLineOpacity)?l.computedLineOpacity[0]:l.computedLineOpacity,tableId:u.tableId,boundingBox:C})),g.length&&(n[u.id]=g)}return n};function RL(e,t,r){return e?t===0&&r===0?e[2].type!==\"none\"||e[3].type!==\"none\":t!==0&&r!==0?e[0].type!==\"none\"&&e[1].type!==\"none\":t!==0?e[0].type!==\"none\":r!==0?e[1].type!==\"none\":!1:!1}b.Image.prototype.graph=function(e,t,r){let n=[];if(t.center.valueType!==w||t.center.getDependencies().length!==0||!t.radianAngle.isConstant||!t.width.isConstant||!t.height.isConstant||!t.opacity.isConstant)return n;let i=[],s=[],o=t.width.asValue()/2,a=t.height.asValue()/2,u=t.radianAngle.asValue();for(var l=-1;l<=1;l++)for(var c=-1;c<=1;c++){let[p,f]=t.center.asValue(),m=[p+l*o*Math.cos(u)+c*a*Math.sin(u),f-l*o*Math.sin(u)+c*a*Math.cos(u)];RL(t.moveStrategy,l,c)&&(i.push(m),s.push([l,c]))}return n.push({segments:[i],scaleFactors:[s],graphMode:4,color:Si(this.userData,this.metaData),style:this.userData.style,poi:Bn(i),movablePointInfo:[],pointOpacity:1}),n};function uv(e){let t=[],r=[];for(let[n,i]of e)!isNaN(n)&&!isNaN(i)?t.push(n,i):(t.length>=4&&r.push(t),t=[]);return t.length>=4&&r.push(t),r}b.List.prototype.elementAt=function(e){return e=Math.floor(e),e>=0&&e<this.args.length?this.args[e]:new b.Constant(NaN)};b.List.prototype.eachElement=function(t){for(var r=0;r<this.length;r++)t(this.elementAt(r),r)};b.List.prototype.mapElements=function(t){for(var r=[],n=0;n<this.length;n++)r.push(t(this.elementAt(n),n));return r};b.IRExpression.prototype.elementAt=function(e){var t=this._chunk.elementAt(e);return new Yt(t)};b.ParenSeq.prototype.elementAt=function(e){return e<0||e>this.args.length-1?new b.Constant(NaN):this.args[e]};function wL(){return dr(this._symbol)+\" \"}b.Identifier.prototype.printLatex=wL;b.Constant.prototype.printLatex=function(){return no(this.asValue())};b.Ticker.prototype.printLatex=function(){return\"\\\\ticker\\\\left(\"+this.args.map(Sr).join(\", \")+\"\\\\right)\"};b.Negative.prototype.printLatex=function(){return\"-\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\"};b.Add.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)+\\\\left(\"+this.args[1].printLatex()+\"\\\\right)\"};b.PercentOf.prototype.printLatex=function(){return this.args[0].printLatex()+\" \\\\% \\\\operatorname{of} \"+this.args[1].printLatex()};b.Subtract.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)-\\\\left(\"+this.args[1].printLatex()+\"\\\\right)\"};b.Multiply.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)*\\\\left(\"+this.args[1].printLatex()+\"\\\\right)\"};b.Divide.prototype.printLatex=function(){return\"\\\\frac{\"+this.args[0].printLatex()+\"}{\"+this.args[1].printLatex()+\"}\"};b.Exponent.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)^{\"+this.args[1].printLatex()+\"}\"};b.Assignment.prototype.printLatex=function(){return dr(this._symbol)+\"=\"+this._expression.printLatex()};b.Equation.prototype.printLatex=function(){return this._lhs.printLatex()+\"=\"+this._rhs.printLatex()};function hu(e){switch(e){case\">\":return\">\";case\"<\":return\"<\";case\">=\":return\"\\\\ge \";case\"<=\":return\"\\\\le \";case\"=\":return\"=\"}return\"\"}b.BaseComparator.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\"+hu(this.operator)+\"\\\\left(\"+this.args[1].printLatex()+\"\\\\right)\"};b.DoubleInequality.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\"+hu(this.args[1])+this.args[2].printLatex()+hu(this.args[3])+\"\\\\left(\"+this.args[4].printLatex()+\"\\\\right)\"};b.And.prototype.printLatex=function(){if(!(this.args[0]instanceof b.BaseComparator)||!(this.args[1]instanceof b.BaseComparator))throw new Error(\"Not implemented\");if(this.args[0].args[1].printLatex()!==this.args[1].args[0].printLatex())throw new Error(\"Not implemented\");return\"\\\\left(\"+this.args[0].args[0].printLatex()+\"\\\\right)\"+hu(this.args[0].operator)+\"\\\\left(\"+this.args[0].args[1].printLatex()+\"\\\\right)\"+hu(this.args[1].operator)+\"\\\\left(\"+this.args[1].args[1].printLatex()+\"\\\\right)\"};function Sr(e){return e.printLatex()}function LL(){switch(this._symbol){case\"sqrt\":return\"\\\\sqrt{\"+this.args[0].printLatex()+\"}\";case\"nthroot\":return\"\\\\sqrt[\"+this.args[1].printLatex()+\"]{\"+this.args[0].printLatex()+\"}\";case\"logbase\":return\"\\\\log_{\"+this.args[1].printLatex()+\"}\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\";default:return dr(this._symbol)+\"\\\\left(\"+this.args.map(Sr).join(\", \")+\"\\\\right)\"}}b.FunctionCall.prototype.printLatex=LL;b.SeededFunctionCall.prototype.printLatex=function(){return dr(this._symbol)+\"\\\\left(\"+this.args.slice(1).map(Sr).join(\", \")+\"\\\\right)\"};b.DotAccess.prototype.printLatex=function(){return\"(\"+this.args[0].printLatex()+\").(\"+this.args[1].printLatex()+\")\"};b.Prime.prototype.printLatex=function(){switch(this.args[0]._symbol){case\"logbase\":return\"\\\\log_{\"+this.args[0].args[1].printLatex()+\"}\"+Array(this.order+1).join(\"'\")+\"\\\\left(\"+this.args[0].args[0].printLatex()+\"\\\\right)\";default:return dr(this.args[0]._symbol)+Array(this.order+1).join(\"'\")+\"\\\\left(\"+this.args[0].args.map(Sr).join(\", \")+\"\\\\right)\"}};b.List.prototype.printLatex=function(){return\"\\\\left[\"+this.args.map(Sr).join(\", \")+\"\\\\right]\"};b.Range.prototype.printLatex=function(){return\"\\\\left[\"+this.args[0].args.map(Sr).join(\", \")+\" ... \"+this.args[1].args.map(Sr).join(\", \")+\"\\\\right]\"};b.UpdateRule.prototype.printLatex=function(){return this.args[0].printLatex()+\"\\\\to(\"+this.args[1].printLatex()+\")\"};b.ListAccess.prototype.printLatex=function(){return\"\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\\\\left[\"+this.args[1].printLatex()+\"\\\\right]\"};b.ParenSeq.prototype.printLatex=function(){return\"\\\\left(\"+this.args.map(Sr).join(\", \")+\"\\\\right)\"};b.BareSeq.prototype.printLatex=function(){return this.args.map(Sr).join(\", \")};b.Sum.prototype.printLatex=function(){return\"\\\\sum_{\"+this.args[0].printLatex()+\"=\"+this.args[1].printLatex()+\"}^{\"+this.args[2].printLatex()+\"}\\\\left(\"+this.args[3].printLatex()+\"\\\\right)\"};b.Product.prototype.printLatex=function(){return\"\\\\prod_{\"+this.args[0].printLatex()+\"=\"+this.args[1].printLatex()+\"}^{\"+this.args[2].printLatex()+\"}\\\\left(\"+this.args[3].printLatex()+\"\\\\right)\"};b.Integral.prototype.printLatex=function(){return\"\\\\int_{\"+this.args[1].printLatex()+\"}^{\"+this.args[2].printLatex()+\"}\\\\left(\"+this.args[3].printLatex()+\"\\\\right)d\"+this.args[0].printLatex()};b.FunctionExponent.prototype.printLatex=function(){return this.args[0].printLatex()+\"\\\\left(\"+this.args[1].printLatex()+\"\\\\right)^{\"+this.args[2].printLatex()+\"}\"};b.FunctionFactorial.prototype.printLatex=function(){return this.args[0].printLatex()+\"\\\\left(\"+this.args[1].printLatex()+\"\\\\right)!\"};function pv(e){return e.isConstant&&e.asValue()===!0}function AL(e){return e.isConstant&&e.isNaN()}b.Piecewise.prototype.printLatex=function(){var e=this;if(pv(e.args[0]))return e.args[1].printLatex();for(var t=[\"\\\\left\\\\{\"];;){if(pv(e.args[0])){t.push(e.args[1].printLatex());break}if(t.push(e.args[0].printLatex(),\": \"),AL(e.args[2])){t.push(e.args[1].printLatex());break}if(t.push(e.args[1].printLatex(),\", \"),!(e.args[2]instanceof b.Piecewise)){t.push(e.args[2].printLatex());break}e=e.args[2]}return t.push(\"\\\\right\\\\}\"),t.join(\"\")};b.FunctionDefinition.prototype.printLatex=function(){return dr(this._symbol)+\"\\\\left(\"+this._argSymbols.map(dr).join(\", \")+\"\\\\right) = \"+this._expression.printLatex()};b.Derivative.prototype.printLatex=function(){return\"\\\\frac{d}{d\"+dr(this._symbol)+\"}\\\\left(\"+this.args[0].printLatex()+\"\\\\right)\"};b.Regression.prototype.printLatex=function(){return\"\\\\left(\"+this._lhs.printLatex()+\"\\\\right)\\\\sim\\\\left(\"+this._rhs.printLatex()+\"\\\\right)\"};b.Histogram.prototype.printLatex=function(){return\"\\\\histogram\\\\left(\"+this.args.map(Sr).join(\", \")+\"\\\\right)\"};b.Object3D.prototype.printLatex=function(){return\"\\\\\"+this._symbol+\"\\\\left(\"+this.args.map(Sr).join(\", \")+\"\\\\right)\"};b.DotPlot.prototype.printLatex=function(){return\"\\\\dotplot\\\\left(\"+this.args.map(Sr).join(\", \")+\"\\\\right)\"};b.BoxPlot.prototype.printLatex=function(){return\"\\\\boxplot\\\\left(\"+this.args.map(Sr).join(\", \")+\"\\\\right)\"};b.TTest.prototype.printLatex=function(){return\"\\\\TTest\\\\left(\"+this.args.map(Sr).join(\", \")+\"\\\\right)\"};b.IndependentTTest.prototype.printLatex=function(){return\"\\\\IndependentTTest\\\\left(\"+this.args.map(Sr).join(\", \")+\"\\\\right)\"};b.Stats.prototype.printLatex=function(){return\"\\\\Stats\\\\left(\"+this.args.map(Sr).join(\", \")+\"\\\\right)\"};b.AssignmentExpression.prototype.printLatex=function(){return dr(this._symbol)+\"=\"+this.args[1].printLatex()};b.ListComprehension.prototype.printLatex=function(){return\"\\\\left[\"+this._body.printLatex()+\"\\\\operatorname{for}\"+this._inputLists.map(Sr).join(\", \")+\"\\\\right]\"};b.Substitution.prototype.printLatex=function(){return\"\\\\left(\\\\left(\"+this._body.printLatex()+\"\\\\right)\\\\operatorname{with}\"+this._assignments.map(Sr).join(\", \")+\"\\\\right)\"};b.Construction.prototype.printLatex=function(){return\"\\\\construction \"};b.Base.prototype.getExpressionType=function(e,t){return e===1||e===2?\"X_OR_Y\":e===3||e===4?t===w?\"SINGLE_POINT\":\"POINT_LIST\":e===5?\"PARAMETRIC\":e===14?\"PARAMETRIC\":e===6?\"POLAR\":e===8?\"IMPLICIT\":pe(t,ye)?\"POLYGON\":\"X_OR_Y\"};b.Histogram.prototype.getExpressionType=function(e,t){return\"HISTOGRAM\"};b.Object3D.prototype.getExpressionType=function(e,t){return\"CUBE\"};b.DotPlot.prototype.getExpressionType=function(e,t){return\"DOTPLOT\"};b.BoxPlot.prototype.getExpressionType=function(e,t){return\"BOXPLOT\"};function Qh(e,t,r){let n=[],i={},s={},o={},a={},u={},l={},c={},p=0,f=[],m=[];if(!r){r=[];for(let h in t)t.hasOwnProperty(h)&&r.push(h)}for(let h in t){if(!t.hasOwnProperty(h))continue;let x=t[h].exportPenalty||0;for(;n.length<x+1;)n.push([]);n[x].push(h)}for(let h of n){let x={};for(let P of h){let D=t[P],M=t[P].exportPenalty||0,E=D.isTable,S=D.getLegalExports(e);for(let v of S)fe[v]||i[v]||(E&&(u[v]=!0),M===0&&(a[v]=!0),x[v]=x[v]||[],x[v].push(P),x[v].length>1&&(!s[v]&&E&&(o[v]=!0),s[v]=!0))}for(let P in x)o[P]||(i[P]=x[P])}for(let h of r)c.hasOwnProperty(h)||d(h);function d(h){c[h]=c[h]||{};let x=c[h],P;x.id=h,x.index=p,x.lowlink=p,f.push(x),x.instack=!0,p++;let D=t[h].getDependencies();for(let M of D){if(!i.hasOwnProperty(M))continue;let E=i[M];for(let S of E)c.hasOwnProperty(S)?(P=c[S],P.instack&&(x.lowlink=Math.min(x.lowlink,P.index))):(d(S),P=c[S],x.lowlink=Math.min(x.lowlink,P.lowlink))}if(x.lowlink===x.index)if(P=f.pop(),P.instack=!1,P===x)y(x);else{let M=[P];for(;P=f.pop(),P.instack=!1,M.push(P),P!==x;);g(M)}}function y(h){m.push(h.id)}function g(h){let x=[];for(let P=h.length-1;P>=0;P--){let D=h[P],M=t[D.id].getLegalExports(e);Array.prototype.push.apply(x,M),x.push(M[0]),m.push(D.id)}x=Is(x),x.sort();for(let P of x)l[P]=x}return{resolved:m,globallyDefined:a,tableDefined:u,multiplyDefined:s,multiplyDefinedByTables:o,cyclicallyDefined:l}}var bu=class{constructor({enableGeometry:t,scales:r}){this._isGeometry=!1;this._isGeometry=t,this._scales=r}isGeometryEnabled(){return this._isGeometry}areAllScalesLinear(){return this._scales?this._scales.xAxisScale===\"linear\"&&this._scales.yAxisScale===\"linear\":!0}dimensions(){return 2}assignmentForbidden(t){return t===\"x\"||t===\"y\"||t===\"theta\"||this.substitutionForbidden(t)}substitutionForbidden(t){return t===\"index\"||t===\"dt\"||t.slice(0,3)===\"tmp\"||fe.hasOwnProperty(t)}isValidSlider(t){return t===\"x\"||t===\"y\"?!0:!(t.slice(0,3)===\"ans\"||t.slice(0,6)===\"idref_\"||this.assignmentForbidden(t))}sliderVariables(t){return t.indexOf(\"theta\")!==-1&&(t=t.filter(function(r){return r!==\"r\"})),t.filter(r=>!(this.assignmentForbidden(r)||r.slice(0,3)===\"ans\"||r.slice(0,6)===\"idref_\"||r[0]===\"_\"))}graphingEnabled(){return!0}ansEnabled(){return!1}dimensionVarsEnabled(){return!0}validRegressionParameter(t){return t!==\"x\"&&t!==\"y\"}validLHS(t){return t!==\"theta\"&&t.slice(0,6)!==\"idref_\"}unplottablePolarFunction(t,r){return t!==\"theta\"?!1:r.indexOf(\"r\")!==-1}validDoubleInequalitySymbol(t){return t===\"x\"||t===\"y\"}validDoubleInequalityVariables(t){return t.length>2?!1:t.every(this.validDoubleInequalitySymbol)}validExpressionVariables(t){return t.length===1&&t[0]===\"x\"}validSolvedVariable(t){return t===\"x\"||t===\"y\"||t===\"r\"}validImplicitVariables(t){switch(t.length){case 0:return!0;case 1:return t[0]===\"x\"||t[0]===\"y\"||t[0]===\"r\";case 2:return t[0]===\"x\"&&t[1]===\"y\"||t[0]===\"y\"&&t[1]===\"x\"||t[0]===\"r\"&&t[1]===\"theta\"||t[0]===\"theta\"&&t[1]===\"r\";default:return!1}}graphableListVariables(t,r){return t===\"x\"||t===\"y\"||t===\"r\"||r===\"x\"||r===\"y\"}validParametricVariable(t){return t===\"t\"}validParametricVariables(t){return t.length===1&&this.validParametricVariable(t[0])}validInequalityVariables(t){switch(t.length){case 1:return t[0]===\"x\"||t[0]===\"y\"||t[0]===\"r\";case 2:return this.validImplicitVariables(t);default:return!1}}validFirstColumnVariable(t){return t!==\"y\"&&t!==\"r\"&&t!==\"theta\"&&!t.match(/y_(\\d+)/)}validActionVariable(t){return t===\"dt\"||t===\"index\"}complicatedPolarImplicit(t,r){return t===\"theta\"||t===\"r\"&&r!==1}constantGraphMode(t){return t===\"x\"?1:t===\"r\"?6:2}graphMode(t,r){let n=r[0];return n===\"y\"?1:t===\"x\"?1:t===\"r\"&&n===\"theta\"?6:2}tableableAsConstant(t){return!(t===\"x\"||t===\"r\"||t===\"theta\")}implicitIndependent(t){return\"x\"}implicitDependency(t){return t.length!==1?\"y\":t[0]===\"y\"?\"x\":t[0]===\"theta\"?\"r\":\"y\"}graphableAsConstant(t){return t===\"y\"||t===\"x\"||t===\"r\"}disabledFeatures(){return[]}},Xp=class{isGeometryEnabled(){return!1}areAllScalesLinear(){return!0}dimensions(){return 3}assignmentForbidden(t){return t===\"x\"||t===\"y\"||t===\"z\"||this.substitutionForbidden(t)}substitutionForbidden(t){return t.slice(0,3)===\"tmp\"||fe.hasOwnProperty(t)}isValidSlider(t){return t===\"x\"||t===\"y\"||t===\"z\"?!0:!(t.slice(0,3)===\"ans\"||this.assignmentForbidden(t))}sliderVariables(t){return t.filter(r=>!(this.assignmentForbidden(r)||r.slice(0,3)===\"ans\"))}graphingEnabled(){return!0}ansEnabled(){return!1}dimensionVarsEnabled(){return!0}validRegressionParameter(t){return!1}validLHS(t){return!0}unplottablePolarFunction(t,r){return!1}validDoubleInequalitySymbol(t){return!1}validDoubleInequalityVariables(t){return!1}validExpressionVariables(t){let r=t.join(\"\");return r===\"x\"||r===\"y\"||r===\"xy\"||r===\"yx\"}validSolvedVariable(t){return t===\"x\"||t===\"y\"||t===\"z\"}validImplicitVariables(t){return!1}graphableListVariables(t,r){return t===\"x\"||t===\"y\"||r===\"x\"||r===\"y\"}validParametricVariable(t){return t===\"t\"}validParametricVariables(t){return t.length===1&&this.validParametricVariable(t[0])}validInequalityVariables(t){return!1}validFirstColumnVariable(t){return!1}validActionVariable(t){return t===\"dt\"||t===\"index\"}complicatedPolarImplicit(t,r){return!1}constantGraphMode(t){return 13}graphMode(t,r){return t===\"z\"&&this.validExpressionVariables(r)?13:10}tableableAsConstant(t){return!(t===\"x\"||t===\"r\")}implicitIndependent(t){return\"x\"}implicitDependency(t){if(t.length!==2)return\"z\";let r=t[0]<t[1]?t[0]+t[1]:t[1]+t[0];return r===\"xy\"?\"z\":r===\"xz\"?\"y\":r===\"yz\"?\"x\":\"z\"}graphableAsConstant(t){return t===\"z\"}disabledFeatures(){return[]}};var CL=100;function Jp(e){for(var t=[],r=0;r<e;r++)t[r]={x:[],y:[],intersects:[]};return t}function _L(e,t,r,n){return r===1&&n===1||r===2&&n===2?function(i){return t(i)-e(i)}:r===1&&n===2||r===2&&n===1?function(i){return i-t(e(i))}:!1}function dv(e,t){t instanceof b.SolvedEquation?t=t._expression:t instanceof b.OptimizedRegression&&(t=t.model);var r=[],n=[];return t instanceof b.DoubleInequality?b.List.eachArgs(t._expressions,function(i){r.push(i[0].getCompiledFunction()),n.push(i[0].isConstant&&i[1].isNaN()),r.push(i[1].getCompiledFunction()),n.push(i[1].isConstant&&i[1].isNaN())}):b.List.wrap(t).eachElement(function(i){r.push(i.getCompiledFunction()),n.push(i.isConstant&&i.isNaN())}),{functions:r,skipIntersecting:n}}function FL(e,t){var r=[];for(var n in e)if(e.hasOwnProperty(n)&&String(n)!==String(t)&&e[n].shouldIntersect()){var i=e[n],s=dv(i.policy,i.concreteTree);r.push({id:n,graphMode:i.getGraphMode(),functions:s.functions,skipIntersecting:s.skipIntersecting})}return r}function BL(e,t){e.intersects=Array(e.x.length);for(var r=0;r<e.x.length;r++)e.intersects[r]=t}function VL(e,t){if(t===1){var r=e.y;e.y=e.x,e.x=r}}function GL(e,t){Array.prototype.push.apply(e.x,t.x),Array.prototype.push.apply(e.y,t.y),e.intersects&&t.intersects&&Array.prototype.push.apply(e.intersects,t.intersects)}function qL(e,t,r){var n=$h(e,t),i=n.poi.zeros,s=n.poi.extrema,o=[],a=0,u=0;for(a=0;a<i.x.length;a++){for(;u<s.x.length&&s.x[u]<i.x[a];u++)Nr(s.y[u],0)&&o.push(s.x[u]);o.push(i.x[a])}for(;u<s.x.length;u++)Nr(s.y[u],0)&&o.push(s.x[u]);return{x:o,y:o.map(r)}}function mv(e,t,r){var n=e[r],i=n.getGraphInfo(),s=n.getGraphMode(),o,a,u;try{o=dv(n.policy,n.concreteTree),a=Jp(o.functions.length),u=FL(e,r)}catch(P){return Jp(0)}if(!u)return a;for(var l=0,c=0;c<u.length;c++)for(var p=u[c],f=0;f<o.functions.length;f++)if(!o.skipIntersecting[f]){for(var m=o.functions[f].fn,d=Ko(t,i,m),y=0;y<p.functions.length;y++)if(!u[c].skipIntersecting[y]){var g=p.functions[y].fn,h=_L(m,g,s,p.graphMode);if(h){var x;try{x=qL(h,d,m)}catch(P){return Jp(0)}if(l+=x.x.length,l>CL)return Jp(o.functions.length);BL(x,p.id),VL(x,s),GL(a[f],x)}}}return a}function kL(e){if(e.length<2)return\"text\";let t=e.split(\"`\").length-1;return t<2?\"text\":t===2&&e[0]===\"`\"&&e[e.length-1]===\"`\"?\"latex\":\"mixed\"}function zL(e){if(e.length===0)return[\"\"];let t=[],r=e.split(/(`)/),n=!1,i=\"\";for(let s=0;s<r.length;s++){let o=r[s];o.length&&(o===\"`\"?(i+=\"`\",n=!n,n||(t.push(i),i=\"\")):(i+=o,n||(t.push(i),i=\"\")))}return i.length&&t.push(i),t}function Kh(e){return zL(e).map(UL)}function UL(e){let r=\"\\\\$({\"+[\"[a-zA-Z][0-9]*\",\"[a-zA-Z]_[a-zA-Z0-9]+\",\"[a-zA-Z]_\\\\{[a-zA-Z0-9]+\\\\}\",\"\\\\\\\\[a-zA-Z]+\",\"\\\\\\\\[a-zA-Z]+_{[a-zA-Z0-9]+}\",\"\\\\\\\\[a-zA-Z]+_[a-zA-Z0-9]+\"].join(\"})|\\\\$({\")+\"})\",n=new RegExp(r,\"g\"),i=[],s=0,o=0,a;for(;a=n.exec(e);){o=a.index,o>s&&i.push(e.substr(s,o-s));let u=a[0],l=u.replace(/[{}\\$]/g,\"\").replace(/^([a-zA-Z])([0-9]+)$/,\"$1_$2\");i.push({symbol:l,str:u}),s=a.index+u.length}return s<e.length&&i.push(e.substr(s)),{raw:e,parts:i}}function yv(e,t){return t?\"{\"+Ff(e,{bigCutoff:1e7,digits:8})+\"}\":_f(e,{bigCutoff:1e7,digits:8})}function eb(e,t,r){return e.map(n=>HL(n,t,r)).join(\"\")}function HL(e,t,r){let n=[],i=kL(e.raw)===\"latex\";for(let s of e.parts)if(typeof s==\"string\")n.push(s);else{let o=new b.Identifier(s.symbol).tryGetConcreteTree(ep,t);if(o.valueType===I&&o.getDependencies().length===0){let a=o.asValue();if(typeof a==\"number\"){n.push(yv(a,i));continue}}else if(o.valueType===Y&&r<o.length&&o.getDependencies().length===0){let a=o.elementAt(r).asValue();if(typeof a==\"number\"){n.push(yv(a,i));continue}}i?n.push(\"{?}\"):n.push(\"?\")}return n.join(\"\")}function gv(){let e={},t={},r={},n=[],i=this.statements[Vn];for(let s in this.statements){if(!this.statements.hasOwnProperty(s))continue;let o=this.statements[s];switch(o.type){case\"Error\":break;case\"Regression\":{r[s]=[],n.push(s);break}case\"Construction\":break;default:{let a=o.getLegalExports(this.policy);if(a){for(let l of a)o.exportPenalty!==void 0&&o.exportPenalty>0?t[l]=s:e[l]=s;let u=[];for(let l of o.getDependencies())l===\"construction\"&&i?u.push(...i.getDependencies()):u.push(l);r[s]=Au(u,o.getDummyDependencies(),a)}break}}}for(let s of n){let o=this.statements[s],a=li(o.userData.residualVariable);a&&(t[a]=s);let u=o.getDependencies().slice(),l={},c;for(;c=u.pop();){if(l[c])continue;l[c]=!0;let p=e[c]||t[c];if(p){u.push(...r[p]),r[s].push(c);continue}t[c]=s}}return{exportMap:e,weakExportMap:t,dependencyMap:r}}var xu=class{constructor(){this.data={}}getChildIntersections(t){return this.data[t]||{count:0}}addListParent(t,r,n){if(ua(n.valueType,[w,Le]),r!==void 0)n.valueType===Le?this.addPoint(t,r,n.value[r]):this.addPoint(t,r,n.value);else{ua(n.valueType,[Le]);for(let i=0;i<n.value.length;i++)this.addPoint(t,i,n.value[i])}}addPrimitiveParent(t,r){if(ua(r.valueType,[w,Le]),r.valueType===w)this.addPoint(t,0,r.value);else for(let n=0;n<r.value.length;n++)this.addPoint(t,0,r.value[n])}addPoint(t,r,n){var s;let i=this.data[t]||{count:0};this.data[t]||(this.data[t]=i),i[r]||(i[r]=[]),(s=i[r])==null||s.push(n),i.count++}};var Pu=class{constructor(t){this.singleExpression=t.singleExpression}isGeometryEnabled(){return!1}areAllScalesLinear(){return!0}assignmentForbidden(t){return this.substitutionForbidden(t)}substitutionForbidden(t){return t.slice(0,3)!==\"ans\"}isValidSlider(t){return!1}sliderVariables(){return[]}graphingEnabled(){return!1}ansEnabled(){return!this.singleExpression}dimensionVarsEnabled(){return!1}disabledFeatures(){return[\"Sum\",\"Product\",\"Integral\",\"List\",\"Derivative\",\"Piecewise\",\"Exponent\",\"PercentOf\",\"Substitution\"]}};var Tu=class{constructor(t){this.singleExpression=t.singleExpression}isGeometryEnabled(){return!1}areAllScalesLinear(){return!0}assignmentForbidden(t){return this.substitutionForbidden(t)}substitutionForbidden(t){return this.singleExpression?t.slice(0,3)!==\"ans\":t.slice(0,3)===\"tmp\"}isValidSlider(t){return!1}sliderVariables(){return[]}graphingEnabled(){return!1}ansEnabled(){return!this.singleExpression}dimensionVarsEnabled(){return!1}disabledFeatures(){return this.singleExpression?[\"Sum\",\"Product\",\"Integral\",\"Derivative\",\"Piecewise\",\"Substitution\",\"PercentOf\"]:[\"Sum\",\"Product\",\"Integral\",\"Derivative\",\"Piecewise\",\"Substitution\"]}};var ki=typeof performance!=\"undefined\"?()=>performance.now():()=>Date.now();typeof self!=\"undefined\"&&self.WorkerGlobalScope&&(self.Fragile={countReferences:Qc,Opcodes:Qe,Types:me,getConstantListLength:ar,ParsenodeError:O});var{Constant:ti,Seed:bv,FunctionCall:tA,Image:rA,Slider:nA,Table:iA,TableColumn:sA,Construction:oA}=b;function aA(e,t){switch(e){case\"fourFunction\":return new Pu({singleExpression:!1});case\"singleExpressionFourFunction\":return new Pu({singleExpression:!0});case\"scientific\":return new Tu({singleExpression:!1});case\"singleExpressionScientific\":return new Tu({singleExpression:!0});case\"graphing\":return new bu({enableGeometry:!1,scales:t});case\"geometry\":return new bu({enableGeometry:!0,scales:t});case\"graphing_3d\":return new Xp}}var uA={fourFunction:Wu,singleExpressionFourFunction:Wu,scientific:Rf,singleExpressionScientific:wf,graphing:fa,graphing_3d:fa,geometry:fa},Vn=\"**geo_construction_statement_id**\";function Xr(e,t){var r=Ti(e,t);return r.isError||r instanceof b.Expression?r:Te()}function lA(e){let t=e.rawTree.userData,r=e.rawTree.metaData;return!!(t.cdf&&t.cdf.show&&r.distributionSpec)}function cA(e){let t=e.evaluationState.expression_type,r=e.rawTree.userData;return!r.clickableInfo||!r.clickableInfo.enabled?!1:e.rawTree.isImage?!0:e.getGraphMode()===4?!1:H0(t)}function Vt(e,t){let r=\"id\"+e;for(let[n,i]of t||[])r+=\"::\"+n+i;return r}var pA=new ti(ie(0,1)),fA=new ti(ie(1,1)),dA=new ti(NaN);function co(e,t){return e?e===\"0\"?pA:e===\"1\"?fA:Xr(e,t):dA}function Ps(e,t){if(e)return Xr(e,t)}function mA(e){return e.slice(0,3)!==\"ans\"}function yA(e){return e.slice(0,6)!==\"idref_\"}function xv(e,t){let{multiplyDefined:r,multiplyDefinedByTables:n,cyclicallyDefined:i}=e;for(let s in r)r.hasOwnProperty(s)&&(t[s]=n[s]?im(s):Mo(s));for(let s in i){if(!i.hasOwnProperty(s))continue;let o=e.tableDefined[s]&&!e.globallyDefined[s],a=i[s].filter(mA).filter(yA);t[s]=o?om(a):Ul(a)}}function Mu(e,t,r){for(let n of r)e[n]||(e[n]=[]),e[n].push(t)}function Pv(e,t,r){if(r.extraDepNodes)for(let n of r.extraDepNodes)n&&Mu(e,t,n.getDependencies());r.clickHandler&&Mu(e,t,r.clickHandler.getDependencies())}function gA(e,t,r){let n=e.evaluationState,i=e.rawTree,s=i.metaData.cdfMin,o=i.metaData.cdfMax,a={},u=NaN,l=NaN,c=i.type===\"Assignment\"?i._expression:i,p=c&&c.metaData&&c.metaData.distributionSpec;if(s){let g=s.tryGetConcreteTree(t,r);g.isConstant&&(u=+g.asValue());for(let h of g.getDependencies())a[h]=!0}else u=-1/0;if(o){let g=o.tryGetConcreteTree(t,r);g.isConstant&&(l=+g.asValue());for(let h of g.getDependencies())a[h]=!0}else l=1/0;let f=!0,m=!0;if(isNaN(u)&&(f=!1,u=NaN),isNaN(l)&&(m=!1,l=NaN),f?m?u>l&&(f=!1,m=!1,n.error=bm().getError()):n.error=hm().getError():n.error=gm().getError(),f&&m){let g=new tA(\"cdf\",[c,new ti(u),new ti(l)]);n.cdf_evaluation=+g.tryGetConcreteTree(t,r).asValue()}let d=-1/0,y=1/0;if(p&&(p.discrete&&(d=0),p.symbol===\"binomialdist\"&&c.args&&c.args[0])){let g=+c.args[0].asValue();isFinite(g)&&(y=g)}i.metaData.evaluatedCDFMin=u,i.metaData.evaluatedCDFMax=l,n.cdf_min_valid=f,n.cdf_max_valid=m,n.cdf_min_default=d,n.cdf_max_default=y,n.is_single_identifier=!1,io(n,t,a)}function hA(e,t,r,n){let i={},s=!0,o=NaN,a,u=!1;if(r){let l=r.tryGetConcreteTree(e,t);a=l.getDependencies().length===0?l.asValue():NaN,u=Array.isArray(a),o=u?a:+a;for(let c of l.getDependencies())i[c]=!0}if(u){for(let l of o)if(!isFinite(+l)){s=!1,o=NaN;break}}else isFinite(+o)||(s=!1,o=NaN);return r||(s=!0,n!==void 0&&(o=n)),{value:o,valid:s,missingVarsMap:i}}var Iu={lineWidth:{parseNode:\"lineWidth\",valueOutputProp:\"computedLineWidth\",formulaOutputProp:\"\",validOutputProp:\"line_width_valid\",default:(e,t,r,n)=>{let i=r.isGeometryEnabled(),s=n!==void 0&&pe(n,ye);return i&&s?2:2.5},transform:void 0,shouldEvaluate:void 0,seed:\"lw\"},lineOpacity:{parseNode:\"lineOpacity\",valueOutputProp:\"computedLineOpacity\",formulaOutputProp:\"\",validOutputProp:\"line_opacity_valid\",default:(e,t,r,n)=>{let i=r.isGeometryEnabled(),s=n!==void 0&&pe(n,ye);return i&&s?.6:.9},transform:void 0,shouldEvaluate:void 0,seed:\"lo\"},pointOpacity:{parseNode:\"pointOpacity\",valueOutputProp:\"computedPointOpacity\",formulaOutputProp:\"\",validOutputProp:\"point_opacity_valid\",default:(e,t,r)=>!e||!t?.9:e.getGraphMode(r,t)===4?1:.9,transform:void 0,shouldEvaluate:void 0,seed:\"po\"},pointSize:{parseNode:\"pointSize\",valueOutputProp:\"computedPointSize\",formulaOutputProp:\"\",validOutputProp:\"point_size_valid\",default:()=>9,shouldEvaluate:void 0,transform:void 0,seed:\"ps\"},fillOpacity:{parseNode:\"fillOpacity\",valueOutputProp:\"computedFillOpacity\",formulaOutputProp:\"\",validOutputProp:\"fill_opacity_valid\",default:(e,t,r,n)=>{let i=r.isGeometryEnabled(),s=n!==void 0&&pe(n,ye);return i&&s?.2:.4},transform:void 0,shouldEvaluate:e=>{if(!e)return!1;let{expression_type:t,is_inequality:r}=e.evaluationState;return!!(t===\"POLYGON\"||t===\"PARAMETRIC\"||r)},seed:\"fo\"},labelSize:{parseNode:\"labelSize\",valueOutputProp:\"computedLabelSize\",formulaOutputProp:\"\",validOutputProp:\"label_size_valid\",transform:void 0,default:()=>1,shouldEvaluate:void 0,seed:\"ls\"},labelAngle:{parseNode:\"labelAngle\",valueOutputProp:\"computedLabelAngle\",formulaOutputProp:\"label_angle_value\",validOutputProp:\"label_angle_valid\",default:()=>0,transform:e=>`-\\\\trigAngleMultiplier*(${e})`,shouldEvaluate:void 0,seed:\"la\"}};function Tv(e,t,r,n,i,s,o){let a=Iu[s],u;e&&(u=e.tryGetConcreteTree(n,i));let l=a.default&&a.default(e,u,n,o),c=hA(n,i,r[a.parseNode],l);r[a.valueOutputProp]=c.value,a.formulaOutputProp&&(t[a.formulaOutputProp]=c.value),t[a.validOutputProp]=c.valid,io(t,n,c.missingVarsMap)}function bA(e,t,r,n){let i,s,o;if(e.rawTree.isTable&&e.evaluationState.column_data&&e.rawTree.columns)for(let a=0;a<e.evaluationState.column_data.length;a++)i=e.evaluationState.column_data[a],s=e.rawTree.columns[a].header.metaData,o=s[n],Tv(o,i,s,t,r,n,e.concreteTree.valueType);else i=e.evaluationState,s=e.rawTree.metaData,o=s[n],Tv(o,i,s,t,r,n,e.concreteTree.valueType)}function Iv(e){return Ws(e[0],e[1],e[2]).formatHex()}function Mv(e,t,r,n,i){let s;if(e){let o=e.tryGetConcreteTree(n,i),a=o.getDependencies().length>0?void 0:o.asValue(),{valueType:u}=o;if(s=!!(a&&(u===et||u===rr)),s){let l=o&&o.valueType===et?Iv(a):a.map(Iv);t.colorLatexValue=l,r.color_latex_value=l}}else s=!0;r.color_latex_valid=s}function xA(e,t,r){let n,i,s;if(e.rawTree.isTable&&e.evaluationState.column_data&&e.rawTree.columns)for(let o=0;o<e.evaluationState.column_data.length;o++)n=e.evaluationState.column_data[o],i=e.rawTree.columns[o].header.metaData,s=i.colorLatex,Mv(s,i,n,t,r);else n=e.evaluationState,i=e.rawTree.metaData,s=i.colorLatex,Mv(s,i,n,t,r)}function PA(e,t,r){let n=e.evaluationState,i=e.rawTree,s={},o=i.metaData.clickHandler;if(!o)return;let a=o.tryGetConcreteTree(t,r);!a.isError&&a.valueType!==Ge&&(a=ma(Z(a.valueType)));for(let l of a.getDependencies())t.validActionVariable(l)||(s[l]=!0);let u=Object.keys(s);u.length>0&&(a=Tt(u).setDependencies(a.getDependencies())),a.isError&&!lh(t,a)?n.click_handler={status:\"error\",error:a.getError()}:a.isEmptyAction?n.click_handler={status:\"empty\"}:n.click_handler={status:\"maybe-valid\"},io(n,t,s)}function TA(e,t,r){let n=e.evaluationState,i=e.rawTree,s=n.expression_type===\"POLAR\"?i.metaData.polarDomainMin:i.metaData.parametricDomainMin,o=n.expression_type===\"POLAR\"?i.metaData.polarDomainMax:i.metaData.parametricDomainMax,a={},u=NaN,l=NaN,c=!1;if(s){c=!0;let m=s.tryGetConcreteTree(t,r);m.isConstant&&(u=+m.asValue());for(let d of m.getDependencies())a[d]=!0}else u=0;if(o){c=!0;let m=o.tryGetConcreteTree(t,r);m.isConstant&&(l=+m.asValue());for(let d of m.getDependencies())a[d]=!0}else n.expression_type===\"PARAMETRIC\"?l=1:n.expression_type===\"POLAR\"&&(l=Math.PI*12/+r.trigAngleMultiplier.asValue());let p=!0,f=!0;isFinite(u)||(p=!1,u=NaN),isFinite(l)||(f=!1,l=NaN),p?f?u>l&&(p=!1,f=!1,n.error=ym().getError()):n.error=mm().getError():n.error=dm().getError(),i.metaData.evaluatedDomainMin=u,i.metaData.evaluatedDomainMax=l,n.expression_type===\"POLAR\"&&(i.metaData.isExplicitDomain=c),n.domain_min_number=u,n.domain_max_number=l,n.domain_min_valid=p,n.domain_max_valid=f,n.expression_type===\"PARAMETRIC\"&&(delete a.t,io(n,t,a))}function IA(e,t,r){let n=e.evaluationState,i=e.rawTree,s=i.metaData.vizAxisOffset,o=i.metaData.vizBreadth,a={},u=NaN,l=NaN;if(s){let f=s.tryGetConcreteTree(t,r);f.isConstant&&(u=+f.asValue());for(let m of f.getDependencies())a[m]=!0}else u=1;if(o){let f=o.tryGetConcreteTree(t,r);f.isConstant&&(l=+f.asValue());for(let m of f.getDependencies())a[m]=!0}else l=1;let c=!0,p=!0;isFinite(u)||(c=!1,u=NaN),isFinite(l)||(p=!1,l=NaN),c?p||(n.error=Ed().getError()):n.error=vd().getError(),i.metaData.evaluatedAxisOffset=u,i.metaData.evaluatedBreadth=l,n.viz_values={axisOffset:u,breadth:l},n.viz_valids={axisOffset:c,breadth:p},io(n,t,a)}function MA(e){return e.globalRandomSeed||[]}function vv(e,t,r,n,i){let s={},o={},a=[],u=[];for(let l in n)n[l]&&(o[l]=!0,a.push(l));for(let l in i)i[l]&&(s[l]=!0,u.push(l));for(;a.length||u.length;){for(;a.length;){let l=a.pop(),c=t[l];if(c)for(let p of c.getLegalExports(e))s[p]||(s[p]=!0,u.push(p))}for(;u.length;){let l=u.pop(),c=r[l];if(c)for(let p of c)o[p]||(o[p]=!0,a.push(p))}}return{ids:o,symbols:s}}function tb(e,t,r){if(e.isError||e.getDependencies().length||e.valueType!==Ge)return;let n=e.asValue();if(n)for(let i in n.updateRules){t[i]=ah(n,i);let{value:s,valueType:o}=n.updateRules[i];r[i]=new b.Assignment(i,Nt(o,s))}}var jp=class{constructor(){this.childIntersections=new xu;this.getCLSymbolMap=gv;this.statements={},this.analysis={},this.currentStatus={},this.currentLabel={},this.unpublishedIds={},this.dimensions={width:0,height:0},this.intersectId=void 0,this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={},this.markedRegressionDirty=!1,this.use_degrees=!1,this.initialEvaluation=!1,this.globalEventCount=0,this.actions=!0,this.substitutions=!0,this.setEvaluationMode(\"graphing\"),this.setRestrictedFunctions(!1),this.setForceEnableGeometryFunctions(!1),this.setFunctionDefinition(!0),this.setReplaceRoundWithReciprocal(!1),this.setDistributions(!0),this.invalidate()}invalidate(){delete this.statements[Vn];for(let r in this.statements)this.statements.hasOwnProperty(r)&&this.markAsDirtyRoot(r);this.currentStatus={},this.analysis={};let t=this.viewState?{xAxisScale:this.viewState.xAxisScale,yAxisScale:this.viewState.yAxisScale}:void 0;this.policy=aA(this.evaluationMode,t),this.parent_frame=uA[this.evaluationMode].getFrame({restrictedFunctions:this.restrictedFunctions,forceEnableGeometryFunctions:this.forceEnableGeometryFunctions,isGeometryCalculator:this.evaluationMode===\"geometry\",replaceRoundWithReciprocal:this.replaceRoundWithReciprocal,distributions:this.distributions,additionalFunctions:this.additionalFunctions,trigAngleMultiplier:new ti(this.use_degrees?Math.PI/180:ie(1,1)),initialEvaluation:new ti(this.initialEvaluation?1:0),globalEventCount:new ti(0),globalRandomSeed:new bv(this.globalRandomSeedString||\"\"),width:this.policy.dimensionVarsEnabled()?new ti(ie(this.dimensions.width,1)):Ql(\"width\"),height:this.policy.dimensionVarsEnabled()?new ti(ie(this.dimensions.height,1)):Ql(\"height\")}),this.frame=Object.create(this.parent_frame),this.lastFrame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame),this.lastClockTickTime=void 0}processChangeSet(t){let r=ki(),n={cacheWrites:0,cacheReads:0,cacheHits:0,cacheMisses:0};I0(n);let i={intersections:{},graphs:{}};t.isCompleteState&&(this.invalidate(),this.statements={},this.currentLabel={});let s=!!t.isCompleteState&&!t.isUndoRedoState;s!==this.initialEvaluation&&(this.initialEvaluation=s,this.invalidate()),t.viewState&&this.setViewState(t.viewState),t.hasOwnProperty(\"degreeMode\")&&this.setDegreeMode(t.degreeMode),t.hasOwnProperty(\"globalRandomSeed\")&&this.setGlobalRandomSeed(t.globalRandomSeed),t.hasOwnProperty(\"evaluationMode\")&&this.setEvaluationMode(t.evaluationMode),t.hasOwnProperty(\"additionalFunctions\")&&this.setAdditionalFunctions(t.additionalFunctions),t.hasOwnProperty(\"restrictedFunctions\")&&this.setRestrictedFunctions(t.restrictedFunctions),t.hasOwnProperty(\"forceEnableGeometryFunctions\")&&this.setForceEnableGeometryFunctions(t.forceEnableGeometryFunctions),t.hasOwnProperty(\"distributions\")&&this.setDistributions(t.distributions),t.hasOwnProperty(\"functionDefinition\")&&this.setFunctionDefinition(t.functionDefinition),t.hasOwnProperty(\"replaceRoundWithReciprocal\")&&this.setReplaceRoundWithReciprocal(t.replaceRoundWithReciprocal),t.hasOwnProperty(\"pointsOfInterest\")&&this.setWorkerConfigProperty(\"pointsOfInterest\",t.pointsOfInterest),t.hasOwnProperty(\"plotSingleVariableImplicitEquations\")&&this.setWorkerConfigProperty(\"plotSingleVariableImplicitEquations\",t.plotSingleVariableImplicitEquations),t.hasOwnProperty(\"plotImplicits\")&&this.setWorkerConfigProperty(\"plotImplicits\",t.plotImplicits),t.hasOwnProperty(\"plotInequalities\")&&this.setWorkerConfigProperty(\"plotInequalities\",t.plotInequalities),t.hasOwnProperty(\"sliders\")&&this.setWorkerConfigProperty(\"sliders\",t.sliders),t.hasOwnProperty(\"actions\")&&this.setActions(!!t.actions),t.hasOwnProperty(\"substitutions\")&&this.setSubstitutions(!!t.substitutions);let o;if(t.hasOwnProperty(\"selectedIds\")){let p=t.selectedIds||{};(this.intersectId===void 0||!p[this.intersectId])&&([o]=Object.keys(p),this.intersectId=o)}t.hasOwnProperty(\"dimensions\")&&this.setDimensions(t.dimensions);let a=ki();this.processStatements(t,i);let u=ki();n.processStatements=u-a,a=u,this.updateAnalysis(),u=ki(),n.updateAnalysis=u-a,a=u,o!==void 0&&this._updateIntersections(o,i),u=ki(),n.updateIntersections=u-a,a=u;let l=this._publishAllStatuses();u=ki(),n.publishAllStatuses=u-a,a=u,this._computeAllLabels(),u=ki(),n.computeAllLabels=u-a,a=u,this._computeAriaDescriptions(),u=ki(),n.computeAriaDescriptions=u-a,a=u,this._graphAllChanged(i),u=ki(),n.graphAllChanges=u-a;let c=this.processEvents(t.events);return this.unpublishedIds={},n.timeInWorker=u-r,{syncId:t.syncId,isCompleteState:t.isCompleteState,intersectionChanges:i.intersections,statusChanges:l,graphChanges:i.graphs,timingData:n,eventUpdates:c}}processStatements(t,r){if(t.removes)for(let n in t.removes){let i;if(!t.isCompleteState&&this.statements.hasOwnProperty(n)&&(i=this.statements[n].getAllIds()),this.removeStatement(n,r),!t.isCompleteState&&i)for(let s of i)r.graphs[s]=void 0}if(t.statements)for(let n in t.statements){let i=t.statements[n];i===null||this.addStatement(i,r)}}setViewState(t){if(Ri(t,this.viewState))return;let r=!!(this.viewState&&t.xAxisScale===this.viewState.xAxisScale&&t.yAxisScale===this.viewState.yAxisScale);if(this.viewState=t,r)for(let n in this.statements)this.statements.hasOwnProperty(n)&&(this.unpublishedIds[n]=!0);else this.invalidate()}getViewState(){return this.viewState}setDegreeMode(t){this.use_degrees=t,this.invalidate()}setDimensions(t){t!==void 0&&(this.dimensions=t,this.invalidate())}setGlobalRandomSeed(t){this.globalRandomSeedString=t,this.parent_frame.globalRandomSeed=new bv(t),this.dirtyExportedSymbolRoots.globalRandomSeed=!0}setEvaluationMode(t){this.evaluationMode=t,this.invalidate()}setAdditionalFunctions(t){this.additionalFunctions=t,this.invalidate()}setRestrictedFunctions(t){this.restrictedFunctions=t,this.invalidate()}setForceEnableGeometryFunctions(t){this.forceEnableGeometryFunctions=t,this.invalidate()}setDistributions(t){this.distributions=t,this.invalidate()}setFunctionDefinition(t){this.functionDefinition=t,this.invalidate()}setReplaceRoundWithReciprocal(t){this.replaceRoundWithReciprocal=t,this.invalidate()}setActions(t){t!==this.actions&&(this.actions=t,this.invalidate())}setSubstitutions(t){t!==this.substitutions&&(this.substitutions=t,this.invalidate())}setWorkerConfigProperty(t,r){r!==sn[t]&&(sn[t]=r,this.invalidate())}_publishAllStatuses(){let t={},r=this.currentStatus;this.currentStatus={};for(let n in this.unpublishedIds){if(!this.analysis.hasOwnProperty(n))continue;let i=this.analysis[n].evaluationState;Ri(i,r[n])||(t[n]=i),this.currentStatus[n]=i}return t}_computeAllLabels(){for(let t in this.currentLabel){let r=this.statements[t];if(!r)continue;let n=r.tryGetConcreteTree(this.policy,this.frame),i=1;(n.valueType===Le||n.valueType===Ct||n.valueType===zt||n.valueType===Et||n.valueType===St)&&(i=n.length);let s=[],o=this.currentLabel[t];if(jn(o))for(let a=0;a<i;a++)s.push(eb(o,this.frame,a));Ri(s,r.computedLabels)||(r.computedLabels=s,this.unpublishedIds[t]=!0)}}_computeAriaDescriptions(){for(let t in this.analysis){let r=this.analysis[t],n=r.evaluationState,s=r.rawTree.userData;if(s.description&&s.description!==\"\"){n.computed_description=[];let o=1;r.concreteTree.isList?o=r.concreteTree.length:n.dimensions&&n.dimensions.x&&Array.isArray(n.dimensions.x)&&(o=n.dimensions.x.length);for(let a=0;a<o;a++)n.computed_description.push(eb(Kh(s.description),this.frame,a))}}}_graphAllChanged(t){let r=this.getViewState(),n=!1;if(!(!r||!YM(r))){for(let i in this.unpublishedIds){if(!this.analysis.hasOwnProperty(i))continue;let s=this.analysis[i],o=s.evaluationState.expression_type,a=o===\"SINGLE_POINT\"||o===\"POINT_LIST\";if(s.rawTree.isTable){let u=s.graph(r,void 0),l=s.rawTree.getAllIds();for(let c of l)u[c]?this._notifyGraphComputed(c,u[c],t):this._notifyGraphRemoved(c,t)}else s.evaluationState.is_graphable&&(s.rawTree.userData.shouldGraph||s.rawTree.userData.showLabel&&a)?(this._notifyGraphComputed(i,s.graph(r,this.childIntersections.getChildIntersections(i)),t),this.intersectId===i&&(n=!0)):this._notifyGraphRemoved(i,t)}cr(this.unpublishedIds).length&&this.intersectId!==void 0&&(this.unpublishedIds.hasOwnProperty(this.intersectId)||(n=!0)),n&&this._updateIntersections(this.intersectId,t)}}_notifyGraphRemoved(t,r){r.graphs[t]=void 0}_notifyGraphComputed(t,r,n){BP(r),n.graphs[t]=r}_updateIntersections(t,r){if(!this.viewState)return;if(!this.analysis[t]||!this.analysis[t].shouldIntersect()){r.intersections[t]=[];return}let n=mv(this.analysis,this.viewState,t);r.intersections[t]=n}getDisabledFeatures(){let t=this.policy.disabledFeatures();this.functionDefinition===!1&&(t=t.concat(\"FunctionDefinition\")),this.actions===!1&&(t=t.concat(\"UpdateRule\")),this.substitutions===!1&&(t=t.concat(\"Substitution\"));let r=this.additionalFunctions||[];return t=t.filter(n=>!(n===\"Exponent\"&&r.indexOf(\"exponent\")!==-1||n===\"PercentOf\"&&r.indexOf(\"percent\")!==-1)),t}areFractionsDisallowed(){let{evaluationMode:t}=this;return t!==\"fourFunction\"&&t!==\"singleExpressionFourFunction\"?!1:!this.additionalFunctions||this.additionalFunctions.indexOf(\"fraction\")===-1}addStatement(t,r){if(!t)return;let n=t.id;this.markExportsDirty(n),this.markAsDirtyRoot(n);let i={index:this.policy.ansEnabled()?t.index:void 0,disabledFeatures:this.getDisabledFeatures(),disallowFrac:this.areFractionsDisallowed(),seedPrefix:Vt(n),writeIntegral:this.evaluationMode===\"geometry\"},s={extraDepNodes:[]};switch(t.type){case\"table\":let u=[];this.statements.hasOwnProperty(n)&&(u=this.statements[n].getAllIds()),t.shouldGraph=!0;let l=t.columns,c=[],p=M=>!M.replace(/\\\\space|\\\\ /g,\"\").match(/\\S/);for(let M=0;M<l.length;M++){let E,S,v,N=l[M];E=Ti(N.latex,oe(z({},i),{seedPrefix:Vt(n,[[\"tr\",0],[\"tc\",M]])})),S=[];let G=-1;for(let C=0;C<l[M].values.length;C++)p(N.values[C])?S.push(new ti(NaN)):(S.push(Ti(N.values[C],oe(z({},i),{seedPrefix:Vt(n,[[\"tr\",C+1],[\"tc\",M]])}))),G=C);if(S=S.slice(0,G+1),v=new sA(E,S),v.id=N.id,v.header){if(v.header.userData=N,v.header.metaData={extraDepNodes:[]},N.colorLatex){let C=Xr(N.colorLatex,oe(z({},i),{seedPrefix:Vt(n,[[\"tr\",0],[\"tc\",M],[\"cl\",M]])}));v.header.metaData.colorLatex=C,v.header.metaData.extraDepNodes.push(C)}if(N.pointSize){let C=Xr(N.pointSize,oe(z({},i),{seedPrefix:Vt(n,[[\"tr\",0],[\"tc\",M],[\"ps\",M]])}));v.header.metaData.pointSize=C,v.header.metaData.extraDepNodes.push(C)}if(N.pointOpacity){let C=Xr(N.pointOpacity,oe(z({},i),{seedPrefix:Vt(n,[[\"tr\",0],[\"tc\",M],[\"po\",M]])}));v.header.metaData.pointOpacity=C,v.header.metaData.extraDepNodes.push(C)}if(N.lineWidth){let C=Xr(N.lineWidth,oe(z({},i),{seedPrefix:Vt(n,[[\"tr\",0],[\"tc\",M],[\"lw\",M]])}));v.header.metaData.lineWidth=C,v.header.metaData.extraDepNodes.push(C)}if(N.lineOpacity){let C=Xr(N.lineOpacity,oe(z({},i),{seedPrefix:Vt(n,[[\"tr\",0],[\"tc\",M],[\"lo\",M]])}));v.header.metaData.lineOpacity=C,v.header.metaData.extraDepNodes.push(C)}}c.push(v)}this.statements[n]=new iA(c);let f=this.statements[n].getAllIds();u.forEach(M=>{f.indexOf(M)===-1&&this._notifyGraphRemoved(M,r)});break;case\"image\":let m=\"-\\\\trigAngleMultiplier*(\"+t.angle+\")\",d=Xr(t.center,oe(z({},i),{seedPrefix:Vt(n,[[\"ic\",n]])})),y=Xr(m,oe(z({},i),{seedPrefix:Vt(n,[[\"ia\",n]])})),g=Xr(t.width,oe(z({},i),{seedPrefix:Vt(n,[[\"iw\",n]])})),h=Xr(t.height,oe(z({},i),{seedPrefix:Vt(n,[[\"ih\",n]])})),x=Xr(t.opacity,oe(z({},i),{seedPrefix:Vt(n,[[\"io\",n]])}));this.statements[n]=new rA({center:d,radianAngle:y,width:g,height:h,opacity:x},void 0);break;case\"ticker\":{this.statements[n]=new b.Ticker({handler:Xr(t.handlerLatex,oe(z({},i),{allowDt:!0})),minStep:Xr(t.minStepLatex||\"0\",i)});break}default:t=t;let P,D=ci(t.latex);D.slice(-1)===\"=\"?P=D.substring(0,D.length-1):P=t.latex,this.statements[n]=Ti(P,i);for(let M in Iu){let E=M;if(t[E]){let S=Iu[E],v=t[E];S.transform&&(v=S.transform(v));let N=co(v,oe(z({},i),{seedPrefix:Vt(n,[[S.seed,n]])}));s[E]=N,s.extraDepNodes.push(N)}}if(t.colorLatex){let M=Ps(t.colorLatex,oe(z({},i),{seedPrefix:Vt(n,[[\"ac\",n]])}));s.colorLatex=M,s.extraDepNodes.push(M)}if(t.polarDomain&&t.polarDomain.min&&(s.polarDomainMin=co(t.polarDomain.min,oe(z({},i),{seedPrefix:Vt(n,[[\"lm\",n]])})),s.extraDepNodes.push(s.polarDomainMin)),t.polarDomain&&t.polarDomain.max&&(s.polarDomainMax=co(t.polarDomain.max,oe(z({},i),{seedPrefix:Vt(n,[[\"lM\",n]])})),s.extraDepNodes.push(s.polarDomainMax)),t.parametricDomain&&t.parametricDomain.min&&(s.parametricDomainMin=co(t.parametricDomain.min,oe(z({},i),{seedPrefix:Vt(n,[[\"lm\",n]])})),s.extraDepNodes.push(s.parametricDomainMin)),t.parametricDomain&&t.parametricDomain.max&&(s.parametricDomainMax=co(t.parametricDomain.max,oe(z({},i),{seedPrefix:Vt(n,[[\"lM\",n]])})),s.extraDepNodes.push(s.parametricDomainMax)),t.vizProps&&(t.vizProps.axisOffset&&(s.vizAxisOffset=co(t.vizProps.axisOffset,oe(z({},i),{seedPrefix:Vt(n,[[\"vo\",n]])})),s.extraDepNodes.push(s.vizAxisOffset)),t.vizProps.breadth&&(s.vizBreadth=co(t.vizProps.breadth,oe(z({},i),{seedPrefix:Vt(n,[[\"vb\",n]])})),s.extraDepNodes.push(s.vizBreadth))),t.cdf&&t.cdf.show){let M=k0(t.latex);M&&M.type===\"distribution\"&&(s.distributionSpec=M,s.cdfMin=Ps(t.cdf.min,oe(z({},i),{seedPrefix:Vt(n,[[\"lm\",n]])})),s.extraDepNodes.push(s.cdfMin),s.cdfMax=Ps(t.cdf.max,oe(z({},i),{seedPrefix:Vt(n,[[\"lM\",n]])})),s.extraDepNodes.push(s.cdfMax))}if(this.statements[n].shouldPromoteToSlider(this.policy)){let M=t.slider,E=!!(M&&M.isPlayingOnce),S=Ps(M&&M.softMin,i),v=Ps(M&&M.softMax,i),N=Ps(M&&M.min,oe(z({},i),{seedPrefix:Vt(n,[[\"lm\",n]])})),G=Ps(M&&M.max,oe(z({},i),{seedPrefix:Vt(n,[[\"lM\",n]])})),C=Ps(M&&M.step,oe(z({},i),{seedPrefix:Vt(n,[[\"ls\",n]])}));this.statements[n]=new nA(this.statements[n],{sliderMin:N,sliderMax:G,sliderStep:C,sliderIsPlayingOnce:E,sliderSoftMin:S,sliderSoftMax:v})}}let o=t.clickableInfo;o&&o.enabled&&o.latex&&(s.clickHandler=Xr(o.latex,oe(z({},i),{allowIndex:!0}))),this.statements[n].userData=t,this.statements[n].metaData=s;let a=t.label;if(a){let u=this.currentLabel[n];(!u||u.raw!==a)&&(this.currentLabel[n]=Kh(a))}else delete this.currentLabel[n]}removeStatement(t,r){let n=this.statements[t];if(n){if(this.markExportsDirty(t),n.isTable){let i=this;n.getAllIds().forEach(function(s){i._notifyGraphRemoved(s,r)})}else this._notifyGraphRemoved(t,r);delete this.currentLabel[t],delete this.statements[t],delete this.analysis[t],delete this.currentStatus[t]}}markExportsDirty(t){if(this.statements[t]){this.statements[t].isRegression&&(this.markedRegressionDirty=!0);for(let r of this.statements[t].getLegalExports(this.policy))this.dirtyExportedSymbolRoots[r]=!0}}markAsDirtyRoot(t){this.dirtyStatementRoots[t]=!0}getFrame(){return this.updateAnalysis(),this.frame}getAnalysis(){return this.updateAnalysis(),this.analysis}getEvaluationState(t){if(this.updateAnalysis(),!!this.analysis[t])return this.analysis[t].evaluationState}_updateRegressions(t){let r=this.frame,n=this.lastFrame,i=this.regressionFrame,s=[];for(let c in t)t.hasOwnProperty(c)&&t[c].isRegression&&s.push(c);let o=this;s.sort(function(c,p){let f=o.statements[c].userData&&o.statements[c].userData.residualVariable,m=o.statements[p].userData&&o.statements[p].userData.residualVariable;return f&&!m?-1:m&&!f?1:0});let a=Qh(this.policy,t,s);xv(a,i);let u=a.resolved,l={};for(let c of u)if(c!==Vn)if(this.statements[c].isRegression)this.analysis[c]=t[c].analyze(this.policy,i,r,n,l),this.analysis[c].exportTo(this.policy,r),delete t[c];else{let p=t[c].tryGetConcreteTree(this.policy,i);t[c].exportTo(this.policy,p,i),l[c]={rawTree:t[c],concreteTree:p}}}buildSymbolToExpressionDirtyMap(){let t={};for(let r in this.statements){if(!this.statements.hasOwnProperty(r))continue;let n=this.statements[r],i=n.metaData;if(Mu(t,r,n.getDependencies()),Mu(t,r,n.getLegalExports(this.policy)),n.isRegression&&n.userData&&n.userData.residualVariable&&Mu(t,r,[li(n.userData.residualVariable)]),Pv(t,r,i),n.isTable&&n.columns)for(let s=0;s<n.columns.length;s++){let o=n.columns[s];o.header&&o.header.metaData&&Pv(t,r,o.header.metaData)}}return t}buildChildIntersectionMap(){var n,i;let t=this.childIntersections,r=new xu;for(let s in this.analysis){let o=this.analysis[s],{geometry:a}=o.evaluationState;if(a!=null&&a.call&&a.call.symbol===\"intersection\"&&this.statements[s].userData.shouldGraph&&!o.concreteTree.isError){let u=!!this.unpublishedIds[s],l=o.concreteTree.asTypedValue();for(let c of a.call.parents){let p=c&&this.frame[c[0]],f=p&&p.userData.id;if(f==null)continue;let m=c&&c[1],d=this.analysis[f];k(d.concreteTree.asTypedValue().valueType)?r.addListParent(f,m===void 0?void 0:m-1,l):r.addPrimitiveParent(f,l),u&&(this.unpublishedIds[f]=!0)}}}for(let s in t.data){let o=((n=t.data[s])==null?void 0:n.count)||0;(((i=r.data[s])==null?void 0:i.count)||0)<o&&(this.unpublishedIds[s]=!0)}return r}updateConstruction(){if(!this.policy.isGeometryEnabled){this.parent_frame.construction=Ji();return}let t=[];for(let o in this.statements)this.statements[o].userData.isInConstructionsFolder&&t.push(o);let r=this.statements[Vn],n=new oA(t);n.metaData={extraDepNodes:[]},n.userData={};let i={};for(let o of(r==null?void 0:r.getDependencies())||[])i[o]=!0;let s={};for(let o of n.getDependencies())s[o]=!0;(!r||!Ri(i,s))&&(this.statements[Vn]=n,this.parent_frame.construction=n,this.markAsDirtyRoot(Vn),this.markExportsDirty(Vn))}updateAnalysis(){var p;this.updateConstruction();let t=this.buildSymbolToExpressionDirtyMap(),r=vv(this.policy,this.statements,t,this.dirtyStatementRoots,this.dirtyExportedSymbolRoots),n=this.markedRegressionDirty;for(let f in r.ids)(p=this.statements[f])!=null&&p.isRegression&&(n=!0);let i={};if(n){for(let f in this.statements)this.statements[f]&&(i[f]=this.statements[f]);this.frame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)}else{let f=r.ids;for(let d in f)this.statements[d]&&(i[d]=this.statements[d]);let m=r.symbols;for(let d in m)m[d]&&(delete this.frame[d],delete this.regressionFrame[d])}for(let f in i)i[f]&&(this.unpublishedIds[f]=!0);this.markedRegressionDirty=!1,this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={};let s=this.analysis,o=this.frame;(this.evaluationMode===\"graphing\"||this.evaluationMode===\"geometry\")&&this._updateRegressions(i);let a=Qh(this.policy,i);xv(a,o);let u=a.resolved;for(let f of u)if(f!==Vn)switch(this.evaluationMode){case\"fourFunction\":case\"singleExpressionFourFunction\":s[f]=this.statements[f].analyzeFourFunction(this.policy,o,s),s[f].exportTo(this.policy,o);break;case\"scientific\":s[f]=this.statements[f].analyzeScientific(this.policy,o,s),s[f].exportTo(this.policy,o);break;case\"singleExpressionScientific\":s[f]=this.statements[f].analyzeSingleExpressionScientific(this.policy,o,s),s[f].exportTo(this.policy,o);break;case\"graphing\":case\"graphing_3d\":case\"geometry\":if(o.r){let m=Object.create(o);if(m.r=void 0,s[f]=this.statements[f].analyze(this.policy,m,s),s[f].getGraphMode()===6){s[f].exportTo(this.policy,o);continue}}s[f]=this.statements[f].analyze(this.policy,o,s),s[f].exportTo(this.policy,o);break}if(this.evaluationMode===\"graphing\"||this.evaluationMode===\"graphing_3d\"||this.evaluationMode===\"geometry\"){for(let f of u){if(f===Vn)continue;let m=s[f],d=m.evaluationState.expression_type;for(let y in Iu){let g=y;var l=Iu[g];(!l.shouldEvaluate||l.shouldEvaluate(m))&&bA(m,this.policy,o,g)}xA(m,this.policy,o),this.actions&&cA(m)&&PA(m,this.policy,o),d===\"PARAMETRIC\"||d===\"POLAR\"?TA(m,this.policy,o):d===\"BOXPLOT\"?IA(m,this.policy,o):lA(m)&&gA(m,this.policy,o)}this.childIntersections=this.buildChildIntersectionMap()}MA(t).forEach(function(f){s[f].evaluationState.depends_on_random_seed=!0});let c=vv(this.policy,this.statements,t,{[Vn]:!0},{construction:!0});for(let f in c.ids){if(f===Vn)continue;let m=s[f].evaluationState;m.geometry&&(m.geometry.unconstructable=!0)}this.lastFrame=Object.create(this.parent_frame);for(let f in o)o.hasOwnProperty(f)&&(this.lastFrame[f]=o[f])}processEvents(t){if(!t||!this.actions)return;let r=Object.create(this.frame),n={},i=!1,s=!1,o;for(let l of t)switch(this.globalEventCount+=1,r.globalEventCount=new b.Constant(this.globalEventCount),l.type){case\"step\":{let p=this.statements[l.expressionId];if(!p)continue;let f=p.tryGetConcreteTree(this.policy,r);s=!0,tb(f,n,r);break}case\"click\":{let p=this.statements[l.expressionId];if(!p||!p.metaData.clickHandler)continue;r.index=new b.Constant(l.indexVar+1);let f=p.metaData.clickHandler.tryGetConcreteTree(this.policy,r);s=!0,i=!0,tb(f,n,r);break}case\"clock-tick\":{(o===void 0||l.isFirstTick&&!o.isFirstTick)&&(o=l);break}default:return l}if(o){let l=this.statements[o.id];if(l&&l instanceof b.Ticker){var a=l.minStep.tryGetConcreteTree(this.policy,r).asValue(),u=typeof a==\"number\"&&a>=0&&isFinite(a);if(u){let c=this.lastClockTickTime;if(this.lastClockTickTime=Date.now(),!o.isFirstTick&&c!==void 0){r.dt=new b.Constant(this.lastClockTickTime-c);let p=l.handler.tryGetConcreteTree(this.policy,r);tb(p,n,r)}}}}return{objectClicked:i,userAction:s,updates:n}}};var Ev=class{constructor(t){this.context=new jp,this.sendMessage=t}processChangeSet(t){var r=this.context.processChangeSet(t);this.sendMessage(\"processChangeSet\",r)}};Object.defineProperty(__dcg_chunk_exports__, 'a', { get: () => vA });\nObject.defineProperty(__dcg_chunk_exports__, 'b', { get: () => z });\nObject.defineProperty(__dcg_chunk_exports__, 'c', { get: () => oe });\nObject.defineProperty(__dcg_chunk_exports__, 'd', { get: () => EA });\nObject.defineProperty(__dcg_chunk_exports__, 'e', { get: () => ib });\nObject.defineProperty(__dcg_chunk_exports__, 'f', { get: () => SA });\nObject.defineProperty(__dcg_chunk_exports__, 'g', { get: () => OA });\nObject.defineProperty(__dcg_chunk_exports__, 'h', { get: () => In });\nObject.defineProperty(__dcg_chunk_exports__, 'i', { get: () => NA });\nObject.defineProperty(__dcg_chunk_exports__, 'j', { get: () => DA });\nObject.defineProperty(__dcg_chunk_exports__, 'k', { get: () => Di });\nObject.defineProperty(__dcg_chunk_exports__, 'l', { get: () => Ts });\nObject.defineProperty(__dcg_chunk_exports__, 'm', { get: () => po });\nObject.defineProperty(__dcg_chunk_exports__, 'n', { get: () => lb });\nObject.defineProperty(__dcg_chunk_exports__, 'o', { get: () => cb });\nObject.defineProperty(__dcg_chunk_exports__, 'p', { get: () => Gn });\nObject.defineProperty(__dcg_chunk_exports__, 'q', { get: () => ff });\nObject.defineProperty(__dcg_chunk_exports__, 'r', { get: () => bb });\nObject.defineProperty(__dcg_chunk_exports__, 's', { get: () => Hv });\nObject.defineProperty(__dcg_chunk_exports__, 't', { get: () => $v });\nObject.defineProperty(__dcg_chunk_exports__, 'u', { get: () => Wv });\nObject.defineProperty(__dcg_chunk_exports__, 'v', { get: () => Jv });\nObject.defineProperty(__dcg_chunk_exports__, 'w', { get: () => Qv });\nObject.defineProperty(__dcg_chunk_exports__, 'x', { get: () => nE });\nObject.defineProperty(__dcg_chunk_exports__, 'y', { get: () => df });\nObject.defineProperty(__dcg_chunk_exports__, 'z', { get: () => Sb });\nObject.defineProperty(__dcg_chunk_exports__, 'A', { get: () => yE });\nObject.defineProperty(__dcg_chunk_exports__, 'B', { get: () => cr });\nObject.defineProperty(__dcg_chunk_exports__, 'C', { get: () => Ms });\nObject.defineProperty(__dcg_chunk_exports__, 'D', { get: () => Bb });\nObject.defineProperty(__dcg_chunk_exports__, 'E', { get: () => Ri });\nObject.defineProperty(__dcg_chunk_exports__, 'F', { get: () => OE });\nObject.defineProperty(__dcg_chunk_exports__, 'G', { get: () => qn });\nObject.defineProperty(__dcg_chunk_exports__, 'H', { get: () => Es });\nObject.defineProperty(__dcg_chunk_exports__, 'I', { get: () => Gb });\nObject.defineProperty(__dcg_chunk_exports__, 'J', { get: () => BE });\nObject.defineProperty(__dcg_chunk_exports__, 'K', { get: () => JE });\nObject.defineProperty(__dcg_chunk_exports__, 'L', { get: () => wA });\nObject.defineProperty(__dcg_chunk_exports__, 'M', { get: () => _n });\nObject.defineProperty(__dcg_chunk_exports__, 'N', { get: () => ax });\nObject.defineProperty(__dcg_chunk_exports__, 'O', { get: () => xM });\nObject.defineProperty(__dcg_chunk_exports__, 'P', { get: () => M5 });\nObject.defineProperty(__dcg_chunk_exports__, 'Q', { get: () => un });\nObject.defineProperty(__dcg_chunk_exports__, 'R', { get: () => I });\nObject.defineProperty(__dcg_chunk_exports__, 'S', { get: () => w });\nObject.defineProperty(__dcg_chunk_exports__, 'T', { get: () => vt });\nObject.defineProperty(__dcg_chunk_exports__, 'U', { get: () => Y });\nObject.defineProperty(__dcg_chunk_exports__, 'V', { get: () => pr });\nObject.defineProperty(__dcg_chunk_exports__, 'W', { get: () => Le });\nObject.defineProperty(__dcg_chunk_exports__, 'X', { get: () => Wt });\nObject.defineProperty(__dcg_chunk_exports__, 'Y', { get: () => de });\nObject.defineProperty(__dcg_chunk_exports__, 'Z', { get: () => rr });\nObject.defineProperty(__dcg_chunk_exports__, '_', { get: () => ye });\nObject.defineProperty(__dcg_chunk_exports__, '$', { get: () => zt });\nObject.defineProperty(__dcg_chunk_exports__, 'aa', { get: () => ue });\nObject.defineProperty(__dcg_chunk_exports__, 'ba', { get: () => Ct });\nObject.defineProperty(__dcg_chunk_exports__, 'ca', { get: () => Q });\nObject.defineProperty(__dcg_chunk_exports__, 'da', { get: () => jt });\nObject.defineProperty(__dcg_chunk_exports__, 'ea', { get: () => X });\nObject.defineProperty(__dcg_chunk_exports__, 'fa', { get: () => Zt });\nObject.defineProperty(__dcg_chunk_exports__, 'ga', { get: () => J });\nObject.defineProperty(__dcg_chunk_exports__, 'ha', { get: () => Qt });\nObject.defineProperty(__dcg_chunk_exports__, 'ia', { get: () => ge });\nObject.defineProperty(__dcg_chunk_exports__, 'ja', { get: () => Kt });\nObject.defineProperty(__dcg_chunk_exports__, 'ka', { get: () => xe });\nObject.defineProperty(__dcg_chunk_exports__, 'la', { get: () => Et });\nObject.defineProperty(__dcg_chunk_exports__, 'ma', { get: () => le });\nObject.defineProperty(__dcg_chunk_exports__, 'na', { get: () => St });\nObject.defineProperty(__dcg_chunk_exports__, 'oa', { get: () => Se });\nObject.defineProperty(__dcg_chunk_exports__, 'pa', { get: () => Ir });\nObject.defineProperty(__dcg_chunk_exports__, 'qa', { get: () => Zr });\nObject.defineProperty(__dcg_chunk_exports__, 'ra', { get: () => Z });\nObject.defineProperty(__dcg_chunk_exports__, 'sa', { get: () => k });\nObject.defineProperty(__dcg_chunk_exports__, 'ta', { get: () => ot });\nObject.defineProperty(__dcg_chunk_exports__, 'ua', { get: () => Mf });\nObject.defineProperty(__dcg_chunk_exports__, 'va', { get: () => pe });\nObject.defineProperty(__dcg_chunk_exports__, 'wa', { get: () => me });\nObject.defineProperty(__dcg_chunk_exports__, 'xa', { get: () => si });\nObject.defineProperty(__dcg_chunk_exports__, 'ya', { get: () => Jb });\nObject.defineProperty(__dcg_chunk_exports__, 'za', { get: () => zu });\nObject.defineProperty(__dcg_chunk_exports__, 'Aa', { get: () => Sn });\nObject.defineProperty(__dcg_chunk_exports__, 'Ba', { get: () => Li });\nObject.defineProperty(__dcg_chunk_exports__, 'Ca', { get: () => Un });\nObject.defineProperty(__dcg_chunk_exports__, 'Da', { get: () => o1 });\nObject.defineProperty(__dcg_chunk_exports__, 'Ea', { get: () => tC });\nObject.defineProperty(__dcg_chunk_exports__, 'Fa', { get: () => jb });\nObject.defineProperty(__dcg_chunk_exports__, 'Ga', { get: () => rC });\nObject.defineProperty(__dcg_chunk_exports__, 'Ha', { get: () => Nr });\nObject.defineProperty(__dcg_chunk_exports__, 'Ia', { get: () => nC });\nObject.defineProperty(__dcg_chunk_exports__, 'Ja', { get: () => ir });\nObject.defineProperty(__dcg_chunk_exports__, 'Ka', { get: () => fe });\nObject.defineProperty(__dcg_chunk_exports__, 'La', { get: () => ep });\nObject.defineProperty(__dcg_chunk_exports__, 'Ma', { get: () => Af });\nObject.defineProperty(__dcg_chunk_exports__, 'Na', { get: () => P1 });\nObject.defineProperty(__dcg_chunk_exports__, 'Oa', { get: () => M1 });\nObject.defineProperty(__dcg_chunk_exports__, 'Pa', { get: () => yx });\nObject.defineProperty(__dcg_chunk_exports__, 'Qa', { get: () => Ju });\nObject.defineProperty(__dcg_chunk_exports__, 'Ra', { get: () => v1 });\nObject.defineProperty(__dcg_chunk_exports__, 'Sa', { get: () => Ff });\nObject.defineProperty(__dcg_chunk_exports__, 'Ta', { get: () => dr });\nObject.defineProperty(__dcg_chunk_exports__, 'Ua', { get: () => S1 });\nObject.defineProperty(__dcg_chunk_exports__, 'Va', { get: () => li });\nObject.defineProperty(__dcg_chunk_exports__, 'Wa', { get: () => ci });\nObject.defineProperty(__dcg_chunk_exports__, 'Xa', { get: () => Ci });\nObject.defineProperty(__dcg_chunk_exports__, 'Ya', { get: () => Dr });\nObject.defineProperty(__dcg_chunk_exports__, 'Za', { get: () => b });\nObject.defineProperty(__dcg_chunk_exports__, '_a', { get: () => _V });\nObject.defineProperty(__dcg_chunk_exports__, '$a', { get: () => Mc });\nObject.defineProperty(__dcg_chunk_exports__, 'ab', { get: () => hx });\nObject.defineProperty(__dcg_chunk_exports__, 'bb', { get: () => Tx });\nObject.defineProperty(__dcg_chunk_exports__, 'cb', { get: () => Nc });\nObject.defineProperty(__dcg_chunk_exports__, 'db', { get: () => Dc });\nObject.defineProperty(__dcg_chunk_exports__, 'eb', { get: () => gn });\nObject.defineProperty(__dcg_chunk_exports__, 'fb', { get: () => Ax });\nObject.defineProperty(__dcg_chunk_exports__, 'gb', { get: () => VV });\nObject.defineProperty(__dcg_chunk_exports__, 'hb', { get: () => UV });\nObject.defineProperty(__dcg_chunk_exports__, 'ib', { get: () => PS });\nObject.defineProperty(__dcg_chunk_exports__, 'jb', { get: () => kr });\nObject.defineProperty(__dcg_chunk_exports__, 'kb', { get: () => Kx });\nObject.defineProperty(__dcg_chunk_exports__, 'lb', { get: () => Wa });\nObject.defineProperty(__dcg_chunk_exports__, 'mb', { get: () => Fo });\nObject.defineProperty(__dcg_chunk_exports__, 'nb', { get: () => Bo });\nObject.defineProperty(__dcg_chunk_exports__, 'ob', { get: () => Xy });\nObject.defineProperty(__dcg_chunk_exports__, 'pb', { get: () => Jy });\nObject.defineProperty(__dcg_chunk_exports__, 'qb', { get: () => Dy });\nObject.defineProperty(__dcg_chunk_exports__, 'rb', { get: () => YO });\nObject.defineProperty(__dcg_chunk_exports__, 'sb', { get: () => NP });\nObject.defineProperty(__dcg_chunk_exports__, 'tb', { get: () => XO });\nObject.defineProperty(__dcg_chunk_exports__, 'ub', { get: () => Wc });\nObject.defineProperty(__dcg_chunk_exports__, 'vb', { get: () => Ha });\nObject.defineProperty(__dcg_chunk_exports__, 'wb', { get: () => jy });\nObject.defineProperty(__dcg_chunk_exports__, 'xb', { get: () => RP });\nObject.defineProperty(__dcg_chunk_exports__, 'yb', { get: () => wP });\nObject.defineProperty(__dcg_chunk_exports__, 'zb', { get: () => ZO });\nObject.defineProperty(__dcg_chunk_exports__, 'Ab', { get: () => LP });\nObject.defineProperty(__dcg_chunk_exports__, 'Bb', { get: () => QO });\nObject.defineProperty(__dcg_chunk_exports__, 'Cb', { get: () => AP });\nObject.defineProperty(__dcg_chunk_exports__, 'Db', { get: () => KO });\nObject.defineProperty(__dcg_chunk_exports__, 'Eb', { get: () => lN });\nObject.defineProperty(__dcg_chunk_exports__, 'Fb', { get: () => fN });\nObject.defineProperty(__dcg_chunk_exports__, 'Gb', { get: () => dN });\nObject.defineProperty(__dcg_chunk_exports__, 'Hb', { get: () => yi });\nObject.defineProperty(__dcg_chunk_exports__, 'Ib', { get: () => jn });\nObject.defineProperty(__dcg_chunk_exports__, 'Jb', { get: () => KV });\nObject.defineProperty(__dcg_chunk_exports__, 'Kb', { get: () => SN });\nObject.defineProperty(__dcg_chunk_exports__, 'Lb', { get: () => cT });\nObject.defineProperty(__dcg_chunk_exports__, 'Mb', { get: () => Qn });\nObject.defineProperty(__dcg_chunk_exports__, 'Nb', { get: () => np });\nObject.defineProperty(__dcg_chunk_exports__, 'Ob', { get: () => TT });\nObject.defineProperty(__dcg_chunk_exports__, 'Pb', { get: () => Er });\nObject.defineProperty(__dcg_chunk_exports__, 'Qb', { get: () => j });\nObject.defineProperty(__dcg_chunk_exports__, 'Rb', { get: () => Ng });\nObject.defineProperty(__dcg_chunk_exports__, 'Sb', { get: () => as });\nObject.defineProperty(__dcg_chunk_exports__, 'Tb', { get: () => o0 });\nObject.defineProperty(__dcg_chunk_exports__, 'Ub', { get: () => Ti });\nObject.defineProperty(__dcg_chunk_exports__, 'Vb', { get: () => D0 });\nObject.defineProperty(__dcg_chunk_exports__, 'Wb', { get: () => k0 });\nObject.defineProperty(__dcg_chunk_exports__, 'Xb', { get: () => no });\nObject.defineProperty(__dcg_chunk_exports__, 'Yb', { get: () => CR });\nObject.defineProperty(__dcg_chunk_exports__, 'Zb', { get: () => s8 });\nObject.defineProperty(__dcg_chunk_exports__, '_b', { get: () => GR });\nObject.defineProperty(__dcg_chunk_exports__, '$b', { get: () => U0 });\nObject.defineProperty(__dcg_chunk_exports__, 'ac', { get: () => H0 });\nObject.defineProperty(__dcg_chunk_exports__, 'bc', { get: () => Rh });\nObject.defineProperty(__dcg_chunk_exports__, 'cc', { get: () => _p });\nObject.defineProperty(__dcg_chunk_exports__, 'dc', { get: () => Ow });\nObject.defineProperty(__dcg_chunk_exports__, 'ec', { get: () => Nw });\nObject.defineProperty(__dcg_chunk_exports__, 'fc', { get: () => ww });\nObject.defineProperty(__dcg_chunk_exports__, 'gc', { get: () => Lw });\nObject.defineProperty(__dcg_chunk_exports__, 'hc', { get: () => FM });\nObject.defineProperty(__dcg_chunk_exports__, 'ic', { get: () => BM });\nObject.defineProperty(__dcg_chunk_exports__, 'jc', { get: () => hs });\nObject.defineProperty(__dcg_chunk_exports__, 'kc', { get: () => yu });\nObject.defineProperty(__dcg_chunk_exports__, 'lc', { get: () => Hp });\nObject.defineProperty(__dcg_chunk_exports__, 'mc', { get: () => O5 });\nObject.defineProperty(__dcg_chunk_exports__, 'nc', { get: () => D5 });\nObject.defineProperty(__dcg_chunk_exports__, 'oc', { get: () => R5 });\nObject.defineProperty(__dcg_chunk_exports__, 'pc', { get: () => KM });\nObject.defineProperty(__dcg_chunk_exports__, 'qc', { get: () => w5 });\nObject.defineProperty(__dcg_chunk_exports__, 'rc', { get: () => gL });\nObject.defineProperty(__dcg_chunk_exports__, 'sc', { get: () => C5 });\nObject.defineProperty(__dcg_chunk_exports__, 'tc', { get: () => _5 });\nObject.defineProperty(__dcg_chunk_exports__, 'uc', { get: () => tv });\nObject.defineProperty(__dcg_chunk_exports__, 'vc', { get: () => hL });\nObject.defineProperty(__dcg_chunk_exports__, 'wc', { get: () => $p });\nObject.defineProperty(__dcg_chunk_exports__, 'xc', { get: () => rv });\nObject.defineProperty(__dcg_chunk_exports__, 'yc', { get: () => nv });\nObject.defineProperty(__dcg_chunk_exports__, 'zc', { get: () => X5 });\nObject.defineProperty(__dcg_chunk_exports__, 'Ac', { get: () => J5 });\nObject.defineProperty(__dcg_chunk_exports__, 'Bc', { get: () => bL });\nObject.defineProperty(__dcg_chunk_exports__, 'Cc', { get: () => j5 });\nObject.defineProperty(__dcg_chunk_exports__, 'Dc', { get: () => Z5 });\nObject.defineProperty(__dcg_chunk_exports__, 'Ec', { get: () => fv });\nObject.defineProperty(__dcg_chunk_exports__, 'Fc', { get: () => bu });\nObject.defineProperty(__dcg_chunk_exports__, 'Gc', { get: () => LA });\nObject.defineProperty(__dcg_chunk_exports__, 'Hc', { get: () => kL });\nObject.defineProperty(__dcg_chunk_exports__, 'Ic', { get: () => zL });\nObject.defineProperty(__dcg_chunk_exports__, 'Jc', { get: () => Pu });\nObject.defineProperty(__dcg_chunk_exports__, 'Kc', { get: () => Tu });\nObject.defineProperty(__dcg_chunk_exports__, 'Lc', { get: () => jp });\nObject.defineProperty(__dcg_chunk_exports__, 'Mc', { get: () => Ev });\n\n    return __dcg_chunk_exports__;\n  })();"
  const __dcg_shared_module_exports__ = eval(__dcg_shared_module_source__);
  const __dcg_worker_source_exports__ = (function () {
    // worker.js
    const __dcg_worker_source__ = `
      // store the code for the worker module as a function that takes the shared module exports as an argument
      const __dcg_worker_module__ = (__dcg_shared_module_exports__) => {
` + "var o={};__dcg_shared_module_exports__['Gc'].log=function(e){self.postMessage({log:JSON.stringify(e)})};var a=self;a.window=a;a.onmessage=function(e){var n=e.data&&e.data.connectionId;if(n)if(e.data.originalMessage.type===\"destroy\")delete o[n];else{var s=o[n];s||(s=new __dcg_shared_module_exports__['Mc'](function(g,c){a.postMessage({connectionId:n,originalMessage:{type:g,payload:c}})}),o[n]=s),s.processChangeSet(e.data.originalMessage)}};a.loadMessageQueue&&(a.loadMessageQueue.forEach(function(e){a.onmessage(e)}),delete a.loadMessageQueue);\n" + `
      };
      // execute the shared module store its exports
      const __dcg_worker_shared_module_exports__ = ${__dcg_shared_module_source__};
      // call the worker module, passing in the shared module exports
      __dcg_worker_module__(__dcg_worker_shared_module_exports__);`

    let createWorker;
    if (typeof Blob !== 'undefined' && URL && typeof URL.createObjectURL === 'function') {
      createWorker = () => {
        const workerURL = URL.createObjectURL(new Blob([__dcg_worker_source__], { type: 'application/javascript' }))
        const worker = new Worker(workerURL);
        worker.revokeObjectURL = () => {
          URL.revokeObjectURL(workerURL);
        }
        return worker;
      }
    } else {
      // Just for testing in Node
      createWorker = () => {
        (new Function(__dcg_worker_source__))();
      }
    }

    return {createWorker, default: {createWorker}};
  })();
  var tF,qC,HC=__dcg_shared_module_exports__['f'](()=>{tF=function(){{let i=function(o){t&&r.evtInScope(o)&&(o.stopPropagation(),o.stopImmediatePropagation())},n=function(o){t&&r.evtInScope(o)&&(o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation())};var t=!1,e=null,r={isGhostEvent:function(o){return!1},evtInScope:function(o){return!1}};return document.addEventListener("mousedown",function(o){r.evtInScope(o)&&(e=document.activeElement,t=r.isGhostEvent(o),i(o))},!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",function(o){n(o),t&&document.activeElement!==e&&(document.activeElement&&document.activeElement.blur(),e&&e.focus()),t=!1},!0),document.addEventListener("focus",n,!0),document.addEventListener("blur",n,!0),r}}(),qC=tF});function XM(t,e,r){r=r||pr;var i,n,o=r.createElement("script");if(o.text=t,e)for(i in iF)n=e[i]||e.getAttribute&&e.getAttribute(i),n&&o.setAttribute(i,n);r.head.appendChild(o).parentNode.removeChild(o)}function hu(t){return t==null?t+"":typeof t=="object"||typeof t=="function"?Wy[YM.call(t)]||"object":typeof t}function $C(t){var e=!!t&&"length"in t&&t.length,r=hu(t);return Yt(t)||uu(t)?!1:r==="array"||e===0||typeof e=="number"&&e>0&&e-1 in t}function Ca(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function zC(t,e,r){return Yt(e)?k.grep(t,function(i,n){return!!e.call(i,n,i)!==r}):e.nodeType?k.grep(t,function(i){return i===e!==r}):typeof e!="string"?k.grep(t,function(i){return Uy.call(e,i)>-1!==r}):k.filter(e,t,r)}function kM(t,e){for(;(t=t[e])&&t.nodeType!==1;);return t}function lF(t){var e={};return k.each(t.match(Rs)||[],function(r,i){e[i]=!0}),e}function au(t){return t}function By(t){throw t}function IM(t,e,r,i){var n;try{t&&Yt(n=t.promise)?n.call(t).done(e).fail(r):t&&Yt(n=t.then)?n.call(t,e,r):e.apply(void 0,[t].slice(i))}catch(o){r.apply(void 0,[o])}}function Hy(){pr.removeEventListener("DOMContentLoaded",Hy),window.removeEventListener("load",Hy),k.ready()}function pF(t,e){return e.toUpperCase()}function Fs(t){return t.replace(dF,"ms-").replace(uF,pF)}function zh(){this.expando=k.expando+zh.uid++}function fF(t){return t==="true"?!0:t==="false"?!1:t==="null"?null:t===+t+""?+t:hF.test(t)?JSON.parse(t):t}function MM(t,e,r){var i;if(r===void 0&&t.nodeType===1)if(i="data-"+e.replace(gF,"-$&").toLowerCase(),r=t.getAttribute(i),typeof r=="string"){try{r=fF(r)}catch(n){}Bo.set(t,e,r)}else r=void 0;return r}function iT(t,e,r,i){var n,o,a=20,s=i?function(){return i.cur()}:function(){return k.css(t,e,"")},l=s(),c=r&&r[3]||(k.cssNumber[e]?"":"px"),u=t.nodeType&&(k.cssNumber[e]||c!=="px"&&+l)&&Wh.exec(k.css(t,e));if(u&&u[3]!==c){for(l=l/2,c=c||u[3],u=+l||1;a--;)k.style(t,e,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u=u/o;u=u*2,k.style(t,e,u+c),r=r||[]}return r&&(u=+u||+l||0,n=r[1]?u+(r[1]+1)*r[2]:+r[2],i&&(i.unit=c,i.start=u,i.end=n)),n}function yF(t){var e,r=t.ownerDocument,i=t.nodeName,n=TM[i];return n||(e=r.body.appendChild(r.createElement(i)),n=k.css(e,"display"),e.parentNode.removeChild(e),n==="none"&&(n="block"),TM[i]=n,n)}function lu(t,e){for(var r,i,n=[],o=0,a=t.length;o<a;o++)i=t[o],i.style&&(r=i.style.display,e?(r==="none"&&(n[o]=Dt.get(i,"display")||null,n[o]||(i.style.display="")),i.style.display===""&&jy(i)&&(n[o]=yF(i))):r!=="none"&&(n[o]="none",Dt.set(i,"display",r)));for(o=0;o<a;o++)n[o]!=null&&(t[o].style.display=n[o]);return t}function Ro(t,e){var r;return typeof t.getElementsByTagName!="undefined"?r=t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!="undefined"?r=t.querySelectorAll(e||"*"):r=[],e===void 0||e&&Ca(t,e)?k.merge([t],r):r}function aS(t,e){for(var r=0,i=t.length;r<i;r++)Dt.set(t[r],"globalEval",!e||Dt.get(e[r],"globalEval"))}function aT(t,e,r,i,n){for(var o,a,s,l,c,u,h=e.createDocumentFragment(),p=[],g=0,y=t.length;g<y;g++)if(o=t[g],o||o===0)if(hu(o)==="object")k.merge(p,o.nodeType?[o]:o);else if(!bF.test(o))p.push(e.createTextNode(o));else{for(a=a||h.appendChild(e.createElement("div")),s=(nT.exec(o)||["",""])[1].toLowerCase(),l=va[s]||va._default,a.innerHTML=l[1]+k.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;k.merge(p,a.childNodes),a=h.firstChild,a.textContent=""}for(h.textContent="",g=0;o=p[g++];){if(i&&k.inArray(o,i)>-1){n&&n.push(o);continue}if(c=gu(o),a=Ro(h.appendChild(o),"script"),c&&aS(a),r)for(u=0;o=a[u++];)oT.test(o.type||"")&&r.push(o)}return h}function cu(){return!0}function du(){return!1}function xF(t,e){return t===wF()==(e==="focus")}function wF(){try{return pr.activeElement}catch(t){}}function JC(t,e,r,i,n,o){var a,s;if(typeof e=="object"){typeof r!="string"&&(i=i||r,r=void 0);for(s in e)JC(t,s,r,i,e[s],o);return t}if(i==null&&n==null?(n=r,i=r=void 0):n==null&&(typeof r=="string"?(n=i,i=void 0):(n=i,i=r,r=void 0)),n===!1)n=du;else if(!n)return t;return o===1&&(a=n,n=function(l){return k().off(l),a.apply(this,arguments)},n.guid=a.guid||(a.guid=k.guid++)),t.each(function(){k.event.add(this,e,n,i,r)})}function $y(t,e,r){if(!r){Dt.get(t,e)===void 0&&k.event.add(t,e,cu);return}Dt.set(t,e,!1),k.event.add(t,e,{namespace:!1,handler:function(i){var n,o,a=Dt.get(this,e);if(i.isTrigger&1&&this[e]){if(a.length)(k.event.special[e]||{}).delegateType&&i.stopPropagation();else if(a=hc.call(arguments),Dt.set(this,e,a),n=r(this,e),this[e](),o=Dt.get(this,e),a!==o||n?Dt.set(this,e,!1):o={},a!==o)return i.stopImmediatePropagation(),i.preventDefault(),o&&o.value}else a.length&&(Dt.set(this,e,{value:k.event.trigger(k.extend(a[0],k.Event.prototype),a.slice(1),this)}),i.stopImmediatePropagation())}})}function AM(t,e){return Ca(t,"table")&&Ca(e.nodeType!==11?e:e.firstChild,"tr")&&k(t).children("tbody")[0]||t}function EF(t){return t.type=(t.getAttribute("type")!==null)+"/"+t.type,t}function DF(t){return(t.type||"").slice(0,5)==="true/"?t.type=t.type.slice(5):t.removeAttribute("type"),t}function VM(t,e){var r,i,n,o,a,s,l;if(e.nodeType===1){if(Dt.hasData(t)&&(o=Dt.get(t),l=o.events,l)){Dt.remove(e,"handle events");for(n in l)for(r=0,i=l[n].length;r<i;r++)k.event.add(e,n,l[n][r])}Bo.hasData(t)&&(a=Bo.access(t),s=k.extend({},a),Bo.set(e,s))}}function kF(t,e){var r=e.nodeName.toLowerCase();r==="input"&&Uh.test(t.type)?e.checked=t.checked:(r==="input"||r==="textarea")&&(e.defaultValue=t.defaultValue)}function su(t,e,r,i){e=jM(e);var n,o,a,s,l,c,u=0,h=t.length,p=h-1,g=e[0],y=Yt(g);if(y||h>1&&typeof g=="string"&&!Nr.checkClone&&CF.test(g))return t.each(function(w){var b=t.eq(w);y&&(e[0]=g.call(this,w,b.html())),su(b,e,r,i)});if(h&&(n=aT(e,t[0].ownerDocument,!1,t,i),o=n.firstChild,n.childNodes.length===1&&(n=o),o||i)){for(a=k.map(Ro(n,"script"),EF),s=a.length;u<h;u++)l=n,u!==p&&(l=k.clone(l,!0,!0),s&&k.merge(a,Ro(l,"script"))),r.call(t[u],l,u);if(s)for(c=a[a.length-1].ownerDocument,k.map(a,DF),u=0;u<s;u++)l=a[u],oT.test(l.type||"")&&!Dt.access(l,"globalEval")&&k.contains(c,l)&&(l.src&&(l.type||"").toLowerCase()!=="module"?k._evalUrl&&!l.noModule&&k._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):XM(l.textContent.replace(SF,""),l,c))}return t}function LM(t,e,r){for(var i,n=e?k.filter(e,t):t,o=0;(i=n[o])!=null;o++)!r&&i.nodeType===1&&k.cleanData(Ro(i)),i.parentNode&&(r&&gu(i)&&aS(Ro(i,"script")),i.parentNode.removeChild(i));return t}function Hh(t,e,r){var i,n,o,a,s=t.style;return r=r||Yy(t),r&&(a=r.getPropertyValue(e)||r[e],a===""&&!gu(t)&&(a=k.style(t,e)),!Nr.pixelBoxStyles()&&sS.test(a)&&IF.test(e)&&(i=s.width,n=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=r.width,s.width=i,s.minWidth=n,s.maxWidth=o)),a!==void 0?a+"":a}function lT(t,e){return{get:function(){if(t()){delete this.get;return}return(this.get=e).apply(this,arguments)}}}function MF(t){for(var e=t[0].toUpperCase()+t.slice(1),r=PM.length;r--;)if(t=PM[r]+e,t in cT)return t}function XC(t){var e=k.cssProps[t]||OM[t];return e||(t in cT?t:OM[t]=MF(t)||t)}function dT(t,e,r){var i=Wh.exec(e);return i?Math.max(0,i[2]-(r||0))+(i[3]||"px"):e}function QC(t,e,r,i,n,o){var a=e==="width"?1:0,s=0,l=0;if(r===(i?"border":"content"))return 0;for(;a<4;a+=2)r==="margin"&&(l+=k.css(t,r+vl[a],!0,n)),i?(r==="content"&&(l-=k.css(t,"padding"+vl[a],!0,n)),r!=="margin"&&(l-=k.css(t,"border"+vl[a]+"Width",!0,n))):(l+=k.css(t,"padding"+vl[a],!0,n),r!=="padding"?l+=k.css(t,"border"+vl[a]+"Width",!0,n):s+=k.css(t,"border"+vl[a]+"Width",!0,n));return!i&&o>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-s-.5))||0),l}function RM(t,e,r){var i=Yy(t),n=!Nr.boxSizingReliable()||r,o=n&&k.css(t,"boxSizing",!1,i)==="border-box",a=o,s=Hh(t,e,i),l="offset"+e[0].toUpperCase()+e.slice(1);if(sS.test(s)){if(!r)return s;s="auto"}return(!Nr.boxSizingReliable()&&o||!Nr.reliableTrDimensions()&&Ca(t,"tr")||s==="auto"||!parseFloat(s)&&k.css(t,"display",!1,i)==="inline")&&t.getClientRects().length&&(o=k.css(t,"boxSizing",!1,i)==="border-box",a=l in t,a&&(s=t[l])),s=parseFloat(s)||0,s+QC(t,e,r||(o?"border":"content"),a,i,s)+"px"}function No(t,e,r,i,n){return new No.prototype.init(t,e,r,i,n)}function ZC(){zy&&(pr.hidden===!1&&window.requestAnimationFrame?window.requestAnimationFrame(ZC):window.setTimeout(ZC,k.fx.interval),k.fx.tick())}function NM(){return window.setTimeout(function(){pu=void 0}),pu=Date.now()}function Ky(t,e){var r,i=0,n={height:t};for(e=e?1:0;i<4;i+=2-e)r=vl[i],n["margin"+r]=n["padding"+r]=t;return e&&(n.opacity=n.width=t),n}function uT(t,e,r){for(var i,n=(Ya.tweeners[e]||[]).concat(Ya.tweeners["*"]),o=0,a=n.length;o<a;o++)if(i=n[o].call(r,e,t))return i}function LF(t,e,r){var i,n,o,a,s,l,c,u,h="width"in e||"height"in e,p=this,g={},y=t.style,w=t.nodeType&&jy(t),b=Dt.get(t,"fxshow");r.queue||(a=k._queueHooks(t,"fx"),a.unqueued==null&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,k.queue(t,"fx").length||a.empty.fire()})}));for(i in e)if(n=e[i],AF.test(n)){if(delete e[i],o=o||n==="toggle",n===(w?"hide":"show"))if(n==="show"&&b&&b[i]!==void 0)w=!0;else continue;g[i]=b&&b[i]||k.style(t,i)}if(l=!k.isEmptyObject(e),!(!l&&k.isEmptyObject(g))){h&&t.nodeType===1&&(r.overflow=[y.overflow,y.overflowX,y.overflowY],c=b&&b.display,c==null&&(c=Dt.get(t,"display")),u=k.css(t,"display"),u==="none"&&(c?u=c:(lu([t],!0),c=t.style.display||c,u=k.css(t,"display"),lu([t]))),(u==="inline"||u==="inline-block"&&c!=null)&&k.css(t,"float")==="none"&&(l||(p.done(function(){y.display=c}),c==null&&(u=y.display,c=u==="none"?"":u)),y.display="inline-block")),r.overflow&&(y.overflow="hidden",p.always(function(){y.overflow=r.overflow[0],y.overflowX=r.overflow[1],y.overflowY=r.overflow[2]})),l=!1;for(i in g)l||(b?"hidden"in b&&(w=b.hidden):b=Dt.access(t,"fxshow",{display:c}),o&&(b.hidden=!w),w&&lu([t],!0),p.done(function(){w||lu([t]),Dt.remove(t,"fxshow");for(i in g)k.style(t,i,g[i])})),l=uT(w?b[i]:0,i,p),i in b||(b[i]=l.start,w&&(l.end=l.start,l.start=0))}}function PF(t,e){var r,i,n,o,a;for(r in t)if(i=Fs(r),n=e[i],o=t[r],Array.isArray(o)&&(n=o[1],o=t[r]=o[0]),r!==i&&(t[i]=o,delete t[r]),a=k.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete t[i];for(r in o)r in t||(t[r]=o[r],e[r]=n)}else e[i]=n}function Ya(t,e,r){var i,n,o=0,a=Ya.prefilters.length,s=k.Deferred().always(function(){delete l.elem}),l=function(){if(n)return!1;for(var h=pu||NM(),p=Math.max(0,c.startTime+c.duration-h),g=p/c.duration||0,y=1-g,w=0,b=c.tweens.length;w<b;w++)c.tweens[w].run(y);return s.notifyWith(t,[c,y,p]),y<1&&b?p:(b||s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:k.extend({},e),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},r),originalProperties:e,originalOptions:r,startTime:pu||NM(),duration:r.duration,tweens:[],createTween:function(h,p){var g=k.Tween(t,c.opts,h,p,c.opts.specialEasing[h]||c.opts.easing);return c.tweens.push(g),g},stop:function(h){var p=0,g=h?c.tweens.length:0;if(n)return this;for(n=!0;p<g;p++)c.tweens[p].run(1);return h?(s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c,h])):s.rejectWith(t,[c,h]),this}}),u=c.props;for(PF(u,c.opts.specialEasing);o<a;o++)if(i=Ya.prefilters[o].call(c,t,u,c.opts),i)return Yt(i.stop)&&(k._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return k.map(u,uT,c),Yt(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),k.fx.timer(k.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}function td(t){var e=t.match(Rs)||[];return e.join(" ")}function ed(t){return t.getAttribute&&t.getAttribute("class")||""}function WC(t){return Array.isArray(t)?t:typeof t=="string"?t.match(Rs)||[]:[]}function tS(t,e,r,i){var n;if(Array.isArray(e))k.each(e,function(o,a){r||RF.test(t)?i(t,a):tS(t+"["+(typeof a=="object"&&a!=null?o:"")+"]",a,r,i)});else if(!r&&hu(e)==="object")for(n in e)tS(t+"["+n+"]",e[n],r,i);else i(t,e)}function $M(t){return function(e,r){typeof e!="string"&&(r=e,e="*");var i,n=0,o=e.toLowerCase().match(Rs)||[];if(Yt(r))for(;i=o[n++];)i[0]==="+"?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(r)):(t[i]=t[i]||[]).push(r)}}function zM(t,e,r,i){var n={},o=t===rS;function a(s){var l;return n[s]=!0,k.each(t[s]||[],function(c,u){var h=u(e,r,i);if(typeof h=="string"&&!o&&!n[h])return e.dataTypes.unshift(h),a(h),!1;if(o)return!(l=h)}),l}return a(e.dataTypes[0])||!n["*"]&&a("*")}function jC(t,e){var r,i,n=k.ajaxSettings.flatOptions||{};for(r in e)e[r]!==void 0&&((n[r]?t:i||(i={}))[r]=e[r]);return i&&k.extend(!0,t,i),t}function jF(t,e,r){for(var i,n,o,a,s=t.contents,l=t.dataTypes;l[0]==="*";)l.shift(),i===void 0&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i){for(n in s)if(s[n]&&s[n].test(i)){l.unshift(n);break}}if(l[0]in r)o=l[0];else{for(n in r){if(!l[0]||t.converters[n+" "+l[0]]){o=n;break}a||(a=n)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),r[o]}function YF(t,e,r,i){var n,o,a,s,l,c={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=u.shift();o;)if(t.responseFields[o]&&(r[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift(),o){if(o==="*")o=l;else if(l!=="*"&&l!==o){if(a=c[l+" "+o]||c["* "+o],!a){for(n in c)if(s=n.split(" "),s[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]],a)){a===!0?a=c[n]:c[n]!==!0&&(o=s[0],u.unshift(s[1]));break}}if(a!==!0)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(h){return{state:"parsererror",error:a?h:"No conversion from "+l+" to "+o}}}}return{state:"success",data:e}}var Cl,WM,hc,jM,nS,Uy,Wy,YM,qy,JM,rF,Nr,Yt,uu,pr,iF,QM,k,id,ou,DM,ZM,eT,tT,nF,oF,aF,sF,Rs,cF,oS,Sl,dF,uF,qh,Dt,Bo,hF,gF,rT,Wh,vl,rd,gu,mF,jy,TM,Uh,nT,oT,va,bF,GM,vF,CF,SF,sS,Yy,sT,IF,PM,cT,OM,TF,_M,GF,FM,pu,zy,AF,VF,pT,Bh,OF,_F,FF,BM,KM,Kh,hT,eS,RF,UM,NF,BF,KF,UF,qF,HF,$F,zF,WF,qM,rS,HM,iS,JF,$h,gT,YC,XF,QF,ZF,V,at=__dcg_shared_module_exports__['f'](()=>{HC();Cl=[],WM=Object.getPrototypeOf,hc=Cl.slice,jM=Cl.flat?function(t){return Cl.flat.call(t)}:function(t){return Cl.concat.apply([],t)},nS=Cl.push,Uy=Cl.indexOf,Wy={},YM=Wy.toString,qy=Wy.hasOwnProperty,JM=qy.toString,rF=JM.call(Object),Nr={},Yt=function(e){return typeof e=="function"&&typeof e.nodeType!="number"&&typeof e.item!="function"},uu=function(e){return e!=null&&e===e.window},pr=window.document,iF={type:!0,src:!0,nonce:!0,noModule:!0};QM="3.6.0",k=function(t,e){return new k.fn.init(t,e)};k.fn=k.prototype={jquery:QM,constructor:k,length:0,toArray:function(){return hc.call(this)},get:function(t){return t==null?hc.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=k.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return k.each(this,t)},map:function(t){return this.pushStack(k.map(this,function(e,r){return t.call(e,r,e)}))},slice:function(){return this.pushStack(hc.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(k.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(k.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,r=+t+(t<0?e:0);return this.pushStack(r>=0&&r<e?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:nS,sort:Cl.sort,splice:Cl.splice};k.extend=k.fn.extend=function(){var t,e,r,i,n,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[s]||{},s++),typeof a!="object"&&!Yt(a)&&(a={}),s===l&&(a=this,s--);s<l;s++)if((t=arguments[s])!=null)for(e in t)i=t[e],!(e==="__proto__"||a===i)&&(c&&i&&(k.isPlainObject(i)||(n=Array.isArray(i)))?(r=a[e],n&&!Array.isArray(r)?o=[]:!n&&!k.isPlainObject(r)?o={}:o=r,n=!1,a[e]=k.extend(c,o,i)):i!==void 0&&(a[e]=i));return a};k.extend({expando:"jQuery"+(QM+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,r;return!t||YM.call(t)!=="[object Object]"?!1:(e=WM(t),e?(r=qy.call(e,"constructor")&&e.constructor,typeof r=="function"&&JM.call(r)===rF):!0)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,r){XM(t,{nonce:e&&e.nonce},r)},each:function(t,e){var r,i=0;if($C(t))for(r=t.length;i<r&&e.call(t[i],i,t[i])!==!1;i++);else for(i in t)if(e.call(t[i],i,t[i])===!1)break;return t},makeArray:function(t,e){var r=e||[];return t!=null&&($C(Object(t))?k.merge(r,typeof t=="string"?[t]:t):nS.call(r,t)),r},inArray:function(t,e,r){return e==null?-1:Uy.call(e,t,r)},merge:function(t,e){for(var r=+e.length,i=0,n=t.length;i<r;i++)t[n++]=e[i];return t.length=n,t},grep:function(t,e,r){for(var i,n=[],o=0,a=t.length,s=!r;o<a;o++)i=!e(t[o],o),i!==s&&n.push(t[o]);return n},map:function(t,e,r){var i,n,o=0,a=[];if($C(t))for(i=t.length;o<i;o++)n=e(t[o],o,r),n!=null&&a.push(n);else for(o in t)n=e(t[o],o,r),n!=null&&a.push(n);return jM(a)},guid:1,support:Nr});typeof Symbol=="function"&&(k.fn[Symbol.iterator]=Cl[Symbol.iterator]);k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){Wy["[object "+e+"]"]=e.toLowerCase()});id=function(t){var e,r,i,n,o,a,s,l,c,u,h,p,g,y,w,b,D,I,E,G="sizzle"+1*new Date,T=t.document,P=0,_=0,x=ar(),L=ar(),R=ar(),q=ar(),K=function(O,z){return O===z&&(h=!0),0},Y={}.hasOwnProperty,N=[],j=N.pop,B=N.push,A=N.push,$=N.slice,J=function(O,z){for(var Z=0,pe=O.length;Z<pe;Z++)if(O[Z]===z)return Z;return-1},ue="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",te="[\\x20\\t\\r\\n\\f]",Ae="(?:\\\\[\\da-fA-F]{1,6}"+te+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Se="\\["+te+"*("+Ae+")(?:"+te+"*([*^$|!~]?=)"+te+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Ae+"))|)"+te+"*\\]",ce=":("+Ae+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Se+")*)|.*)\\)|)",Ee=new RegExp(te+"+","g"),H=new RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g"),he=new RegExp("^"+te+"*,"+te+"*"),De=new RegExp("^"+te+"*([>+~]|"+te+")"+te+"*"),_e=new RegExp(te+"|>"),Me=new RegExp(ce),He=new RegExp("^"+Ae+"$"),Ze={ID:new RegExp("^#("+Ae+")"),CLASS:new RegExp("^\\.("+Ae+")"),TAG:new RegExp("^("+Ae+"|[*])"),ATTR:new RegExp("^"+Se),PSEUDO:new RegExp("^"+ce),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),bool:new RegExp("^(?:"+ue+")$","i"),needsContext:new RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},_t=/HTML$/i,Re=/^(?:input|select|textarea|button)$/i,Tt=/^h\d$/i,dr=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_r=/[+~]/,rt=new RegExp("\\\\[\\da-fA-F]{1,6}"+te+"?|\\\\([^\\r\\n\\f])","g"),xe=function(O,z){var Z="0x"+O.slice(1)-65536;return z||(Z<0?String.fromCharCode(Z+65536):String.fromCharCode(Z>>10|55296,Z&1023|56320))},dn=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Je=function(O,z){return z?O==="\0"?"\uFFFD":O.slice(0,-1)+"\\"+O.charCodeAt(O.length-1).toString(16)+" ":"\\"+O},ot=function(){p()},st=Fr(function(O){return O.disabled===!0&&O.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{A.apply(N=$.call(T.childNodes),T.childNodes),N[T.childNodes.length].nodeType}catch(O){A={apply:N.length?function(z,Z){B.apply(z,$.call(Z))}:function(z,Z){for(var pe=z.length,ee=0;z[pe++]=Z[ee++];);z.length=pe-1}}}function ae(O,z,Z,pe){var ee,de,ye,Pe,Oe,ft,et,ct=z&&z.ownerDocument,bt=z?z.nodeType:9;if(Z=Z||[],typeof O!="string"||!O||bt!==1&&bt!==9&&bt!==11)return Z;if(!pe&&(p(z),z=z||g,w)){if(bt!==11&&(Oe=ve.exec(O)))if(ee=Oe[1]){if(bt===9)if(ye=z.getElementById(ee)){if(ye.id===ee)return Z.push(ye),Z}else return Z;else if(ct&&(ye=ct.getElementById(ee))&&E(z,ye)&&ye.id===ee)return Z.push(ye),Z}else{if(Oe[2])return A.apply(Z,z.getElementsByTagName(O)),Z;if((ee=Oe[3])&&r.getElementsByClassName&&z.getElementsByClassName)return A.apply(Z,z.getElementsByClassName(ee)),Z}if(r.qsa&&!q[O+" "]&&(!b||!b.test(O))&&(bt!==1||z.nodeName.toLowerCase()!=="object")){if(et=O,ct=z,bt===1&&(_e.test(O)||De.test(O))){for(ct=_r.test(O)&&Oo(z.parentNode)||z,(ct!==z||!r.scope)&&((Pe=z.getAttribute("id"))?Pe=Pe.replace(dn,Je):z.setAttribute("id",Pe=G)),ft=a(O),de=ft.length;de--;)ft[de]=(Pe?"#"+Pe:":scope")+" "+sr(ft[de]);et=ft.join(",")}try{return A.apply(Z,ct.querySelectorAll(et)),Z}catch(Ht){q(O,!0)}finally{Pe===G&&z.removeAttribute("id")}}}return l(O.replace(H,"$1"),z,Z,pe)}function ar(){var O=[];function z(Z,pe){return O.push(Z+" ")>i.cacheLength&&delete z[O.shift()],z[Z+" "]=pe}return z}function Te(O){return O[G]=!0,O}function Nt(O){var z=g.createElement("fieldset");try{return!!O(z)}catch(Z){return!1}finally{z.parentNode&&z.parentNode.removeChild(z),z=null}}function me(O,z){for(var Z=O.split("|"),pe=Z.length;pe--;)i.attrHandle[Z[pe]]=z}function gt(O,z){var Z=z&&O,pe=Z&&O.nodeType===1&&z.nodeType===1&&O.sourceIndex-z.sourceIndex;if(pe)return pe;if(Z){for(;Z=Z.nextSibling;)if(Z===z)return-1}return O?1:-1}function xt(O){return function(z){var Z=z.nodeName.toLowerCase();return Z==="input"&&z.type===O}}function Ce(O){return function(z){var Z=z.nodeName.toLowerCase();return(Z==="input"||Z==="button")&&z.type===O}}function Mr(O){return function(z){return"form"in z?z.parentNode&&z.disabled===!1?"label"in z?"label"in z.parentNode?z.parentNode.disabled===O:z.disabled===O:z.isDisabled===O||z.isDisabled!==!O&&st(z)===O:z.disabled===O:"label"in z?z.disabled===O:!1}}function $e(O){return Te(function(z){return z=+z,Te(function(Z,pe){for(var ee,de=O([],Z.length,z),ye=de.length;ye--;)Z[ee=de[ye]]&&(Z[ee]=!(pe[ee]=Z[ee]))})})}function Oo(O){return O&&typeof O.getElementsByTagName!="undefined"&&O}r=ae.support={},o=ae.isXML=function(O){var z=O&&O.namespaceURI,Z=O&&(O.ownerDocument||O).documentElement;return!_t.test(z||Z&&Z.nodeName||"HTML")},p=ae.setDocument=function(O){var z,Z,pe=O?O.ownerDocument||O:T;return pe==g||pe.nodeType!==9||!pe.documentElement||(g=pe,y=g.documentElement,w=!o(g),T!=g&&(Z=g.defaultView)&&Z.top!==Z&&(Z.addEventListener?Z.addEventListener("unload",ot,!1):Z.attachEvent&&Z.attachEvent("onunload",ot)),r.scope=Nt(function(ee){return y.appendChild(ee).appendChild(g.createElement("div")),typeof ee.querySelectorAll!="undefined"&&!ee.querySelectorAll(":scope fieldset div").length}),r.attributes=Nt(function(ee){return ee.className="i",!ee.getAttribute("className")}),r.getElementsByTagName=Nt(function(ee){return ee.appendChild(g.createComment("")),!ee.getElementsByTagName("*").length}),r.getElementsByClassName=dr.test(g.getElementsByClassName),r.getById=Nt(function(ee){return y.appendChild(ee).id=G,!g.getElementsByName||!g.getElementsByName(G).length}),r.getById?(i.filter.ID=function(ee){var de=ee.replace(rt,xe);return function(ye){return ye.getAttribute("id")===de}},i.find.ID=function(ee,de){if(typeof de.getElementById!="undefined"&&w){var ye=de.getElementById(ee);return ye?[ye]:[]}}):(i.filter.ID=function(ee){var de=ee.replace(rt,xe);return function(ye){var Pe=typeof ye.getAttributeNode!="undefined"&&ye.getAttributeNode("id");return Pe&&Pe.value===de}},i.find.ID=function(ee,de){if(typeof de.getElementById!="undefined"&&w){var ye,Pe,Oe,ft=de.getElementById(ee);if(ft){if(ye=ft.getAttributeNode("id"),ye&&ye.value===ee)return[ft];for(Oe=de.getElementsByName(ee),Pe=0;ft=Oe[Pe++];)if(ye=ft.getAttributeNode("id"),ye&&ye.value===ee)return[ft]}return[]}}),i.find.TAG=r.getElementsByTagName?function(ee,de){if(typeof de.getElementsByTagName!="undefined")return de.getElementsByTagName(ee);if(r.qsa)return de.querySelectorAll(ee)}:function(ee,de){var ye,Pe=[],Oe=0,ft=de.getElementsByTagName(ee);if(ee==="*"){for(;ye=ft[Oe++];)ye.nodeType===1&&Pe.push(ye);return Pe}return ft},i.find.CLASS=r.getElementsByClassName&&function(ee,de){if(typeof de.getElementsByClassName!="undefined"&&w)return de.getElementsByClassName(ee)},D=[],b=[],(r.qsa=dr.test(g.querySelectorAll))&&(Nt(function(ee){var de;y.appendChild(ee).innerHTML="<a id='"+G+"'></a><select id='"+G+"-\r\\' msallowcapture=''><option selected=''></option></select>",ee.querySelectorAll("[msallowcapture^='']").length&&b.push("[*^$]="+te+`*(?:''|"")`),ee.querySelectorAll("[selected]").length||b.push("\\["+te+"*(?:value|"+ue+")"),ee.querySelectorAll("[id~="+G+"-]").length||b.push("~="),de=g.createElement("input"),de.setAttribute("name",""),ee.appendChild(de),ee.querySelectorAll("[name='']").length||b.push("\\["+te+"*name"+te+"*="+te+`*(?:''|"")`),ee.querySelectorAll(":checked").length||b.push(":checked"),ee.querySelectorAll("a#"+G+"+*").length||b.push(".#.+[+~]"),ee.querySelectorAll("\\\f"),b.push("[\\r\\n\\f]")}),Nt(function(ee){ee.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var de=g.createElement("input");de.setAttribute("type","hidden"),ee.appendChild(de).setAttribute("name","D"),ee.querySelectorAll("[name=d]").length&&b.push("name"+te+"*[*^$|!~]?="),ee.querySelectorAll(":enabled").length!==2&&b.push(":enabled",":disabled"),y.appendChild(ee).disabled=!0,ee.querySelectorAll(":disabled").length!==2&&b.push(":enabled",":disabled"),ee.querySelectorAll("*,:x"),b.push(",.*:")})),(r.matchesSelector=dr.test(I=y.matches||y.webkitMatchesSelector||y.mozMatchesSelector||y.oMatchesSelector||y.msMatchesSelector))&&Nt(function(ee){r.disconnectedMatch=I.call(ee,"*"),I.call(ee,"[s!='']:x"),D.push("!=",ce)}),b=b.length&&new RegExp(b.join("|")),D=D.length&&new RegExp(D.join("|")),z=dr.test(y.compareDocumentPosition),E=z||dr.test(y.contains)?function(ee,de){var ye=ee.nodeType===9?ee.documentElement:ee,Pe=de&&de.parentNode;return ee===Pe||!!(Pe&&Pe.nodeType===1&&(ye.contains?ye.contains(Pe):ee.compareDocumentPosition&&ee.compareDocumentPosition(Pe)&16))}:function(ee,de){if(de){for(;de=de.parentNode;)if(de===ee)return!0}return!1},K=z?function(ee,de){if(ee===de)return h=!0,0;var ye=!ee.compareDocumentPosition-!de.compareDocumentPosition;return ye||(ye=(ee.ownerDocument||ee)==(de.ownerDocument||de)?ee.compareDocumentPosition(de):1,ye&1||!r.sortDetached&&de.compareDocumentPosition(ee)===ye?ee==g||ee.ownerDocument==T&&E(T,ee)?-1:de==g||de.ownerDocument==T&&E(T,de)?1:u?J(u,ee)-J(u,de):0:ye&4?-1:1)}:function(ee,de){if(ee===de)return h=!0,0;var ye,Pe=0,Oe=ee.parentNode,ft=de.parentNode,et=[ee],ct=[de];if(!Oe||!ft)return ee==g?-1:de==g?1:Oe?-1:ft?1:u?J(u,ee)-J(u,de):0;if(Oe===ft)return gt(ee,de);for(ye=ee;ye=ye.parentNode;)et.unshift(ye);for(ye=de;ye=ye.parentNode;)ct.unshift(ye);for(;et[Pe]===ct[Pe];)Pe++;return Pe?gt(et[Pe],ct[Pe]):et[Pe]==T?-1:ct[Pe]==T?1:0}),g},ae.matches=function(O,z){return ae(O,null,null,z)},ae.matchesSelector=function(O,z){if(p(O),r.matchesSelector&&w&&!q[z+" "]&&(!D||!D.test(z))&&(!b||!b.test(z)))try{var Z=I.call(O,z);if(Z||r.disconnectedMatch||O.document&&O.document.nodeType!==11)return Z}catch(pe){q(z,!0)}return ae(z,g,null,[O]).length>0},ae.contains=function(O,z){return(O.ownerDocument||O)!=g&&p(O),E(O,z)},ae.attr=function(O,z){(O.ownerDocument||O)!=g&&p(O);var Z=i.attrHandle[z.toLowerCase()],pe=Z&&Y.call(i.attrHandle,z.toLowerCase())?Z(O,z,!w):void 0;return pe!==void 0?pe:r.attributes||!w?O.getAttribute(z):(pe=O.getAttributeNode(z))&&pe.specified?pe.value:null},ae.escape=function(O){return(O+"").replace(dn,Je)},ae.error=function(O){throw new Error("Syntax error, unrecognized expression: "+O)},ae.uniqueSort=function(O){var z,Z=[],pe=0,ee=0;if(h=!r.detectDuplicates,u=!r.sortStable&&O.slice(0),O.sort(K),h){for(;z=O[ee++];)z===O[ee]&&(pe=Z.push(ee));for(;pe--;)O.splice(Z[pe],1)}return u=null,O},n=ae.getText=function(O){var z,Z="",pe=0,ee=O.nodeType;if(ee){if(ee===1||ee===9||ee===11){if(typeof O.textContent=="string")return O.textContent;for(O=O.firstChild;O;O=O.nextSibling)Z+=n(O)}else if(ee===3||ee===4)return O.nodeValue}else for(;z=O[pe++];)Z+=n(z);return Z},i=ae.selectors={cacheLength:50,createPseudo:Te,match:Ze,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(O){return O[1]=O[1].replace(rt,xe),O[3]=(O[3]||O[4]||O[5]||"").replace(rt,xe),O[2]==="~="&&(O[3]=" "+O[3]+" "),O.slice(0,4)},CHILD:function(O){return O[1]=O[1].toLowerCase(),O[1].slice(0,3)==="nth"?(O[3]||ae.error(O[0]),O[4]=+(O[4]?O[5]+(O[6]||1):2*(O[3]==="even"||O[3]==="odd")),O[5]=+(O[7]+O[8]||O[3]==="odd")):O[3]&&ae.error(O[0]),O},PSEUDO:function(O){var z,Z=!O[6]&&O[2];return Ze.CHILD.test(O[0])?null:(O[3]?O[2]=O[4]||O[5]||"":Z&&Me.test(Z)&&(z=a(Z,!0))&&(z=Z.indexOf(")",Z.length-z)-Z.length)&&(O[0]=O[0].slice(0,z),O[2]=Z.slice(0,z)),O.slice(0,3))}},filter:{TAG:function(O){var z=O.replace(rt,xe).toLowerCase();return O==="*"?function(){return!0}:function(Z){return Z.nodeName&&Z.nodeName.toLowerCase()===z}},CLASS:function(O){var z=x[O+" "];return z||(z=new RegExp("(^|"+te+")"+O+"("+te+"|$)"))&&x(O,function(Z){return z.test(typeof Z.className=="string"&&Z.className||typeof Z.getAttribute!="undefined"&&Z.getAttribute("class")||"")})},ATTR:function(O,z,Z){return function(pe){var ee=ae.attr(pe,O);return ee==null?z==="!=":z?(ee+="",z==="="?ee===Z:z==="!="?ee!==Z:z==="^="?Z&&ee.indexOf(Z)===0:z==="*="?Z&&ee.indexOf(Z)>-1:z==="$="?Z&&ee.slice(-Z.length)===Z:z==="~="?(" "+ee.replace(Ee," ")+" ").indexOf(Z)>-1:z==="|="?ee===Z||ee.slice(0,Z.length+1)===Z+"-":!1):!0}},CHILD:function(O,z,Z,pe,ee){var de=O.slice(0,3)!=="nth",ye=O.slice(-4)!=="last",Pe=z==="of-type";return pe===1&&ee===0?function(Oe){return!!Oe.parentNode}:function(Oe,ft,et){var ct,bt,Ht,pt,ni,Bi,Rr=de!==ye?"nextSibling":"previousSibling",oi=Oe.parentNode,ac=Pe&&Oe.nodeName.toLowerCase(),Hc=!et&&!Pe,io=!1;if(oi){if(de){for(;Rr;){for(pt=Oe;pt=pt[Rr];)if(Pe?pt.nodeName.toLowerCase()===ac:pt.nodeType===1)return!1;Bi=Rr=O==="only"&&!Bi&&"nextSibling"}return!0}if(Bi=[ye?oi.firstChild:oi.lastChild],ye&&Hc){for(pt=oi,Ht=pt[G]||(pt[G]={}),bt=Ht[pt.uniqueID]||(Ht[pt.uniqueID]={}),ct=bt[O]||[],ni=ct[0]===P&&ct[1],io=ni&&ct[2],pt=ni&&oi.childNodes[ni];pt=++ni&&pt&&pt[Rr]||(io=ni=0)||Bi.pop();)if(pt.nodeType===1&&++io&&pt===Oe){bt[O]=[P,ni,io];break}}else if(Hc&&(pt=Oe,Ht=pt[G]||(pt[G]={}),bt=Ht[pt.uniqueID]||(Ht[pt.uniqueID]={}),ct=bt[O]||[],ni=ct[0]===P&&ct[1],io=ni),io===!1)for(;(pt=++ni&&pt&&pt[Rr]||(io=ni=0)||Bi.pop())&&!((Pe?pt.nodeName.toLowerCase()===ac:pt.nodeType===1)&&++io&&(Hc&&(Ht=pt[G]||(pt[G]={}),bt=Ht[pt.uniqueID]||(Ht[pt.uniqueID]={}),bt[O]=[P,io]),pt===Oe)););return io-=ee,io===pe||io%pe===0&&io/pe>=0}}},PSEUDO:function(O,z){var Z,pe=i.pseudos[O]||i.setFilters[O.toLowerCase()]||ae.error("unsupported pseudo: "+O);return pe[G]?pe(z):pe.length>1?(Z=[O,O,"",z],i.setFilters.hasOwnProperty(O.toLowerCase())?Te(function(ee,de){for(var ye,Pe=pe(ee,z),Oe=Pe.length;Oe--;)ye=J(ee,Pe[Oe]),ee[ye]=!(de[ye]=Pe[Oe])}):function(ee){return pe(ee,0,Z)}):pe}},pseudos:{not:Te(function(O){var z=[],Z=[],pe=s(O.replace(H,"$1"));return pe[G]?Te(function(ee,de,ye,Pe){for(var Oe,ft=pe(ee,null,Pe,[]),et=ee.length;et--;)(Oe=ft[et])&&(ee[et]=!(de[et]=Oe))}):function(ee,de,ye){return z[0]=ee,pe(z,null,ye,Z),z[0]=null,!Z.pop()}}),has:Te(function(O){return function(z){return ae(O,z).length>0}}),contains:Te(function(O){return O=O.replace(rt,xe),function(z){return(z.textContent||n(z)).indexOf(O)>-1}}),lang:Te(function(O){return He.test(O||"")||ae.error("unsupported lang: "+O),O=O.replace(rt,xe).toLowerCase(),function(z){var Z;do if(Z=w?z.lang:z.getAttribute("xml:lang")||z.getAttribute("lang"))return Z=Z.toLowerCase(),Z===O||Z.indexOf(O+"-")===0;while((z=z.parentNode)&&z.nodeType===1);return!1}}),target:function(O){var z=t.location&&t.location.hash;return z&&z.slice(1)===O.id},root:function(O){return O===y},focus:function(O){return O===g.activeElement&&(!g.hasFocus||g.hasFocus())&&!!(O.type||O.href||~O.tabIndex)},enabled:Mr(!1),disabled:Mr(!0),checked:function(O){var z=O.nodeName.toLowerCase();return z==="input"&&!!O.checked||z==="option"&&!!O.selected},selected:function(O){return O.parentNode&&O.parentNode.selectedIndex,O.selected===!0},empty:function(O){for(O=O.firstChild;O;O=O.nextSibling)if(O.nodeType<6)return!1;return!0},parent:function(O){return!i.pseudos.empty(O)},header:function(O){return Tt.test(O.nodeName)},input:function(O){return Re.test(O.nodeName)},button:function(O){var z=O.nodeName.toLowerCase();return z==="input"&&O.type==="button"||z==="button"},text:function(O){var z;return O.nodeName.toLowerCase()==="input"&&O.type==="text"&&((z=O.getAttribute("type"))==null||z.toLowerCase()==="text")},first:$e(function(){return[0]}),last:$e(function(O,z){return[z-1]}),eq:$e(function(O,z,Z){return[Z<0?Z+z:Z]}),even:$e(function(O,z){for(var Z=0;Z<z;Z+=2)O.push(Z);return O}),odd:$e(function(O,z){for(var Z=1;Z<z;Z+=2)O.push(Z);return O}),lt:$e(function(O,z,Z){for(var pe=Z<0?Z+z:Z>z?z:Z;--pe>=0;)O.push(pe);return O}),gt:$e(function(O,z,Z){for(var pe=Z<0?Z+z:Z;++pe<z;)O.push(pe);return O})}},i.pseudos.nth=i.pseudos.eq;for(e in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=xt(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=Ce(e);function vt(){}vt.prototype=i.filters=i.pseudos,i.setFilters=new vt,a=ae.tokenize=function(O,z){var Z,pe,ee,de,ye,Pe,Oe,ft=L[O+" "];if(ft)return z?0:ft.slice(0);for(ye=O,Pe=[],Oe=i.preFilter;ye;){(!Z||(pe=he.exec(ye)))&&(pe&&(ye=ye.slice(pe[0].length)||ye),Pe.push(ee=[])),Z=!1,(pe=De.exec(ye))&&(Z=pe.shift(),ee.push({value:Z,type:pe[0].replace(H," ")}),ye=ye.slice(Z.length));for(de in i.filter)(pe=Ze[de].exec(ye))&&(!Oe[de]||(pe=Oe[de](pe)))&&(Z=pe.shift(),ee.push({value:Z,type:de,matches:pe}),ye=ye.slice(Z.length));if(!Z)break}return z?ye.length:ye?ae.error(O):L(O,Pe).slice(0)};function sr(O){for(var z=0,Z=O.length,pe="";z<Z;z++)pe+=O[z].value;return pe}function Fr(O,z,Z){var pe=z.dir,ee=z.next,de=ee||pe,ye=Z&&de==="parentNode",Pe=_++;return z.first?function(Oe,ft,et){for(;Oe=Oe[pe];)if(Oe.nodeType===1||ye)return O(Oe,ft,et);return!1}:function(Oe,ft,et){var ct,bt,Ht,pt=[P,Pe];if(et){for(;Oe=Oe[pe];)if((Oe.nodeType===1||ye)&&O(Oe,ft,et))return!0}else for(;Oe=Oe[pe];)if(Oe.nodeType===1||ye)if(Ht=Oe[G]||(Oe[G]={}),bt=Ht[Oe.uniqueID]||(Ht[Oe.uniqueID]={}),ee&&ee===Oe.nodeName.toLowerCase())Oe=Oe[pe]||Oe;else{if((ct=bt[de])&&ct[0]===P&&ct[1]===Pe)return pt[2]=ct[2];if(bt[de]=pt,pt[2]=O(Oe,ft,et))return!0}return!1}}function xi(O){return O.length>1?function(z,Z,pe){for(var ee=O.length;ee--;)if(!O[ee](z,Z,pe))return!1;return!0}:O[0]}function Ha(O,z,Z){for(var pe=0,ee=z.length;pe<ee;pe++)ae(O,z[pe],Z);return Z}function un(O,z,Z,pe,ee){for(var de,ye=[],Pe=0,Oe=O.length,ft=z!=null;Pe<Oe;Pe++)(de=O[Pe])&&(!Z||Z(de,pe,ee))&&(ye.push(de),ft&&z.push(Pe));return ye}function Xi(O,z,Z,pe,ee,de){return pe&&!pe[G]&&(pe=Xi(pe)),ee&&!ee[G]&&(ee=Xi(ee,de)),Te(function(ye,Pe,Oe,ft){var et,ct,bt,Ht=[],pt=[],ni=Pe.length,Bi=ye||Ha(z||"*",Oe.nodeType?[Oe]:Oe,[]),Rr=O&&(ye||!z)?un(Bi,Ht,O,Oe,ft):Bi,oi=Z?ee||(ye?O:ni||pe)?[]:Pe:Rr;if(Z&&Z(Rr,oi,Oe,ft),pe)for(et=un(oi,pt),pe(et,[],Oe,ft),ct=et.length;ct--;)(bt=et[ct])&&(oi[pt[ct]]=!(Rr[pt[ct]]=bt));if(ye){if(ee||O){if(ee){for(et=[],ct=oi.length;ct--;)(bt=oi[ct])&&et.push(Rr[ct]=bt);ee(null,oi=[],et,ft)}for(ct=oi.length;ct--;)(bt=oi[ct])&&(et=ee?J(ye,bt):Ht[ct])>-1&&(ye[et]=!(Pe[et]=bt))}}else oi=un(oi===Pe?oi.splice(ni,oi.length):oi),ee?ee(null,Pe,oi,ft):A.apply(Pe,oi)})}function Ut(O){for(var z,Z,pe,ee=O.length,de=i.relative[O[0].type],ye=de||i.relative[" "],Pe=de?1:0,Oe=Fr(function(ct){return ct===z},ye,!0),ft=Fr(function(ct){return J(z,ct)>-1},ye,!0),et=[function(ct,bt,Ht){var pt=!de&&(Ht||bt!==c)||((z=bt).nodeType?Oe(ct,bt,Ht):ft(ct,bt,Ht));return z=null,pt}];Pe<ee;Pe++)if(Z=i.relative[O[Pe].type])et=[Fr(xi(et),Z)];else{if(Z=i.filter[O[Pe].type].apply(null,O[Pe].matches),Z[G]){for(pe=++Pe;pe<ee&&!i.relative[O[pe].type];pe++);return Xi(Pe>1&&xi(et),Pe>1&&sr(O.slice(0,Pe-1).concat({value:O[Pe-2].type===" "?"*":""})).replace(H,"$1"),Z,Pe<pe&&Ut(O.slice(Pe,pe)),pe<ee&&Ut(O=O.slice(pe)),pe<ee&&sr(O))}et.push(Z)}return xi(et)}function ii(O,z){var Z=z.length>0,pe=O.length>0,ee=function(de,ye,Pe,Oe,ft){var et,ct,bt,Ht=0,pt="0",ni=de&&[],Bi=[],Rr=c,oi=de||pe&&i.find.TAG("*",ft),ac=P+=Rr==null?1:Math.random()||.1,Hc=oi.length;for(ft&&(c=ye==g||ye||ft);pt!==Hc&&(et=oi[pt])!=null;pt++){if(pe&&et){for(ct=0,!ye&&et.ownerDocument!=g&&(p(et),Pe=!w);bt=O[ct++];)if(bt(et,ye||g,Pe)){Oe.push(et);break}ft&&(P=ac)}Z&&((et=!bt&&et)&&Ht--,de&&ni.push(et))}if(Ht+=pt,Z&&pt!==Ht){for(ct=0;bt=z[ct++];)bt(ni,Bi,ye,Pe);if(de){if(Ht>0)for(;pt--;)ni[pt]||Bi[pt]||(Bi[pt]=j.call(Oe));Bi=un(Bi)}A.apply(Oe,Bi),ft&&!de&&Bi.length>0&&Ht+z.length>1&&ae.uniqueSort(Oe)}return ft&&(P=ac,c=Rr),ni};return Z?Te(ee):ee}return s=ae.compile=function(O,z){var Z,pe=[],ee=[],de=R[O+" "];if(!de){for(z||(z=a(O)),Z=z.length;Z--;)de=Ut(z[Z]),de[G]?pe.push(de):ee.push(de);de=R(O,ii(ee,pe)),de.selector=O}return de},l=ae.select=function(O,z,Z,pe){var ee,de,ye,Pe,Oe,ft=typeof O=="function"&&O,et=!pe&&a(O=ft.selector||O);if(Z=Z||[],et.length===1){if(de=et[0]=et[0].slice(0),de.length>2&&(ye=de[0]).type==="ID"&&z.nodeType===9&&w&&i.relative[de[1].type]){if(z=(i.find.ID(ye.matches[0].replace(rt,xe),z)||[])[0],z)ft&&(z=z.parentNode);else return Z;O=O.slice(de.shift().value.length)}for(ee=Ze.needsContext.test(O)?0:de.length;ee--&&(ye=de[ee],!i.relative[Pe=ye.type]);)if((Oe=i.find[Pe])&&(pe=Oe(ye.matches[0].replace(rt,xe),_r.test(de[0].type)&&Oo(z.parentNode)||z))){if(de.splice(ee,1),O=pe.length&&sr(de),!O)return A.apply(Z,pe),Z;break}}return(ft||s(O,et))(pe,z,!w,Z,!z||_r.test(O)&&Oo(z.parentNode)||z),Z},r.sortStable=G.split("").sort(K).join("")===G,r.detectDuplicates=!!h,p(),r.sortDetached=Nt(function(O){return O.compareDocumentPosition(g.createElement("fieldset"))&1}),Nt(function(O){return O.innerHTML="<a href='#'></a>",O.firstChild.getAttribute("href")==="#"})||me("type|href|height|width",function(O,z,Z){if(!Z)return O.getAttribute(z,z.toLowerCase()==="type"?1:2)}),(!r.attributes||!Nt(function(O){return O.innerHTML="<input/>",O.firstChild.setAttribute("value",""),O.firstChild.getAttribute("value")===""}))&&me("value",function(O,z,Z){if(!Z&&O.nodeName.toLowerCase()==="input")return O.defaultValue}),Nt(function(O){return O.getAttribute("disabled")==null})||me(ue,function(O,z,Z){var pe;if(!Z)return O[z]===!0?z.toLowerCase():(pe=O.getAttributeNode(z))&&pe.specified?pe.value:null}),ae}(window);k.find=id;k.expr=id.selectors;k.expr[":"]=k.expr.pseudos;k.uniqueSort=k.unique=id.uniqueSort;k.text=id.getText;k.isXMLDoc=id.isXML;k.contains=id.contains;k.escapeSelector=id.escape;ou=function(t,e,r){for(var i=[],n=r!==void 0;(t=t[e])&&t.nodeType!==9;)if(t.nodeType===1){if(n&&k(t).is(r))break;i.push(t)}return i},DM=function(t,e){for(var r=[];t;t=t.nextSibling)t.nodeType===1&&t!==e&&r.push(t);return r},ZM=k.expr.match.needsContext;eT=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;k.filter=function(t,e,r){var i=e[0];return r&&(t=":not("+t+")"),e.length===1&&i.nodeType===1?k.find.matchesSelector(i,t)?[i]:[]:k.find.matches(t,k.grep(e,function(n){return n.nodeType===1}))};k.fn.extend({find:function(t){var e,r,i=this.length,n=this;if(typeof t!="string")return this.pushStack(k(t).filter(function(){for(e=0;e<i;e++)if(k.contains(n[e],this))return!0}));for(r=this.pushStack([]),e=0;e<i;e++)k.find(t,n[e],r);return i>1?k.uniqueSort(r):r},filter:function(t){return this.pushStack(zC(this,t||[],!1))},not:function(t){return this.pushStack(zC(this,t||[],!0))},is:function(t){return!!zC(this,typeof t=="string"&&ZM.test(t)?k(t):t||[],!1).length}});nF=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,oF=k.fn.init=function(t,e,r){var i,n;if(!t)return this;if(r=r||tT,typeof t=="string")if(t[0]==="<"&&t[t.length-1]===">"&&t.length>=3?i=[null,t,null]:i=nF.exec(t),i&&(i[1]||!e))if(i[1]){if(e=e instanceof k?e[0]:e,k.merge(this,k.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:pr,!0)),eT.test(i[1])&&k.isPlainObject(e))for(i in e)Yt(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}else return n=pr.getElementById(i[2]),n&&(this[0]=n,this.length=1),this;else return!e||e.jquery?(e||r).find(t):this.constructor(e).find(t);else{if(t.nodeType)return this[0]=t,this.length=1,this;if(Yt(t))return r.ready!==void 0?r.ready(t):t(k)}return k.makeArray(t,this)};oF.prototype=k.fn;tT=k(pr);aF=/^(?:parents|prev(?:Until|All))/,sF={children:!0,contents:!0,next:!0,prev:!0};k.fn.extend({has:function(t){var e=k(t,this),r=e.length;return this.filter(function(){for(var i=0;i<r;i++)if(k.contains(this,e[i]))return!0})},closest:function(t,e){var r,i=0,n=this.length,o=[],a=typeof t!="string"&&k(t);if(!ZM.test(t)){for(;i<n;i++)for(r=this[i];r&&r!==e;r=r.parentNode)if(r.nodeType<11&&(a?a.index(r)>-1:r.nodeType===1&&k.find.matchesSelector(r,t))){o.push(r);break}}return this.pushStack(o.length>1?k.uniqueSort(o):o)},index:function(t){return t?typeof t=="string"?Uy.call(k(t),this[0]):Uy.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(t,e))))},addBack:function(t){return this.add(t==null?this.prevObject:this.prevObject.filter(t))}});k.each({parent:function(t){var e=t.parentNode;return e&&e.nodeType!==11?e:null},parents:function(t){return ou(t,"parentNode")},parentsUntil:function(t,e,r){return ou(t,"parentNode",r)},next:function(t){return kM(t,"nextSibling")},prev:function(t){return kM(t,"previousSibling")},nextAll:function(t){return ou(t,"nextSibling")},prevAll:function(t){return ou(t,"previousSibling")},nextUntil:function(t,e,r){return ou(t,"nextSibling",r)},prevUntil:function(t,e,r){return ou(t,"previousSibling",r)},siblings:function(t){return DM((t.parentNode||{}).firstChild,t)},children:function(t){return DM(t.firstChild)},contents:function(t){return t.contentDocument!=null&&WM(t.contentDocument)?t.contentDocument:(Ca(t,"template")&&(t=t.content||t),k.merge([],t.childNodes))}},function(t,e){k.fn[t]=function(r,i){var n=k.map(this,e,r);return t.slice(-5)!=="Until"&&(i=r),i&&typeof i=="string"&&(n=k.filter(i,n)),this.length>1&&(sF[t]||k.uniqueSort(n),aF.test(t)&&n.reverse()),this.pushStack(n)}});Rs=/[^\x20\t\r\n\f]+/g;k.Callbacks=function(t){t=typeof t=="string"?lF(t):k.extend({},t);var e,r,i,n,o=[],a=[],s=-1,l=function(){for(n=n||t.once,i=e=!0;a.length;s=-1)for(r=a.shift();++s<o.length;)o[s].apply(r[0],r[1])===!1&&t.stopOnFalse&&(s=o.length,r=!1);t.memory||(r=!1),e=!1,n&&(r?o=[]:o="")},c={add:function(){return o&&(r&&!e&&(s=o.length-1,a.push(r)),function u(h){k.each(h,function(p,g){Yt(g)?(!t.unique||!c.has(g))&&o.push(g):g&&g.length&&hu(g)!=="string"&&u(g)})}(arguments),r&&!e&&l()),this},remove:function(){return k.each(arguments,function(u,h){for(var p;(p=k.inArray(h,o,p))>-1;)o.splice(p,1),p<=s&&s--}),this},has:function(u){return u?k.inArray(u,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return n=a=[],o=r="",this},disabled:function(){return!o},lock:function(){return n=a=[],!r&&!e&&(o=r=""),this},locked:function(){return!!n},fireWith:function(u,h){return n||(h=h||[],h=[u,h.slice?h.slice():h],a.push(h),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c};k.extend({Deferred:function(t){var e=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return n.done(arguments).fail(arguments),this},catch:function(o){return i.then(null,o)},pipe:function(){var o=arguments;return k.Deferred(function(a){k.each(e,function(s,l){var c=Yt(o[l[4]])&&o[l[4]];n[l[1]](function(){var u=c&&c.apply(this,arguments);u&&Yt(u.promise)?u.promise().progress(a.notify).done(a.resolve).fail(a.reject):a[l[0]+"With"](this,c?[u]:arguments)})}),o=null}).promise()},then:function(o,a,s){var l=0;function c(u,h,p,g){return function(){var y=this,w=arguments,b=function(){var I,E;if(!(u<l)){if(I=p.apply(y,w),I===h.promise())throw new TypeError("Thenable self-resolution");E=I&&(typeof I=="object"||typeof I=="function")&&I.then,Yt(E)?g?E.call(I,c(l,h,au,g),c(l,h,By,g)):(l++,E.call(I,c(l,h,au,g),c(l,h,By,g),c(l,h,au,h.notifyWith))):(p!==au&&(y=void 0,w=[I]),(g||h.resolveWith)(y,w))}},D=g?b:function(){try{b()}catch(I){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(I,D.stackTrace),u+1>=l&&(p!==By&&(y=void 0,w=[I]),h.rejectWith(y,w))}};u?D():(k.Deferred.getStackHook&&(D.stackTrace=k.Deferred.getStackHook()),window.setTimeout(D))}}return k.Deferred(function(u){e[0][3].add(c(0,u,Yt(s)?s:au,u.notifyWith)),e[1][3].add(c(0,u,Yt(o)?o:au)),e[2][3].add(c(0,u,Yt(a)?a:By))}).promise()},promise:function(o){return o!=null?k.extend(o,i):i}},n={};return k.each(e,function(o,a){var s=a[2],l=a[5];i[a[1]]=s.add,l&&s.add(function(){r=l},e[3-o][2].disable,e[3-o][3].disable,e[0][2].lock,e[0][3].lock),s.add(a[3].fire),n[a[0]]=function(){return n[a[0]+"With"](this===n?void 0:this,arguments),this},n[a[0]+"With"]=s.fireWith}),i.promise(n),t&&t.call(n,n),n},when:function(t){var e=arguments.length,r=e,i=Array(r),n=hc.call(arguments),o=k.Deferred(),a=function(s){return function(l){i[s]=this,n[s]=arguments.length>1?hc.call(arguments):l,--e||o.resolveWith(i,n)}};if(e<=1&&(IM(t,o.done(a(r)).resolve,o.reject,!e),o.state()==="pending"||Yt(n[r]&&n[r].then)))return o.then();for(;r--;)IM(n[r],a(r),o.reject);return o.promise()}});cF=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(t,e){window.console&&window.console.warn&&t&&cF.test(t.name)&&window.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)};k.readyException=function(t){window.setTimeout(function(){throw t})};oS=k.Deferred();k.fn.ready=function(t){return oS.then(t).catch(function(e){k.readyException(e)}),this};k.extend({isReady:!1,readyWait:1,ready:function(t){(t===!0?--k.readyWait:k.isReady)||(k.isReady=!0,!(t!==!0&&--k.readyWait>0)&&oS.resolveWith(pr,[k]))}});k.ready.then=oS.then;pr.readyState==="complete"||pr.readyState!=="loading"&&!pr.documentElement.doScroll?window.setTimeout(k.ready):(pr.addEventListener("DOMContentLoaded",Hy),window.addEventListener("load",Hy));Sl=function(t,e,r,i,n,o,a){var s=0,l=t.length,c=r==null;if(hu(r)==="object"){n=!0;for(s in r)Sl(t,e,s,r[s],!0,o,a)}else if(i!==void 0&&(n=!0,Yt(i)||(a=!0),c&&(a?(e.call(t,i),e=null):(c=e,e=function(u,h,p){return c.call(k(u),p)})),e))for(;s<l;s++)e(t[s],r,a?i:i.call(t[s],s,e(t[s],r)));return n?t:c?e.call(t):l?e(t[0],r):o},dF=/^-ms-/,uF=/-([a-z])/g;qh=function(t){return t.nodeType===1||t.nodeType===9||!+t.nodeType};zh.uid=1;zh.prototype={cache:function(t){var e=t[this.expando];return e||(e={},qh(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,r){var i,n=this.cache(t);if(typeof e=="string")n[Fs(e)]=r;else for(i in e)n[Fs(i)]=e[i];return n},get:function(t,e){return e===void 0?this.cache(t):t[this.expando]&&t[this.expando][Fs(e)]},access:function(t,e,r){return e===void 0||e&&typeof e=="string"&&r===void 0?this.get(t,e):(this.set(t,e,r),r!==void 0?r:e)},remove:function(t,e){var r,i=t[this.expando];if(i!==void 0){if(e!==void 0)for(Array.isArray(e)?e=e.map(Fs):(e=Fs(e),e=e in i?[e]:e.match(Rs)||[]),r=e.length;r--;)delete i[e[r]];(e===void 0||k.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return e!==void 0&&!k.isEmptyObject(e)}};Dt=new zh,Bo=new zh,hF=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,gF=/[A-Z]/g;k.extend({hasData:function(t){return Bo.hasData(t)||Dt.hasData(t)},data:function(t,e,r){return Bo.access(t,e,r)},removeData:function(t,e){Bo.remove(t,e)},_data:function(t,e,r){return Dt.access(t,e,r)},_removeData:function(t,e){Dt.remove(t,e)}});k.fn.extend({data:function(t,e){var r,i,n,o=this[0],a=o&&o.attributes;if(t===void 0){if(this.length&&(n=Bo.get(o),o.nodeType===1&&!Dt.get(o,"hasDataAttrs"))){for(r=a.length;r--;)a[r]&&(i=a[r].name,i.indexOf("data-")===0&&(i=Fs(i.slice(5)),MM(o,i,n[i])));Dt.set(o,"hasDataAttrs",!0)}return n}return typeof t=="object"?this.each(function(){Bo.set(this,t)}):Sl(this,function(s){var l;if(o&&s===void 0)return l=Bo.get(o,t),l!==void 0||(l=MM(o,t),l!==void 0)?l:void 0;this.each(function(){Bo.set(this,t,s)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Bo.remove(this,t)})}});k.extend({queue:function(t,e,r){var i;if(t)return e=(e||"fx")+"queue",i=Dt.get(t,e),r&&(!i||Array.isArray(r)?i=Dt.access(t,e,k.makeArray(r)):i.push(r)),i||[]},dequeue:function(t,e){e=e||"fx";var r=k.queue(t,e),i=r.length,n=r.shift(),o=k._queueHooks(t,e),a=function(){k.dequeue(t,e)};n==="inprogress"&&(n=r.shift(),i--),n&&(e==="fx"&&r.unshift("inprogress"),delete o.stop,n.call(t,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var r=e+"queueHooks";return Dt.get(t,r)||Dt.access(t,r,{empty:k.Callbacks("once memory").add(function(){Dt.remove(t,[e+"queue",r])})})}});k.fn.extend({queue:function(t,e){var r=2;return typeof t!="string"&&(e=t,t="fx",r--),arguments.length<r?k.queue(this[0],t):e===void 0?this:this.each(function(){var i=k.queue(this,t,e);k._queueHooks(this,t),t==="fx"&&i[0]!=="inprogress"&&k.dequeue(this,t)})},dequeue:function(t){return this.each(function(){k.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var r,i=1,n=k.Deferred(),o=this,a=this.length,s=function(){--i||n.resolveWith(o,[o])};for(typeof t!="string"&&(e=t,t=void 0),t=t||"fx";a--;)r=Dt.get(o[a],t+"queueHooks"),r&&r.empty&&(i++,r.empty.add(s));return s(),n.promise(e)}});rT=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Wh=new RegExp("^(?:([+-])=|)("+rT+")([a-z%]*)$","i"),vl=["Top","Right","Bottom","Left"],rd=pr.documentElement,gu=function(t){return k.contains(t.ownerDocument,t)},mF={composed:!0};rd.getRootNode&&(gu=function(t){return k.contains(t.ownerDocument,t)||t.getRootNode(mF)===t.ownerDocument});jy=function(t,e){return t=e||t,t.style.display==="none"||t.style.display===""&&gu(t)&&k.css(t,"display")==="none"};TM={};k.fn.extend({show:function(){return lu(this,!0)},hide:function(){return lu(this)},toggle:function(t){return typeof t=="boolean"?t?this.show():this.hide():this.each(function(){jy(this)?k(this).show():k(this).hide()})}});Uh=/^(?:checkbox|radio)$/i,nT=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,oT=/^$|^module$|\/(?:java|ecma)script/i;(function(){var t=pr.createDocumentFragment(),e=t.appendChild(pr.createElement("div")),r=pr.createElement("input");r.setAttribute("type","radio"),r.setAttribute("checked","checked"),r.setAttribute("name","t"),e.appendChild(r),Nr.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",Nr.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",Nr.option=!!e.lastChild})();va={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};va.tbody=va.tfoot=va.colgroup=va.caption=va.thead;va.th=va.td;Nr.option||(va.optgroup=va.option=[1,"<select multiple='multiple'>","</select>"]);bF=/<|&#?\w+;/;GM=/^([^.]*)(?:\.(.+)|)/;k.event={global:{},add:function(t,e,r,i,n){var o,a,s,l,c,u,h,p,g,y,w,b=Dt.get(t);if(qh(t))for(r.handler&&(o=r,r=o.handler,n=o.selector),n&&k.find.matchesSelector(rd,n),r.guid||(r.guid=k.guid++),(l=b.events)||(l=b.events=Object.create(null)),(a=b.handle)||(a=b.handle=function(D){return typeof k!="undefined"&&k.event.triggered!==D.type?k.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Rs)||[""],c=e.length;c--;)s=GM.exec(e[c])||[],g=w=s[1],y=(s[2]||"").split(".").sort(),g&&(h=k.event.special[g]||{},g=(n?h.delegateType:h.bindType)||g,h=k.event.special[g]||{},u=k.extend({type:g,origType:w,data:i,handler:r,guid:r.guid,selector:n,needsContext:n&&k.expr.match.needsContext.test(n),namespace:y.join(".")},o),(p=l[g])||(p=l[g]=[],p.delegateCount=0,(!h.setup||h.setup.call(t,i,y,a)===!1)&&t.addEventListener&&t.addEventListener(g,a)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=r.guid)),n?p.splice(p.delegateCount++,0,u):p.push(u),k.event.global[g]=!0)},remove:function(t,e,r,i,n){var o,a,s,l,c,u,h,p,g,y,w,b=Dt.hasData(t)&&Dt.get(t);if(!(!b||!(l=b.events))){for(e=(e||"").match(Rs)||[""],c=e.length;c--;){if(s=GM.exec(e[c])||[],g=w=s[1],y=(s[2]||"").split(".").sort(),!g){for(g in l)k.event.remove(t,g+e[c],r,i,!0);continue}for(h=k.event.special[g]||{},g=(i?h.delegateType:h.bindType)||g,p=l[g]||[],s=s[2]&&new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)u=p[o],(n||w===u.origType)&&(!r||r.guid===u.guid)&&(!s||s.test(u.namespace))&&(!i||i===u.selector||i==="**"&&u.selector)&&(p.splice(o,1),u.selector&&p.delegateCount--,h.remove&&h.remove.call(t,u));a&&!p.length&&((!h.teardown||h.teardown.call(t,y,b.handle)===!1)&&k.removeEvent(t,g,b.handle),delete l[g])}k.isEmptyObject(l)&&Dt.remove(t,"handle events")}},dispatch:function(t){var e,r,i,n,o,a,s=new Array(arguments.length),l=k.event.fix(t),c=(Dt.get(this,"events")||Object.create(null))[l.type]||[],u=k.event.special[l.type]||{};for(s[0]=l,e=1;e<arguments.length;e++)s[e]=arguments[e];if(l.delegateTarget=this,!(u.preDispatch&&u.preDispatch.call(this,l)===!1)){for(a=k.event.handlers.call(this,l,c),e=0;(n=a[e++])&&!l.isPropagationStopped();)for(l.currentTarget=n.elem,r=0;(o=n.handlers[r++])&&!l.isImmediatePropagationStopped();)(!l.rnamespace||o.namespace===!1||l.rnamespace.test(o.namespace))&&(l.handleObj=o,l.data=o.data,i=((k.event.special[o.origType]||{}).handle||o.handler).apply(n.elem,s),i!==void 0&&(l.result=i)===!1&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(t,e){var r,i,n,o,a,s=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!(t.type==="click"&&t.button>=1)){for(;c!==this;c=c.parentNode||this)if(c.nodeType===1&&!(t.type==="click"&&c.disabled===!0)){for(o=[],a={},r=0;r<l;r++)i=e[r],n=i.selector+" ",a[n]===void 0&&(a[n]=i.needsContext?k(n,this).index(c)>-1:k.find(n,this,null,[c]).length),a[n]&&o.push(i);o.length&&s.push({elem:c,handlers:o})}}return c=this,l<e.length&&s.push({elem:c,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(k.Event.prototype,t,{enumerable:!0,configurable:!0,get:Yt(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(r){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:r})}})},fix:function(t){return t[k.expando]?t:new k.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return Uh.test(e.type)&&e.click&&Ca(e,"input")&&$y(e,"click",cu),!1},trigger:function(t){var e=this||t;return Uh.test(e.type)&&e.click&&Ca(e,"input")&&$y(e,"click"),!0},_default:function(t){var e=t.target;return Uh.test(e.type)&&e.click&&Ca(e,"input")&&Dt.get(e,"click")||Ca(e,"a")}},beforeunload:{postDispatch:function(t){t.result!==void 0&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}};k.removeEvent=function(t,e,r){t.removeEventListener&&t.removeEventListener(e,r)};k.Event=function(t,e){if(!(this instanceof k.Event))return new k.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===void 0&&t.returnValue===!1?cu:du,this.target=t.target&&t.target.nodeType===3?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&k.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[k.expando]=!0};k.Event.prototype={constructor:k.Event,isDefaultPrevented:du,isPropagationStopped:du,isImmediatePropagationStopped:du,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=cu,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=cu,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=cu,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}};k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},k.event.addProp);k.each({focus:"focusin",blur:"focusout"},function(t,e){k.event.special[t]={setup:function(){return $y(this,t,xF),!1},trigger:function(){return $y(this,t),!0},_default:function(){return!0},delegateType:e}});k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){k.event.special[t]={delegateType:e,bindType:e,handle:function(r){var i,n=this,o=r.relatedTarget,a=r.handleObj;return(!o||o!==n&&!k.contains(n,o))&&(r.type=a.origType,i=a.handler.apply(this,arguments),r.type=e),i}}});k.fn.extend({on:function(t,e,r,i){return JC(this,t,e,r,i)},one:function(t,e,r,i){return JC(this,t,e,r,i,1)},off:function(t,e,r){var i,n;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,k(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof t=="object"){for(n in t)this.off(n,e,t[n]);return this}return(e===!1||typeof e=="function")&&(r=e,e=void 0),r===!1&&(r=du),this.each(function(){k.event.remove(this,t,r,e)})}});vF=/<script|<style|<link/i,CF=/checked\s*(?:[^=]|=\s*.checked.)/i,SF=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;k.extend({htmlPrefilter:function(t){return t},clone:function(t,e,r){var i,n,o,a,s=t.cloneNode(!0),l=gu(t);if(!Nr.noCloneChecked&&(t.nodeType===1||t.nodeType===11)&&!k.isXMLDoc(t))for(a=Ro(s),o=Ro(t),i=0,n=o.length;i<n;i++)kF(o[i],a[i]);if(e)if(r)for(o=o||Ro(t),a=a||Ro(s),i=0,n=o.length;i<n;i++)VM(o[i],a[i]);else VM(t,s);return a=Ro(s,"script"),a.length>0&&aS(a,!l&&Ro(t,"script")),s},cleanData:function(t){for(var e,r,i,n=k.event.special,o=0;(r=t[o])!==void 0;o++)if(qh(r)){if(e=r[Dt.expando]){if(e.events)for(i in e.events)n[i]?k.event.remove(r,i):k.removeEvent(r,i,e.handle);r[Dt.expando]=void 0}r[Bo.expando]&&(r[Bo.expando]=void 0)}}});k.fn.extend({detach:function(t){return LM(this,t,!0)},remove:function(t){return LM(this,t)},text:function(t){return Sl(this,function(e){return e===void 0?k.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=e)})},null,t,arguments.length)},append:function(){return su(this,arguments,function(t){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var e=AM(this,t);e.appendChild(t)}})},prepend:function(){return su(this,arguments,function(t){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var e=AM(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return su(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return su(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;(t=this[e])!=null;e++)t.nodeType===1&&(k.cleanData(Ro(t,!1)),t.textContent="");return this},clone:function(t,e){return t=t==null?!1:t,e=e==null?t:e,this.map(function(){return k.clone(this,t,e)})},html:function(t){return Sl(this,function(e){var r=this[0]||{},i=0,n=this.length;if(e===void 0&&r.nodeType===1)return r.innerHTML;if(typeof e=="string"&&!vF.test(e)&&!va[(nT.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;i<n;i++)r=this[i]||{},r.nodeType===1&&(k.cleanData(Ro(r,!1)),r.innerHTML=e);r=0}catch(o){}}r&&this.empty().append(e)},null,t,arguments.length)},replaceWith:function(){var t=[];return su(this,arguments,function(e){var r=this.parentNode;k.inArray(this,t)<0&&(k.cleanData(Ro(this)),r&&r.replaceChild(e,this))},t)}});k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){k.fn[t]=function(r){for(var i,n=[],o=k(r),a=o.length-1,s=0;s<=a;s++)i=s===a?this:this.clone(!0),k(o[s])[e](i),nS.apply(n,i.get());return this.pushStack(n)}});sS=new RegExp("^("+rT+")(?!px)[a-z%]+$","i"),Yy=function(t){var e=t.ownerDocument.defaultView;return(!e||!e.opener)&&(e=window),e.getComputedStyle(t)},sT=function(t,e,r){var i,n,o={};for(n in e)o[n]=t.style[n],t.style[n]=e[n];i=r.call(t);for(n in e)t.style[n]=o[n];return i},IF=new RegExp(vl.join("|"),"i");(function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",rd.appendChild(l).appendChild(c);var u=window.getComputedStyle(c);r=u.top!=="1%",s=e(u.marginLeft)===12,c.style.right="60%",o=e(u.right)===36,i=e(u.width)===36,c.style.position="absolute",n=e(c.offsetWidth/3)===12,rd.removeChild(l),c=null}}function e(u){return Math.round(parseFloat(u))}var r,i,n,o,a,s,l=pr.createElement("div"),c=pr.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",Nr.clearCloneStyle=c.style.backgroundClip==="content-box",k.extend(Nr,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),s},scrollboxSize:function(){return t(),n},reliableTrDimensions:function(){var u,h,p,g;return a==null&&(u=pr.createElement("table"),h=pr.createElement("tr"),p=pr.createElement("div"),u.style.cssText="position:absolute;left:-11111px;border-collapse:separate",h.style.cssText="border:1px solid",h.style.height="1px",p.style.height="9px",p.style.display="block",rd.appendChild(u).appendChild(h).appendChild(p),g=window.getComputedStyle(h),a=parseInt(g.height,10)+parseInt(g.borderTopWidth,10)+parseInt(g.borderBottomWidth,10)===h.offsetHeight,rd.removeChild(u)),a}}))})();PM=["Webkit","Moz","ms"],cT=pr.createElement("div").style,OM={};TF=/^(none|table(?!-c[ea]).+)/,_M=/^--/,GF={position:"absolute",visibility:"hidden",display:"block"},FM={letterSpacing:"0",fontWeight:"400"};k.extend({cssHooks:{opacity:{get:function(t,e){if(e){var r=Hh(t,"opacity");return r===""?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,r,i){if(!(!t||t.nodeType===3||t.nodeType===8||!t.style)){var n,o,a,s=Fs(e),l=_M.test(e),c=t.style;if(l||(e=XC(s)),a=k.cssHooks[e]||k.cssHooks[s],r!==void 0){if(o=typeof r,o==="string"&&(n=Wh.exec(r))&&n[1]&&(r=iT(t,e,n),o="number"),r==null||r!==r)return;o==="number"&&!l&&(r+=n&&n[3]||(k.cssNumber[s]?"":"px")),!Nr.clearCloneStyle&&r===""&&e.indexOf("background")===0&&(c[e]="inherit"),(!a||!("set"in a)||(r=a.set(t,r,i))!==void 0)&&(l?c.setProperty(e,r):c[e]=r)}else return a&&"get"in a&&(n=a.get(t,!1,i))!==void 0?n:c[e]}},css:function(t,e,r,i){var n,o,a,s=Fs(e),l=_M.test(e);return l||(e=XC(s)),a=k.cssHooks[e]||k.cssHooks[s],a&&"get"in a&&(n=a.get(t,!0,r)),n===void 0&&(n=Hh(t,e,i)),n==="normal"&&e in FM&&(n=FM[e]),r===""||r?(o=parseFloat(n),r===!0||isFinite(o)?o||0:n):n}});k.each(["height","width"],function(t,e){k.cssHooks[e]={get:function(r,i,n){if(i)return TF.test(k.css(r,"display"))&&(!r.getClientRects().length||!r.getBoundingClientRect().width)?sT(r,GF,function(){return RM(r,e,n)}):RM(r,e,n)},set:function(r,i,n){var o,a=Yy(r),s=!Nr.scrollboxSize()&&a.position==="absolute",l=s||n,c=l&&k.css(r,"boxSizing",!1,a)==="border-box",u=n?QC(r,e,n,c,a):0;return c&&s&&(u-=Math.ceil(r["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(a[e])-QC(r,e,"border",!1,a)-.5)),u&&(o=Wh.exec(i))&&(o[3]||"px")!=="px"&&(r.style[e]=i,i=k.css(r,e)),dT(r,i,u)}}});k.cssHooks.marginLeft=lT(Nr.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Hh(t,"marginLeft"))||t.getBoundingClientRect().left-sT(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"});k.each({margin:"",padding:"",border:"Width"},function(t,e){k.cssHooks[t+e]={expand:function(r){for(var i=0,n={},o=typeof r=="string"?r.split(" "):[r];i<4;i++)n[t+vl[i]+e]=o[i]||o[i-2]||o[0];return n}},t!=="margin"&&(k.cssHooks[t+e].set=dT)});k.fn.extend({css:function(t,e){return Sl(this,function(r,i,n){var o,a,s={},l=0;if(Array.isArray(i)){for(o=Yy(r),a=i.length;l<a;l++)s[i[l]]=k.css(r,i[l],!1,o);return s}return n!==void 0?k.style(r,i,n):k.css(r,i)},t,e,arguments.length>1)}});k.Tween=No;No.prototype={constructor:No,init:function(t,e,r,i,n,o){this.elem=t,this.prop=r,this.easing=n||k.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(k.cssNumber[r]?"":"px")},cur:function(){var t=No.propHooks[this.prop];return t&&t.get?t.get(this):No.propHooks._default.get(this)},run:function(t){var e,r=No.propHooks[this.prop];return this.options.duration?this.pos=e=k.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):No.propHooks._default.set(this),this}};No.prototype.init.prototype=No.prototype;No.propHooks={_default:{get:function(t){var e;return t.elem.nodeType!==1||t.elem[t.prop]!=null&&t.elem.style[t.prop]==null?t.elem[t.prop]:(e=k.css(t.elem,t.prop,""),!e||e==="auto"?0:e)},set:function(t){k.fx.step[t.prop]?k.fx.step[t.prop](t):t.elem.nodeType===1&&(k.cssHooks[t.prop]||t.elem.style[XC(t.prop)]!=null)?k.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}};No.propHooks.scrollTop=No.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}};k.easing={linear:function(t){return t},swing:function(t){return .5-Math.cos(t*Math.PI)/2},_default:"swing"};k.fx=No.prototype.init;k.fx.step={};AF=/^(?:toggle|show|hide)$/,VF=/queueHooks$/;k.Animation=k.extend(Ya,{tweeners:{"*":[function(t,e){var r=this.createTween(t,e);return iT(r.elem,t,Wh.exec(e),r),r}]},tweener:function(t,e){Yt(t)?(e=t,t=["*"]):t=t.match(Rs);for(var r,i=0,n=t.length;i<n;i++)r=t[i],Ya.tweeners[r]=Ya.tweeners[r]||[],Ya.tweeners[r].unshift(e)},prefilters:[LF],prefilter:function(t,e){e?Ya.prefilters.unshift(t):Ya.prefilters.push(t)}});k.speed=function(t,e,r){var i=t&&typeof t=="object"?k.extend({},t):{complete:r||!r&&e||Yt(t)&&t,duration:t,easing:r&&e||e&&!Yt(e)&&e};return k.fx.off?i.duration=0:typeof i.duration!="number"&&(i.duration in k.fx.speeds?i.duration=k.fx.speeds[i.duration]:i.duration=k.fx.speeds._default),(i.queue==null||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){Yt(i.old)&&i.old.call(this),i.queue&&k.dequeue(this,i.queue)},i};k.fn.extend({fadeTo:function(t,e,r,i){return this.filter(jy).css("opacity",0).show().end().animate({opacity:e},t,r,i)},animate:function(t,e,r,i){var n=k.isEmptyObject(t),o=k.speed(e,r,i),a=function(){var s=Ya(this,k.extend({},t),o);(n||Dt.get(this,"finish"))&&s.stop(!0)};return a.finish=a,n||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,r){var i=function(n){var o=n.stop;delete n.stop,o(r)};return typeof t!="string"&&(r=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each(function(){var n=!0,o=t!=null&&t+"queueHooks",a=k.timers,s=Dt.get(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&VF.test(o)&&i(s[o]);for(o=a.length;o--;)a[o].elem===this&&(t==null||a[o].queue===t)&&(a[o].anim.stop(r),n=!1,a.splice(o,1));(n||!r)&&k.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,r=Dt.get(this),i=r[t+"queue"],n=r[t+"queueHooks"],o=k.timers,a=i?i.length:0;for(r.finish=!0,k.queue(this,t,[]),n&&n.stop&&n.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete r.finish})}});k.each(["toggle","show","hide"],function(t,e){var r=k.fn[e];k.fn[e]=function(i,n,o){return i==null||typeof i=="boolean"?r.apply(this,arguments):this.animate(Ky(e,!0),i,n,o)}});k.each({slideDown:Ky("show"),slideUp:Ky("hide"),slideToggle:Ky("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){k.fn[t]=function(r,i,n){return this.animate(e,r,i,n)}});k.timers=[];k.fx.tick=function(){var t,e=0,r=k.timers;for(pu=Date.now();e<r.length;e++)t=r[e],!t()&&r[e]===t&&r.splice(e--,1);r.length||k.fx.stop(),pu=void 0};k.fx.timer=function(t){k.timers.push(t),k.fx.start()};k.fx.interval=13;k.fx.start=function(){zy||(zy=!0,ZC())};k.fx.stop=function(){zy=null};k.fx.speeds={slow:600,fast:200,_default:400};k.fn.delay=function(t,e){return t=k.fx&&k.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(r,i){var n=window.setTimeout(r,t);i.stop=function(){window.clearTimeout(n)}})};(function(){var t=pr.createElement("input"),e=pr.createElement("select"),r=e.appendChild(pr.createElement("option"));t.type="checkbox",Nr.checkOn=t.value!=="",Nr.optSelected=r.selected,t=pr.createElement("input"),t.value="t",t.type="radio",Nr.radioValue=t.value==="t"})();Bh=k.expr.attrHandle;k.fn.extend({attr:function(t,e){return Sl(this,k.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){k.removeAttr(this,t)})}});k.extend({attr:function(t,e,r){var i,n,o=t.nodeType;if(!(o===3||o===8||o===2)){if(typeof t.getAttribute=="undefined")return k.prop(t,e,r);if((o!==1||!k.isXMLDoc(t))&&(n=k.attrHooks[e.toLowerCase()]||(k.expr.match.bool.test(e)?pT:void 0)),r!==void 0){if(r===null){k.removeAttr(t,e);return}return n&&"set"in n&&(i=n.set(t,r,e))!==void 0?i:(t.setAttribute(e,r+""),r)}return n&&"get"in n&&(i=n.get(t,e))!==null?i:(i=k.find.attr(t,e),i==null?void 0:i)}},attrHooks:{type:{set:function(t,e){if(!Nr.radioValue&&e==="radio"&&Ca(t,"input")){var r=t.value;return t.setAttribute("type",e),r&&(t.value=r),e}}}},removeAttr:function(t,e){var r,i=0,n=e&&e.match(Rs);if(n&&t.nodeType===1)for(;r=n[i++];)t.removeAttribute(r)}});pT={set:function(t,e,r){return e===!1?k.removeAttr(t,r):t.setAttribute(r,r),r}};k.each(k.expr.match.bool.source.match(/\w+/g),function(t,e){var r=Bh[e]||k.find.attr;Bh[e]=function(i,n,o){var a,s,l=n.toLowerCase();return o||(s=Bh[l],Bh[l]=a,a=r(i,n,o)!=null?l:null,Bh[l]=s),a}});OF=/^(?:input|select|textarea|button)$/i,_F=/^(?:a|area)$/i;k.fn.extend({prop:function(t,e){return Sl(this,k.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[k.propFix[t]||t]})}});k.extend({prop:function(t,e,r){var i,n,o=t.nodeType;if(!(o===3||o===8||o===2))return(o!==1||!k.isXMLDoc(t))&&(e=k.propFix[e]||e,n=k.propHooks[e]),r!==void 0?n&&"set"in n&&(i=n.set(t,r,e))!==void 0?i:t[e]=r:n&&"get"in n&&(i=n.get(t,e))!==null?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=k.find.attr(t,"tabindex");return e?parseInt(e,10):OF.test(t.nodeName)||_F.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}});Nr.optSelected||(k.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}});k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this});k.fn.extend({addClass:function(t){var e,r,i,n,o,a,s,l=0;if(Yt(t))return this.each(function(c){k(this).addClass(t.call(this,c,ed(this)))});if(e=WC(t),e.length){for(;r=this[l++];)if(n=ed(r),i=r.nodeType===1&&" "+td(n)+" ",i){for(a=0;o=e[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=td(i),n!==s&&r.setAttribute("class",s)}}return this},removeClass:function(t){var e,r,i,n,o,a,s,l=0;if(Yt(t))return this.each(function(c){k(this).removeClass(t.call(this,c,ed(this)))});if(!arguments.length)return this.attr("class","");if(e=WC(t),e.length){for(;r=this[l++];)if(n=ed(r),i=r.nodeType===1&&" "+td(n)+" ",i){for(a=0;o=e[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");s=td(i),n!==s&&r.setAttribute("class",s)}}return this},toggleClass:function(t,e){var r=typeof t,i=r==="string"||Array.isArray(t);return typeof e=="boolean"&&i?e?this.addClass(t):this.removeClass(t):Yt(t)?this.each(function(n){k(this).toggleClass(t.call(this,n,ed(this),e),e)}):this.each(function(){var n,o,a,s;if(i)for(o=0,a=k(this),s=WC(t);n=s[o++];)a.hasClass(n)?a.removeClass(n):a.addClass(n);else(t===void 0||r==="boolean")&&(n=ed(this),n&&Dt.set(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||t===!1?"":Dt.get(this,"__className__")||""))})},hasClass:function(t){var e,r,i=0;for(e=" "+t+" ";r=this[i++];)if(r.nodeType===1&&(" "+td(ed(r))+" ").indexOf(e)>-1)return!0;return!1}});FF=/\r/g;k.fn.extend({val:function(t){var e,r,i,n=this[0];return arguments.length?(i=Yt(t),this.each(function(o){var a;this.nodeType===1&&(i?a=t.call(this,o,k(this).val()):a=t,a==null?a="":typeof a=="number"?a+="":Array.isArray(a)&&(a=k.map(a,function(s){return s==null?"":s+""})),e=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()],(!e||!("set"in e)||e.set(this,a,"value")===void 0)&&(this.value=a))})):n?(e=k.valHooks[n.type]||k.valHooks[n.nodeName.toLowerCase()],e&&"get"in e&&(r=e.get(n,"value"))!==void 0?r:(r=n.value,typeof r=="string"?r.replace(FF,""):r==null?"":r)):void 0}});k.extend({valHooks:{option:{get:function(t){var e=k.find.attr(t,"value");return e!=null?e:td(k.text(t))}},select:{get:function(t){var e,r,i,n=t.options,o=t.selectedIndex,a=t.type==="select-one",s=a?null:[],l=a?o+1:n.length;for(o<0?i=l:i=a?o:0;i<l;i++)if(r=n[i],(r.selected||i===o)&&!r.disabled&&(!r.parentNode.disabled||!Ca(r.parentNode,"optgroup"))){if(e=k(r).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var r,i,n=t.options,o=k.makeArray(e),a=n.length;a--;)i=n[a],(i.selected=k.inArray(k.valHooks.option.get(i),o)>-1)&&(r=!0);return r||(t.selectedIndex=-1),o}}}});k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=k.inArray(k(t).val(),e)>-1}},Nr.checkOn||(k.valHooks[this].get=function(t){return t.getAttribute("value")===null?"on":t.value})});Nr.focusin="onfocusin"in window;BM=/^(?:focusinfocus|focusoutblur)$/,KM=function(t){t.stopPropagation()};k.extend(k.event,{trigger:function(t,e,r,i){var n,o,a,s,l,c,u,h,p=[r||pr],g=qy.call(t,"type")?t.type:t,y=qy.call(t,"namespace")?t.namespace.split("."):[];if(o=h=a=r=r||pr,!(r.nodeType===3||r.nodeType===8)&&!BM.test(g+k.event.triggered)&&(g.indexOf(".")>-1&&(y=g.split("."),g=y.shift(),y.sort()),l=g.indexOf(":")<0&&"on"+g,t=t[k.expando]?t:new k.Event(g,typeof t=="object"&&t),t.isTrigger=i?2:3,t.namespace=y.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),e=e==null?[t]:k.makeArray(e,[t]),u=k.event.special[g]||{},!(!i&&u.trigger&&u.trigger.apply(r,e)===!1))){if(!i&&!u.noBubble&&!uu(r)){for(s=u.delegateType||g,BM.test(s+g)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(r.ownerDocument||pr)&&p.push(a.defaultView||a.parentWindow||window)}for(n=0;(o=p[n++])&&!t.isPropagationStopped();)h=o,t.type=n>1?s:u.bindType||g,c=(Dt.get(o,"events")||Object.create(null))[t.type]&&Dt.get(o,"handle"),c&&c.apply(o,e),c=l&&o[l],c&&c.apply&&qh(o)&&(t.result=c.apply(o,e),t.result===!1&&t.preventDefault());return t.type=g,!i&&!t.isDefaultPrevented()&&(!u._default||u._default.apply(p.pop(),e)===!1)&&qh(r)&&l&&Yt(r[g])&&!uu(r)&&(a=r[l],a&&(r[l]=null),k.event.triggered=g,t.isPropagationStopped()&&h.addEventListener(g,KM),r[g](),t.isPropagationStopped()&&h.removeEventListener(g,KM),k.event.triggered=void 0,a&&(r[l]=a)),t.result}},simulate:function(t,e,r){var i=k.extend(new k.Event,r,{type:t,isSimulated:!0});k.event.trigger(i,null,e)}});k.fn.extend({trigger:function(t,e){return this.each(function(){k.event.trigger(t,e,this)})},triggerHandler:function(t,e){var r=this[0];if(r)return k.event.trigger(t,e,r,!0)}});Nr.focusin||k.each({focus:"focusin",blur:"focusout"},function(t,e){var r=function(i){k.event.simulate(e,i.target,k.event.fix(i))};k.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,n=Dt.access(i,e);n||i.addEventListener(t,r,!0),Dt.access(i,e,(n||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,n=Dt.access(i,e)-1;n?Dt.access(i,e,n):(i.removeEventListener(t,r,!0),Dt.remove(i,e))}}});Kh=window.location,hT={guid:Date.now()},eS=/\?/;k.parseXML=function(t){var e,r;if(!t||typeof t!="string")return null;try{e=new window.DOMParser().parseFromString(t,"text/xml")}catch(i){}return r=e&&e.getElementsByTagName("parsererror")[0],(!e||r)&&k.error("Invalid XML: "+(r?k.map(r.childNodes,function(i){return i.textContent}).join(`
`):t)),e};RF=/\[\]$/,UM=/\r?\n/g,NF=/^(?:submit|button|image|reset|file)$/i,BF=/^(?:input|select|textarea|keygen)/i;k.param=function(t,e){var r,i=[],n=function(o,a){var s=Yt(a)?a():a;i[i.length]=encodeURIComponent(o)+"="+encodeURIComponent(s==null?"":s)};if(t==null)return"";if(Array.isArray(t)||t.jquery&&!k.isPlainObject(t))k.each(t,function(){n(this.name,this.value)});else for(r in t)tS(r,t[r],e,n);return i.join("&")};k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=k.prop(this,"elements");return t?k.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!k(this).is(":disabled")&&BF.test(this.nodeName)&&!NF.test(t)&&(this.checked||!Uh.test(t))}).map(function(t,e){var r=k(this).val();return r==null?null:Array.isArray(r)?k.map(r,function(i){return{name:e.name,value:i.replace(UM,`\r
`)}}):{name:e.name,value:r.replace(UM,`\r
`)}}).get()}});KF=/%20/g,UF=/#.*$/,qF=/([?&])_=[^&]*/,HF=/^(.*?):[ \t]*([^\r\n]*)$/mg,$F=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,zF=/^(?:GET|HEAD)$/,WF=/^\/\//,qM={},rS={},HM="*/".concat("*"),iS=pr.createElement("a");iS.href=Kh.href;k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Kh.href,type:"GET",isLocal:$F.test(Kh.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":HM,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?jC(jC(t,k.ajaxSettings),e):jC(k.ajaxSettings,t)},ajaxPrefilter:$M(qM),ajaxTransport:$M(rS),ajax:function(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};var r,i,n,o,a,s,l,c,u,h,p=k.ajaxSetup({},e),g=p.context||p,y=p.context&&(g.nodeType||g.jquery)?k(g):k.event,w=k.Deferred(),b=k.Callbacks("once memory"),D=p.statusCode||{},I={},E={},G="canceled",T={readyState:0,getResponseHeader:function(_){var x;if(l){if(!o)for(o={};x=HF.exec(n);)o[x[1].toLowerCase()+" "]=(o[x[1].toLowerCase()+" "]||[]).concat(x[2]);x=o[_.toLowerCase()+" "]}return x==null?null:x.join(", ")},getAllResponseHeaders:function(){return l?n:null},setRequestHeader:function(_,x){return l==null&&(_=E[_.toLowerCase()]=E[_.toLowerCase()]||_,I[_]=x),this},overrideMimeType:function(_){return l==null&&(p.mimeType=_),this},statusCode:function(_){var x;if(_)if(l)T.always(_[T.status]);else for(x in _)D[x]=[D[x],_[x]];return this},abort:function(_){var x=_||G;return r&&r.abort(x),P(0,x),this}};if(w.promise(T),p.url=((t||p.url||Kh.href)+"").replace(WF,Kh.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Rs)||[""],p.crossDomain==null){s=pr.createElement("a");try{s.href=p.url,s.href=s.href,p.crossDomain=iS.protocol+"//"+iS.host!=s.protocol+"//"+s.host}catch(_){p.crossDomain=!0}}if(p.data&&p.processData&&typeof p.data!="string"&&(p.data=k.param(p.data,p.traditional)),zM(qM,p,e,T),l)return T;c=k.event&&p.global,c&&k.active++===0&&k.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!zF.test(p.type),i=p.url.replace(UF,""),p.hasContent?p.data&&p.processData&&(p.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(p.data=p.data.replace(KF,"+")):(h=p.url.slice(i.length),p.data&&(p.processData||typeof p.data=="string")&&(i+=(eS.test(i)?"&":"?")+p.data,delete p.data),p.cache===!1&&(i=i.replace(qF,"$1"),h=(eS.test(i)?"&":"?")+"_="+hT.guid+++h),p.url=i+h),p.ifModified&&(k.lastModified[i]&&T.setRequestHeader("If-Modified-Since",k.lastModified[i]),k.etag[i]&&T.setRequestHeader("If-None-Match",k.etag[i])),(p.data&&p.hasContent&&p.contentType!==!1||e.contentType)&&T.setRequestHeader("Content-Type",p.contentType),T.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(p.dataTypes[0]!=="*"?", "+HM+"; q=0.01":""):p.accepts["*"]);for(u in p.headers)T.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(p.beforeSend.call(g,T,p)===!1||l))return T.abort();if(G="abort",b.add(p.complete),T.done(p.success),T.fail(p.error),r=zM(rS,p,e,T),!r)P(-1,"No Transport");else{if(T.readyState=1,c&&y.trigger("ajaxSend",[T,p]),l)return T;p.async&&p.timeout>0&&(a=window.setTimeout(function(){T.abort("timeout")},p.timeout));try{l=!1,r.send(I,P)}catch(_){if(l)throw _;P(-1,_)}}function P(_,x,L,R){var q,K,Y,N,j,B=x;l||(l=!0,a&&window.clearTimeout(a),r=void 0,n=R||"",T.readyState=_>0?4:0,q=_>=200&&_<300||_===304,L&&(N=jF(p,T,L)),!q&&k.inArray("script",p.dataTypes)>-1&&k.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),N=YF(p,N,T,q),q?(p.ifModified&&(j=T.getResponseHeader("Last-Modified"),j&&(k.lastModified[i]=j),j=T.getResponseHeader("etag"),j&&(k.etag[i]=j)),_===204||p.type==="HEAD"?B="nocontent":_===304?B="notmodified":(B=N.state,K=N.data,Y=N.error,q=!Y)):(Y=B,(_||!B)&&(B="error",_<0&&(_=0))),T.status=_,T.statusText=(x||B)+"",q?w.resolveWith(g,[K,B,T]):w.rejectWith(g,[T,B,Y]),T.statusCode(D),D=void 0,c&&y.trigger(q?"ajaxSuccess":"ajaxError",[T,p,q?K:Y]),b.fireWith(g,[T,B]),c&&(y.trigger("ajaxComplete",[T,p]),--k.active||k.event.trigger("ajaxStop")))}return T},getJSON:function(t,e,r){return k.get(t,e,r,"json")},getScript:function(t,e){return k.get(t,void 0,e,"script")}});k.each(["get","post"],function(t,e){k[e]=function(r,i,n,o){return Yt(i)&&(o=o||n,n=i,i=void 0),k.ajax(k.extend({url:r,type:e,dataType:o,data:i,success:n},k.isPlainObject(r)&&r))}});k.ajaxPrefilter(function(t){var e;for(e in t.headers)e.toLowerCase()==="content-type"&&(t.contentType=t.headers[e]||"")});k._evalUrl=function(t,e,r){return k.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(i){k.globalEval(i,e,r)}})};k.fn.extend({wrapAll:function(t){var e;return this[0]&&(Yt(t)&&(t=t.call(this[0])),e=k(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var r=this;r.firstElementChild;)r=r.firstElementChild;return r}).append(this)),this},wrapInner:function(t){return Yt(t)?this.each(function(e){k(this).wrapInner(t.call(this,e))}):this.each(function(){var e=k(this),r=e.contents();r.length?r.wrapAll(t):e.append(t)})},wrap:function(t){var e=Yt(t);return this.each(function(r){k(this).wrapAll(e?t.call(this,r):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}});k.expr.pseudos.hidden=function(t){return!k.expr.pseudos.visible(t)};k.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)};k.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest}catch(t){}};JF={0:200,1223:204},$h=k.ajaxSettings.xhr();Nr.cors=!!$h&&"withCredentials"in $h;Nr.ajax=$h=!!$h;k.ajaxTransport(function(t){var e,r;if(Nr.cors||$h&&!t.crossDomain)return{send:function(i,n){var o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),!t.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");for(o in i)a.setRequestHeader(o,i[o]);e=function(s){return function(){e&&(e=r=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,s==="abort"?a.abort():s==="error"?typeof a.status!="number"?n(0,"error"):n(a.status,a.statusText):n(JF[a.status]||a.status,a.statusText,(a.responseType||"text")!=="text"||typeof a.responseText!="string"?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),r=a.onerror=a.ontimeout=e("error"),a.onabort!==void 0?a.onabort=r:a.onreadystatechange=function(){a.readyState===4&&window.setTimeout(function(){e&&r()})},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(s){if(e)throw s}},abort:function(){e&&e()}}});k.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)});k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return k.globalEval(t),t}}});k.ajaxPrefilter("script",function(t){t.cache===void 0&&(t.cache=!1),t.crossDomain&&(t.type="GET")});k.ajaxTransport("script",function(t){if(t.crossDomain||t.scriptAttrs){var e,r;return{send:function(i,n){e=k("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",r=function(o){e.remove(),r=null,o&&n(o.type==="error"?404:200,o.type)}),pr.head.appendChild(e[0])},abort:function(){r&&r()}}}});gT=[],YC=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=gT.pop()||k.expando+"_"+hT.guid++;return this[t]=!0,t}});k.ajaxPrefilter("json jsonp",function(t,e,r){var i,n,o,a=t.jsonp!==!1&&(YC.test(t.url)?"url":typeof t.data=="string"&&(t.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&YC.test(t.data)&&"data");if(a||t.dataTypes[0]==="jsonp")return i=t.jsonpCallback=Yt(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(YC,"$1"+i):t.jsonp!==!1&&(t.url+=(eS.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||k.error(i+" was not called"),o[0]},t.dataTypes[0]="json",n=window[i],window[i]=function(){o=arguments},r.always(function(){n===void 0?k(window).removeProp(i):window[i]=n,t[i]&&(t.jsonpCallback=e.jsonpCallback,gT.push(i)),o&&Yt(n)&&n(o[0]),o=n=void 0}),"script"});Nr.createHTMLDocument=function(){var t=pr.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",t.childNodes.length===2}();k.parseHTML=function(t,e,r){if(typeof t!="string")return[];typeof e=="boolean"&&(r=e,e=!1);var i,n,o;return e||(Nr.createHTMLDocument?(e=pr.implementation.createHTMLDocument(""),i=e.createElement("base"),i.href=pr.location.href,e.head.appendChild(i)):e=pr),n=eT.exec(t),o=!r&&[],n?[e.createElement(n[1])]:(n=aT([t],e,o),o&&o.length&&k(o).remove(),k.merge([],n.childNodes))};k.fn.load=function(t,e,r){var i,n,o,a=this,s=t.indexOf(" ");return s>-1&&(i=td(t.slice(s)),t=t.slice(0,s)),Yt(e)?(r=e,e=void 0):e&&typeof e=="object"&&(n="POST"),a.length>0&&k.ajax({url:t,type:n||"GET",dataType:"html",data:e}).done(function(l){o=arguments,a.html(i?k("<div>").append(k.parseHTML(l)).find(i):l)}).always(r&&function(l,c){a.each(function(){r.apply(this,o||[l.responseText,c,l])})}),this};k.expr.pseudos.animated=function(t){return k.grep(k.timers,function(e){return t===e.elem}).length};k.offset={setOffset:function(t,e,r){var i,n,o,a,s,l,c,u=k.css(t,"position"),h=k(t),p={};u==="static"&&(t.style.position="relative"),s=h.offset(),o=k.css(t,"top"),l=k.css(t,"left"),c=(u==="absolute"||u==="fixed")&&(o+l).indexOf("auto")>-1,c?(i=h.position(),a=i.top,n=i.left):(a=parseFloat(o)||0,n=parseFloat(l)||0),Yt(e)&&(e=e.call(t,r,k.extend({},s))),e.top!=null&&(p.top=e.top-s.top+a),e.left!=null&&(p.left=e.left-s.left+n),"using"in e?e.using.call(t,p):h.css(p)}};k.fn.extend({offset:function(t){if(arguments.length)return t===void 0?this:this.each(function(n){k.offset.setOffset(this,t,n)});var e,r,i=this[0];if(i)return i.getClientRects().length?(e=i.getBoundingClientRect(),r=i.ownerDocument.defaultView,{top:e.top+r.pageYOffset,left:e.left+r.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var t,e,r,i=this[0],n={top:0,left:0};if(k.css(i,"position")==="fixed")e=i.getBoundingClientRect();else{for(e=this.offset(),r=i.ownerDocument,t=i.offsetParent||r.documentElement;t&&(t===r.body||t===r.documentElement)&&k.css(t,"position")==="static";)t=t.parentNode;t&&t!==i&&t.nodeType===1&&(n=k(t).offset(),n.top+=k.css(t,"borderTopWidth",!0),n.left+=k.css(t,"borderLeftWidth",!0))}return{top:e.top-n.top-k.css(i,"marginTop",!0),left:e.left-n.left-k.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&k.css(t,"position")==="static";)t=t.offsetParent;return t||rd})}});k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var r=e==="pageYOffset";k.fn[t]=function(i){return Sl(this,function(n,o,a){var s;if(uu(n)?s=n:n.nodeType===9&&(s=n.defaultView),a===void 0)return s?s[e]:n[o];s?s.scrollTo(r?s.pageXOffset:a,r?a:s.pageYOffset):n[o]=a},t,i,arguments.length)}});k.each(["top","left"],function(t,e){k.cssHooks[e]=lT(Nr.pixelPosition,function(r,i){if(i)return i=Hh(r,e),sS.test(i)?k(r).position()[e]+"px":i})});k.each({Height:"height",Width:"width"},function(t,e){k.each({padding:"inner"+t,content:e,"":"outer"+t},function(r,i){k.fn[i]=function(n,o){var a=arguments.length&&(r||typeof n!="boolean"),s=r||(n===!0||o===!0?"margin":"border");return Sl(this,function(l,c,u){var h;return uu(l)?i.indexOf("outer")===0?l["inner"+t]:l.document.documentElement["client"+t]:l.nodeType===9?(h=l.documentElement,Math.max(l.body["scroll"+t],h["scroll"+t],l.body["offset"+t],h["offset"+t],h["client"+t])):u===void 0?k.css(l,c,s):k.style(l,c,u,s)},e,a?n:void 0,a)}})});k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){k.fn[e]=function(r){return this.on(e,r)}});k.fn.extend({bind:function(t,e,r){return this.on(t,null,e,r)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,r,i){return this.on(e,t,r,i)},undelegate:function(t,e,r){return arguments.length===1?this.off(t,"**"):this.off(e,t||"**",r)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}});k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){k.fn[e]=function(r,i){return arguments.length>0?this.on(e,null,r,i):this.trigger(e)}});XF=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;k.proxy=function(t,e){var r,i,n;if(typeof e=="string"&&(r=t[e],e=t,t=r),!!Yt(t))return i=hc.call(arguments,2),n=function(){return t.apply(e||this,i.concat(hc.call(arguments)))},n.guid=t.guid=t.guid||k.guid++,n};k.holdReady=function(t){t?k.readyWait++:k.ready(!0)};k.isArray=Array.isArray;k.parseJSON=JSON.parse;k.nodeName=Ca;k.isFunction=Yt;k.isWindow=uu;k.camelCase=Fs;k.type=hu;k.now=Date.now;k.isNumeric=function(t){var e=k.type(t);return(e==="number"||e==="string")&&!isNaN(t-parseFloat(t))};k.trim=function(t){return t==null?"":(t+"").replace(XF,"")};QF=window.jQuery,ZF=window.$;k.noConflict=function(t){return window.$===k&&(window.$=ZF),t&&window.jQuery===k&&(window.jQuery=QF),k};typeof noGlobal=="undefined"&&(window.jQuery=window.$=k);V=k});var DT=__dcg_shared_module_exports__['g'](Zh=>{var it=Zh&&Zh.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),Zy=Zh&&Zh.__assign||function(){return Zy=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},Zy.apply(this,arguments)};(function(){var t=-1,e=1,r=Math.min,i=Math.max;function n(){}function o(S,m){if(!m)throw new Error("prayer failed: "+S)}function a(S){o("a direction was passed",S===t||S===e)}var s=new URLSearchParams(window.location.search);function l(S){var m=document.implementation.createHTMLDocument("");if(m.body.innerHTML=S,m.body.children.length===1)return m.body.children[0];for(var d=document.createDocumentFragment();m.body.firstChild;)d.appendChild(m.body.firstChild);return d}var c=function(m,d,f){var v;switch(m){case"svg":case"path":v=document.createElementNS("http://www.w3.org/2000/svg",m);break;default:v=document.createElement(m)}for(var M in d){var F=d[M];F!==void 0&&v.setAttribute(M,typeof F=="string"?F:String(F))}if(f)for(var W=0;W<f.length;W++)v.appendChild(f[W]);return v};c.text=function(S){return document.createTextNode(S)},c.block=function(S,m,d){var f=c(S,m,[d.html()]);return d.setDOM(f),N.linkElementByBlockNode(f,d),f},c.entityText=function(S){var m=l(S);return o("entity parses to a single text node",m instanceof DocumentFragment&&m.childNodes.length===1&&m.childNodes[0]instanceof Text),m.childNodes[0]};function u(S,m){var d,f,v;if(typeof((d=S)===null||d===void 0?void 0:d.closest)=="function")return S.closest(m);if(!(S instanceof HTMLElement))return null;var M=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,F=S;do{if(M.call(F,m))return F;F=(v=(f=F==null?void 0:F.parentElement)!==null&&f!==void 0?f:F==null?void 0:F.parentNode)!==null&&v!==void 0?v:null}while(F!==null&&F.nodeType===1);return null}var h="\xA0",p="\u200B",g="\u02D9",y="\u2211",w="\u220F",b="\u2210",D="\u222B";function I(S){return S.getClientRects().length?S.getBoundingClientRect():{top:0,left:0,height:0,width:0,x:0,y:0,bottom:0,right:0}}function E(){return window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}function G(){return window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}var T=function(){var S,m;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(S=requestAnimationFrame,m=cancelAnimationFrame):(S=function(d){return setTimeout(d,13)},m=clearTimeout),function(d,f){var v=Date.now(),M,F=0;function W(){var Ve=(Date.now()-v)/d;Ve<=F?se():F=Ve,f(F,se,X)}function X(){M!==void 0&&m(M),M=void 0}function se(){X(),M=S(W)}f(d<=0?1:0,se,X)}}(),P=function(){function S(m){this.span=c("span",{class:"dcg-mq-aria-alert","aria-live":"assertive","aria-atomic":"true"}),this.msg="",this.items=[],this.controller=m}return S.prototype.attach=function(){var m=this.controller.container;this.span.parentNode!==m&&x(m).prepend(x(this.span))},S.prototype.queue=function(m,d){d===void 0&&(d=!1);var f="";if(m instanceof ae){var v=m.mathspeak({ignoreShorthand:!0});d&&(m.parent&&m.parent.ariaLabel&&m.ariaLabel==="block"?f=m.parent.ariaLabel+" "+v:m.ariaLabel&&(f=m.ariaLabel+" "+v)),f===""&&(f=v)}else f=m||"";return this.items.push(f),this},S.prototype.queueDirOf=function(m){return a(m),this.queue(m===t?"before":"after")},S.prototype.queueDirEndOf=function(m){return a(m),this.queue(m===t?"beginning of":"end of")},S.prototype.alert=function(m){return this.attach(),m&&this.queue(m),this.items.length&&(this.msg=this.items.join(" ").replace(/ +(?= )/g,"").trim(),this.controller.containerHasFocus()&&(this.controller.options.logAriaAlerts&&this.msg&&console.log(this.msg),this.span.textContent=this.msg)),this.clear()},S.prototype.clear=function(){return this.items.length=0,this},S}(),_=function(){function S(m,d){var f;arguments.length===1&&(d=m),!(!m||!d)&&(this.ends=(f={},f[t]=m,f[e]=d,f))}return S.create=function(m,d){arguments.length===1&&(d=m),o("No half-empty DOMFragments",!!m==!!d);var f=new S(m,d);return o("last is a forward sibling of first",f.isValid()),f},S.prototype.isEmpty=function(){return this.ends===void 0},S.prototype.isOneNode=function(){return!!(this.ends&&this.ends[t]===this.ends[e])},S.prototype.isValid=function(){if(!this.ends||this.ends[t]===this.ends[e])return!0;var m;return this.eachNode(function(d){return m=d}),m===this.ends[e]},S.prototype.firstNode=function(){return o("Fragment is not empty",this.ends),this.ends[t]},S.prototype.lastNode=function(){return o("Fragment is not empty",this.ends),this.ends[e]},S.prototype.children=function(){var m=this.oneNode(),d=m.firstChild,f=m.lastChild;return d&&f?new S(d,f):new S},S.prototype.join=function(m){if(!this.ends)return m;if(!m.ends)return this;for(var d=!1,f=this.ends[e].nextSibling;f;){if(f===m.ends[t]){d=!0;break}f=f.nextSibling}return o("sibling must be a forward DOM sibling of this fragment",d),new S(this.ends[t],m.ends[e])},S.prototype.oneNode=function(){return o("Fragment has a single node",this.ends&&this.ends[t]===this.ends[e]),this.ends[t]},S.prototype.oneElement=function(){var m=this.oneNode();return o("Node is an Element",m.nodeType===Node.ELEMENT_NODE),m},S.prototype.oneText=function(){var m=this.oneNode();return o("Node is Text",m.nodeType===Node.TEXT_NODE),m},S.prototype.eachNode=function(m){if(!this.ends)return this;for(var d=this.ends[e],f=this.ends[t],v=void 0;f&&(v=f.nextSibling,m(f),f!==d);f=v);return this},S.prototype.eachElement=function(m){return this.eachNode(function(d){d.nodeType===Node.ELEMENT_NODE&&m(d)}),this},S.prototype.text=function(){var m="";return this.eachNode(function(d){m+=d.textContent||""}),m},S.prototype.toNodeArray=function(){var m=[];return this.eachNode(function(d){return m.push(d)}),m},S.prototype.toElementArray=function(){var m=[];return this.eachElement(function(d){return m.push(d)}),m},S.prototype.toDocumentFragment=function(){var m=document.createDocumentFragment();return this.eachNode(function(d){return m.appendChild(d)}),m},S.prototype.insertBefore=function(m){return this.insDirOf(t,m)},S.prototype.insertAfter=function(m){return this.insDirOf(e,m)},S.prototype.append=function(m){return m.appendTo(this.oneElement()),this},S.prototype.prepend=function(m){return m.prependTo(this.oneElement()),this},S.prototype.appendTo=function(m){return this.insAtDirEnd(e,m)},S.prototype.prependTo=function(m){return this.insAtDirEnd(t,m)},S.prototype.parent=function(){if(!this.ends)return this;var m=this.ends[t].parentNode;return m?new S(m):new S},S.prototype.wrapAll=function(m){if(m.textContent="",!this.ends)return this;var d=this.ends[t].parentNode,f=this.ends[e].nextSibling;return this.appendTo(m),d&&d.insertBefore(m,f),this},S.prototype.replaceWith=function(m){var d,f=(d=this.ends)===null||d===void 0?void 0:d[e],v=f==null?void 0:f.parentNode,M=f==null?void 0:f.nextSibling;this.detach();var F=m.toDocumentFragment();return!f||!v?this:(v.insertBefore(F,M||null),this)},S.prototype.nthElement=function(m){if(this.ends&&!(m<0||m!==Math.floor(m)))for(var d=this.ends[t];d;){if(d.nodeType===Node.ELEMENT_NODE){if(m<=0)return d;m-=1}if(d===this.ends[e])return;d=d.nextSibling}},S.prototype.firstElement=function(){return this.nthElement(0)},S.prototype.lastElement=function(){if(this.ends)for(var m=this.ends[e];m;){if(m.nodeType===Node.ELEMENT_NODE)return m;if(m===this.ends[t])return;m=m.previousSibling}},S.prototype.first=function(){return new S(this.firstElement())},S.prototype.last=function(){return new S(this.lastElement())},S.prototype.eq=function(m){return new S(this.nthElement(m))},S.prototype.slice=function(m){if(!this.ends)return this;var d=this.nthElement(m);return d?new S(d,this.ends[e]):new S},S.prototype.next=function(){for(var m=this.oneNode();m;)if(m=m.nextSibling,m&&m.nodeType===Node.ELEMENT_NODE)return new S(m);return new S},S.prototype.prev=function(){for(var m=this.oneNode();m;)if(m=m.previousSibling,m&&m.nodeType===Node.ELEMENT_NODE)return new S(m);return new S},S.prototype.empty=function(){return this.eachElement(function(m){m.textContent=""}),this},S.prototype.remove=function(){return this.toDocumentFragment(),this},S.prototype.detach=function(){return this.remove()},S.prototype.insDirOf=function(m,d){var f;if(!this.ends)return this;var v=(f=d.ends)===null||f===void 0?void 0:f[m];return!v||!v.parentNode?this.detach():(L(m,v.parentNode,this.toDocumentFragment(),v),this)},S.prototype.insAtDirEnd=function(m,d){return this.ends?(R(m,this.toDocumentFragment(),d),this):this},S.prototype.hasClass=function(m){var d=!1;return this.eachElement(function(f){f.classList.contains(m)&&(d=!0)}),d},S.prototype.addClass=function(m){for(var d=function(W){if(!W)return"continue";f.eachElement(function(X){X.classList.add(W)})},f=this,v=0,M=m.split(/\s+/);v<M.length;v++){var F=M[v];d(F)}return this},S.prototype.removeClass=function(m){for(var d=function(W){if(!W)return"continue";f.eachElement(function(X){X.classList.remove(W)})},f=this,v=0,M=m.split(/\s+/);v<M.length;v++){var F=M[v];d(F)}return this},S.prototype.toggleClass=function(m,d){if(d===!0)return this.addClass(m);if(d===!1)return this.removeClass(m);for(var f=function(X){if(!X)return"continue";v.eachElement(function(se){se.classList.toggle(X)})},v=this,M=0,F=m.split(/\s+/);M<F.length;M++){var W=F[M];f(W)}return this},S}(),x=_.create;function L(S,m,d,f){m.insertBefore(d,S===t?f:f.nextSibling)}function R(S,m,d){S===t?d.insertBefore(m,d.firstChild):d.appendChild(m)}var q=function(){function S(m,d,f){this.init(m,d,f)}return S.prototype.init=function(m,d,f){this.parent=m,this[t]=d,this[e]=f},S.copy=function(m){return new S(m.parent,m[t],m[e])},S}();function K(S,m){var d=S[t];if(d){var f=S[e];if(f)for(f=f[e];d!==f;d=d[e]){var v=m(d);if(v===!1)break}}}function Y(S,m,d){var f=S[t];if(!f)return m;var v=S[e];if(!v)return m;for(v=v[e];f!==v;f=f[e])m=d(m,f);return m}var N=function(){function S(){var f;this[m]=0,this[d]=0,this.parent=0,this.ends=(f={},f[t]=0,f[e]=0,f),this.id=S.uniqueNodeId()}S.uniqueNodeId=function(){return S.idCounter+=1},S.getNodeOfElement=function(f){if(f){if(!f.nodeType)throw new Error("must pass an Element to NodeBase.getNodeOfElement");var v=f;return v.mqBlockNode||v.mqCmdNode}},S.linkElementByBlockNode=function(f,v){f.mqBlockNode=v},S.linkElementByCmdNode=function(f,v){f.mqCmdNode=v},S.prototype.setEnds=function(f){this.ends=f,o("No half-empty node ends",!!this.ends[t]==!!this.ends[e])},S.prototype.getEnd=function(f){return this.ends[f]},S.prototype.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},S.prototype.setDOM=function(f){return f&&o("DOM is an element or a text node",f.nodeType===Node.ELEMENT_NODE||f.nodeType===Node.TEXT_NODE),this._el=f,this},S.prototype.domFrag=function(){return x(this._el)},S.prototype.createDir=function(f,v){a(f);var M=this;return M.html(),M.domFrag().insDirOf(f,v.domFrag()),v[f]=M.adopt(v.parent,v[t],v[e]),M},S.prototype.createLeftOf=function(f){this.createDir(t,f)},S.prototype.selectChildren=function(f,v){return new Ae(f,v)},S.prototype.bubble=function(f){for(var v=this.getSelfNode(),M=v;M;M=M.parent){var F=f(M);if(F===!1)break}return this},S.prototype.postOrder=function(f){var v=this.getSelfNode();return function M(F){return F?(F.eachChild(M),f(F),!0):!1}(v),v},S.prototype.isEmpty=function(){return this.ends[t]===0&&this.ends[e]===0},S.prototype.isQuietEmptyDelimiter=function(f){if(!this.isEmpty()||!f||!this.parent||this.parent.ctrlSeq===void 0)return!1;var v=this.parent.ctrlSeq.replace(/^\\(left|right)?/,"");return f.hasOwnProperty(v)},S.prototype.isStyleBlock=function(){return!1},S.prototype.isTextBlock=function(){return!1},S.prototype.children=function(){return new B(this.getEnd(t),this.getEnd(e))},S.prototype.eachChild=function(f){return K(this.ends,f),this},S.prototype.foldChildren=function(f,v){return Y(this.ends,f,v)},S.prototype.withDirAdopt=function(f,v,M,F){var W=this.getSelfNode();return new B(W,W).withDirAdopt(f,v,M,F),this},S.prototype.adopt=function(f,v,M){var F=this.getSelfNode();return new B(F,F).adopt(f,v,M),this.getSelfNode()},S.prototype.disown=function(){var f=this.getSelfNode();return new B(f,f).disown(),this},S.prototype.remove=function(){return this.domFrag().remove(),this.disown()},S.prototype.shouldIgnoreSubstitutionInSimpleSubscript=function(f){return!(!f.disableAutoSubstitutionInSubscripts||!this.parent||!(this.parent.parent instanceof za)||!this.parent.domFrag().hasClass("dcg-mq-sub"))},S.prototype.getSelfNode=function(){return this},S.prototype.parser=function(){o("Abstract parser() method is never called",!1)},S.prototype.html=function(){throw new Error("html() unimplemented in NodeBase")},S.prototype.text=function(){return""},S.prototype.latex=function(){var f={latex:"",startIndex:-1,endIndex:-1};return this.latexRecursive(f),f.latex},S.prototype.latexRecursive=function(f){},S.prototype.checkCursorContextOpen=function(f){f.startSelectionBefore===this&&(f.startIndex=f.latex.length),f.endSelectionBefore===this&&(f.endIndex=f.latex.length)},S.prototype.checkCursorContextClose=function(f){f.startSelectionAfter===this&&(f.startIndex=f.latex.length),f.endSelectionAfter===this&&(f.endIndex=f.latex.length)},S.prototype.finalizeTree=function(f,v){},S.prototype.contactWeld=function(f,v){},S.prototype.blur=function(f){},S.prototype.focus=function(){},S.prototype.intentionalBlur=function(){},S.prototype.reflow=function(){},S.prototype.registerInnerField=function(f,v){},S.prototype.chToCmd=function(f,v){o("Abstract chToCmd() method is never called",!1)},S.prototype.mathspeak=function(f){return""},S.prototype.seek=function(f,v){},S.prototype.siblingDeleted=function(f,v){},S.prototype.siblingCreated=function(f,v){},S.prototype.finalizeInsert=function(f,v){},S.prototype.fixDigitGrouping=function(f){},S.prototype.writeLatex=function(f,v){},S.prototype.write=function(f,v){};var m,d;return m=t,d=e,S.idCounter=0,S}();function j(S,m,d){o("a parent is always present",S),o("leftward is properly set up",function(){return m?m[e]===d&&m.parent===S:S.getEnd(t)===d}()),o("rightward is properly set up",function(){return d?d[t]===m&&d.parent===S:S.getEnd(e)===m}())}var B=function(){function S(m,d,f){var v,M;if(this.disowned=!1,f===void 0&&(f=t),a(f),o("no half-empty fragments",!m==!d),!m||!d){this.setEnds((v={},v[t]=0,v[e]=0,v));return}o("withDir is passed to Fragment",m instanceof ae),o("oppDir is passed to Fragment",d instanceof ae),o("withDir and oppDir have the same parent",m.parent===d.parent);var F=(M={},M[f]=m,M[-f]=d,M);this.setEnds(F);var W=0;this.each(function(X){W=X}),o("following direction siblings from start reaches end",W===F[e])}return S.prototype.getDOMFragFromEnds=function(){var m=this.ends[t],d=this.ends[e];return m===0||d===0?x():m===d?m.domFrag():m.domFrag().join(d.domFrag())},S.prototype.setEnds=function(m){this.ends=m},S.prototype.getEnd=function(m){return this.ends?this.ends[m]:0},S.prototype.domFrag=function(){return this.getDOMFragFromEnds()},S.prototype.withDirAdopt=function(m,d,f,v){return m===t?this.adopt(d,f,v):this.adopt(d,v,f)},S.prototype.adopt=function(m,d,f){var v;j(m,d,f);var M=this;this.disowned=!1;var F=M.ends[t];if(!F)return this;var W=M.ends[e];if(!W)return this;var X=(v={},v[t]=m.getEnd(t),v[e]=m.getEnd(e),v);return d||(X[t]=F),f?f[t]=W:X[e]=W,m.setEnds(X),W[e]=f,M.each(function(se){return se[t]=d,se.parent=m,d&&(d[e]=se),d=se,!0}),M},S.prototype.disown=function(){var m,d=this,f=d.ends[t];if(!f||d.disowned)return d;this.disowned=!0;var v=d.ends[e];if(!v)return d;var M=f.parent;j(M,f[t],f),j(M,v,v[e]);var F=(m={},m[t]=M.getEnd(t),m[e]=M.getEnd(e),m);if(f[t]){var W=f[t];W[e]=v[e]}else F[t]=v[e];if(v[e]){var X=v[e];X[t]=f[t]}else F[e]=f[t];return F[t]&&F[e]?M.setEnds(F):M.ends=F,d},S.prototype.remove=function(){return this.domFrag().remove(),this.disown()},S.prototype.each=function(m){return K(this.ends,m),this},S.prototype.fold=function(m,d){return Y(this.ends,m,d)},S}(),A={},$={};function J(S){return S&&S.prototype instanceof ae}var ue=function(S){it(m,S);function m(d,f,v){var M=S.call(this,d,f,v)||this;return M.ancestors={},M}return m.fromCursor=function(d){return new m(d.parent,d[t],d[e])},m}(q),te=function(S){it(m,S);function m(d,f,v){var M=S.call(this,d,0,0)||this;return M.upDownCache={},M.cursorElement=c("span",{class:"dcg-mq-cursor"},[c.text(p)]),M._domFrag=x(),M.controller=v,M.options=f,M.setDOMFrag(x(M.cursorElement)),M.blink=function(){x(M.cursorElement).toggleClass("dcg-mq-blink")},M}return m.prototype.setDOMFrag=function(d){return this._domFrag=d,this},m.prototype.domFrag=function(){return this._domFrag},m.prototype.show=function(){if(x(this.cursorElement).removeClass("dcg-mq-blink"),this.setDOMFrag(x(this.cursorElement)),this.intervalId)clearInterval(this.intervalId);else{var d=this[e];if(d){var f=this.selection;f&&f.getEnd(t)[t]===this[t]?this.domFrag().insertBefore(f.domFrag()):this.domFrag().insertBefore(d.domFrag())}else this.domFrag().appendTo(this.parent.domFrag().oneElement());this.parent.focus()}return this.intervalId=setInterval(this.blink,500),this},m.prototype.hide=function(){return this.intervalId&&clearInterval(this.intervalId),this.intervalId=0,this.domFrag().detach(),this.setDOMFrag(x()),this},m.prototype.withDirInsertAt=function(d,f,v,M){var F=this.parent;this.parent=f,this[d]=v,this[-d]=M,F!==f&&F.blur&&F.blur(this)},m.prototype.insDirOf=function(d,f){return a(d),this.domFrag().insDirOf(d,f.domFrag()),this.withDirInsertAt(d,f.parent,f[d],f),this.parent.domFrag().addClass("dcg-mq-hasCursor"),this},m.prototype.insLeftOf=function(d){return this.insDirOf(t,d)},m.prototype.insRightOf=function(d){return this.insDirOf(e,d)},m.prototype.insAtDirEnd=function(d,f){return a(d),this.domFrag().insAtDirEnd(d,f.domFrag().oneElement()),this.withDirInsertAt(d,f,0,f.getEnd(d)),f.focus(),this},m.prototype.insAtLeftEnd=function(d){return this.insAtDirEnd(t,d)},m.prototype.insAtRightEnd=function(d){return this.insAtDirEnd(e,d)},m.prototype.jumpUpDown=function(d,f){var v=this;v.upDownCache[d.id]=q.copy(v);var M=v.upDownCache[f.id];if(M){var F=M[e];F?v.insLeftOf(F):v.insAtRightEnd(M.parent)}else{var W=v.getBoundingClientRectWithoutMargin().left;f.seek(W,v)}v.controller.aria.queue(f,!0)},m.prototype.getBoundingClientRectWithoutMargin=function(){var d=this.domFrag();d.removeClass("dcg-mq-cursor");var f=I(d.oneElement()),v=f.left,M=f.right;return d.addClass("dcg-mq-cursor"),{left:v,right:M}},m.prototype.unwrapGramp=function(){var d=this.parent.parent,f=d.parent,v=d[e],M=this,F=d[t];if(d.disown().eachChild(function(we){return we.isEmpty()||(we.children().adopt(f,F,v).each(function(Ne){return Ne.domFrag().insertBefore(d.domFrag()),!0}),F=we.getEnd(e)),!0}),!this[e]){var W=this[t];if(W)this[e]=W[e];else for(;!this[e];){var X=this.parent[e];if(X)this.parent=X,this[e]=X.getEnd(t);else{this[e]=d[e],this.parent=f;break}}}var se=this[e];se?this.insLeftOf(se):this.insAtRightEnd(f),d.domFrag().remove();var Ve=d[t],Ie=d[e];Ve&&Ve.siblingDeleted(M.options,e),Ie&&Ie.siblingDeleted(M.options,t)},m.prototype.startSelection=function(){for(var d=this.anticursor=ue.fromCursor(this),f=d.ancestors,v=d;v.parent;v=v.parent)f[v.parent.id]=v},m.prototype.endSelection=function(){delete this.anticursor},m.prototype.select=function(){var d,f=this.anticursor;if(this[t]===f[t]&&this.parent===f.parent)return!1;for(var v=this;v.parent;v=v.parent)if(v.parent.id in f.ancestors){d=v.parent;break}o("cursor and anticursor in the same tree",d);var M=d,F=f.ancestors[M.id],W,X,se=e;if(v[t]!==F){for(var Ve=v;Ve;Ve=Ve[e])if(Ve[e]===F[e]){se=t,W=v,X=F;break}}se===e&&(W=F,X=v),W instanceof q&&(W=W[e]),X instanceof q&&(X=X[t]),this.hide().selection=M.selectChildren(W,X);var Ie=this.selection.getEnd(se);return this.insDirOf(se,Ie),this.selectionChanged(),!0},m.prototype.resetToEnd=function(d){this.clearSelection();var f=d.root;this[e]=0,this[t]=f.getEnd(e),this.parent=f},m.prototype.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},m.prototype.deleteSelection=function(){var d=this.selection;d&&(this[t]=d.getEnd(t)[t],this[e]=d.getEnd(e)[e],d.remove(),this.selectionChanged(),delete this.selection)},m.prototype.replaceSelection=function(){var d=this.selection;return d&&(this[t]=d.getEnd(t)[t],this[e]=d.getEnd(e)[e],delete this.selection),d},m.prototype.depth=function(){for(var d=this,f=0;d=d.parent;)f+=d instanceof ii?1:0;return f},m.prototype.isTooDeep=function(d){return this.options.maxDepth!==void 0?this.depth()+(d||0)>this.options.maxDepth:!1},m.prototype.selectionChanged=function(){},m}(q),Ae=function(S){it(m,S);function m(d,f,v){var M=S.call(this,d,f,v)||this;return M._el=c("span",{class:"dcg-mq-selection"}),M.getDOMFragFromEnds().wrapAll(M._el),M}return m.prototype.isCleared=function(){return this._el===void 0},m.prototype.domFrag=function(){return this.isCleared()?this.getDOMFragFromEnds():x(this._el)},m.prototype.setEnds=function(d){o("Selection ends are never empty",d[t]&&d[e]),this.ends=d},m.prototype.getEnd=function(d){return this.ends[d]},m.prototype.adopt=function(d,f,v){return this.clear(),S.prototype.adopt.call(this,d,f,v)},m.prototype.clear=function(){var d=this.getDOMFragFromEnds();return this.domFrag().replaceWith(d),this._el=void 0,this},m.prototype.join=function(d,f){return f===void 0&&(f=""),this.fold("",function(v,M){return v+f+M[d]()})},m}(B),Se=function(){function S(m,d,f){this.textareaEventListeners={},this.id=m.id,this.data={},this.root=m,this.container=d,this.options=f,this.aria=new P(this.getControllerSelf()),this.ariaLabel="Math Input",this.ariaPostLabel="",m.controller=this.getControllerSelf(),this.cursor=m.cursor=new te(m,f,this.getControllerSelf())}return S.prototype.getControllerSelf=function(){return this},S.prototype.handle=function(m,d){var f,v=this.options.handlers,M=(f=this.options.handlers)===null||f===void 0?void 0:f.fns[m];if(M){var F=v==null?void 0:v.APIClasses[this.KIND_OF_MQ];o("APIClass is defined",F);var W=new F(this);d===t||d===e?M(d,W):M(W)}},S.onNotify=function(m){S.notifyees.push(m)},S.prototype.notify=function(m){for(var d=0;d<S.notifyees.length;d+=1)S.notifyees[d](this.cursor,m);return this},S.prototype.setAriaLabel=function(m){var d=this.getAriaLabel();return m&&typeof m=="string"&&m!==""?this.ariaLabel=m:this.editable?this.ariaLabel="Math Input":this.ariaLabel="",this.ariaLabel!==d&&!this.containerHasFocus()&&this.updateMathspeak(),this},S.prototype.getAriaLabel=function(){return this.ariaLabel!=="Math Input"?this.ariaLabel:this.editable?"Math Input":""},S.prototype.setAriaPostLabel=function(m,d){var f=this;return m&&typeof m=="string"&&m!==""?(m!==this.ariaPostLabel&&typeof d=="number"&&(this._ariaAlertTimeout&&clearTimeout(this._ariaAlertTimeout),this._ariaAlertTimeout=setTimeout(function(){f.containerHasFocus()?f.aria.alert(f.root.mathspeak().trim()+" "+m.trim()):f.updateMathspeak()},d)),this.ariaPostLabel=m):(this._ariaAlertTimeout&&clearTimeout(this._ariaAlertTimeout),this.ariaPostLabel=""),this},S.prototype.getAriaPostLabel=function(){return this.ariaPostLabel||""},S.prototype.containerHasFocus=function(){return document.activeElement&&this.container.contains(document.activeElement)},S.prototype.getTextareaOrThrow=function(){var m=this.textarea;if(!m)throw new Error("expected a textarea");return m},S.prototype.getTextareaSpanOrThrow=function(){var m=this.textareaSpan;if(!m)throw new Error("expected a textareaSpan");return m},S.prototype.addTextareaEventListeners=function(m){if(this.textarea)for(var d in m){var f=d;this.removeTextareaEventListener(f),this.textarea.addEventListener(f,m[f])}},S.prototype.removeTextareaEventListener=function(m){if(this.textarea){var d=this.textareaEventListeners[m];d&&this.textarea.removeEventListener(m,d)}},S.prototype.exportMathSpeak=function(){return this.root.mathspeak()},S.prototype.updateMathspeak=function(){},S.prototype.scrollHoriz=function(){},S.prototype.selectionChanged=function(){},S.prototype.setOverflowClasses=function(){},S.notifyees=[],S}(),ce={},Ee={},H={handlers:!0,autoCommands:!0,quietEmptyDelimiters:!0,autoParenthesizedFunctions:!0,autoOperatorNames:!0,leftRightIntoCmdGoes:!0,maxDepth:!0,interpretTildeAsSim:!0},he={},De=function(){function S(m){this.version=m}return S.prototype.assertJquery=function(){return o("Interface versions > 2 do not depend on JQuery",this.version<=2),o("JQuery is set for interface v < 3",this.jQuery),this.jQuery},S}(),_e=function(){function S(){}return S}(),Me=function(){window.console&&console.warn(`You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:

    MathQuill = MathQuill.getInterface(1);
    // now MathQuill.MathField() works like it used to

See also the "\`dev\` branch (2014\u20132015) \u2192 v0.10.0 Migration Guide" at
  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide`)},He;function Ze(S){return Me(),He||(He=Tt(1)),He(S)}Ze.prototype=_e.prototype,Ze.VERSION="vv1.8",Ze.interfaceVersion=function(S){if(S!==1)throw"Only interface version 1 supported. You specified: "+S;return Me=function(){window.console&&console.warn(`You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:

    MathQuill = MathQuill.getInterface(1);
    // now MathQuill.MathField() works like it used to

See also the "\`dev\` branch (2014\u20132015) \u2192 v0.10.0 Migration Guide" at
  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide`)},Me(),Ze},Ze.getInterface=Tt;var _t=Tt.MIN=1,Re=Tt.MAX=3;function Tt(S){if(S!==1&&S!==2&&S!==3)throw"Only interface versions between "+_t+" and "+Re+" supported. You specified: "+S;var m=S;if(m<3){var d=window.jQuery;if(!d)throw"MathQuill interface version ".concat(m," requires jQuery 1.5.2+ to be loaded first");De.prototype.jQuery=d}var f=Zy(Zy({},he),{handlers:function(Ie){return{fns:Ie||{},APIClasses:X}}});function v(Ie,we){for(var Ne in we)if(we.hasOwnProperty(Ne)){if(Ne==="substituteKeyboardEvents"&&m>=3)throw new Error(["As of interface version 3, the 'substituteKeyboardEvents'","option is no longer supported. Use 'overrideTypedText' and","'overrideKeystroke' instead."].join(" "));var Be=we[Ne],Xe=f[Ne];Ie[Ne]=Xe?Xe(Be):Be}}var M=m<3?De:function(Ie){it(we,Ie);function we(){return Ie!==null&&Ie.apply(this,arguments)||this}return we}(De),F=function(Ie){it(we,Ie);function we(Ne){var Be=Ie.call(this)||this;return Be.__controller=Ne,Be.__options=Ne.options,Be.id=Ne.id,Be.data=Ne.data,Be}return we.prototype.mathquillify=function(Ne){var Be=this.__controller,Xe=Be.root,nt=Be.container;Be.createTextarea();var wt=x(nt).addClass(Ne).children().detach();Xe.setDOM(x(c("span",{class:"dcg-mq-root-block","aria-hidden":!0})).appendTo(nt).oneElement()),N.linkElementByBlockNode(Xe.domFrag().oneElement(),Xe),this.latex(wt.text()),this.revert=function(){return Be.removeMouseEventListener(),x(nt).removeClass("dcg-mq-editable-field dcg-mq-math-mode dcg-mq-text-mode").empty().append(wt),m<3?this.__options.assertJquery()(nt):nt}},we.prototype.setAriaLabel=function(Ne){return this.__controller.setAriaLabel(Ne),this},we.prototype.getAriaLabel=function(){return this.__controller.getAriaLabel()},we.prototype.config=function(Ne){return v(this.__options,Ne),this},we.prototype.el=function(){return this.__controller.container},we.prototype.text=function(){return this.__controller.exportText()},we.prototype.mathspeak=function(){return this.__controller.exportMathSpeak()},we.prototype.latex=function(Ne){if(arguments.length>0){this.__controller.renderLatexMath(Ne);var Be=this.__controller.cursor;return this.__controller.blurred&&Be.hide().parent.blur(Be),this}return this.__controller.exportLatex()},we.prototype.selection=function(){return this.__controller.exportLatexSelection()},we.prototype.html=function(){return this.__controller.root.domFrag().oneElement().innerHTML.replace(/ jQuery\d+="(?:\d+|null)"/g,"").replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?dcg-mq-cursor( dcg-mq-blink)?"?>.?<\/span>/i,"").replace(/ dcg-mq-hasCursor|dcg-mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},we.prototype.reflow=function(){return this.__controller.root.postOrder(function(Ne){Ne.reflow()}),this},we}(_e),W=function(Ie){it(we,Ie);function we(){return Ie!==null&&Ie.apply(this,arguments)||this}return we.prototype.mathquillify=function(Ne){return Ie.prototype.mathquillify.call(this,Ne),this.__controller.editable=!0,this.__controller.addMouseEventListener(),this.__controller.editablesTextareaEvents(),this},we.prototype.focus=function(){return this.__controller.getTextareaOrThrow().focus(),this.__controller.scrollHoriz(),this},we.prototype.blur=function(){return this.__controller.getTextareaOrThrow().blur(),this},we.prototype.write=function(Ne){this.__controller.writeLatex(Ne),this.__controller.scrollHoriz();var Be=this.__controller.cursor;return this.__controller.blurred&&Be.hide().parent.blur(Be),this},we.prototype.empty=function(){var Ne,Be=this.__controller.root,Xe=this.__controller.cursor;return Be.setEnds((Ne={},Ne[t]=0,Ne[e]=0,Ne)),Be.domFrag().empty(),delete Xe.selection,Xe.insAtRightEnd(Be),this},we.prototype.cmd=function(Ne){var Be=this.__controller.notify(void 0),Xe=Be.cursor;if(/^\\[a-z]+$/i.test(Ne)&&!Xe.isTooDeep()){Ne=Ne.slice(1);var nt=A[Ne],wt;nt&&(nt.constructor?wt=new nt(Ne):wt=nt(Ne),Xe.selection&&wt.replaces(Xe.replaceSelection()),wt.createLeftOf(Xe.show()))}else Xe.parent.write(Xe,Ne);return Be.scrollHoriz(),Be.blurred&&Xe.hide().parent.blur(Xe),this},we.prototype.select=function(){return this.__controller.selectAll(),this},we.prototype.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},we.prototype.moveToDirEnd=function(Ne){return this.__controller.notify("move").cursor.insAtDirEnd(Ne,this.__controller.root),this},we.prototype.moveToLeftEnd=function(){return this.moveToDirEnd(t)},we.prototype.moveToRightEnd=function(){return this.moveToDirEnd(e)},we.prototype.keystroke=function(Ne,Be){for(var Xe=Ne.replace(/^\s+|\s+$/g,"").split(/\s+/),nt=0;nt<Xe.length;nt+=1)this.__controller.keystroke(Xe[nt],Be);return this},we.prototype.typedText=function(Ne){for(var Be=0;Be<Ne.length;Be+=1)this.__controller.typedText(Ne.charAt(Be));return this},we.prototype.dropEmbedded=function(Ne,Be,Xe){var nt=Ne-E(),wt=Be-G(),vr=document.elementFromPoint(nt,wt);this.__controller.seek(vr,nt,wt);var Mi=new Yk().setOptions(Xe);Mi.createLeftOf(this.__controller.cursor)},we.prototype.setAriaPostLabel=function(Ne,Be){return this.__controller.setAriaPostLabel(Ne,Be),this},we.prototype.getAriaPostLabel=function(){return this.__controller.getAriaPostLabel()},we.prototype.clickAt=function(Ne,Be,Xe){Xe=Xe||document.elementFromPoint(Ne,Be);var nt=this.__controller,wt=nt.root,vr=wt.domFrag().oneElement();return vr.contains(Xe)||(Xe=vr),nt.seek(Xe,Ne,Be),nt.blurred&&this.focus(),this},we.prototype.ignoreNextMousedown=function(Ne){return this.__controller.cursor.options.ignoreNextMousedown=Ne,this},we}(F),X={AbstractMathQuill:F,EditableField:W};o("API.StaticMath defined",ce.StaticMath),X.StaticMath=ce.StaticMath(X),o("API.MathField defined",ce.MathField),X.MathField=ce.MathField(X),o("API.InnerMathField defined",ce.InnerMathField),X.InnerMathField=ce.InnerMathField(X),ce.TextField&&(X.TextField=ce.TextField(X));var se=function(Ie){if(!Ie||!Ie.nodeType)return null;for(var we,Ne=x(Ie).children().toElementArray(),Be=0,Xe=Ne;Be<Xe.length;Be++){var nt=Xe[Be];if(nt.classList.contains("dcg-mq-root-block")){we=nt;break}}var wt=N.getNodeOfElement(we),vr=wt&&wt.controller,Mi=vr&&X[vr.KIND_OF_MQ];return vr&&Mi?new Mi(vr):null};se.L=t,se.R=e,se.config=function(Ie){return v(M.prototype,Ie),this},se.registerEmbed=function(Ie,we){if(!/^[a-z][a-z0-9]*$/i.test(Ie))throw"Embed name must start with letter and be only letters and digits";Ee[Ie]=we},se.StaticMath=Ve("StaticMath",X.StaticMath),se.MathField=Ve("MathField",X.MathField),se.InnerMathField=Ve("InnerMathField",X.InnerMathField),X.TextField&&(se.TextField=Ve("TextField",X.TextField)),se.prototype=F.prototype,se.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},se.EditableField.prototype=W.prototype,m<3&&(se.saneKeyboardEvents=$e);function Ve(Ie,we){o(Ie+" is defined",we);function Ne(Be,Xe){if(!Be||!Be.nodeType)return null;var nt=se(Be);if(nt instanceof we)return nt;var wt=new Oo(new we.RootBlock,Be,new M(m));return wt.KIND_OF_MQ=Ie,new we(wt).__mathquillify(Xe||{},m)}return Ne.prototype=we.prototype,Ne}return se}Ze.noConflict=function(){return window.MathQuill=dr,Ze};var dr=window.MathQuill;window.MathQuill=Ze;function ve(S){S.moveOutOf=function(m){o("controller is defined",this.controller),this.controller.handle("moveOutOf",m)},S.deleteOutOf=function(m){o("controller is defined",this.controller),this.controller.handle("deleteOutOf",m)},S.selectOutOf=function(m){o("controller is defined",this.controller),this.controller.handle("selectOutOf",m)},S.upOutOf=function(){o("controller is defined",this.controller),this.controller.handle("upOutOf")},S.downOutOf=function(){o("controller is defined",this.controller),this.controller.handle("downOutOf")},S.reflow=function(){o("controller is defined",this.controller),this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}function _r(S,m){throw S?S="'"+S+"'":S="EOF","Parse Error: "+m+" at "+S}var rt=function(){function S(m){this._=m}return S.prototype.parse=function(m){return this.skip(S.eof)._(""+m,d,_r);function d(f,v){return v}},S.prototype.or=function(m){o("or is passed a parser",m instanceof S);var d=this;return new S(function(f,v,M){return d._(f,v,F);function F(W){return m._(f,v,M)}})},S.prototype.then=function(m){var d=this;return new S(function(f,v,M){return d._(f,F,M);function F(W,X){var se=m instanceof S?m:m(X);return o("a parser is returned",se instanceof S),se._(W,v,M)}})},S.prototype.many=function(){var m=this;return new S(function(d,f,v){for(var M=[];m._(d,F,W););return f(d,M);function F(X,se){return d=X,M.push(se),!0}function W(){return!1}})},S.prototype.times=function(m,d){arguments.length<2&&(d=m);var f=this;return new S(function(v,M,F){for(var W=[],X=!0,se,Ve=0;Ve<m;Ve+=1)if(X=!!f._(v,Ie,we),!X)return F(v,se);for(;Ve<d&&X;Ve+=1)f._(v,Ie,Ne);return M(v,W);function Ie(Be,Xe){return W.push(Xe),v=Be,!0}function we(Be,Xe){return se=Xe,v=Be,!1}function Ne(Be,Xe){return!1}})},S.prototype.result=function(m){return this.then(S.succeed(m))},S.prototype.atMost=function(m){return this.times(0,m)},S.prototype.atLeast=function(m){var d=this;return d.times(m).then(function(f){return d.many().map(function(v){return f.concat(v)})})},S.prototype.map=function(m){return this.then(function(d){return S.succeed(m(d))})},S.prototype.skip=function(m){return this.then(function(d){return m.result(d)})},S.string=function(m){var d=m.length,f="expected '"+m+"'";return new S(function(v,M,F){var W=v.slice(0,d);return W===m?M(v.slice(d),W):F(v,f)})},S.regex=function(m){o("regexp parser is anchored",m.toString().charAt(1)==="^");var d="expected "+m;return new S(function(f,v,M){var F=m.exec(f);if(F){var W=F[0];return v(f.slice(W.length),W)}else return M(f,d)})},S.succeed=function(m){return new S(function(d,f){return f(d,m)})},S.fail=function(m){return new S(function(d,f,v){return v(d,m)})},S.letter=S.regex(/^[a-z]/i),S.letters=S.regex(/^[a-z]*/i),S.digit=S.regex(/^[0-9]/),S.digits=S.regex(/^[0-9]*/),S.whitespace=S.regex(/^\s+/),S.optWhitespace=S.regex(/^\s*/),S.any=new S(function(m,d,f){return m?d(m.slice(1),m.charAt(0)):f(m,"expected any character")}),S.all=new S(function(m,d,f){return d("",m)}),S.eof=new S(function(m,d,f){return m?f(m,"expected EOF"):d(m,m)}),S}(),xe=function(){function S(){this.fn=n}return S.prototype.listen=function(m){this.fn=m,clearTimeout(this.timeoutId),this.timeoutId=setTimeout(this.fn)},S.prototype.listenOnce=function(m){var d=this;this.listen(function(){for(var f=[],v=0;v<arguments.length;v++)f[v]=arguments[v];d.clearListener(),m.apply(void 0,f)})},S.prototype.clearListener=function(){this.fn=n,clearTimeout(this.timeoutId)},S.prototype.trigger=function(){for(var m=[],d=0;d<arguments.length;d++)m[d]=arguments[d];this.fn.apply(this,m)},S}(),dn=function(){var S={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"},m={ArrowRight:"Right",ArrowLeft:"Left",ArrowDown:"Down",ArrowUp:"Up",Delete:"Del",Escape:"Esc"," ":"Spacebar"};function d(F){switch(v(F)){case"Right":case"Left":case"Down":case"Up":return!0}return!1}function f(F){return F.length===1&&F>="a"&&F<="z"}function v(F){var W;if(F.key===void 0){var X=F.which||F.keyCode;return S[X]||String.fromCharCode(X)}return f(F.key)?F.key.toUpperCase():(W=m[F.key])!==null&&W!==void 0?W:F.key}function M(F){var W=v(F),X=[];return F.ctrlKey&&X.push("Ctrl"),F.metaKey&&X.push("Meta"),F.altKey&&X.push("Alt"),F.shiftKey&&X.push("Shift"),X.length?(W!=="Alt"&&W!=="Control"&&W!=="Meta"&&W!=="Shift"&&X.push(W),X.join("-")):W}return function(W,X){var se=null,Ve=null,Ie=new xe;function we(){try{W instanceof HTMLTextAreaElement&&W.select()}catch(Er){}}function Ne(Er){Ie.trigger(),Ie.clearListener(),W instanceof HTMLTextAreaElement&&(W.value=Er),Er&&we(),Be=!!Er}var Be=!1;function Xe(){return!("selectionStart"in W)||!(W instanceof HTMLTextAreaElement)?!1:W.selectionStart!==W.selectionEnd}function nt(){X.options&&X.options.overrideKeystroke?X.options.overrideKeystroke(M(se),se):X.keystroke(M(se),se)}function wt(Er){Ie.trigger(Er),Er.target===W&&(se=Er,Ve=null,Be&&Ie.listenOnce(function(sc){sc&&sc.type==="focusout"||we()}),nt())}function vr(Er){Ie.trigger(Er),Er.target===W&&(se&&Ve&&nt(),Ve=Er,d(Er)?Ie.listenOnce(Ki):Ie.listen(Sr))}function Mi(Er){Ie.trigger(Er),Er.target===W&&se&&!Ve&&(d(Er)?Ie.listenOnce(Ki):Ie.listen(Sr))}function Sr(){if(!Xe()&&W instanceof HTMLTextAreaElement){var Er=W.value;se&&!se.altKey&&se.ctrlKey&&!se.metaKey&&se.shiftKey&&(se.key==="U"||se.key==="Unidentified"||se.key==="Process")||(Er.length===1?(W.value="",X.options&&X.options.overrideTypedText?X.options.overrideTypedText(Er):X.typedText(Er)):Ki())}}function Ki(){W instanceof HTMLTextAreaElement&&W.value.length>1&&we()}function ta(){se=null,Ve=null,Ie.clearListener(),W instanceof HTMLTextAreaElement&&(W.value="")}function wa(Er){Ie.trigger(),Er.target===W&&(document.activeElement!==W&&W.focus(),Ie.listen(function(){if(W instanceof HTMLTextAreaElement){var Ts=W.value;W.value="",Ts&&X.paste(Ts)}}))}function zc(Er){Ie.trigger(Er)}return X.options&&X.options.disableCopyPaste?X.addTextareaEventListeners({keydown:wt,keypress:vr,keyup:Mi,focusout:ta,copy:function(Er){Er.preventDefault()},cut:function(Er){Er.preventDefault()},paste:function(Er){Ie.trigger(),Er.preventDefault()},input:zc}):X.addTextareaEventListeners({keydown:wt,keypress:vr,keyup:Mi,focusout:ta,cut:function(){Ie.listenOnce(function(){X.cut()})},copy:function(){Ie.listenOnce(function(){X.copy()})},paste:wa,input:zc}),{select:Ne}}}(),Je=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m.prototype.exportText=function(){return this.root.foldChildren("",function(d,f){return d+f.text()})},m}(Se);Se.onNotify(function(S,m){if(m==="edit"||m==="replace"||m===void 0){var d=S.controller;if(!d||!d.options.enableDigitGrouping||d.blurred!==!1)return;d.disableGroupingForSeconds(1)}});var ot=function(S){it(m,S);function m(){var d=S!==null&&S.apply(this,arguments)||this;return d.handleTextareaFocusEditable=function(){var f=d.cursor;d.updateMathspeak(),d.blurred=!1,clearTimeout(d.blurTimeout),x(d.container).addClass("dcg-mq-focused"),f.parent||f.insAtRightEnd(d.root),f.selection?(f.selection.domFrag().removeClass("dcg-mq-blur"),d.selectionChanged()):f.show(),d.setOverflowClasses()},d.handleTextareaBlurEditable=function(){d.textareaSelectionTimeout&&(clearTimeout(d.textareaSelectionTimeout),d.textareaSelectionTimeout=0),d.disableGroupingForSeconds(0),d.blurred=!0,d.blurTimeout=setTimeout(function(){d.root.postOrder(function(f){f.intentionalBlur()}),d.cursor.clearSelection().endSelection(),d.blur(),d.updateMathspeak(),d.scrollHoriz()}),window.addEventListener("blur",d.handleWindowBlur)},d.handleTextareaFocusStatic=function(){d.blurred=!1},d.handleTextareaBlurStatic=function(){d.cursor.selection&&d.cursor.selection.clear(),setTimeout(function(){x(d.getTextareaSpanOrThrow()).detach(),d.blurred=!0})},d.handleWindowBlur=function(){clearTimeout(d.blurTimeout),d.cursor.selection&&d.cursor.selection.domFrag().addClass("dcg-mq-blur"),d.blur(),d.updateMathspeak()},d}return m.prototype.disableGroupingForSeconds=function(d){var f=this;clearTimeout(this.__disableGroupingTimeout),d===0?this.root.domFrag().removeClass("dcg-mq-suppress-grouping"):(this.root.domFrag().addClass("dcg-mq-suppress-grouping"),this.__disableGroupingTimeout=setTimeout(function(){f.root.domFrag().removeClass("dcg-mq-suppress-grouping")},d*1e3))},m.prototype.blur=function(){this.cursor.hide().parent.blur(this.cursor),x(this.container).removeClass("dcg-mq-focused"),window.removeEventListener("blur",this.handleWindowBlur),this.options&&this.options.resetCursorOnBlur&&this.cursor.resetToEnd(this)},m.prototype.addEditableFocusBlurListeners=function(){var d=this,f=d.cursor;this.addTextareaEventListeners({focus:this.handleTextareaFocusEditable,blur:this.handleTextareaBlurEditable}),d.blurred=!0,f.hide().parent.blur(f)},m.prototype.addStaticFocusBlurListeners=function(){this.addTextareaEventListeners({focus:this.handleTextareaFocusStatic,blur:this.handleTextareaBlurStatic})},m}(Je),st=!1,ae=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m.prototype.keystroke=function(d,f,v){var M=v.cursor;switch(d){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":v.ctrlDeleteDir(t);break;case"Shift-Backspace":case"Backspace":v.backspace();break;case"Esc":case"Tab":v.escapeDir(e,d,f);return;case"Shift-Tab":case"Shift-Esc":v.escapeDir(t,d,f);return;case"End":v.notify("move").cursor.insAtRightEnd(M.parent),v.aria.queue("end of").queue(M.parent,!0);break;case"Ctrl-End":v.notify("move").cursor.insAtRightEnd(v.root),v.aria.queue("end of").queue(v.ariaLabel).queue(v.root).queue(v.ariaPostLabel);break;case"Shift-End":v.selectToBlockEndInDir(e);break;case"Ctrl-Shift-End":v.selectToRootEndInDir(e);break;case"Home":v.notify("move").cursor.insAtLeftEnd(M.parent),v.aria.queue("beginning of").queue(M.parent,!0);break;case"Ctrl-Home":v.notify("move").cursor.insAtLeftEnd(v.root),v.aria.queue("beginning of").queue(v.ariaLabel).queue(v.root).queue(v.ariaPostLabel);break;case"Shift-Home":v.selectToBlockEndInDir(t);break;case"Ctrl-Shift-Home":v.selectToRootEndInDir(t);break;case"Left":v.moveLeft();break;case"Shift-Left":v.selectLeft();break;case"Ctrl-Left":break;case"Right":v.moveRight();break;case"Shift-Right":v.selectRight();break;case"Ctrl-Right":break;case"Up":v.moveUp();break;case"Down":v.moveDown();break;case"Shift-Up":v.withIncrementalSelection(function(F){if(M[t])for(;M[t];)F(t);else F(t)});break;case"Shift-Down":v.withIncrementalSelection(function(F){if(M[e])for(;M[e];)F(e);else F(e)});break;case"Ctrl-Up":break;case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":v.ctrlDeleteDir(e);break;case"Shift-Del":case"Del":v.deleteForward();break;case"Meta-A":case"Ctrl-A":v.selectAll();break;case"Ctrl-Alt-Up":M.parent.parent&&M.parent.parent instanceof m?v.aria.queue(M.parent.parent):v.aria.queue("nothing above");break;case"Ctrl-Alt-Down":M.parent&&M.parent instanceof m?v.aria.queue(M.parent):v.aria.queue("block is empty");break;case"Ctrl-Alt-Left":M.parent.parent&&M.parent.parent.getEnd(t)?v.aria.queue(M.parent.parent.getEnd(t)):v.aria.queue("nothing to the left");break;case"Ctrl-Alt-Right":M.parent.parent&&M.parent.parent.getEnd(e)?v.aria.queue(M.parent.parent.getEnd(e)):v.aria.queue("nothing to the right");break;case"Ctrl-Alt-Shift-Down":M.selection?v.aria.queue(M.selection.join("mathspeak"," ").trim()+" selected"):v.aria.queue("nothing selected");break;case"Ctrl-Alt-=":case"Ctrl-Alt-Shift-Right":v.ariaPostLabel.length?v.aria.queue(v.ariaPostLabel):v.aria.queue("no answer");break;default:return}v.aria.alert(),f==null||f.preventDefault(),v.scrollHoriz()},m.prototype.moveOutOf=function(d,f,v){o("overridden or never called on this node",!1)},m.prototype.moveTowards=function(d,f,v){o("overridden or never called on this node",!1)},m.prototype.deleteOutOf=function(d,f){o("overridden or never called on this node",!1)},m.prototype.deleteTowards=function(d,f){o("overridden or never called on this node",!1)},m.prototype.unselectInto=function(d,f){o("overridden or never called on this node",!1)},m.prototype.selectOutOf=function(d,f){o("overridden or never called on this node",!1)},m.prototype.selectTowards=function(d,f){o("overridden or never called on this node",!1)},m}(N);Se.onNotify(function(S,m){(m==="move"||m==="upDown")&&S.show().clearSelection()}),he.leftRightIntoCmdGoes=function(S){if(S&&S!=="up"&&S!=="down")throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+S+'"';return S},Se.onNotify(function(S,m){m!=="upDown"&&(S.upDownCache={})}),Se.onNotify(function(S,m){m==="edit"&&S.show().deleteSelection()}),Se.onNotify(function(S,m){m!=="select"&&S.endSelection()});var ar=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m.prototype.keystroke=function(d,f){this.cursor.parent.keystroke(d,f,this.getControllerSelf())},m.prototype.escapeDir=function(d,f,v){a(d);var M=this.cursor;if(M.parent!==this.root&&(v==null||v.preventDefault()),M.parent!==this.root)return M.clearSelection(),M.parent.moveOutOf(d,M),M.controller.aria.alert(),this.notify("move")},m.prototype.moveDir=function(d){a(d);var f=this.cursor,v=f.options.leftRightIntoCmdGoes,M=f[d];return f.selection?f.insDirOf(d,f.selection.getEnd(d)):M?M.moveTowards(d,f,v):f.parent.moveOutOf(d,f,v),this.notify("move")},m.prototype.moveLeft=function(){return this.moveDir(t)},m.prototype.moveRight=function(){return this.moveDir(e)},m.prototype.moveUp=function(){return this.moveUpDown("up")},m.prototype.moveDown=function(){return this.moveUpDown("down")},m.prototype.moveUpDown=function(d){var f=this,v=f.notify("upDown").cursor,M,F;d==="up"?(M="upInto",F="upOutOf"):(M="downInto",F="downOutOf");var W=v[t],X=v[e],se=X&&X[M],Ve=W&&W[M];return se?v.insAtLeftEnd(se):Ve?v.insAtRightEnd(Ve):v.parent.bubble(function(Ie){var we=Ie[F];if(we&&(typeof we=="function"&&(we=we.call(Ie,v)),we instanceof ae&&v.jumpUpDown(Ie,we),we!==!0))return!1}),f},m.prototype.deleteDir=function(d){a(d);var f=this.cursor,v=f[d],M=f.parent.parent,F=f.controller;if(v&&v instanceof ae)v.sides?F.aria.queue(v.parent.chToCmd(v.sides[-d].ch).mathspeak({createdLeftOf:f})):!v.blocks&&v.parent.ctrlSeq!=="\\text"&&F.aria.queue(v);else if(M&&M instanceof ae)if(M.sides)F.aria.queue(M.parent.chToCmd(M.sides[d].ch).mathspeak({createdLeftOf:f}));else if(M.blocks&&M.mathspeakTemplate)if(M.upInto&&M.downInto)F.aria.queue(M.mathspeakTemplate[1]);else{var W=M.mathspeakTemplate,X=d===t?W[0]:W[W.length-1];F.aria.queue(X)}else F.aria.queue(M);var se=f.selection;if(this.notify("edit"),!se){var Ve=f[d];Ve?Ve.deleteTowards(d,f):f.parent.deleteOutOf(d,f)}var Ie=f[t],we=f[e];return Ie.siblingDeleted&&Ie.siblingDeleted(f.options,e),we.siblingDeleted&&we.siblingDeleted(f.options,t),f.parent.bubble(function(Ne){Ne.reflow()}),this},m.prototype.ctrlDeleteDir=function(d){a(d);var f=this.cursor;if(!f[d]||f.selection)return this.deleteDir(d);this.notify("edit");var v;d===t?v=new B(f.parent.getEnd(t),f[t]):v=new B(f[e],f.parent.getEnd(e)),f.controller.aria.queue(v),v.remove(),f.insAtDirEnd(d,f.parent);var M=f[t],F=f[e];return M&&M.siblingDeleted(f.options,e),F&&F.siblingDeleted(f.options,t),f.parent.bubble(function(W){W.reflow()}),this},m.prototype.backspace=function(){return this.deleteDir(t)},m.prototype.deleteForward=function(){return this.deleteDir(e)},m.prototype.startIncrementalSelection=function(){o("Multiple selections can't be simultaneously open",!st),st=!0,this.notify("select");var d=this.cursor;d.anticursor||d.startSelection()},m.prototype.selectDirIncremental=function(d){o("A selection is open",st),st=!0;var f=this.cursor,v=f.selection;a(d);var M=f[d];M?v&&v.getEnd(d)===M&&f.anticursor[-d]!==M?M.unselectInto(d,f):M.selectTowards(d,f):f.parent.selectOutOf(d,f)},m.prototype.finishIncrementalSelection=function(){o("A selection is open",st);var d=this.cursor;d.clearSelection(),d.select()||d.show();var f=d.selection;f&&d.controller.aria.clear().queue(f.join("mathspeak"," ").trim()+" selected"),st=!1},m.prototype.withIncrementalSelection=function(d){var f=this;try{this.startIncrementalSelection();try{d(function(v){return f.selectDirIncremental(v)})}finally{this.finishIncrementalSelection()}}finally{st=!1}},m.prototype.selectDir=function(d){this.withIncrementalSelection(function(f){return f(d)})},m.prototype.selectLeft=function(){return this.selectDir(t)},m.prototype.selectRight=function(){return this.selectDir(e)},m.prototype.selectAll=function(){this.notify("move");var d=this.cursor;d.insAtRightEnd(this.root),this.withIncrementalSelection(function(f){for(;d[t];)f(t)})},m.prototype.selectToBlockEndInDir=function(d){var f=this.cursor;this.withIncrementalSelection(function(v){for(;f[d];)v(d)})},m.prototype.selectToRootEndInDir=function(d){var f=this,v=this.cursor;this.withIncrementalSelection(function(M){for(;v[d]||v.parent!==f.root;)M(d)})},m}(ot),Te=function(S){it(m,S);function m(d){return S.call(this)||this}return m}(ae),Nt=function(){function S(Sr){var Ki=new ii;return Sr.adopt(Ki,0,0),Ki}function m(Sr){for(var Ki=Sr[0]||new ii,ta=1;ta<Sr.length;ta+=1)Sr[ta].children().adopt(Ki,Ki.getEnd(e),0);return Ki}var d=rt.string,f=rt.regex,v=rt.letter,M=rt.digit,F=rt.any,W=rt.optWhitespace,X=rt.succeed,se=rt.fail,Ve=v.map(function(Sr){return new de(Sr)}),Ie=M.map(function(Sr){return new Z(Sr)}),we=f(/^[^${}\\_^]/).map(function(Sr){return new Ha(Sr)}),Ne=f(/^[^\\a-eg-zA-Z]/).or(d("\\").then(f(/^[a-z]+/i).or(f(/^\s+/).result(" ")).or(F))).then(function(Sr){var Ki=A[Sr];if(Ki)if(Ki.constructor){var ta=Ki;return new ta(Sr).parser()}else{var wa=Ki;return wa(Sr).parser()}else return se("unknown command: \\"+Sr)}),Be=Ne.or(Ve).or(Ie).or(we),Xe=d("{").then(function(){return wt}).skip(d("}")),nt=W.then(Xe.or(Be.map(S))),wt=nt.many().map(m).skip(W),vr=d("[").then(nt.then(function(Sr){return Sr.join("latex")!=="]"?X(Sr):se("")}).many().map(m).skip(W)).skip(d("]")),Mi=wt;return Mi.block=nt,Mi.optBlock=vr,Mi}();he.maxDepth=function(S){return typeof S=="number"?S:void 0};var me=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m.prototype.cleanLatex=function(d){return d.replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},m.prototype.exportLatex=function(){return this.cleanLatex(this.root.latex())},m.prototype.writeLatex=function(d){var f=this.notify("edit").cursor;return f.parent.writeLatex(f,d),this},m.prototype.exportLatexSelection=function(){var d={latex:"",startIndex:-1,endIndex:-1},f=this.cursor.selection;if(f)d.startSelectionBefore=f.getEnd(t),d.endSelectionAfter=f.getEnd(e);else{var v=this.cursor[t];v?d.startSelectionAfter=v:d.startSelectionBefore=this.cursor.parent;var M=this.cursor[e];M?d.endSelectionBefore=M:d.endSelectionAfter=this.cursor.parent}this.root.latexRecursive(d);for(var F=d.latex,W=this.cleanLatex(F),X=d.startIndex,se=d.endIndex,Ve=0,Ie=0;Ie<d.endIndex;Ie++)F[Ie]!==W[Ve]?(Ie<d.startIndex&&(X-=1),se-=1):Ve+=1;return{latex:W,startIndex:X,endIndex:se}},m.prototype.classifyLatexForEfficientUpdate=function(d){if(typeof d=="string"){var f=d.match(/-?[0-9.]+$/g);if(f&&f.length===1)return{latex:d,prefix:d.substr(0,d.length-f[0].length),digits:f[0]}}},m.prototype.updateLatexMathEfficiently=function(d,f){var v,M,F,W,X=this.root,se,Ve=this.classifyLatexForEfficientUpdate(d);if(Ve){if(se=this.classifyLatexForEfficientUpdate(f),!se||se.prefix!==Ve.prefix)return!1}else return!1;var Ie=se.digits,we=Ve.digits,Ne=!1,Be=!1;Ie[0]==="-"&&(Ne=!0,Ie=Ie.substr(1)),we[0]==="-"&&(Be=!0,we=we.substr(1));for(var Xe=this.root.getEnd(e),nt=[],wt=Ie.length-1;wt>=0;wt--){if(!Xe||Xe.ctrlSeq!==Ie[wt]||Xe.parent!==X)return!1;nt.unshift(Xe),Xe=Xe[t]}if(Ne&&!Be){var vr=Xe;if(!vr||vr.ctrlSeq!=="-"||vr[e]!==nt[0]||vr.parent!==X)return!1;var Mi=vr[t];if(Mi&&Mi.parent!==X)return!1;nt[0][t]=vr[t],X.getEnd(t)===vr&&X.setEnds((v={},v[t]=nt[0],v[e]=X.getEnd(e),v)),Mi&&(Mi[e]=nt[0]),vr.domFrag().remove()}if(!Ne&&Be){var Sr=new pt("-"),Ki=document.createElement("span");Ki.textContent="-",Sr.setDOM(Ki);var ta=nt[0][t];ta&&(ta[e]=Sr),X.getEnd(t)===nt[0]&&X.setEnds((M={},M[t]=Sr,M[e]=X.getEnd(e),M)),Sr.parent=X,Sr[t]=nt[0][t],Sr[e]=nt[0],nt[0][t]=Sr,Sr.contactWeld(this.cursor),Sr.domFrag().insertBefore(nt[0].domFrag())}var wa=Math.min(Ie.length,we.length);for(wt=0;wt<wa;wt++){var zc=we[wt];Xe=nt[wt],Xe.ctrlSeq!==zc&&(Xe.ctrlSeq=zc,Xe.domFrag().oneElement().textContent=zc,Xe.mathspeakName=zc)}if(Ie.length>we.length)for(Xe=nt[we.length-1],X.setEnds((F={},F[t]=X.getEnd(t),F[e]=Xe,F)),Xe[e]=0,wt=Ie.length-1;wt>=wa;wt--)nt[wt].domFrag().remove();if(we.length>Ie.length){var Er=document.createDocumentFragment();for(wt=wa;wt<we.length;wt++){var sc=document.createElement("span");sc.className="dcg-mq-digit",sc.textContent=we[wt];var Ts=new Z(we[wt]);Ts.parent=X,Ts.setDOM(sc),Er.appendChild(sc),Ts[t]=X.getEnd(e),Ts[e]=0;var X_=Ts[t];X_[e]=Ts,X.setEnds((W={},W[t]=X.getEnd(t),W[e]=Ts,W))}X.domFrag().oneElement().appendChild(Er)}var Xk=this.exportLatex();if(Xk!==d)return console.warn("tried updating latex efficiently but did not work. Attempted: "+d+" but wrote: "+Xk),!1;var Qk=X.getEnd(e);return Qk&&Qk.fixDigitGrouping(this.cursor.options),!0},m.prototype.renderLatexMathFromScratch=function(d){var f,v=this.root,M=this.cursor,F=rt.all,W=rt.eof,X=Nt.skip(W).or(F.result(!1)).parse(d);if(v.setEnds((f={},f[t]=0,f[e]=0,f)),X&&X.children().adopt(v,0,0),X){var se=v.domFrag();se.children().remove(),se.oneElement().appendChild(X.html()),v.finalizeInsert(M.options,M)}else v.domFrag().empty()},m.prototype.renderLatexMath=function(d){var f=this.cursor,v=this.root;this.notify("replace"),f.clearSelection();var M=this.exportLatex();(!v.getEnd(t)||!v.getEnd(e)||M!==d)&&(this.updateLatexMathEfficiently(d,M)||this.renderLatexMathFromScratch(d),this.updateMathspeak()),f.insAtRightEnd(v)},m.prototype.renderLatexText=function(d){var f,v=this.root,M=this.cursor;v.domFrag().children().slice(1).remove(),v.setEnds((f={},f[t]=0,f[e]=0,f)),delete M.selection,M.show().insAtRightEnd(v);var F=rt.regex,W=rt.string,X=rt.eof,se=rt.all,Ve=W("$").then(Nt).skip(W("$").or(X)).map(function(nt){var wt=new RootMathCommand(M);wt.createBlocks();var vr=wt.getEnd(t);return nt.children().adopt(vr,0,0),wt}),Ie=W("\\$").result("$"),we=Ie.or(F(/^[^$]/)).map(function(nt){return new Ha(nt)}),Ne=Ve.or(we).many(),Be=Ne.skip(X).or(se.result(!1)).parse(d);if(Be){for(var Xe=0;Xe<Be.length;Xe+=1)Be[Xe].adopt(v,v.getEnd(e),0);x(v.html()).appendTo(v.domFrag().oneElement()),v.finalizeInsert(M.options,M)}},m}(ar),gt=function(S){return!1};De.prototype.ignoreNextMousedown=gt;var xt;(function(){Se.onNotify(function(S,m){(m==="edit"||m==="replace")&&xt&&xt.cursor===S&&xt.cb()})})();var Ce=function(S){it(m,S);function m(){var d=S!==null&&S.apply(this,arguments)||this;return d.handleMouseDown=function(f){var v=u(f.target,".dcg-mq-root-block"),M=v&&N.getNodeOfElement(v)||N.getNodeOfElement(d.root.domFrag().oneElement()),F=M.domFrag().firstNode().ownerDocument,W=M.controller,X=W.cursor,se=X.blink,Ve=W.getTextareaSpanOrThrow(),Ie=W.getTextareaOrThrow();if(f.preventDefault(),f.target.unselectable=!0,X.options.ignoreNextMousedown(f)||(X.options.ignoreNextMousedown=gt,u(f.target,".dcg-mq-ignore-mousedown")))return;var we=null;function Ne(Mi){we=Mi.target}function Be(Mi){X.anticursor||X.startSelection(),W.seek(we,Mi.clientX,Mi.clientY).cursor.select(),X.selection&&X.controller.aria.clear().queue(X.selection.join("mathspeak")+" selected").alert(),we=null}function Xe(){v==null||v.removeEventListener("mousemove",Ne),F==null||F.removeEventListener("mousemove",Be),F==null||F.removeEventListener("mouseup",wt),xt=void 0}function nt(){W.editable?(X.show(),X.controller.aria.queue(X.parent).alert()):x(Ve).detach()}function wt(){X.blink=se,X.selection||nt(),Xe()}var vr;xt={cursor:X,cb:function(){vr=!0,X.blink=se,X.clearSelection(),nt(),Xe()}},!(W.blurred&&(v&&!W.editable&&x(v).prepend(x(Ve)),Ie.focus(),vr))&&(X.blink=n,W.seek(f.target,f.clientX,f.clientY).cursor.startSelection(),v==null||v.addEventListener("mousemove",Ne),F==null||F.addEventListener("mousemove",Be),F==null||F.addEventListener("mouseup",wt))},d}return m.prototype.addMouseEventListener=function(){this.container.addEventListener("mousedown",this.handleMouseDown)},m.prototype.removeMouseEventListener=function(){this.container.removeEventListener("mousedown",this.handleMouseDown)},m.prototype.seek=function(d,f,v){for(var M=this.notify("select").cursor,F;d&&(F=N.getNodeOfElement(d),!F);)d=d.parentElement;return F||(F=this.root),M.clearSelection().show(),F.seek(f,M),this.scrollHoriz(),this},m}(me),Mr=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m.prototype.setOverflowClasses=function(){var d=this.root.domFrag().oneElement(),f=!1,v=!1;if(!this.blurred){var M=I(d).width,F=d.scrollWidth,W=d.scrollLeft;f=F>M+W,v=W>0}d.classList.contains("dcg-mq-editing-overflow-right")!==f&&d.classList.toggle("dcg-mq-editing-overflow-right"),d.classList.contains("dcg-mq-editing-overflow-left")!==v&&d.classList.toggle("dcg-mq-editing-overflow-left")},m.prototype.scrollHoriz=function(){var d=this,f=this.cursor,v=f.selection,M=I(this.root.domFrag().oneElement());if(f.domFrag().isEmpty()&&!v){this.cancelScrollHoriz&&(this.cancelScrollHoriz(),this.cancelScrollHoriz=void 0);var F=this.root.domFrag().oneElement(),W=F.scrollLeft;T(this.getScrollAnimationDuration(),function(nt,wt,vr){nt>=1?(d.cancelScrollHoriz=void 0,F.scrollLeft=0,d.setOverflowClasses()):(d.cancelScrollHoriz=vr,wt(),F.scrollLeft=Math.round((1-nt)*W))});return}else if(v){var Ve=I(v.domFrag().oneElement()),Ie=Ve.left-(M.left+20),we=Ve.right-(M.right-20);if(v.getEnd(t)===f[e])if(Ie<0)var se=Ie;else if(we>0)if(Ve.left-we<M.left+20)var se=Ie;else var se=we;else return;else if(we>0)var se=we;else if(Ie<0)if(Ve.right-Ie>M.right-20)var se=we;else var se=Ie;else return}else{var X=I(f.domFrag().oneElement()).left;if(X>M.right-20)var se=X-(M.right-20);else if(X<M.left+20)var se=X-(M.left+20);else return}var Ne=this.root.domFrag().oneElement();if(!(se<0&&Ne.scrollLeft===0)&&!(se>0&&Ne.scrollWidth<=Ne.scrollLeft+M.width)){this.cancelScrollHoriz&&(this.cancelScrollHoriz(),this.cancelScrollHoriz=void 0);var Be=this.root.domFrag().oneElement(),Xe=Be.scrollLeft;T(this.getScrollAnimationDuration(),function(nt,wt,vr){nt>=1?(d.cancelScrollHoriz=void 0,Be.scrollLeft=Math.round(Xe+se),d.setOverflowClasses()):(d.cancelScrollHoriz=vr,wt(),Be.scrollLeft=Math.round(Xe+nt*se))})}},m.prototype.getScrollAnimationDuration=function(){var d;return(d=this.options.scrollAnimationDuration)!==null&&d!==void 0?d:100},m}(Ce);De.prototype.substituteTextarea=function(){return c("textarea",{autocapitalize:"off",autocomplete:"off",autocorrect:"off",spellcheck:!1,"x-palm-disable-ste-all":!0})};function $e(S,m){return dn(S[0],m)}De.prototype.substituteKeyboardEvents=$e;var Oo=function(S){it(m,S);function m(){var d=S!==null&&S.apply(this,arguments)||this;return d.selectFn=n,d}return m.prototype.createTextarea=function(){this.textareaSpan=c("span",{class:"dcg-mq-textarea"});var d=this.options.substituteTextarea();if(!d.nodeType)throw"substituteTextarea() must return a DOM element, got "+d;this.textarea=x(d).appendTo(this.textareaSpan).oneElement();var f=this;f.cursor.selectionChanged=function(){f.selectionChanged()}},m.prototype.selectionChanged=function(){var d=this;d.textareaSelectionTimeout||(d.textareaSelectionTimeout=setTimeout(function(){d.setTextareaSelection()}))},m.prototype.setTextareaSelection=function(){this.textareaSelectionTimeout=0;var d="";this.cursor.selection&&(d=this.cleanLatex(this.cursor.selection.join("latex")),this.options.statelessClipboard&&(d="$"+d+"$")),this.selectFn(d)},m.prototype.staticMathTextareaEvents=function(){var d=this;this.removeTextareaEventListener("cut"),this.removeTextareaEventListener("paste"),d.options.disableCopyPaste?this.removeTextareaEventListener("copy"):this.addTextareaEventListeners({copy:function(){d.setTextareaSelection()}}),this.addStaticFocusBlurListeners(),d.selectFn=function(f){var v=d.getTextareaOrThrow();v instanceof HTMLTextAreaElement&&(v.value=f,f&&v.select())}},m.prototype.editablesTextareaEvents=function(){var d=this,f=d.getTextareaOrThrow(),v=d.getTextareaSpanOrThrow();if(this.options.version<3){var M=this.options.assertJquery(),F=this.options.substituteKeyboardEvents(M(f),this);this.selectFn=function(X){F.select(X)}}else{var W=dn(f,this).select;this.selectFn=W}x(this.container).prepend(x(v)),this.addEditableFocusBlurListeners(),this.updateMathspeak()},m.prototype.unbindEditablesEvents=function(){var d=this,f=d.getTextareaOrThrow(),v=d.getTextareaSpanOrThrow();this.selectFn=function(M){f instanceof HTMLTextAreaElement&&(f.value=M,M&&f.select())},x(v).remove(),this.removeTextareaEventListener("focus"),this.removeTextareaEventListener("blur"),d.blurred=!0,this.removeTextareaEventListener("cut"),this.removeTextareaEventListener("paste")},m.prototype.typedText=function(d){if(d===`
`)return this.handle("enter");var f=this.notify(void 0).cursor;f.parent.write(f,d),this.scrollHoriz()},m.prototype.cut=function(){var d=this,f=d.cursor;f.selection&&setTimeout(function(){d.notify("edit"),f.parent.bubble(function(v){v.reflow()}),d.options&&d.options.onCut&&d.options.onCut()})},m.prototype.copy=function(){this.setTextareaSelection()},m.prototype.paste=function(d){this.options.statelessClipboard&&(d.slice(0,1)==="$"&&d.slice(-1)==="$"?d=d.slice(1,-1):d="\\text{"+d+"}"),this.writeLatex(d).cursor.show(),this.scrollHoriz(),this.options&&this.options.onPaste&&this.options.onPaste()},m.prototype.setupStaticField=function(){this.mathspeakSpan=c("span",{class:"dcg-mq-mathspeak"}),x(this.container).prepend(x(this.mathspeakSpan)),this.updateMathspeak(),this.blurred=!0,this.cursor.hide().parent.blur(this.cursor)},m.prototype.updateMathspeak=function(){var d=this,f=d.getAriaLabel(),v=/[A-Za-z0-9]$/.test(f)?f+":":f,M=d.root.mathspeak().trim();this.aria.clear();var F=d.getTextareaOrThrow();d.mathspeakSpan?(F.setAttribute("aria-label",""),d.mathspeakSpan.textContent=(v+" "+M).trim()):F.setAttribute("aria-label",(v+" "+M+" "+d.ariaPostLabel).trim())},m}(Mr),vt=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m.prototype.finalizeInsert=function(d,f){var v=this;v.postOrder(function(W){W.finalizeTree(d)}),v.postOrder(function(W){W.contactWeld(f)}),v.postOrder(function(W){W.blur(f)}),v.postOrder(function(W){W.reflow()});var M=v[e],F=v[t];M&&M.siblingCreated(d,t),F&&F.siblingCreated(d,e),v.bubble(function(W){W.reflow()})},m.prototype.prepareInsertionAt=function(d){var f=d.options.maxDepth;if(f!==void 0){var v=d.depth();if(v>f)return!1;this.removeNodesDeeperThan(f-v)}return!0},m.prototype.removeNodesDeeperThan=function(d){for(var f=0,v=[[this,f]],M;M=v.shift();){var F=M;F[0].children().each(function(W){var X=W instanceof ii?1:0;f=F[1]+X,f<=d?v.push([W,f]):(X?W.children():W).remove()})}},m}(ae),sr=function(){function S(m,d){this.childCount=m,this.render=d}return S}(),Fr=function(S){it(m,S);function m(d,f,v){var M=S.call(this)||this;return M.textTemplate=[""],M.mathspeakTemplate=[""],M.setCtrlSeqHtmlAndText(d,f,v),M}return m.prototype.setEnds=function(d){o("MathCommand ends are never empty",d[t]&&d[e]),this.ends=d},m.prototype.getEnd=function(d){return this.ends[d]},m.prototype.setCtrlSeqHtmlAndText=function(d,f,v){this.ctrlSeq||(this.ctrlSeq=d),f&&(this.domView=f),v&&(this.textTemplate=v)},m.prototype.replaces=function(d){d.disown(),this.replacedFragment=d},m.prototype.isEmpty=function(){return this.foldChildren(!0,function(d,f){return d&&f.isEmpty()})},m.prototype.parser=function(){var d=this,f=Nt.block;return f.times(this.numBlocks()).map(function(v){d.blocks=v;for(var M=0;M<v.length;M+=1)v[M].adopt(d,d.getEnd(e),0);return d})},m.prototype.createLeftOf=function(d){var f=this,v=f.replacedFragment;if(f.createBlocks(),S.prototype.createLeftOf.call(this,d),v){var M=f.getEnd(t);v.adopt(M,0,0),v.domFrag().appendTo(M.domFrag().oneElement()),f.placeCursor(d),f.prepareInsertionAt(d)}f.finalizeInsert(d.options,d),f.placeCursor(d)},m.prototype.createBlocks=function(){for(var d=this,f=d.numBlocks(),v=d.blocks=Array(f),M=0;M<f;M+=1){var F=v[M]=new ii;F.adopt(d,d.getEnd(e),0)}},m.prototype.placeCursor=function(d){d.insAtRightEnd(this.foldChildren(this.getEnd(t),function(f,v){return f.isEmpty()?f:v}))},m.prototype.moveTowards=function(d,f,v){var M;v==="up"?M=this.upInto:v==="down"&&(M=this.downInto);var F=M||this.getEnd(-d);f.insAtDirEnd(-d,F),f.controller.aria.queueDirEndOf(-d).queue(f.parent,!0)},m.prototype.deleteTowards=function(d,f){this.isEmpty()?f[d]=this.remove()[d]:this.moveTowards(d,f)},m.prototype.selectTowards=function(d,f){f[-d]=this,f[d]=this[d]},m.prototype.selectChildren=function(){return new Ae(this,this)},m.prototype.unselectInto=function(d,f){var v=f.anticursor,M=v.ancestors[this.id];f.insAtDirEnd(-d,M)},m.prototype.seek=function(d,f){function v(X){var se,Ve=X.domFrag().oneElement(),Ie=I(Ve).left,we=Ie+Ve.offsetWidth;return se={},se[t]=Ie,se[e]=we,se}var M=this,F=v(M);if(d<F[t])return f.insLeftOf(M);if(d>F[e])return f.insRightOf(M);var W=F[t];M.eachChild(function(X){var se=v(X);if(d<se[t])return d-W<se[t]-d?X[t]?f.insAtRightEnd(X[t]):f.insLeftOf(M):f.insAtLeftEnd(X),!1;if(d>se[e]){X[e]?W=se[e]:F[e]-d<d-se[e]?f.insRightOf(M):f.insAtRightEnd(X);return}else return X.seek(d,f),!1})},m.prototype.numBlocks=function(){return this.domView.childCount},m.prototype.html=function(){var d=this.blocks;o("domView is defined",this.domView);var f=this.domView,v=f.render(d||[]);return this.setDOM(v),N.linkElementByCmdNode(v,this),v},m.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),d.latex+=this.ctrlSeq||"",this.eachChild(function(f){d.latex+="{";var v=d.latex.length;f.latexRecursive(d);var M=d.latex.length;v===M&&(d.latex+=" "),d.latex+="}"}),this.checkCursorContextClose(d)},m.prototype.text=function(){var d=this,f=0;return d.foldChildren(d.textTemplate[f],function(v,M){f+=1;var F=M.text();return v&&d.textTemplate[f]==="("&&F[0]==="("&&F.slice(-1)===")"?v+F.slice(1,-1)+d.textTemplate[f]:v+F+(d.textTemplate[f]||"")})},m.prototype.mathspeak=function(){var d=this,f=0;return d.foldChildren(d.mathspeakTemplate[f]||"Start"+d.ctrlSeq+" ",function(v,M){return f+=1,v+" "+M.mathspeak()+" "+(d.mathspeakTemplate[f]+" "||"End"+d.ctrlSeq+" ")})},m}(vt),xi=function(S){it(m,S);function m(d,f,v,M){var F=S.call(this)||this;return F.setCtrlSeqHtmlTextAndMathspeak(d,f?new sr(0,function(){return f.cloneNode(!0)}):void 0,v,M),F}return m.prototype.setCtrlSeqHtmlTextAndMathspeak=function(d,f,v,M){!v&&d&&(v=d.replace(/^\\/,"")),this.mathspeakName=M||v,S.prototype.setCtrlSeqHtmlAndText.call(this,d,f,[v||""])},m.prototype.parser=function(){return rt.succeed(this)},m.prototype.numBlocks=function(){return 0},m.prototype.replaces=function(d){d.remove()},m.prototype.createBlocks=function(){},m.prototype.moveTowards=function(d,f){f.domFrag().insDirOf(d,this.domFrag()),f[-d]=this,f[d]=this[d],f.controller.aria.queue(this)},m.prototype.deleteTowards=function(d,f){f[d]=this.remove()[d]},m.prototype.seek=function(d,f){var v=this.domFrag().oneElement(),M=I(v).left;return d-M<v.offsetWidth/2?f.insLeftOf(this):f.insRightOf(this),f},m.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),d.latex+=this.ctrlSeq||"",this.checkCursorContextClose(d)},m.prototype.text=function(){return this.textTemplate.join("")},m.prototype.mathspeak=function(d){return this.mathspeakName||""},m.prototype.placeCursor=function(){},m.prototype.isEmpty=function(){return!0},m}(Fr),Ha=function(S){it(m,S);function m(d,f,v){return S.call(this,d,c("span",{},[f||c.text(d)]),void 0,v)||this}return m}(xi);function un(S,m,d){return function(){return new Ha(S,m?c.entityText(m):void 0,d)}}var Xi=function(S){it(m,S);function m(d,f,v,M,F){var W=this;return F?W=S.call(this,d,c("span",{},[f||c.text(d||"")]),void 0,M)||this:W=S.call(this,d,c("span",{class:"dcg-mq-binary-operator"},f?[f]:[]),v,M)||this,W}return m}(xi);function Ut(S,m,d,f){return function(){return new Xi(S,m?c.entityText(m):void 0,d,f)}}var ii=function(S){it(m,S);function m(){var d=S!==null&&S.apply(this,arguments)||this;return d.ariaLabel="block",d}return m.prototype.join=function(d){return this.foldChildren("",function(f,v){return f+v[d]()})},m.prototype.html=function(){var d=document.createDocumentFragment();return this.eachChild(function(f){var v=f.html();d.appendChild(v)}),d},m.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),this.eachChild(function(f){return f.latexRecursive(d)}),this.checkCursorContextClose(d)},m.prototype.text=function(){var d=this.getEnd(t),f=this.getEnd(e);return d===f&&d!==0?d.text():this.join("text")},m.prototype.mathspeak=function(){var d="",f={};return this.controller&&(f=this.controller.options.autoOperatorNames),this.foldChildren([],function(v,M){if(M.isPartOfOperator)d+=M.mathspeak();else{if(d!==""){if(f._maxLength>0){var F=f[d.toLowerCase()];typeof F=="string"&&(d=F)}v.push(d+" "),d=""}var W=M.mathspeak(),X=M.ctrlSeq;isNaN(X)&&X!=="."&&(!M.parent||!M.parent.parent||!M.parent.parent.isTextBlock())&&(W=" "+W+" "),v.push(W)}return v}).join("").replace(/ +(?= )/g,"").replace(/(\.)([0-9]+)/g,function(v,M,F){return M+F.split("").join(" ").trim()})},m.prototype.keystroke=function(d,f,v){if(v.options.spaceBehavesLikeTab&&(d==="Spacebar"||d==="Shift-Spacebar")){f==null||f.preventDefault(),v.escapeDir(d==="Shift-Spacebar"?t:e,d,f);return}return S.prototype.keystroke.call(this,d,f,v)},m.prototype.moveOutOf=function(d,f,v){var M;if(v==="up"?M=this.parent.upInto:v==="down"&&(M=this.parent.downInto),!M&&this[d]){var F=-d;f.insAtDirEnd(F,this[d]),f.controller.aria.queueDirEndOf(F).queue(f.parent,!0)}else f.insDirOf(d,this.parent),f.controller.aria.queueDirOf(d).queue(this.parent)},m.prototype.selectOutOf=function(d,f){f.insDirOf(d,this.parent)},m.prototype.deleteOutOf=function(d,f){f.unwrapGramp()},m.prototype.seek=function(d,f){var v=this.getEnd(e);if(!v)return f.insAtRightEnd(this);var M=v.domFrag().oneElement(),F=I(M).left;if(F+M.offsetWidth<d)return f.insAtRightEnd(this);var W=this.getEnd(t);if(d<I(W.domFrag().oneElement()).left)return f.insAtLeftEnd(this);for(;d<I(v.domFrag().oneElement()).left;)v=v[t];return v.seek(d,f)},m.prototype.chToCmd=function(d,f){var v;return d.match(/^[a-eg-zA-Z]$/)?new de(d):/^\d$/.test(d)?new Z(d):f&&f.typingSlashWritesDivisionSymbol&&d==="/"?A["\xF7"](d):f&&f.typingAsteriskWritesTimesSymbol&&d==="*"?A["\xD7"](d):f&&f.typingPercentWritesPercentOf&&d==="%"?A.percentof(d):(v=$[d]||A[d])?v.constructor?new v(d):v(d):new Ha(d)},m.prototype.write=function(d,f){var v=this.chToCmd(f,d.options);d.selection&&v.replaces(d.replaceSelection()),d.isTooDeep()||(v.createLeftOf(d.show()),f==="/"?d.controller.aria.alert("over"):d.controller.aria.alert(v.mathspeak({createdLeftOf:d})))},m.prototype.writeLatex=function(d,f){var v=rt.all,M=rt.eof,F=Nt.skip(M).or(v.result(!1)).parse(f);if(F&&!F.isEmpty()&&F.prepareInsertionAt(d)){F.children().adopt(d.parent,d[t],d[e]),x(F.html()).insertBefore(d.domFrag()),d[t]=F.getEnd(e),F.finalizeInsert(d.options,d);var W=F.getEnd(e),X=F.getEnd(t),se=W[e],Ve=X[t];se&&se.siblingCreated(d.options,t),Ve&&Ve.siblingCreated(d.options,e),d.parent.bubble(function(Ie){Ie.reflow()})}},m.prototype.focus=function(){return this.domFrag().addClass("dcg-mq-hasCursor"),this.domFrag().removeClass("dcg-mq-empty"),this},m.prototype.blur=function(d){return this.domFrag().removeClass("dcg-mq-hasCursor"),this.isEmpty()&&(this.domFrag().addClass("dcg-mq-empty"),d&&this.isQuietEmptyDelimiter(d.options.quietEmptyDelimiters)&&this.domFrag().addClass("dcg-mq-quiet-delimiter")),this},m}(vt);De.prototype.mouseEvents=!0,ce.StaticMath=function(S){var m;return m=function(d){it(f,d);function f(v){var M=d.call(this,v)||this,F=M.innerFields=[];return M.__controller.root.postOrder(function(W){W.registerInnerField(F,S.InnerMathField)}),M}return f.prototype.__mathquillify=function(v,M){return this.config(v),d.prototype.mathquillify.call(this,"dcg-mq-math-mode"),this.__controller.setupStaticField(),this.__options.mouseEvents&&(this.__controller.addMouseEventListener(),this.__controller.staticMathTextareaEvents()),this},f.prototype.latex=function(v){var M=d.prototype.latex.apply(this,arguments);if(arguments.length>0){var F=this.innerFields=[];this.__controller.root.postOrder(function(W){W.registerInnerField(F,S.InnerMathField)}),this.__controller.updateMathspeak()}return M},f.prototype.setAriaLabel=function(v){return this.__controller.setAriaLabel(v),this},f.prototype.getAriaLabel=function(){return this.__controller.getAriaLabel()},f}(S.AbstractMathQuill),m.RootBlock=ii,m};var O=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m}(ii);ve(O.prototype),ce.MathField=function(S){var m;return m=function(d){it(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.prototype.__mathquillify=function(v,M){return this.config(v),M>1&&(this.__controller.root.reflow=n),d.prototype.mathquillify.call(this,"dcg-mq-editable-field dcg-mq-math-mode"),delete this.__controller.root.reflow,this},f}(S.EditableField),m.RootBlock=O,m},ce.InnerMathField=function(S){return o("MathField class is defined",S.MathField),function(m){it(d,m);function d(){return m!==null&&m.apply(this,arguments)||this}return d.prototype.makeStatic=function(){this.__controller.editable=!1,this.__controller.root.blur(),this.__controller.unbindEditablesEvents(),x(this.__controller.container).removeClass("dcg-mq-editable-field")},d.prototype.makeEditable=function(){this.__controller.editable=!0,this.__controller.editablesTextareaEvents(),this.__controller.cursor.insAtRightEnd(this.__controller.root),x(this.__controller.container).addClass("dcg-mq-editable-field")},d}(S.MathField)};var z=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m.prototype.finalizeTree=function(d,f){this.sharedSiblingMethod(d,f)},m.prototype.siblingDeleted=function(d,f){this.sharedSiblingMethod(d,f)},m.prototype.siblingCreated=function(d,f){this.sharedSiblingMethod(d,f)},m.prototype.sharedSiblingMethod=function(d,f){f!==t&&this[e]instanceof m||this.fixDigitGrouping(d)},m.prototype.fixDigitGrouping=function(d){if(d.enableDigitGrouping){var f=this,v=this,M=0,F=[],W="\\ ",X=".",se=f;do if(/^[0-9]$/.test(se.ctrlSeq))f=se;else if(se.ctrlSeq===W)f=se,M+=1;else if(se.ctrlSeq===X)f=se,F.push(se);else break;while(se=f[t]);for(;se=v[e];)if(/^[0-9]$/.test(se.ctrlSeq))v=se;else if(se.ctrlSeq===W)v=se,M+=1;else if(se.ctrlSeq===X)v=se,F.push(se);else break;for(;v!==f&&f&&f.ctrlSeq===W;)f=f[e],M-=1;for(;v!==f&&v&&v.ctrlSeq===W;)v=v[t],M-=1;if(!(f===v&&f&&f.ctrlSeq===W)){var Ve=M>0||F.length>1;Ve?this.removeGroupingBetween(f,v):F[0]?(F[0]!==f&&this.addGroupingBetween(F[0][t],f),F[0]!==v&&this.removeGroupingBetween(F[0][e],v)):this.addGroupingBetween(v,f)}}},m.prototype.removeGroupingBetween=function(d,f){var v=d;do if(v instanceof m&&v.setGroupingClass(void 0),!v||v===f)break;while(v=v[e])},m.prototype.addGroupingBetween=function(d,f){for(var W=d,v=0,M=0,W=d;W&&(M+=1,W!==f);)W=W[t];var F=M%3;F===0&&(F=3);for(var W=d;W;){v+=1;var X=void 0;if(M>=4&&(v===M?X="dcg-mq-group-leading-"+F:v%3===0&&v!==M&&(X="dcg-mq-group-start"),X||(X="dcg-mq-group-other")),W instanceof m&&W.setGroupingClass(X),W===f)break;W=W[t]}},m.prototype.setGroupingClass=function(d){this._groupingClass!==d&&(this._groupingClass&&this.domFrag().removeClass(this._groupingClass),d&&this.domFrag().addClass(d),this._groupingClass=d)},m}(xi),Z=function(S){it(m,S);function m(d,f){return S.call(this,d,c("span",{class:"dcg-mq-digit"},[c.text(d)]),void 0,f)||this}return m.prototype.createLeftOf=function(d){var f=d[t],v=f&&f[t],M=d.parent.parent instanceof za?d.parent.parent.sub:void 0;d.options.autoSubscriptNumerals&&d.parent!==M&&(f instanceof pe&&f.isItalic!==!1||f instanceof za&&v instanceof pe&&v.isItalic!==!1)?(new Uk().createLeftOf(d),S.prototype.createLeftOf.call(this,d),d.insRightOf(d.parent.parent)):S.prototype.createLeftOf.call(this,d)},m.prototype.mathspeak=function(d){if(d&&d.createdLeftOf){var f=d.createdLeftOf,v=f[t],M=v&&v[t],F=f.parent.parent instanceof za?f.parent.parent.sub:void 0;if(f.options.autoSubscriptNumerals&&f.parent!==F&&(v instanceof pe&&v.isItalic!==!1||f[t]instanceof za&&M instanceof pe&&M.isItalic!==!1))return"Subscript "+S.prototype.mathspeak.call(this)+" Baseline"}return S.prototype.mathspeak.call(this)},m}(z),pe=function(S){it(m,S);function m(d,f){return S.call(this,d,c("var",{},[f||c.text(d)]))||this}return m.prototype.text=function(){var d=this.ctrlSeq||"";return this.isPartOfOperator?d[0]=="\\"?d=d.slice(1,d.length):d[d.length-1]==" "&&(d=d.slice(0,-1)):(this[t]&&!(this[t]instanceof m)&&!(this[t]instanceof Xi)&&this[t].ctrlSeq!=="\\ "&&(d="*"+d),this[e]&&!(this[e]instanceof Xi)&&!(this[e]instanceof za)&&(d+="*")),d},m.prototype.mathspeak=function(){var d=this.ctrlSeq||"";return this.isPartOfOperator||d.length>1||this.parent&&this.parent.parent&&this.parent.parent.isTextBlock()?S.prototype.mathspeak.call(this):'"'+d+'"'},m}(xi);function ee(S,m,d){return function(){return new pe(S,c.entityText(m))}}De.prototype.autoCommands={_maxLength:0},he.autoCommands=function(S){if(typeof S!="string"||!/^[a-z]+(?: [a-z]+)*$/i.test(S))throw'"'+S+'" not a space-delimited list of only letters';for(var m=S.split(" "),d={},f=0,v=0;v<m.length;v+=1){var M=m[v];if(M.length<2)throw'autocommand "'+M+'" not minimum length of 2';if(A[M]===ft)throw'"'+M+'" is a built-in operator name';d[M]=1,f=i(f,M.length)}return d._maxLength=f,d},De.prototype.quietEmptyDelimiters={},he.quietEmptyDelimiters=function(S){S===void 0&&(S="");for(var m=S.split(" "),d={},f=0;f<m.length;f+=1){var v=m[f];d[v]=1}return d},De.prototype.autoParenthesizedFunctions={_maxLength:0},he.autoParenthesizedFunctions=function(S){if(typeof S!="string"||!/^[a-z]+(?: [a-z]+)*$/i.test(S))throw'"'+S+'" not a space-delimited list of only letters';for(var m=S.split(" "),d={},f=0,v=0;v<m.length;v+=1){var M=m[v];if(M.length<2)throw'autocommand "'+M+'" not minimum length of 2';d[M]=1,f=i(f,M.length)}return d._maxLength=f,d};var de=function(S){it(m,S);function m(d){var f=S.call(this,d)||this;return f.letter=d,f}return m.prototype.checkAutoCmds=function(d){if(!this.shouldIgnoreSubstitutionInSimpleSubscript(d.options)){var f=d.options.autoCommands,v=f._maxLength||0;if(v>0){for(var M="",F=this,W=0;F instanceof m&&F.ctrlSeq===F.letter&&W<v;)M=F.letter+M,F=F[t],W+=1;for(;M.length;){if(f.hasOwnProperty(M)){for(F=this,W=1;F&&W<M.length;W+=1,F=F[t]);new B(F,this).remove(),d[t]=F[t];var X=A[M],se;return J(X)?se=new X(M):se=X(M),se.createLeftOf(d)}M=M.slice(1)}}}},m.prototype.autoParenthesize=function(d){var f=d.parent.getEnd(e);if(!(f&&f instanceof Wa&&f.ctrlSeq==="\\left(")&&!this.shouldIgnoreSubstitutionInSimpleSubscript(d.options)){for(var v="",M=this,F=0,W=d.options.autoParenthesizedFunctions,X=W._maxLength||0,se=d.options.autoOperatorNames;M instanceof m&&F<X;)v=M.letter+v,M=M[t],F+=1;for(;v.length;){if(W.hasOwnProperty(v)&&se.hasOwnProperty(v))return d.parent.write(d,"(");v=v.slice(1)}}},m.prototype.createLeftOf=function(d){S.prototype.createLeftOf.call(this,d),this.checkAutoCmds(d),this.autoParenthesize(d)},m.prototype.italicize=function(d){return this.isItalic=d,this.isPartOfOperator=!d,this.domFrag().toggleClass("dcg-mq-operator-name",!d),this},m.prototype.finalizeTree=function(d,f){this.sharedSiblingMethod(d,f)},m.prototype.siblingDeleted=function(d,f){this.sharedSiblingMethod(d,f)},m.prototype.siblingCreated=function(d,f){this.sharedSiblingMethod(d,f)},m.prototype.sharedSiblingMethod=function(d,f){f!==t&&this[e]instanceof m||this.autoUnItalicize(d)},m.prototype.autoUnItalicize=function(d){var f=d.autoOperatorNames;if(f._maxLength!==0&&!this.shouldIgnoreSubstitutionInSimpleSubscript(d)){for(var v=this.letter,M=this[t];M instanceof m;M=M[t])v=M.letter+v;for(var F=this[e];F instanceof m;F=F[e])v+=F.letter;var W=M&&M[e],X=F&&F[t];new B(W||this.parent.getEnd(t),X||this.parent.getEnd(e)).each(function(wa){wa instanceof m&&(wa.italicize(!0).domFrag().removeClass("dcg-mq-first dcg-mq-last dcg-mq-followed-by-supsub"),wa.ctrlSeq=wa.letter)});var se=f._maxLength||0;e:for(var Ve=0,Ie=M[e]||this.parent.getEnd(t);Ie&&Ve<v.length;Ve+=1,Ie=Ie[e])for(var we=r(se,v.length-Ve);we>0;we-=1){var Ne=v.slice(Ve,Ve+we),Be=void 0;if(f.hasOwnProperty(Ne)){for(var Xe=0,nt=Ie;Xe<we;Xe+=1,nt=nt[e])nt instanceof m&&(nt.italicize(!1),Be=nt);var wt=ye.hasOwnProperty(Ne);if(Ie.ctrlSeq=(wt?"\\":"\\operatorname{")+Ie.ctrlSeq,Be.ctrlSeq+=wt?" ":"}",Pe.hasOwnProperty(Ne)){var vr=Be[t],Mi=vr&&vr[t],Sr=Mi&&Mi[t];Sr.domFrag().addClass("dcg-mq-last")}if(this.shouldOmitPadding(Ie[t])||Ie.domFrag().addClass("dcg-mq-first"),!this.shouldOmitPadding(Be[e]))if(Be[e]instanceof za){var Ki=Be[e],ta=Ki.siblingCreated=Ki.siblingDeleted=function(){Ki.domFrag().toggleClass("dcg-mq-after-operator-name",!(Ki[e]instanceof Wa))};ta()}else Be.domFrag().toggleClass("dcg-mq-last",!(Be[e]instanceof Wa));Ve+=we-1,Ie=Be;continue e}}}},m.prototype.shouldOmitPadding=function(d){return!d||d.ctrlSeq==="."||d instanceof Xi||d instanceof $c},m}(pe),ye={};De.prototype.autoOperatorNames=Oe();var Pe={limsup:1,liminf:1,projlim:1,injlim:1};function Oe(){for(var S={_maxLength:9},m="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "),d=0;d<m.length;d+=1)ye[m[d]]=S[m[d]]=1;for(var f="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "),d=0;d<f.length;d+=1)ye[f[d]]=1;for(var v="sin cos tan sec cosec csc cotan cot ctg".split(" "),d=0;d<v.length;d+=1)S[v[d]]=S["arc"+v[d]]=S[v[d]+"h"]=S["ar"+v[d]+"h"]=S["arc"+v[d]+"h"]=1;for(var M="gcf hcf lcm proj span".split(" "),d=0;d<M.length;d+=1)S[M[d]]=1;return S}he.autoOperatorNames=function(S){if(typeof S!="string")throw'"'+S+'" not a space-delimited list';if(!/^[a-z\|\-]+(?: [a-z\|\-]+)*$/i.test(S))throw'"'+S+'" not a space-delimited list of letters or "|"';for(var m=S.split(" "),d={},f=0,v=0;v<m.length;v+=1){var M=m[v];if(M.length<2)throw'"'+M+'" not minimum length of 2';if(M.indexOf("|")<0)d[M]=M,f=i(f,M.length);else{var F=M.split("|");if(F.length>2)throw'"'+M+'" has more than 1 mathspeak delimiter';if(F[0].length<2)throw'"'+M[0]+'" not minimum length of 2';d[F[0]]=F[1].replace(/-/g," "),f=i(f,F[0].length)}}return d._maxLength=f,d};var ft=function(S){it(m,S);function m(d){return S.call(this,d||"")||this}return m.prototype.createLeftOf=function(d){for(var f=this.ctrlSeq,v=0;v<f.length;v+=1)new de(f.charAt(v)).createLeftOf(d)},m.prototype.parser=function(){for(var d=this.ctrlSeq,f=new ii,v=0;v<d.length;v+=1)new de(d.charAt(v)).adopt(f,f.getEnd(e),0);return rt.succeed(f.children())},m}(xi);for(var et in De.prototype.autoOperatorNames)De.prototype.autoOperatorNames.hasOwnProperty(et)&&(A[et]=ft);A.operatorname=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m.prototype.createLeftOf=function(){},m.prototype.numBlocks=function(){return 1},m.prototype.parser=function(){return Nt.block.map(function(d){var f=!0,v="",M=d.children();return M.each(function(F){F instanceof de?v+=F.letter:f=!1}),f&&v==="ans"?qk():M})},m}(Fr),A.f=function(S){it(m,S);function m(){var d=this,f="f";return d=S.call(this,f)||this,d.letter=f,d.domView=new sr(0,function(){return c("var",{class:"dcg-mq-f"},[c.text("f")])}),d}return m.prototype.italicize=function(d){return this.domFrag().eachElement(function(f){return f.textContent="f"}),this.domFrag().toggleClass("dcg-mq-f",d),S.prototype.italicize.call(this,d)},m}(de),A[" "]=A.space=function(){return new z("\\ ",c("span",{},[c.text(h)])," ")},A["."]=function(){return new z(".",c("span",{class:"dcg-mq-digit"},[c.text(".")]),".")},A["'"]=A.prime=un("'","&prime;","prime"),A["\u2033"]=A.dprime=un("\u2033","&Prime;","double prime"),A.backslash=un("\\backslash ","\\","backslash"),$["\\"]||($["\\"]=A.backslash),A.$=un("\\$","$","dollar"),A.square=un("\\square ","\u25A1","square"),A.mid=un("\\mid ","\u2223","mid");var ct=function(S){it(m,S);function m(d,f,v){return S.call(this,d,c("span",{class:"dcg-mq-nonSymbola"},[f||c.text(d)]))||this}return m}(xi);A["@"]=function(){return new ct("@")},A["&"]=function(){return new ct("\\&",c.entityText("&amp;"),"and")},A["%"]=function(S){it(m,S);function m(){return S.call(this,"\\%",c.text("%"),"percent")||this}return m.prototype.parser=function(){var d=rt.optWhitespace,f=rt.string;return d.then(f("\\operatorname{of}").map(function(){return Hk()})).or(S.prototype.parser.call(this))},m}(ct),A["\u2225"]=A.parallel=un("\\parallel ","&#x2225;","parallel"),A["\u2226"]=A.nparallel=un("\\nparallel ","&#x2226;","not parallel"),A["\u27C2"]=A.perp=un("\\perp ","&#x27C2;","perpendicular"),A.alpha=A.beta=A.gamma=A.delta=A.zeta=A.eta=A.theta=A.iota=A.kappa=A.mu=A.nu=A.xi=A.rho=A.sigma=A.tau=A.chi=A.psi=A.omega=function(S){return new pe("\\"+S+" ",c.entityText("&"+S+";"))},A.phi=ee("\\phi ","&#981;","phi"),A.phiv=A.varphi=ee("\\varphi ","&phi;","phi"),A.epsilon=ee("\\epsilon ","&#1013;","epsilon"),A.epsiv=A.varepsilon=ee("\\varepsilon ","&epsilon;","epsilon"),A.piv=A.varpi=ee("\\varpi ","&piv;","piv"),A.sigmaf=A.sigmav=A.varsigma=ee("\\varsigma ","&sigmaf;","sigma"),A.thetav=A.vartheta=A.thetasym=ee("\\vartheta ","&thetasym;","theta"),A.upsilon=A.upsi=ee("\\upsilon ","&upsilon;","upsilon"),A.gammad=A.Gammad=A.digamma=ee("\\digamma ","&#989;","gamma"),A.kappav=A.varkappa=ee("\\varkappa ","&#1008;","kappa"),A.rhov=A.varrho=ee("\\varrho ","&#1009;","rho"),A.pi=A.\u03C0=function(){return new ct("\\pi ",c.entityText("&pi;"),"pi")},A.lambda=function(){return new ct("\\lambda ",c.entityText("&lambda;"),"lambda")},A.Upsilon=A.Upsi=A.upsih=A.Upsih=function(){return new xi("\\Upsilon ",c("var",{style:"font-family: serif"},[c.entityText("&upsih;")]),"capital upsilon")},A.Gamma=A.Delta=A.Theta=A.Lambda=A.Xi=A.Pi=A.Sigma=A.Phi=A.Psi=A.Omega=A.forall=function(S){return new Ha("\\"+S+" ",c.entityText("&"+S+";"))};var bt=function(S){it(m,S);function m(d){var f=S.call(this)||this;return f.latexStr=d,f}return m.prototype.createLeftOf=function(d){var f=Nt.parse(this.latexStr);f.children().adopt(d.parent,d[t],d[e]),d[t]=f.getEnd(e),x(f.html()).insertBefore(d.domFrag()),f.finalizeInsert(d.options,d);var v=f.getEnd(e),M=v&&v[e];M&&M.siblingCreated(d.options,t);var F=f.getEnd(t),W=F&&F[t];W&&W.siblingCreated(d.options,e),d.parent.bubble(function(X){X.reflow()})},m.prototype.mathspeak=function(){return Nt.parse(this.latexStr).mathspeak()},m.prototype.parser=function(){var d=Nt.parse(this.latexStr).children();return rt.succeed(d)},m}(Fr);A["\u2070"]=function(){return new bt("^0")},A["\xB9"]=function(){return new bt("^1")},A["\xB2"]=function(){return new bt("^2")},A["\xB3"]=function(){return new bt("^3")},A["\u2074"]=function(){return new bt("^4")},A["\u2075"]=function(){return new bt("^5")},A["\u2076"]=function(){return new bt("^6")},A["\u2077"]=function(){return new bt("^7")},A["\u2078"]=function(){return new bt("^8")},A["\u2079"]=function(){return new bt("^9")},A["\xBC"]=function(){return new bt("\\frac14")},A["\xBD"]=function(){return new bt("\\frac12")},A["\xBE"]=function(){return new bt("\\frac34")},A["\u221A"]=function(){return new bt("\\sqrt{}")};function Ht(S){if(!S)return!1;var m=S[t];if(m){if(m instanceof Xi||/^(\\ )|[,;:\(\[]$/.test(m.ctrlSeq))return!1}else return S.parent&&S.parent.parent&&S.parent.parent.isStyleBlock()?Ht(S.parent.parent):!1;return!0}var pt=function(S){it(m,S);function m(d,f,v){return S.call(this,d,f,void 0,v,!0)||this}return m.prototype.contactWeld=function(d,f){this.sharedSiblingMethod(d.options,f)},m.prototype.siblingCreated=function(d,f){this.sharedSiblingMethod(d,f)},m.prototype.siblingDeleted=function(d,f){this.sharedSiblingMethod(d,f)},m.prototype.sharedSiblingMethod=function(d,f){if(f!==e)return this.domFrag().oneElement().className=Ht(this)?"dcg-mq-binary-operator":"",this},m}(Xi);A["+"]=function(S){it(m,S);function m(){return S.call(this,"+",c.text("+"))||this}return m.prototype.mathspeak=function(){return Ht(this)?"plus":"positive"},m}(pt);var ni=function(S){it(m,S);function m(){return S.call(this,"-",c.entityText("&minus;"))||this}return m.prototype.mathspeak=function(){return Ht(this)?"minus":"negative"},m}(pt);A["\u2212"]=A["\u2014"]=A["\u2013"]=A["-"]=ni,A["\xB1"]=A.pm=A.plusmn=A.plusminus=function(){return new pt("\\pm ",c.entityText("&plusmn;"),"plus-or-minus")},A.mp=A.mnplus=A.minusplus=function(){return new pt("\\mp ",c.entityText("&#8723;"),"minus-or-plus")},$["*"]=A.sdot=A.cdot=Ut("\\cdot ","&middot;","*","times");var Bi=function(S){it(m,S);function m(){return S.call(this,"\\to ",c.entityText("&rarr;"),"to")||this}return m.prototype.deleteTowards=function(d,f){if(d===t){var v=f[t];new B(v,this).remove(),f[t]=v[t],new ni().createLeftOf(f),f[t].bubble(function(M){M.reflow()});return}S.prototype.deleteTowards.call(this,d,f)},m}(Xi);A["\u2192"]=A.to=Bi;var Rr=function(S){it(m,S);function m(d,f){var v=this,M=f?"Strict":"";return v=S.call(this,d["ctrlSeq".concat(M)],c.entityText(d["htmlEntity".concat(M)]),d["text".concat(M)],d["mathspeak".concat(M)])||this,v.data=d,v.strict=f,v}return m.prototype.swap=function(d){this.strict=d;var f=d?"Strict":"";this.ctrlSeq=this.data["ctrlSeq".concat(f)],this.domFrag().children().replaceWith(x(c.entityText(this.data["htmlEntity".concat(f)]))),this.textTemplate=[this.data["text".concat(f)]],this.mathspeakName=this.data["mathspeak".concat(f)]},m.prototype.deleteTowards=function(d,f){if(d===t&&!this.strict){this.swap(!0),this.bubble(function(v){v.reflow()});return}S.prototype.deleteTowards.call(this,d,f)},m}(Xi),oi={ctrlSeq:"\\le ",htmlEntity:"&le;",text:"\u2264",mathspeak:"less than or equal to",ctrlSeqStrict:"<",htmlEntityStrict:"&lt;",textStrict:"<",mathspeakStrict:"less than"},ac={ctrlSeq:"\\ge ",htmlEntity:"&ge;",text:"\u2265",mathspeak:"greater than or equal to",ctrlSeqStrict:">",htmlEntityStrict:"&gt;",textStrict:">",mathspeakStrict:"greater than"},Hc=function(S){it(m,S);function m(){return S.call(this,ac,!0)||this}return m.prototype.createLeftOf=function(d){var f=d[t];if(f instanceof Xi&&f.ctrlSeq==="-"){var v=f;d[t]=v[t],v.remove(),new Bi().createLeftOf(d),d[t].bubble(function(M){M.reflow()});return}S.prototype.createLeftOf.call(this,d)},m}(Rr);A["<"]=A.lt=function(){return new Rr(oi,!0)},A[">"]=A.gt=Hc,A["\u2264"]=A.le=A.leq=function(){return new Rr(oi,!1)},A["\u2265"]=A.ge=A.geq=function(){return new Rr(ac,!1)},A.infty=A.infin=A.infinity=un("\\infty ","&infin;","infinity"),A["\u2260"]=A.ne=A.neq=Ut("\\ne ","&ne;","not equal");var io=function(S){it(m,S);function m(){return S.call(this,"=",c.text("="),"=","equals")||this}return m.prototype.createLeftOf=function(d){var f=d[t];if(f instanceof Rr&&f.strict){f.swap(!1),f.bubble(function(v){v.reflow()});return}S.prototype.createLeftOf.call(this,d)},m}(Xi);A["="]=io,A["\xD7"]=A.times=A.cross=Ut("\\times ","&times;","[x]","times"),A["\xF7"]=A.div=A.divide=A.divides=Ut("\\div ","&divide;","[/]","over");var Bk=function(S){it(m,S);function m(){return S.call(this,"\\sim ",c.text("~"),"~","tilde")||this}return m.prototype.createLeftOf=function(d){if(d[t]instanceof m){var f=d[t];d[t]=f[t],f.remove(),new Kk().createLeftOf(d),d[t].bubble(function(v){v.reflow()});return}S.prototype.createLeftOf.call(this,d)},m}(Xi),Kk=function(S){it(m,S);function m(){return S.call(this,"\\approx ",c.entityText("&approx;"),"\u2248","approximately equal")||this}return m.prototype.deleteTowards=function(d,f){if(d===t){var v=f[t];new B(v,this).remove(),f[t]=v[t],new Bk().createLeftOf(f),f[t].bubble(function(M){M.reflow()});return}S.prototype.deleteTowards.call(this,d,f)},m}(Xi);A.tildeNbsp=un("~",h," "),A.sim=Bk,A["\u2248"]=A.approx=Kk,$["~"]=A.sim,A["~"]=A.tildeNbsp,he.interpretTildeAsSim=function(S){var m=!!S;return m?A["~"]=A.sim:A["~"]=A.tildeNbsp,m};var Vh={sqrt:{width:"",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"0 0 32 54"},[c("path",{d:"M0 33 L7 27 L12.5 47 L13 47 L30 0 L32 0 L13 54 L11 54 L4.5 31 L0 33"})])}},"|":{width:".4em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[c("path",{d:"M4.4 0 L4.4 54 L5.6 54 L5.6 0"})])}},"[":{width:".55em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"0 0 11 24"},[c("path",{d:"M8 0 L3 0 L3 24 L8 24 L8 23 L4 23 L4 1 L8 1"})])}},"]":{width:".55em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"0 0 11 24"},[c("path",{d:"M3 0 L8 0 L8 24 L3 24 L3 23 L7 23 L7 1 L3 1"})])}},"(":{width:".55em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"3 0 106 186"},[c("path",{d:"M85 0 A61 101 0 0 0 85 186 L75 186 A75 101 0 0 1 75 0"})])}},")":{width:".55em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"3 0 106 186"},[c("path",{d:"M24 0 A61 101 0 0 1 24 186 L34 186 A75 101 0 0 0 34 0"})])}},"{":{width:".7em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"10 0 210 350"},[c("path",{d:"M170 0 L170 6 A47 52 0 0 0 123 60 L123 127 A35 48 0 0 1 88 175 A35 48 0 0 1 123 223 L123 290 A47 52 0 0 0 170 344 L170 350 L160 350 A58 49 0 0 1 102 301 L103 220 A45 40 0 0 0 58 180 L58 170 A45 40 0 0 0 103 130 L103 49 A58 49 0 0 1 161 0"})])}},"}":{width:".7em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"10 0 210 350"},[c("path",{d:"M60 0 L60 6 A47 52 0 0 1 107 60 L107 127 A35 48 0 0 0 142 175 A35 48 0 0 0 107 223 L107 290 A47 52 0 0 1 60 344 L60 350 L70 350 A58 49 0 0 0 128 301 L127 220 A45 40 0 0 1 172 180 L172 170 A45 40 0 0 1 127 130 L127 49 A58 49 0 0 0 70 0"})])}},"&#8741;":{width:".7em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[c("path",{d:"M3.2 0 L3.2 54 L4 54 L4 0 M6.8 0 L6.8 54 L6 54 L6 0"})])}},"&lang;":{width:".55em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[c("path",{d:"M6.8 0 L3.2 27 L6.8 54 L7.8 54 L4.2 27 L7.8 0"})])}},"&rang;":{width:".55em",html:function(){return c("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[c("path",{d:"M3.2 0 L6.8 27 L3.2 54 L2.2 54 L5.8 27 L2.2 0"})])}}},$a=function(S){it(m,S);function m(d,f,v,M,F){var W=S.call(this,d,new sr(1,function(X){return c.block(f,v,X[0])}))||this;return W.ariaLabel=M||d.replace(/^\\/,""),W.mathspeakTemplate=["Start"+W.ariaLabel+",","End"+W.ariaLabel],W.shouldNotSpeakDelimiters=F&&F.shouldNotSpeakDelimiters,W}return m.prototype.mathspeak=function(d){return!this.shouldNotSpeakDelimiters||d&&d.ignoreShorthand?S.prototype.mathspeak.call(this):this.foldChildren("",function(f,v){return f+" "+v.mathspeak(d)}).trim()},m}(Fr);A.mathrm=function(S){it(m,S);function m(){return S.call(this,"\\mathrm","span",{class:"dcg-mq-roman dcg-mq-font"},"Roman Font",{shouldNotSpeakDelimiters:!0})||this}return m.prototype.isTextBlock=function(){return!0},m}($a),A.mathit=function(){return new $a("\\mathit","i",{class:"dcg-mq-font"},"Italic Font")},A.mathbf=function(){return new $a("\\mathbf","b",{class:"dcg-mq-font"},"Bold Font")},A.mathsf=function(){return new $a("\\mathsf","span",{class:"dcg-mq-sans-serif dcg-mq-font"},"Serif Font")},A.mathtt=function(){return new $a("\\mathtt","span",{class:"dcg-mq-monospace dcg-mq-font"},"Math Text")},A.underline=function(){return new $a("\\underline","span",{class:"dcg-mq-non-leaf dcg-mq-underline"},"Underline")},A.overline=A.bar=function(){return new $a("\\overline","span",{class:"dcg-mq-non-leaf dcg-mq-overline"},"Overline")},A.overrightarrow=function(){return new $a("\\overrightarrow","span",{class:"dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-right"},"Over Right Arrow")},A.overleftarrow=function(){return new $a("\\overleftarrow","span",{class:"dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-left"},"Over Left Arrow")},A.overleftrightarrow=function(){return new $a("\\overleftrightarrow ","span",{class:"dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-leftright"},"Over Left and Right Arrow")},A.overarc=function(){return new $a("\\overarc","span",{class:"dcg-mq-non-leaf dcg-mq-overarc"},"Over Arc")},A.dot=function(){return new Fr("\\dot",new sr(1,function(S){return c("span",{class:"dcg-mq-non-leaf"},[c("span",{class:"dcg-mq-dot-recurring-inner"},[c("span",{class:"dcg-mq-dot-recurring"},[c.text(g)]),c.block("span",{class:"dcg-mq-empty-box"},S[0])])])}))},A.textcolor=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m.prototype.setColor=function(d){this.color=d,this.domView=new sr(1,function(f){return c.block("span",{class:"dcg-mq-textcolor",style:"color:"+d},f[0])}),this.ariaLabel=d.replace(/^\\/,""),this.mathspeakTemplate=["Start "+this.ariaLabel+",","End "+this.ariaLabel]},m.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d);var f=this.blocks[0];d.latex+="\\textcolor{"+this.color+"}{",f.latexRecursive(d),d.latex+="}",this.checkCursorContextClose(d)},m.prototype.parser=function(){var d=this,f=rt.optWhitespace,v=rt.string,M=rt.regex;return f.then(v("{")).then(M(/^[#\w\s.,()%-]*/)).skip(v("}")).then(function(F){return d.setColor(F),S.prototype.parser.call(d)})},m.prototype.isStyleBlock=function(){return!0},m}(Fr);var U6=A.class=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m.prototype.parser=function(){var d=this,f=rt.string,v=rt.regex;return rt.optWhitespace.then(f("{")).then(v(/^[-\w\s\\\xA0-\xFF]*/)).skip(f("}")).then(function(M){return d.cls=M||"",d.domView=new sr(1,function(F){return c.block("span",{class:"dcg-mq-class ".concat(M)},F[0])}),d.ariaLabel=M+" class",d.mathspeakTemplate=["Start "+d.ariaLabel+",","End "+d.ariaLabel],S.prototype.parser.call(d)})},m.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d);var f=this.blocks[0];d.latex+="\\class{"+this.cls+"}{",f.latexRecursive(d),d.latex+="}",this.checkCursorContextClose(d)},m.prototype.isStyleBlock=function(){return!0},m}(Fr),by=/^[\+\-]?[\d]+$/;function yC(S){if(!S)return"";var m="";return S.eachChild(function(d){d.ctrlSeq!==void 0&&(m+=d.ctrlSeq)}),m}De.prototype.charsThatBreakOutOfSupSub="";var za=function(S){it(m,S);function m(){var d=S!==null&&S.apply(this,arguments)||this;return d.ctrlSeq="_{...}^{...}",d}return m.prototype.setEnds=function(d){o("SupSub ends must be MathBlocks",d[t]instanceof ii&&d[e]instanceof ii),this.ends=d},m.prototype.getEnd=function(d){return this.ends[d]},m.prototype.createLeftOf=function(d){if(!(!this.replacedFragment&&!d[t]&&d.options.supSubsRequireOperand))return S.prototype.createLeftOf.call(this,d)},m.prototype.contactWeld=function(d){for(var f=t;f;f=f===t?e:!1){var v=this[f],M=void 0;if(v instanceof m){for(var F="sub";F;F=F==="sub"?"sup":!1){var W=this[F],X=v[F];if(W){if(!X)v.addBlock(W.disown());else if(W.isEmpty())M=new q(X,0,X.getEnd(t));else{W.domFrag().children().insAtDirEnd(-f,X.domFrag().oneElement());var se=W.children().disown();M=new q(X,se.getEnd(e),X.getEnd(t)),f===t?se.adopt(X,X.getEnd(e),0):se.adopt(X,0,X.getEnd(t))}this.placeCursor=function(Ve,Ie){return function(we){we.insAtDirEnd(-f,Ve||Ie)}}(X,W)}}this.remove(),d&&d[t]===this&&(f===e&&M?M[t]?d.insRightOf(M[t]):d.insAtLeftEnd(M.parent):d.insRightOf(v));break}}},m.prototype.finalizeTree=function(){var d=this.getEnd(t);d.write=function(f,v){if(f.options.autoSubscriptNumerals&&this===this.parent.sub){if(v==="_")return;var M=this.chToCmd(v,f.options);M instanceof xi?f.deleteSelection():f.clearSelection().insRightOf(this.parent),M.createLeftOf(f.show()),f.controller.aria.queue("Baseline").alert(M.mathspeak({createdLeftOf:f}));return}f[t]&&!f[e]&&!f.selection&&f.options.charsThatBreakOutOfSupSub.indexOf(v)>-1&&(f.insRightOf(this.parent),f.controller.aria.queue("Baseline")),ii.prototype.write.call(this,f,v)}},m.prototype.moveTowards=function(d,f,v){f.options.autoSubscriptNumerals&&!this.sup?f.insDirOf(d,this):S.prototype.moveTowards.call(this,d,f,v)},m.prototype.deleteTowards=function(d,f){if(f.options.autoSubscriptNumerals&&this.sub){var v=this.sub.getEnd(-d);v instanceof xi?v.remove():v&&v.deleteTowards(d,f.insAtDirEnd(-d,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(t,f.insAtLeftEnd(this.sub)),this.sup&&f.insDirOf(-d,this))}else S.prototype.deleteTowards.call(this,d,f)},m.prototype.latexRecursive=function(d){if(this.checkCursorContextOpen(d),this.sub){d.latex+="_{";var f=d.latex.length;this.sub.latexRecursive(d);var v=d.latex.length;f===v&&(d.latex+=" "),d.latex+="}"}if(this.sup){d.latex+="^{";var f=d.latex.length;this.sup.latexRecursive(d);var v=d.latex.length;f===v&&(d.latex+=" "),d.latex+="}"}this.checkCursorContextClose(d)},m.prototype.text=function(){function d(f,v){var M=v&&v.text()||"";return v?f+(M.length===1?M:"("+(M||" ")+")"):""}return d("_",this.sub)+d("^",this.sup)},m.prototype.addBlock=function(d){this.supsub==="sub"?(this.sup=this.upInto=this.sub.upOutOf=d,d.adopt(this,this.sub,0).downOutOf=this.sub,d.setDOM(x(c("span",{class:"dcg-mq-sup"})).append(d.domFrag().children()).prependTo(this.domFrag().oneElement()).oneElement()),N.linkElementByBlockNode(d.domFrag().oneElement(),d)):(this.sub=this.downInto=this.sup.downOutOf=d,d.adopt(this,0,this.sup).upOutOf=this.sup,this.domFrag().removeClass("dcg-mq-sup-only"),d.setDOM(x(c("span",{class:"dcg-mq-sub"})).append(d.domFrag().children()).appendTo(this.domFrag().oneElement()).oneElement()),N.linkElementByBlockNode(d.domFrag().oneElement(),d),this.domFrag().append(x(c("span",{style:"display:inline-block;width:0"},[c.text(p)]))));for(var f=0;f<2;f+=1)(function(v,M,F,W){var X=v[M];X.deleteOutOf=function(se,Ve){if(Ve.insDirOf(this[se]?-se:se,this.parent),!this.isEmpty()){var Ie=this.getEnd(se);this.children().disown().withDirAdopt(se,Ve.parent,Ve[se],Ve[-se]).domFrag().insDirOf(-se,Ve.domFrag()),Ve[-se]=Ie}v.supsub=F,delete v[M],delete v["".concat(W,"Into")];var we=v[F];we["".concat(W,"OutOf")]=bC,delete we.deleteOutOf,M==="sub"&&v.domFrag().addClass("dcg-mq-sup-only").children().last().remove(),this.remove()}})(this,"sub sup".split(" ")[f],"sup sub".split(" ")[f],"down up".split(" ")[f])},m}(Fr);function bC(S){var m=this.parent,d=S;do{if(d[e])return S.insLeftOf(m);d=d.parent.parent}while(d!==m);S.insRightOf(m)}var Uk=function(S){it(m,S);function m(){var d=S!==null&&S.apply(this,arguments)||this;return d.supsub="sub",d.domView=new sr(1,function(f){return c("span",{class:"dcg-mq-supsub dcg-mq-non-leaf"},[c.block("span",{class:"dcg-mq-sub"},f[0]),c("span",{style:"display:inline-block;width:0"},[c.text(p)])])}),d.textTemplate=["_"],d.mathspeakTemplate=["Subscript,",", Baseline"],d.ariaLabel="subscript",d}return m.prototype.finalizeTree=function(){this.downInto=this.sub=this.getEnd(t),this.sub.upOutOf=bC,S.prototype.finalizeTree.call(this)},m}(za);A.subscript=A._=Uk,A.superscript=A.supscript=A["^"]=function(S){it(m,S);function m(){var d=S!==null&&S.apply(this,arguments)||this;return d.supsub="sup",d.domView=new sr(1,function(f){return c("span",{class:"dcg-mq-supsub dcg-mq-non-leaf dcg-mq-sup-only"},[c.block("span",{class:"dcg-mq-sup"},f[0])])}),d.textTemplate=["^(",")"],d.ariaLabel="superscript",d.mathspeakTemplate=["Superscript,",", Baseline"],d}return m.prototype.mathspeak=function(d){var f=this.upInto;if(f!==void 0){var v=yC(f);if((!d||!d.ignoreShorthand)&&by.test(v)){if(v==="0")return"to the 0 power";if(v==="2")return"squared";if(v==="3")return"cubed";var M="";/^[+-]?\d{1,3}$/.test(v)&&(/(11|12|13|4|5|6|7|8|9|0)$/.test(v)?M="th":/1$/.test(v)?M="st":/2$/.test(v)?M="nd":/3$/.test(v)&&(M="rd"));var F=typeof f=="object"?f.mathspeak():v;return"to the "+F+M+" power"}}return S.prototype.mathspeak.call(this)},m.prototype.finalizeTree=function(){this.upInto=this.sup=this.getEnd(e),this.sup.downOutOf=bC,S.prototype.finalizeTree.call(this)},m}(za);var $c=function(S){it(m,S);function m(d,f,v){var M=S.call(this)||this;M.ariaLabel=v||d.replace(/^\\/,"");var F=new sr(2,function(W){return c("span",{class:"dcg-mq-large-operator dcg-mq-non-leaf"},[c("span",{class:"dcg-mq-to"},[c.block("span",{},W[1])]),c("big",{},[c.text(f)]),c("span",{class:"dcg-mq-from"},[c.block("span",{},W[0])])])});return xi.prototype.setCtrlSeqHtmlTextAndMathspeak.call(M,d,F),M}return m.prototype.createLeftOf=function(d){S.prototype.createLeftOf.call(this,d),d.options.sumStartsWithNEquals&&(new de("n").createLeftOf(d),new io().createLeftOf(d))},m.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),d.latex+=this.ctrlSeq+"_{";var f=d.latex.length;this.getEnd(t).latexRecursive(d);var v=d.latex.length;v===f&&(d.latex+=" "),d.latex+="}^{",f=d.latex.length,this.getEnd(e).latexRecursive(d),v=d.latex.length,f===v&&(d.latex+=" "),d.latex+="}",this.checkCursorContextClose(d)},m.prototype.mathspeak=function(){return"Start "+this.ariaLabel+" from "+this.getEnd(t).mathspeak()+" to "+this.getEnd(e).mathspeak()+", end "+this.ariaLabel+", "},m.prototype.parser=function(){for(var d=rt.string,f=rt.optWhitespace,v=rt.succeed,M=Nt.block,F=this,W=F.blocks=[new ii,new ii],X=0;X<W.length;X+=1)W[X].adopt(F,F.getEnd(e),0);return f.then(d("_").or(d("^"))).then(function(se){var Ve=W[se==="_"?0:1];return M.then(function(Ie){return Ie.children().adopt(Ve,Ve.getEnd(e),0),v(F)})}).many().result(F)},m.prototype.finalizeTree=function(){var d=this.getEnd(t),f=this.getEnd(e);d.ariaLabel="lower bound",f.ariaLabel="upper bound",this.downInto=d,this.upInto=f,d.upOutOf=f,f.downOutOf=d},m}(Fr);A["\u2211"]=A.sum=A.summation=function(){return new $c("\\sum ",y,"sum")},A["\u220F"]=A.prod=A.product=function(){return new $c("\\prod ",w,"product")},A.coprod=A.coproduct=function(){return new $c("\\coprod ",b,"co product")},A["\u222B"]=A.int=A.integral=function(S){it(m,S);function m(){var d=S.call(this,"\\int ","","integral")||this;return d.ariaLabel="integral",d.domView=new sr(2,function(f){return c("span",{class:"dcg-mq-int dcg-mq-non-leaf"},[c("big",{},[c.text(D)]),c("span",{class:"dcg-mq-supsub dcg-mq-non-leaf"},[c("span",{class:"dcg-mq-sup"},[c.block("span",{class:"dcg-mq-sup-inner"},f[1])]),c.block("span",{class:"dcg-mq-sub"},f[0]),c("span",{style:"display:inline-block;width:0"},[c.text(p)])])])}),d}return m.prototype.createLeftOf=function(d){Fr.prototype.createLeftOf.call(this,d)},m}($c);var z_=A.frac=A.dfrac=A.cfrac=A.fraction=function(S){it(m,S);function m(){var d=S!==null&&S.apply(this,arguments)||this;return d.ctrlSeq="\\frac",d.domView=new sr(2,function(f){return c("span",{class:"dcg-mq-fraction dcg-mq-non-leaf"},[c.block("span",{class:"dcg-mq-numerator"},f[0]),c.block("span",{class:"dcg-mq-denominator"},f[1]),c("span",{style:"display:inline-block;width:0"},[c.text(p)])])}),d.textTemplate=["(",")/(",")"],d}return m.prototype.finalizeTree=function(){var d=this.getEnd(t),f=this.getEnd(e);this.upInto=f.upOutOf=d,this.downInto=d.downOutOf=f,d.ariaLabel="numerator",f.ariaLabel="denominator",this.getFracDepth()>1?this.mathspeakTemplate=["StartNestedFraction,","NestedOver",", EndNestedFraction"]:this.mathspeakTemplate=["StartFraction,","Over",", EndFraction"]},m.prototype.mathspeak=function(d){if(d&&d.createdLeftOf){var f=d.createdLeftOf;return f.parent.mathspeak()}var v=yC(this.getEnd(t)),M=yC(this.getEnd(e));if((!d||!d.ignoreShorthand)&&by.test(v)&&by.test(M)){var F=v==="1"||v==="-1",W="";if(M==="2"?W=F?"half":"halves":M==="3"?W=F?"third":"thirds":M==="4"?W=F?"quarter":"quarters":M==="5"?W=F?"fifth":"fifths":M==="6"?W=F?"sixth":"sixths":M==="7"?W=F?"seventh":"sevenths":M==="8"?W=F?"eighth":"eighths":M==="9"&&(W=F?"ninth":"ninths"),W!==""){for(var X="",se=!1,Ve=this[t];Ve&&Ve[t]!==void 0;Ve=Ve[t])if(Ve.ctrlSeq!=="\\ ")if(by.test(Ve.ctrlSeq||""))se=!0;else{se=!1;break}return se&&(X+="and "),X+=this.getEnd(t).mathspeak()+" "+W,X}}return S.prototype.mathspeak.call(this)},m.prototype.getFracDepth=function(){var d=0,f=function(v,M){return v instanceof ae&&v.ctrlSeq&&v.ctrlSeq.toLowerCase().search("frac")>=0&&(M+=1),v&&v.parent?f(v.parent,M):M};return f(this,d)},m}(Fr),W_=A.over=$["/"]=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m.prototype.createLeftOf=function(d){if(!this.replacedFragment){var f=d[t];if(!d.options.typingSlashCreatesNewFraction)for(;f&&!(f instanceof Xi||f instanceof(A.text||n)||f instanceof $c||f.ctrlSeq==="\\ "||/^[,;:]$/.test(f.ctrlSeq));)f=f[t];if(f instanceof $c&&f[e]instanceof za){f=f[e];var v=f[e];v instanceof za&&v.ctrlSeq!=f.ctrlSeq&&(f=f[e])}if(f!==d[t]&&!d.isTooDeep(1)){var v=f[e],M=d[t];this.replaces(new B(v||d.parent.getEnd(t),M)),d[t]=f}}S.prototype.createLeftOf.call(this,d)},m}(z_),qk=function(){return new xi("\\operatorname{ans}",c("span",{class:"dcg-mq-ans"},[c.text("ans")]),"ans")};A.ans=qk;var Hk=function(){return new xi("\\%\\operatorname{of}",c("span",{class:"dcg-mq-nonSymbola dcg-mq-operator-name"},[c.text("% of ")]),"percent of")};A.percent=A.percentof=Hk;var j_=function(S){it(m,S);function m(){var d=S!==null&&S.apply(this,arguments)||this;return d.tokenId="",d.ctrlSeq="\\token",d.textTemplate=["token(",")"],d.mathspeakTemplate=["StartToken,",", EndToken"],d.ariaLabel="token",d}return m.prototype.html=function(){var d=c("span",{class:"dcg-mq-token dcg-mq-ignore-mousedown","data-dcg-mq-token":this.tokenId});return this.setDOM(d),N.linkElementByCmdNode(d,this),d},m.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),d.latex+="\\token{"+this.tokenId+"}",this.checkCursorContextClose(d)},m.prototype.mathspeak=function(){var d=[];return this.domFrag().children().eachElement(function(f){var v=f.getAttribute("aria-label");typeof v=="string"&&v!==""&&d.push(v)}),d.length>0?d.join(" ").trim():"token "+this.tokenId},m.prototype.parser=function(){var d=this;return Nt.block.map(function(f){var v=f.getEnd(t);if(v)for(d.tokenId+=v.ctrlSeq;v=v[e];)d.tokenId+=v.ctrlSeq;return d})},m}(xi);A.token=j_;var $k=function(S){it(m,S);function m(){var d=S!==null&&S.apply(this,arguments)||this;return d.ctrlSeq="\\sqrt",d.domView=new sr(1,function(f){return c("span",{class:"dcg-mq-non-leaf dcg-mq-sqrt-container"},[c("span",{class:"dcg-mq-scaled dcg-mq-sqrt-prefix"},[Vh.sqrt.html()]),c.block("span",{class:"dcg-mq-non-leaf dcg-mq-sqrt-stem"},f[0])])}),d.textTemplate=["sqrt(",")"],d.mathspeakTemplate=["StartRoot,",", EndRoot"],d.ariaLabel="root",d}return m.prototype.parser=function(){return Nt.optBlock.then(function(d){return Nt.block.map(function(f){var v=new xC;return v.blocks=[d,f],d.adopt(v,0,0),f.adopt(v,d,0),v})}).or(S.prototype.parser.call(this))},m}(Fr);A.sqrt=$k,A.hat=function(S){it(m,S);function m(){var d=S!==null&&S.apply(this,arguments)||this;return d.ctrlSeq="\\hat",d.domView=new sr(1,function(f){return c("span",{class:"dcg-mq-non-leaf"},[c("span",{class:"dcg-mq-hat-prefix"},[c.text("^")]),c.block("span",{class:"dcg-mq-hat-stem"},f[0])])}),d.textTemplate=["hat(",")"],d}return m}(Fr);var xC=function(S){it(m,S);function m(){var d=S!==null&&S.apply(this,arguments)||this;return d.domView=new sr(2,function(f){return c("span",{class:"dcg-mq-nthroot-container dcg-mq-non-leaf"},[c.block("sup",{class:"dcg-mq-nthroot dcg-mq-non-leaf"},f[0]),c("span",{class:"dcg-mq-scaled dcg-mq-sqrt-container"},[c("span",{class:"dcg-mq-sqrt-prefix dcg-mq-scaled"},[Vh.sqrt.html()]),c.block("span",{class:"dcg-mq-sqrt-stem dcg-mq-non-leaf"},f[1])])])}),d.textTemplate=["sqrt[","](",")"],d}return m.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),d.latex+="\\sqrt[",this.getEnd(t).latexRecursive(d),d.latex+="]{",this.getEnd(e).latexRecursive(d),d.latex+="}",this.checkCursorContextClose(d)},m.prototype.mathspeak=function(){var d=this.getEnd(t).mathspeak(),f=this.getEnd(e).mathspeak();return this.getEnd(t).ariaLabel="Index",this.getEnd(e).ariaLabel="Radicand",d==="3"?"Start Cube Root, "+f+", End Cube Root":"Root Index "+d+", Start Root, "+f+", End Root"},m}($k);A.nthroot=xC,A.cbrt=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m.prototype.createLeftOf=function(d){S.prototype.createLeftOf.call(this,d),new Z("3").createLeftOf(d),d.controller.moveRight()},m}(xC);var zk=function(S){it(m,S);function m(d,f,v){var M=this,F=new sr(1,function(W){return c("span",{class:"dcg-mq-non-leaf"},[c("span",{class:"dcg-mq-diacritic-above"},[f]),c.block("span",{class:"dcg-mq-diacritic-stem"},W[0])])});return M=S.call(this,d,F,v)||this,M}return m}(Fr);A.vec=function(){return new zk("\\vec",c.entityText("&rarr;"),["vec(",")"])},A.tilde=function(){return new zk("\\tilde",c.text("~"),["tilde(",")"])};var Wk=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m.prototype.setDOM=function(d){var f;S.prototype.setDOM.call(this,d);var v=this.domFrag().children();return v.isEmpty()||(this.delimFrags=(f={},f[t]=v.first(),f[e]=v.last(),f)),this},m}(Fr),Wa=function(S){it(m,S);function m(d,f,v,M,F){var W,X=S.call(this,"\\left"+M,void 0,[f,v])||this;return X.side=d,X.sides=(W={},W[t]={ch:f,ctrlSeq:M},W[e]={ch:v,ctrlSeq:F},W),X}return m.prototype.numBlocks=function(){return 1},m.prototype.html=function(){var d=this,f=this.getSymbol(t),v=this.getSymbol(e);return this.domView=new sr(1,function(M){return c("span",{class:"dcg-mq-non-leaf dcg-mq-bracket-container"},[c("span",{style:"width:"+f.width,class:"dcg-mq-scaled dcg-mq-bracket-l dcg-mq-paren"+(d.side===e?" dcg-mq-ghost":"")},[f.html()]),c.block("span",{style:"margin-left:"+f.width+";margin-right:"+v.width,class:"dcg-mq-bracket-middle dcg-mq-non-leaf"},M[0]),c("span",{style:"width:"+v.width,class:"dcg-mq-scaled dcg-mq-bracket-r dcg-mq-paren"+(d.side===t?" dcg-mq-ghost":"")},[v.html()])])}),S.prototype.html.call(this)},m.prototype.getSymbol=function(d){var f=this.sides[d||e].ch;return Vh[f]||{width:"0",html:""}},m.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),d.latex+="\\left"+this.sides[t].ctrlSeq,this.getEnd(t).latexRecursive(d),d.latex+="\\right"+this.sides[e].ctrlSeq,this.checkCursorContextClose(d)},m.prototype.mathspeak=function(d){var f=this.sides[t].ch,v=this.sides[e].ch;if(f==="|"&&v==="|")this.mathspeakTemplate=["StartAbsoluteValue,",", EndAbsoluteValue"],this.ariaLabel="absolute value";else if(d&&d.createdLeftOf&&this.side){var M="";return this.side===t?M=this.textTemplate[0]:this.side===e&&(M=this.textTemplate[1]),(this.side===t?"left ":"right ")+Hd[M]}else this.mathspeakTemplate=["left "+Hd[f]+",",", right "+Hd[v]],this.ariaLabel=Hd[f]+" block";return S.prototype.mathspeak.call(this)},m.prototype.matchBrack=function(d,f,v){return v instanceof m&&v.side&&v.side!==-f&&(!d.restrictMismatchedBrackets||Lh[this.sides[this.side].ch]===v.sides[v.side].ch||{"(":"]","[":")"}[this.sides[t].ch]===v.sides[e].ch)&&v},m.prototype.closeOpposing=function(d){d.side=0,d.sides[this.side]=this.sides[this.side];var f=d.delimFrags[this.side===t?t:e].removeClass("dcg-mq-ghost");this.replaceBracket(f,this.side)},m.prototype.createLeftOf=function(d){var f;if(!this.replacedFragment){var v=d.options;this.sides[t].ch==="|"?f=this.matchBrack(v,e,d[e])||this.matchBrack(v,t,d[t])||this.matchBrack(v,0,d.parent.parent):f=this.matchBrack(v,-this.side,d[-this.side])||this.matchBrack(v,-this.side,d.parent.parent)}if(f){var M=this.side=-f.side;this.closeOpposing(f),f===d.parent.parent&&d[M]&&new B(d[M],d.parent.getEnd(M),-M).disown().withDirAdopt(-M,f.parent,f,f[M]).domFrag().insDirOf(M,f.domFrag()),f.bubble(function(F){F.reflow()})}else f=this,M=f.side,f.replacedFragment?f.side=0:d[-M]&&(f.replaces(new B(d[-M],d.parent.getEnd(-M),M)),d[-M]=0),S.prototype.createLeftOf.call(this,d);M===t?d.insAtLeftEnd(f.getEnd(t)):d.insRightOf(f)},m.prototype.placeCursor=function(){},m.prototype.unwrap=function(){this.getEnd(t).children().disown().adopt(this.parent,this,this[e]).domFrag().insertAfter(this.domFrag()),this.remove()},m.prototype.deleteSide=function(d,f,v){var M=this.parent,F=this[d],W=M.getEnd(d);if(d===this.side){this.unwrap(),F?v.insDirOf(-d,F):v.insAtDirEnd(d,M);return}var X=v.options,se=!this.side;if(this.side=-d,this.matchBrack(X,d,this.getEnd(t).getEnd(this.side))){this.closeOpposing(this.getEnd(t).getEnd(this.side));var Ve=this.getEnd(t).getEnd(d);this.unwrap(),Ve&&Ve.siblingCreated(v.options,d),F?v.insDirOf(-d,F):v.insAtDirEnd(d,M)}else{if(this.matchBrack(X,d,this.parent.parent))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else if(f&&se){this.unwrap(),F?v.insDirOf(-d,F):v.insAtDirEnd(d,M);return}else{this.sides[d]=Y_(this),this.delimFrags[t].removeClass("dcg-mq-ghost"),this.delimFrags[e].removeClass("dcg-mq-ghost");var Ie=this.delimFrags[d].addClass("dcg-mq-ghost");this.replaceBracket(Ie,d)}if(F){var we=this.getEnd(t),Ve=we.getEnd(d);we.domFrag().removeClass("dcg-mq-empty"),new B(F,W,-d).disown().withDirAdopt(-d,we,Ve,0).domFrag().insAtDirEnd(d,we.domFrag().oneElement()),Ve&&Ve.siblingCreated(v.options,d),v.insDirOf(-d,F)}else f?v.insDirOf(d,this):v.insAtDirEnd(d,this.getEnd(t))}},m.prototype.replaceBracket=function(d,f){var v=this.getSymbol(f);if(d.children().replaceWith(x(v.html())),d.oneElement().style.width=v.width,f===t){var M=d.next();M.isEmpty()||(M.oneElement().style.marginLeft=v.width)}else{var F=d.prev();F.isEmpty()||(F.oneElement().style.marginRight=v.width)}},m.prototype.deleteTowards=function(d,f){this.deleteSide(-d,!1,f)},m.prototype.finalizeTree=function(){this.getEnd(t).deleteOutOf=function(d,f){this.parent.deleteSide(d,!0,f)},this.finalizeTree=this.intentionalBlur=function(){this.delimFrags[this.side===t?e:t].removeClass("dcg-mq-ghost"),this.side=0}},m.prototype.siblingCreated=function(d,f){f===-this.side&&this.finalizeTree()},m}(Wk);function Y_(S){var m=S.side,d=S.sides[m];return{ch:Lh[d.ch],ctrlSeq:Lh[d.ctrlSeq]}}var Lh={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|","\\lVert ":"\\rVert ","\\rVert ":"\\lVert "},Hd={"&lang;":"angle-bracket","&rang;":"angle-bracket","|":"pipe"};function wC(S,f,d){var f=f||S,v=Lh[S],M=Lh[f];$[S]=function(){return new Wa(t,S,v,f,M)},$[v]=function(){return new Wa(e,S,v,f,M)},Hd[S]=Hd[v]=d}wC("(","","parenthesis"),wC("[","","bracket"),wC("{","\\{","brace"),A.langle=function(){return new Wa(t,"&lang;","&rang;","\\langle ","\\rangle ")},A.rangle=function(){return new Wa(e,"&lang;","&rang;","\\langle ","\\rangle ")},$["|"]=function(){return new Wa(t,"|","|","|","|")},A.lVert=function(){return new Wa(t,"&#8741;","&#8741;","\\lVert ","\\rVert ")},A.rVert=function(){return new Wa(e,"&#8741;","&#8741;","\\lVert ","\\rVert ")},A.left=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m.prototype.parser=function(){var d=rt.regex,f=rt.string,v=rt.optWhitespace;return v.then(d(/^(?:[([|]|\\\{|\\langle(?![a-zA-Z])|\\lVert(?![a-zA-Z]))/)).then(function(M){var F=M.replace(/^\\/,"");return M=="\\langle"&&(F="&lang;",M=M+" "),M=="\\lVert"&&(F="&#8741;",M=M+" "),Nt.then(function(W){return f("\\right").skip(v).then(d(/^(?:[\])|]|\\\}|\\rangle(?![a-zA-Z])|\\rVert(?![a-zA-Z]))/)).map(function(X){var se=X.replace(/^\\/,"");X=="\\rangle"&&(se="&rang;",X=X+" "),X=="\\rVert"&&(se="&#8741;",X=X+" ");var Ve=new Wa(0,F,se,M,X);return Ve.blocks=[W],W.adopt(Ve,0,0),Ve})})})},m}(Fr),A.right=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m.prototype.parser=function(){return rt.fail("unmatched \\right")},m}(Fr);var vC=Vh["("],CC=Vh[")"],jk=function(S){it(m,S);function m(){var d=S!==null&&S.apply(this,arguments)||this;return d.ctrlSeq="\\binom",d.domView=new sr(2,function(f){return c("span",{class:"dcg-mq-non-leaf dcg-mq-bracket-container"},[c("span",{style:"width:"+vC.width,class:"dcg-mq-paren dcg-mq-bracket-l dcg-mq-scaled"},[vC.html()]),c("span",{style:"margin-left:"+vC.width+"; margin-right:"+CC.width,class:"dcg-mq-non-leaf dcg-mq-bracket-middle"},[c("span",{class:"dcg-mq-array dcg-mq-non-leaf"},[c.block("span",{},f[0]),c.block("span",{},f[1])])]),c("span",{style:"width:"+CC.width,class:"dcg-mq-paren dcg-mq-bracket-r dcg-mq-scaled"},[CC.html()])])}),d.textTemplate=["choose(",",",")"],d.mathspeakTemplate=["StartBinomial,","Choose",", EndBinomial"],d.ariaLabel="binomial",d}return m}(Wk);A.binom=A.binomial=jk,A.choose=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m.prototype.createLeftOf=function(d){W_.prototype.createLeftOf(d)},m}(jk);var J_=function(S){it(m,S);function m(){var d=S!==null&&S.apply(this,arguments)||this;return d.ctrlSeq="\\MathQuillMathField",d.domView=new sr(1,function(f){return c("span",{class:"dcg-mq-editable-field"},[c.block("span",{class:"dcg-mq-root-block","aria-hidden":"true"},f[0])])}),d}return m.prototype.parser=function(){var d=this,f=rt.string,v=rt.regex,M=rt.succeed;return f("[").then(v(/^[a-z][a-z0-9]*/i)).skip(f("]")).map(function(F){d.name=F}).or(M(void 0)).then(S.prototype.parser.call(this))},m.prototype.finalizeTree=function(d){var f=new Oo(this.getEnd(t),this.domFrag().oneElement(),d);f.KIND_OF_MQ="MathField",f.editable=!0,f.createTextarea(),f.editablesTextareaEvents(),f.cursor.insAtRightEnd(f.root),ve(f.root);function v(M){if(M.parentNode&&!x(M).hasClass("dcg-mq-root-block")&&v(M.parentNode),M.nodeType===Node.ELEMENT_NODE){var F=M;F.getAttribute("aria-hidden")==="true"&&(F.removeAttribute("aria-hidden"),x(M).children().eachElement(function(W){W.setAttribute("aria-hidden","true")}))}}v(this.domFrag().parent().oneElement()),this.domFrag().oneElement().removeAttribute("aria-hidden")},m.prototype.registerInnerField=function(d,f){var v=this.getEnd(t).controller,M=new f(v);d[this.name]=M,d.push(M)},m.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),this.getEnd(t).latexRecursive(d),this.checkCursorContextClose(d)},m.prototype.text=function(){return this.getEnd(t).text()},m}(Fr);A.editable=A.MathQuillMathField=J_;var Yk=function(S){it(m,S);function m(){return S!==null&&S.apply(this,arguments)||this}return m.prototype.setOptions=function(d){function f(){return""}return this.text=d.text||f,this.domView=new sr(0,function(){return c("span",{},[l(d.htmlString||"")])}),this.latex=d.latex||f,this},m.prototype.latexRecursive=function(d){this.checkCursorContextOpen(d),d.latex+=this.latex(),this.checkCursorContextClose(d)},m.prototype.parser=function(){var d=this,f=rt.string,v=rt.regex,M=rt.succeed;return f("{").then(v(/^[a-z][a-z0-9]*/i)).skip(f("}")).then(function(F){return f("[").then(v(/^[-\w\s]*/)).skip(f("]")).or(M(void 0)).map(function(W){return d.setOptions(Ee[F](W))})})},m}(xi);if(A.embed=Yk,window.jQuery){He=Tt(1);for(var Jk in He)(function(S,m){typeof m=="function"?(Ze[S]=function(){return Me(),m.apply(this,arguments)},Ze[S].prototype=m.prototype):Ze[S]=m})(Jk,He[Jk])}})()});var En,Us=__dcg_shared_module_exports__['f'](()=>{En=()=>{let t="";try{t=location.search,t[0]=="?"&&(t=t.slice(1))}catch(i){}let e=t.split("&"),r={};for(let i of e){let n=i.split("=");n.length==2?r[n[0]]=decodeURIComponent(n[1]):r[n[0]]=!0}return r}});function p2(t,e){if(e!=null){if(typeof t!="string")throw new Error("Must pass a string for an EventHandler name");if(typeof e!="function")throw new Error("Must pass a function for an EventHandler callback");return{bindings:{onMount:function(r){r[t.toLowerCase()]=function(i){i&&e.apply(this,arguments)}}}}}}var MT,TT=__dcg_shared_module_exports__['f'](()=>{MT=p2});function h2(t){var e=function(){return t};return e.isDCGViewConst=!0,e}function g2(t){return!!(typeof t=="function"&&t.isDCGViewConst)}var tn,Qa=__dcg_shared_module_exports__['f'](()=>{tn={isConst:g2,makeConst:h2}});function f2(t,e,r){r===void 0?t.removeAttribute(e):t.setAttribute(e,r+"")}var rb,cS=__dcg_shared_module_exports__['f'](()=>{rb={update:f2}});function m2(t,e){var r=e(),i;return tn.isConst(e)||(i={onUpdate:function(n){var o=e();o!==r&&(r=o,rb.update(n,t,o))}}),{value:r,bindings:i}}var GT,AT=__dcg_shared_module_exports__['f'](()=>{Qa();cS();GT=m2});function y2(t){return t[0]==="o"&&t[1]==="n"&&t[2].toUpperCase()===t[2]}var VT,LT=__dcg_shared_module_exports__['f'](()=>{VT=y2});function b2(t,e){dS[t]=e}function x2(t){return dS.hasOwnProperty(t)}function w2(t,e){var r=dS[t];return r(e)}var dS,eg,uS=__dcg_shared_module_exports__['f'](()=>{dS={};eg={isCustomAttribute:x2,add:b2,parse:w2}});function v2(t,e,r){var i=t._bindings[e];i?i.push(r):t._bindings[e]=[r]}function C2(t,e){var r=t._bindings[e];if(r)for(var i=r.length,n=0;n<i;n++)r[n]()}var vo,tg=__dcg_shared_module_exports__['f'](()=>{vo={add:v2,invoke:C2}});function S2(t){Cu.push(t)}function E2(t){var e=Cu;Cu=[];for(var r=0;r<e.length;r++){var i=e[r];i!==t&&Cu.push(i)}}function D2(t,e){try{if(e&&e._isDCGView){t+=" ["+e._viewName+"]";var r=e.traceViewHierarchy();r.ancestors.length>0&&(t+=`
View Hierarchy:
`+r.formatted)}throw new Error(t)}catch(n){console.warn(n);for(var i=0;i<Cu.length;i++)Cu[i](n)}}var Cu,Hs,rg=__dcg_shared_module_exports__['f'](()=>{Cu=[];Hs={warn:D2,addWarningHandler:S2,removeWarningHandler:E2}});function M2(t,e,r){var i=!1;return function(){if(i){Hs.warn(t+" is a one-time binding but was called multiple times",r);return}i=!0,e.apply(this,arguments)}}function T2(t,e,r){var i=r.bindings;if(i)for(var n in i){var o=i[n];n in k2&&(o=o.bind(null,e)),n in I2&&(o=M2(n,o,t)),vo.add(t,n,o)}}function G2(t,e){if(typeof e!="function")throw new Error('The "'+t+'" attr must be a function. It is: '+JSON.stringify(e));return eg.isCustomAttribute(t)?eg.parse(t,e):VT(t)?MT(t,e):GT(t,e)}function A2(t,e,r){if(e)for(var i in e){var n=G2(i,e[i]);if(n){var o=n.value;o!==void 0&&r.setAttribute(i,o),n.bindings&&T2(t,r,n)}}}var k2,I2,PT,OT=__dcg_shared_module_exports__['f'](()=>{TT();AT();LT();uS();tg();rg();k2={onMount:!0,didMount:!0,willUnmount:!0,willUpdate:!0,onUpdate:!0,didUpdate:!0},I2={willMount:!0,onMount:!0,didMount:!0,willUnmount:!0,onUnmount:!0,didUnmount:!0};PT=A2});function V2(){_T=!0}function L2(t,e,r){if(typeof r!="function")throw new Error("bindText expects a function");var i=r();i==null&&(i="");var n=document.createTextNode(i);if(_T){var o=document.createElement("span");o.appendChild(n),e.appendChild(o)}else e.appendChild(n);vo.add(t,"onUpdate",function(){var a=r();a==null&&(a=""),i!==a&&(n.nodeValue=a,i=a)})}var _T,ib,pS=__dcg_shared_module_exports__['f'](()=>{tg();_T=!1;ib={bindText:L2,enableSpanWrapping:V2}});function FT(t,e){var r=document.createTextNode(e);t.appendChild(r)}function hS(t,e,r){if(this.tagName=t,this.attrs=e,this.children=r,Array.isArray(this.children))for(var i=0;i<this.children.length;i++){var n=typeof this.children[i];n!=="object"&&n!=="function"||(this.children[i]._parentElement=this)}}var P2,RT,NT=__dcg_shared_module_exports__['f'](()=>{OT();pS();Qa();rg();P2=ib.bindText;hS.prototype._isDCGElement=!0;hS.prototype.renderToDocFrag=function(t,e){if(this._domNode)throw new Error("Cannot remount a DCGElement");var r=this.children,i=document.createElement(this.tagName);this._domNode=i,PT(e,this.attrs,i),t.appendChild(i);for(var n=r.length,o=0;o<n;o++){var a=r[o];a._isDCGElement?a.renderToDocFrag(i,e):tn.isConst(a)?FT(i,a()):typeof a=="function"?P2(e,i,a):(Hs.warn("Text should be a const or a getter: "+JSON.stringify(a),e),FT(i,a))}};RT=hS});function BT(t,e){if(t!=null)if(Array.isArray(t))for(var r=0;r<t.length;r++)BT(t[r],e);else e.push(t)}function O2(t,e){for(var r=[],i=arguments.length-1,n=2;n<=i;n++)BT(arguments[n],r);if(typeof t=="string")return new RT(t,e,r);if(t&&t._isDCGViewClass)return new t(e,r);throw new Error("createElement expects a String or DCGViewClass")}var $s,Su=__dcg_shared_module_exports__['f'](()=>{NT();$s=O2});function _2(){for(var t=this._element;t._isDCGView;)t=t._element;return t._domNode}function F2(t,e){if(e&&e._childViews.push(this),this.__generatedHTMLBefore)throw new Error("Cannot remount a DCGView");if(this.__generatedHTMLBefore=!0,this._element.renderToDocFrag(t,this),Array.isArray(this._siblingElements))for(var r=0;r<this._siblingElements.length;r++)this._siblingElements[r].renderToDocFrag(t,this)}function R2(t,e,r){if(!t||!t._isDCGViewClass)throw new Error("Must pass a DCGView class to be mounted");if(!e||e.nodeType!==1)throw new Error("Must pass an HTMLElement for the node");if(e._mountedDCGView)throw new Error("This node is already mounted by a view");var i=new t(r),n=document.createDocumentFragment();return i.renderToDocFrag(n),e.innerHTML="",gS(i),e._mountedDCGView=i,e.appendChild(n),fS(i),mS(i),i}function N2(t){var e=t._mountedDCGView;if(!e)throw new Error("This node is not mounted by a DCGView");yS(e),t.innerHTML="",delete t._mountedDCGView,bS(e),xS(e)}function gS(t){t.willMount&&t.willMount(),vo.invoke(t,"willMount"),t._childViews.forEach(gS)}function fS(t){t._isMounted=!0,t.onMount&&t.onMount(),vo.invoke(t,"onMount"),t._childViews.forEach(fS)}function mS(t){t.didMount&&t.didMount(),vo.invoke(t,"didMount"),t._childViews.forEach(mS)}function yS(t){t.willUnmount&&t.willUnmount(),vo.invoke(t,"willUnmount"),t._childViews.forEach(yS)}function bS(t){t._isMounted=!1,t._childViews.forEach(bS),vo.invoke(t,"onUnmount"),t.onUnmount&&t.onUnmount()}function xS(t){t._childViews.forEach(xS),vo.invoke(t,"didUnmount"),t.didUnmount&&t.didUnmount()}function B2(t,e){var r=document.createDocumentFragment();return t.renderToDocFrag(r,e),r.firstChild}var Pt,bc=__dcg_shared_module_exports__['f'](()=>{tg();Pt={renderToDocFrag:F2,findRootNode:_2,createNodeForView:B2,willMount:gS,onMount:fS,didMount:mS,willUnmount:yS,onUnmount:bS,didUnmount:xS,mountToNode:R2,unmountFromNode:N2}});function K2(){if(!this._isMounted)return Hs.warn("Trying to update view that is not mounted. Ignoring update.",this);if(!(this.shouldUpdate&&!this.shouldUpdate())){if(this.willUpdate&&this.willUpdate(),vo.invoke(this,"willUpdate"),vo.invoke(this,"onUpdate"),this.onUpdate&&this.onUpdate(),this.overrideChildUpdates)this.overrideChildUpdates();else for(var t=this._childViews,e=t.length,r=0;r<e;r++)t[r].update();vo.invoke(this,"didUpdate"),this.didUpdate&&this.didUpdate()}}var KT,UT=__dcg_shared_module_exports__['f'](()=>{tg();rg();KT={update:K2}});function U2(t){var e=arguments.length;if(e<2)return t;for(var r=1;r<e;r++)for(var i=arguments[r],n=Object.keys(i),o=n.length,a=0;a<o;a++){var s=n[a];t[s]=i[s]}return t}var zs,Eu=__dcg_shared_module_exports__['f'](()=>{zs=U2});function q2(t){if(!t)throw new Error("must pass a spec to DCGView.createClass");if(typeof t.template!="function")throw new Error("must pass a template function to DCGView.createClass");var e=function(i,n){this._viewName=t.viewName||(this.constructor?this.constructor.name:"Anonymous DCGView"),this._setupProps(i,n),this.init&&this.init(),this._callTemplate()};e.prototype._setupProps=function(i,n){if(i){for(var o in i){var a=i[o];if(typeof a!="function"&&a!==void 0)throw new Error('The "'+o+'" prop must be a function. It is: '+JSON.stringify(a))}this.props=i}else this.props={};this.children=n,this._childViews=[],this._bindings={}},e.prototype._callTemplate=function(){if(this._element=this.template(),!this._element||!this._element._isDCGElement)throw new Error("template() must return a DCGElement");this._element._parentElement=this},e.prototype.bindFn=function(i){return i.bind(this)},e.prototype.findRootNode=Pt.findRootNode,e.prototype.renderToDocFrag=Pt.renderToDocFrag,e.prototype.const=tn.makeConst,e.prototype.spread=zs,e.prototype.createElement=$s,e.prototype.update=KT.update,e.prototype.traceViewHierarchy=function(){for(var i=[],n=this._parentElement;n;n=n._parentElement)i.unshift(n);var o=i.concat([this]).filter(function(a){return!(!a._isDCGView||a._isDCGSwitch&&a._parentElement&&a._parentElement._isDCGIf||a._isDCGIfDefinedWrapper||a._isDCGSwitchWrapper||a._isDCGSwitchUnionWrapper)}).map(function(a,s){for(var l="";s-- >0;)l+="  ";return l+"<"+a._viewName+">"}).join(`
`);return{ancestors:i,formatted:o}};for(var r in t)if(t.hasOwnProperty(r))if(!e.prototype.hasOwnProperty(r))e.prototype[r]=t[r];else throw new Error("Cannot override the "+r+"() method");return e._isDCGViewClass=!0,e.prototype._isDCGView=!0,e.prototype._isDCGElement=!0,e}var Zr,Sa=__dcg_shared_module_exports__['f'](()=>{Su();bc();UT();Qa();Eu();Zr=q2});function qT(t){var e=t(),r=typeof e;if(r==="string")return e;if(!r||r!=="object")throw new Error("Unsupported type returned from style getter: "+r);var i="";for(var n in e){var o=e[n];e.hasOwnProperty(n)&&o!=null&&(i?i+=";"+n+":"+o:i=n+":"+o)}return i}function H2(t){var e,r=qT(t);return tn.isConst(t)||(e={onUpdate:function(i){var n=qT(t);r!==n&&(rb.update(i,"style",n),r=n)}}),{value:r,bindings:e}}var HT,$T=__dcg_shared_module_exports__['f'](()=>{Qa();cS();HT=H2});function zT(t){var e=t(),r=typeof e;if(r==="string")return e;if(!r||r!=="object")throw new Error("Unsupported type returned from class getter: "+r);var i="";for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];o&&(i?i+=" "+n:i=n)}return i}function $2(t,e,r){for(var i=[],n=t.className.replace(WT,"").split(jT),o=e.replace(WT,"").split(jT),a={},s=o.length-1;s>=0;s--)a[o[s]]=!0;var l=n.length;for(s=0;s<l;s++){var c=n[s];a.hasOwnProperty(c)||i.push(c)}return r?i.length?r+" "+i.join(" "):r:i.join(" ")}function z2(t){var e,r=zT(t);return tn.isConst(t)||(e={onUpdate:function(i){var n=zT(t);r!==n&&(i.className===r?(i.className=n,r=n):(i.className=$2(i,r,n),r=n))}}),{value:r,bindings:e}}var WT,jT,YT,JT=__dcg_shared_module_exports__['f'](()=>{Qa();WT=/^\s+|\s+$/g,jT=/\s+/;YT=z2});function W2(t){return function(e){if(typeof e!="function")throw new Error("The "+t+" attribute expects a function for the value");if(tn.isConst(e))throw new Error("The "+t+" attribute does not expect a const for the value");var r={bindings:{}};return r.bindings[t]=e,r}}var Ws,XT=__dcg_shared_module_exports__['f'](()=>{Qa();Ws=W2});function QT(t){var e=t.length,r=new Array(e),i=new Array(e+1),n=0,o,a;for(a=0;a<e;a++){if(t[i[n]]<t[a])o=n+1;else{for(var s=1,l=n-1;s<=l;){var c=Math.ceil((s+l)/2);t[i[c]]<t[a]?s=c+1:l=c-1}o=s}r[a]=i[o-1],i[o]=a,o>n&&(n=o)}var u=new Array(n),h=i[n];for(a=n-1;a>=0;a--)u[a]=t[h],h=r[h];return u}var ZT=__dcg_shared_module_exports__['f'](()=>{});function j2(t,e){var r={},i,n,o=[],a=[];for(i=0;i<e.length;i++)n=e[i],r[n]=i;for(i=0;i<t.length;i++)n=t[i],r[n]===void 0&&o.push(n);var s=[];for(i=0;i<t.length;i++){n=t[i];var l=r[n];l!==void 0&&s.push(l)}var c=QT(s),u={};for(i=0;i<c.length;i++)n=e[c[i]],u[n]=!0;for(i=e.length-1;i>=0;i--)n=e[i],!u[n]&&a.push({key:n,beforeKey:e[i+1]});return{removes:o,inserts:a}}var nb,wS=__dcg_shared_module_exports__['f'](()=>{ZT();nb=j2});function Q2(t,e){return $s(X2,{items:t,keyFunction:e.key,viewFunction:e.item})}var Y2,J2,X2,e0,t0=__dcg_shared_module_exports__['f'](()=>{Sa();wS();Su();bc();Y2=Zr({viewName:"EachPlaceholder",_isDCGEachPlaceholder:!0,template:function(){return this.createElement("div",{style:this.const("display: none")})}}),J2=Zr({viewName:"EachWrapper",_isDCGEachWrapper:!0,template:function(){return this.children[0]}}),X2=Zr({viewName:"Each",_isDCGEach:!0,getKeys:function(){this._keyToItem={};var t=this.props.items(),e=this.props.keyFunction?t.map(this.props.keyFunction):t.slice(0);if(!this._chosenKeyType&&e.length&&(this._chosenKeyType=typeof e[0],this._chosenKeyType!=="string"&&this._chosenKeyType!=="number"))throw new Error("The key: "+JSON.stringify(e[0])+" is not a string or number");for(var r=0;r<e.length;r++){var i=e[r];if(typeof i!==this._chosenKeyType)throw new Error("Keys must be the same type. "+JSON.stringify(i)+" is not a "+this._chosenKeyType);if(i in this._keyToItem)throw new Error("The key: "+JSON.stringify(i)+" is not unique");this._keyToItem[i]=t[r]}return e},createViewForKey:function(t){var e=this._keyToItem[t],r=this.props.viewFunction.call(this,e,t),i=r;return i._isDCGView||(i=this.createElement(J2,null,r)),this._keyToView[t]=i,i},template:function(){this._keyToView={},this._keys=this.getKeys(),this._element=this.createElement(Y2,null),this._siblingElements=[];for(var t=0;t<this._keys.length;t++){var e=this._keys[t],r=this.createViewForKey(e);r._parentElement=this._element._parentElement,this._siblingElements.push(r)}return this._element},detachAllRemovedViews:function(){for(var t=this._childViews,e=0,r=t.length,i,n=0;n<r;n++)i=t[n],i._will_be_unmounted_?e++:t[n-e]=i;t.splice(r-e,e)},overrideChildUpdates:function(){var t=this._keys,e=this.getKeys();this._keys=e;var r=this._element.findRootNode().parentNode,i,n,o,a,s,l,c=nb(t,e),u=[];for(i=c.removes.length-1;i>=0;i--)l=c.removes[i],u.push(this._keyToView[l]);for(u.forEach(Pt.willUnmount),i=0;i<c.removes.length;i++)l=c.removes[i],n=this._keyToView[l],delete this._keyToView[l],n._will_be_unmounted_=!0,r.removeChild(n.findRootNode());u.length>0&&this.detachAllRemovedViews(),u.forEach(Pt.onUnmount),u.forEach(Pt.didUnmount);var h=[];for(i=c.inserts.length-1;i>=0;i--)l=c.inserts[i].key,l in this._keyToView||(n=this.createViewForKey(l),h.push(n),Pt.createNodeForView(n,this));for(h.forEach(Pt.willMount),i=0;i<c.inserts.length;i++)s=c.inserts[i],o=this._keyToView[s.key].findRootNode(),s.beforeKey!==void 0?a=this._keyToView[s.beforeKey].findRootNode():a=null,r.insertBefore(o,a);h.forEach(Pt.onMount),h.forEach(Pt.didMount);var p=this._childViews,g=p.length-h.length;for(i=0;i<g;i++)p[i].update()}});e0=Q2});var Z2,eR,r0,i0=__dcg_shared_module_exports__['f'](()=>{Sa();wS();Qa();bc();Z2=Zr({viewName:"ForWrapper",template:function(){return this.children[0]}}),eR=Zr({viewName:"For",_isDCGFor:!0,getKeys:function(){this._keyToItem={};var t=this.props.each();if(!Array.isArray(t))throw new Error("<For each={}> must return an array");var e=this.props.key?t.map(this.props.key):t.slice(0);if(!this._chosenKeyType&&e.length&&(this._chosenKeyType=typeof e[0],this._chosenKeyType!=="string"&&this._chosenKeyType!=="number"))throw new Error("The key: "+JSON.stringify(e[0])+" is not a string or number");for(var r=0;r<e.length;r++){var i=e[r];if(typeof i!==this._chosenKeyType)throw new Error("Keys must be the same type. "+JSON.stringify(i)+" is not a "+this._chosenKeyType);if(i in this._keyToItem)throw new Error("The key: "+JSON.stringify(i)+" is not unique");this._keyToItem[i]=t[r]}return e},createViewForKey:function(t){var e=this._keyToItem[t],r=this._viewFunction.call(this,e,t),i=r;return i._isDCGView||(i=this.createElement(Z2,null,r)),this._keyToView[t]=i,i},template:function(){if(this._keyToView={},typeof this.props.each!="function")throw new Error("<For each={}> must be a function");if(this.children.length!==1)throw new Error("<For> expects a single child. You passed "+this.children.length);var t=this.children[0];if(!t||!t._isDCGElement)throw new Error("<For> expects the root node to be a DCGElement. You passed "+JSON.stringify(t));if(t._isDCGView)throw new Error("<For> expects the root node to not be a DCGView. Pass in something like <div> or <span>");if(t.children.length!==1)throw new Error("<For> expects a root node with a single child. You passed "+t.children.length);if(this._viewFunction=t.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<For> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof this._viewFunction!="function"){var e=JSON.stringify(this._viewFunction);throw new Error("<For> expects a function that constructs a DCGElement. You passed "+e)}if(tn.isConst(this._viewFunction))throw new Error("<For> expects a function that constructs a DCGElement. You passed a constant");this._keys=this.getKeys();for(var r=[],i=0;i<this._keys.length;i++){var n=this._keys[i],o=this.createViewForKey(n);o._parentElement=this,r.push(o)}return t.children=r,t},detachAllRemovedViews:function(){for(var t=this._childViews,e=0,r=t.length,i,n=0;n<r;n++)i=t[n],i._will_be_unmounted_?e++:t[n-e]=i;t.splice(r-e,e)},overrideChildUpdates:function(){var t=this._keys,e=this.getKeys();this._keys=e;var r=this.findRootNode(),i,n,o,a,s,l,c=nb(t,e),u=[];for(i=c.removes.length-1;i>=0;i--)l=c.removes[i],u.push(this._keyToView[l]);for(u.forEach(Pt.willUnmount),i=0;i<c.removes.length;i++)l=c.removes[i],n=this._keyToView[l],delete this._keyToView[l],n._will_be_unmounted_=!0,r.removeChild(n.findRootNode());u.length>0&&this.detachAllRemovedViews(),u.forEach(Pt.onUnmount),u.forEach(Pt.didUnmount);var h=[];for(i=c.inserts.length-1;i>=0;i--)l=c.inserts[i].key,l in this._keyToView||(n=this.createViewForKey(l),h.push(n),Pt.createNodeForView(n,this));for(h.forEach(Pt.willMount),i=0;i<c.inserts.length;i++)s=c.inserts[i],o=this._keyToView[s.key].findRootNode(),s.beforeKey!==void 0?a=this._keyToView[s.beforeKey].findRootNode():a=null,r.insertBefore(o,a);h.forEach(Pt.onMount),h.forEach(Pt.didMount);var p=this._childViews,g=p.length-h.length;for(i=0;i<g;i++)p[i].update()}}),r0=eR});var tR,rR,ob,vS=__dcg_shared_module_exports__['f'](()=>{Sa();Qa();bc();tR=Zr({viewName:"SwitchWrapper",_isDCGSwitchWrapper:!0,template:function(){return this.children[0]}}),rR=Zr({viewName:"Switch",_isDCGSwitch:!0,updateKey:function(){this._key=this.props.key()},createView:function(){var t=this._viewFunction(this._key);t==null&&(t=this.createElement("div",{style:this.const("display: none")}));var e=this.createElement(tR,null,t);return e._parentElement=this,e},template:function(){if(this._key=void 0,typeof this.props.key!="function")throw new Error("<Switch key={}> must be a function");if(this.children.length!==1)throw new Error("<Switch> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof this._viewFunction!="function"){var t=JSON.stringify(this._viewFunction);throw new Error("<Switch> expects a function that constructs a DCGElement. You passed "+t)}if(tn.isConst(this._viewFunction))throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a constant");return this.updateKey(),this.createView()},overrideChildUpdates:function(){var t=this._key;this.updateKey();var e=this._key;if(t===e)this._element.update();else{var r=this.findRootNode(),i=document.createTextNode("");r.parentNode.insertBefore(i,r),Pt.willUnmount(this._element),this._childViews=[],r.parentNode.removeChild(r),Pt.onUnmount(this._element),Pt.didUnmount(this._element),this._element=this.createView();var n=Pt.createNodeForView(this._element,this);Pt.willMount(this._element),i.parentNode.insertBefore(n,i),i.parentNode.removeChild(i),Pt.onMount(this._element),Pt.didMount(this._element)}}}),ob=rR});function n0(t,e,r){return $s(nR,{getCase:function(){var i=e();return t?i&&i[t]:i},buildChildView:function(i){var n=r[i];if(n)return n(e)}})}function oR(t,e){return typeof t=="string"?n0.bind(this,t,e):n0(void 0,t,e)}var iR,nR,ab,CS=__dcg_shared_module_exports__['f'](()=>{Sa();bc();Su();iR=Zr({viewName:"SwitchUnionWrapper",_isDCGSwitchUnionWrapper:!0,template:function(){return this.children[0]}}),nR=Zr({viewName:"SwitchUnion",_isDCGSwitchUnion:!0,updateCase:function(){this._case=this.props.getCase()},createView:function(){var t=this.props.buildChildView(this._case);t==null&&(t=this.createElement("div",{style:this.const("display: none")}));var e=this.createElement(iR,null,t);return e._parentElement=this,e},template:function(){return this._case=void 0,this.updateCase(),this.createView()},overrideChildUpdates:function(){var t=this._case;this.updateCase();var e=this._case;if(t===e)this._element.update();else{var r=this.findRootNode(),i=document.createTextNode("");r.parentNode.insertBefore(i,r),Pt.willUnmount(this._element),this._childViews=[],r.parentNode.removeChild(r),Pt.onUnmount(this._element),Pt.didUnmount(this._element),this._element=this.createView();var n=Pt.createNodeForView(this._element,this);Pt.willMount(this._element),i.parentNode.insertBefore(n,i),i.parentNode.removeChild(i),Pt.onMount(this._element),Pt.didMount(this._element)}}});ab=oR});var aR,o0,a0=__dcg_shared_module_exports__['f'](()=>{Sa();Qa();vS();aR=Zr({viewName:"If",_isDCGIf:!0,template:function(){if(typeof this.props.predicate!="function")throw new Error("<If predicate={}> must be a function");if(this.children.length!==1)throw new Error("<If> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<If> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof this._viewFunction!="function"){var t=JSON.stringify(this._viewFunction);throw new Error("<If> expects a function that constructs a DCGElement. You passed "+t)}if(tn.isConst(this._viewFunction))throw new Error("<If> expects a function that constructs a DCGElement. You passed a constant");var e=function(){return!!this.props.predicate()}.bind(this),r=function(i){if(i)return this._viewFunction()}.bind(this);return this.createElement(ob,{key:e},r)}}),o0=aR});function cR(t,e){return $s(lR,{isDefined:function(){var r=t();return r!=null},buildChildView:function(){return e(t)}})}var sR,lR,s0,l0=__dcg_shared_module_exports__['f'](()=>{Sa();bc();Su();sR=Zr({viewName:"IfDefinedWrapper",_isDCGIfDefinedWrapper:!0,template:function(){return this.children[0]}}),lR=Zr({viewName:"IfDefined",_isDCGIfDefined:!0,updateIsDefined:function(){this._isDefined=this.props.isDefined()},createView:function(){var t;this._isDefined&&(t=this.props.buildChildView()),t==null&&(t=this.createElement("div",{style:this.const("display: none")}));var e=this.createElement(sR,null,t);return e._parentElement=this,e},template:function(){return this._isDefined=void 0,this.updateIsDefined(),this.createView()},overrideChildUpdates:function(){var t=this._isDefined;this.updateIsDefined();var e=this._isDefined;if(t===e)this._element.update();else{var r=this.findRootNode(),i=document.createTextNode("");r.parentNode.insertBefore(i,r),Pt.willUnmount(this._element),this._childViews=[],r.parentNode.removeChild(r),Pt.onUnmount(this._element),Pt.didUnmount(this._element),this._element=this.createView();var n=Pt.createNodeForView(this._element,this);Pt.willMount(this._element),i.parentNode.insertBefore(n,i),i.parentNode.removeChild(i),Pt.onMount(this._element),Pt.didMount(this._element)}}});s0=cR});function dR(t,e){var r=ab(function(){return t()?"true":"false"},e);return r._viewName="IfElse",r}var c0,d0=__dcg_shared_module_exports__['f'](()=>{CS();c0=dR});var u0,p0=__dcg_shared_module_exports__['f'](()=>{Sa();Eu();u0=Zr({viewName:"Textarea",computeValue:function(){var t=this.props.value();return t==null?"":t+""},template:function(){if(!this.props.value)throw new Error('<Textarea> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Textarea> expects an "onInput={}" prop');var t=zs({},this.props,{onInput:function(e){this.props.onInput(e.target.value),this._isMounted&&this.update()}.bind(this)});return this.props.disabled&&(t.disabled=function(){if(this.props.disabled())return!0}.bind(this)),delete t.value,this.createElement("textarea",t,this.const(this.computeValue()))},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var t=this.computeValue();this.rootDOM.value!==t&&(this.rootDOM.value=t)}})});var h0,g0=__dcg_shared_module_exports__['f'](()=>{Sa();Eu();h0=Zr({viewName:"Input",computeValue:function(){var t=this.props.value();return t==null?"":t+""},template:function(){if(!this.props.value)throw new Error('<Input> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Input> expects an "onInput={}" prop');var t=zs({},this.props,{value:this.const(this.computeValue()),onInput:function(e){this.props.onInput(e.target.value),this._isMounted&&this.update()}.bind(this)});return this.props.onEnterPressed&&(t.onKeypress=function(e){e.which===13&&this.props.onEnterPressed()}.bind(this)),this.props.disabled&&(t.disabled=function(){if(this.props.disabled())return!0}.bind(this)),t.hasOwnProperty("tabindex")||(t.tabindex=function(){return this.props.disabled&&this.props.disabled()?"-1":"0"}.bind(this)),this.createElement("input",t)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var t=this.computeValue();this.rootDOM.value!==t&&(this.rootDOM.value=t)}})});var f0,m0=__dcg_shared_module_exports__['f'](()=>{Sa();Eu();f0=Zr({viewName:"Checkbox",computeChecked:function(){return!!this.props.checked()},template:function(){if(!this.props.checked)throw new Error('<Checkbox> expects a "checked={}" prop');if(!this.props.onChange)throw new Error('<Checkbox> expects an "onChange={}" prop');var t=zs({},this.props,{type:this.const("checkbox"),checked:this.const(this.computeChecked()?"checked":void 0),onChange:function(e){this.props.onChange(e.target.checked),this._isMounted&&this.update()}.bind(this)});return this.createElement("input",t)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var t=this.computeChecked();this.rootDOM.checked!==t&&(this.rootDOM.checked=t)}})});var y0,b0=__dcg_shared_module_exports__['f'](()=>{t0();i0();vS();CS();a0();l0();d0();p0();g0();m0();y0={Each:e0,For:r0,Switch:ob,SwitchUnion:ab,If:o0,IfDefined:s0,IfElse:c0,Textarea:u0,Input:h0,Checkbox:f0}});var x0,w0=__dcg_shared_module_exports__['f'](()=>{Sa();x0=Zr({template:function(){}})});var uR,Ea,Za,v0=__dcg_shared_module_exports__['f'](()=>{Su();Sa();bc();Eu();Qa();uS();$T();JT();XT();b0();rg();pS();w0();uR=ib.enableSpanWrapping,Ea={createElement:$s,createClass:Zr,mountToNode:Pt.mountToNode,unmountFromNode:Pt.unmountFromNode,spread:zs,const:tn.makeConst,isConst:tn.isConst,addCustomAttribute:eg.add,Components:y0,addWarningHandler:Hs.addWarningHandler,removeWarningHandler:Hs.removeWarningHandler,_warn:Hs.warn,enableSpanWrapping:uR,Class:x0};Ea.addCustomAttribute("style",HT);Ea.addCustomAttribute("class",YT);Ea.addCustomAttribute("willMount",Ws("willMount"));Ea.addCustomAttribute("onMount",Ws("onMount"));Ea.addCustomAttribute("didMount",Ws("didMount"));Ea.addCustomAttribute("willUnmount",Ws("willUnmount"));Ea.addCustomAttribute("onUnmount",Ws("onUnmount"));Ea.addCustomAttribute("didUnmount",Ws("didUnmount"));Ea.addCustomAttribute("willUpdate",Ws("willUpdate"));Ea.addCustomAttribute("onUpdate",Ws("onUpdate"));Ea.addCustomAttribute("didUpdate",Ws("didUpdate"));Za=Ea});function ao(t,e){sb&&sb.notify(t,e)}function ig(t,e,r,i){if(e){e=__dcg_shared_module_exports__['b']({},e);for(var n in e)try{e[n]=JSON.stringify(e[n],null,2)}catch(o){e[n]="[[could not stringify]]"}}sb&&sb.leaveBreadcrumb(t,e,r,i)}var sb,xc=__dcg_shared_module_exports__['f'](()=>{});function ng(t,e){let i=new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(t);return i?decodeURIComponent(i[1].replace(/\+/g,"%20")):null}function pR(t,e){return new RegExp("[?|&]"+e+"(=|&|;|$)").test(t)}function hR(t,e,r){if(e!==encodeURIComponent(e))throw new Error("Programming error: parameter name should be URL-safe without encoding.");let i=encodeURIComponent(r);if(t.length){let n=t.split("#"),o=/\?/.test(t)?`${n[0]}&${e}=${i}`:`${n[0]}?${e}=${i}`;return n[1]!==void 0?`${o}#${n[1]}`:o}else return`?${e}=${i}`}function gR(t,e,r){let n=new RegExp("([?|&])"+e+"=([^&;]+?)(&|#|;|$)").exec(t);if(!n)return t;let o=n[1],a=n[2],s=`${o}${e}=${a}`,l=encodeURIComponent(r),c=`${o}${e}=${l}`;return t.replace(s,c)}function C0(t,e,r){return pR(t,e)?gR(t,e,r):hR(t,e,r)}var lb=__dcg_shared_module_exports__['f'](()=>{});function wR(t){let e=bR.exec(t);if(e){let r=e[1];return!xR.test(r)}return!1}function cb(t,e){let r=En(),i="";return e!==void 0?i=e:i=r.lang?""+r.lang:"",t===""||i===""||mR.test(t)||yR.test(t)||wR(t)?t:C0(t,"lang",i)}var mR,yR,bR,xR,S0=__dcg_shared_module_exports__['f'](()=>{Us();lb();mR=/lang=[A-Za-z]+/,yR=/(cl|learn|help).desmos.com/,bR=/^(?:https?:)?(?:\/\/)?([^\s\/\?]+)/i,xR=/(^desmos\.com$)|(\.desmos.com$)/});var E0=__dcg_shared_module_exports__['f'](()=>{});var ne=__dcg_shared_module_exports__['g']((W7,D0)=>{v0();at();xc();S0();E0();Za.addWarningHandler(t=>ao(t));Za.addCustomAttribute("href",function(t){let e=cb(t()),r={value:`${cb(t())}`,bindings:{onMount(i){if(!V(i).is("a")&&!V(i).is("use"))throw new Error("Cannot have an href on a non-link element.")}}};return r.bindings.onUpdate=function(i){let n=cb(t());e!==n&&(e=n,i.setAttribute("href",n))},r});Za.addCustomAttribute("onTap",t=>({value:"",bindings:{onMount(e){V(e).on("dcg-tap",t)}}}));Za.addCustomAttribute("ignoreRealClick",t=>({bindings:{onMount(e){V(e).on("click",function(r){t()&&r.preventDefault()})}}}));Za.addCustomAttribute("onTapStart",t=>({bindings:{onMount(e){V(e).on("dcg-tapstart",t)}}}));Za.addCustomAttribute("onTapMove",t=>({bindings:{onMount(e){V(e).on("dcg-tapmove",t)}}}));Za.addCustomAttribute("onTapEnd",t=>({bindings:{onMount(e){V(e).on("dcg-tapend",t)}}}));Za.addCustomAttribute("onLongHold",t=>({bindings:{onMount(e){V(e).on("dcg-longhold",t)}}}));Za.addCustomAttribute("manageFocus",function(t){return t()===void 0?{}:{bindings:{onMount(e){t().shouldBeFocused()&&e.focus(),e.onfocus=function(r){t().shouldBeFocused()||t().onFocusedChanged(!0,r)},e.onblur=function(r){t().shouldBeFocused()&&t().onFocusedChanged(!1,r)}},onUpdate(e){let r=t().shouldBeFocused(),i=document.activeElement===e;r&&!i?e.focus():i&&!r&&e.blur()},willUnmount(e){e.onfocus=null,e.onblur=null}}}});D0.exports=Za});var Lc=__dcg_shared_module_exports__['g']((df,vD)=>{(function(e,r){if(typeof df=="object"&&typeof vD=="object")vD.exports=r();else{var i=r();for(var n in i)(typeof df=="object"?df:e)[n]=i[n]}})(df,function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.i=function(i){return i},r.d=function(i,n,o){r.o(i,n)||Object.defineProperty(i,n,{configurable:!1,enumerable:!0,get:o})},r.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return r.d(n,"a",n),n},r.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},r.p="",r(r.s=26)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(22);function n(o,a){var s=i.map(o,a);return o.warnings&&(s.warnings=o.warnings),s}e.map=n},function(t,e){var r=t.exports={},i,n;function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?i=setTimeout:i=o}catch(D){i=o}try{typeof clearTimeout=="function"?n=clearTimeout:n=a}catch(D){n=a}})();function s(D){if(i===setTimeout)return setTimeout(D,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(D,0);try{return i(D,0)}catch(I){try{return i.call(null,D,0)}catch(E){return i.call(this,D,0)}}}function l(D){if(n===clearTimeout)return clearTimeout(D);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(D);try{return n(D)}catch(I){try{return n.call(null,D)}catch(E){return n.call(this,D)}}}var c=[],u=!1,h,p=-1;function g(){!u||!h||(u=!1,h.length?c=h.concat(c):p=-1,c.length&&y())}function y(){if(!u){var D=s(g);u=!0;for(var I=c.length;I;){for(h=c,c=[];++p<I;)h&&h[p].run();p=-1,I=c.length}h=null,u=!1,l(D)}}r.nextTick=function(D){var I=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)I[E-1]=arguments[E];c.push(new w(D,I)),c.length===1&&!u&&s(y)};function w(D,I){this.fun=D,this.array=I}w.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function b(){}r.on=b,r.addListener=b,r.once=b,r.off=b,r.removeListener=b,r.removeAllListeners=b,r.emit=b,r.prependListener=b,r.prependOnceListener=b,r.listeners=function(D){return[]},r.binding=function(D){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(D){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=["abs","ans","arccosh","arccot","arccoth","arccsc","arccsch","arcsec","arcsech","arcsinh","arctanh","binomialdist","boxplot","cdf","ceil","corr","cov","csch","distance","dotplot","erf","floor","gcf","histogram","IndependentTTest","iTTest","ittest","lcm","length","mad","mcd","mcm","mean","median","midpoint","mod","nCr","normaldist","nPr","pdf","poissondist","polygon","quantile","quartile","random","round","sech","sign","signum","sgn","stdDev","stddev","stdDevP","stddevp","stdev","stdevp","tdist","total","TScore","TScore","Tscore","tscore","tscore","TTest","ttest","var","variance","varp"],n=i,o=p(i),a;function s(g){for(var y=!1,w=0,b="",D="",I=0,E=g;I<E.length;I++){var G=E[I];if(G.type==="terminal"&&/[A-Za-z]/.test(G.value))b+=G.value,w++;else break}return D=b.replace(a,"\\operatorname{$1}"),y=w>0&&D!==b,{modified:y,terminalCount:w,value:D}}e.getAutoOperator=s;function l(g){return n.indexOf(g.toLowerCase())!==-1}e.containsValue=l;function c(g){if(!Array.isArray(g))throw new Error("Operator names must be an array, got "+typeof g);for(var y=0,w=g;y<w.length;y++){var b=w[y];if(typeof b!="string")throw new Error("Operator names must be strings, found "+typeof b)}n=g,h()}e.setOperatorNames=c;function u(){n=i,a=o}e.resetOperatorNames=u;function h(){a=p(n)}function p(g){var y=g.sort(function(w,b){return b.length-w.length||b.localeCompare(w)}).join("|");return new RegExp("("+y+")","g")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),n=r(14),o=r(15),a=r(16),s=r(0),l=r(23),c=r(25);function u(w){if(!c.isSixDotCells(w))throw new Error("EncodingError: Expected input to be six-dot unicode braille characters.")}function h(w,b){return u(w),a.default(e.UnicodeBraille.toBrailleAscii(w),b)}e.nemethToLatex=h;function p(w,b){return b&&b.operatorNames?i.setOperatorNames(b.operatorNames):i.resetOperatorNames(),s.map(n.default(w),e.UnicodeBraille.coerceToSixDotCells)}e.latexToNemeth=p;function g(w,b){return u(w),l.default(e.UnicodeBraille.toBrailleAscii(w),b)}e.uebToLatex=g;function y(w,b){return b&&b.operatorNames?i.setOperatorNames(b.operatorNames):i.resetOperatorNames(),s.map(o.default(w),e.UnicodeBraille.coerceToSixDotCells)}e.latexToUeb=y,e.UnicodeBraille={coerceToSixDotCells:c.coerceToSixDotCells,toBrailleAscii:c.toBrailleAscii,toExpandedBrailleAscii:c.toExpandedBrailleAscii},e.version="1.0.3"},function(t,e){},function(t,e,r){(function(i){function n(c,u){for(var h=0,p=c.length-1;p>=0;p--){var g=c[p];g==="."?c.splice(p,1):g===".."?(c.splice(p,1),h++):h&&(c.splice(p,1),h--)}if(u)for(;h--;h)c.unshift("..");return c}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(c){return o.exec(c).slice(1)};e.resolve=function(){for(var c="",u=!1,h=arguments.length-1;h>=-1&&!u;h--){var p=h>=0?arguments[h]:i.cwd();if(typeof p!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!p)continue;c=p+"/"+c,u=p.charAt(0)==="/"}return c=n(s(c.split("/"),function(g){return!!g}),!u).join("/"),(u?"/":"")+c||"."},e.normalize=function(c){var u=e.isAbsolute(c),h=l(c,-1)==="/";return c=n(s(c.split("/"),function(p){return!!p}),!u).join("/"),!c&&!u&&(c="."),c&&h&&(c+="/"),(u?"/":"")+c},e.isAbsolute=function(c){return c.charAt(0)==="/"},e.join=function(){var c=Array.prototype.slice.call(arguments,0);return e.normalize(s(c,function(u,h){if(typeof u!="string")throw new TypeError("Arguments to path.join must be strings");return u}).join("/"))},e.relative=function(c,u){c=e.resolve(c).substr(1),u=e.resolve(u).substr(1);function h(I){for(var E=0;E<I.length&&I[E]==="";E++);for(var G=I.length-1;G>=0&&I[G]==="";G--);return E>G?[]:I.slice(E,G-E+1)}for(var p=h(c.split("/")),g=h(u.split("/")),y=Math.min(p.length,g.length),w=y,b=0;b<y;b++)if(p[b]!==g[b]){w=b;break}for(var D=[],b=w;b<p.length;b++)D.push("..");return D=D.concat(g.slice(w)),D.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(c){var u=a(c),h=u[0],p=u[1];return!h&&!p?".":(p&&(p=p.substr(0,p.length-1)),h+p)},e.basename=function(c,u){var h=a(c)[2];return u&&h.substr(-1*u.length)===u&&(h=h.substr(0,h.length-u.length)),h},e.extname=function(c){return a(c)[3]};function s(c,u){if(c.filter)return c.filter(u);for(var h=[],p=0;p<c.length;p++)u(c[p],p,c)&&h.push(c[p]);return h}var l="ab".substr(-1)==="b"?function(c,u,h){return c.substr(u,h)}:function(c,u,h){return u<0&&(u=c.length+u),c.substr(u,h)}}).call(e,r(1))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function i(n){if(!n.hash)throw n;return{_diagnostic:{expected:n.hash.expected,message:n.message,text:n.hash.text,token:n.hash.token},location:n.hash.loc}}e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function i(p){return{type:"terminal",value:p}}e.terminal=i;function n(p){return{type:"command",value:p}}e.command=n;function o(p){return{type:"greek",value:p}}e.greek=o;function a(p){return{subscript:p._,superscript:p["^"],type:"level"}}e.level=a;function s(p,g){var y=[],w=p.match(/'+/);if(w!==null)for(var b=w[0].length,D=0;D<b;D++)y.push(n("\\prime"));return h(y,g)}e.processPrimes=s;function l(p,g){return{type:"fraction",numerator:p,denominator:g}}e.fraction=l;function c(p,g){return{name:p,type:"typeform",value:g}}e.typeform=c;function u(p,g){return{type:"radical",index:g,radicand:p}}e.radical=u;function h(){for(var p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];return Array.prototype.concat.apply([],p)}e.group=h},function(t,e){t.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(t,e,r){(function(i,n){var o=function(){var a=function(dn,Je,ot,st){for(ot=ot||{},st=dn.length;st--;ot[dn[st]]=Je);return ot},s=[1,11],l=[1,12],c=[1,13],u=[1,70],h=[1,71],p=[1,69],g=[1,38],y=[1,39],w=[1,59],b=[1,60],D=[1,61],I=[1,62],E=[1,63],G=[1,64],T=[1,65],P=[1,66],_=[1,67],x=[1,68],L=[1,40],R=[1,34],q=[1,35],K=[1,36],Y=[1,37],N=[1,41],j=[1,42],B=[1,43],A=[1,44],$=[1,45],J=[1,46],ue=[1,47],te=[1,48],Ae=[1,49],Se=[1,50],ce=[1,51],Ee=[1,52],H=[1,53],he=[1,17],De=[1,54],_e=[1,55],Me=[1,56],He=[1,57],Ze=[1,58],_t=[5,12,13,14,18,24,25],Re=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,82],Tt=[1,75],dr=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,77,78,79,80,82],ve=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82],_r={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,element:6,index_element:7,modified_expression:8,radical:9,primes:10,OPEN_MODEXP:11,MODEXP_UNDER:12,MODEXP_OVER:13,CLOSE_MODEXP:14,RADICAL_INDEX:15,index_group:16,OPEN_RADICAL:17,CLOSE_RADICAL:18,level:19,LEVEL:20,BASELINE:21,frac:22,OPEN_FRAC:23,SLASH:24,CLOSE_FRAC:25,subscript_head:26,number:27,atom:28,command:29,greek:30,letter:31,comma:32,period:33,space:34,operation:35,comparison:36,level_with_comparison:37,ellipsis:38,colon:39,infinity:40,integral:41,factorial:42,ampersand:43,question_mark:44,bracket:45,",":46,".":47,"[":48,"{":49,"(":50,"]":51,"}":52,")":53,LANGLE:54,RANGLE:55,PIPE:56,DOUBLE_PIPE:57,SPACE:58,COMMAND:59,GREEK:60,LETTER:61,CAPITAL_LETTER:62,"+":63,"-":64,CDOT:65,TIMES:66,"*":67,"/":68,DIV:69,PERCENT:70,TO:71,COMPARISON:72,LEVEL_WITH_COMPARISON:73,ELLIPSIS:74,COLON:75,NUMBER:76,INFINITY:77,INTEGRAL:78,FACTORIAL:79,"&":80,PRIMES:81,"?":82,unknown:83,UNKNOWN:84,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",11:"OPEN_MODEXP",12:"MODEXP_UNDER",13:"MODEXP_OVER",14:"CLOSE_MODEXP",15:"RADICAL_INDEX",17:"OPEN_RADICAL",18:"CLOSE_RADICAL",20:"LEVEL",21:"BASELINE",23:"OPEN_FRAC",24:"SLASH",25:"CLOSE_FRAC",46:",",47:".",48:"[",49:"{",50:"(",51:"]",52:"}",53:")",54:"LANGLE",55:"RANGLE",56:"PIPE",57:"DOUBLE_PIPE",58:"SPACE",59:"COMMAND",60:"GREEK",61:"LETTER",62:"CAPITAL_LETTER",63:"+",64:"-",65:"CDOT",66:"TIMES",67:"*",68:"/",69:"DIV",70:"PERCENT",71:"TO",72:"COMPARISON",73:"LEVEL_WITH_COMPARISON",74:"ELLIPSIS",75:"COLON",76:"NUMBER",77:"INFINITY",78:"INTEGRAL",79:"FACTORIAL",80:"&",81:"PRIMES",82:"?",84:"UNKNOWN"},productions_:[0,[3,2],[3,1],[4,2],[4,1],[6,1],[6,1],[6,2],[6,1],[8,7],[8,6],[8,5],[8,6],[8,5],[8,5],[8,4],[8,4],[8,3],[8,4],[8,4],[8,4],[8,4],[8,3],[8,3],[8,2],[9,5],[9,4],[9,4],[9,3],[9,3],[9,2],[19,1],[19,1],[22,5],[22,4],[22,4],[22,3],[16,2],[16,1],[7,3],[7,2],[7,2],[7,3],[7,2],[7,2],[7,1],[7,1],[7,1],[26,1],[26,1],[26,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[32,1],[33,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[34,1],[29,1],[30,1],[31,1],[31,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[36,1],[37,1],[38,1],[39,1],[27,1],[40,1],[41,1],[42,1],[43,1],[10,1],[44,1],[83,1]],performAction:function(Je,ot,st,ae,ar,Te,Nt){var me=Te.length-1;switch(ar){case 1:return Te[me-1];case 2:return ae.group();case 3:case 37:case 41:case 43:case 44:this.$=ae.group(Te[me-1],Te[me]);break;case 4:case 38:this.$=ae.group(Te[me]);break;case 7:this.$=ae.group(Te[me-1],Te[me]);break;case 9:this.$=ae.modified_expression(Te[me-5],Te[me-3],Te[me-1]);break;case 10:this.$=ae.modified_expression(Te[me-4],Te[me-2]);break;case 11:this.$=ae.modified_expression(Te[me-3],Te[me-1]);break;case 12:this.$=ae.modified_expression(Te[me-4],ae.group(),Te[me-1]);break;case 13:this.$=ae.modified_expression(Te[me-3],ae.group(),Te[me-1]);break;case 14:this.$=ae.modified_expression(Te[me-3],ae.group(),ae.group());break;case 15:case 16:this.$=ae.modified_expression(Te[me-2],ae.group());break;case 17:this.$=ae.modified_expression(Te[me-1]);break;case 18:case 19:case 22:case 23:case 24:this.$=ae.modified_expression(ae.group());break;case 20:case 21:ae.warnOrError("Multi-level modified expressions are not supported."),this.$=ae.modified_expression(ae.group());break;case 25:this.$=ae.radical(Te[me-1],Te[me-3]);break;case 26:this.$=ae.radical(Te[me-1],ae.group());break;case 27:this.$=ae.radical(ae.group(),Te[me-2]);break;case 28:this.$=ae.radical(ae.group(),ae.group());break;case 29:this.$=ae.radical(Te[me-1]);break;case 30:this.$=ae.radical(ae.group());break;case 31:this.$=ae.level(Te[me]);break;case 32:this.$=ae.baseline();break;case 33:this.$=ae.fraction(Te[me-3],Te[me-1]);break;case 34:this.$=ae.fraction(Te[me-2],ae.group());break;case 35:this.$=ae.fraction(ae.group(),Te[me-1]);break;case 36:this.$=ae.fraction(ae.group(),ae.group());break;case 39:this.$=ae.group(ae.simple_subscript(Te[me-2],Te[me]),Te[me-1]);break;case 40:this.$=ae.simple_subscript(Te[me-1],Te[me]);break;case 42:ae.warnOrError("Illegal use of Nemeth primes"),this.$=ae.group(ae.simple_subscript(Te[me-2],Te[me-1]),Te[me]);break;case 67:this.$=ae.terminal(",");break;case 68:this.$=ae.terminal(".");break;case 69:this.$=ae.terminal("[");break;case 70:this.$=ae.terminal("\\{");break;case 71:this.$=ae.terminal("(");break;case 72:this.$=ae.terminal("]");break;case 73:this.$=ae.terminal("\\}");break;case 74:this.$=ae.terminal(")");break;case 75:this.$=ae.terminal("\\langle ");break;case 76:this.$=ae.terminal("\\rangle ");break;case 77:this.$=ae.terminal("|");break;case 78:this.$=ae.terminal("\\|");break;case 79:this.$=ae.terminal(" ");break;case 80:this.$=ae.command(Te[me].toLowerCase());break;case 81:this.$=ae.terminal(ae.greek(Te[me]));break;case 82:this.$=ae.terminal(Te[me].toLowerCase());break;case 83:this.$=ae.terminal(Te[me].toUpperCase());break;case 84:this.$=ae.terminal("+");break;case 85:this.$=ae.terminal("-");break;case 86:this.$=ae.terminal("\\cdot ");break;case 87:this.$=ae.terminal("\\times ");break;case 88:this.$=ae.terminal("*");break;case 89:this.$=ae.terminal("/");break;case 90:this.$=ae.terminal("\\div ");break;case 91:this.$=ae.terminal("\\%");break;case 92:this.$=ae.terminal("\\to ");break;case 93:this.$=ae.comparison(Te[me].trim());break;case 94:this.$=ae.level_with_comparison(Te[me].trim());break;case 95:this.$=ae.terminal("\\ldots ");break;case 96:this.$=ae.terminal(":");break;case 97:this.$=ae.terminal(Te[me]);break;case 98:this.$=ae.terminal("\\infty ");break;case 99:this.$=ae.terminal("\\int ");break;case 100:this.$=ae.terminal("!");break;case 101:this.$=ae.terminal("\\&");break;case 102:this.$=ae.primes(Te[me]);break;case 103:this.$=ae.terminal("?");break}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,11:s,15:l,17:c,19:33,20:u,21:h,22:32,23:p,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:g,47:y,48:w,49:b,50:D,51:I,52:E,53:G,54:T,55:P,56:_,57:x,58:L,59:R,60:q,61:K,62:Y,63:N,64:j,65:B,66:A,67:$,68:J,69:ue,70:te,71:Ae,72:Se,73:ce,74:Ee,75:H,76:he,77:De,78:_e,79:Me,80:He,82:Ze},{1:[3]},{5:[1,72]},{1:[2,2]},a(_t,[2,4],{6:4,7:5,8:6,9:7,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,22:32,19:33,4:73,11:s,15:l,17:c,20:u,21:h,23:p,46:g,47:y,48:w,49:b,50:D,51:I,52:E,53:G,54:T,55:P,56:_,57:x,58:L,59:R,60:q,61:K,62:Y,63:N,64:j,65:B,66:A,67:$,68:J,69:ue,70:te,71:Ae,72:Se,73:ce,74:Ee,75:H,76:he,77:De,78:_e,79:Me,80:He,82:Ze}),a(Re,[2,5]),a(Re,[2,6]),a(Re,[2,8],{10:74,81:Tt}),a(dr,[2,45],{10:76,27:77,76:he,81:Tt}),a(Re,[2,46],{10:78,81:Tt}),a(Re,[2,47],{10:79,81:Tt}),{4:80,6:4,7:5,8:6,9:7,11:s,12:[1,82],13:[1,81],14:[1,83],15:l,17:c,19:33,20:u,21:h,22:32,23:p,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:g,47:y,48:w,49:b,50:D,51:I,52:E,53:G,54:T,55:P,56:_,57:x,58:L,59:R,60:q,61:K,62:Y,63:N,64:j,65:B,66:A,67:$,68:J,69:ue,70:te,71:Ae,72:Se,73:ce,74:Ee,75:H,76:he,77:De,78:_e,79:Me,80:He,82:Ze},{7:86,16:84,17:[1,85],19:33,20:u,21:h,22:32,23:p,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:g,47:y,48:w,49:b,50:D,51:I,52:E,53:G,54:T,55:P,56:_,57:x,58:L,59:R,60:q,61:K,62:Y,63:N,64:j,65:B,66:A,67:$,68:J,69:ue,70:te,71:Ae,72:Se,73:ce,74:Ee,75:H,76:he,77:De,78:_e,79:Me,80:He,82:Ze},{4:87,6:4,7:5,8:6,9:7,11:s,15:l,17:c,18:[1,88],19:33,20:u,21:h,22:32,23:p,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:g,47:y,48:w,49:b,50:D,51:I,52:E,53:G,54:T,55:P,56:_,57:x,58:L,59:R,60:q,61:K,62:Y,63:N,64:j,65:B,66:A,67:$,68:J,69:ue,70:te,71:Ae,72:Se,73:ce,74:Ee,75:H,76:he,77:De,78:_e,79:Me,80:He,82:Ze},a(ve,[2,48]),a(ve,[2,49]),a(ve,[2,50]),a(ve,[2,97]),a(ve,[2,51]),a(ve,[2,52]),a(ve,[2,53]),a(ve,[2,54]),a(ve,[2,55]),a(ve,[2,56]),a(ve,[2,57]),a(ve,[2,58]),a(ve,[2,59]),a(ve,[2,60]),a(ve,[2,61]),a(ve,[2,62]),a(ve,[2,63]),a(ve,[2,64]),a(ve,[2,65]),a(ve,[2,66]),a(ve,[2,80]),a(ve,[2,81]),a(ve,[2,82]),a(ve,[2,83]),a(ve,[2,67]),a(ve,[2,68]),a(ve,[2,79]),a(ve,[2,84]),a(ve,[2,85]),a(ve,[2,86]),a(ve,[2,87]),a(ve,[2,88]),a(ve,[2,89]),a(ve,[2,90]),a(ve,[2,91]),a(ve,[2,92]),a(ve,[2,93]),a(ve,[2,94]),a(ve,[2,95]),a(ve,[2,96]),a(ve,[2,98]),a(ve,[2,99]),a(ve,[2,100]),a(ve,[2,101]),a(ve,[2,103]),a(ve,[2,69]),a(ve,[2,70]),a(ve,[2,71]),a(ve,[2,72]),a(ve,[2,73]),a(ve,[2,74]),a(ve,[2,75]),a(ve,[2,76]),a(ve,[2,77]),a(ve,[2,78]),{4:89,6:4,7:5,8:6,9:7,11:s,15:l,17:c,19:33,20:u,21:h,22:32,23:p,24:[1,90],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:g,47:y,48:w,49:b,50:D,51:I,52:E,53:G,54:T,55:P,56:_,57:x,58:L,59:R,60:q,61:K,62:Y,63:N,64:j,65:B,66:A,67:$,68:J,69:ue,70:te,71:Ae,72:Se,73:ce,74:Ee,75:H,76:he,77:De,78:_e,79:Me,80:He,82:Ze},a(ve,[2,31]),a(ve,[2,32]),{1:[2,1]},a(_t,[2,3]),a(Re,[2,7]),a(Re,[2,102]),a(dr,[2,41],{27:91,76:he}),a(Re,[2,40],{10:92,81:Tt}),a(Re,[2,43]),a(Re,[2,44]),{12:[1,93],13:[1,94],14:[1,95]},{12:[1,96],13:[1,97],14:[1,98]},{12:[1,100],13:[1,99],14:[1,101]},a(Re,[2,24]),{17:[1,102]},{4:103,6:4,7:5,8:6,9:7,11:s,15:l,17:c,18:[1,104],19:33,20:u,21:h,22:32,23:p,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:g,47:y,48:w,49:b,50:D,51:I,52:E,53:G,54:T,55:P,56:_,57:x,58:L,59:R,60:q,61:K,62:Y,63:N,64:j,65:B,66:A,67:$,68:J,69:ue,70:te,71:Ae,72:Se,73:ce,74:Ee,75:H,76:he,77:De,78:_e,79:Me,80:He,82:Ze},{7:86,16:105,17:[2,38],19:33,20:u,21:h,22:32,23:p,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:g,47:y,48:w,49:b,50:D,51:I,52:E,53:G,54:T,55:P,56:_,57:x,58:L,59:R,60:q,61:K,62:Y,63:N,64:j,65:B,66:A,67:$,68:J,69:ue,70:te,71:Ae,72:Se,73:ce,74:Ee,75:H,76:he,77:De,78:_e,79:Me,80:He,82:Ze},{18:[1,106]},a(ve,[2,30]),{24:[1,107]},{4:108,6:4,7:5,8:6,9:7,11:s,15:l,17:c,19:33,20:u,21:h,22:32,23:p,25:[1,109],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:g,47:y,48:w,49:b,50:D,51:I,52:E,53:G,54:T,55:P,56:_,57:x,58:L,59:R,60:q,61:K,62:Y,63:N,64:j,65:B,66:A,67:$,68:J,69:ue,70:te,71:Ae,72:Se,73:ce,74:Ee,75:H,76:he,77:De,78:_e,79:Me,80:He,82:Ze},a(Re,[2,39]),a(Re,[2,42]),{4:110,6:4,7:5,8:6,9:7,11:s,13:[1,111],14:[1,112],15:l,17:c,19:33,20:u,21:h,22:32,23:p,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:g,47:y,48:w,49:b,50:D,51:I,52:E,53:G,54:T,55:P,56:_,57:x,58:L,59:R,60:q,61:K,62:Y,63:N,64:j,65:B,66:A,67:$,68:J,69:ue,70:te,71:Ae,72:Se,73:ce,74:Ee,75:H,76:he,77:De,78:_e,79:Me,80:He,82:Ze},{4:113,6:4,7:5,8:6,9:7,11:s,14:[1,114],15:l,17:c,19:33,20:u,21:h,22:32,23:p,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:g,47:y,48:w,49:b,50:D,51:I,52:E,53:G,54:T,55:P,56:_,57:x,58:L,59:R,60:q,61:K,62:Y,63:N,64:j,65:B,66:A,67:$,68:J,69:ue,70:te,71:Ae,72:Se,73:ce,74:Ee,75:H,76:he,77:De,78:_e,79:Me,80:He,82:Ze},a(Re,[2,17]),{14:[1,115]},{14:[1,116]},a(Re,[2,22]),{14:[1,117]},{14:[1,118]},a(Re,[2,23]),{4:119,6:4,7:5,8:6,9:7,11:s,15:l,17:c,18:[1,120],19:33,20:u,21:h,22:32,23:p,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:g,47:y,48:w,49:b,50:D,51:I,52:E,53:G,54:T,55:P,56:_,57:x,58:L,59:R,60:q,61:K,62:Y,63:N,64:j,65:B,66:A,67:$,68:J,69:ue,70:te,71:Ae,72:Se,73:ce,74:Ee,75:H,76:he,77:De,78:_e,79:Me,80:He,82:Ze},{18:[1,121]},a(ve,[2,28]),{17:[2,37]},a(ve,[2,29]),{4:122,6:4,7:5,8:6,9:7,11:s,15:l,17:c,19:33,20:u,21:h,22:32,23:p,25:[1,123],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:g,47:y,48:w,49:b,50:D,51:I,52:E,53:G,54:T,55:P,56:_,57:x,58:L,59:R,60:q,61:K,62:Y,63:N,64:j,65:B,66:A,67:$,68:J,69:ue,70:te,71:Ae,72:Se,73:ce,74:Ee,75:H,76:he,77:De,78:_e,79:Me,80:He,82:Ze},{25:[1,124]},a(ve,[2,36]),{13:[1,125],14:[1,126]},{4:127,6:4,7:5,8:6,9:7,11:s,14:[1,128],15:l,17:c,19:33,20:u,21:h,22:32,23:p,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:g,47:y,48:w,49:b,50:D,51:I,52:E,53:G,54:T,55:P,56:_,57:x,58:L,59:R,60:q,61:K,62:Y,63:N,64:j,65:B,66:A,67:$,68:J,69:ue,70:te,71:Ae,72:Se,73:ce,74:Ee,75:H,76:he,77:De,78:_e,79:Me,80:He,82:Ze},a(Re,[2,16]),{14:[1,129]},a(Re,[2,15]),a(Re,[2,18]),a(Re,[2,20]),a(Re,[2,19]),a(Re,[2,21]),{18:[1,130]},a(ve,[2,27]),a(ve,[2,26]),{25:[1,131]},a(ve,[2,34]),a(ve,[2,35]),{4:132,6:4,7:5,8:6,9:7,11:s,14:[1,133],15:l,17:c,19:33,20:u,21:h,22:32,23:p,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:g,47:y,48:w,49:b,50:D,51:I,52:E,53:G,54:T,55:P,56:_,57:x,58:L,59:R,60:q,61:K,62:Y,63:N,64:j,65:B,66:A,67:$,68:J,69:ue,70:te,71:Ae,72:Se,73:ce,74:Ee,75:H,76:he,77:De,78:_e,79:Me,80:He,82:Ze},a(Re,[2,11]),{14:[1,134]},a(Re,[2,14]),a(Re,[2,13]),a(ve,[2,25]),a(ve,[2,33]),{14:[1,135]},a(Re,[2,10]),a(Re,[2,12]),a(Re,[2,9])],defaultActions:{3:[2,2],72:[2,1],105:[2,37]},parseError:function(Je,ot){if(ot.recoverable)this.trace(Je);else{var st=new Error(Je);throw st.hash=ot,st}},parse:function(Je){var ot=this,st=[0],ae=[],ar=[null],Te=[],Nt=this.table,me="",gt=0,xt=0,Ce=0,Mr=2,$e=1,Oo=Te.slice.call(arguments,1),vt=Object.create(this.lexer),sr={yy:{}};for(var Fr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Fr)&&(sr.yy[Fr]=this.yy[Fr]);vt.setInput(Je,sr.yy),sr.yy.lexer=vt,sr.yy.parser=this,typeof vt.yylloc=="undefined"&&(vt.yylloc={});var xi=vt.yylloc;Te.push(xi);var Ha=vt.options&&vt.options.ranges;typeof sr.yy.parseError=="function"?this.parseError=sr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function un(et){st.length=st.length-2*et,ar.length=ar.length-et,Te.length=Te.length-et}e:var Xi=function(){var et;return et=vt.lex()||$e,typeof et!="number"&&(et=ot.symbols_[et]||et),et};for(var Ut,ii,O,z,Z,pe,ee={},de,ye,Pe,Oe;;){if(O=st[st.length-1],this.defaultActions[O]?z=this.defaultActions[O]:((Ut===null||typeof Ut=="undefined")&&(Ut=Xi()),z=Nt[O]&&Nt[O][Ut]),typeof z=="undefined"||!z.length||!z[0]){var ft="";Oe=[];for(de in Nt[O])this.terminals_[de]&&de>Mr&&Oe.push("'"+this.terminals_[de]+"'");vt.showPosition?ft="Parse error on line "+(gt+1)+`:
`+vt.showPosition()+`
Expecting `+Oe.join(", ")+", got '"+(this.terminals_[Ut]||Ut)+"'":ft="Parse error on line "+(gt+1)+": Unexpected "+(Ut==$e?"end of input":"'"+(this.terminals_[Ut]||Ut)+"'"),this.parseError(ft,{text:vt.match,token:this.terminals_[Ut]||Ut,line:vt.yylineno,loc:xi,expected:Oe})}if(z[0]instanceof Array&&z.length>1)throw new Error("Parse Error: multiple actions possible at state: "+O+", token: "+Ut);switch(z[0]){case 1:st.push(Ut),ar.push(vt.yytext),Te.push(vt.yylloc),st.push(z[1]),Ut=null,ii?(Ut=ii,ii=null):(xt=vt.yyleng,me=vt.yytext,gt=vt.yylineno,xi=vt.yylloc,Ce>0&&Ce--);break;case 2:if(ye=this.productions_[z[1]][1],ee.$=ar[ar.length-ye],ee._$={first_line:Te[Te.length-(ye||1)].first_line,last_line:Te[Te.length-1].last_line,first_column:Te[Te.length-(ye||1)].first_column,last_column:Te[Te.length-1].last_column},Ha&&(ee._$.range=[Te[Te.length-(ye||1)].range[0],Te[Te.length-1].range[1]]),pe=this.performAction.apply(ee,[me,xt,gt,sr.yy,z[1],ar,Te].concat(Oo)),typeof pe!="undefined")return pe;ye&&(st=st.slice(0,-1*ye*2),ar=ar.slice(0,-1*ye),Te=Te.slice(0,-1*ye)),st.push(this.productions_[z[1]][0]),ar.push(ee.$),Te.push(ee._$),Pe=Nt[st[st.length-2]][st[st.length-1]],st.push(Pe);break;case 3:return!0}}return!0}},rt=function(){var dn={EOF:1,parseError:function(ot,st){if(this.yy.parser)this.yy.parser.parseError(ot,st);else throw new Error(ot)},setInput:function(Je,ot){return this.yy=ot||this.yy||{},this._input=Je,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Je=this._input[0];this.yytext+=Je,this.yyleng++,this.offset++,this.match+=Je,this.matched+=Je;var ot=Je.match(/(?:\r\n?|\n).*/g);return ot?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Je},unput:function(Je){var ot=Je.length,st=Je.split(/(?:\r\n?|\n)/g);this._input=Je+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ot),this.offset-=ot;var ae=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),st.length-1&&(this.yylineno-=st.length-1);var ar=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:st?(st.length===ae.length?this.yylloc.first_column:0)+ae[ae.length-st.length].length-st[0].length:this.yylloc.first_column-ot},this.options.ranges&&(this.yylloc.range=[ar[0],ar[0]+this.yyleng-ot]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Je){this.unput(this.match.slice(Je))},pastInput:function(){var Je=this.matched.substr(0,this.matched.length-this.match.length);return(Je.length>20?"...":"")+Je.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Je=this.match;return Je.length<20&&(Je+=this._input.substr(0,20-Je.length)),(Je.substr(0,20)+(Je.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Je=this.pastInput(),ot=new Array(Je.length+1).join("-");return Je+this.upcomingInput()+`
`+ot+"^"},test_match:function(Je,ot){var st,ae,ar;if(this.options.backtrack_lexer&&(ar={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ar.yylloc.range=this.yylloc.range.slice(0))),ae=Je[0].match(/(?:\r\n?|\n).*/g),ae&&(this.yylineno+=ae.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ae?ae[ae.length-1].length-ae[ae.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Je[0].length},this.yytext+=Je[0],this.match+=Je[0],this.matches=Je,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Je[0].length),this.matched+=Je[0],st=this.performAction.call(this,this.yy,this,ot,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),st)return st;if(this._backtrack){for(var Te in ar)this[Te]=ar[Te];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Je,ot,st,ae;this._more||(this.yytext="",this.match="");for(var ar=this._currentRules(),Te=0;Te<ar.length;Te++)if(st=this._input.match(this.rules[ar[Te]]),st&&(!ot||st[0].length>ot[0].length)){if(ot=st,ae=Te,this.options.backtrack_lexer){if(Je=this.test_match(st,ar[Te]),Je!==!1)return Je;if(this._backtrack){ot=!1;continue}else return!1}else if(!this.options.flex)break}return ot?(Je=this.test_match(ot,ar[ae]),Je!==!1?Je:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ot=this.next();return ot||this.lex()},begin:function(ot){this.conditionStack.push(ot)},popState:function(){var ot=this.conditionStack.length-1;return ot>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ot){return ot=this.conditionStack.length-1-Math.abs(ot||0),ot>=0?this.conditionStack[ot]:"INITIAL"},pushState:function(ot){this.begin(ot)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(ot,st,ae,ar){var Te=ar;switch(ae){case 0:return this.begin("modexp"),11;break;case 1:return 21;case 2:return this.begin("modexp"),11;break;case 3:return 12;case 4:return 13;case 5:return this.popState(),14;break;case 6:return 63;case 7:return 64;case 8:return 65;case 9:return 66;case 10:return 67;case 11:return 68;case 12:return 69;case 13:return 54;case 14:return 48;case 15:return 49;case 16:return 50;case 17:return 55;case 18:return 51;case 19:return 52;case 20:return 53;case 21:return 57;case 22:return 56;case 23:return 75;case 24:return 70;case 25:return 71;case 26:return 73;case 27:return 73;case 28:return 73;case 29:return 73;case 30:return 73;case 31:return 73;case 32:return 73;case 33:return 73;case 34:return 73;case 35:return 72;case 36:return 73;case 37:return 73;case 38:return 72;case 39:return 72;case 40:return 72;case 41:return 72;case 42:return 72;case 43:return 72;case 44:return 72;case 45:return 72;case 46:return 72;case 47:return 72;case 48:return 74;case 49:return 20;case 50:return 47;case 51:return 21;case 52:return 81;case 53:return 60;case 54:return 15;case 55:return this.begin("radical"),17;break;case 56:return this.popState(),18;break;case 57:return 18;case 58:return 78;case 59:return 80;case 60:return 79;case 61:return 59;case 62:return 59;case 63:return st.yytext=this.matches[1],76;break;case 64:return 23;case 65:return 24;case 66:return 25;case 67:return st.yytext=this.matches[1],62;break;case 68:return 61;case 69:return 77;case 70:return 82;case 71:return 46;case 72:return 47;case 73:return 58;case 74:return 5;case 75:return 84}},rules:[/^(?:"(?=[^>\]]+%))/,/^(?:")/,/^(?:"(?=[^>\]]+\]|[^>\]]+%))/,/^(?:%)/,/^(?:<)/,/^(?:\])/,/^(?:[+])/,/^(?:[-])/,/^(?:[*])/,/^(?:[@][*])/,/^(?:[@][\#])/,/^(?:[_][/])/,/^(?:[.][/])/,/^(?:[.][.][(])/,/^(?:[@][(])/,/^(?:[.][(])/,/^(?:[(])/,/^(?:[.][.][)])/,/^(?:[@][)])/,/^(?:[.][)])/,/^(?:[)])/,/^(?:[\\][\\])/,/^(?:[\\])/,/^(?:[_][3])/,/^(?:[@][0])/,/^(?:[ ][$]O[ ])/,/^(?:[ ][\^;]+[.]K[ ])/,/^(?:[\^;]+[=])/,/^(?:[ ][\^;]+[/][.]K[ ])/,/^(?:[ ][\^;]+[@][:][@][:][ ])/,/^(?:[ ][\^;]+["]K[:][ ])/,/^(?:[ ][\^;]+[.]1[:][ ])/,/^(?:[ ][\^;]+["]K[ ])/,/^(?:[ ][\^;]+[.]1[ ])/,/^(?:[ ][\^;]+[/][$][L][ ])/,/^(?:[ ][.]K[ ])/,/^(?:[ ][\^;]+[/]?[$][L][ ])/,/^(?:[ ][\^;]+[$]P[ ])/,/^(?:[=])/,/^(?:[ ][/][.]K[ ])/,/^(?:[ ][@][:][@][:][ ])/,/^(?:[ ]["]K[:][ ])/,/^(?:[ ][.]1[:][ ])/,/^(?:[ ]["]K[ ])/,/^(?:[ ][.]1[ ])/,/^(?:[@][:])/,/^(?:[ ][/]?[$][L][ ])/,/^(?:[ ][$]P[ ])/,/^(?:[ ]['][']['][ ])/,/^(?:[\^;]+)/,/^(?:[.]["])/,/^(?:["])/,/^(?:[']+)/,/^(?:[.][,]?[ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/,/^(?:[.]*[<])/,/^(?:[.]*[>])/,/^(?:[.]*\])/,/^(?:[.]*\])/,/^(?:!)/,/^(?:[_]&)/,/^(?:&)/,/^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/,/^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/,/^(?:#?(\d*\.?\d+))/,/^(?:[,]*[?])/,/^(?:[,]*[/])/,/^(?:[,]*#)/,/^(?:[,]([A-Z]))/,/^(?:[A-Z])/,/^(?:[,][=])/,/^(?:[_][8])/,/^(?:[,][ ]?)/,/^(?:[.])/,/^(?:[ ])/,/^(?:$)/,/^(?:.)/],conditions:{radical:{rules:[0,1,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75],inclusive:!0},modexp:{rules:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75],inclusive:!0},INITIAL:{rules:[2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75],inclusive:!0}}};return dn}();_r.lexer=rt;function xe(){this.yy={}}return xe.prototype=_r,_r.Parser=xe,new xe}();e.parser=o,e.Parser=o.Parser,e.parse=function(){return o.parse.apply(o,arguments)},e.main=function(s){s[1]||(console.log("Usage: "+s[0]+" FILE"),i.exit(1));var l=r(4).readFileSync(r(5).normalize(s[1]),"utf8");return e.parser.parse(l)},typeof n!="undefined"&&r.c[r.s]===n&&e.main(i.argv.slice(1))}).call(e,r(1),r(8)(t))},function(t,e,r){(function(i,n){var o=function(){var a=function(Nt,me,gt,xt){for(gt=gt||{},xt=Nt.length;xt--;gt[Nt[xt]]=me);return gt},s=[1,15],l=[1,16],c=[1,17],u=[1,36],h=[1,18],p=[1,37],g=[1,38],y=[1,14],w=[1,46],b=[1,47],D=[1,39],I=[1,40],E=[1,41],G=[1,56],T=[1,42],P=[1,43],_=[1,44],x=[1,45],L=[1,54],R=[1,55],q=[1,57],K=[1,58],Y=[1,59],N=[1,60],j=[1,61],B=[1,62],A=[1,63],$=[1,64],J=[1,65],ue=[1,66],te=[1,67],Ae=[1,68],Se=[1,69],ce=[1,70],Ee=[1,71],H=[1,72],he=[1,73],De=[1,74],_e=[1,75],Me=[1,76],He=[1,48],Ze=[1,49],_t=[1,50],Re=[1,51],Tt=[1,52],dr=[1,77],ve=[1,53],_r=[5,14,18,19,29,52,53,54],rt=[5,10,13,14,15,18,19,29,52,53,54],xe=[5,10,13,14,15,17,18,19,21,23,24,28,29,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88],dn=[1,85],Je=[1,86],ot=[1,87],st=[10,13,15,17,21,23,24,28,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88],ae={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,expression_group:6,delimited_expression:7,level:8,radical:9,LEVEL:10,basic_token:11,bracketed_expression:12,RADICAL_WITH_INDEX:13,CLOSE_RADICAL:14,RADICAL:15,frac:16,OPEN_FRAC:17,OVER:18,CLOSE_FRAC:19,simple_frac:20,NUMBER:21,NUMBER_FRAC_DENOMINATOR:22,NUMBER_FRAC_NUMERATOR_BAD:23,NUMBER_FRAC_DENOMINATOR_BAD:24,atom:25,lbracket:26,rbracket:27,OPEN_GROUP:28,CLOSE_GROUP:29,command:30,greek:31,letter:32,comma:33,period:34,colon:35,infinity:36,integral:37,factorial:38,ampersand:39,question_mark:40,bracket:41,space:42,operation:43,comparison:44,ellipsis:45,primes:46,",":47,".":48,"[":49,"{":50,"(":51,"]":52,"}":53,")":54,SPACE:55,COMMAND:56,GREEK:57,CAPITAL_LETTER:58,LETTER:59,PIPE:60,DOUBLE_PIPE:61,"+":62,"-":63,CDOT:64,TIMES:65,"*":66,DIV:67,SLASH:68,PERCENT:69,TO:70,"=":71,NEQ:72,"<":73,">":74,LEQ:75,APPROX:76,GEQ:77,TILDE:78,PARALLEL:79,PERPENDICULAR:80,ELLIPSIS:81,COLON:82,INFINITY:83,INTEGRAL:84,FACTORIAL:85,"&":86,PRIMES:87,"?":88,unknown:89,UNKNOWN:90,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"LEVEL",13:"RADICAL_WITH_INDEX",14:"CLOSE_RADICAL",15:"RADICAL",17:"OPEN_FRAC",18:"OVER",19:"CLOSE_FRAC",21:"NUMBER",22:"NUMBER_FRAC_DENOMINATOR",23:"NUMBER_FRAC_NUMERATOR_BAD",24:"NUMBER_FRAC_DENOMINATOR_BAD",28:"OPEN_GROUP",29:"CLOSE_GROUP",47:",",48:".",49:"[",50:"{",51:"(",52:"]",53:"}",54:")",55:"SPACE",56:"COMMAND",57:"GREEK",58:"CAPITAL_LETTER",59:"LETTER",60:"PIPE",61:"DOUBLE_PIPE",62:"+",63:"-",64:"CDOT",65:"TIMES",66:"*",67:"DIV",68:"SLASH",69:"PERCENT",70:"TO",71:"=",72:"NEQ",73:"<",74:">",75:"LEQ",76:"APPROX",77:"GEQ",78:"TILDE",79:"PARALLEL",80:"PERPENDICULAR",81:"ELLIPSIS",82:"COLON",83:"INFINITY",84:"INTEGRAL",85:"FACTORIAL",86:"&",87:"PRIMES",88:"?",90:"UNKNOWN"},productions_:[0,[3,2],[3,1],[4,3],[4,2],[4,1],[4,2],[4,1],[7,1],[7,1],[8,2],[8,2],[8,2],[9,4],[9,3],[9,3],[9,2],[9,4],[9,3],[9,2],[16,5],[16,4],[16,4],[16,3],[16,2],[20,2],[20,1],[20,1],[11,1],[11,1],[11,1],[6,2],[6,2],[6,1],[6,1],[12,3],[12,2],[12,3],[12,2],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[33,1],[34,1],[26,1],[26,1],[26,1],[27,1],[27,1],[27,1],[42,1],[30,1],[31,1],[32,1],[32,1],[41,1],[41,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[45,1],[35,1],[36,1],[37,1],[38,1],[39,1],[46,1],[40,1],[89,1]],performAction:function(me,gt,xt,Ce,Mr,$e,Oo){var vt=$e.length-1;switch(Mr){case 1:return $e[vt-1];case 2:return Ce.group();case 3:case 35:this.$=Ce.group($e[vt-2],$e[vt-1],$e[vt]);break;case 4:case 6:case 31:case 32:case 36:this.$=Ce.group($e[vt-1],$e[vt]);break;case 5:case 7:case 33:case 34:this.$=Ce.group($e[vt]);break;case 10:case 11:case 12:this.$=Ce.basic_level($e[vt-1],Ce.group($e[vt]));break;case 13:case 17:this.$=Ce.radical($e[vt-1],Ce.group($e[vt-2]));break;case 14:case 15:this.$=Ce.radical(Ce.group(),Ce.group($e[vt-1]));break;case 16:this.$=Ce.radical(Ce.group(),Ce.group());break;case 18:this.$=Ce.radical($e[vt-1]);break;case 19:this.$=Ce.radical(Ce.group());break;case 20:this.$=Ce.fraction($e[vt-3],$e[vt-1]);break;case 21:this.$=Ce.fraction($e[vt-2],Ce.group());break;case 22:this.$=Ce.fraction(Ce.group(),$e[vt-1]);break;case 23:case 24:this.$=Ce.fraction(Ce.group(),Ce.group());break;case 25:this.$=Ce.fraction(Ce.group(Ce.terminal(Ce.to_number($e[vt-1]))),Ce.group(Ce.terminal(Ce.to_number($e[vt]))));break;case 26:this.$=Ce.fraction(Ce.group(Ce.terminal(Ce.to_number($e[vt]))),Ce.group());break;case 27:this.$=Ce.fraction(Ce.group(),Ce.group(Ce.terminal(Ce.to_number($e[$01]))));break;case 37:this.$=Ce.group($e[vt-1]);break;case 38:this.$=Ce.group();break;case 39:this.$=Ce.terminal(Ce.to_number($e[vt]));break;case 57:this.$=Ce.terminal(",");break;case 58:this.$=Ce.terminal(".");break;case 59:this.$=Ce.terminal("[");break;case 60:this.$=Ce.terminal("\\{");break;case 61:this.$=Ce.terminal("(");break;case 62:this.$=Ce.terminal("]");break;case 63:this.$=Ce.terminal("\\}");break;case 64:this.$=Ce.terminal(")");break;case 65:this.$=Ce.terminal(" ");break;case 66:this.$=Ce.command("\\"+$e[vt].trim().toLowerCase());break;case 67:this.$=Ce.terminal(Ce.greek($e[vt]));break;case 68:this.$=Ce.terminal($e[vt].toUpperCase());break;case 69:this.$=Ce.terminal($e[vt].toLowerCase());break;case 70:this.$=Ce.terminal("|");break;case 71:this.$=Ce.terminal("\\|");break;case 72:this.$=Ce.terminal("+");break;case 73:this.$=Ce.terminal("-");break;case 74:this.$=Ce.terminal("\\cdot ");break;case 75:this.$=Ce.terminal("\\times ");break;case 76:this.$=Ce.terminal("*");break;case 77:this.$=Ce.terminal("\\div ");break;case 78:this.$=Ce.terminal("/");break;case 79:this.$=Ce.terminal("\\%");break;case 80:this.$=Ce.terminal("\\to ");break;case 81:this.$=Ce.terminal("=");break;case 82:this.$=Ce.terminal("\\neq ");break;case 83:this.$=Ce.terminal("<");break;case 84:this.$=Ce.terminal(">");break;case 85:this.$=Ce.terminal("\\leq ");break;case 86:this.$=Ce.terminal("\\approx ");break;case 87:this.$=Ce.terminal("\\geq ");break;case 88:this.$=Ce.terminal("\\sim ");break;case 89:this.$=Ce.terminal("\\parallel ");break;case 90:this.$=Ce.terminal("\\perp ");break;case 91:this.$=Ce.terminal("\\ldots ");break;case 92:this.$=Ce.terminal(":");break;case 93:this.$=Ce.terminal("\\infty ");break;case 94:this.$=Ce.terminal("\\int ");break;case 95:this.$=Ce.terminal("!");break;case 96:this.$=Ce.terminal("\\&");break;case 97:this.$=Ce.primes($e[vt]);break;case 98:this.$=Ce.terminal("?");break}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:8,9:9,10:s,11:6,12:7,13:l,15:c,16:11,17:u,20:12,21:h,23:p,24:g,25:10,26:13,28:y,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:w,48:b,49:D,50:I,51:E,55:G,56:T,57:P,58:_,59:x,60:L,61:R,62:q,63:K,64:Y,65:N,66:j,67:B,68:A,69:$,70:J,71:ue,72:te,73:Ae,74:Se,75:ce,76:Ee,77:H,78:he,79:De,80:_e,81:Me,82:He,83:Ze,84:_t,85:Re,86:Tt,87:dr,88:ve},{1:[3]},{5:[1,78]},{1:[2,2]},a(_r,[2,5],{8:8,9:9,7:79,10:s,13:l,15:c}),a(_r,[2,7],{6:4,7:5,11:6,12:7,8:8,9:9,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,4:80,10:s,13:l,15:c,17:u,21:h,23:p,24:g,28:y,47:w,48:b,49:D,50:I,51:E,55:G,56:T,57:P,58:_,59:x,60:L,61:R,62:q,63:K,64:Y,65:N,66:j,67:B,68:A,69:$,70:J,71:ue,72:te,73:Ae,74:Se,75:ce,76:Ee,77:H,78:he,79:De,80:_e,81:Me,82:He,83:Ze,84:_t,85:Re,86:Tt,87:dr,88:ve}),a(rt,[2,33],{11:6,12:7,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,6:81,17:u,21:h,23:p,24:g,28:y,47:w,48:b,49:D,50:I,51:E,55:G,56:T,57:P,58:_,59:x,60:L,61:R,62:q,63:K,64:Y,65:N,66:j,67:B,68:A,69:$,70:J,71:ue,72:te,73:Ae,74:Se,75:ce,76:Ee,77:H,78:he,79:De,80:_e,81:Me,82:He,83:Ze,84:_t,85:Re,86:Tt,87:dr,88:ve}),a(rt,[2,34],{11:6,12:7,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,6:82,17:u,21:h,23:p,24:g,28:y,47:w,48:b,49:D,50:I,51:E,55:G,56:T,57:P,58:_,59:x,60:L,61:R,62:q,63:K,64:Y,65:N,66:j,67:B,68:A,69:$,70:J,71:ue,72:te,73:Ae,74:Se,75:ce,76:Ee,77:H,78:he,79:De,80:_e,81:Me,82:He,83:Ze,84:_t,85:Re,86:Tt,87:dr,88:ve}),a(xe,[2,8]),a(xe,[2,9]),a(xe,[2,28]),a(xe,[2,29]),a(xe,[2,30]),{4:83,6:4,7:5,8:8,9:9,10:s,11:6,12:7,13:l,15:c,16:11,17:u,20:12,21:h,23:p,24:g,25:10,26:13,27:84,28:y,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:w,48:b,49:D,50:I,51:E,52:dn,53:Je,54:ot,55:G,56:T,57:P,58:_,59:x,60:L,61:R,62:q,63:K,64:Y,65:N,66:j,67:B,68:A,69:$,70:J,71:ue,72:te,73:Ae,74:Se,75:ce,76:Ee,77:H,78:he,79:De,80:_e,81:Me,82:He,83:Ze,84:_t,85:Re,86:Tt,87:dr,88:ve},{4:88,6:4,7:5,8:8,9:9,10:s,11:6,12:7,13:l,15:c,16:11,17:u,20:12,21:h,23:p,24:g,25:10,26:13,28:y,29:[1,89],30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:w,48:b,49:D,50:I,51:E,55:G,56:T,57:P,58:_,59:x,60:L,61:R,62:q,63:K,64:Y,65:N,66:j,67:B,68:A,69:$,70:J,71:ue,72:te,73:Ae,74:Se,75:ce,76:Ee,77:H,78:he,79:De,80:_e,81:Me,82:He,83:Ze,84:_t,85:Re,86:Tt,87:dr,88:ve},{9:92,11:90,12:91,13:l,15:c,16:11,17:u,20:12,21:h,23:p,24:g,25:10,26:13,28:y,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:w,48:b,49:D,50:I,51:E,55:G,56:T,57:P,58:_,59:x,60:L,61:R,62:q,63:K,64:Y,65:N,66:j,67:B,68:A,69:$,70:J,71:ue,72:te,73:Ae,74:Se,75:ce,76:Ee,77:H,78:he,79:De,80:_e,81:Me,82:He,83:Ze,84:_t,85:Re,86:Tt,87:dr,88:ve},{11:93,12:94,14:[1,95],16:11,17:u,20:12,21:h,23:p,24:g,25:10,26:13,28:y,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:w,48:b,49:D,50:I,51:E,55:G,56:T,57:P,58:_,59:x,60:L,61:R,62:q,63:K,64:Y,65:N,66:j,67:B,68:A,69:$,70:J,71:ue,72:te,73:Ae,74:Se,75:ce,76:Ee,77:H,78:he,79:De,80:_e,81:Me,82:He,83:Ze,84:_t,85:Re,86:Tt,87:dr,88:ve},{4:96,6:4,7:5,8:8,9:9,10:s,11:6,12:7,13:l,14:[1,97],15:c,16:11,17:u,20:12,21:h,23:p,24:g,25:10,26:13,28:y,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:w,48:b,49:D,50:I,51:E,55:G,56:T,57:P,58:_,59:x,60:L,61:R,62:q,63:K,64:Y,65:N,66:j,67:B,68:A,69:$,70:J,71:ue,72:te,73:Ae,74:Se,75:ce,76:Ee,77:H,78:he,79:De,80:_e,81:Me,82:He,83:Ze,84:_t,85:Re,86:Tt,87:dr,88:ve},a(xe,[2,39],{22:[1,98]}),a(xe,[2,40]),a(xe,[2,41]),a(xe,[2,42]),a(xe,[2,43]),a(xe,[2,44]),a(xe,[2,45]),a(xe,[2,46]),a(xe,[2,47]),a(xe,[2,48]),a(xe,[2,49]),a(xe,[2,50]),a(xe,[2,51]),a(xe,[2,52]),a(xe,[2,53]),a(xe,[2,54]),a(xe,[2,55]),a(xe,[2,56]),{4:99,6:4,7:5,8:8,9:9,10:s,11:6,12:7,13:l,15:c,16:11,17:u,18:[1,100],19:[1,101],20:12,21:h,23:p,24:g,25:10,26:13,28:y,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:w,48:b,49:D,50:I,51:E,55:G,56:T,57:P,58:_,59:x,60:L,61:R,62:q,63:K,64:Y,65:N,66:j,67:B,68:A,69:$,70:J,71:ue,72:te,73:Ae,74:Se,75:ce,76:Ee,77:H,78:he,79:De,80:_e,81:Me,82:He,83:Ze,84:_t,85:Re,86:Tt,87:dr,88:ve},a(xe,[2,26]),a(xe,[2,27]),a(st,[2,59]),a(st,[2,60]),a(st,[2,61]),a(xe,[2,66]),a(xe,[2,67]),a(xe,[2,68]),a(xe,[2,69]),a(xe,[2,57]),a(xe,[2,58]),a(xe,[2,92]),a(xe,[2,93]),a(xe,[2,94]),a(xe,[2,95]),a(xe,[2,96]),a(xe,[2,98]),a(xe,[2,70]),a(xe,[2,71]),a(xe,[2,65]),a(xe,[2,72]),a(xe,[2,73]),a(xe,[2,74]),a(xe,[2,75]),a(xe,[2,76]),a(xe,[2,77]),a(xe,[2,78]),a(xe,[2,79]),a(xe,[2,80]),a(xe,[2,81]),a(xe,[2,82]),a(xe,[2,83]),a(xe,[2,84]),a(xe,[2,85]),a(xe,[2,86]),a(xe,[2,87]),a(xe,[2,88]),a(xe,[2,89]),a(xe,[2,90]),a(xe,[2,91]),a(xe,[2,97]),{1:[2,1]},a(_r,[2,4],{6:4,7:5,11:6,12:7,8:8,9:9,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,4:102,10:s,13:l,15:c,17:u,21:h,23:p,24:g,28:y,47:w,48:b,49:D,50:I,51:E,55:G,56:T,57:P,58:_,59:x,60:L,61:R,62:q,63:K,64:Y,65:N,66:j,67:B,68:A,69:$,70:J,71:ue,72:te,73:Ae,74:Se,75:ce,76:Ee,77:H,78:he,79:De,80:_e,81:Me,82:He,83:Ze,84:_t,85:Re,86:Tt,87:dr,88:ve}),a(_r,[2,6]),a(rt,[2,31]),a(rt,[2,32]),{27:103,52:dn,53:Je,54:ot},a(xe,[2,36]),a(xe,[2,62]),a(xe,[2,63]),a(xe,[2,64]),{29:[1,104]},a(xe,[2,38]),a(xe,[2,10]),a(xe,[2,11]),a(xe,[2,12]),{4:105,6:4,7:5,8:8,9:9,10:s,11:6,12:7,13:l,14:[1,106],15:c,16:11,17:u,20:12,21:h,23:p,24:g,25:10,26:13,28:y,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:w,48:b,49:D,50:I,51:E,55:G,56:T,57:P,58:_,59:x,60:L,61:R,62:q,63:K,64:Y,65:N,66:j,67:B,68:A,69:$,70:J,71:ue,72:te,73:Ae,74:Se,75:ce,76:Ee,77:H,78:he,79:De,80:_e,81:Me,82:He,83:Ze,84:_t,85:Re,86:Tt,87:dr,88:ve},{4:108,6:4,7:5,8:8,9:9,10:s,11:6,12:7,13:l,14:[1,107],15:c,16:11,17:u,20:12,21:h,23:p,24:g,25:10,26:13,28:y,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:w,48:b,49:D,50:I,51:E,55:G,56:T,57:P,58:_,59:x,60:L,61:R,62:q,63:K,64:Y,65:N,66:j,67:B,68:A,69:$,70:J,71:ue,72:te,73:Ae,74:Se,75:ce,76:Ee,77:H,78:he,79:De,80:_e,81:Me,82:He,83:Ze,84:_t,85:Re,86:Tt,87:dr,88:ve},a(xe,[2,16]),{14:[1,109]},a(xe,[2,19]),a(xe,[2,25]),{18:[1,110]},{4:111,6:4,7:5,8:8,9:9,10:s,11:6,12:7,13:l,15:c,16:11,17:u,19:[1,112],20:12,21:h,23:p,24:g,25:10,26:13,28:y,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:w,48:b,49:D,50:I,51:E,55:G,56:T,57:P,58:_,59:x,60:L,61:R,62:q,63:K,64:Y,65:N,66:j,67:B,68:A,69:$,70:J,71:ue,72:te,73:Ae,74:Se,75:ce,76:Ee,77:H,78:he,79:De,80:_e,81:Me,82:He,83:Ze,84:_t,85:Re,86:Tt,87:dr,88:ve},a(xe,[2,24]),a(_r,[2,3]),a(xe,[2,35]),a(xe,[2,37]),{14:[1,113]},a(xe,[2,15]),a(xe,[2,14]),{14:[1,114]},a(xe,[2,18]),{4:115,6:4,7:5,8:8,9:9,10:s,11:6,12:7,13:l,15:c,16:11,17:u,19:[1,116],20:12,21:h,23:p,24:g,25:10,26:13,28:y,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:w,48:b,49:D,50:I,51:E,55:G,56:T,57:P,58:_,59:x,60:L,61:R,62:q,63:K,64:Y,65:N,66:j,67:B,68:A,69:$,70:J,71:ue,72:te,73:Ae,74:Se,75:ce,76:Ee,77:H,78:he,79:De,80:_e,81:Me,82:He,83:Ze,84:_t,85:Re,86:Tt,87:dr,88:ve},{19:[1,117]},a(xe,[2,23]),a(xe,[2,13]),a(xe,[2,17]),{19:[1,118]},a(xe,[2,21]),a(xe,[2,22]),a(xe,[2,20])],defaultActions:{3:[2,2],78:[2,1]},parseError:function(me,gt){if(gt.recoverable)this.trace(me);else{var xt=new Error(me);throw xt.hash=gt,xt}},parse:function(me){var gt=this,xt=[0],Ce=[],Mr=[null],$e=[],Oo=this.table,vt="",sr=0,Fr=0,xi=0,Ha=2,un=1,Xi=$e.slice.call(arguments,1),Ut=Object.create(this.lexer),ii={yy:{}};for(var O in this.yy)Object.prototype.hasOwnProperty.call(this.yy,O)&&(ii.yy[O]=this.yy[O]);Ut.setInput(me,ii.yy),ii.yy.lexer=Ut,ii.yy.parser=this,typeof Ut.yylloc=="undefined"&&(Ut.yylloc={});var z=Ut.yylloc;$e.push(z);var Z=Ut.options&&Ut.options.ranges;typeof ii.yy.parseError=="function"?this.parseError=ii.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function pe(Rr){xt.length=xt.length-2*Rr,Mr.length=Mr.length-Rr,$e.length=$e.length-Rr}e:var ee=function(){var Rr;return Rr=Ut.lex()||un,typeof Rr!="number"&&(Rr=gt.symbols_[Rr]||Rr),Rr};for(var de,ye,Pe,Oe,ft,et,ct={},bt,Ht,pt,ni;;){if(Pe=xt[xt.length-1],this.defaultActions[Pe]?Oe=this.defaultActions[Pe]:((de===null||typeof de=="undefined")&&(de=ee()),Oe=Oo[Pe]&&Oo[Pe][de]),typeof Oe=="undefined"||!Oe.length||!Oe[0]){var Bi="";ni=[];for(bt in Oo[Pe])this.terminals_[bt]&&bt>Ha&&ni.push("'"+this.terminals_[bt]+"'");Ut.showPosition?Bi="Parse error on line "+(sr+1)+`:
`+Ut.showPosition()+`
Expecting `+ni.join(", ")+", got '"+(this.terminals_[de]||de)+"'":Bi="Parse error on line "+(sr+1)+": Unexpected "+(de==un?"end of input":"'"+(this.terminals_[de]||de)+"'"),this.parseError(Bi,{text:Ut.match,token:this.terminals_[de]||de,line:Ut.yylineno,loc:z,expected:ni})}if(Oe[0]instanceof Array&&Oe.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Pe+", token: "+de);switch(Oe[0]){case 1:xt.push(de),Mr.push(Ut.yytext),$e.push(Ut.yylloc),xt.push(Oe[1]),de=null,ye?(de=ye,ye=null):(Fr=Ut.yyleng,vt=Ut.yytext,sr=Ut.yylineno,z=Ut.yylloc,xi>0&&xi--);break;case 2:if(Ht=this.productions_[Oe[1]][1],ct.$=Mr[Mr.length-Ht],ct._$={first_line:$e[$e.length-(Ht||1)].first_line,last_line:$e[$e.length-1].last_line,first_column:$e[$e.length-(Ht||1)].first_column,last_column:$e[$e.length-1].last_column},Z&&(ct._$.range=[$e[$e.length-(Ht||1)].range[0],$e[$e.length-1].range[1]]),et=this.performAction.apply(ct,[vt,Fr,sr,ii.yy,Oe[1],Mr,$e].concat(Xi)),typeof et!="undefined")return et;Ht&&(xt=xt.slice(0,-1*Ht*2),Mr=Mr.slice(0,-1*Ht),$e=$e.slice(0,-1*Ht)),xt.push(this.productions_[Oe[1]][0]),Mr.push(ct.$),$e.push(ct._$),pt=Oo[xt[xt.length-2]][xt[xt.length-1]],xt.push(pt);break;case 3:return!0}}return!0}},ar=function(){var Nt={EOF:1,parseError:function(gt,xt){if(this.yy.parser)this.yy.parser.parseError(gt,xt);else throw new Error(gt)},setInput:function(me,gt){return this.yy=gt||this.yy||{},this._input=me,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var me=this._input[0];this.yytext+=me,this.yyleng++,this.offset++,this.match+=me,this.matched+=me;var gt=me.match(/(?:\r\n?|\n).*/g);return gt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),me},unput:function(me){var gt=me.length,xt=me.split(/(?:\r\n?|\n)/g);this._input=me+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-gt),this.offset-=gt;var Ce=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),xt.length-1&&(this.yylineno-=xt.length-1);var Mr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:xt?(xt.length===Ce.length?this.yylloc.first_column:0)+Ce[Ce.length-xt.length].length-xt[0].length:this.yylloc.first_column-gt},this.options.ranges&&(this.yylloc.range=[Mr[0],Mr[0]+this.yyleng-gt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(me){this.unput(this.match.slice(me))},pastInput:function(){var me=this.matched.substr(0,this.matched.length-this.match.length);return(me.length>20?"...":"")+me.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var me=this.match;return me.length<20&&(me+=this._input.substr(0,20-me.length)),(me.substr(0,20)+(me.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var me=this.pastInput(),gt=new Array(me.length+1).join("-");return me+this.upcomingInput()+`
`+gt+"^"},test_match:function(me,gt){var xt,Ce,Mr;if(this.options.backtrack_lexer&&(Mr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Mr.yylloc.range=this.yylloc.range.slice(0))),Ce=me[0].match(/(?:\r\n?|\n).*/g),Ce&&(this.yylineno+=Ce.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ce?Ce[Ce.length-1].length-Ce[Ce.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+me[0].length},this.yytext+=me[0],this.match+=me[0],this.matches=me,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(me[0].length),this.matched+=me[0],xt=this.performAction.call(this,this.yy,this,gt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),xt)return xt;if(this._backtrack){for(var $e in Mr)this[$e]=Mr[$e];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var me,gt,xt,Ce;this._more||(this.yytext="",this.match="");for(var Mr=this._currentRules(),$e=0;$e<Mr.length;$e++)if(xt=this._input.match(this.rules[Mr[$e]]),xt&&(!gt||xt[0].length>gt[0].length)){if(gt=xt,Ce=$e,this.options.backtrack_lexer){if(me=this.test_match(xt,Mr[$e]),me!==!1)return me;if(this._backtrack){gt=!1;continue}else return!1}else if(!this.options.flex)break}return gt?(me=this.test_match(gt,Mr[Ce]),me!==!1?me:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var gt=this.next();return gt||this.lex()},begin:function(gt){this.conditionStack.push(gt)},popState:function(){var gt=this.conditionStack.length-1;return gt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(gt){return gt=this.conditionStack.length-1-Math.abs(gt||0),gt>=0?this.conditionStack[gt]:"INITIAL"},pushState:function(gt){this.begin(gt)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(gt,xt,Ce,Mr){var $e=Mr;switch(Ce){case 0:this.begin("captext");return;case 1:return 58;case 2:return this.popState(),58;break;case 3:return 62;case 4:return 63;case 5:return 64;case 6:return 65;case 7:return 66;case 8:return 67;case 9:return 49;case 10:return 50;case 11:return 51;case 12:return 52;case 13:return 53;case 14:return 54;case 15:return 72;case 16:return 75;case 17:return 76;case 18:return 77;case 19:return 71;case 20:return 73;case 21:return 74;case 22:return 78;case 23:return 69;case 24:return 70;case 25:return 81;case 26:return 13;case 27:return 15;case 28:return 14;case 29:return 10;case 30:return 28;case 31:return 29;case 32:return 84;case 33:return 85;case 34:return 86;case 35:return 17;case 36:return 18;case 37:return 19;case 38:return 79;case 39:return 80;case 40:return 83;case 41:return xt.yytext=this.matches[1],21;break;case 42:return xt.yytext=this.matches[1],22;break;case 43:return xt.yytext=this.matches[1],24;break;case 44:return 68;case 45:return 47;case 46:return 48;case 47:return 87;case 48:return 61;case 49:return 60;case 50:return 82;case 51:return 56;case 52:return 56;case 53:return 57;case 54:return xt.yytext=this.matches[1],58;break;case 55:return 59;case 56:return;case 57:return 88;case 58:return;case 59:return 55;case 60:return 5;case 61:return 90}},rules:[/^(?:([,][,])(?=[A-Z]))/,/^(?:[A-Z](?=[A-Z]))/,/^(?:[A-Z])/,/^(?:["][6])/,/^(?:["][-])/,/^(?:["][4])/,/^(?:["][8])/,/^(?:["][9])/,/^(?:["][/])/,/^(?:[.][<])/,/^(?:[_][<])/,/^(?:["][<])/,/^(?:[.][>])/,/^(?:[_][>])/,/^(?:["][>])/,/^(?:["][7][@][:])/,/^(?:[_][@][<])/,/^(?:[\^][9])/,/^(?:[_][@][>])/,/^(?:["][7])/,/^(?:[@][<])/,/^(?:[@][>])/,/^(?:[@][9])/,/^(?:[.][0])/,/^(?:[:][O])/,/^(?:[4][4][4])/,/^(?:[%][9])/,/^(?:[%])/,/^(?:[\+])/,/^(?:[95]+(?=.))/,/^(?:[<])/,/^(?:[>])/,/^(?:!)/,/^(?:[6])/,/^(?:[@]&)/,/^(?:[(])/,/^(?:[.][/])/,/^(?:[)])/,/^(?:#[L])/,/^(?:#-)/,/^(?:#=)/,/^(?:#([A-J4]+))/,/^(?:[/]([A-J4]+))/,/^(?:[#][/]([A-J4]+))/,/^(?:[_]?[/])/,/^(?:[1])/,/^(?:[4])/,/^(?:[7]+)/,/^(?:[_][\\][_][\\])/,/^(?:[_][\\])/,/^(?:[3])/,/^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/,/^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/,/^(?:[,]?[.][ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/,/^(?:[,]([A-Z]))/,/^(?:[A-Z])/,/^(?:[,]['])/,/^(?:[8])/,/^(?:[;])/,/^(?:[ ])/,/^(?:$)/,/^(?:.)/],conditions:{captext:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61],inclusive:!0},INITIAL:{rules:[0,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61],inclusive:!0}}};return Nt}();ae.lexer=ar;function Te(){this.yy={}}return Te.prototype=ae,ae.Parser=Te,new Te}();e.parser=o,e.Parser=o.Parser,e.parse=function(){return o.parse.apply(o,arguments)},e.main=function(s){s[1]||(console.log("Usage: "+s[0]+" FILE"),i.exit(1));var l=r(4).readFileSync(r(5).normalize(s[1]),"utf8");return e.parser.parse(l)},typeof n!="undefined"&&r.c[r.s]===n&&e.main(i.argv.slice(1))}).call(e,r(1),r(8)(t))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),n=r(7),o={"~":"\\ ","\\,":"\\ ","\\:":"\\ ","\\;":"\\ ","\\!":"\\ "},a={"\\Vert":"\\|","\\ge":"\\geq","\\le":"\\leq","\\vert":"|"},s={"\\space":!0};function l(h){for(var p=[],g=0;g<h.length;g++){var y=h[g];switch(y.type){case"command":var w=y.value.slice(1).trim();a.hasOwnProperty(y.value)?p.push(n.command(a[y.value])):i.containsValue(w)?p.push(n.typeform("operator_name",c(w))):s[y.value]||p.push(y);break;case"level":var b={subscript:y.subscript&&y.subscript.length>0?l(y.subscript):void 0,superscript:y.superscript&&y.superscript.length>0?l(y.superscript):void 0,type:y.type};(b.subscript||b.superscript)&&p.push(b);break;case"fraction":p.push({denominator:l(y.denominator),numerator:l(y.numerator),type:y.type});break;case"radical":p.push({index:y.index?l(y.index):void 0,radicand:l(y.radicand),type:y.type});break;case"terminal":u(h.slice(g))?(p.push({type:"command",value:"\\ldots"}),g+=2):p.push({type:y.type,value:o.hasOwnProperty(y.value)?o[y.value]:y.value});break;case"typeform":p.push(y);break;case"greek":p.push({type:y.type,value:o.hasOwnProperty(y.value)?o[y.value]:y.value});break;default:throw new Error(`Unexpected item:
`+JSON.stringify({group:h,item:y}))}}return p}e.default=l;function c(h){for(var p=[],g=0,y=h;g<y.length;g++){var w=y[g];p.push(n.terminal(w))}return p}function u(h){for(var p=0,g=0;g<Math.min(3,h.length);g++){var y=h[g];y.type==="terminal"&&y.value==="."&&p++}return p===3}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6),n=r(13),o=r(7);n.parser.yy=o;function a(s){try{return{isError:!1,value:n.parser.parse(s)}}catch(l){return{isError:!0,error:i.default(l)}}}e.default=a},function(t,e,r){(function(i,n){var o=function(){var a=function(j,B,A,$){for(A=A||{},$=j.length;$--;A[j[$]]=B);return A},s=[1,13],l=[1,14],c=[1,15],u=[1,16],h=[1,17],p=[1,21],g=[1,18],y=[1,19],w=[1,20],b=[1,22],D=[1,23],I=[1,28],E=[1,30],G=[1,31],T=[1,32],P=[1,33],_=[1,29],x=[5,21,27,38],L=[5,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],R=[5,10,12,13,14,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],q=[5,10,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],K={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,level:6,expression:7,subscript:8,superscript:9,_:10,atom:11,"^":12,"PRIMES^":13,PRIMES:14,delimited_group:15,typeform:16,frac:17,radical:18,LEFT:19,delimiter:20,RIGHT:21,FRAC:22,OPERATOR_NAME:23,MATHRM:24,TEXT:25,RADICAL_OPTARG:26,CLOSE_OPTARG:27,RADICAL:28,curly_group:29,greek:30,command:31,SYMBOL:32,DELIMITER:33,DELIMITER_COMMAND:34,GREEK:35,COMMAND:36,"{":37,"}":38,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"_",12:"^",13:"PRIMES^",14:"PRIMES",19:"LEFT",21:"RIGHT",22:"FRAC",23:"OPERATOR_NAME",24:"MATHRM",25:"TEXT",26:"RADICAL_OPTARG",27:"CLOSE_OPTARG",28:"RADICAL",32:"SYMBOL",33:"DELIMITER",34:"DELIMITER_COMMAND",35:"GREEK",36:"COMMAND",37:"{",38:"}"},productions_:[0,[3,2],[3,1],[4,3],[4,2],[4,1],[4,2],[4,1],[6,2],[6,2],[6,1],[6,1],[8,2],[9,2],[9,2],[9,1],[7,1],[7,1],[7,1],[7,1],[7,1],[15,5],[15,4],[17,3],[16,2],[16,2],[16,2],[18,4],[18,3],[18,2],[18,2],[11,1],[11,1],[11,1],[11,1],[11,1],[20,1],[20,1],[30,1],[31,1],[29,3],[29,2]],performAction:function(B,A,$,J,ue,te,Ae){var Se=te.length-1;switch(ue){case 1:return te[Se-1];case 2:return J.group();case 3:this.$=J.group(te[Se-2],te[Se-1],te[Se]);break;case 4:case 6:this.$=J.group(te[Se-1],te[Se]);break;case 5:case 7:this.$=J.group(te[Se]);break;case 8:this.$=J.level({_:J.group(te[Se-1]),"^":J.group(te[Se])});break;case 9:this.$=J.level({_:J.group(te[Se]),"^":J.group(te[Se-1])});break;case 10:this.$=J.level({"^":J.group(te[Se])});break;case 11:this.$=J.level({_:J.group(te[Se])});break;case 12:case 13:this.$=te[Se];break;case 14:this.$=J.processPrimes(te[Se-1],te[Se]);break;case 15:this.$=J.processPrimes(te[Se],J.group());break;case 21:this.$=J.group(te[Se-3],te[Se-2],te[Se]);break;case 22:this.$=J.group(te[Se-2],te[Se]);break;case 23:this.$=J.fraction(J.group(te[Se-1]),J.group(te[Se]));break;case 24:this.$=J.typeform("operator_name",J.group(te[Se]));break;case 25:this.$=J.typeform("mathrm",J.group(te[Se]));break;case 26:this.$=J.typeform("text",J.group(te[Se]));break;case 27:this.$=J.radical(te[Se],J.group(te[Se-2]));break;case 28:this.$=J.radical(J.group(te[Se]),J.group());break;case 29:case 30:this.$=J.radical(J.group(te[Se]));break;case 35:case 36:this.$=J.terminal(te[Se]);break;case 37:case 39:this.$=J.command(te[Se]);break;case 38:this.$=J.greek(te[Se]);break;case 40:this.$=te[Se-1];break;case 41:this.$=J.group();break}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,10:s,11:12,12:l,13:c,14:u,15:8,16:9,17:10,18:11,19:h,20:25,22:p,23:g,24:y,25:w,26:b,28:D,29:24,30:26,31:27,32:I,33:E,34:G,35:T,36:P,37:_},{1:[3]},{5:[1,34]},{1:[2,2]},a(x,[2,5],{15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,7:35,19:h,22:p,23:g,24:y,25:w,26:b,28:D,32:I,33:E,34:G,35:T,36:P,37:_}),a(x,[2,7],{6:4,7:5,8:6,9:7,15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,4:36,10:s,12:l,13:c,14:u,19:h,22:p,23:g,24:y,25:w,26:b,28:D,32:I,33:E,34:G,35:T,36:P,37:_}),a(L,[2,11],{9:37,12:l,13:c,14:u}),a(L,[2,10],{8:38,10:s}),a(R,[2,16]),a(R,[2,17]),a(R,[2,18]),a(R,[2,19]),a(R,[2,20]),{11:39,20:25,29:24,30:26,31:27,32:I,33:E,34:G,35:T,36:P,37:_},{11:40,20:25,29:24,30:26,31:27,32:I,33:E,34:G,35:T,36:P,37:_},{11:41,20:25,29:24,30:26,31:27,32:I,33:E,34:G,35:T,36:P,37:_},a(q,[2,15]),{20:42,33:E,34:G},{11:43,20:25,29:24,30:26,31:27,32:I,33:E,34:G,35:T,36:P,37:_},{11:44,20:25,29:24,30:26,31:27,32:I,33:E,34:G,35:T,36:P,37:_},{11:45,20:25,29:24,30:26,31:27,32:I,33:E,34:G,35:T,36:P,37:_},{11:46,20:25,29:24,30:26,31:27,32:I,33:E,34:G,35:T,36:P,37:_},{4:47,6:4,7:5,8:6,9:7,10:s,11:12,12:l,13:c,14:u,15:8,16:9,17:10,18:11,19:h,20:25,22:p,23:g,24:y,25:w,26:b,27:[1,48],28:D,29:24,30:26,31:27,32:I,33:E,34:G,35:T,36:P,37:_},{11:49,17:50,20:25,22:p,29:24,30:26,31:27,32:I,33:E,34:G,35:T,36:P,37:_},a(R,[2,31]),a(R,[2,32]),a(R,[2,33]),a(R,[2,34]),a(R,[2,35]),{4:51,6:4,7:5,8:6,9:7,10:s,11:12,12:l,13:c,14:u,15:8,16:9,17:10,18:11,19:h,20:25,22:p,23:g,24:y,25:w,26:b,28:D,29:24,30:26,31:27,32:I,33:E,34:G,35:T,36:P,37:_,38:[1,52]},a(R,[2,36]),a(R,[2,37]),a(R,[2,38]),a(R,[2,39]),{1:[2,1]},a(x,[2,4],{6:4,7:5,8:6,9:7,15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,4:53,10:s,12:l,13:c,14:u,19:h,22:p,23:g,24:y,25:w,26:b,28:D,32:I,33:E,34:G,35:T,36:P,37:_}),a(x,[2,6]),a(L,[2,8]),a(L,[2,9]),a([5,12,13,14,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],[2,12]),a(q,[2,13]),a(q,[2,14]),{4:54,6:4,7:5,8:6,9:7,10:s,11:12,12:l,13:c,14:u,15:8,16:9,17:10,18:11,19:h,20:25,21:[1,55],22:p,23:g,24:y,25:w,26:b,28:D,29:24,30:26,31:27,32:I,33:E,34:G,35:T,36:P,37:_},a(R,[2,24]),a(R,[2,25]),a(R,[2,26]),{11:56,20:25,29:24,30:26,31:27,32:I,33:E,34:G,35:T,36:P,37:_},{27:[1,57]},{11:58,20:25,29:24,30:26,31:27,32:I,33:E,34:G,35:T,36:P,37:_},a(R,[2,29]),a(R,[2,30]),{38:[1,59]},a(R,[2,41]),a(x,[2,3]),{21:[1,60]},{20:61,33:E,34:G},a(R,[2,23]),{11:62,20:25,29:24,30:26,31:27,32:I,33:E,34:G,35:T,36:P,37:_},a(R,[2,28]),a(R,[2,40]),{20:63,33:E,34:G},a(R,[2,22]),a(R,[2,27]),a(R,[2,21])],defaultActions:{3:[2,2],34:[2,1]},parseError:function(B,A){if(A.recoverable)this.trace(B);else{var $=new Error(B);throw $.hash=A,$}},parse:function(B){var A=this,$=[0],J=[],ue=[null],te=[],Ae=this.table,Se="",ce=0,Ee=0,H=0,he=2,De=1,_e=te.slice.call(arguments,1),Me=Object.create(this.lexer),He={yy:{}};for(var Ze in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ze)&&(He.yy[Ze]=this.yy[Ze]);Me.setInput(B,He.yy),He.yy.lexer=Me,He.yy.parser=this,typeof Me.yylloc=="undefined"&&(Me.yylloc={});var _t=Me.yylloc;te.push(_t);var Re=Me.options&&Me.options.ranges;typeof He.yy.parseError=="function"?this.parseError=He.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Tt(me){$.length=$.length-2*me,ue.length=ue.length-me,te.length=te.length-me}e:var dr=function(){var me;return me=Me.lex()||De,typeof me!="number"&&(me=A.symbols_[me]||me),me};for(var ve,_r,rt,xe,dn,Je,ot={},st,ae,ar,Te;;){if(rt=$[$.length-1],this.defaultActions[rt]?xe=this.defaultActions[rt]:((ve===null||typeof ve=="undefined")&&(ve=dr()),xe=Ae[rt]&&Ae[rt][ve]),typeof xe=="undefined"||!xe.length||!xe[0]){var Nt="";Te=[];for(st in Ae[rt])this.terminals_[st]&&st>he&&Te.push("'"+this.terminals_[st]+"'");Me.showPosition?Nt="Parse error on line "+(ce+1)+`:
`+Me.showPosition()+`
Expecting `+Te.join(", ")+", got '"+(this.terminals_[ve]||ve)+"'":Nt="Parse error on line "+(ce+1)+": Unexpected "+(ve==De?"end of input":"'"+(this.terminals_[ve]||ve)+"'"),this.parseError(Nt,{text:Me.match,token:this.terminals_[ve]||ve,line:Me.yylineno,loc:_t,expected:Te})}if(xe[0]instanceof Array&&xe.length>1)throw new Error("Parse Error: multiple actions possible at state: "+rt+", token: "+ve);switch(xe[0]){case 1:$.push(ve),ue.push(Me.yytext),te.push(Me.yylloc),$.push(xe[1]),ve=null,_r?(ve=_r,_r=null):(Ee=Me.yyleng,Se=Me.yytext,ce=Me.yylineno,_t=Me.yylloc,H>0&&H--);break;case 2:if(ae=this.productions_[xe[1]][1],ot.$=ue[ue.length-ae],ot._$={first_line:te[te.length-(ae||1)].first_line,last_line:te[te.length-1].last_line,first_column:te[te.length-(ae||1)].first_column,last_column:te[te.length-1].last_column},Re&&(ot._$.range=[te[te.length-(ae||1)].range[0],te[te.length-1].range[1]]),Je=this.performAction.apply(ot,[Se,Ee,ce,He.yy,xe[1],ue,te].concat(_e)),typeof Je!="undefined")return Je;ae&&($=$.slice(0,-1*ae*2),ue=ue.slice(0,-1*ae),te=te.slice(0,-1*ae)),$.push(this.productions_[xe[1]][0]),ue.push(ot.$),te.push(ot._$),ar=Ae[$[$.length-2]][$[$.length-1]],$.push(ar);break;case 3:return!0}}return!0}},Y=function(){var j={EOF:1,parseError:function(A,$){if(this.yy.parser)this.yy.parser.parseError(A,$);else throw new Error(A)},setInput:function(B,A){return this.yy=A||this.yy||{},this._input=B,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var B=this._input[0];this.yytext+=B,this.yyleng++,this.offset++,this.match+=B,this.matched+=B;var A=B.match(/(?:\r\n?|\n).*/g);return A?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),B},unput:function(B){var A=B.length,$=B.split(/(?:\r\n?|\n)/g);this._input=B+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-A),this.offset-=A;var J=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),$.length-1&&(this.yylineno-=$.length-1);var ue=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:$?($.length===J.length?this.yylloc.first_column:0)+J[J.length-$.length].length-$[0].length:this.yylloc.first_column-A},this.options.ranges&&(this.yylloc.range=[ue[0],ue[0]+this.yyleng-A]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(B){this.unput(this.match.slice(B))},pastInput:function(){var B=this.matched.substr(0,this.matched.length-this.match.length);return(B.length>20?"...":"")+B.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var B=this.match;return B.length<20&&(B+=this._input.substr(0,20-B.length)),(B.substr(0,20)+(B.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var B=this.pastInput(),A=new Array(B.length+1).join("-");return B+this.upcomingInput()+`
`+A+"^"},test_match:function(B,A){var $,J,ue;if(this.options.backtrack_lexer&&(ue={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ue.yylloc.range=this.yylloc.range.slice(0))),J=B[0].match(/(?:\r\n?|\n).*/g),J&&(this.yylineno+=J.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:J?J[J.length-1].length-J[J.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+B[0].length},this.yytext+=B[0],this.match+=B[0],this.matches=B,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(B[0].length),this.matched+=B[0],$=this.performAction.call(this,this.yy,this,A,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),$)return $;if(this._backtrack){for(var te in ue)this[te]=ue[te];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var B,A,$,J;this._more||(this.yytext="",this.match="");for(var ue=this._currentRules(),te=0;te<ue.length;te++)if($=this._input.match(this.rules[ue[te]]),$&&(!A||$[0].length>A[0].length)){if(A=$,J=te,this.options.backtrack_lexer){if(B=this.test_match($,ue[te]),B!==!1)return B;if(this._backtrack){A=!1;continue}else return!1}else if(!this.options.flex)break}return A?(B=this.test_match(A,ue[J]),B!==!1?B:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var A=this.next();return A||this.lex()},begin:function(A){this.conditionStack.push(A)},popState:function(){var A=this.conditionStack.length-1;return A>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(A){return A=this.conditionStack.length-1-Math.abs(A||0),A>=0?this.conditionStack[A]:"INITIAL"},pushState:function(A){this.begin(A)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(A,$,J,ue){var te=ue;switch(J){case 0:break;case 1:return this.begin("optarg"),26;break;case 2:return this.popState(),27;break;case 3:return 23;case 4:return 24;case 5:return 25;case 6:return 28;case 7:return 22;case 8:return 13;case 9:return 14;case 10:return 12;case 11:return 10;case 12:return 19;case 13:return 21;case 14:return 34;case 15:return 33;case 16:return 37;case 17:return 38;case 18:return 32;case 19:return 32;case 20:return 32;case 21:return 35;case 22:return 35;case 23:return 36;case 24:return 32;case 25:return 5}},rules:[/^(?:\s+)/,/^(?:(\\sqrt)\s*\[)/,/^(?:\])/,/^(?:(\\operatorname))/,/^(?:(\\mathrm))/,/^(?:(\\text))/,/^(?:(\\sqrt))/,/^(?:(\\frac))/,/^(?:'+\^)/,/^(?:'+)/,/^(?:\^)/,/^(?:[_])/,/^(?:(\\left))/,/^(?:(\\right))/,/^(?:(\\langle|\\rangle|\\vert|\\Vert))/,/^(?:\[|\]|\\\{|\\\}|\(|\)|\||\\\|)/,/^(?:\{)/,/^(?:\})/,/^(?:\\(infty))/,/^(?:\\(int))/,/^(?:!)/,/^(?:\\(alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|omicron|pi|rho|sigma|tau|xi|upsilon|phi|chi|psi|omega))/,/^(?:\\(Alpha|Beta|Gamma|Delta|Epsilon|Zeta|Eta|Theta|Iota|Kappa|Lambda|Mu|Nu|Omicron|Pi|Rho|Sigma|Tau|Xi|Upsilon|Phi|Chi|Psi|Omega))/,/^(?:\\[A-Za-z]+)/,/^(?:\\.|.)/,/^(?:$)/],conditions:{optarg:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0}}};return j}();K.lexer=Y;function N(){this.yy={}}return N.prototype=K,K.Parser=N,new N}();e.parser=o,e.Parser=o.Parser,e.parse=function(){return o.parse.apply(o,arguments)},e.main=function(s){s[1]||(console.log("Usage: "+s[0]+" FILE"),i.exit(1));var l=r(4).readFileSync(r(5).normalize(s[1]),"utf8");return e.parser.parse(l)},typeof n!="undefined"&&r.c[r.s]===n&&e.main(i.argv.slice(1))}).call(e,r(1),r(8)(t))},function(t,e,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(K){for(var Y,N=1,j=arguments.length;N<j;N++){Y=arguments[N];for(var B in Y)Object.prototype.hasOwnProperty.call(Y,B)&&(K[B]=Y[B])}return K},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var n=r(11),o=r(12),a=r(0);function s(K){return a.map(o.default(K),function(Y){return q(n.default(Y))})}e.default=s;var l={"!":"&","*":"@#",",":", ","/":"_/",":":"_3","<":' "K ',"=":" .K ",">":" .1 ","?":"_8","[":"@(","\\ ":" ","\\%":"@0","\\&":"_&","\\,":" ","\\infty":",=","\\int":"!","\\{":".(","\\|":"\\\\","\\}":".)","]":"@)","|":"\\"};function c(K){return/^[a-z]$/.test(K.value)?K.value.toUpperCase():/^[A-Z]$/.test(K.value)?","+K.value:/^[0-9.]$/.test(K.value)||/^[+\-()]$/.test(K.value)?K.value:l.hasOwnProperty(K.value)?l[K.value]:"[terminal: "+K.value+"]"}var u={"\\Vert":"\\\\","\\cdot":"*","\\div":"./","\\ge":" .1: ","\\geq":" .1: ","\\langle":"..(","\\ldots":" ''' ","\\le":' "K: ',"\\leq":' "K: ',"\\ne":" /.K ","\\neq":" /.K ","\\approx":" @:@: ","\\nparallel":" /$L ","\\parallel":" $L ","\\perp":" $P ","\\prime":"'","\\prod":".,P","\\rangle":"..)","\\sim":"@:","\\sum":".,S","\\times":"@*","\\to":" $O ","\\vert":"\\"},h={"\\Alpha":".,A","\\Beta":".,B","\\Chi":".,&","\\Delta":".,D","\\Epsilon":".,E","\\Eta":".,:","\\Gamma":".,G","\\Iota":".,I","\\Kappa":".,K","\\Lambda":".,L","\\Mu":".,M","\\Nu":".,N","\\Omega":".,W","\\Omicron":".,O","\\Phi":".,F","\\Pi":".,P","\\Psi":".,Y","\\Rho":".,R","\\Sigma":".,S","\\Tau":".,T","\\Theta":".,?","\\Upsilon":".,U","\\Xi":".,X","\\Zeta":".,Z","\\alpha":".A","\\beta":".B","\\chi":".&","\\delta":".D","\\epsilon":".E","\\eta":".:","\\gamma":".G","\\iota":".I","\\kappa":".K","\\lambda":".L","\\mu":".M","\\nu":".N","\\omega":".W","\\omicron":".O","\\phi":".F","\\pi":".P","\\psi":".Y","\\rho":".R","\\sigma":".S","\\tau":".T","\\theta":".?","\\upsilon":".U","\\xi":".X","\\zeta":".Z"};function p(K){return u.hasOwnProperty(K.value)?u[K.value]:K.value.slice(1).toUpperCase()+" "}function g(K){return h.hasOwnProperty(K.value)?h[K.value]:K.value.slice(1).toUpperCase()+" "}function y(K){return K.value==="\\space"}function w(K,Y){return K.isStartOfLine&&/^-?$/.test(Y)||/\s-?$/.test(Y)||K.wasFraction}function b(K){return K.value==="\\sum"||K.value==="\\prod"}function D(K,Y){if(Y>=K.length)return!1;var N=K[Y];if(N.type==="terminal"){if(/^[0-9]$/.test(N.value))return!0;if(N.value!=="."||Y+1>=K.length)return!1;if(N=K[Y+1],N.type==="terminal")return/^[0-9]$/.test(N.value)}return!1}function I(K,Y){for(var N="",j=K.levelIndicator,B=0,A=!1,$=0;$<Y.length;$++){D(Y,$)&&(j===""&&/[A-Z]$/.test(N)?N+=_(j):w(K,N)&&(N+="#"));var J=Y[$],ue=$<Y.length-1?Y[$+1]:null;switch(J.type!=="level"&&j!==K.levelIndicator&&(R(J)?j="":(K.wasModifiedExpression&&K.levelIndicator===""?K=L(K,{wasModifiedExpression:!1}):N+=_(K.levelIndicator),j=K.levelIndicator)),J.type){case"terminal":!K.wasModifiedExpression&&j!==""&&R(J)?N+=" "+_(j)+c(J).trim()+" ":N+=c(J),J.value==="."&&ue&&(ue.type==="terminal"&&/^[^_\d,]/.test(c(ue))||ue.type==="greek")&&(N+='"'),K=L(K,{wasFraction:!1,wasRomanCommand:!1});break;case"command":if(!y(J)){var te=b(J);te&&(N+='"'),!te&&j!==""&&R(J)?N+=" "+_(j)+p(J).trim()+" ":N+=p(J),K=L(K,{wasFraction:!1,wasModifiedExpression:te,wasRomanCommand:!0})}break;case"greek":N+=g(J),K=L(K,{wasFraction:!1});break;case"fraction":var Ae=E(K,J);N+=Ae.value,B=Math.max(B,Ae.fractionLevel),K=L(K,{wasFraction:!0,wasRomanCommand:!1});break;case"radical":var Se=G(K,J);N+=Se.value,B=Math.max(B,Se.fractionLevel),K=L(K,{wasFraction:!1,wasRomanCommand:!1});break;case"level":!K.wasModifiedExpression&&K.wasRomanCommand?(A=/\s$/.test(N),A&&(N=N.replace(/\s$/,""))):A=!1;var ce=N.length>0&&/[A-Za-z]/.test(N[N.length-1])===!0,Ee=T(K,ce,A,J);N+=Ee.value,j=Ee.levelIndicator,K=L(K,{wasFraction:!1,wasRomanCommand:!1});break;case"typeform":N+=I(K,J.value).value,J.name==="operator_name"&&(N+=" "),K=L(K,{wasFraction:!1,wasModifiedExpression:!1,wasRomanCommand:!1});break}}return{fractionLevel:B,levelIndicator:j,value:N}}function E(K,Y){K=L(K,{isStartOfLine:!1});for(var N=I(K,Y.numerator),j=I(K,Y.denominator),B=Math.max(N.fractionLevel,j.fractionLevel),A="",$=0;$<B;$++)A+=",";var J=A+"?"+N.value;return N.levelIndicator!==K.levelIndicator&&(J+=_(K.levelIndicator)),/\.$/.test(N.value)&&(J+='"'),J+=A+"/"+j.value,j.levelIndicator!==K.levelIndicator&&(J+=_(K.levelIndicator)),/\.$/.test(j.value)&&(J+='"'),J+=A+"#",{fractionLevel:B+1,value:J}}function G(K,Y){for(var N=K.radicalLevel,j="",B="",A=0;A<N;A++)B+=".";if(Y.index){j+=B+"<";var $=I(L(K,{isStartOfLine:!1}),Y.index);j+=$.value,/\.$/.test($.value)&&(j+='"'),$.levelIndicator!==K.levelIndicator&&(j+=_(K.levelIndicator)),j+=">"}else j+=B+">";var J=I(L(K,{isStartOfLine:!1,radicalLevel:N+1}),Y.radicand);return j+=J.value,/\.$/.test(J.value)&&(j+='"'),J.levelIndicator!==K.levelIndicator&&(j+=_(K.levelIndicator)),j+=B+"]",{fractionLevel:J.fractionLevel,value:j}}function T(K,Y,N,j){var B=K.levelIndicator,A="",$=P(j.superscript);if(A+=$,j.subscript){K.wasModifiedExpression&&(A+="%"),B=K.levelIndicator+";";var J=I(L(K,{isStartOfLine:!1,levelIndicator:B}),j.subscript);Y&&/^[0-9]*(\.|\,)?[0-9]+$/.test(J.value)&&B.length<=1?B=K.levelIndicator:!K.wasModifiedExpression&&j.subscript[0]&&j.subscript[0].type!=="level"&&(A+=_(B)),A+=J.value,/\.$/.test(J.value)&&(A+='"')}if(j.superscript){K.wasModifiedExpression&&(A+="<"),B=K.levelIndicator+"^";var ue=I(L(K,{isStartOfLine:!1,levelIndicator:B}),j.superscript.slice($.length));!K.wasModifiedExpression&&j.superscript[0]&&j.superscript[0].type!=="level"&&ue.value!==""&&(A+=_(B)),A+=ue.value,/\.$/.test(ue.value)&&(A+='"')}return K.wasModifiedExpression?A+="]":K.wasRomanCommand&&N&&(A+=" ",B=B.slice(0,B.length-1)),{levelIndicator:B,value:A}}function P(K){var Y="";if(K)for(var N=0,j=K;N<j.length;N++){var B=j[N];if(B.type==="command"&&B.value==="\\prime")Y+="'";else break}return Y}function _(K){return K||'"'}function x(){return{isStartOfLine:!0,levelIndicator:"",radicalLevel:0,wasFraction:!1,wasModifiedExpression:!1,wasRomanCommand:!1}}function L(K,Y){return i(i({},K),Y)}function R(K){return K.type==="terminal"||K.type==="command"?/^<|>|\=|\\leq?|\\geq?|\\neq?$/.test(K.value):!1}function q(K){var Y=x();return I(Y,K).value}},function(t,e,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(N){for(var j,B=1,A=arguments.length;B<A;B++){j=arguments[B];for(var $ in j)Object.prototype.hasOwnProperty.call(j,$)&&(N[$]=j[$])}return N},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var n=r(7),o=r(11),a=r(12),s=r(0);function l(N){return s.map(a.default(N),function(j){return Y(o.default(j))})}e.default=l;var c={"!":"6","(":'"<',")":'">',"*":'"9',"+":'"6',",":"1","-":'"-',".":"4","/":"_/",":":"3","<":"@<","=":'"7',">":"@>","?":"8","[":".<","\\ ":" ","\\%":".0","\\&":"@&","\\,":" ","\\infty":"#=","\\int":"!","\\{":"_<","\\|":"_\\_\\","\\}":"_>","]":".>","|":"_\\"};function u(N,j,B){var A="",$=j.value,J=B&&B.type==="terminal"?B.value:"";return E($,N)&&(A+=";"),/^[\D]/.test($)&&(N=K(N,{wasNumber:!1})),/^[a-z]$/.test($)?N.capsLock?(N=K(N,{capsLock:!1}),A+=",'"+$.toUpperCase()):A+=$.toUpperCase():/^[A-Z]$/.test($)?N.capsLock?A+=$:/[A-Z]/.test(J)?(N=K(N,{capsLock:!0}),A+=",,"+$):A+=","+$:(N=K(N,{capsLock:!1}),/^[0-9.]$/.test($)?A+=D($):c.hasOwnProperty($)?A+=c[$]:A+="[terminal: "+$+"]"),{value:A,ctx:N}}var h={"\\Vert":"_\\_\\","\\cdot":'"4',"\\div":'"/',"\\ge":"_@>","\\geq":"_@>","\\langle":"@<","\\ldots":"444","\\le":"_@<","\\leq":"_@<","\\ne":'"7@:',"\\neq":'"7@:',"\\approx":"^9","\\parallel":"#L","\\perp":"#-","\\prime":"7","\\prod":",.P","\\rangle":"@>","\\sim":"@9","\\sum":",.S","\\times":'"8',"\\to":":O","\\vert":"_\\"},p={"\\Alpha":",.A","\\Beta":",.B","\\Chi":",.&","\\Delta":",.D","\\Epsilon":",.E","\\Eta":",.:","\\Gamma":",.G","\\Iota":",.I","\\Kappa":",.K","\\Lambda":",.L","\\Mu":",.M","\\Nu":",.N","\\Omega":",.W","\\Omicron":",.O","\\Phi":",.F","\\Pi":",.P","\\Psi":",.Y","\\Rho":",.R","\\Sigma":",.S","\\Tau":",.T","\\Theta":",.?","\\Upsilon":",.U","\\Xi":",.X","\\Zeta":",.Z","\\alpha":".A","\\beta":".B","\\chi":".&","\\delta":".D","\\epsilon":".E","\\eta":".:","\\gamma":".G","\\iota":".I","\\kappa":".K","\\lambda":".L","\\mu":".M","\\nu":".N","\\omega":".W","\\omicron":".O","\\phi":".F","\\pi":".P","\\psi":".Y","\\rho":".R","\\sigma":".S","\\tau":".T","\\theta":".?","\\upsilon":".U","\\xi":".X","\\zeta":".Z"};function g(N,j){var B;return h.hasOwnProperty(N.value)?B=h[N.value]:B=N.value.slice(1).toUpperCase()+" ",E(B,j)&&(B=";"+B),/^[\D]/.test(B)&&(j=K(j,{wasNumber:!1})),{value:B,ctx:j}}function y(N){return p.hasOwnProperty(N.value)?p[N.value]:N.value.slice(1).toUpperCase()+" "}function w(N){return N.value==="\\space"}function b(N,j){if(j<N.length){var B=N[j];if(B.type==="terminal"){if(/^\d$/.test(B.value))return!0;if(B.value!=="."||j+1>=N.length)return!1;if(B=N[j+1],B.type==="terminal")return/^\d$/.test(B.value)}}return!1}function D(N){for(var j="",B="A".charCodeAt(0)-1,A=0,$=N;A<$.length;A++){var J=$[A];J===","?j+="1":J==="."?j+="4":J==="0"?j+="J":j+=String.fromCharCode(B+Number(J))}return j}function I(N,j){for(var B,A,$="",J=!0,ue=0;ue<j.length;ue++){b(j,ue)?(N=K(N,{wasNumber:!0}),J&&($+="#",J=!1)):J=!0;var te=j[ue];switch(te.type){case"terminal":var Ae=ue<j.length-1?j[ue+1]:void 0;B=u(N,te,Ae),N=B.ctx,$+=B.value,$[$.length-1]===" "&&(J=!0);break;case"command":w(te)||(A=g(te,N),N=A.ctx,$+=A.value,$[$.length-1]===" "&&(J=!0));break;case"greek":$+=y(te),$[$.length-1]===" "&&(J=!0);break;case"fraction":var Se=G(N,te);$+=Se.value,N=Se.ctx,J=!1;break;case"radical":var ce=P(N,te);$+=ce.value,J=!0;break;case"level":var Ee=_(N,te);$+=Ee.value,N=Ee.ctx,J=!0;break;case"typeform":var H=I(N,te.value).value;$+=H,/(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?/.test(H)&&($+=" ");break}}return{ctx:N,value:$}}function E(N,j){return j.wasNumber&&/^[A-Ja-j]/.test(N)}function G(N,j){var B=I(N,j.numerator),A=I(N,j.denominator),$;return T(B.value)&&T(A.value)?(N=K(N,{wasNumber:!0}),$=B.value+"/"+A.value.slice(1)):(N=K(N,{wasNumber:!1}),$="("+B.value+"./"+A.value+")"),{ctx:N,value:$}}function T(N){return/^\#[A-J41]+$/.test(N)}function P(N,j){var B="%",A=I(N,j.radicand);if(j.index){var $=I(N,n.group(n.level({"^":j.index})));B+=$.value,/\#[A-J]$/.test($.value)&&/^[A-J]/.test(A.value)&&(B+=";")}return B+=A.value+"+",{ctx:N,value:B}}function _(N,j){var B="",A=L(j.superscript);B+=A;var $;if(j.subscript){var J=I(N,j.subscript);R(j.subscript,J.value,0)?$="<"+x(J.value)+">":$=J.value,N=K(N,{wasNumber:J.ctx.wasNumber}),$!==""&&(B+="5"+$)}if(j.superscript){var ue=I(N,j.superscript.slice(A.length));R(j.superscript,ue.value,A.length)?$="<"+x(ue.value)+">":$=ue.value,N=K(N,{wasNumber:ue.ctx.wasNumber}),(A===""||$!=="")&&(B+="9"+$)}return{ctx:N,value:B}}function x(N){return/^;/.test(N)?N.slice(1):N}function L(N){var j="";if(N)for(var B=0,A=N;B<A.length;B++){var $=A[B];if($.type==="command"&&$.value==="\\prime")j+="7";else break}return j}function R(N,j,B){var A=N[0],$=(j.match(/\</g)||[]).length,J=/^["|\.|_]?\</.test(j),ue=(j.match(/\>/g)||[]).length,te=/["|\.|_]?\>$/.test(j);return!T(j)&&N.length-B>1&&$===0&&ue===0||$>0&&ue>0&&(!J||!te)||$>1||ue>1||A&&A.type==="typeform"}function q(){return{capsLock:!1,wasNumber:!1}}function K(N,j){return i(i({},N),j)}function Y(N){var j=q();return I(j,N).value}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),n=r(18),o=r(0);function a(E,G){for(var T="",P=G,_="",x=!1,L="",R="",q=h(E),K=0;K<E.length;K++){var Y=E[K],N=K+1<E.length?E[K+1]:null;switch(Y.type){case"terminal":var j=i.getAutoOperator(E.slice(K));j.value!==""?(T+=j.value,K+=j.terminalCount-1,x=x||j.modified):Y.value===" "?(x?(_=L,T+=b(P,_),P=_):T+="\\ ",x=!1):(q[K]===s?T+="\\left":q[K]===l&&(T+="\\right"),T+=Y.value);break;case"comparison":_="",T+=b(P,_),P=_,x=!1,T+=Y.value;break;case"level_with_comparison":T+=b(P,Y.level),P=Y.level,x=!1,T+=Y.value;break;case"command":var B=Y.value.slice(1).trim();N&&N.type==="terminal"&&/[a-z]/.test(N.value)?(T+=B,x=!1):i.containsValue(B)?(T+="\\operatorname{"+B+"}",x=!0):(T+=Y.value,x=!0),L=P;break;case"expression":T+=Y.value;break;case"fraction":T+=w(Y.numerator,Y.denominator,P);break;case"modified_expression":T+=a(Y.expression,P)+" ",Y.under&&(T+="_{"+a(Y.under,P)+"}"),Y.over&&(T+="^{"+a(Y.over,P)+"}");break;case"radical":T+="\\sqrt",Y.index&&(T+="["+a(Y.index,P)+"]"),T+="{"+a(Y.value,P)+"}";break;case"simple_subscript":P===""?(T+=Y.base.value+"_{"+Y.subscript.value+"}",Y.base.type==="command"&&(x=!0,L=P)):T+=Y.base.value+Y.subscript.value;break;case"level":T+=b(P,Y.value,R),P=Y.value,Y.value==="^"&&R!==""&&(R="");break;case"primes":N&&N.type==="level"&&N.value===";"?R=Y.value:P!==""?(T+=Array(Y.value.length+1).join("\\prime "),R=""):(T+=Y.value,R="");break}}return T+=b(P,G)+R,T.replace(/([^\\])( )$/,"$1")}var s=1,l=-1,c=0,u=2;function h(E){for(var G=[],T=[],P=0;P<E.length;P++){var _=E[P];if(p(_))G.push({direction:s,index:P}),T.push(c);else if(g(_)){for(;G.length&&G[G.length-1].direction===u;)G.pop();if(G.length){var x=G.pop();if(x){var L=x.index;T[L]=s,T.push(l)}}else T.push(c)}else if(y(_))if(G.length&&G[G.length-1].direction===u){var x=G.pop();if(x){var L=x.index;T[L]=s,T.push(l)}}else G.push({direction:u,index:P}),T.push(c);else T.push(c)}return T}function p(E){return E.type==="terminal"?/^(\\langle |\[|\(|\\{)$/.test(E.value):!1}function g(E){return E.type==="terminal"?/^(\\rangle |\]|\)|\\})$/.test(E.value):!1}function y(E){return E.type==="terminal"?/^(\\\||\|)$/.test(E.value):!1}function w(E,G,T){return"\\frac{"+a(E,T)+"}{"+a(G,T)+"}"}function b(E,G,T){var P="",_,x,L,R=Math.max(E.length,G.length);for(_=0;_<R&&E[_]===G[_];_++);for(x=E.length-1;x>=_;x--)P+="}";for(L=_;L<G.length;L++)G[L]==="^"&&(T&&(P+=T),P+="^{"),G[L]===";"&&(P+="_{");return P}function D(E){return a(E,"")}function I(E,G){return G&&G.operatorNames?i.setOperatorNames(G.operatorNames):i.resetOperatorNames(),o.map(n.default(E,G),D)}e.default=I},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function i(E){return{type:"terminal",value:E}}e.terminal=i;function n(E){return{type:"command",value:"\\"+E.trim()+" "}}e.command=n;var o={'"K':"<",'"K:':"\\leq ",$L:"\\parallel ",$O:"\\to ",$P:"\\perp ",".1":">",".1:":"\\geq ",".K":"=","@:@:":"\\approx","/$L":"\\nparallel ","/.K":"\\neq ","=":"=","@:":"\\sim "};function a(E){var G=/[\^;]+/.exec(E),T=G?G.toString():"",P=E.slice(l.length);return{type:"level_with_comparison",level:T,value:o[P]}}e.level_with_comparison=a;function s(E){return{type:"comparison",value:o[E]}}e.comparison=s;function l(E){return{type:"level",value:E}}e.level=l;function c(){return l("")}e.baseline=c;function u(E){return{type:"primes",value:E}}e.primes=u;function h(E,G){return{type:"fraction",numerator:E,denominator:G}}e.fraction=h;function p(E,G,T){return{type:"modified_expression",expression:E,under:G,over:T}}e.modified_expression=p;function g(E,G){return{type:"radical",value:E,index:G}}e.radical=g;function y(E){return{type:"expression",value:E}}e.expression=y;function w(E,G){return{type:"simple_subscript",base:E,subscript:G}}e.simple_subscript=w;var b={".&":"\\chi",".,&":"\\Chi",".,:":"\\Eta",".,?":"\\Theta",".,A":"\\Alpha",".,B":"\\Beta",".,D":"\\Delta",".,E":"\\Epsilon",".,F":"\\Phi",".,G":"\\Gamma",".,I":"\\Iota",".,K":"\\Kappa",".,L":"\\Lambda",".,M":"\\Mu",".,N":"\\Nu",".,O":"\\Omicron",".,P":"\\prod",".,R":"\\Rho",".,S":"\\sum",".,T":"\\Tau",".,U":"\\Upsilon",".,W":"\\Omega",".,X":"\\Xi",".,Y":"\\Psi",".,Z":"\\Zeta",".:":"\\eta",".?":"\\theta",".A":"\\alpha",".B":"\\beta",".D":"\\delta",".E":"\\epsilon",".F":"\\phi",".G":"\\gamma",".I":"\\iota",".K":"\\kappa",".L":"\\lambda",".M":"\\mu",".N":"\\nu",".O":"\\omicron",".P":"\\pi",".R":"\\rho",".S":"\\sigma",".T":"\\tau",".U":"\\upsilon",".W":"\\omega",".X":"\\xi",".Y":"\\psi",".Z":"\\zeta"};function D(E){if(b.hasOwnProperty(E))return b[E]+" ";throw new Error("Unknown Greek letter")}e.greek=D;function I(){for(var E=[],G=0;G<arguments.length;G++)E[G]=arguments[G];return Array.prototype.concat.apply([],E)}e.group=I},function(t,e,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(c){for(var u,h=1,p=arguments.length;h<p;h++){u=arguments[h];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(c[g]=u[g])}return c},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var n=r(6),o=r(9),a=r(17),s=r(20);function l(c,u){u||(u={});var h=o.parser,p=Object.create(h);p.yy=a,p.yy.warnOrError=function(y){p.parseError(y,{recoverable:!1})};var g=Object.create(h);g.yy=i({warnings:[]},a),g.yy.warnOrError=function(y){g.yy.warnings.push(y)},g.lexer=s.default,u.strict?h=p:h=g;try{return{isError:!1,value:h.parse(c),warnings:h.yy.warnings||[]}}catch(y){return{error:n.default(y),isError:!0}}}e.default=l},function(t,e,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(c){for(var u,h=1,p=arguments.length;h<p;h++){u=arguments[h];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(c[g]=u[g])}return c},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var n=r(6),o=r(21),a=r(10),s=r(24);function l(c,u){u||(u={});var h=a.parser,p=Object.create(h);p.yy=s;var g=Object.create(h);g.yy=i({warnings:[]},s),g.lexer=o.default,u.strict?h=p:h=g;try{return{isError:!1,value:h.parse(c),warnings:h.yy.warnings||[]}}catch(y){return{error:n.default(y),isError:!0}}}e.default=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(9),n=i.parser.lexer,o=Object.create(n);e.default=o;var a=i.parser.terminals_,s=i.parser.symbols_;o.setInput=function(l,c){this.delimiterStack=[],this.outputQueue=[],this.canAcceptPrimes=!1,n.setInput.call(this,l,c)},o.lex=function(){var l=-1;if(!this)return l;if(this.outputQueue.length)return this.outputQueue.shift();for(var c=n.lex.call(this);a[c]==="UNKNOWN"||!this.canAcceptPrimes&&a[c]==="PRIMES";)this.warn(),c=n.lex.call(this);this.canAcceptPrimes=!0;var u,h,p=this.delimiterStack?this.delimiterStack[this.delimiterStack.length-1]:-1;switch(a[c]){case"OPEN_FRAC":case"OPEN_MODEXP":this.delimiterStack.push(c),this.canAcceptPrimes=!1;break;case"RADICAL_INDEX":p===s.RADICAL_INDEX&&(this.delimiterStack.pop(),this.pushCloseTokens(p)),this.delimiterStack.push(c),this.canAcceptPrimes=!1;break;case"OPEN_RADICAL":p===s.RADICAL_INDEX&&this.delimiterStack.pop(),this.delimiterStack.push(c),this.canAcceptPrimes=!1;break;case"SLASH":for(u=!1;this.delimiterStack.length;)if(h=this.delimiterStack.pop()||-1,h===s.OPEN_FRAC){u=!0;break}else this.pushCloseTokens(h);u||this.pushOpenTokens(c),this.delimiterStack.push(c),this.canAcceptPrimes=!1;break;case"CLOSE_FRAC":for(u=!1;this.delimiterStack.length;)if(h=this.delimiterStack.pop()||-1,h===s.SLASH){u=!0;break}else if(h===s.OPEN_FRAC){this.addMissingToken(s.SLASH),u=!0;break}else this.pushCloseTokens(h);if(!u)return this.warn(),this.canAcceptPrimes=!1,this.lex();break;case"CLOSE_RADICAL":for(u=!1;this.delimiterStack.length;)if(h=this.delimiterStack.pop()||-1,h===s.OPEN_RADICAL){u=!0;break}else if(h===s.RADICAL_INDEX){u=!0,this.addMissingToken(s.OPEN_RADICAL);break}else this.pushCloseTokens(h);u||this.pushOpenTokens(c);break;case"CLOSE_MODEXP":for(u=!1;this.delimiterStack.length;)if(h=this.delimiterStack.pop()||-1,h===s.OPEN_MODEXP){u=!0;break}else this.pushCloseTokens(h);u||this.pushOpenTokens(c);break;case"EOF":for(;this.delimiterStack.length;)h=this.delimiterStack.pop()||-1,this.pushCloseTokens(h);break}return this.outputQueue.push(c),l=this.outputQueue.shift()||-1,l},o.warn=function(){this.yylloc&&this.yy.warnings.push({location:this.yylloc})},o.addMissingToken=function(l){this.outputQueue.push(l),this.warn()},o.pushCloseTokens=function(l){switch(a[l]){case"OPEN_FRAC":this.addMissingToken(s.SLASH),this.addMissingToken(s.CLOSE_FRAC);break;case"SLASH":this.addMissingToken(s.CLOSE_FRAC);break;case"RADICAL_INDEX":this.addMissingToken(s.OPEN_RADICAL),this.addMissingToken(s.CLOSE_RADICAL);break;case"OPEN_RADICAL":this.addMissingToken(s.CLOSE_RADICAL);break;case"OPEN_MODEXP":this.addMissingToken(s.CLOSE_MODEXP);break}},o.pushOpenTokens=function(l){switch(a[l]){case"SLASH":this.addMissingToken(s.OPEN_FRAC);break;case"CLOSE_FRAC":this.addMissingToken(s.OPEN_FRAC),this.addMissingToken(s.SLASH);break;case"CLOSE_RADICAL":this.addMissingToken(s.OPEN_RADICAL);break;case"CLOSE_MODEXP":this.addMissingToken(s.OPEN_MODEXP);break}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(10),n=i.parser.lexer,o=Object.create(n);e.default=o;var a=i.parser.terminals_,s=i.parser.symbols_;o.setInput=function(l,c){this.delimiterStack=[],this.outputQueue=[],n.setInput.call(this,l,c)},o.lex=function(){var l=-1;if(this.outputQueue.length)return this.outputQueue.shift();for(var c=n.lex.call(this);a[c]==="UNKNOWN";)this.warn(),c=n.lex.call(this);var u,h,p=this.delimiterStack?this.delimiterStack[this.delimiterStack.length-1]:-1;switch(a[c]){case"OPEN_FRAC":this.delimiterStack.push(c);break;case"OPEN_GROUP":this.delimiterStack.push(c);break;case"RADICAL_WITH_INDEX":p===s.RADICAL_WITH_INDEX&&(this.delimiterStack.pop(),this.pushCloseTokens(p)),this.delimiterStack.push(c);break;case"RADICAL":p===s.RADICAL_WITH_INDEX&&this.delimiterStack.pop(),this.delimiterStack.push(c);break;case"OVER":for(u=!1;this.delimiterStack.length;)if(h=this.delimiterStack.pop()||-1,h===s.OPEN_FRAC){u=!0;break}else this.pushCloseTokens(h);u||this.pushOpenTokens(c),this.delimiterStack.push(c);break;case"CLOSE_FRAC":for(u=!1;this.delimiterStack.length;)if(h=this.delimiterStack.pop()||-1,h===s.OVER){u=!0;break}else if(h===s.OPEN_FRAC){this.outputQueue.push(s.OVER),u=!0;break}else this.pushCloseTokens(h);u||this.pushOpenTokens(c);break;case"CLOSE_GROUP":for(u=!1;this.delimiterStack.length;)if(h=this.delimiterStack.pop()||-1,h===s.OPEN_GROUP){u=!0;break}else this.pushCloseTokens(h);u||this.pushOpenTokens(c);break;case"CLOSE_RADICAL":for(u=!1;this.delimiterStack.length;)if(h=this.delimiterStack.pop()||-1,h===s.RADICAL||h===s.RADICAL_WITH_INDEX){u=!0;break}else this.pushCloseTokens(h);u||this.pushOpenTokens(c);break;case"EOF":for(;this.delimiterStack.length;)h=this.delimiterStack.pop()||-1,this.pushCloseTokens(h);break}return this.outputQueue.push(c),l=this.outputQueue.shift()||-1,l},o.warn=function(){this.yylloc&&this.yy.warnings.push({location:this.yylloc})},o.addMissingToken=function(l){this.outputQueue.push(l),this.warn()},o.pushCloseTokens=function(l){switch(a[l]){case"OPEN_FRAC":this.addMissingToken(s.OVER),this.addMissingToken(s.CLOSE_FRAC);break;case"OVER":this.addMissingToken(s.CLOSE_FRAC);break;case"OPEN_GROUP":this.addMissingToken(s.CLOSE_GROUP);break;case"RADICAL_WITH_INDEX":case"RADICAL":this.addMissingToken(s.CLOSE_RADICAL);break}},o.pushOpenTokens=function(l){switch(a[l]){case"OVER":this.addMissingToken(s.OPEN_FRAC);break;case"CLOSE_FRAC":this.addMissingToken(s.OPEN_FRAC),this.addMissingToken(s.OVER);break;case"CLOSE_GROUP":this.addMissingToken(s.OPEN_GROUP);break;case"CLOSE_RADICAL":this.addMissingToken(s.RADICAL);break}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function i(a){return a.isError}e.isErr=i;function n(a){return!a.isError}e.isOk=n;function o(a,s){return i(a)?a:{isError:!1,value:s(a.value)}}e.map=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),n=r(19),o=r(0);function a(G,T){for(var P="",_=!1,x="",L=h(G),R=0;R<G.length;R++){var q=G[R],K=R+1<G.length?G[R+1]:null;switch(q.type){case"terminal":var Y=i.getAutoOperator(G.slice(R));Y.value!==""?(P+=Y.value,R+=Y.terminalCount-1):q.value===" "&&!_?P+="\\ ":(L[R]===s?P+="\\left":L[R]===l&&(P+="\\right"),P+=q.value),_=!1;break;case"command":var N=q.value.slice(1).trim();K&&K.type==="terminal"&&/[a-z]/.test(K.value)?(P+=N,_=!1):i.containsValue(N)?(P+="\\operatorname{"+N+"}",_=!0):(P+=q.value,_=!0);break;case"expression":P+=q.value;break;case"fraction":P+=w(q.numerator,q.denominator);break;case"radical":P+="\\sqrt",q.index&&(P+="["+a(q.index)+"]"),P+="{"+a(q.value)+"}";break;case"basic_level":P+=b(q.level,q.value,x),q.level==="9"&&(x="");break;case"bracketed_level":P+=D(q.level,q.lbrack,q.value,q.rbrack,x),q.level==="9"&&(x="");break;case"primes":K&&(K.type==="basic_level"||K.type==="bracketed_level")&&K.level==="5"?x=q.value:T&&T!==""?(P+=Array(q.value.length+1).join("\\prime "),x=""):(P+=q.value,x="");break}}return P+=x,P.replace(/([^\\])( )$/,"$1")}var s=1,l=-1,c=0,u=2;function h(G){for(var T=[],P=[],_=0;_<G.length;_++){var x=G[_];if(p(x))T.push({direction:s,index:_}),P.push(c);else if(g(x)){for(;T.length&&T[T.length-1].direction===u;)T.pop();if(T.length){var L=T.pop();if(L){var R=L.index;P[R]=s,P.push(l)}}else P.push(c)}else if(y(x))if(T.length&&T[T.length-1].direction===u){var L=T.pop();if(L){var R=L.index;P[R]=s,P.push(l)}}else T.push({direction:u,index:_}),P.push(c);else P.push(c)}return P}function p(G){return G.type==="terminal"?/^(\\langle |\[|\(|\\{)$/.test(G.value):!1}function g(G){return G.type==="terminal"?/^(\\rangle |\]|\)|\\})$/.test(G.value):!1}function y(G){return G.type==="terminal"?/^(\\\||\|)$/.test(G.value):!1}function w(G,T){return"\\frac{"+a(G)+"}{"+a(T)+"}"}function b(G,T,P){var _="",x="{"+a(T,G)+"}";return G==="9"?_+=P+"^"+x:G==="5"&&(_+="_"+x),_}function D(G,T,P,_,x){var L="",R="{"+T+a(P,G)+_+"}";return G==="9"?L+=x+"^"+R:G==="5"&&(L+="_"+R),L}var I=a;function E(G,T){return T&&T.operatorNames?i.setOperatorNames(T.operatorNames):i.resetOperatorNames(),o.map(n.default(G,T),function(P){return I(P,"")})}e.default=E},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function i(w){return{type:"terminal",value:w}}e.terminal=i;function n(w){return{type:"command",value:w}}e.command=n;function o(w,b){return{type:"basic_level",level:w,value:b}}e.basic_level=o;function a(w,b,D,I){return{type:"bracketed_level",level:w,lbrack:b,value:D,rbrack:I}}e.bracketed_level=a;function s(w){var b=w.length>0?Array(w.length+1).join("'"):"";return{type:"primes",value:b}}e.primes=s;function l(w,b){return{type:"fraction",numerator:w,denominator:b}}e.fraction=l;function c(w,b){return{type:"radical",value:w,index:b}}e.radical=c;function u(w){return{type:"expression",value:w}}e.expression=u;function h(){for(var w=[],b=0;b<arguments.length;b++)w[b]=arguments[b];return Array.prototype.concat.apply([],w)}e.group=h;var p={",.&":"\\Chi",",.:":"\\Eta",",.?":"\\Theta",",.A":"\\Alpha",",.B":"\\Beta",",.D":"\\Delta",",.E":"\\Epsilon",",.F":"\\Phi",",.G":"\\Gamma",",.I":"\\Iota",",.K":"\\Kappa",",.L":"\\Lambda",",.M":"\\Mu",",.N":"\\Nu",",.O":"\\Omicron",",.P":"\\prod",",.R":"\\Rho",",.S":"\\sum",",.T":"\\Tau",",.U":"\\Upsilon",",.W":"\\Omega",",.X":"\\Xi",",.Y":"\\Psi",",.Z":"\\Zeta",".&":"\\chi",".:":"\\eta",".?":"\\theta",".A":"\\alpha",".B":"\\beta",".D":"\\delta",".E":"\\epsilon",".F":"\\phi",".G":"\\gamma",".I":"\\iota",".K":"\\kappa",".L":"\\lambda",".M":"\\mu",".N":"\\nu",".O":"\\omicron",".P":"\\pi",".R":"\\rho",".S":"\\sigma",".T":"\\tau",".U":"\\upsilon",".W":"\\omega",".X":"\\xi",".Y":"\\psi",".Z":"\\zeta"};function g(w){if(p.hasOwnProperty(w))return p[w]+" ";throw new Error("Unknown Greek letter")}e.greek=g;function y(w){for(var b="",D="A".charCodeAt(0)-1,I=0,E=w;I<E.length;I++){var G=E[I];G==="4"?b+=".":G==="J"?b+="0":b+=G.charCodeAt(0)-D}return b}e.to_number=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=` A1B'K2L@CIF/MSP"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=`,n=10240;function o(y){return String.fromCharCode(n+y)}function a(y){return y.charCodeAt(0)-n}function s(y){return i[y]}function l(y){return i.indexOf(y)}function c(y){for(var w="",b=0,D=y;b<D.length;b++){var I=D[b];w+=o(l(I))}return w}function u(y){for(var w="",b=0,D=y;b<D.length;b++){var I=D[b];w+=s(a(I))}return w}e.toBrailleAscii=u;function h(y){return u(y).replace(/[@-^]/g,function(w){return String.fromCharCode(w.charCodeAt(0)+32)})}e.toExpandedBrailleAscii=h;function p(y){var w="";if(y)for(var b=0,D=y;b<D.length;b++){var I=D[b],E=I.charCodeAt(0);96<=E&&E<=127&&(E-=32,I=String.fromCharCode(E)),32<=E&&E<=95&&(I=c(I),E=I.charCodeAt(0)),10305<=E&&E<=10495&&(E=10240+(E-1024)%64,I=String.fromCharCode(E)),10240<=E&&E<=10304?w+=I:w+=String.fromCharCode(10240)}return w}e.coerceToSixDotCells=p;function g(y){for(var w=0;w<y.length;w++){var b=y.charCodeAt(w);if(b<10240||b>10304)return!1}return!0}e.isSixDotCells=g},function(t,e,r){r(3),t.exports=r(3)}])})});var EO=__dcg_shared_module_exports__['g']((lpe,SO)=>{SO.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}});var kO=__dcg_shared_module_exports__['g']((cpe,DO)=>{var XU=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,QU=EO();DO.exports=function(t){var e=0,r,i=!0,n={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return t.replace(XU,function(o){if(o==="="){i=!0,e++;return}i?e===0?((QU[o]||t.charAt(t.length-2)==="/")&&(n.voidElement=!0),n.name=o):(n.attrs[r]=o.replace(/^['"]|['"]$/g,""),r=void 0):(r&&(n.attrs[r]=r),r=o),e++,i=!1}),n}});var MO=__dcg_shared_module_exports__['g']((dpe,IO)=>{var ZU=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,e8=kO(),t8=Object.create?Object.create(null):{};function fk(t,e,r,i,n){var o=e.indexOf("<",i),a=e.slice(i,o===-1?void 0:o);/^\s*$/.test(a)&&(a=" "),(!n&&o>-1&&r+t.length>=0||a!==" ")&&t.push({type:"text",content:a})}IO.exports=function(e,r){r||(r={}),r.components||(r.components=t8);var i=[],n,o=-1,a=[],s={},l=!1;return e.replace(ZU,function(c,u){if(l){if(c!=="</"+n.name+">")return;l=!1}var h=c.charAt(1)!=="/",p=c.indexOf("<!--")===0,g=u+c.length,y=e.charAt(g),w;h&&!p&&(o++,n=e8(c),n.type==="tag"&&r.components[n.name]&&(n.type="component",l=!0),!n.voidElement&&!l&&y&&y!=="<"&&fk(n.children,e,o,g,r.ignoreWhitespace),s[n.tagName]=n,o===0&&i.push(n),w=a[o-1],w&&w.children.push(n),a[o]=n),(p||!h||n.voidElement)&&(p||o--,!l&&y!=="<"&&y&&(w=o===-1?i:a[o].children,fk(w,e,o,g,r.ignoreWhitespace)))}),!i.length&&e.length&&fk(i,e,0,0,r.ignoreWhitespace),i}});var AO=__dcg_shared_module_exports__['g']((upe,GO)=>{function r8(t){var e=[];for(var r in t)e.push(r+'="'+t[r]+'"');return e.length?" "+e.join(" "):""}function TO(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?r8(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(TO,"")+"</"+e.name+">"}}GO.exports=function(t){return t.reduce(function(e,r){return e+TO("",r)},"")}});var LO=__dcg_shared_module_exports__['g']((ppe,VO)=>{VO.exports={parse:MO(),stringify:AO()}});var SM;function Z_(t){SM=t(__dcg_shared_module_exports__['d'])}Z_(function(t){function e(){window.consoleOverride=!0;var i=window.console.log;window.console.log=function(){for(var n=[],o=0;o<arguments.length;o++)n.push(arguments[o]);i.apply(window.console,[].concat([n.join(" ")],n))}}var r={ready:function(){try{window.TestBridge=r,parent.USING_SELENIUM&&e()}catch(i){}}};return r});var{ready:EM}=SM;at();HC();var Vr={};__dcg_shared_module_exports__['h'](Vr,{ALT:()=>n2,BACKSPACE:()=>oa,CAPSLOCK:()=>o2,CONTROL:()=>i2,DELETE:()=>nd,DOWN:()=>zn,END:()=>bu,ENTER:()=>Ks,ESCAPE:()=>oo,HOME:()=>xu,LEFT:()=>gc,PAGEDOWN:()=>yu,PAGEUP:()=>mu,RIGHT:()=>fc,SHIFT:()=>Xh,SPACEBAR:()=>Qh,TAB:()=>Bs,UP:()=>Rn,default:()=>Ns,isBacktick:()=>t2,isHelp:()=>r2,isRedo:()=>Jh,isSelectAll:()=>e2,isUndo:()=>Yh,lookup:()=>Le,lookupChar:()=>vi});at();var fT=function(){{var t={IS_IE8:navigator.userAgent.match(/MSIE 8.0/i)!==null,IS_IE9:navigator.userAgent.match(/MSIE 9.0/i)!==null,IS_IE:navigator.userAgent.match(/MSIE/i)!==null||navigator.userAgent.match(/Trident/i)!==null&&navigator.userAgent.match(/rv:11/i)!==null,IS_EDGE:navigator.userAgent.match(/Edge/i)!==null,IS_IPAD:navigator.userAgent.match(/iPad/i)!==null,IS_MOBILE:navigator.userAgent.match(/Mobile|Android/i)!==null,IS_ANDROID:navigator.userAgent.match(/Android/i)!==null,IS_IOS:navigator.userAgent.match(/(iPad|iPhone|iPod)/i)!==null||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,IS_CHROME:navigator.userAgent.match(/Chrome/i)!==null,IS_FIREFOX:navigator.userAgent.match(/Firefox/i)!==null,IS_SAFARI:navigator.userAgent.match(/^((?!chrome|android).)*safari/i)!==null,IS_APPLE:navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)!==null,IS_WINDOWS:navigator.platform.match(/(Win32)/i)!==null,IS_TOUCH:navigator.userAgent.match(/Touch/i)!==null,IS_KINDLE:navigator.userAgent.match(/Kindle/i)!==null||navigator.userAgent.match(/Silk/i)!==null,IS_BRAILLENOTE:navigator.userAgent.match(/KeyWeb/i)!==null,IS_IN_IFRAME:window.parent!==window};return t.IS_TABLET=t.IS_IPAD||t.IS_ANDROID||t.IS_KINDLE,t.IS_TOUCH_DEVICE=t.SHOULD_NOT_AUTOFOCUS=t.IS_IOS||t.IS_ANDROID||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i),t.IOS_VERSION=function(){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return e?[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]:null}(),t.MAC_VERSION=function(){var e=navigator.appVersion.match(/OS X (\d+)_(\d+)_?(\d+)?/);return e?[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]:null}(),t.CHROME_VERSION=function(){var e=navigator.appVersion.match(/Chrom(e|ium)\/([0-9]+)\.([0-9]+)\.?([0-9]+)?/);return e?[parseInt(e[2],10),parseInt(e[3],10),parseInt(e[4]||0,10)]:null}(),t.SUPPORTS_INPUTMODE=function(){var e="inputMode"in document.createElement("textarea");return!(!e||t.IS_IOS&&t.IOS_VERSION&&t.IOS_VERSION[0]<15)}(),t.SUPPORTS_TRANSLATE3D=!1,V(document).ready(function(){var e=document.createElement("p"),r,i,n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(e,null);for(var o in n)if(e.style[o]!==void 0){if(e.style[o]="translate3d(1px,1px,1px)",i=window.getComputedStyle(e),!i)return;r=i.getPropertyValue(n[o])}document.body.removeChild(e),t.SUPPORTS_TRANSLATE3D=r!==void 0&&r.length>0&&r!=="none"}),t.translateRule=function(e,r){return t.SUPPORTS_TRANSLATE3D?"translate3d("+e+(e?"px":"")+","+r+(r?"px":"")+",0)":"translate("+e+(e?"px":"")+","+r+(r?"px":"")+")"},t.SUPPORTS_CANVAS=function(){var e=document.createElement("canvas"),r=!!(e.getContext&&e.getContext("2d"));return r}(),t}}(),mT=fT,{SHOULD_NOT_AUTOFOCUS:j6,IS_TOUCH_DEVICE:yT,IS_SAFARI:bT,IS_APPLE:gi,IS_IOS:fu,IS_ANDROID:Jy,IS_IPAD:Ja,IS_IN_IFRAME:El,IOS_VERSION:jh,MAC_VERSION:Y6,CHROME_VERSION:J6,IS_IE:xT,IS_EDGE:X6,IS_CHROME:Q6,IS_FIREFOX:Z6,IS_MOBILE:Xy,IS_WINDOWS:wT,IS_TOUCH:vT,SUPPORTS_INPUTMODE:Qy,translateRule:CT}=fT;var ST=function(){{var t=function(){for(var e={8:this.BACKSPACE="Backspace",9:this.TAB="Tab",13:this.ENTER="Enter",16:this.SHIFT="Shift",17:this.CONTROL="Control",18:this.ALT="Alt",20:this.CAPSLOCK="CapsLock",27:this.ESCAPE="Esc",32:this.SPACEBAR="Space",33:this.PAGEUP="PageUp",34:this.PAGEDOWN="PageDown",35:this.END="End",36:this.HOME="Home",37:this.LEFT="Left",38:this.UP="Up",39:this.RIGHT="Right",40:this.DOWN="Down",46:this.DELETE="Del"},r={Backspace:this.BACKSPACE,Tab:this.TAB,Enter:this.ENTER,Shift:this.SHIFT,Control:this.CONTROL,Alt:this.ALT,CapsLock:this.CAPSLOCK,Escape:this.ESCAPE," ":this.SPACEBAR,PageUp:this.PAGEUP,PageDown:this.PAGEDOWN,End:this.END,Home:this.HOME,ArrowLeft:this.LEFT,ArrowUp:this.UP,ArrowRight:this.RIGHT,ArrowDown:this.DOWN,Delete:this.DELETE},i={UIKeyInputUpArrow:this.UP,UIKeyInputDownArrow:this.DOWN,UIKeyInputLeftArrow:this.LEFT,UIKeyInputRightArrow:this.RIGHT,UIKeyInputEscape:this.ESCAPE,UIKeyInputPageUp:this.PAGEUP,UIKeyInputPageDown:this.PAGEDOWN},n=["0123456789abcdefghijklmnopqrstuvwxyz","\xBA\xA1\u2122\xA3\xA2\u221E\xA7\xB6\u2022\xAA\xE5\u222B\xE7\u2202 \u0192\xA9\u02D9 \u2206\u02DA\xAC\xB5 \xF8\u03C0\u0153\xAE\xDF\u2020 \u221A\u2211\u2248\xA5\u03A9","\u201A\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB0\xB7\xC5\u0131\xC7\xCE\xB4\xCF\u02DD\xD3\u02C6\xD4\uF8FF\xD2\xC2\u02DC\xD8\u220F\u0152\u2030\xCD\u02C7\xA8\u25CA\u201E\u02DB\xC1\xB8"].map(function(p){return p.split("")}),o=n[0],a=n[1],s=n[2],l={},c={},u=0;u<o.length;u++){var h=o[u];a[u]!==" "&&(l[a[u]]=h.toUpperCase()),s[u]!==" "&&(c[s[u]]=h.toUpperCase())}this.isUndo=function(p){return!p.altKey&&!p.shiftKey&&(p.ctrlKey||p.metaKey)&&(p.key=="z"||p.which==90)},this.isRedo=function(p){return!p.altKey&&(p.ctrlKey||p.metaKey)&&(p.key==="y"||p.which==89||p.shiftKey&&(p.key==="Z"||p.key==="z"||p.which===90))},this.isSelectAll=function(p){return!p.altKey&&(p.ctrlKey||p.metaKey)&&(p.key==="a"||p.key==="A"||p.which==65)},this.isBacktick=function(p){return!p.altKey&&!p.ctrlKey&&!p.metaKey&&!p.shiftKey&&(p.key==="`"||p.which==192)},this.isHelp=function(p){return!p.altKey&&(p.ctrlKey||p.metaKey)&&(p.key==="/"||p.which==191)},this.lookup=function(p){return r[p.key]||e[p.which]||i[p.key]},this.lookupChar=function(p){if(!p.key)return String.fromCharCode(p.which);if(mT.IS_APPLE&&p.altKey){var g=p.shiftKey?c:l;if(g[p.key])return g[p.key]}if(p.key.length===1)return p.key.toUpperCase();if(p.key==="Enter")return String.fromCharCode(13);if(p.key==="Tab")return String.fromCharCode(9)}};return new t}}(),Ns=ST,{isUndo:Yh,isRedo:Jh,isSelectAll:e2,isBacktick:t2,isHelp:r2,BACKSPACE:oa,TAB:Bs,ENTER:Ks,SHIFT:Xh,CONTROL:i2,ALT:n2,CAPSLOCK:o2,ESCAPE:oo,SPACEBAR:Qh,PAGEUP:mu,PAGEDOWN:yu,END:bu,HOME:xu,LEFT:gc,UP:Rn,RIGHT:fc,DOWN:zn,DELETE:nd,lookup:Le,lookupChar:vi}=ST;var a2=function(){{let ce=function(H,he){H.trim().split(/\s+/).forEach(function(De){var _e=Se?{passive:!1}:void 0;document.addEventListener(De,function(Me){n("document.on:"+Me.type),he(V.event.fix(Me))},_e)})},Ee=function(H){var he=!!V(H).closest(".dcg-do-not-blur").length,De=!!V(H).closest(".dcg-do-blur").length;return!!(he&&!De&&L(H))};var t=document.location.href.indexOf("dcgDebugTouchTracking=dcgYES")!==-1,e,r;window._touchtracking_id_counter==null&&(window._touchtracking_id_counter=0),window._touchtracking_id_counter+=1;var i="touchtracking_id_"+window._touchtracking_id_counter,n=function(H){r&&(r[0].value="("+Date.now()+") "+H+`
`+r[0].value)},o=function(H){V(H).addClass("dcg-tap-container"),V(H).addClass(i),t&&(e&&e.remove(),e=V('<div style="position:absolute;bottom:10px;right:10px;"><textarea rows="30" cols="40"></textarea><div id="dcg-touchtracking-debug-copy" class="dcg-btn-blue">COPY LOGS</div></div>'),r=e.find("textarea"),V(H).append(e),V("#dcg-touchtracking-debug-copy")[0].addEventListener("mousedown",function(){r[0].select(),document.execCommand("copy")},!0),n("monitor touches"))},a=function(H){V(H).addClass("dcg-no-touchtracking")};qC.evtInScope=function(H){return L(H.target)},qC.isGhostEvent=function(H){return window.PointerEvent||p!==l&&p!==h&&!K()||H.target===I||H.target&&V.contains(H.target,I)||I&&V.contains(I,H.target)?!1:(n("found ghost event"),!0)};var s=0,l=1,c=2,u=3,h=4,p=s,g={},y={},w=[],b=0,D=null,I=null,E=null,G=[],T=function(H){for(var he=[];H;)he.push(H),H=H.parentNode;return he},P=function(H){for(var he=[],De=0;De<H.length;De++){var _e=H[De];if(he.push(_e),V(_e).is(".dcg-tap-container, .dcg-no-touchtracking"))return V(_e).is(".dcg-tap-container."+i)?he:[]}return[]},_=function(H,he){I=null,p=H,n("beginMode:"+p),p===l?w=T(he.originalEvent.touches[0].target):w=T(he.target),V(P(w)).addClass("dcg-depressed").each(function(){var De=V(this);R(De)&&De.addClass("dcg-focus-by-tap")}),V(w).each(function(){var De=V(this);De.data({originalScrollTop:De.scrollTop(),originalScrollLeft:De.scrollLeft()})}),y={}},x=function(H){return H.is('input, textarea, select, [role="textbox"]')||H.hasClass("dcg-mathquill-input-span")||H.is("[contenteditable=true]")},L=function(H){return!!V(H).closest(".dcg-tap-container, .dcg-no-touchtracking").is(".dcg-tap-container."+i)},R=function(H){return p!==u&&!x(H)&&L(H)},q=function(H,he){I=null;var De=!1;n("endMode:"+p),V(".dcg-depressed").removeClass("dcg-depressed");var _e=V(document.activeElement);if(!Ee(H.target)&&R(_e))try{_e.blur()}catch(_r){}if(V(".dcg-focus-by-tap").removeClass("dcg-focus-by-tap"),V(w).each(function(){var _r=V(this),rt=_r.data("originalScrollTop")-_r.scrollTop(),xe=_r.data("originalScrollLeft")-_r.scrollLeft();(rt||xe)&&(y.scroll=!0)}),y["dcg-tapstart"]===1&&y["dcg-tapend"]===1&&!y["dcg-tapcancel"]&&!y.scroll){n("potential dcg-tap");var Me=he.changedTouches[0].clientX,He=he.changedTouches[0].clientY;if(H&&!H.device&&Me===0&&He===0){n("event appears to be simulated"),De=!0,p=u;var Ze=H.target.getBoundingClientRect();Me=(Ze.left+Ze.right)/2,He=(Ze.top+Ze.bottom)/2}n("potential dcg-tap coords:"+Me+":"+He);for(var _t=!1,Re=!1,Tt=0;Tt<w.length&&!_t;Tt++){var dr=V(w[Tt]),ve;if(typeof dr[0].getBoundingClientRect=="function"&&(ve=dr[0].getBoundingClientRect()),dr.attr("tapboundary")==="true"&&(_t=!0),!(ve&&(Me<ve.left||He<ve.top||Me>ve.right||He>ve.bottom))){I=dr[0],Re=!0,j("dcg-tap",H,{target:I,touches:he.touches,changedTouches:he.changedTouches});break}}}n("result of dcg-tap:  did_dispatch="+Re+"  did_escape="+_t),p===l||p===h?D=setTimeout(function(){D=null,b=new Date().getTime()},1e3):De&&(D=setTimeout(function(){D=null,b=new Date().getTime()},100)),w=[],p=s},K=function(){return D||new Date().getTime()-b<500},Y=function(H){return H.identifier!==void 0?H.identifier:H.pointerId},N=function(H){for(var he=[],De=0;De<H.length;De++){var _e=H[De];he.push({identifier:Y(_e),x:_e.pageX,y:_e.pageY,screenX:_e.screenX,screenY:_e.screenY,pageX:_e.pageX,pageY:_e.pageY,clientX:_e.clientX,clientY:_e.clientY})}return he},j=function(H,he,De){var _e=Y(he),Me=N(De.touches),He=N(De.changedTouches);if(n("dispatchEvent:"+H),H==="dcg-tapstart")g[_e]={type:H,pageX:He[0].pageX,pageY:He[0].pageY};else if(H==="dcg-tapmove"){var Ze=He[0],_t=g[_e];if(_t&&Ze.pageX===_t.pageX&&Ze.pageY===_t.pageY||(p===l||p===h)&&_t&&_t.type==="dcg-tapstart"&&Math.abs(_t.pageX-Ze.pageX)+Math.abs(_t.pageY-Ze.pageY)<2)return;g[_e]={type:H,pageX:He[0].pageX,pageY:He[0].pageY}}y[H.toLowerCase()]===void 0?y[H.toLowerCase()]=1:y[H.toLowerCase()]++;var Re=V.event.fix(he.originalEvent);Re.type=H,Re.device=p===l||p===h?"touch":p===u?"keyboard":"mouse",Re.touches=Me,Re.changedTouches=He,Re.target=De.target?De.target:he.target;var Tt=Re.device!=="keyboard"&&y["dcg-longhold"]>0;Re.wasLongheld=function(){return Tt},Re.preventTap=function(){y["dcg-tapcancel"]=1},clearTimeout(E),Re.type==="dcg-tapstart"&&Re.device!=="keyboard"&&Re.touches.length===1&&(E=setTimeout(function(){j("dcg-longhold",he,De)},500)),Re.target&&Re.target.nodeName&&Re.target.nodeName.toLowerCase()==="a"&&Re.type==="dcg-tap"&&Re.device==="keyboard"&&Re.target.click&&Re.target.click(),n("trigger event:"+Re.type),V(Re.target).trigger(Re)},B=function(H){var he=w,De=!!w.length,_e=V(".dcg-tap-container."+i+" .dcg-hovered"),Me=V.makeArray(_e.filter(function(){return L(this)})),He=[],Ze=[],_t=[];P(T(H)).forEach(function(Tt){(!De||he.indexOf(Tt)!==-1)&&(Me.indexOf(Tt)===-1&&_t.push(Tt),He.push(Tt))});for(var Re=0;Re<Me.length;Re++)H=Me[Re],He.indexOf(H)===-1&&Ze.push(H);V(Ze).removeClass("dcg-hovered").trigger("tipsyhide"),V(_t).addClass("dcg-hovered").trigger("tipsyshow")},A=function(H){for(var he=0;he<G.length;he++)if(G[he].pointerId===H)return!0;return!1},$=function(H){for(var he=0;he<G.length;he++)if(G[he].pointerId===H)return G.splice(he,1)[0]},J=function(H){p===s&&_(h,H),B(null),G.push(H.originalEvent),j("dcg-tapstart",H,{touches:G,changedTouches:[H.originalEvent]})},ue=function(H){$(H.originalEvent.pointerId);var he={touches:G,changedTouches:[H.originalEvent]};j("dcg-tapcancel",H,he),G.length===0&&q(H,he)},te=function(H){$(H.originalEvent.pointerId);var he={touches:G,changedTouches:[H.originalEvent]};j("dcg-tapend",H,he),G.length===0&&q(H,he)},Ae=function(H){return H.originalEvent.pointerType==="touch"||H.originalEvent.pointerType===2};ce("pointerdown MSPointerDown",function(H){if(!(p===c||p===l||!Ae(H))){if(A(H.originalEvent.pointerId)){n("exit. pointer id already exists: "+H.originalEvent.pointerId);return}J(H)}}),ce("pointermove MSPointerMove",function(H){p===c||p===l||!Ae(H)||(A(H.originalEvent.pointerId)||(n("pointer id already exists: "+H.originalEvent.pointerId),J(H)),$(H.originalEvent.pointerId),G.push(H.originalEvent),j("dcg-tapmove",H,{touches:G,changedTouches:[H.originalEvent]}))}),V(document).on("pointercancel MSPointerCancel",function(H){if(n("document.on:"+H.type),!(p!==h||!Ae(H))&&A(H.originalEvent.pointerId)){ue(H);for(var he;he=G.pop();){var H=V.Event(he,{originalEvent:he});ue(H)}}}),V(document).on("pointerup MSPointerUp",function(H){if(n("document.on:"+H.type),!(p!==h||!Ae(H))&&A(H.originalEvent.pointerId)){te(H);for(var he;he=G.pop();){var H=V.Event(he,{originalEvent:he});te(H)}}});var Se=function(){var H=!1;try{var he=Object.defineProperty({},"passive",{get:function(){H=!0}});window.addEventListener("test",function(){},he),window.removeEventListener("test",function(){},he)}catch(De){}return H}();return ce("touchstart",function(H){p===c||p===h||(p===s&&_(l,H),B(null),j("dcg-tapstart",H,{touches:H.originalEvent.touches,changedTouches:H.originalEvent.changedTouches}))}),ce("touchmove",function(H){p===l&&j("dcg-tapmove",H,{touches:H.originalEvent.touches,changedTouches:H.originalEvent.changedTouches})}),ce("touchcancel",function(H){if(p===l){var he={touches:H.originalEvent.touches,changedTouches:H.originalEvent.changedTouches};j("dcg-tapcancel",H,he),H.originalEvent.touches.length===0&&q(H,he)}}),ce("touchend",function(H){if(p===l){var he={touches:H.originalEvent.touches,changedTouches:H.originalEvent.changedTouches};j("dcg-tapend",H,he),H.originalEvent.touches.length===0&&q(H,he)}}),V(document).on("mousedown",function(H){if(n("document.on:"+H.type),!(H.button===1||H.button===2)){if(p===l||p===h||K()){!V(H.target).is("input, textarea, select")&&L(H.target)&&H.preventDefault(),n("abort mousedown: "+p+":"+K());return}_(c,H),j("dcg-tapstart",H,{touches:[H],changedTouches:[H]})}}),V(document).ready(function(){V(document).on("mousedown",function(H){if(n("document.on:"+H.type),!!Ee(H.target)){H.preventDefault();try{var he=window.getSelection();if(he.rangeCount===1){var De=he.getRangeAt(0);De.startContainer===De.endContainer&&V(De.startContainer).closest(".dcg-text-selectable").length&&he.removeAllRanges()}}catch(_e){}}})}),V(document).on("mouseleave",function(H){if(n("document.on:"+H.type),p===s){if(K()){n("abort mouseleave: "+p+":"+K());return}B(null)}}),V(document).on("mousemove",function(H){if(n("document.on:"+H.type),!(H.button===1||H.button===2)&&!(p===l||p===h)){if(K()){n("abort mousemove: "+p+":"+K());return}B(H.target),j("dcg-tapmove",H,{touches:[H],changedTouches:[H]})}}),V(document).on("mouseup",function(H){if(n("document.on:"+H.type),!(H.button===1||H.button===2)&&p===c){var he={touches:[],changedTouches:[H]};j("dcg-tapend",H,he),q(H,he)}}),V(document).on("keydown",function(H){if(n("document.on:"+H.type),!(Ns.lookup(H)!==Ns.ENTER&&Ns.lookup(H)!==Ns.SPACEBAR||!L(H.target))&&p!==u){if(V(H.target).is('a:not([ontap]), button, input, textarea, select, [role="textbox"], [contenteditable="true"]'))return;H.preventDefault(),_(u,H),j("dcg-tapstart",H,{touches:[H],changedTouches:[H]})}}),V(document).on("keyup",function(H){if(n("document.on:"+H.type),!(Ns.lookup(H)!==Ns.ENTER&&Ns.lookup(H)!==Ns.SPACEBAR||!L(H.target))&&p===u){var he={touches:[],changedTouches:[H]};j("dcg-tapend",H,he),q(H,he)}}),{monitor:o,ignore:a,isTapActive:function(){return p!==s},elIsFocusable:x}}}();var{ignore:sq,isTapActive:ET,elIsFocusable:mc,monitor:yc}=a2;at();var bq=__dcg_shared_module_exports__['i'](DT());at();Us();var pn={},aa=En();if(typeof Desmos!="undefined"&&Desmos.config)for(eb in Desmos.config)Desmos.config.hasOwnProperty(eb)&&(aa[eb]=Desmos.config[eb]);var eb,Xa=function(t){return aa.hasOwnProperty(t)},hr=function(t){pn[t]=Xa(t)},fi=function(t){pn[t]=!Xa("no"+t)};hr("testing");hr("maintenance");hr("disableScrollFix");hr("nativeOnscreenKeypad");hr("hidden");hr("disableMouseInteractions");hr("advancedStyling");hr("outofdom");aa.lang&&(pn.language=aa.lang);aa.fontSize&&(pn.fontSize=aa.fontSize);aa.backgroundColor&&(pn.backgroundColor="#"+aa.backgroundColor);aa.textColor&&(pn.textColor="#"+aa.textColor);pn.no_navigation_warning=Xa("noconcat")||Xa("testing");pn.previewMessage="You're previewing some new accessibility features.";pn.previewFeedbackUrl="mailto:feedback@desmos.com";var s2=location&&location.hostname==="preview.desmos.com";pn.previewMode=Xa("previewMode")||s2;hr("lockViewport");hr("authorFeatures");hr("degreeMode");hr("clearIntoDegreeMode");hr("plaidMode");hr("editOnWeb");hr("crossOriginSaveTest");hr("showResetButtonOnGraphpaper");hr("transparentBackground");hr("forceLogModeRegressions");fi("links");fi("trace");fi("zoomFit");hr("expressionsCollapsed");hr("invertedColors");hr("projectorMode");fi("images");fi("folders");fi("settingsMenu");fi("expressionsTopbar");fi("zoomButtons");fi("keypad");fi("graphpaper");fi("expressions");fi("branding");fi("pointsOfInterest");fi("plotSingleVariableImplicitEquations");fi("plotImplicits");fi("plotInequalities");fi("notes");fi("sliders");hr("pauseWhenOffscreen");hr("worksheetSVG");fi("brailleControls");hr("audioTraceKeypad");fi("audio");hr("sciKeypad");hr("4fnKeypad");hr("ans");Xa("braille")&&(pn.braille=!0);fi("qwertyKeyboard");hr("restrictedFunctions");hr("forceEnableGeometryFunctions");fi("functionDefinition");hr("singleExpression");hr("restrictedEditing");hr("replaceCommaWith10Exp");hr("replaceRoundWithReciprocal");Xa("typingAsteriskWritesTimesSymbol")&&(pn.typingAsteriskWritesTimesSymbol=!0);fi("substitutions");hr("logScales");fi("labels");fi("distributions");pn["4fnKeypad"]?hr("decimalToFraction"):fi("decimalToFraction");hr("3d");Xa("exponentButtonForSquareRoot")?pn.additionalFunctions=["exponent"]:aa.additionalFunctions&&typeof aa.additionalFunctions=="string"&&(pn.additionalFunctions=aa.additionalFunctions.split(","));Xa("actions")?pn.actions=!0:Xa("noactions")?pn.actions=!1:Xa("clickableObjects")&&(pn.actions=!0);function vu(t){return pn[t]}function kT(){return __dcg_shared_module_exports__['M'](pn)}var lS=["exp|exponent ln|natural-log log","total length mean median quantile quartile nCr nPr stats","stdev|standard-deviation stddev|standard-deviation","stdDev|standard-deviation stdevp|standard-deviation-population","stddevp|standard-deviation-population stdDevP|standard-deviation-population mad var|variance","varp|variance-population variance cov|co-variance covp|co-variance-population corr|correlation spearman","lcm mcm gcd mcd gcf mod ceil|ceiling floor round abs|absolute-value min max sign|signum signum sgn","sin|sine cos|cosine tan|tangent csc|co-secant sec|secant cot|co-tangent","sinh|hyperbolic-sine cosh|hyperbolic-cosine tanh|hyperbolic-tangent csch|hyperbolic-co-secant","sech|hyperbolic-secant coth|hyperbolic-co-tangent","arcsin|arc-sine arccos|arc-cosine arctan|arc-tangent arccsc|arc-co-secant arcsec|arc-secant","arccot|arc-co-tangent","arcsinh|hyperbolic-arc-sine arccosh|hyperbolic-arc-cosine arctanh|hyperbolic-arc-co-tangent","arccsch|hyperbolic-arc-co-secant arcsech|hyperbolic-arc-secant","arccoth|hyperbolic-arc-co-tangent","arsinh|hyperbolic-ar-sine arcosh|hyperbolic-ar-cosine artanh|hyperbolic-ar-co-tangent","arcsch|hyperbolic-ar-co-secant arsech|hyperbolic-ar-secant","arcoth|hyperbolic-ar-co-tangent","polygon","distance midpoint","sort shuffle join unique","erf|error-function","TTest|t-test ttest|t-test TScore|t-score tscore|t-score","iTTest|independent-t-test ittest|independent-t-test IndependentTTest","TScore|t-score Tscore|t-score tscore|t-score","normaldist|normal-distribution tdist|t-distribution poissondist|poisson-distribution","binomialdist|binomial-distribution","uniformdist|uniform-distribution","pdf cdf random inverseCdf inversecdf","histogram dotplot boxplot","pdf cdf","rgb hsv","for","width height","with"].join(" "),l2=["det|determinant","inv|inverse","transpose","rref|reduced-row-echelon-form","trace"].join(" "),c2="cube sphere cone dodecahedron octahedron tetrahedron";lS+=" "+l2;vu("3d")&&(lS+=" "+c2);var d2="alpha beta sqrt theta phi pi tau nthroot cbrt sum prod integral percent infinity infty";function qs(t){t||(t={});let e=[d2];return t.disallowAns||e.push("ans"),t.disallowFrac||e.push("frac"),t.additionalCommands&&(e=e.concat(t.additionalCommands)),e.join(" ")}function Ko(t){t||(t={});let e=lS;return t.additionalOperators&&t.additionalOperators.length&&(e=`${e} ${t.additionalOperators.join(" ")}`),t.includeGeometryFunctions&&(e+=" "+Object.keys(__dcg_shared_module_exports__['N']).join(" ")),e}var IT=window.MathQuill.noConflict().getInterface(3);IT.config({leftRightIntoCmdGoes:"up",sumStartsWithNEquals:!0,supSubsRequireOperand:!0,charsThatBreakOutOfSupSub:"+-=<>*",autoCommands:qs(),autoSubscriptNumerals:!0,restrictMismatchedBrackets:!0,typingPercentWritesPercentOf:!0,substituteTextarea:function(){return!Qy&&(fu||Jy)?V('<span class="dcg-mathquill-input-span" tabindex=0 role="textbox" style="display:inline-block;height:1px;width:1px">')[0]:wT&&vT?V('<textarea readonly inputmode="none" autocorrect="off" autocapitalize="none" spellcheck="false" autocomplete="off">').on("keydown",function(){this.readOnly=!1,this.select()}).on("blur",function(){this.readOnly=!0})[0]:V('<textarea inputmode="none" autocorrect="off" autocapitalize="none" spellcheck="false" autocomplete="off">')[0]},autoOperatorNames:Ko(),quietEmptyDelimiters:"( [",resetCursorOnBlur:!0,enableDigitGrouping:!0,disableAutoSubstitutionInSubscripts:!0,interpretTildeAsSim:!0});var Uo=IT;var k0=__dcg_shared_module_exports__['i'](ne());var ir=__dcg_shared_module_exports__['i'](ne());var{If:db}=ir.Components,ub=class extends ir.Class{template(){return ir.createElement("div",{class:ir.const("dcg-loading-container")},ir.createElement(db,{predicate:()=>!this.props.didDataLoadFail()},()=>ir.createElement("div",{class:ir.const("dcg-graph-loading")},ir.createElement("div",{class:ir.const("pulsing-message")},()=>this.props.s("account-shell-text-mygraphs-loading")),ir.createElement("div",{role:ir.const("link"),tabindex:ir.const("0"),class:ir.const("dcg-cancel-while-loading"),onTap:this.props.onCancel},()=>this.props.s("account-shell-button-mygraphs-cancel")))),ir.createElement(db,{predicate:()=>this.props.didDataLoadFail()},()=>ir.createElement("div",{class:ir.const("dcg-graph-loading-error"),"aria-live":ir.const("assertive"),"aria-atomic":ir.const("true")},ir.createElement("div",{class:ir.const("dcg-graph-loading-error-title")},()=>this.props.s("account-shell-error-mygraphs-error-loading")),ir.createElement("div",{class:ir.const("dcg-graph-loading-error-subtitle")},()=>this.props.s("account-shell-error-mygraphs-check-connection")),ir.createElement("div",{class:ir.const("dcg-graph-loading-error-options")},ir.createElement("span",{role:ir.const("button"),tabindex:ir.const("0"),class:ir.const("dcg-action-try-again dcg-btn-blue dcg-btn-medium"),onTap:this.props.requestLoadGraphData},()=>this.props.s("account-shell-button-mygraphs-try-again")),ir.createElement(db,{predicate:()=>!!this.props.onCancel},()=>ir.createElement("span",null,()=>this.props.s("account-shell-text-mygraphs-or"))),ir.createElement(db,{predicate:()=>!!this.props.onCancel},()=>ir.createElement("span",{role:ir.const("button"),tabindex:ir.const("0"),class:ir.const("dcg-action-cancel dcg-btn-light-gray dcg-btn-medium"),onTap:this.props.onCancel},()=>this.props.s("account-shell-button-mygraphs-cancel")))))))}};at();var ku={cb20221031:1};function vR(t,e){var r=document.createElement("div");r.style.zIndex="999999",r.style.position="fixed",r.style.bottom="50px",r.style.left="0",r.style.right="0",document.body.append(r),k0.mountToNode(ub,r,{s:e,didDataLoadFail:function(){return!0},requestLoadGraphData:function(){r.remove(),t()}})}function I0(t,e){var r=V.Deferred();if(t&&t.state)r.resolve(t);else if(t&&typeof t.stateUrl=="string"){var i=!1;let n=()=>{i||(i=!0,V.getJSON(t.stateUrl,ku).done(function(o){t.state=o,r.resolve(t)}).fail(function(){vR(n,e)}).always(function(){i=!1}))};n()}else r.resolve();return r}function ai(t,e){var r=/^\s*(\-|\+)?([0-9]+(\.[0-9]+)?)\s*$/;if(r.test(t))return parseFloat(t);var i=Object.create(__dcg_shared_module_exports__['Ka']);return i.trigAngleMultiplier=new __dcg_shared_module_exports__['Ja'](e?Math.PI/180:1),+__dcg_shared_module_exports__['Ub'](t).tryGetConcreteTree(__dcg_shared_module_exports__['La'],i).asValue()}function mi(t,e){if(!isFinite(t))return t;if(!isFinite(e))return e;var r=__dcg_shared_module_exports__['Ba'](t,e);if(t>0!=e>0||t===0||e===0)return 0;var i=t>0?1:-1,n=Math.abs(t).toExponential().split("e"),o=Math.abs(e).toExponential().split("e"),a=n[0],s=o[0],l=n[1],c=o[1];if(c!==l)return i*Math.pow(10,Math.max(parseFloat(l),parseFloat(c)));if(a[0]!==s[0])return parseFloat(r.toPrecision(1));for(var u=1,h=2;h<Math.min(a.length,s.length)&&(u++,a[h]===s[h]);h++);return parseFloat(r.toPrecision(u))}var M0={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function T0(t){var e=[],r=t.toLowerCase();if(r.slice(0,3)==="rgb")try{e=r.replace(/[^\d,]/g,"").split(",").slice(0,3).map(function(n){return parseInt(n,10)})}catch(n){SS(t)}else if(r[0]==="#"){var i=/^#?([a-f\d])([a-f\d])([a-f\d])$/;r=r.replace(i,function(n,o,a,s){return o+o+a+a+s+s});try{e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/.exec(r).slice(1).map(function(n){return parseInt(n,16)})}catch(n){SS(t)}}else e=M0[r];return CR(e)||SS(t),{R:e[0],G:e[1],B:e[2]}}function CR(t){return!__dcg_shared_module_exports__['G'](t)||t.length!==3?!1:__dcg_shared_module_exports__['n'](t,function(e){return Number.isInteger(e)&&e>=0&&e<=255})}function SS(t){throw new Error("Invalid color string: "+t)}function G0(t){var e=t.R,r=t.G,i=t.B,n=[];return n[0]=.49*e+.31*r+.2*i,n[1]=.17697*e+.8124*r+.01063*i,n[2]=.01*r+.99*i,n=__dcg_shared_module_exports__['l'](n,function(o){return o/.17697}),{X:n[0],Y:n[1],Z:n[2]}}function A0(t){var e=95.047,r=100,i=108.883,n=t.X,o=t.Y,a=t.Z,s=[];return s[0]=116*og(o/r)-16,s[1]=500*(og(n/e)-og(o/r)),s[2]=200*(og(o/r)-og(a/i)),{L:s[0],a:s[1],b:s[2]}}function og(t){var e=.20689655172413793;return t>Math.pow(e,3)?Math.pow(t,1/3):t/(3*e*e)+4/29}function SR(t,e){var r=1,i=.045,n=.015,o=1,a=1,s=1,l=t.L,c=t.a,u=t.b,h=e.L,p=e.a,g=e.b,y=l-h,w=Math.sqrt(c*c+u*u),b=Math.sqrt(p*p+g*g),D=w-b,I=c-p,E=u-g,G=Math.sqrt(I*I+E*E-D*D),T=1+i*w,P=1+n*w,_=y/(r*s),x=D/(o*T),L=G/(a*P);return Math.sqrt(_*_+x*x+L*L)}function V0(t,e){var r=A0(G0(T0(t))),i=A0(G0(T0(e)));return SR(r,i)}function L0(t,e){var r=__dcg_shared_module_exports__['l'](e,function(n){return V0(t,n)}),i=__dcg_shared_module_exports__['s'](r);return e[r.indexOf(i)]}function ES(t){if(typeof t!="string"||!t)return!1;try{return V0(t,"#fff")<20}catch(e){return!1}}function pb(t,e){var r=t.cachedViewState;return e.stripDefaults?__dcg_shared_module_exports__['tc'](r):r}function ER(t){t.cachedViewState={type:t.type,id:t.id,title:t.title,hidden:t.hidden,readonly:t.readonly,collapsed:t.collapsed,secret:t.secret}}function DR(t){t.cachedUndoRedoDiffState=t.cachedViewState,t.cachedUndoRedoFullState=t.cachedViewState}function O0(t,e){let r=__dcg_shared_module_exports__['M'](__dcg_shared_module_exports__['sc'](t));return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},r),js(e)),{cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},cachedViewState:{}})}function _0(t){kR(t),Ys(t),ER(t),DR(t)}function kR(t){var e=t.controller,r=e.getAllSelectedItems();t.collapsedChildIsSelected=t.collapsed&&__dcg_shared_module_exports__['o'](r,i=>i.type!=="folder"&&i.folderId===t.id)}var IR={id:!1,type:!1,hidden:!0,secret:!0,collapsed:!0,title:!0,readonly:!0};function F0(t,e){__dcg_shared_module_exports__['nc']({from:e,to:t,props:IR})}function Iu(t,e){t.collapsed=e}function R0(t,e){t.title=e}function N0(t,e){t.hidden=e}function K0(t,e){var r=__dcg_shared_module_exports__['ib'](t),i=__dcg_shared_module_exports__['ib'](e);if(__dcg_shared_module_exports__['Ha'](r.n/r.d,t)&&__dcg_shared_module_exports__['Ha'](i.n/i.d,e)){var n=__dcg_shared_module_exports__['kb'](r.d,i.d),o=r.n*(n/r.d),a=i.n*(n/i.d),s=a-o;return{nstart:o,nstep:s,lcm:n}}}var U0={folderId:"",secret:!1,readonly:!1},gb={latex:"",color:"",hidden:!1,values:[],points:!0,lines:!1,dragMode:"NONE",pointStyle:"POINT",lineStyle:"SOLID",colorLatex:"",lineOpacity:"",lineWidth:"",pointOpacity:"",pointSize:""};function fb(t){let e=(t.columns||[]).map(function(r){return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},gb),r)});return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},U0),t),{columns:e})}function q0(t){return t=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t),{columns:t.columns.map(function(e){return __dcg_shared_module_exports__['kc'](gb,e)})}),__dcg_shared_module_exports__['kc'](U0,t)}function mb(t){return{type:"table",id:t.id,columns:t.columns.map(function(e){return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},e),{tableId:t.id})})}}var{color:TR}=__dcg_shared_module_exports__['db'];function GR(t){return TR(t)!==null}var Mu=GR;function AR(t){return isFinite(t)?__dcg_shared_module_exports__['Sa'](t,{digits:8,bigCutoff:1e6,smallCutoff:.001}):"\\mathrm{undefined}"}function VR(t,e,r){let i=t.columnModels[e];i.error=r.error,i.discrete=r.discrete,i.disabled=r.dependent,i.draggable=!r.error&&!r.dependent,i.packedErrors=[],i.computedValues=[];let n=r.values;for(let o=n.length-1;o>=0;o--){let a=n[o];typeof a=="number"?i.computedValues[o]=AR(a):(i.computedValues[o]="",i.packedErrors[o]=a)}}function $0(t){let e=so(t);if(!e)return;let r=ld(t);if(!r){t.isExpanded||Tu(t,!0);return}e.row>=r.min&&e.row<r.max&&Tu(t,!0)}function ld(t){if(t.isExpanded)return;let e=Da(t);if(!(e<30))return{min:8,max:e-4}}function z0(t,e){let r=t.columnModels[e];return{values:r.values.slice(),dragMode:r.dragMode,hidden:r.hidden,id:r.id,color:r.color,points:r.points,lines:r.lines,pointStyle:r.pointStyle,lineStyle:r.lineStyle,latex:r.latex,colorLatex:r.colorLatex,lineOpacity:r.lineOpacity,lineWidth:r.lineWidth,pointSize:r.pointSize,pointOpacity:r.pointOpacity}}var LR=0;function PR(){return"table_guid_"+LR++}function OR(t,e,r){t.columnModels[e].values.splice(r,0,"")}function _R(t,e,r){t.columnModels[e].values.splice(r,1)}function W0(t,e,r){let{color:i}=r;(!i||!Mu(i))&&(i=t.controller.getNextColor());let n=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},r),{type:"table-column",guid:PR(),index:e,error:void 0,table:t,color:i,packedErrors:[],computedValues:[],discrete:void 0,shouldGraph:void 0,disabled:void 0,draggable:void 0});return e===0&&(n.hidden=!0),n}function sg(t,e){var r=t.table.formula;if(!r)return!1;var i=r.column_data[t.index];return i?!!i[e]:!1}function j0(t){return sg(t,"color_latex_valid")}function Y0(t){return sg(t,"line_opacity_valid")}function J0(t){return sg(t,"line_width_valid")}function X0(t){return sg(t,"point_size_valid")}function Q0(t){return sg(t,"point_opacity_valid")}function Z0(t){var e=t.table.formula;if(e){var r=e.column_data[t.index];if(r)return r.color_latex_value}}function eG(t){t.draggingOnGraphpaper?t.preTransientState||(t.preTransientState={columns:Gu(t,{stripDefaults:!1}).columns}):delete t.preTransientState,Ys(t);let e=qo(t);var r=e&&e.hidden;__dcg_shared_module_exports__['k'](t.columnModels,function(i){i.shouldGraph=!r&&!i.hidden}),RR(t),NR(t),FR(t)}function Da(t){let e=2,r,i=so(t);return i&&i.row>e&&(e=i.row),t.columnModels.forEach(n=>{r=n.disabled?n.computedValues.length:n.values.length+1,r>e&&(e=r)}),e}function DS(t){return t.columnModels.length}function tG(t,e){t.formula=e;for(let i=0;i<e.column_data.length&&i<DS(t);i++){let n=e.column_data[i];VR(t,i,n)}let r=t.columnModels[t.columnModels.length-1];r.disabled=!0,r.error=void 0}function kS(t,e){for(let r=0;r<t.columnModels.length;r++)OR(t,r,e)}function rG(t,e){let r=ld(t);r&&e===r.max-1&&Tu(t,!0);for(var i=0;i<t.columnModels.length;i++)_R(t,i,e),i>0&&bG(t.columnModels[i])}function yb(t,e){let r={id:t.controller.generateId(),latex:e?e.latex:"",color:t.controller.getNextColor()},i=e?e.columnIndex:t.columnModels.length,n=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},gb),r),{values:[]});var o=W0(t,i,n);t.columnModels.splice(i,0,o);for(var a=i+1;a<t.columnModels.length;a++)t.columnModels[a].index=a}function iG(t,e){t.columnModels.splice(e,1);for(var r=e;r<t.columnModels.length;r++)t.columnModels[r].index=r}function nG(t,e){var r,i=t.columnModels.length,n=[];for(r=0;r<i;r++)n.push("");var o=t.columnModels[0].values;if(e>1){var a=t.controller.isDegreeMode(),s=ai(o[0],a),l=ai(o[1],a);if(isFinite(s)&&isFinite(l)){var c=K0(s,l);if(c){var u=c.nstart,h=u/c.lcm;for(r=0;r<e;r++){var p=ai(o[r],a);if(!__dcg_shared_module_exports__['Ha'](p,h))return n;u+=c.nstep,h=u/c.lcm}(""+s).length<8&&(""+l).length<8?n[0]=""+h:n[0]="\\frac{"+u+"}{"+c.lcm+"}"}}}return n}function bb(t,e){for(let n=0;n<t.columnModels.length;n++){let o=t.columnModels[n],a={cellLocation:{column:n,row:0}};e(o.latex,"tableHeader",t,a),e(o.colorLatex,"tableColumnColorLatex",t,a),e(o.pointSize,"tableColumnPointSize",t,a),e(o.pointOpacity,"tableColumnPointOpacity",t,a),e(o.lineWidth,"tableColumnLineWidth",t,a),e(o.lineOpacity,"tableColumnLineOpacity",t,a);for(var r=t.columnModels[n],i=0;i<r.values.length;i++)r.values[i]&&e(r.values[i],"tableCellValue",t,{cellLocation:{column:n,row:i+1}})}}function FR(t){let e=mb({type:"table",id:t.id,secret:t.secret,readonly:t.readonly,folderId:t.folderId,columns:t.columnModels.map(function(i){return z0(t,i.index)})});for(var r=0;r<e.columns.length;r++)e.columns[r].hidden=!t.columnModels[r].shouldGraph;t.cachedParsableState=e}function oG(t){return t.slice(0,t.length-1)}function Gu(t,e){let r=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t.cachedViewState),{columns:oG(t.cachedViewState.columns)});return e.stripDefaults?q0(r):r}function RR(t){var e=t.columnModels.map(function(r,i){return z0(t,i)});t.cachedViewState={id:t.id,type:t.type,folderId:t.folderId,columns:e,secret:t.secret,readonly:t.readonly}}function IS(t,e){t.draggingOnGraphpaper=e}function NR(t){let e=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t.cachedViewState),{columns:oG(t.cachedViewState.columns)});t.cachedUndoRedoFullState=e,t.preTransientState&&(e=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},e),t.preTransientState)),t.cachedUndoRedoDiffState=e}var BR={id:!1,type:!1,columns:!1,folderId:!0,secret:!0,readonly:!0};function aG(t,e){__dcg_shared_module_exports__['nc']({from:e,to:t,props:BR}),lG(t,e.columns)}function sG(t,e){let r=__dcg_shared_module_exports__['M'](fb(t)),i=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},r),js(e)),{columnModels:void 0,formula:void 0,draggingOnGraphpaper:!1,cachedViewState:{},cachedParsableState:{},cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},isExpanded:!1});return lG(i,r.columns),i}function lG(t,e){t.columnModels=e.map(function(r,i){return W0(t,i,r)}),yb(t)}var H0=["x","y","z","u","v","w"];function MS(t,e,r){for(var i=[],n=Math.min(e.length,H0.length),o=0;o<n;o++)i.push({id:r.generateId(),latex:__dcg_shared_module_exports__['Ta'](H0[o]+"_"+t),values:e[o],color:r.getNextColor(),hidden:!1,points:!0,lines:!1,dragMode:"NONE",pointStyle:"POINT",lineStyle:"SOLID",colorLatex:"",lineWidth:"",lineOpacity:"",pointOpacity:"",pointSize:""});return{id:r.generateId(),type:"table",folderId:"",secret:!1,readonly:!1,columns:i}}function cG(t,e){let r=Gu(t,{stripDefaults:!1});if(!r.columns||!e.columns)return e;for(var i=0;i<e.columns.length;i++){var n=r.columns[i],o=e.columns[i];if(n)for(var a in n)n.hasOwnProperty(a)&&(o.hasOwnProperty(a)||(o[a]=n[a]))}return e}function so(t){var e=t.controller.getFocusLocation();if(e&&e.type==="table"&&e.id===t.id)return e.location}function kn(t,e){for(var r=0;r<t.columnModels.length;r++){let i=t.columnModels[r];if(i.id===e)return i}}function TS(t,e,r){let i=kn(t,e);i&&(i.points=r,r||(i.dragMode="NONE"))}function dG(t,e,r){let i=kn(t,e);i&&(i.pointStyle=r)}function uG(t,e,r){let i=kn(t,e);i&&(i.lines=r)}function pG(t,e,r){let i=kn(t,e);i&&(i.lineStyle=r)}function xb(t,e,r){let i=kn(t,e);i&&(i.lineWidth=r)}function wb(t,e,r){let i=kn(t,e);i&&(i.lineOpacity=r)}function vb(t,e,r){let i=kn(t,e);i&&(i.pointSize=r)}function Cb(t,e,r){let i=kn(t,e);i&&(i.pointOpacity=r)}function hG(t,e,r){let i=kn(t,e);i&&(i.dragMode=r,r!=="NONE"&&!i.points&&(i.points=!0))}function gG(t,e,r){let i=kn(t,e);!i||!Mu(r)||(i.color=r,i.colorLatex="")}function Sb(t,e,r){let i=kn(t,e);i&&(i.colorLatex=r)}function Tu(t,e){t.isExpanded=e}function fG(t,e,r){let i=kn(t,e);i&&(i.hidden=r,r&&yG(t))}function mG(t,e,r){let i=kn(t,e);i&&(i.boundingBoxes=r,yG(t))}function yG(t){let e=[];t.columnModels.forEach(r=>{r.boundingBoxes&&!r.hidden&&(e=e.concat(r.boundingBoxes))}),t.boundingBoxes=e}function Eb(t,e){let r=kn(t,e);return r?!r.points&&!r.lines:!0}function Dl(t,e,r){if(e.row===0){let o=t.columnModels[e.column].id,a=kn(t,o);if(!a)return;a.latex=r,e.column>=t.columnModels.length-1&&yb(t);return}for(var i=t.columnModels[e.column],n=i.values.length;n<e.row-1;n++)i.values[n]="";t.columnModels[i.index].values[e.row-1]=r,e.column>0&&bG(t.columnModels[i.index])}function bG(t){for(;t.values.length>0&&!t.values[t.values.length-1];)t.values.pop()}function xG(t,e){return!!t.columnModels[e.column]&&e.row>=0}function wG(t){let e;if(t.values){for(e of t.values)if(e!=="")return!1}if(t.computedValues){for(e of t.computedValues)if(e!=="")return!1}return!0}function Db(t,e,r){let i=t.columnModels[r];return i.disabled?i.computedValues[e]||"":i.values[e]||""}function vG(t){let e=Da(t),r=DS(t);for(let i=0;i<r;i++)if(Db(t,e-1,i)!=="")return!1;return!0}var CG={folderId:"",text:"",secret:!1,readonly:!1};function SG(t){return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},CG),t)}function EG(t){return __dcg_shared_module_exports__['kc'](CG,t)}function DG(t,e){t.text=e}function kG(t,e){let r=__dcg_shared_module_exports__['M'](SG(t));return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},r),js(e)),{cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},cachedViewState:{}})}function IG(t){Ys(t),UR(t),qR(t)}var KR={id:!1,type:!1,folderId:!0,text:!0,secret:!0,readonly:!0};function MG(t,e){__dcg_shared_module_exports__['nc']({from:e,to:t,props:KR})}function kb(t,e){var r=t.cachedViewState;return e.stripDefaults?EG(r):r}function UR(t){t.cachedViewState={type:t.type,id:t.id,folderId:t.folderId,text:t.text,secret:t.secret,readonly:t.readonly}}function qR(t){t.cachedUndoRedoDiffState=t.cachedViewState,t.cachedUndoRedoFullState=t.cachedViewState}var HR=0;function $R(){return"helper_item_"+HR++}function GG(t){return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t),{formula:__dcg_shared_module_exports__['_b'](),guid:$R(),cachedParsableState:{type:"statement",id:t.id,latex:t.latex,shouldGraph:!1}})}function AG(t,e,r){var l;e.formula=r;let i=e.proxy,n={numericValue:i.numericValue,listValue:i.listValue},{constant_value:o,zero_values:a}=r,s=o!=null?o:(l=(a||[])[0])==null?void 0:l.val;i.numericValue=__dcg_shared_module_exports__['I'](s)?s:NaN,i.listValue=__dcg_shared_module_exports__['G'](s)&&__dcg_shared_module_exports__['n'](s,__dcg_shared_module_exports__['I'])?s.slice(0):void 0,__dcg_shared_module_exports__['E'](i.numericValue,n.numericValue)||t.runAfterDispatch(()=>{i.notifyPropertyChange("numericValue")}),__dcg_shared_module_exports__['E'](i.listValue,n.listValue)||t.runAfterDispatch(()=>{i.notifyPropertyChange("listValue")})}at();var GS={enabled:!1,latex:"",hoveredImage:"",depressedImage:""},Ib={center:"\\left(0,0\\right)",angle:"0",width:"10",height:"10",opacity:"1",clickableInfo:GS,description:"",draggable:!1},VG=__dcg_shared_module_exports__['b']({folderId:"",hidden:!1,secret:!1,readonly:!1,foreground:!1,name:""},Ib);function LG(t){return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},VG),t),{clickableInfo:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},GS),t.clickableInfo)})}function PG(t){var e=__dcg_shared_module_exports__['kc'](VG,t),r=__dcg_shared_module_exports__['lc'](GS,t.clickableInfo);return r===void 0?delete e.clickableInfo:e.clickableInfo=r,e}function AS(t){return __dcg_shared_module_exports__['pc'](t,Ib)}function OG(t){return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({type:"image",id:t.id},AS(t)),{guid:"",index:0,color:"",shouldGraph:t.hidden,showPoints:!1})}function _G(t,e){t.hidden=e}function Ho(t,e,r){t[e]=r}function FG(t,e){return t[e]}function RG(t,e){t.description=e}function NG(t,e){t.name=e}function VS(t,e){t.draggable=e}function Au(t){if(t.formula){var e=t.formula.center_reference_id,r=t.formula.center_reference_symbol;if(!(!e||!r)){var i=t.controller.getItemModel(e);if(!(!i||i.type!=="expression")&&i.formula.assignment===r&&So(i))return i}}}function WR(t){var e=Au(t);if(!e)return!1;var r=e.reconciledDragMode;return!(!r||r==="NONE")}function Js(t){return t.draggable?WR(t):!1}function BG(t){if(!t.formula||!t.formula.center_is_point_literal)return!1;var e=t.formula.move_strategy;if(!e)return!1;var r=e[2],i=e[3],n=r&&r.type!=="none",o=i&&i.type!=="none";return!!(n||o)}function KG(t,e){t.opacity=e}function LS(t,e){t.foreground=e}function UG(t,e){t.image_url=e}function Tb(t,e){e(t.opacity,"imageOpacity",t),e(t.center,"imageCenter",t),e(t.height,"imageHeight",t),e(t.width,"imageWidth",t),e(t.angle,"imageAngle",t)}function jR(t){let e=OG(t);e.color=t.color,e.index=t.index,e.guid=t.guid,e.shouldGraph=t.shouldGraph,e.showPoints=t.showPoints,t.cachedParsableState=e}function qG(t){t.draggingOnGraphpaper?t.preTransientState||(t.preTransientState={center:t.center,width:t.width,height:t.height}):delete t.preTransientState,Ys(t);let e=qo(t);t.shouldGraph=e&&e.hidden?!1:!t.hidden,t.showPoints=t.shouldGraph&&Xs(t)&&t.loadStatus==="loaded"&&!Js(t)&&t.controller.isTraceEnabled(),JR(t),XR(t),jR(t)}function HG(t,e){t.formula=e,t.error=YR(t)}function Gb(t){return t.formula?t.formula.variables||[]:[]}function YR(t){var e={scale:t.controller.s("graphing-calculator-error-log-axes-image"),center:t.controller.s("graphing-calculator-error-image-invalid-center"),angle:t.controller.s("graphing-calculator-error-image-invalid-angle"),width:t.controller.s("graphing-calculator-error-image-invalid-width"),height:t.controller.s("graphing-calculator-error-image-invalid-height"),opacity:t.controller.s("graphing-calculator-error-image-invalid-opacity")};for(var r in t.formula.errorMap){var i=t.formula.errorMap[r];if(i)return e[r]}}function $G(t,e){return!t.formula||!t.formula.errorMap?!1:!!t.formula.errorMap[e]}function Ab(t,e){var r=t.cachedViewState;return e.stripDefaults?PG(r):r}function JR(t){var e=t.cachedViewState.clickableInfo,r=!0,i=!0;if(e&&(e.depressedImage===t.clickableInfo.depressedImage&&(i=!1),e.hoveredImage===t.clickableInfo.hoveredImage&&(r=!1)),r&&(t.hoveredImageObj&&(V(t.hoveredImageObj).off("load"),delete t.hoveredImageObj),t.clickableInfo.hoveredImage)){t.hoveredImageObj=new Image;var n=function(){var a=t.controller.getGrapher();a&&a.redrawAllLayers()},o=function(){};Mb(t.hoveredImageObj,t.clickableInfo.hoveredImage,n,o)}if(i&&(t.depressedImageObj&&(V(t.depressedImageObj).off("load"),delete t.depressedImageObj),t.clickableInfo.depressedImage)){t.depressedImageObj=new Image;var n=function(){var l=t.controller.getGrapher();l&&l.redrawAllLayers()},o=function(){};Mb(t.depressedImageObj,t.clickableInfo.depressedImage,n,o)}if(t.cachedViewState.image_url!==t.image_url){V(t.imageObj).off("load"),t.imageObj=new Image;let a=function(){t.controller.dispatch({type:"image-load-success",id:t.id})},s=function(){t.controller.dispatch({type:"image-load-error",id:t.id})};Mb(t.imageObj,t.image_url,a,s)}t.cachedViewState=__dcg_shared_module_exports__['b']({type:t.type,id:t.id,folderId:t.folderId,image_url:t.image_url,name:t.name,hidden:t.hidden,foreground:t.foreground,secret:t.secret,readonly:t.readonly},AS(t))}function PS(t,e){t.draggingOnGraphpaper=e}function XR(t){var e=t.cachedViewState;t.cachedUndoRedoFullState=t.cachedViewState,t.preTransientState&&(e=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},e),t.preTransientState)),t.cachedUndoRedoDiffState=e}function QR(t){var e=document.createElement("canvas");e.width=2,e.height=2;var r=e.getContext("2d");return r.drawImage(t,0,0,2,2),e.toDataURL()}function Mb(t,e,r,i){V(t).on("load.initial-image-load",function(){var n=t.width,o=t.height;n===1&&o===1?(V(t).off(".initial-image-load"),V(t).on("load",r),t.src=QR(t)):r()}).on("error",i),/^data:/.test(e)||(t.crossOrigin="anonymous"),t.src=e}function zG(t,e){let r=__dcg_shared_module_exports__['M'](LG(t));return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},r),js(e)),{color:__dcg_shared_module_exports__['fc'].BLUE,loadStatus:"loading",failures:0,imageObj:new Image,hoveredImageObj:void 0,depressedImageObj:void 0,shouldGraph:void 0,showPoints:void 0,error:void 0,formula:void 0,draggingOnGraphpaper:!1,cachedViewState:{},cachedParsableState:{},cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{}})}var ZR=__dcg_shared_module_exports__['b']({id:!1,type:!1,image_url:!0,name:!0,folderId:!0,hidden:!0,secret:!0,readonly:!0,foreground:!0},__dcg_shared_module_exports__['qc'](Ib));function WG(t,e){__dcg_shared_module_exports__['nc']({from:e,to:t,props:ZR})}function jG(t){let{controller:e,files:r,id:i}=t,n={errors:[],tokens:[]};for(let o=0;o<r.length;o++){let a=r[o];if(!a.type.match("image/*")){n.errors.push(e.s("graphing-calculator-error-image-invalid-file",{file:a.name}));continue}n.tokens.push(tN({controller:e,file:a,id:i}))}return n}var eN=0;function tN(t){let{controller:e,file:r,id:i}=t,n=""+eN++;return e.getGraphSettings().config.imageUploadCallback(r,(o,a)=>{setTimeout(()=>{if(o)e.dispatch({type:"image-upload-error",token:n,error:o});else{let s=new Image;Mb(s,a,function(){var u=s.width,h=s.height,p=Math.max(u,h)/Math.min(u,h);u<h?(h=10,u=Math.round(10*h/p)/10):(u=10,h=Math.round(10*u/p)/10),e.dispatch({type:"image-upload-success",token:n,url:a,width:u+"",height:h+"",name:r.name,id:i})},function(){e.dispatch({type:"image-upload-error",token:n,error:""})})}})}),n}function Vb(t,e){t.loadStatus=e,e==="loaded"&&(t.failures=0),e==="failed"&&(t.failures+=1)}function OS(t){t.imageObj.src=t.imageObj.src,Vb(t,"loading")}function Lb(t,e,r){t.clickableInfo=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t.clickableInfo),{[e]:r})}function YG(t,e){t.clickableInfo=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t.clickableInfo),{latex:e})}function Pb(t){return!!(t.clickableInfo.enabled&&t.formula&&t.formula.click_handler&&t.formula.click_handler.status==="maybe-valid")}var Lu={handlerLatex:"",minStepLatex:"",open:!1,playing:!1};function JG(t){return __dcg_shared_module_exports__['lc'](Lu,t)}function XG(t){return __dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},Lu),t)}var QG="dcg_ticker_guid_internal",rN=QG;function ZG(){return _S(Lu)}function iN(t){t.cachedParsableState={type:"ticker",id:t.id,handlerLatex:t.handlerLatex,minStepLatex:t.minStepLatex,shouldGraph:!1}}function eA(t,e){return e.stripDefaults?JG(t.cachedViewState):t.cachedViewState}function tA(t){return t.cachedUndoRedoDiffState}function rA(t){return t.cachedUndoRedoFullState}function nN(t){t.cachedViewState={handlerLatex:t.handlerLatex,minStepLatex:t.minStepLatex,playing:t.playing,open:t.open}}function oN(t){var e=t.cachedViewState;t.cachedUndoRedoDiffState=e,t.cachedUndoRedoFullState=e}function _S(t){let e=XG(t);return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},e),{type:"ticker",guid:QG,id:rN,avgDelta:0,lastTickTime:void 0,cachedViewState:{},cachedParsableState:{},cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},filteredBySearch:!1})}function iA(t,e){__dcg_shared_module_exports__['oc'](e,t)}function nA(t,e){t.formula=e}function oA(t){nN(t),oN(t),iN(t)}function aA(t,{currentFrameTime:e,previousFrameTime:r}){var a,s;if(!t.playing||((a=t.formula)==null?void 0:a.handler.status)!=="maybe-valid")return!1;if(t.lastTickTime==null||r==null)return!0;if(((s=t.formula)==null?void 0:s.minStep.status)!=="valid")return!1;let i=t.formula.minStep.value,n=t.lastTickTime+i;if(e>=n)return!0;let o=e-r;return n-e<o/2}function sA(t,e){t.lastTickTime=e}function lA(t){if(t.formula)return t.formula.handler.status==="error"?t.formula.handler.error:void 0}function cA(t){if(t.formula)return t.formula.minStep.status==="error"?t.formula.minStep.error:void 0}function lg(t){var e;return((e=t.formula)==null?void 0:e.variables)||[]}function Ob(t,e){e(t.handlerLatex,"tickerHandler",t),e(t.minStepLatex,"tickerMinStep",t)}function aN(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function sN(t){return t.replace(/\\\\right\\(\\*[})\]|])/g,".*\\\\right\\$1").replace(/ ?\\([}\]])/g,".*\\$1")}function uA(t){let e=sN(aN(t));return new RegExp(e)}function lN(t){switch(t.type){case"TokenNode":case"Letter":return!0;case"OperatorName":{for(let e of t.arg.args)if(e.type!=="Letter")return!1;return!0}case"Cmd":{let e=__dcg_shared_module_exports__['Sb'][t.val];return e===void 0?!0:e==="Ln"||e==="Log"||e==="Trig"}default:return!1}}function FS(t){let e;try{e=__dcg_shared_module_exports__['Ob'](t)}catch(n){return}if(e.args.length===0||e.args.length>2)return;let r=e.args[0];if(!lN(r))return;let i;if(e.args.length>1){let n=e.args[1];if(n.type!=="SupSub")return;let{sup:o,sub:a}=n;if(o!==void 0||a===void 0)return;for(let s of a.args)if(s.type!=="Letter"&&s.type!=="Digit")return;i=a}return{base:r,subscript:i}}function Qs(t){return FS(t)!==void 0}function Fb(t,e){let r=FS(e);if(r===void 0)return[];let i=[],n;try{n=__dcg_shared_module_exports__['Ob'](t)}catch(o){return i}return cg(n,r,i,{wrapInBraces:!1}),i}function kl(t,e){return Fb(t,e).length!==0}function Rb(t,e,r){return FS(r)===void 0?t:RS(t,e,r)}function RS(t,e,r){let i=Fb(t,e);if(i.length===0)return t;let n="",o=0;for(let a of i){if(n+=t.slice(o,a.base.start),a.wrapInBraces&&(n+="{"),n+=r,o=a.base.end,a.subscript){let s=0,l=0;for(let c=a.subscript.start;c>=0;c--)if(t[c]==="{"&&(s+=1),t[c]==="_"){l=c;break}n+=t.slice(o,l),o=a.subscript.end;for(let c=a.subscript.end;c<t.length&&!(s<=0);c++)t[c]==="}"&&(s-=1,o=c+1)}a.wrapInBraces&&(n+="}")}return n+=t.slice(o,t.length),n}function dA(t,e){if(t.args.length!==e.args.length)return!1;for(let r=0;r<t.args.length;r++){let i=t.args[r],n=e.args[r];if(!(i.type==="Letter"&&n.type==="Letter"&&i.val===n.val)&&!(i.type==="Digit"&&n.type==="Digit"&&i.val===n.val))return!1}return!0}function cN(t,e,r){let i=t.arg.args,n=e.arg.args;if(i.length===n.length){for(let o=0;o<i.length;o++){let a=i[o],s=n[o];if(a.type!=="Digit"||a.type!==s.type||a.val!==s.val)return}r.push({base:e.span,wrapInBraces:!1})}}function cg(t,e,r,{wrapInBraces:i}){let{base:n,subscript:o}=e;for(let a=0;a<t.args.length;a++){let s=t.args[a],l;if(a+1<t.args.length){let c=t.args[a+1];c.type==="SupSub"&&c.sub!==void 0&&(l=c.sub)}switch(s.type){case"Letter":case"Cmd":if(n.type!==s.type||n.val!==s.val)break;o&&l&&dA(o,l)?r.push({base:s.span,subscript:l.span,wrapInBraces:i}):!o&&!l&&r.push({base:s.span,wrapInBraces:i});break;case"OperatorName":{if(n.type!==s.type||n.arg.args.length!==s.arg.args.length)break;let c=!0;for(let u=0;u<n.arg.args.length;u++){let h=n.arg.args[u],p=s.arg.args[u];if(h.type!=="Letter"||p.type!=="Letter"||h.val!==p.val){c=!1;break}}if(!c)break;o&&l&&dA(o,l)?r.push({base:s.span,subscript:l.span,wrapInBraces:i}):!o&&!l&&r.push({base:s.span,wrapInBraces:i});break}case"Digit":case"Symbol":case"EscapedSymbol":break;case"LeftRight":case"Sqrt":cg(s.arg,e,r,{wrapInBraces:!1});break;case"Frac":cg(s.num,e,r,{wrapInBraces:!1}),cg(s.den,e,r,{wrapInBraces:!1});break;case"SupSub":if(s.sup){let c=!1;for(let u=s.sup.span.start;u>=0;u--){let h=s.sup.span.input[u];if(h==="^")break;h==="{"&&(c=!0)}cg(s.sup,e,r,{wrapInBraces:!c})}break;case"TokenNode":{if(n.type!==s.type)break;cN(n,s,r)}break;default:{let c=s;throw new Error("Unexpected token type: "+c.type)}}}}function fA(t){return{controller:t,__itemModelArray:[],__itemIdToModel:{},__helperIdToModel:{},__toolPreviewIdToModel:{},__anyDependsOnRandomSeed:!1,__anyIsAction:!1,selectedItemMap:{},drawOrder:[],colorIdx:0,expressionAnalysis:{},nextDisplayIndex:1,ticker:ZG()}}function mA(t){for(var e=0;e<t.__itemModelArray.length;e++){var r=t.__itemModelArray[e];if(r.type==="image"&&r.loadStatus==="loading")return!0}return!1}function yA(t){var e=__dcg_shared_module_exports__['m'](__dcg_shared_module_exports__['C'](t.controller.getColors()),i=>i!=__dcg_shared_module_exports__['fc'].ORANGE),r=e[t.colorIdx];return t.colorIdx=(t.colorIdx+1)%e.length,r}function Fu(t,e){return t.__itemModelArray[e]}function Ru(t){for(let e=0;e<t.__itemModelArray.length;e++){let r=t.__itemModelArray[e];if(Nu(r))return r}}function Bb(t){for(let e=t.__itemModelArray.length-1;e>=0;e--){let r=t.__itemModelArray[e];if(Nu(r))return r}}function cd(t,e){var r;do{if(e--,e===-1)return;r=Fu(t,e)}while(r&&!Nu(r));return r}function dd(t,e){var r,i=pg(t);do{if(e++,e===i)return;r=Fu(t,e)}while(r&&!Nu(r));return r}function qo(t){if(t.type!=="folder"&&t.folderId){let e=t.controller.getListModel(),r=es(e,t.folderId);if(r&&r.type==="folder")return r}}function bA(t,e){let r=es(t,e);if(!r||r.type!=="folder")return 0;let i=0,n=t.__itemModelArray.length;for(var o=r.index+1;o<n;o++){let a=t.__itemModelArray[o];if(a.type==="folder"||a.folderId!==e)break;i+=1}return i}function xA(t,e){let r=es(t,e);if(!r||r.type!=="folder")return[];let i=[],n=t.__itemModelArray.length;for(var o=r.index+1;o<n;o++){let a=t.__itemModelArray[o];if(a.type==="folder"||a.folderId!==e)break;i.push(a.id)}return i}function wA(t,e){let r=[],i=es(t,e);if(!i||i.type!=="folder")return r;let n=t.__itemModelArray.length;for(let o=i.index+1;o<n;o++){let a=t.__itemModelArray[o];if(a.type==="folder"||a.folderId!==e)break;r.push(a)}return r}function BS(t){return!!(t&&t.readonly)}function dg(t){if(!t)return!1;if(t.secret)return!0;let e=qo(t);return!!(e&&e.secret)}function Nu(t){return!KS(t)}function KS(t){if(!t||t.filteredBySearch)return!0;if(t.controller.isItemBeingDragged(t.id))return!1;if(!t.controller.shouldShowAuthorFeatures()&&dg(t))return!0;let r=qo(t);return!!(r&&r.collapsed&&!t.controller.getExpressionSearchStr())}function Kb(t){return t.__itemModelArray}function vA(t){return __dcg_shared_module_exports__['C'](t.__helperIdToModel)}function Bu(t){return __dcg_shared_module_exports__['C'](t.__toolPreviewIdToModel)}function Ku(t,e){for(var r=0;r<t.__itemModelArray.length;r++){var i=t.__itemModelArray[r];Ou(i,e)}for(var n in t.__toolPreviewIdToModel)Ou(t.__toolPreviewIdToModel[n],e);t.ticker.open&&(e(t.ticker.handlerLatex,"tickerHandler",t.ticker),e(t.ticker.minStepLatex,"tickerMinStep",t.ticker))}function Ou(t,e){switch(t.type){case"expression":Yb(t,e);break;case"table":bb(t,e);break;case"image":Tb(t,e);break;case"ticker":Ob(t,e);break;case"folder":case"text":break;default:return t}}function Pu(t,e){return!!t.replace(/([_^])([a-z0-9])/gi,"$1{$2}").match(e)}function CA(t,e){if(!Qs(e))return!1;let i=!1;return Ku(t,n=>{kl(n,e)&&(i=!0)}),i}function SA(t,e){let r=0,i=Qs(e);t.ticker.filteredBySearch=t.ticker.open&&!kl(t.ticker.handlerLatex,e)&&!kl(t.ticker.minStepLatex,e);for(let n of t.__itemModelArray){if(!i){n.filteredBySearch=!1,r++;continue}switch(n.filteredBySearch=!0,n.type){case"expression":Yb(n,a=>{kl(a,e)&&(n.filteredBySearch=!1,r++)}),n.label&&n.showLabel&&n.label.match(Nb(e))&&(n.filteredBySearch=!1,r++);break;case"table":bb(n,a=>{kl(a,e)&&(n.filteredBySearch=!1,r++)});break;case"image":Tb(n,a=>{kl(a,e)&&(n.filteredBySearch=!1,r++)});break;case"folder":case"text":break;default:return n}!n.filteredBySearch&&n.type!=="folder"&&n.folderId&&(t.__itemIdToModel[n.folderId].filteredBySearch=!1,r++)}return r}function EA(t,e){let r=0,i=uA(e);t.ticker.filteredBySearch=t.ticker.open&&!Pu(t.ticker.handlerLatex,i)&&!Pu(t.ticker.minStepLatex,i);for(var n=0;n<t.__itemModelArray.length;n++){if(!e){t.__itemModelArray[n].filteredBySearch=!1;continue}var o=t.__itemModelArray[n];switch(o.filteredBySearch=!0,o.type){case"expression":Yb(o,s=>{Pu(s,i)&&(o.filteredBySearch=!1,r++)}),o.label&&o.showLabel&&(e==="\\operatorname{label}"||e.length>1&&"label".indexOf(e)===0||Pu(o.label,i))&&(o.filteredBySearch=!1,r++);break;case"table":bb(o,s=>{Pu(s,i)&&(o.filteredBySearch=!1,r++)});break;case"image":Tb(o,s=>{Pu(s,i)&&(o.filteredBySearch=!1,r++)});break;case"folder":o.title&&o.title.indexOf(e)>=0&&(o.filteredBySearch=!1,r++);break;case"text":o.text.indexOf(e)>=0&&(o.filteredBySearch=!1,r++);break;default:return o}!o.filteredBySearch&&o.type!=="folder"&&o.folderId&&(t.__itemIdToModel[o.folderId].filteredBySearch=!1,r++)}return r}function Nb(t,e){return new RegExp("\\$\\{"+t.replace("{","\\{?").replace("}","\\}?").replace("_","\\_?")+"\\}",e)}function DA(t,e){let r=0;for(var i=0;i<t.__itemModelArray.length;i++){var n=t.__itemModelArray[i];if(n.type==="expression"&&n.showLabel&&n.label){let o=n.label.match(Nb(e,"g"));o&&(r+=o.length)}}return Ku(t,o=>{r+=Fb(o,e).length}),r}function Uu(t,e,r,i){r=r.trim().replace(/_\{([a-zA-Z0-9])\}/g,"_$1");for(var n=0;n<t.__itemModelArray.length;n++){var o=t.__itemModelArray[n];o.type==="expression"&&o.showLabel&&o.label&&o.label.match(Nb(e))&&Ml(o,o.label.replace(Nb(e,"g"),"${"+r.trim()+"}"))}Ku(t,(a,s,l,c)=>{if(i&&i.limitToItem!==void 0&&i.limitToItem!==l.id||i&&i.limitToFolder!==void 0&&(l.type==="ticker"||l.type==="folder"||i.limitToFolder!==l.folderId))return;let u=Rb(a,e,r);if(u!==a){let h;switch(c&&l.columnModels&&(h=l.columnModels[c.cellLocation.column].id),s){case"latex":{ca(l,u);break}case"cdfMin":{Xb(l,u);break}case"cdfMax":{Qb(l,u);break}case"colorLatex":{Dg(l,u);break}case"lineWidth":{Yu(l,u);break}case"clickableInfoLatex":{Wb(l,u);break}case"fillOpacity":{Cg(l,u);break}case"lineOpacity":{ju(l,u);break}case"pointOpacity":{Sg(l,u);break}case"pointSize":{Eg(l,u);break}case"labelAngle":{Jb(l,u);break}case"labelSize":{kg(l,u);break}case"polarDomainMin":{bg(l,u);break}case"polarDomainMax":{wg(l,u);break}case"parametricDomainMin":{xg(l,u);break}case"parametricDomainMax":{vg(l,u);break}case"sliderMin":{fg(l,u);break}case"sliderMax":{mg(l,u);break}case"sliderStep":{yg(l,u);break}case"imageOpacity":{Ho(l,"opacity",u);break}case"imageCenter":{Ho(l,"center",u);break}case"imageHeight":{Ho(l,"height",u);break}case"imageWidth":{Ho(l,"width",u);break}case"imageAngle":{Ho(l,"angle",u);break}case"tickerHandler":{l.handlerLatex=u;break}case"tickerMinStep":{l.minStepLatex=u;break}case"tableHeader":case"tableCellValue":if(!c||l.type!=="table")break;Dl(l,c.cellLocation,u);break;case"tableColumnColorLatex":{h&&Sb(l,h,u);break}case"tableColumnPointSize":{h&&vb(l,h,u);break}case"tableColumnPointOpacity":{h&&Cb(l,h,u);break}case"tableColumnLineWidth":{h&&xb(l,h,u);break}case"tableColumnLineOpacity":{h&&wb(l,h,u);break}case"residualVariable":break;default:{let p=s;throw new Error(`Unexpected latex location ${p}`)}}}})}function ug(t){var e=[];Ku(t,function(n){if(!(n.indexOf("~")!==-1||n.indexOf("\\sim")!==-1))for(var o=/_(\d)|_\{(?:\s|\\space)*(\d+)(?:\s|\\space)*\}/g;;){var a=o.exec(n);if(!a)break;e.push(parseInt(a[1]||a[2],10))}}),e.sort(function(n,o){return n-o});for(var r=1,i=0;i<e.length;i++)e[i]===r&&r++;return r}function kA(t){var e=0;return Ku(t,function(r){for(var i=/\\token\{(\d+)\}/g;;){var n=i.exec(r);if(!n)break;var o=parseInt(n[1],10);o>e&&(e=o)}}),e}function IA(t){var e={};return Ku(t,function(r){if(!(r.indexOf("~")!==-1||r.indexOf("\\sim")!==-1))for(var i=/(\\?[a-zA-Z]+)_(\d)|(\\?[a-zA-Z]+)_\{(?:\s|\\space)*(\d+)(?:\s|\\space)*\}/g;;){var n=i.exec(r);if(!n)break;var o=n[1]||n[3],a=n[2]||n[4];o[0]!=="\\"&&(o=o[o.length-1]);var s=parseInt(a,10);e[o]||(e[o]=0),s>e[o]&&(e[o]=s)}}),e}function MA(t){var e=[],r={points:[],angles:[],polygons:[],other:[]};function i(n){if(n.type==="expression"&&n.folderId===__dcg_shared_module_exports__['uc']){Ma(n)?r.points.push(n.id):$A(n)?r.angles.push(n.id):Zs(n)?r.polygons.push(n.id):r.other.push(n.id);return}n.type==="table"?__dcg_shared_module_exports__['k'](n.columnModels,function(o){e.push(o.id)}):e.push(n.id)}t.__itemModelArray.forEach(i),Bu(t).forEach(i),e.push.apply(e,r.polygons),e.push.apply(e,r.other),e.push.apply(e,r.angles),e.push.apply(e,r.points),t.drawOrder=e}function es(t,e,r){let i=t.__itemIdToModel[e];if(i)return i;if(r&&r.includePreviewItems)return t.__toolPreviewIdToModel[e]}function qu(t,e){for(var r=[],i=0;i<t.__itemModelArray.length;i++){var n=t.__itemModelArray[i];n.type==="expression"&&In(n)===e&&r.push(n)}return r}function dN(t,e){return t.__helperIdToModel[e]}function TA(t,e){var r=GG(e);t.__helperIdToModel[r.id]=r}function US(t){t.__anyDependsOnRandomSeed=!1;for(var e=0;e<t.__itemModelArray.length;e++){var r=t.__itemModelArray[e];if(r&&"formula"in r&&r.formula&&r.formula.depends_on_random_seed){t.__anyDependsOnRandomSeed=!0;return}}}function GA(t){t.__anyIsAction=!1}function Ub(t){if(!t.__anyIsAction){if(t.ticker.open){t.__anyIsAction=!0;return}for(var e=0;e<t.__itemModelArray.length;e++){var r=t.__itemModelArray[e];if(r&&"formula"in r&&r.formula){if(r.type!=="expression"&&r.type!=="image")continue;let{formula:i}=r;if(i.hasOwnProperty("action_value")||i.hasOwnProperty("click_handler")){t.__anyIsAction=!0;return}}}}}function ud(t){for(var e=!t.controller.shouldShowAuthorFeatures(),r=1,i=1,n=0;n<t.__itemModelArray.length;n++){var o=t.__itemModelArray[n];o.index=n,o.displayIndex=r,dg(o)&&(o.secretIndex=i,i+=1),(!e||!dg(o))&&(r+=1)}for(var a in t.selectedItemMap)t.__itemIdToModel[a]||delete t.selectedItemMap[a];t.nextDisplayIndex=r}function uN(t){t.__itemModelArray=[],t.__itemIdToModel={},t.__helperIdToModel={},t.__toolPreviewIdToModel={},t.__anyDependsOnRandomSeed=!1}function qS(t,e){let r={},i=[];return e.forEach(n=>{let o=t.__itemIdToModel[n];if(o&&!BS(o)){let a=Wu(t,n);for(let s of a)r[s.id]||(r[s.id]=!0,i.push(s))}}),i}function pg(t){return t.__itemModelArray.length}function AA(t){return t.nextDisplayIndex===1}function VA(t){for(var e=[],r=0;r<t.__itemModelArray.length;r++){var i=t.__itemModelArray[r];i.type==="expression"&&i.sliderExists&&e.push(i)}return e}function Hu(t){var e;for(var r in t.selectedItemMap){if(e!==void 0)return;e=r}if(e!==void 0)return t.__itemIdToModel[e]}function LA(t){return __dcg_shared_module_exports__['b']({},t.selectedItemMap)}function qb(t){var e=[];for(var r in t.selectedItemMap)e.push(t.__itemIdToModel[r]);return e}function PA(t){return{list:t.__itemModelArray.map(function(e){return e.cachedUndoRedoDiffState}),ticker:tA(t.ticker)}}function HS(t){return{list:t.__itemModelArray.map(function(e){return e.cachedUndoRedoFullState}),ticker:rA(t.ticker)}}function OA(t,e){let r={list:t.__itemModelArray.map(function(n){switch(n.type){case"expression":return pd(n,e);case"image":return Ab(n,e);case"table":return Gu(n,e);case"folder":return pb(n,e);case"text":return kb(n,e);default:return n}})},i=eA(t.ticker,e);return i&&(r.ticker=i),r}function _A(t){let e=0,r=/^[0-9]+$/;for(var i=t.list.length-1;i>=0;i--){var n=t.list[i];let o=n.id;if(r.test(o)){let a=parseInt(o,10);a>e&&(e=a)}if(n.type==="table"&&n.columns){for(let a=n.columns.length-1;a>=0;a--)if(o=n.columns[a].id,r.test(o)){let s=parseInt(o,10);s>e&&(e=s)}}}return e}function FA(t,e,r){r||(r={});var i,n;for(t.colorIdx=0,uN(t),t.expressionAnalysis={},i=0;i<e.list.length;i++){if(n=_u(t,e.list[i]),r.remapColors&&"color"in n&&n.color){var o=__dcg_shared_module_exports__['C'](t.controller.getColors());__dcg_shared_module_exports__['p'](o,n.color)||(n.color=L0(n.color,o))}t.__itemModelArray.push(n),t.__itemIdToModel[n.id]=n}if(t.ticker=_S(e.ticker),ud(t),t.nextDisplayIndex===1){var a=_u(t,{type:"expression",id:t.controller.generateId(),color:t.controller.getNextColor()});ka(t,a,t.__itemModelArray.length)}}function _u(t,e){switch(e.type){case"expression":return jb(e,t.controller);case"table":return sG(e,t.controller);case"image":return zG(e,t.controller);case"folder":return O0(e,t.controller);case"text":return kG(e,t.controller);default:return e}}function RA(t,e){var r,i;let n=t.__itemIdToModel;for(t.__itemModelArray=[],t.__itemIdToModel={},r=0;r<e.list.length;r++){var o=e.list[r];if(i=n[o.id],i&&i.type===o.type)switch(i.type){case"expression":if(o.type!==i.type)throw new Error("invalid restoration");HA(i,o);break;case"table":if(o.type!==i.type)throw new Error("invalid restoration");aG(i,o);break;case"image":if(o.type!==i.type)throw new Error("invalid restoration");WG(i,o);break;case"folder":{if(o.type!==i.type)throw new Error("invalid restoration");F0(i,o)}break;case"text":if(o.type!==i.type)throw new Error("invalid restoration");MG(i,o);break;default:return i}else i=_u(t,o);t.__itemModelArray.push(i),t.__itemIdToModel[i.id]=i}e.ticker&&iA(t.ticker,e.ticker),US(t),Ub(t),ud(t)}function NA(t,e,r){let i=r[0]&&r[0].tableId,n=es(t,i||e);if(!n)return;let o;switch(n.type){case"expression":let a=!1;n.__workerNeedsDotplotXMode=!1;for(let c=0;c<r.length;c++){let u=r[c];if(!(u.graphMode===13||u.graphMode===12||u.graphMode===14)){if(u.graphMode===15){n.error=u.error;continue}"resolved"in u&&!u.resolved&&(a=!0),u.boundingBox&&(o||(o=[]),o.push(u.boundingBox)),u.needsDotplotXMode&&(n.__workerNeedsDotplotXMode=!0)}}n.unresolved=a,n.boundingBoxes=o;let s=1/0,l=-1/0;for(let c of r){if(c.graphMode!==6)continue;let u=c.sampledDomain;u&&(s=Math.min(s,u.min),l=Math.max(l,u.max))}isFinite(s)&&(n.__workerSampledDomainMin=s),isFinite(l)&&(n.__workerSampledDomainMax=l);return;case"table":for(let c=0;c<r.length;c++){let u=r[c];u.graphMode===13||u.graphMode===12||u.graphMode===14||u.boundingBox&&(o||(o=[]),o.push(u.boundingBox))}o&&mG(n,e,o);return;default:return}}function BA(t,e){var r,i,n,o=__dcg_shared_module_exports__['M'](t.expressionAnalysis);for(r in e){if(!e.hasOwnProperty(r))continue;n=e[r],i=es(t,r);let a={isGraphable:!!n.is_graphable,isError:!!n.error,errorMessage:n.error?t.controller.unpack(n.error):void 0};if(i)switch(i.type){case"expression":if(NS(i,n),n.zero_values&&n.zero_values.length===1){let c=n.zero_values[0].val;__dcg_shared_module_exports__['I'](c)&&(a.evaluation={type:"Number",value:c},a.evaluationDisplayed=!0),__dcg_shared_module_exports__['G'](c)&&c.every(__dcg_shared_module_exports__['I'])&&(a.evaluation={type:"ListOfNumber",value:c.slice()},a.evaluationDisplayed=!0)}else n.hasOwnProperty("constant_value")&&__dcg_shared_module_exports__['I'](n.constant_value)&&(a.evaluation={type:"Number",value:n.constant_value},a.evaluationDisplayed=!1);break;case"image":HG(i,n);break;case"table":tG(i,n);break;case"folder":case"text":break;default:return i}else r===t.ticker.id&&nA(t.ticker,n);let s=dN(t,r);if(s)AG(t.controller,s,n);else{let l=t.__toolPreviewIdToModel[r];l&&NS(l,n)}r!==t.ticker.id&&(o[r]=a)}US(t),Ub(t),t.expressionAnalysis=o}function Dr(t,e){if(t.selectedItemMap={},!!e){if(e.type==="image"&&e.folderId){let r=es(t,e.folderId);r&&r.type==="folder"&&r.collapsed&&(e=r)}t.selectedItemMap[e.id]=!0}}function $S(t,e){t.selectedItemMap[e]?delete t.selectedItemMap[e]:t.selectedItemMap[e]=!0}function zS(t,e){t.selectedItemMap=__dcg_shared_module_exports__['b']({},e)}function $u(t,e,r,i){if(e===r)return;let n=t.__itemModelArray.splice(e,i);e<r&&(r=r-i+1),t.__itemModelArray.splice.apply(t.__itemModelArray,[r,0,...n]),ud(t)}function ka(t,e,r){var i=String(e.id);if(t.__itemIdToModel.hasOwnProperty(i))throw Error("Item with id '"+i+"' is already in list");t.__itemIdToModel[i]=e,t.__itemModelArray.splice(r,0,e),ud(t)}function ts(t,e){ka(t,e,pg(t))}function zu(t,e){let r=[];var i=t.__itemModelArray[e];if(i.type==="folder"){let o=0,a=e+1;for(let s=a;s<t.__itemModelArray.length;s++){var n=t.__itemModelArray[s];if(n.type==="folder"||n.folderId!==i.id)break;Xs(n)&&Dr(t,void 0),n.readonly?(s>a&&(t.__itemModelArray[s]=t.__itemModelArray[a],t.__itemModelArray[a]=n),Eo(n,""),a+=1):(delete t.__itemIdToModel[n.id],delete t.expressionAnalysis[i.id],o+=1)}o>0&&r.push(...t.__itemModelArray.splice(a,o))}return Xs(i)&&Dr(t,void 0),r.push(...t.__itemModelArray.splice(e,1)),delete t.__itemIdToModel[i.id],delete t.expressionAnalysis[i.id],US(t),ud(t),r}function KA(t){return t.__anyDependsOnRandomSeed}function UA(t){return t.__anyIsAction}function Wu(t,e){let r=es(t,e);return r?zu(t,r.index):[]}function Hb(t){let e=Hu(t);if(!e)return!1;let r=cd(t,e.index);return r?(Dr(t,r),r.index===pg(t)-1&&e.type==="expression"&&Ia(e)&&zu(t,r.index),!0):!1}function $b(t){let e=Hu(t);if(!e)return!1;let r=dd(t,e.index);return r?(Dr(t,r),!0):!1}function Xs(t){return!!t.controller.getListModel().selectedItemMap[t.id]}function hg(t,e){t.dragState=e}function gg(t){switch(t.type){case"expression":return zb(t);case"image":return Gb(t);case"table":return[];case"text":return[];case"folder":return[];default:return t}}function qA(t,e){for(let r of Kb(t))r.type==="folder"&&Iu(r,e)}var pN=0;function hN(){return"abstract_item_"+pN++}function js(t){return{guid:hN(),controller:t,index:-1,displayIndex:-1,secretIndex:-1,isHiddenFromUI:!0,renderShell:!0}}function WS(t,e){t.secret=e}function Zb(t,e){t.readonly=e}function Eo(t,e){t.type!=="folder"&&(t.folderId=e)}function Ys(t){t.isHiddenFromUI=KS(t)}function zA(t){return t.isHiddenFromUI||t.filteredBySearch?"none":t.renderShell?"shell":"render"}function rs(t){let e=Ig(t);return Array.isArray(e)?e[0]:e}function Ig(t){if(!t.colorLatex)return t.color;let e,r;return t.type==="expression"?(e=jA(t),r=WA(t)):t.type==="table-column"&&(e=Z0(t),r=j0(t)),r&&e?e:t.color}function Mg(t){let e=__dcg_shared_module_exports__['Ub'](t);if(e.type!=="Assignment")return NaN;if(e._expression.type!=="Constant")return NaN;if(!new __dcg_shared_module_exports__['Fc']({enableGeometry:!1,scales:void 0}).validLHS(e._symbol))return NaN;if(__dcg_shared_module_exports__['Ka'][e._symbol])return NaN;let i=e._expression.asValue();return typeof i=="number"?i:NaN}function YS(t){return t===void 0?NaN:+t}var JA={smallCutoff:1e-6,bigCutoff:1e9,digits:12};function XA(t){let e=t.formula;return e?t.controller.isDecimalToFractionEnabled()&&e.hasOwnProperty("constant_value")&&__dcg_shared_module_exports__['Pa'](YS(e.constant_value)):!1}function tx(t){return!!(t.formula&&t.formula.is_graphable)}function JS(t){let e=t.formula;if(!e)return!1;let r=e.is_evaluable&&e.zero_values&&e.zero_values.length>0&&typeof e.zero_values[0].val!="boolean",i=XA(t)&&Sc(t),n=!!e.rgb_value&&t.formula.assignment;return r||i||n}function XS(t){let e=t.formula;return JS(t)?e.zero_values&&e.zero_values.length?e.zero_values[0].val:e.rgb_value?e.rgb_value:e.constant_value:XA(t)?t.formula.constant_value:NaN}function Gg(t){var e=t.formula.ttest_results;if(!(!e||!isFinite(e.lessThan)))return{lessThan:e.lessThan,greaterThan:e.greaterThan,notEqual:e.notEqual}}function Ju(t){var e=t.formula.stats_results;if(!(!e||!isFinite(e.min)))return{min:e.min,q1:e.q1,median:e.median,q3:e.q3,max:e.max}}function Cc(t,e){if(!isFinite(e))return t;let r=t.indexOf("=")+1;return ai(t.slice(r),!1)===e?t:t.slice(0,r)+__dcg_shared_module_exports__['Yb'](e)}function Ia(t){var e=t.latex||"",r=t.label||"",i=e+r;return i.split(" ").join("")===""}function fN(t){var e=t.dragMode==="AUTO"&&t.formula.default_drag_mode!==void 0?t.formula.default_drag_mode:t.dragMode;t.dragMode==="AUTO"&&Og(t)&&(e="NONE"),t.reconciledDragMode=__dcg_shared_module_exports__['O'](e,t.formula.move_strategy),t.interactiveLabel&&t.reconciledDragMode!=="NONE"&&Pg(t,!1)}function Ta(t,e,r){if(!t.sliderExists)return NaN;let i=da(t),n=is(t),o=Ga(t);if(r&&r.overwriteStep!==void 0&&(o=r.overwriteStep),e=__dcg_shared_module_exports__['$a']({target:e,hardMin:t.slider.hardMin?i:void 0,hardMax:t.slider.hardMax?n:void 0,step:o}),!r||!r.ignoreSoftLimits){if(!t.slider.hardMin&&e<i)return i;if(!t.slider.hardMax&&e>n)return n}return e}function QS(t,e,r={}){if(!t.sliderExists)return NaN;let i=ua(t),n=da(t),o=is(t),a=Ga(t);r.overwriteStep===void 0&&(r.overwriteStep=a||(o-n)/20);var s=0;switch(e){case"min":return Ta(t,n);case"max":return Ta(t,o);case"up":s=1;break;case"down":s=-1;break;case"bigup":s=5;break;case"bigdown":s=-5;break;default:return e}let l=i;for(var c=0;c<20;c++){let u=c/3*r.overwriteStep,h=i;if(s>0)i=Ta(t,l+u,r),i>h&&(s-=1);else if(s<0)i=Ta(t,l-u,r),i<h&&(s+=1);else break}return i}function rx(t,e){if(t.sliderExists){t.slider.isPlaying&&zo(t,!1);var r=Ta(t,e,{ignoreSoftLimits:!0});t.latex=Cc(t.latex,r)}}function QA(t,e,r){if(t.sliderExists){t.slider.isPlaying&&zo(t,!1),Qu(t);var i=QS(t,e,r);t.latex=Cc(t.latex,i)}}function ZA(t,e){if(t.sliderExists){t.slider.isPlaying&&zo(t,!1);var r=Ta(t,e);t.latex=Cc(t.latex,r)}}function eV(t,e){if(!t.sliderExists||t.resetSliderAnimationTargetValue)return;var r=t.sliderLastTickTime;if(t.sliderLastTickTime=e,r===void 0)return;var i=e-r;let n=da(t),o=is(t),a=Ga(t),s=t.slider.animationPeriod,l=t.slider.loopMode;if(isNaN(t.sliderAnimationTargetValue)){var c=ua(t);isNaN(c)||(t.sliderAnimationTargetValue=c)}var u=a?a/2:0;if(l==="LOOP_FORWARD_REVERSE")t.sliderAnimationTargetValue>=o?Mn(t,{playDirection:-1}):t.sliderAnimationTargetValue<=n&&Mn(t,{playDirection:1});else if(l==="LOOP_FORWARD")Mn(t,{playDirection:1}),t.sliderAnimationTargetValue>=o+u&&(t.sliderAnimationTargetValue=n-u);else if(l==="PLAY_ONCE")Mn(t,{playDirection:1});else if(l==="PLAY_INDEFINITELY")Mn(t,{playDirection:1});else throw new Error("Unexpected slider loop mode: "+l);isFinite(i)||(i=0);var h,p;if(l==="PLAY_INDEFINITELY")h=i/(s/4),a&&(h*=a),t.sliderAnimationTargetValue+=h,p=t.sliderAnimationTargetValue,a||(p=mi(p-h*.1,p+h*.1)),p=Ta(t,p,{ignoreSoftLimits:!0}),t.latex=Cc(t.latex,p);else{if(i=Math.min(i,s/10),h=(o-n)*i/s,t.sliderAnimationTargetValue+=h*t.slider.playDirection,t.sliderAnimationTargetValue=Math.max(n-u,Math.min(o+u,t.sliderAnimationTargetValue)),p=t.sliderAnimationTargetValue,!a){let g=h/i*16.666666666666668;p=mi(p-g*.1,p+g*.1)}p=Ta(t,p),t.latex=Cc(t.latex,p)}}function zb(t){let e=t.formula;return e?e.is_single_identifier?[]:e.variables||[]:[]}function NS(t,e){t.formula=e,t.error=e.error,t.unresolved=!1,e.is_slider?(!t.sliderExists||t.resetSliderAnimationTargetValue)&&(t.sliderAnimationTargetValue=ua(t),t.sliderDragging=!1,t.sliderExists=!0):t.sliderExists=!1,t.resetSliderAnimationTargetValue=!1;var r={};e.is_regression&&(r=e.regression.parameters,t.residualVariable=e.regression.residualVariable,t.controller.areLogModeRegressionsForced()&&(t.isLogModeRegression=!0)),__dcg_shared_module_exports__['E'](t.regressionParameters,r)||(t.regressionParameters=r)}function mN(t){let e=qo(t);e&&e.hidden||t.formula.expression_type&&ep(t)?t.shouldGraph=!1:t.shouldGraph=!Og(t)}function yN(t){let e=t.formula&&t.formula.raw_slider_latex;if(!t.sliderExists||t.latex!==e){t.cachedDisplayLatex={storedLatex:t.latex,valueLatex:t.latex};return}let{latex:r}=t;if(t.cachedDisplayLatex.storedLatex!==r){t.cachedDisplayLatex={storedLatex:t.latex,valueLatex:t.latex};return}let i=iV(t);if(isFinite(i)){let n=t.controller.getFocusLocation();n&&n.type==="expression"&&n.id===t.id||(t.cachedDisplayLatex.valueLatex=Cc(t.latex,i))}}function Ag(t){return t.cachedDisplayLatex.valueLatex}function tV(t){return __dcg_shared_module_exports__['Ma'](t).latex}function ix(t){return t.slider.hardMin?t.slider.min:tV(da(t))}function rV(t){return t.slider.hardMax?t.slider.max:tV(is(t))}function da(t){if(t.slider.hardMin){let e=t.formula.slider_min_number;return isFinite(e)?e:NaN}else{let e=t.controller.isDegreeMode(),r=ai(t.slider.min,e),i=ua(t),n=Ga(t),o=t.slider.hardMax?t.formula.slider_max_number:void 0,a=-10;if(r<a&&(a=r),i<a&&(a=i),o<a&&(a=o),n){let s=__dcg_shared_module_exports__['$a']({target:a,hardMin:void 0,hardMax:o,step:n});s<=a?a=s:a=s-n}return a}}function is(t){if(t.slider.hardMax){let e=t.formula.slider_max_number;return isFinite(e)?e:NaN}else{let e=t.controller.isDegreeMode(),r=ai(t.slider.max,e),i=ua(t),n=Ga(t),o=t.slider.hardMin?t.formula.slider_min_number:void 0;return __dcg_shared_module_exports__['ab']({storedMax:r,sliderValue:i,step:n,hardMin:o})}}function Ga(t){return t.formula.slider_step_number}function iV(t){if(!t.formula||!t.formula.is_slider)return;let e=t.formula.constant_value;if(e!==void 0)return+e}function ua(t){let e=t.formula&&t.formula.raw_slider_latex;if(t.latex!==e)return Mg(t.latex);let r=iV(t);return isFinite(r)?r:NaN}function ZS(t){return t.slider.loopMode!=="PLAY_ONCE"?!1:ua(t)>=is(t)}function nV(t,e){return t.formula.viz_valids?!!t.formula.viz_valids[e]:!1}function Tl(t,e){return t.vizProps[e]}function oV(t,e,r){t.vizProps=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t.vizProps),{[e]:r})}function aV(t,e,r){t.clickableInfo=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t.clickableInfo),{[e]:r})}function Wb(t,e){t.clickableInfo=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t.clickableInfo),{latex:e})}function el(t){return!!(t.clickableInfo.enabled&&yE(t)&&t.formula.click_handler&&t.formula.click_handler.status==="maybe-valid")}function sV(t){return!!t.__workerNeedsDotplotXMode}function nx(t){return!!(t.formula&&t.formula.slider_min_valid)}function ox(t){return!!(t.formula&&t.formula.slider_max_valid)}function ax(t){return!!(t.formula&&t.formula.slider_step_valid)}function lV(t){if(!t.formula)return NaN;if(Dc(t)&&isFinite(t.__workerSampledDomainMin))return t.__workerSampledDomainMin;let e=t.formula.domain_min_number;return isFinite(e)?e:NaN}function cV(t){if(!t.formula)return NaN;if(Dc(t)&&isFinite(t.__workerSampledDomainMax))return t.__workerSampledDomainMax;let e=t.formula.domain_max_number;return isFinite(e)?e:NaN}function dV(t){return!!(t.formula&&t.formula.domain_min_valid)}function uV(t){return!!(t.formula&&t.formula.domain_max_valid)}function pd(t,e){var r=t.cachedViewState;if((!e.stripDefaults||t.parametricDomain.min!==""||t.parametricDomain.max!=="")&&(r=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},r),{domain:{min:t.parametricDomain.min===""?"0":t.parametricDomain.min,max:t.parametricDomain.max===""?"1":t.parametricDomain.max}})),e.stripDefaults)return __dcg_shared_module_exports__['Ac'](r);if(r.points===void 0||r.lines===void 0||r.fill===void 0){let i=__dcg_shared_module_exports__['M'](r);return i.points===void 0&&delete i.points,i.lines===void 0&&delete i.lines,i.fill===void 0&&delete i.fill,i}return r}function bN(t){let e=t.cachedViewState;e&&__dcg_shared_module_exports__['Cc'](e,t)&&e.folderId===t.folderId&&e.color===t.color&&e.latex===t.latex&&e.showLabel===t.showLabel&&e.label===t.label&&e.hidden===t.hidden&&e.secret===t.secret&&e.readonly===t.readonly&&e.fill===t.fill&&e.points===t.points&&e.lines===t.lines&&e.lineStyle===t.lineStyle&&e.arrowMode===t.arrowMode&&e.pointStyle===t.pointStyle&&e.dragMode===t.dragMode&&e.labelSize===t.labelSize&&e.labelOrientation===t.labelOrientation&&e.suppressTextOutline===t.suppressTextOutline&&e.interactiveLabel===t.interactiveLabel&&e.editableLabelMode===t.editableLabelMode&&e.residualVariable===t.residualVariable&&e.regressionParameters===t.regressionParameters&&e.isLogModeRegression===t.isLogModeRegression&&e.displayEvaluationAsFraction===t.displayEvaluationAsFraction&&e.slider===t.slider&&e.strictIntersection===t.strictIntersection||(t.cachedViewState=__dcg_shared_module_exports__['b']({type:t.type,id:t.id,folderId:t.folderId,color:t.color,latex:t.latex,showLabel:t.showLabel,label:t.label,hidden:t.hidden,secret:t.secret,readonly:t.readonly,points:t.points,lines:t.lines,lineStyle:t.lineStyle,arrowMode:t.arrowMode,pointStyle:t.pointStyle,fill:t.fill,dragMode:t.dragMode,labelSize:t.labelSize,labelOrientation:t.labelOrientation,suppressTextOutline:t.suppressTextOutline,interactiveLabel:t.interactiveLabel,editableLabelMode:t.editableLabelMode,residualVariable:t.residualVariable,regressionParameters:t.regressionParameters,isLogModeRegression:t.isLogModeRegression,displayEvaluationAsFraction:t.displayEvaluationAsFraction,slider:t.slider,strictIntersection:t.strictIntersection},__dcg_shared_module_exports__['Bc'](t)))}function eE(t,e){e&&Qu(t),t.draggingOnGraphpaper=e}function xN(t){var e=t.memoizedUndoRedoStateParams,r=t.cachedViewState,i=t.preTransientState;if(t.cachedUndoRedoFullState=r,e&&e.viewState===r&&e.preTransientState===i)return;t.memoizedUndoRedoStateParams={viewState:r,preTransientState:i};let n;i?n=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},r),{latex:i.latex,slider:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},r.slider),i.slider)}):n=__dcg_shared_module_exports__['b']({},r),delete n.regressionParameters,delete n.residualVariable,t.cachedUndoRedoDiffState=n}function jb(t,e){let r=__dcg_shared_module_exports__['M'](__dcg_shared_module_exports__['zc'](t)),{color:i}=r;return(!i||!Mu(i))&&(i=e.getNextColor()),__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},r),js(e)),{labelDropdownOpen:!1,formula:{error:void 0,operator:"=",variables:[]},geoOverrideHidden:void 0,error:void 0,unresolved:!1,color:i,pointStyle:r.pointStyle,lineStyle:r.lineStyle,arrowMode:r.arrowMode,displayEvaluationAsFraction:r.displayEvaluationAsFraction,shouldGraph:void 0,sliderDragging:void 0,sliderAnimationTargetValue:void 0,resetSliderAnimationTargetValue:!1,sliderLastTickTime:void 0,draggingOnGraphpaper:!1,cachedUndoRedoDiffState:void 0,cachedUndoRedoFullState:void 0,cachedParsableState:void 0,cachedViewState:void 0,cachedDisplayLatex:{storedLatex:"",valueLatex:""}})}function wN(t){let e=qo(t),r=!!(e&&e.hidden),i=t.cachedViewState,n=t.index,o=t.showLabel&&!r,a=t.shouldGraph,s=t.memoizedParsableStateParams;if(s&&s.viewState===i&&s.index===n&&s.showLabel===o&&s.shouldGraph===a)return;t.memoizedParsableStateParams={viewState:i,index:n,showLabel:o,shouldGraph:a};let l=__dcg_shared_module_exports__['Dc'](i);l.index=n,l.showLabel=o,l.shouldGraph=a,l.isInConstructionsFolder=(e==null?void 0:e.id)===__dcg_shared_module_exports__['uc'],t.cachedParsableState=l}function Yb(t,e){e(t.latex,"latex",t),e(t.clickableInfo.latex,"clickableInfoLatex",t),e(t.lineWidth,"lineWidth",t),e(t.fillOpacity,"fillOpacity",t),e(t.lineOpacity,"lineOpacity",t),e(t.pointOpacity,"pointOpacity",t),e(t.pointSize,"pointSize",t),e(t.labelSize,"labelSize",t),e(t.labelAngle,"labelAngle",t),e(t.colorLatex,"colorLatex",t),Ec(t)&&(e(t.parametricDomain.min,"parametricDomainMin",t),e(t.parametricDomain.max,"parametricDomainMax",t)),Dc(t)&&(e(t.polarDomain.min,"polarDomainMin",t),e(t.polarDomain.max,"polarDomainMax",t)),Al(t)&&(e(t.cdf.min,"cdfMin",t),e(t.cdf.max,"cdfMax",t)),t.sliderExists&&(e(t.slider.min,"sliderMin",t),e(t.slider.max,"sliderMax",t),e(t.slider.step,"sliderStep",t)),t.residualVariable&&e(t.residualVariable,"residualVariable",t)}function In(t){return t.formula&&t.formula.assignment}function pV(t){var r,i;let e=(i=(r=t.formula)==null?void 0:r.typed_constant_value)==null?void 0:i.valueType;return e==null?!1:__dcg_shared_module_exports__['sa'](e)}function tE(t){var e=t.match(/^(\\token\{\d+\})=/);if(e)return e[1]}function Xu(t){var e=t.match(/^\\token\{(\d+)\}/);if(e)return e[1]}function Vg(t){var r,i;let e=(i=(r=t.formula)==null?void 0:r.typed_constant_value)==null?void 0:i.valueType;if(e==null||(__dcg_shared_module_exports__['sa'](e)&&(e=__dcg_shared_module_exports__['ta'](e)),!__dcg_shared_module_exports__['ua'](e)))return"unknown";switch(e){case __dcg_shared_module_exports__['S']:return"point";case __dcg_shared_module_exports__['aa']:case __dcg_shared_module_exports__['ia']:case __dcg_shared_module_exports__['ga']:return"line";case __dcg_shared_module_exports__['ea']:case __dcg_shared_module_exports__['ca']:return"circle";case __dcg_shared_module_exports__['ka']:return"angle";case __dcg_shared_module_exports__['ma']:return"directedangle";case __dcg_shared_module_exports__['_']:return"polygon";case __dcg_shared_module_exports__['oa']:return"transformation";default:return e}return"unknown"}function hV(t){return t.indexOf("\\token{")!==-1}function gV(t){return"\\token{"+t+"}"}function fV(t){var r,i;let e=(i=(r=t.formula.geometry)==null?void 0:r.call)==null?void 0:i.symbol;return e&&e!=="apply"?e:Vg(t)}function vN(t){return!!(t.sliderExists&&(t.slider.isPlaying||t.sliderDragging)||t.draggingOnGraphpaper)}function mV(t){return!!(t.sliderExists&&t.sliderDragging||t.draggingOnGraphpaper)}function rE(t){var e=vN(t);e?t.preTransientState||(t.preTransientState={latex:t.latex,slider:{min:t.slider.min,max:t.slider.max,playDirection:t.slider.playDirection}}):delete t.preTransientState,(!t.sliderExists||!t.slider.isPlaying)&&(t.sliderLastTickTime=void 0),Ys(t),mN(t),fN(t),bN(t),xN(t),wN(t),yN(t)}var CN=__dcg_shared_module_exports__['b']({id:!1,type:!1,color:!0,folderId:!0,latex:!0,showLabel:!0,label:!0,hidden:!0,secret:!0,readonly:!0,points:!0,lines:!0,lineStyle:!0,arrowMode:!0,pointStyle:!0,fill:!0,dragMode:!0,labelSize:!0,labelOrientation:!0,suppressTextOutline:!0,interactiveLabel:!0,editableLabelMode:!0,residualVariable:!0,regressionParameters:!0,isLogModeRegression:!0,displayEvaluationAsFraction:!0,slider:!0,strictIntersection:!0,angleType:!0,showAngleDirection:!0},__dcg_shared_module_exports__['qc'](__dcg_shared_module_exports__['wc']));function HA(t,e){__dcg_shared_module_exports__['nc']({from:e,to:t,props:CN}),t.resetSliderAnimationTargetValue=!0,t.sliderAnimationTargetValue=void 0}function fg(t,e){e?Mn(t,{hardMin:!0,min:e}):Mn(t,{hardMin:!1,min:"-10"})}function mg(t,e){e?Mn(t,{hardMax:!0,max:e}):Mn(t,{hardMax:!1,max:"10"})}function Mn(t,e){t.slider=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},t.slider),e)}function zo(t,e){!t||t.slider.isPlaying===e||(Mn(t,{isPlaying:e}),e&&(Qu(t),t.sliderAnimationTargetValue=ua(t)))}function Qu(t){if(!t.slider.hardMin){let e=__dcg_shared_module_exports__['Xb'](da(t));e!==t.slider.min&&Mn(t,{min:e})}if(!t.slider.hardMax){let e=__dcg_shared_module_exports__['Xb'](is(t));e!==t.slider.max&&Mn(t,{max:e})}}function ca(t,e){var r=Mg(e);if(isFinite(r)){let i=__dcg_shared_module_exports__['_a']({target:r,step:Ga(t),hardMin:t.slider.hardMin?da(t):void 0,hardMax:t.slider.hardMax?is(t):void 0});i.min||Mn(t,{hardMin:!1,min:"-10"}),i.max||Mn(t,{hardMax:!1,max:"10"}),i.step||Mn(t,{step:""})}t.latex=e}function yV(t,e){Mn(t,{loopMode:e,playDirection:1}),e==="PLAY_INDEFINITELY"&&Mn(t,{hardMin:!1,hardMax:!1,min:"",max:""}),t.sliderAnimationTargetValue=da(t)}function Lg(t,e){e&&Qu(t),t.sliderDragging=e}function yg(t,e){Mn(t,{step:e})}function bV(t,e){Mn(t,{animationPeriod:e})}function Sc(t){return t.displayEvaluationAsFraction}function xV(t,e){t.displayEvaluationAsFraction=e}function Ml(t,e){t.label=e}function hd(t,e){t.showLabel=e}function wV(t,e){t.description=e}function bg(t,e){t.polarDomain=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t.polarDomain),{min:e})}function xg(t,e){t.parametricDomain=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t.parametricDomain),{min:e})}function wg(t,e){t.polarDomain=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t.polarDomain),{max:e})}function vg(t,e){t.parametricDomain=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t.parametricDomain),{max:e})}function iE(t,e){t.isLogModeRegression=e}function sx(t,e){Mu(e)&&(t.color=e,t.colorLatex="")}function nE(t,e){t.fill=e}function Cg(t,e){t.fillOpacity!==e&&(t.fillOpacity=e)}function ju(t,e){t.lineOpacity!==e&&(t.lineOpacity=e)}function Sg(t,e){t.pointOpacity!==e&&(t.pointOpacity=e)}function Eg(t,e){t.pointSize!==e&&(t.pointSize=e)}function Yu(t,e){t.lineWidth!==e&&(t.lineWidth=e)}function Dg(t,e){t.colorLatex!==e&&(t.colorLatex=e)}function vV(t,e){t.labelDropdownOpen=e}function gd(t,e){t.dragMode!==e&&(t.dragMode=e)}function oE(t,e){t.points=e}function aE(t,e){t.pointStyle!==e&&(t.pointStyle=e,e!=="POINT"&&(t.dragMode="NONE"))}function sE(t,e){t.lines=e}function lx(t,e){t.lineStyle!==e&&(t.lineStyle=e)}function CV(t,e){t.arrowMode=e===SV(t)?"DEFAULT":e}function SV(t){return"NONE"}function cx(t){return _g(t)?t.arrowMode==="DEFAULT"?SV(t):t.arrowMode:"NONE"}function kg(t,e){t.labelSize=e}function Jb(t,e){t.labelAngle=e}function lE(t,e){t.labelOrientation=e}function EV(t,e){t.suppressTextOutline=e}function Pg(t,e){t.interactiveLabel=e}function dx(t,e){t.editableLabelMode=e}function DV(t){return t.editableLabelMode}function Zu(t){let{editableLabelMode:e}=t;return e==="MATH"||e==="TEXT"}function kV(t,e){t.strictIntersection=e}function IV(t){return!!(t.reconciledDragMode!=="NONE"&&t.hidden)}function MV(t,e){t.hidden=e,!e&&ep(t)&&(t.lines=t.points=t.fill=void 0)}function cE(t,e){t.geoOverrideHidden=e}function Og(t){return t.geoOverrideHidden!==void 0?t.geoOverrideHidden:t.hidden}function ep(t){if(tl(t))return!1;let{points:e,lines:r,fill:i}=t,n=__dcg_shared_module_exports__['$b'](t.formula.expression_type,{points:e,lines:r,fill:i});return!n.points&&!n.lines&&!n.fill}function ux(t){return Ec(t)||Dc(t)}function TV(t){return t.polarDomain.min}function GV(t){return t.polarDomain.max}function AV(t){return t.parametricDomain.min}function VV(t){return t.parametricDomain.max}function tp(t){return!!t.formula.action_value&&Object.keys(t.formula.action_value).length>0}function LV(t){return!!t.sliderExists}function Zs(t){return t.formula.expression_type==="POLYGON"}function tl(t){return!!t.formula.is_inequality}function px(t){return!!t.formula.is_regression}function Ec(t){return t.formula.expression_type==="PARAMETRIC"}function Dc(t){return t.formula.expression_type==="POLAR"}function $A(t){let e=t.formula.typed_constant_value;if(!e)return!1;let r=e.valueType;return r===__dcg_shared_module_exports__['ka']||r===__dcg_shared_module_exports__['la']||r===__dcg_shared_module_exports__['ma']||r===__dcg_shared_module_exports__['na']}function PV(t){if(Ma(t))return!0;let e=t.formula.typed_constant_value;if(!e)return!1;let r=e.valueType;return r===__dcg_shared_module_exports__['aa']||r===__dcg_shared_module_exports__['ba']||r===__dcg_shared_module_exports__['ka']||r===__dcg_shared_module_exports__['la']||r===__dcg_shared_module_exports__['ma']||r===__dcg_shared_module_exports__['na']}function So(t){return t.formula.expression_type==="SINGLE_POINT"}function OV(t){return t.formula.expression_type==="POINT_LIST"}function Ma(t){return t.formula.expression_type==="POINT_LIST"||t.formula.expression_type==="SINGLE_POINT"}function kc(t){let e=pa(t);return!!(e&&e.type==="visualization"&&e.symbol==="boxplot")}function Gl(t){let e=pa(t);return!!(e&&e.type==="visualization"&&e.symbol==="dotplot")}function fd(t){let e=pa(t);return!!(e&&e.type==="visualization"&&e.symbol==="histogram")}function hx(t){var e=kc(t)||Gl(t)||fd(t);return e}function dE(t){return t.formula.expression_type==="TTEST"}function _V(t){return t.formula.expression_type==="STATS"}function Ic(t){let e=pa(t);return!!(e&&e.type==="distribution")}function FV(t){let{formula:e}=t;return e?!!e.is_discrete_distribution:!1}function _g(t){var r,i;let e=(i=(r=t.formula)==null?void 0:r.geometry)==null?void 0:i.valueType;if(e!==void 0)return __dcg_shared_module_exports__['va'](e,__dcg_shared_module_exports__['aa'])}function pa(t){if(t.controller.areDistributionsEnabled()&&t.latex)return(!t.cachedParseToplevelFunction||t.cachedParseToplevelFunction.latex!==t.latex)&&(t.cachedParseToplevelFunction={latex:t.latex,spec:__dcg_shared_module_exports__['Wb'](t.latex)}),t.cachedParseToplevelFunction.spec}function uE(t){return Fg(t)&&Ic(t)}function Fg(t){return!!t.formula.expression_type}function pE(t){return!!t.formula.is_concrete_list}function Al(t){return!uE(t)||pE(t)?!1:t.cdf.show}function gx(t){return t.cdf.min}function fx(t){return t.cdf.max}function RV(t){var e=YS(t.formula.cdf_min_default);return e===-1/0?"-\\infty":isFinite(e)?e+"":"-\\infty"}function NV(t){var e=YS(t.formula.cdf_max_default);return e===1/0?"\\infty":isFinite(e)?e+"":"\\infty"}function BV(t,e){t.cdf=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t.cdf),{show:e})}function Xb(t,e){t.cdf=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t.cdf),{min:e})}function Qb(t,e){t.cdf=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t.cdf),{max:e})}function mx(t){return!!t.formula&&t.formula.cdf_min_valid!==!1}function yx(t){return!!t.formula&&t.formula.cdf_max_valid!==!1}function hE(t){return!!t.formula&&t.formula.fill_opacity_valid!==!1}function KV(t){return!!t.formula&&t.formula.line_opacity_valid!==!1}function UV(t){return!!t.formula&&t.formula.point_opacity_valid!==!1}function gE(t){return!!t.formula&&t.formula.label_size_valid!==!1}function fE(t){return!!t.formula&&t.formula.label_angle_valid!==!1}function qV(t){return!!t.formula&&t.formula.point_size_valid!==!1}function HV(t){return!!t.formula&&t.formula.line_width_valid!==!1}function WA(t){return!!t.formula&&t.formula.color_latex_valid!==!1}function jA(t){return t.formula&&t.formula.color_latex_value}function $V(t){return t.formula&&t.formula.label_angle_value}function mE(t){var e=t.formula&&t.formula.cdf_evaluation;return isFinite(e)?e:0}function yE(t){return!(!__dcg_shared_module_exports__['ac'](t.formula.expression_type)||t.reconciledDragMode&&t.reconciledDragMode!=="NONE")}function zV(t){t.showLabel=__dcg_shared_module_exports__['xc'].showLabel,t.label=__dcg_shared_module_exports__['xc'].label,t.hidden=__dcg_shared_module_exports__['xc'].hidden,t.dragMode=__dcg_shared_module_exports__['xc'].dragMode,t.fill=__dcg_shared_module_exports__['xc'].fill,t.points=__dcg_shared_module_exports__['xc'].points,t.pointStyle=__dcg_shared_module_exports__['xc'].pointStyle,t.lines=__dcg_shared_module_exports__['xc'].lines,t.lineStyle=__dcg_shared_module_exports__['xc'].lineStyle,t.slider=__dcg_shared_module_exports__['yc'],t.latex="",t.labelSize="",t.labelOrientation="default",t.displayEvaluationAsFraction=__dcg_shared_module_exports__['xc'].displayEvaluationAsFraction,t.strictIntersection=__dcg_shared_module_exports__['xc'].strictIntersection,t.suppressTextOutline=!1,t.interactiveLabel=!1,t.editableLabelMode=__dcg_shared_module_exports__['xc'].editableLabelMode,__dcg_shared_module_exports__['oc'](__dcg_shared_module_exports__['wc'],t)}function WV(t){return!!t.formula.move_strategy}var SN=1,EN=2,DN=4,kN=8,xx=15,jV=12,YV=3,JV=1,XV=2,QV=3,ZV=4,wx=5,e1=6;function ip(t,e,r){let i=[],n=t.length;if(r===wx)for(let o=0;o<n;o+=2){let a=e.mapX(t[o]),s=e.mapY(t[o+1]);i.push(a,s)}else if(r===e1)for(let o=0;o<n;o+=2){let a=e.mapX(t[o+1]),s=e.mapY(t[o]);i.push(a,s)}else if(r===JV)for(let o=0;o<t.length;o+=2){let a=t[o],s=t[o+1],l=e.mapX(s*Math.cos(a)),c=e.mapY(s*Math.sin(a));i.push(l,c)}else if(r===XV)for(let o=0;o<t.length;o+=2){let a=t[o],s=t[o+1];s<0&&(s=0);let l=e.mapX(s*Math.cos(a)),c=e.mapY(s*Math.sin(a));i.push(l,c)}else if(r===QV)for(let o=0;o<t.length;o+=2){let a=t[o]*Math.PI/180,s=t[o+1],l=e.mapX(s*Math.cos(a)),c=e.mapY(s*Math.sin(a));i.push(l,c)}else if(r===ZV)for(let o=0;o<t.length;o+=2){let a=t[o]*Math.PI/180,s=t[o+1];s<0&&(s=0);let l=e.mapX(s*Math.cos(a)),c=e.mapY(s*Math.sin(a));i.push(l,c)}return i}function Rg(t,e,r){let[i,n,o,a]=t,{x:s,y:l}=e.mathToPixels.mapPoint({x:i,y:n}),{x:c,y:u}=e.mathToPixels.mapPoint({x:o,y:a}),h=__dcg_shared_module_exports__['Ha'](s,c,2)?0:c-s,p=__dcg_shared_module_exports__['Ha'](l,u,2)?0:u-l,g=(0-s)/h,y=(screen.width-s)/h,w=(0-l)/p,b=(screen.height-l)/p,D=1/0;isFinite(g)&&g<D&&(D=g),isFinite(y)&&y<D&&(D=y),isFinite(w)&&w<D&&(D=w),isFinite(b)&&b<D&&(D=b);let I=-1/0;isFinite(g)&&g>I&&(I=g),isFinite(y)&&y>I&&(I=y),isFinite(w)&&w>I&&(I=w),isFinite(b)&&b>I&&(I=b);let E,G,T,P;r===17?(E=s,G=l,T=c,P=u):r===19?(E=s,G=l,T=(1-I)*s+I*c,P=(1-I)*l+I*u):(E=(1-D)*s+D*c,G=(1-D)*l+D*u,T=(1-I)*s+I*c,P=(1-I)*l+I*u);let _=3;return{mapped:[s,l,c,u],clipped:yd([E,G,T,P],{xmin:-_,ymin:-_,xmax:e.screen.width+_,ymax:e.screen.height+_})}}function yd(t,e){return vx(t,e,xx,!0)}function bx(t,e,r,i){let n=[],o,a,s,l;i?(a=t[0],s=t[1],o=2,l=e(a,s),l&&n.push(a,s)):(a=t[t.length-2],s=t[t.length-1],o=0,l=e(a,s));for(var c=o;c<t.length;c+=2){let u=a,h=s,p=l;a=t[c],s=t[c+1],l=e(a,s),!(!l&&!p)&&(l&&p&&n.push(a,s),l&&!p&&(Array.prototype.push.apply(n,r(a,s,u,h)),n.push(a,s)),!l&&p&&Array.prototype.push.apply(n,r(u,h,a,s)))}return n}function vx(t,e,r,i){let n=e.xmin,o=e.xmax,a=e.ymin,s=e.ymax,l=function(D,I){return D>=n},c=function(D,I){return D<=o},u=function(D,I){return I>=a},h=function(D,I){return I<=s},p=function(D,I,E,G){D=D,I=I,E=E,G=G;let T=G-I;return[n,I+T*(n-D)/(E-D)]},g=function(D,I,E,G){D=D,I=I,E=E,G=G;let T=G-I;return[o,I+T*(o-D)/(E-D)]},y=function(D,I,E,G){D=D,I=I,E=E,G=G;let T=E-D;return[D+T*(a-I)/(G-I),a]},w=function(D,I,E,G){D=D,I=I,E=E,G=G;let T=E-D;return[D+T*(s-I)/(G-I),s]},b=t;return r&DN&&(b=bx(t,l,p,i)),r&EN&&(b=bx(b,u,y,i)),r&kN&&(b=bx(b,c,g,i)),r&SN&&(b=bx(b,h,w,i)),b}function t1(t,e,r){let i=[],n=t[0],o=n+r,a=[];i.push(a);for(let s=0;s<t.length;s+=2){let l=t[s],c=t[s+1];if(c<0&&(c=0),l>=o){for(a=[],i.push(a),n=t[s-2],o=n;l>=o;)o+=r;s-=4}else a.push(l,c)}if(e===0)for(let s=0;s<i.length;s++)i[s].push(0,0);else{let s=r/16,l=e;for(let c=0;c<i.length;c++){let u=i[c];n=u[0],o=u[u.length-2];for(let h=o;h>n;h-=s)u.push(h,l);u.push(n,l)}}return i}function bE(t,e){return t=t.slice(),t.push(t[t.length-2],e),t.push(t[0],e),[t]}function Ng(t,e,r){switch(t){case 1:return e1;case 8:case 5:case 2:return wx;case 6:return r.degreeMode?e?ZV:QV:e?XV:JV}}function ei(t,e){let r=t;r._dcgSaveClassName&&r._dcgSaveClassName(e)}function Br(t){let e=t;e._dcgRestoreClassName&&e._dcgRestoreClassName()}function r1(t,e){t.translate(e.left,e.top)}function MN(t,e){var r=document.createRange();r.selectNode(t);var i=r.getBoundingClientRect(),n=i.width>0&&i.height>0;if(!n)return;var o=window.getComputedStyle(t.parentElement),a=t.nodeValue||"";if(!a)return;var s=parseFloat(o.fontSize);let l=-.228*s,c=o.fontStyle+" "+o.fontWeight+" "+o.fontSize+" "+o.fontFamily;return{type:"text",rect:{left:i.left-e.pointCenterX,right:i.right-e.pointCenterY,top:i.top-e.pointCenterY,bottom:i.bottom-e.pointCenterY},text:a,color:o.color||"#000",font:c,y:i.height+l,hasOutline:e.hasOutline}}function i1(t,e,r){t.save(),t.font=e.font,r?(t.strokeStyle="#FFF",t.lineWidth=3,t.miterLimit=2,t.strokeText(e.text,0,e.y)):(t.fillStyle=e.color,t.fillText(e.text,0,e.y)),t.restore()}function n1(t,e,r){t.save(),r?(t.strokeStyle="#FFF",t.lineWidth=3):(e.fillColor&&(t.fillStyle=e.fillColor),e.strokeColor&&(t.strokeStyle=e.strokeColor)),t.beginPath();for(let i of e.instructions)switch(i.type){case"moveTo":t.moveTo(i.x,i.y);break;case"lineTo":t.lineTo(i.x,i.y);break;case"arcTo":t.arcTo(i.cx,i.cy,i.x,i.y,i.radius);break;case"ellipse":t.ellipse(i.centerX,i.centerY,i.radiusX,i.radiusY,i.rotation,i.startAngle,i.endAngle,i.anticlockwise);break}t.closePath(),r?t.stroke():(e.strokeColor&&t.stroke(),e.fillColor&&t.fill()),t.restore()}function TN(t,e){var r=t.getBoundingClientRect(),i=r.width>0&&r.height>0;if(i){var n=5,o=3,a=-n,s=r.width+n,l=-n,c=r.height+n,u=[{type:"moveTo",x:a+o,y:l},{type:"lineTo",x:s-o,y:l},{type:"arcTo",cx:s,cy:l,x:s,y:l+o,radius:o},{type:"lineTo",x:s,y:c-o},{type:"arcTo",cx:s,cy:c,x:s-o,y:c,radius:o},{type:"lineTo",x:a+o,y:c},{type:"arcTo",cx:a,cy:c,x:a,y:c-o,radius:o},{type:"lineTo",x:a,y:l+o},{type:"arcTo",cx:a,cy:l,x:a+o,y:l,radius:o}];return{type:"path",disableGlow:!0,rect:{left:r.left-e.pointCenterX,right:r.right-e.pointCenterX,top:r.top-e.pointCenterY,bottom:r.bottom-e.pointCenterY},instructions:u,strokeColor:"#C2C2C2",fillColor:"rgba(255,255,255,.75)"}}}function GN(t,e,r){var i=t.getBoundingClientRect(),n=i.width>0&&i.height>0;if(n){var o=i.width,a=parseFloat(e.borderTopWidth||"1px"),s=e.borderTopColor||"#000",l=[{type:"moveTo",x:0,y:0},{type:"lineTo",x:o,y:0},{type:"lineTo",x:o,y:a},{type:"lineTo",x:0,y:a}];return{type:"path",rect:{left:i.left-r.pointCenterX,right:i.right-r.pointCenterX,top:i.top-r.pointCenterY,bottom:i.bottom-r.pointCenterY},instructions:l,fillColor:s}}}function o1(t,e){var r=Math.sqrt(t[0]*t[0]+t[1]*t[1]),i=Math.sqrt(e[0]*e[0]+e[1]*e[1]),n=t[0]*e[0]+t[1]*e[1],o=Math.acos(n/(r*i));return t[0]*e[1]-t[1]*e[0]<0&&(o*=-1),o}function AN(t,e,r,i,n,o,a,s,l){var c=Math.cos(n),u=Math.sin(n),h=(t-s)/2,p=(e-l)/2,g=c*h+u*p,y=-u*h+c*p,w=r*r,b=i*i,D=g*g,I=y*y,E=Math.sqrt((w*b-w*I-b*D)/(w*I+b*D));o===a&&(E*=-1);var G=E*r*y/i,T=-E*i*g/r,P=(t+s)/2,_=(e+l)/2,x=c*G-u*T+P,L=u*G+c*T+_,R=[1,0],q=[(g-G)/r,(y-T)/i],K=[(-g-G)/r,(-y-T)/i],Y=o1(R,q),N=o1(R,K);return{centerX:x,centerY:L,radiusX:r,radiusY:i,startAngle:Y,endAngle:N,rotation:n,anticlockwise:a===0}}var a1={};function VN(t,e){var r=t+"-"+e,i=a1[r];if(i)return i;i=[],a1[r]=i;var n=e.split(" ");if(n.length!==4)return i;var o=parseFloat(n[0]),a=parseFloat(n[2]),s=parseFloat(n[1]),l=parseFloat(n[3]),c=a-o,u=l-s;function h(P){return(P-o)/c}function p(P){return(P-s)/u}var g="[0-9-.]+",y="(M"+g+" "+g+")",w="(L"+g+" "+g+")",b="(A"+g+" "+g+" "+g+" "+g+" "+g+" "+g+" "+g+")",D=new RegExp(y+"|"+w+"|"+b,"g"),I=t.match(D);if(!I||!I.length)return i;var E=NaN,G=NaN;for(let P of I){var T=P.substr(1).split(" ").map(parseFloat);switch(P[0]){case"M":E=h(T[0]),G=p(T[1]),i.push({type:"moveTo",x:E,y:G});break;case"L":E=h(T[0]),G=p(T[1]),i.push({type:"lineTo",x:E,y:G});break;case"A":let _=T[0]/c,x=T[1]/u,L=T[2],R=T[3],q=T[4],K=h(T[5]),Y=p(T[6]),N=AN(E,G,_,x,L,R,q,K,Y);E=K,G=Y,i.push(__dcg_shared_module_exports__['b']({type:"ellipse"},N));break}}return i}function LN(t,e){var r=t.childNodes[0];if(!(!r||r.nodeName!=="path")){var i=t.getBoundingClientRect(),n=i.width>0&&i.height>0;if(n){var o=r.getAttribute("d")||"",a=t.getAttribute("viewBox")||"",s=VN(o,a),l=window.getComputedStyle(t),c=i.width,u=i.height;s=__dcg_shared_module_exports__['M'](s);for(let h of s)switch(h.type){case"moveTo":case"lineTo":h.x*=c,h.y*=u;break;case"arcTo":h.x*=c,h.y*=u,h.cx*=c,h.cy*=u,h.radius*=c;break;case"ellipse":h.centerX*=c,h.centerY*=u,h.radiusX*=c,h.radiusY*=u;break;default:return h}return{type:"path",rect:{left:i.left-e.pointCenterX,right:i.right-e.pointCenterX,top:i.top-e.pointCenterY,bottom:i.bottom-e.pointCenterY},fillColor:l.color||"#000",instructions:s}}}}function s1(t,e,r){var i=window.getComputedStyle(t);if(i.borderTopWidth!=="0px"){let s=GN(t,i,e);s&&r.push(s)}for(var n=t.childNodes,o=0;o<n.length;o++){var a=n[o];if(a.nodeType===3){let s=MN(a,e);s&&r.push(s)}else if(a.nodeName==="svg"){let s=LN(a,e);s&&r.push(s)}else a.nodeType===1&&s1(a,e,r)}}function Cx(t,e){let r=[];if(e.hasBorder){let i=TN(t,e);i&&r.push(i)}return s1(t,e,r),r}function Sx(t,e){ei(e,"dcg-svg-label"),e.save(),Br(e);for(let r of t){switch(e.save(),r1(e,r.rect),r.type){case"path":r.disableGlow||n1(e,r,!0);break;case"text":r.hasOutline&&i1(e,r,!0);break;default:return r}e.restore()}for(let r of t){switch(e.save(),r1(e,r.rect),r.type){case"path":n1(e,r,!1);break;case"text":i1(e,r,!1);break;default:return r}e.restore()}e.restore()}var l1="v1.8";Us();function PN(t){function e(r){requestAnimationFrame(e),t(r)}requestAnimationFrame(e)}function ON(t){function e(){setTimeout(e,op),t(Date.now())}setTimeout(e,op)}var c1=En().timeoutLoop,op=0;typeof c1=="string"&&(op=parseFloat(c1),isNaN(op)&&(op=1e3/60));var d1=op>0?ON:PN;var u1=function(t,e,r){function i(s){return typeof s=="object"}function n(s){return typeof s=="function"}function o(){}function a(s,l){l===r&&(l=s,s=Object);function c(){var y=new u;return n(y.init)&&y.init.apply(y,arguments),y}function u(){}c.Bare=u;var h=o[t]=s[t],p=u[t]=c[t]=new o,g;return p.constructor=c,c.mixin=function(y){return u[t]=c[t]=a(c,y)[t],c},(c.open=function(y){if(g={},n(y)?g=y.call(c,p,h,c,s):i(y)&&(g=y),i(g))for(var w in g)e.call(g,w)&&(p[w]=g[w]);return n(p.init)||(p.init=s),c})(l)}return a}("prototype",{}.hasOwnProperty);var Tn=u1(function(t){var e=0,r="guid_"+Math.round(Math.random()*1e6)+"_"+new Date().getTime()+"_";t.init=function(){this.__observers={},this.__eventObservers={},this.__oldProperties={},this.__propertyComparators={},this.guid=r+ ++e},t.unobserveAll=function(){this.__observers={},this.__eventObservers={}},t.getProperty=function(i){return this[i]},t.getOldProperty=function(i){return this.__oldProperties[i]},t.setProperty=function(i,n){var o=this[i];this[i]=n;var a=this.__propertyComparators[i];if(a){if(a(o,n))return}else if(__dcg_shared_module_exports__['L'].isEqual(o,n))return;this.__oldProperties[i]=o,this.notifyPropertyChange(i)},t.setProperties=function(i){for(var n in i)i.hasOwnProperty(n)&&this.setProperty(n,i[n])},t.setPropertyComparator=function(i,n){this.__propertyComparators[i]=n},t.notifyPropertyChange=function(i){this.__callObservers(this.__observers,i,this)},t.observe=function(i,n){this.__addObservers(this.__observers,i,n)},t.unobserve=function(i){this.__removeObservers(this.__observers,i)},t.observeAndSync=function(i,n){this.observe(i,n);for(var o=i.split(" "),a=0;a<o.length;a++){var s=o[a].split("."),l=s[0];this.hasOwnProperty(l)&&n(l,this)}},t.triggerEvent=function(i,n){this.__callObservers(this.__eventObservers,i,n)},t.observeEvent=function(i,n){this.__addObservers(this.__eventObservers,i,n)},t.unobserveEvent=function(i){this.__removeObservers(this.__eventObservers,i)},t.__callObservers=function(i,n,o){var a=i[n];if(a)for(var s=0;s<a.length;s++)a[s].callback(n,o)},t.__removeObservers=function(i,n){for(var o=n.split(" "),a=0;a<o.length;a++){var s=o[a].split("."),l=s[0],c=s[1];if(l&&c){var u=i[l],h=[];if(!u)continue;for(var p=0;p<u.length;p++){var g=u[p];g.namespace!==c&&h.push(g)}i[l]=h}else if(l)delete i[l];else if(c)for(l in i)i.hasOwnProperty(l)&&this.__removeObservers(i,l+"."+c)}},t.__addObservers=function(i,n,o){for(var a=n.split(" "),s=0;s<a.length;s++){var l=a[s].split("."),c=l[0];if(!c)throw"Must supply a property to observe";var u=l[1],h={namespace:u,callback:o},p=i[c];p?p.push(h):i[c]=[h]}}});var wE=new Tn;d1(function(t){wE.triggerEvent("tick",t)});var xE=0;function Vl(t){return xE+=1,wE.observeEvent("tick."+xE,function(e,r){t(r)}),xE}function bd(t){wE.unobserveEvent("tick."+t)}at();function Dx(t){var e=[];for(let i of t)if(!(!i||typeof i!="string")){var r=i.split("-")[0];e.push(i),e.push(r);for(let n in xd){let o=xd[n];n.split("-")[0]===r&&o.useAsRoot&&e.push(n)}}return e}var xd={en:{displayName:"English (US)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},es:{displayName:"Espa\xF1ol (LATAM)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ES-ES.pdf",useAsRoot:!0},et:{displayName:"Eesti",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ru:{displayName:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_RU.pdf",useAsRoot:!1},da:{displayName:"Dansk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},de:{displayName:"Deutsch",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_DE.pdf",useAsRoot:!1},"pt-BR":{displayName:"Portugu\xEAs (Brasil)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!0},"pt-PT":{displayName:"Portugu\xEAs (Portugal)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ca:{displayName:"Catal\xE0",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},fr:{displayName:"Fran\xE7ais",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_FR.pdf",useAsRoot:!1},it:{displayName:"Italiano",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_IT.pdf",useAsRoot:!1},is:{displayName:"\xCDslenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},nl:{displayName:"Nederlands",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},no:{displayName:"Norsk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"sv-SE":{displayName:"Svenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!0},hu:{displayName:"Magyar",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},cs:{displayName:"\u010Ce\u0161tina",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},pl:{displayName:"Polski",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_PL.pdf",useAsRoot:!1},id:{displayName:"Bahasa Indonesia",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},vi:{displayName:"Ti\u1EBFng Vi\u1EC7t",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_VI.pdf",useAsRoot:!1},el:{displayName:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_EL.pdf",useAsRoot:!1},uk:{displayName:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ka:{displayName:"\u10E5\u10D0\u10E0\u10D7\u10E3\u10DA\u10D8",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},th:{displayName:"\u0E20\u0E32\u0E29\u0E32\u0E44\u0E17\u0E22",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},tr:{displayName:"T\xFCrk\xE7e",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_TR.pdf",useAsRoot:!1},"zh-CN":{displayName:"\u7B80\u4F53\u4E2D\u6587",useAsRoot:!0,userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-CN.pdf"},"zh-TW":{displayName:"\u7E41\u9AD4\u4E2D\u6587",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-TW.pdf",useAsRoot:!1},ko:{displayName:"\uD55C\uAD6D\uC5B4",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ja:{displayName:"\u65E5\u672C\u8A9E",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_JA.pdf",useAsRoot:!1}};var p1=`### Strings shared among tools and homepage


### 5313 English words, 950 English strings

account-shell-button-cancel = Cancel
account-shell-button-clear = Clear
account-shell-button-confirm-delete =
    { $count ->
        [one] Yes, delete graph
       *[other] Yes, delete graphs
    }
account-shell-button-contact-us = Contact Us
account-shell-button-create-own-activity = Create your own submission activity.
account-shell-button-delete = Delete
account-shell-button-download-braille = Download Braille Equations
account-shell-button-download-png = Download PNG
account-shell-button-download-svg = Download SVG
account-shell-button-duplicate = Duplicate
account-shell-button-duplicate-mac = Duplicate or Rename (cmd+shift+s)
account-shell-button-duplicate-pc = Duplicate or Rename (ctrl+shift+s)
account-shell-button-embed = Embed
account-shell-button-export-image = Export Image
account-shell-button-hide-browser-warning = Hide this warning.
account-shell-button-line-medium = Medium
account-shell-button-line-thick = Thick
account-shell-button-line-thin = Thin
account-shell-button-log-in = Log In
account-shell-button-mygraphs-attempt-recovery = Attempt recovery.
account-shell-button-mygraphs-cancel = Cancel
account-shell-button-mygraphs-close-graph-list = Close Graph List
account-shell-button-mygraphs-close-graph-preview = Close Graph Preview
account-shell-button-mygraphs-delete-graph = Delete Graph
account-shell-button-mygraphs-delete-title = Delete { $graphTitle }
account-shell-button-mygraphs-offline-try-again = offline. click to try again.
account-shell-button-mygraphs-save = Save
account-shell-button-mygraphs-try-again = Try again
account-shell-button-open-construction = Open Construction
account-shell-button-open-graph = Open Graph
account-shell-button-print = Print
account-shell-button-rename = Rename
account-shell-button-retry-now = Retry now
account-shell-button-save = Save
account-shell-button-sign-up = Sign Up
account-shell-button-submit = Submit
account-shell-button-submit-graph = Submit This Graph
account-shell-button-svg-options = SVG Options
account-shell-button-update-graph = Update your submission
account-shell-error-art-contest-logged-out = You must be logged in to enter the art contest.
account-shell-error-change-email-logged-out = You must be logged in to change your email.
account-shell-error-change-name-logged-out = You must be logged in to change your name.
account-shell-error-changing-name = There was an error changing your user name.
account-shell-error-consent-error = There was an error accepting your consent.
account-shell-error-consent-logged-out = You must be logged in to consent to data collection.
account-shell-error-create-account-unexpected = Sorry, there was an error creating your account.
account-shell-error-delete-graph-logged-out = You must be logged in to delete graphs.
account-shell-error-delete-graph-logged-out-2 = You must be logged in to delete a graph.
account-shell-error-delete-unexpected = Sorry, there was an unexpected error deleting this graph. Error { $code }.
account-shell-error-deletion-error = There was an error. Try again later?
account-shell-error-deletion-error-2 = Error while deleting your account.
account-shell-error-deletion-link-not-found = We can't find that deletion token. Perhaps it's been used already?
account-shell-error-email-already-registered = Sorry, someone has already registered with this email address.
account-shell-error-email-invalid = Please enter a valid email address.
account-shell-error-email-password-mismatch = Sorry, your email and password did not match.
account-shell-error-email-too-short = Please enter an email address that is at most { $num } characters.
account-shell-error-feedback-empty = Please enter your feedback
account-shell-error-feedback-unexpected = Sorry, there was an unexpected problem sending feedback. Error { $code }.
account-shell-error-graph-too-large = This graph is too large to save. The maximum allowable size is 5 MB.
account-shell-error-invalid-deletion-link = This is not a valid deletion link.
account-shell-error-invalid-recovery-link = This is not a valid recovery link.
account-shell-error-logged-in-register = You are already logged in. You must first log out to register as a different user.
account-shell-error-logging-in = Error logging in.
account-shell-error-logging-out = Error logging out.
account-shell-error-missing-email = Please enter your email address.
account-shell-error-missing-name = Please enter your name.
account-shell-error-missing-new-password = Please enter your new password.
account-shell-error-missing-password = Please enter your password.
account-shell-error-mygraphs-check-connection = Check your internet connection?
account-shell-error-mygraphs-error-deleting = Error deleting.
account-shell-error-mygraphs-error-loading = Error loading graph
account-shell-error-name-too-long = Please enter a name that is at most { $num } characters.
account-shell-error-new-password-too-long = Please enter a new password that is at most { $num } characters.
account-shell-error-new-password-too-short = Please enter a new password that is at least { $num } characters.
account-shell-error-password-same-as-old = New password cannot match old password.
account-shell-error-password-too-long = Please enter a password that is at most { $num } characters.
account-shell-error-password-too-short = Please enter a password that is at least { $num } characters.
account-shell-error-passwords-do-not-match = The passwords that you entered did not match. Please try again.
account-shell-error-problem-resetting-password = Problem resetting your password. Please try again.
account-shell-error-recover-link-not-found = Sorry, we can't find that recovery link. Perhaps it's been used already?
account-shell-error-recover-password-too-short = Passwords must be at least { $num } characters long
account-shell-error-recover-unrecognized-email = Sorry, we could not find any users registered with this email address.
account-shell-error-request-error = Error while making request.
account-shell-error-save-art-contest = Error saving. Please try again later.
account-shell-error-save-graph = Sorry, there was an unexpected error saving your graph. Error { $code }.
account-shell-error-save-graph-logged-out = You must be logged in to save graphs.
account-shell-error-setting-email = Error setting new email.
account-shell-error-sharing-link = Sorry, there was an error generating a link to your graph. Check your internet connection.
account-shell-error-something-went-wrong = Something went wrong, please report this to desmos.com support. (Error { $error_num })
account-shell-error-submitting = Error submitting. Please try again later.
account-shell-error-unexpected-error = Unexpected error.
account-shell-error-unknown = Sorry! Something went wrong. Please try again later.
account-shell-error-update-account-settings-logged-out = You must be logged in to update your account settings.
account-shell-error-update-graph-logged-out = You must be logged in to update graphs.
account-shell-error-user-info-logged-out = You must be logged in to retrieve user information.
account-shell-error-verifying-email = Sorry, there was a problem verifying your email.
account-shell-error-view-graphs-logged-out = You must be logged in to view saved graphs.
account-shell-heading-3dcalc-page-title = Desmos | 3D Graphing Calculator
account-shell-heading-artist-statement = Your Artist Statement
account-shell-heading-birth-year = Your Birth Year
account-shell-heading-contact-us = Contact Us
account-shell-heading-country = Your Country
account-shell-heading-download-instructions = Download Instructions
account-shell-heading-duplicate-construction = Duplicate This Construction
account-shell-heading-duplicate-graph = Duplicate This Graph
account-shell-heading-email = Your Email
account-shell-heading-email-details = This will never be shared, but please provide an email where we can reach you!
account-shell-heading-embossers = Tactile Graphics Embossers
account-shell-heading-embossing-instructions = Embossing Instructions
account-shell-heading-export-graph = Export Your Graph
account-shell-heading-export-size = Size
account-shell-heading-geometry-page-title = Desmos | Geometry
account-shell-heading-graphingcalc-page-title = Desmos | Graphing Calculator
account-shell-heading-line-thickness = Line Thickness
account-shell-heading-math-art-contest = Global Math Art Contest
account-shell-heading-mygraphs-examples = Examples
account-shell-heading-mygraphs-recovered-work = Recovered Work
account-shell-heading-mygraphs-saved-constructions = Saved Constructions
account-shell-heading-mygraphs-saved-graphs = Saved Graphs
account-shell-heading-name = Your Name
account-shell-heading-name-details = This will be public
account-shell-heading-rename-graph = Rename This Graph
account-shell-heading-resources = Resources
account-shell-heading-save-construction = Save This Construction
account-shell-heading-save-graph = Save This Graph
account-shell-heading-share-graph = Share Your Graph
account-shell-heading-submit-graph = Submit This Graph
account-shell-heading-title-mygraphs-search = Search
account-shell-heading-tours = Tours
account-shell-heading-unsupported-browser = Unsupported Browser
account-shell-label-account-information = Account Information
account-shell-label-advanced-preferences = Advanced
account-shell-label-age-13-14 = Age 13\u201314
account-shell-label-age-15-16 = Age 15\u201316
account-shell-label-age-17-18 = Age 17\u201318
account-shell-label-artiist-statement-description = In 2-3 sentences, describe the inspiration behind your graph.
account-shell-label-artist-statement-placeholder = Tell us about your graph...
account-shell-label-beta = Beta
account-shell-label-betchacant-loading = Challenge accepted...
account-shell-label-birth-year-placeholder = Birth Year
account-shell-label-country-placeholder = Your Country
account-shell-label-created-days-ago = { $number } days ago
account-shell-label-created-hours-ago = { $number } hours ago
account-shell-label-created-last-week = last week
account-shell-label-created-minutes-ago = { $number } minutes ago
account-shell-label-created-on-date = on { $month } { $day }, { $year }
account-shell-label-created-one-hour-ago = one hour ago
account-shell-label-created-one-minute-ago = one minute ago
account-shell-label-created-seconds-ago = less than a minute ago
account-shell-label-created-weeks-ago = { $number } weeks ago
account-shell-label-created-yesterday = yesterday
account-shell-label-delete-graph-modal-title = Delete Graph
account-shell-label-email-address = Email Address
account-shell-label-email-placeholder = So we can write back!
account-shell-label-export-size-large-rectangle = Large Rectangle
account-shell-label-export-size-large-square = Large Square
account-shell-label-export-size-medium-rectangle = Medium Rectangle
account-shell-label-export-size-medium-square = Medium Square
account-shell-label-export-size-small-square = Small Square
account-shell-label-feature-flag-actions = Actions
account-shell-label-feedback = Feedback
account-shell-label-feedback-email = Email address so we can respond! (optional)
account-shell-label-feedback-message = Questions? Feedback?
account-shell-label-feedback-placeholder = Write to us!
account-shell-label-feedback-sending = Sending...
account-shell-label-full-name = Full Name
account-shell-label-graph-actions = Graph actions
account-shell-label-graph-title = Title
account-shell-label-help = Help
account-shell-label-help-menu = Help Menu
account-shell-label-language = Language
account-shell-label-loading = Loading...
account-shell-label-math-art-contest = Global Math Art Contest
account-shell-label-month-apr = Apr
account-shell-label-month-aug = Aug
account-shell-label-month-dec = Dec
account-shell-label-month-feb = Feb
account-shell-label-month-jan = Jan
account-shell-label-month-jul = Jul
account-shell-label-month-jun = Jun
account-shell-label-month-mar = Mar
account-shell-label-month-may = May
account-shell-label-month-nov = Nov
account-shell-label-month-oct = Oct
account-shell-label-month-sep = Sep
account-shell-label-mygraphs-example = example
account-shell-label-mygraphs-last-saved = last saved: { $date }
account-shell-label-mygraphs-no-unsaved-changes = no unsaved changes
account-shell-label-mygraphs-unsaved-graph = unsaved graph
account-shell-label-no-unsaved-changes = No Unsaved Changes
account-shell-label-open-graph-mac = { $open_graph } (cmd+o)
account-shell-label-open-graph-pc = { $open_graph } (ctrl+o)
account-shell-label-privacy-policy-changed = We\u2019ve made changes to our privacy policy!
account-shell-label-save-changes-mac = Save Changes (cmd+s)
account-shell-label-save-changes-pc = Save Changes (ctrl+s)
account-shell-label-saving-graph = Saving graph...
account-shell-label-share = share
account-shell-label-share-graph = Share Graph
account-shell-label-share-link = Share this link:
account-shell-label-submission-already-received = Your Art Contest Submission
account-shell-label-submission-received = Submission Received!
account-shell-label-submitting = Submitting...
account-shell-label-success = Success!
account-shell-label-you-are-eligible = You're eligible to participate in the 2022 Global Math Art Contest!
account-shell-label-zoom = Zoom: { $value }%
account-shell-link-accessibility-conformance-report = Accessibility Conformance Report
account-shell-link-account-settings = Account Settings
account-shell-link-download-chrome = Click here to download Google Chrome.
account-shell-link-email-support = Email Our Support Team
account-shell-link-getting-started = Getting Started
account-shell-link-help = Help
account-shell-link-help-center = Help Center
account-shell-link-keyboard-shortcuts = Keyboard Shortcuts
account-shell-link-learn-more = Learn More
account-shell-link-mygraphs-log-in = Log In
account-shell-link-mygraphs-sign-up = Sign Up
account-shell-link-privacy = Privacy Policy
account-shell-link-share-thoughts = Share your thoughts!
account-shell-link-sign-out = Sign Out
account-shell-link-terms = Terms of Service
account-shell-link-user-guide = Desmos User Guide
account-shell-link-video-tutorials = Video Tutorials
account-shell-narration-back = Back
account-shell-narration-clear-selected-country = Clear Selected Country
account-shell-narration-graph-preview = Graph Preview
account-shell-narration-image-download = Image Download
account-shell-narration-language-menu = Language Options Menu
account-shell-narration-mygraphs-open-graph = Open graph
account-shell-narration-share-options = Share Options
account-shell-narration-size-options = Size Options
account-shell-text-3d-confirm-leave = Are you sure you want to leave this construction? Your unsaved work will be lost.
account-shell-text-advanced-preferences-instructions = Try these advanced features. Feel free to send any questions or feedback to support@desmos.com.
account-shell-text-alt-text-art-contest = Earth with students from different countries and a red ribbon around it. Illustration.
account-shell-text-alt-text-success = Five people standing around and talking about an exciting piece of art in a museum. Illustration.
account-shell-text-art-contest-about-paragraph = Want to share your awesome graph with the world? Students ages 13+ can enter the Desmos Global Math Art Contest before<1> January 15th </1>for a chance to be featured on our website and win other prizes! <2>Learn more</2>
account-shell-text-art-contest-congratulations = Congratulations, and keep graphing!
account-shell-text-art-contest-copyright-agreement = I pledge that (a) this is my original work and (b) this isn't based on copyrighted material.
account-shell-text-art-contest-legal-disclaimer = By submitting this graph, you acknowledge that Desmos Studio, PBC may, at its discretion, post it publicly at the contest website and/or on social media channels.
account-shell-text-art-contest-notice-default = Once you've created a graph, you can submit it here to participate in the Global Math Art Contest!
account-shell-text-art-contest-notice-login = Please create an account or sign in to participate in the Global Math Art Contest!
account-shell-text-art-contest-submission-already-received = <1>Your previous submission to the Global Math Art Contest was successfully received! You can click the link below to update your submission, any time before January 15th.</1>
account-shell-text-art-contest-success-paragraph = If you'd like to revise your submission, feel free to resubmit anytime before<1> January 15th</1>{"."} We'll only look at the most recent submission.
account-shell-text-artcontest-ineligible = <1><2>Based on your age and location, we aren\u2019t able to accept a graph submission from you this year.</2><3>Keep up the awesome graphing! There will be new contests every year.</3></1>
account-shell-text-check-recovery-link = Please check your email for a password recovery link.
account-shell-text-confirm-leave = Are you sure you want to leave this graph? Your unsaved work will be lost.
account-shell-text-construction-cleared = Construction Cleared.
account-shell-text-contest-submit-by-teacher = Are you a teacher looking to submit your students' graphs?
account-shell-text-contest-under-16 = Under 16?
account-shell-text-contest-verify-eligibility = Verify your eligibility
account-shell-text-copy-of-title = [Copy of] { $originalTitle }
account-shell-text-delete-graphs-confirmation =
    Are you sure you want to delete { $count ->
        [one] "{ $title }"
       *[other] the { $count } selected graphs
    }?
account-shell-text-download-instructions = To download, right click on the image of the graph select "Save As." You might also be able to click and drag the image onto your desktop.
account-shell-text-embossing-etc-print = Set paper size to { $size }. Then click "Edit" and select File > Emboss.
account-shell-text-embossing-etc-save = Save this image. Open Firebird, select File > Open > Image File, and open the image.
account-shell-text-embossing-vpmax-print = Right click image and select "print". Set paper size to { $size }.
account-shell-text-embossing-vpmax-save = Right click graph image and save to desktop.
account-shell-text-error = error
account-shell-text-feature-flag-actions-description = Make graphs interactive by defining rules for responding to clicks or to the passage of time.
account-shell-text-feedback-sent = Thanks! We'll be in touch.
account-shell-text-geometry-confirm-leave = Are you sure you want to leave this construction? Your unsaved work will be lost.
account-shell-text-graph-cleared = Graph cleared.
account-shell-text-graph-uses-advanced-features = This graph uses advanced features.
account-shell-text-local-regulations-notice = Local regulations require you to submit your graph through your teacher or guardian. Share this link with them:
account-shell-text-logged-in = Logged in successfully!
account-shell-text-login-window-blocked-apple = Login window blocked. Please allow popups from desmos.com to sign in with Apple
account-shell-text-login-window-blocked-google = Login window blocked. Please allow popups from desmos.com to sign in with Google.
account-shell-text-maintenance-mode = Desmos is in Maintenance Mode.
account-shell-text-mygraphs-attempting-recovery = Attempting recovery...
account-shell-text-mygraphs-count-more = { $count } more...
account-shell-text-mygraphs-current-construction = Current Construction
account-shell-text-mygraphs-current-graph = Current Graph
account-shell-text-mygraphs-deleting = Deleting...
account-shell-text-mygraphs-loading = Loading...
account-shell-text-mygraphs-lost-work = Lost work?
account-shell-text-mygraphs-maintenance-mode = Desmos is temporarily in maintenance mode. You can open example graphs, but won't be able to sign in, open your graphs, or save any changes. We're so sorry for the inconvenience.
account-shell-text-mygraphs-new-blank-graph = New Blank Graph
account-shell-text-mygraphs-new-construction = New Construction
account-shell-text-mygraphs-no-examples-match-search = No examples match your search.
account-shell-text-mygraphs-no-saved-graphs = No saved graphs yet.
account-shell-text-mygraphs-no-search-results = No saved graphs match your search.
account-shell-text-mygraphs-no-unsaved-graphs = Couldn't find any unsaved graphs.
account-shell-text-mygraphs-opened-graph = Opened '{ $graphTitle }'
account-shell-text-mygraphs-opening = Opening...
account-shell-text-mygraphs-or = or
account-shell-text-mygraphs-search-by-title = search by title
account-shell-text-mygraphs-share-thoughts = Share your thoughts!
account-shell-text-mygraphs-slow-big-constructions = This can take a little while for big constructions...
account-shell-text-mygraphs-slow-big-graphs = This can take a little while for big graphs...
account-shell-text-mygraphs-submit-to-contest = <1>Submit this graph to the <2>Global Math Art Contest!</2></1>
account-shell-text-mygraphs-synced = synced!
account-shell-text-mygraphs-to-save-constructions = to save your constructions!
account-shell-text-mygraphs-to-save-graphs = to save your graphs!
account-shell-text-mygraphs-updating-graphs = updating graphs...
account-shell-text-mygraphs-version = Version
account-shell-text-new-construction-created = New construction created.
account-shell-text-new-graph-created = New graph created.
account-shell-text-or = or
account-shell-text-saved = saved
account-shell-text-share-submit-to-contest = <1>Submit this graph to the <2>Global Math Art Contest!</2></1>
account-shell-text-unsupported-browser-android = Desmos works best on your version of Android if you use the Chrome Browser.
account-shell-text-untitled = Untitled
account-shell-text-untitled-graph = Untitled Graph
shared-button-accept = Accept
shared-button-cancel = Cancel
shared-button-change-email-address = Change email address
shared-button-change-email-and-password = Change email and password
shared-button-close-dialog = Close Dialog
shared-button-confirm-name = Confirm Name
shared-button-continue-to-desmos = Continue to Desmos
shared-button-create-account = Create Account
shared-button-delete-account-question = Delete your Desmos account?
shared-button-email-address-narrow = Email
shared-button-email-address-wide = Email Address
shared-button-external-account-narrow = External
shared-button-external-account-wide = External Account
shared-button-go-to-account-settings = Go to Account Settings
shared-button-google-account-narrow = Google
shared-button-google-account-wide = Google Account
shared-button-learn-more-capitalized = Learn More
shared-button-login = Log in
shared-button-login-capitalized = Log In
shared-button-more-options-menu = More Options
shared-button-recover-password = Recover Password
shared-button-save = Save
shared-button-send-delete-account-email = Send Delete Account Email
shared-button-send-email = Send Email
shared-button-sign-in-with-apple = Sign in with Apple
shared-button-sign-in-with-google = Sign in with Google
shared-button-try-again = Didn't work? Try again!
shared-calculator-button-braille-mode-nemeth = Nemeth
shared-calculator-button-braille-mode-ueb = UEB
shared-calculator-button-clear = clear
shared-calculator-button-clear-all = clear all
shared-calculator-button-controlbar-functions = functions
shared-calculator-button-language = Language
shared-calculator-button-mac = Mac Shortcuts
shared-calculator-button-print = Print
shared-calculator-button-reverse-contrast = Reverse Contrast
shared-calculator-button-windows-chrome = Windows / ChromeOS Shortcuts
shared-calculator-error-action-merge-free-variable = Cannot combine an action that depends on free variable '{ $symbol }'.
shared-calculator-error-add-arguments-to-definition-many = Try including '{ $symbols }' and '{ $lastSymbol }' as arguments by defining the function as '{ $newSignature }'.
shared-calculator-error-add-arguments-to-definition-one = Try including '{ $lastSymbol }' as an argument by defining the function as '{ $newSignature }'.
shared-calculator-error-add-type-error = Cannot add { $symbol1 } and { $symbol2 }.
shared-calculator-error-adjacent-numbers = Sorry, I don't know what to do with adjacent numbers '{ $left }' and '{ $right }'. Try using parentheses or a '*' symbol.
shared-calculator-error-and-type-error = Cannot apply { $symbol } to { $symbol1 } and { $symbol2 }.
shared-calculator-error-ans-undefined = The previous expression didn't define any value for ans.
shared-calculator-error-assignments-unsupported = This calculator does not support defining variables.
shared-calculator-error-bad-implicit-call = Use parentheses around the argument of '{ $symbol }'.
shared-calculator-error-bad-integral-bound-dependency = Integration bounds can't depend on integration variable '{ $symbol }'.
shared-calculator-error-bad-list-comprehension-input-dependency = List comprehension input list can't depend on input variable '{ $symbol }'.
shared-calculator-error-bad-log-exponent = Only { $form } is supported. Otherwise, use parens.
shared-calculator-error-bad-product-bound-dependency = Product bounds can't depend on product index '{ $symbol }'.
shared-calculator-error-bad-sample-size = Sample size must be a finite, non-negative number.
shared-calculator-error-bad-sum-bound-dependency = Summation bounds can't depend on summation index '{ $symbol }'.
shared-calculator-error-bad-symbol-context = You can't use '{ $symbol }' in this context.
shared-calculator-error-bad-trig-exponent = Only { $form1 } and { $form2 } are supported. Otherwise, use parens.
shared-calculator-error-bad-tuple-dimensions = Points may only have { $symbol } coordinates.
shared-calculator-error-binary-operator-missing-operand = You need something on both sides of the '{ $symbol }' symbol.
shared-calculator-error-blank-expression = You haven't written anything yet.
shared-calculator-error-boxplot-breadth-invalid = Invalid height. Try using any number.
shared-calculator-error-boxplot-offset-invalid = Invalid offset. Try using any number.
shared-calculator-error-cannot-redefine = You can't redefine '{ $symbol }' because it's already defined.
shared-calculator-error-cannot-redefine-root = You can't define '{ $symbol }' because '{ $symbolRoot }' is already defined.
shared-calculator-error-cannot-subscript = '{ $symbol }' cannot have a subscript.
shared-calculator-error-cdf-max-invalid = Invalid cdf max. Try using any number.
shared-calculator-error-cdf-max-less-than-min = Invalid cdf limits. Min should be less than max.
shared-calculator-error-cdf-min-invalid = Invalid cdf min. Try using any number.
shared-calculator-error-cdf-too-many-arguments = 'cdf' should be called on a distribution with at most two numbers. { $recommendation }
shared-calculator-error-cdf-too-many-arguments-recommendation = For example, try typing: D.cdf(-1,1) where D=normaldist().
shared-calculator-error-cdf-wrong-arity = 'cdf' should be called on a distribution with at least one number. { $recommendation }
shared-calculator-error-cdf-wrong-arity-recommendation = For example, try typing: D.cdf(x) where D=normaldist().
shared-calculator-error-clickable-object-assignment-not-defined = "{ $symbol }" is not defined. Try using a different variable or adding a slider.
shared-calculator-error-clickable-object-assignment-not-identifier = Invalid symbol. Try using a single letter.
shared-calculator-error-clickable-object-invalid-expression = Can't evaluate this. Try a number or simple expression.
shared-calculator-error-colon-missing-condition = The left side of a ':' must be a condition, like 'x>1'.
shared-calculator-error-color-arity = '{ $symbol }' should be called with 3 arguments. { $recommendation }
shared-calculator-error-color-arity-recommendation = For example, try typing: { $recommendation }.
shared-calculator-error-color-not-assigned = To use a color, you must assign it to a variable.
shared-calculator-error-combine-type-error = Cannot combine { $symbol1 } and { $symbol2 }.
shared-calculator-error-comparator-type-error = Cannot compare { $symbol1 } to { $symbol2 }.
shared-calculator-error-complicated-double-inequality = We only support solved double inequalities. Try deleting one side of the inequality.
shared-calculator-error-complicated-polar-implicit = Polar equations must be linear in r.
shared-calculator-error-constant-unsupported = This calculator does not support the constant '{ $symbol }'.
shared-calculator-error-deeply-nested = Definitions are nested too deeply.
shared-calculator-error-dependency-cycle = '{ $symbols }' and '{ $lastSymbol }' can't be defined in terms of each other.
shared-calculator-error-derivative-missing-body = What do you want to take the derivative of?
shared-calculator-error-derivative-type-error = Cannot take the derivative of { $symbol }.
shared-calculator-error-derivative-variable-type-error = Cannot take derivative with respect to '{ $symbol1 }' because it is { $symbol2 }.
shared-calculator-error-differential-with-superscript = Integration variable cannot have a superscript.
shared-calculator-error-distribution-as-function = Cannot call distribution '{ $symbol }' as a function. Try '{ $symbol }.pdf(x)'.
shared-calculator-error-divide-type-error = Cannot divide { $symbol1 } by { $symbol2 }.
shared-calculator-error-domain-max-invalid = Invalid domain max. Try using any number.
shared-calculator-error-domain-max-less-than-min = Invalid domain limits. Min should be less than max.
shared-calculator-error-domain-min-invalid = Invalid domain min. Try using any number.
shared-calculator-error-dot-lhs-type-error = Cannot call '{ $symbol }' on { $type }.
shared-calculator-error-duplicate-update-rules = An action cannot specify multiple update rules for '{ $symbol }'.
shared-calculator-error-empty-paren = Parentheses cannot be empty.
shared-calculator-error-empty-pipe = Absolute value symbol cannot be empty.
shared-calculator-error-empty-radical = Radical cannot be empty.
shared-calculator-error-empty-radical-index = Radical index cannot be empty.
shared-calculator-error-empty-square-bracket = Square brackets cannot be empty.
shared-calculator-error-empty-subscript = Subscripts cannot be empty.
shared-calculator-error-empty-superscript = Superscripts cannot be empty.
shared-calculator-error-equation-required = Try adding an equals sign to turn this into an equation.
shared-calculator-error-equation-required-symbol = Try adding '{ $lhs }' to the beginning of this equation.
shared-calculator-error-equations-unsupported = This calculator does not support this type of equation.
shared-calculator-error-event-handler-type-error = This should be an action. Try '{ $example }'.
shared-calculator-error-exponent-type-error = Cannot raise { $symbol1 } to { $symbol2 }.
shared-calculator-error-feature-unavailable = This feature is not available in the current calculator.
shared-calculator-error-fraction-empty = You need a numerator and denominator for your fraction.
shared-calculator-error-fraction-missing-denominator = You need a denominator for the bottom of your fraction.
shared-calculator-error-fraction-missing-numerator = You need a numerator for the top of your fraction.
shared-calculator-error-function-definition-unsupported = This calculator does not support function definitions.
shared-calculator-error-function-not-defined = Function '{ $dependency }' is not defined.
shared-calculator-error-function-type-error-1 = Function '{ $fn }' cannot be applied to { $arg }.
shared-calculator-error-function-type-error-2 = Function '{ $fn }' cannot be applied to { $arg1 } and { $arg2 }.
shared-calculator-error-function-type-error-many = Function '{ $fn }' cannot be applied to these arguments.
shared-calculator-error-function-unsupported = This calculator does not support the '{ $symbol }' function.
shared-calculator-error-geometry-length-type-error = Function '{ $fn }' cannot be applied to { $arg } in the geometry calculator. Use '{ $alternativeFn }' to find the number of elements in a list.
shared-calculator-error-heterogeneous-list = All elements of a list must have the same type.
shared-calculator-error-identifier-as-function = '{ $symbol }' is a function. Try using parentheses.
shared-calculator-error-illegal-bin-width = The second argument to '{ $symbol }' must be a positive number.
shared-calculator-error-illegal-dot-call = Function '{ $symbol }' cannot be called with dot notation.
shared-calculator-error-implicits-disabled = Plotting implicit equations and inequalities is disabled.
shared-calculator-error-incorrect-list-comprehension-input = Inputs to a list comprehension must set a variable equal to a list. Try i=[1...10].
shared-calculator-error-incorrect-product-lower-bound = Lower bound of a product must set a variable equal to a number. Try n=1.
shared-calculator-error-incorrect-sum-lower-bound = Lower bound of a sum must set a variable equal to a number. Try n=1.
shared-calculator-error-index-type-error = Cannot index { $symbol1 } with { $symbol2 }.
shared-calculator-error-inequalities-disabled = Plotting inequalities is disabled.
shared-calculator-error-inequalities-unsupported = This calculator does not support inequalities.
shared-calculator-error-inequality-chain-too-long = Cannot chain more than 2 inequalities.
shared-calculator-error-integral-argument-type-error = Cannot take the integral of { $symbol }.
shared-calculator-error-integral-lower-bound-type-error = Lower bound of an integral cannot be { $symbol }.
shared-calculator-error-integral-missing-body = What do you want to take the integral of?
shared-calculator-error-integral-missing-bound = Integrals must have upper and lower bounds.
shared-calculator-error-integral-missing-differential = Integrand must end with an integration variable, like dx.
shared-calculator-error-integral-upper-bound-type-error = Upper bound of an integral cannot be { $symbol }.
shared-calculator-error-invalid-dependent-first-table-column = This column header can't be defined elsewhere in the calculator.
shared-calculator-error-invalid-double-inequality-variables = We only plot double inequalities of x and y.
shared-calculator-error-invalid-first-table-column = First column may not be { $most } or { $last }.
shared-calculator-error-invalid-half-empty-range = Range must have an upper and lower bound.
shared-calculator-error-invalid-implicit-variables = We only support implicit equations of x and y.
shared-calculator-error-invalid-inequality-variables = We only plot inequalities of x and y, or r and \u03B8.
shared-calculator-error-invalid-lhs = Sorry, you can't graph { $symbol } as a function of anything yet.
shared-calculator-error-invalid-operator-name = Operator names may only contain letters.
shared-calculator-error-invalid-regression-parameter = '{ $symbol }' may not be used as a regression parameter. Try using a list.
shared-calculator-error-invalid-subscript = Subscripts may only contain letters and digits. '{ $symbol }' is not allowed.
shared-calculator-error-invalid-table-entry = Table entries must be simple expressions. { $supplement }
shared-calculator-error-invalid-table-header = Table headers must be simple expressions. { $supplement }
shared-calculator-error-list-comprehension-input-type-error = An input to a list comprehension must be a list, but { $identifier } is { $actual }. Try { $identifier }=[1...10].
shared-calculator-error-list-type-error = Cannot store { $symbol1 } in a list.
shared-calculator-error-log-scale-box-plot = Cannot plot a box plot on a log scale.
shared-calculator-error-log-scale-dot-plot = Cannot plot a dot plot on a log scale.
shared-calculator-error-log-scale-histogram = Cannot plot a histogram on a log scale.
shared-calculator-error-log-scale-type-error = Cannot plot { $symbol } on a log scale.
shared-calculator-error-logbase-unsupported = This calculator does not support specifying the base of a logarithm. Try 'log' or 'ln'.
shared-calculator-error-malformed-list = Lists are written like this: [1, 2, 3].
shared-calculator-error-malformed-point = Points are written like this: (1, 2).
shared-calculator-error-matrix-add-dimensions = Cannot add matrices with different dimensions.
shared-calculator-error-matrix-assignment = This calculator does not support this type of variable definition. Try using 'New Matrix'.
shared-calculator-error-matrix-element-type-error = Cannot use { $arg } as an element of a matrix.
shared-calculator-error-matrix-fractional-power = A matrix can only be raised to integer powers.
shared-calculator-error-matrix-invalid-variable = Cannot use '{ $symbol }' as a variable.
shared-calculator-error-matrix-multiply-dimensions = Cannot multiply matrices with incompatible dimensions.
shared-calculator-error-matrix-power-dimensions = Only square matrices can be raised to a power.
shared-calculator-error-matrix-subtract-dimensions = Cannot subtract matrices with different dimensions.
shared-calculator-error-max-list-size = Lists may not have more than { $maxListSize } elements.
shared-calculator-error-method-requires-list = '{ $symbol }' requires a list. For example, try typing: { $recommendation }.
shared-calculator-error-mismatched-braces = Expected '{ $symbol1 }' to match '{ $symbol2 }'.
shared-calculator-error-mismatched-double-inequality = Double inequalities must both go the same way, e.g. { $example }.
shared-calculator-error-multiply-defined = You've defined '{ $dependency }' in more than one place. Try deleting some of the definitions of '{ $dependency }'.
shared-calculator-error-multiply-type-error = Cannot multiply { $symbol1 } by { $symbol2 }.
shared-calculator-error-negative-type-error = Cannot negate { $symbol }.
shared-calculator-error-non-arithmetic-range = Ranges must be arithmetic sequences.
shared-calculator-error-non-list-double-reducer = Both arguments of '{ $symbol }' must be lists. For example, try typing: { $recommendation }.
shared-calculator-error-non-list-parameterized-reducer = The first argument of '{ $symbol }' must be a list. For example, try typing: { $recommendation }.
shared-calculator-error-non-singular-inverse = Singular matrices do not have an inverse.
shared-calculator-error-non-square-determinant = Only square matrices have a determinant.
shared-calculator-error-non-square-inverse = Only square matrices have an inverse.
shared-calculator-error-non-square-trace = Only square matrices have a trace.
shared-calculator-error-optimization-error = We couldn't find any region where this model is defined.
shared-calculator-error-ordered-pair-access-type-error = Cannot access a coordinate of { $symbol }.
shared-calculator-error-parameter-already-defined = You can't use '{ $dependency }' as a parameter of this function because '{ $dependency }' is already defined.
shared-calculator-error-parse-error = Sorry, I don't understand this.
shared-calculator-error-pdf-wrong-arity = 'pdf' should be called on a distribution with a number. { $recommendation }
shared-calculator-error-pdf-wrong-arity-recommendation = For example, try typing: D.pdf(x) where D=normaldist().
shared-calculator-error-percent-missing-of = '%' must be used with 'of'. Try '25% of 12'.
shared-calculator-error-piecewise-branch-length-error = When a piecewise condition depends on a free variable (like "{ $symbol }") and its branches are lists, the lists must have the same length.
shared-calculator-error-piecewise-branch-type-error = Cannot use { $symbol1 } and { $symbol2 } as the branches in a piecewise. Every branch must have the same type.
shared-calculator-error-piecewise-condition-type-error = The condition in a piecewise expression must be { $symbol1 } but was { $symbol2 }.
shared-calculator-error-piecewise-missing-condition = A piecewise expression must have at least one condition.
shared-calculator-error-piecewise-part-missing-condition = Every part of a piecewise expression must have a condition except the last.
shared-calculator-error-point-type-error = Cannot use { $symbol1 } as a coordinate of { $symbol2 }.
shared-calculator-error-points-unsupported = This calculator does not support points.
shared-calculator-error-prime-without-paren = Primed function calls must use parentheses.
shared-calculator-error-primed-function-arity = Prime notation can only be used for functions of a single argument.
shared-calculator-error-product-argument-type-error = Cannot take the product of { $symbol }.
shared-calculator-error-product-infinite-bound-type-error = Product bounds must be finite numbers.
shared-calculator-error-product-lower-bound-type-error = Lower bound of a product cannot be { $symbol }.
shared-calculator-error-product-missing-body = What do you want to take the product of?
shared-calculator-error-product-missing-bound = Products must have upper and lower bounds.
shared-calculator-error-product-upper-bound-type-error = Upper bound of a product cannot be { $symbol }.
shared-calculator-error-random-arity = 'random' should be called with no arguments, or an optional number of samples. For example, try random() or random(10).
shared-calculator-error-random-from-broadcast-distribution = Cannot sample from a list of distributions
shared-calculator-error-regression-type-error = Cannot regress { $symbol1 } against { $symbol2 }.
shared-calculator-error-regressions-unsupported = This calculator does not support regressions.
shared-calculator-error-self-referential-function = The definition of function '{ $symbol }' cannot depend on '{ $symbol }'.
shared-calculator-error-shadowed-index = You can't use '{ $symbol }' as an index because it's already defined.
shared-calculator-error-shadowed-integration-variable = You can't use '{ $symbol }' as an integration variable because it's already defined.
shared-calculator-error-shadowed-list-comprehension-input = You can't use '{ $symbol }' as a list comprehension input because it's already defined.
shared-calculator-error-single-variable-implicit-equations-disabled = Plotting single-variable implicit equations is disabled.
shared-calculator-error-slider-limit-references-export = Slider limits cannot depend on the slider variable '{ $symbol }'.
shared-calculator-error-slider-max-invalid = Invalid slider max. Try using any number.
shared-calculator-error-slider-max-less-than-min = Invalid slider limits. Min should be less than max.
shared-calculator-error-slider-min-invalid = Invalid slider min. Try using any number.
shared-calculator-error-slider-step-invalid = Invalid slider step. Try using any number.
shared-calculator-error-substitution-ambiguous-comma = Ambiguous use of ',' and 'with'. Add parentheses around the 'with' expression.
shared-calculator-error-substitution-body-action = The left hand side of a 'with' substitution cannot be an action.
shared-calculator-error-substitution-body-local-variable-dependency = The left hand side of a 'with' substitution cannot depend on '{ $symbol }' because '{ $symbol }' is locally defined.
shared-calculator-error-substitution-body-regression-parameter-dependency = The left hand side of a 'with' substitution cannot depend on '{ $symbol }' because '{ $symbol }' is a regression parameter.
shared-calculator-error-substitution-duplicate-assignment = A 'with' expression cannot make multiple substitutions for '{ $symbol }'.
shared-calculator-error-substitution-function-lhs = Substituting for '{ $symbol }' is not allowed because it is a function.
shared-calculator-error-substitution-illegal-lhs = Substituting for '{ $symbol }' is not allowed.
shared-calculator-error-substitution-invalid-assignments = 'with' must be followed by one or more variable assignments.
shared-calculator-error-substitution-local-lhs = Substituting for variable '{ $symbol }' is not allowed because it is locally defined.
shared-calculator-error-substitution-nested = Using one 'with' expression inside another 'with' expression is not allowed.
shared-calculator-error-substitution-type-error = Cannot substitute { $actual } for { $expected }.
shared-calculator-error-substitution-undefined-rhs = An expression that depends on the free variable '{ $symbol }' cannot be used on the right hand side of 'with'.
shared-calculator-error-subtract-type-error = Cannot subtract { $symbol2 } from { $symbol1 }.
shared-calculator-error-sum-argument-type-error = Cannot take the sum of { $symbol }.
shared-calculator-error-sum-infinite-bound-type-error = Summation bounds must be finite numbers.
shared-calculator-error-sum-lower-bound-type-error = Lower bound of a sum cannot be { $symbol }.
shared-calculator-error-sum-missing-body = What do you want to take the sum of?
shared-calculator-error-sum-missing-bound = Sums must have upper and lower bounds.
shared-calculator-error-sum-upper-bound-type-error = Upper bound of a sum cannot be { $symbol }.
shared-calculator-error-superscript-with-prime = Superscripts and primes cannot be combined.
shared-calculator-error-table-entry-type-error = Table entry cannot be { $symbol }.
shared-calculator-error-table-equation-supplement = Equations are not allowed.
shared-calculator-error-table-function-definition-supplement = Function definitions are not allowed.
shared-calculator-error-table-generic-supplement = This type of expression is not allowed.
shared-calculator-error-table-header-type-error = Table header cannot be { $symbol }.
shared-calculator-error-table-inequality-supplement = Inequalities are not allowed.
shared-calculator-error-table-list-supplement = Lists are not allowed.
shared-calculator-error-table-regression-supplement = Regressions are not allowed.
shared-calculator-error-tdist-wrong-arity = 'tdist' requires 1 argument. For example, try typing: tdist(1).
shared-calculator-error-ticker-min-step-nonnegative = Min step must evaluate to a non-negative number.
shared-calculator-error-todo-error = [todo] { $msg }
shared-calculator-error-token-with-subscript = Tokens may not have subscripts.
shared-calculator-error-too-many-arguments = '{ $symbol }' accepts at most { $max } arguments.
shared-calculator-error-too-many-variables-many-symbols = Too many variables. Try defining '{ $variables }' or '{ $lastVariable }'.
shared-calculator-error-too-many-variables-no-symbols = Too many variables, I don't know what to do with this.
shared-calculator-error-too-many-variables-one-symbol = Too many variables. Try defining '{ $variable }'.
shared-calculator-error-transformation-type-error-1 = Transformation '{ $fn }' cannot be applied to { $arg }.
shared-calculator-error-transformation-type-error-2 = Transformation '{ $fn }' cannot be applied to { $arg1 } and { $arg2 }.
shared-calculator-error-transformation-type-error-many = Transformation '{ $fn }' cannot be applied to these arguments.
shared-calculator-error-ttest-list-too-short = Lists for '{ $symbol }' must have at least 2 elements.
shared-calculator-error-two-numbers-error = Cannot make a polygon from two numbers.
shared-calculator-error-unary-operator-missing-left = You need something before the '{ $symbol }' symbol.
shared-calculator-error-unary-operator-missing-right = You need something after the '{ $symbol }' symbol.
shared-calculator-error-unexpected-for-keyword = 'for' can only be used inside a list. Try [i for i=[1...10]].
shared-calculator-error-unexpected-inequality = Cannot use an inequality here.
shared-calculator-error-unexpected-prime = Sorry, I don't understand this use of prime notation.
shared-calculator-error-unexpected-subscript = Only functions and variables may have subscripts.
shared-calculator-error-unexpected-symbol = Sorry, I don't understand the way that '{ $symbol }' is used here.
shared-calculator-error-unknown = Unknown Error
shared-calculator-error-unplottable-polar-function = We can't plot \u03B8 as a function of r. Try plotting r(\u03B8) instead.
shared-calculator-error-unrecognized-symbol = Sorry, I don't understand the '{ $symbol }' symbol.
shared-calculator-error-update-rule-function-lhs = '{ $symbol }' cannot be updated because it is a function.
shared-calculator-error-update-rule-illegal-lhs = Variable '{ $symbol }' cannot be updated.
shared-calculator-error-update-rule-local-lhs = Variable '{ $symbol }' cannot be updated because it is locally defined.
shared-calculator-error-update-rule-non-identifier-lhs = The left hand side of '{ $arrow }' should be a variable name like '{ $example }'.
shared-calculator-error-update-rule-type-error = Cannot update a variable to { $symbol }.
shared-calculator-error-update-rule-undefined-lhs = Variable '{ $symbol }' must be defined to be updated.
shared-calculator-error-variable-as-function = Variable '{ $dependency }' can't be used as a function.
shared-calculator-error-variable-filter = List filters cannot depend on free variable '{ $symbol }'.
shared-calculator-error-variable-function-free-variable = Function '{ $functionSymbol }' cannot depend on free variable '{ $variableSymbol }'.
shared-calculator-error-variable-length-distribution-list = The length of a list of distributions can't depend on free variable '{ $symbol }'.
shared-calculator-error-variable-length-product-body-depends-on-index = Can't take the product of a list whose length depends on product index '{ $symbol }'.
shared-calculator-error-variable-length-sum-body-depends-on-index = Can't sum a list whose length depends on summation index '{ $symbol }'.
shared-calculator-error-variable-length-top-level-list = Can't plot a list whose length depends on free variable '{ $symbol }'.
shared-calculator-error-variable-list-indices = List indices cannot depend on free variable '{ $symbol }'.
shared-calculator-error-variable-range = Range cannot depend on free variable '{ $symbol }'.
shared-calculator-error-variable-sample-size = Sample size cannot depend on free variable '{ $symbol }'.
shared-calculator-error-variable-seed = Random seed cannot depend on free variable '{ $symbol }'.
shared-calculator-error-variable-unsupported = This calculator does not support the '{ $symbol }' variable.
shared-calculator-error-variables-unsupported = This calculator does not support variables like '{ $variable }'.
shared-calculator-error-write-integral = Type '{ $command }' for { $symbol }.
shared-calculator-error-wrong-arity-many-arg = Function '{ $dependency }' requires { $assignment_arity } arguments. { $supplement }
shared-calculator-error-wrong-arity-single-arg-too-few = Function '{ $dependency }' requires an argument. { $supplement }
shared-calculator-error-wrong-arity-single-arg-too-many = Function '{ $dependency }' requires only 1 argument. { $supplement }
shared-calculator-error-wrong-arity-supplement = For example, try typing: { $recommendation }.
shared-calculator-error-wrong-two-arg-arity = Function '{ $symbol }' requires 2 arguments. For example, try typing: { $recommendation }.
shared-calculator-error-zero-arg-reducer = Function '{ $symbol }' requires at least one argument. For example, try typing: { $symbol }(1, 2).
shared-calculator-heading-function-table-column-header = Function
shared-calculator-heading-keyboard-shortcuts = Keyboard Shortcuts
shared-calculator-heading-keyboard-shortcuts-audio-tracing = Audio Tracing
shared-calculator-heading-keyboard-shortcuts-braille = Braille
shared-calculator-heading-keyboard-shortcuts-common-actions = Common Actions
shared-calculator-heading-keyboard-shortcuts-common-symbols = Common Symbols
shared-calculator-heading-keyboard-shortcuts-desmos-com-only = Desmos.com Only
shared-calculator-heading-keyboard-shortcuts-expression-entry-and-navigation = Expression Entry and Navigation
shared-calculator-heading-keyboard-shortcuts-interactive-points = Interactive Points
shared-calculator-heading-keyboard-shortcuts-slider-trace = Slider Trace
shared-calculator-heading-keyboard-shortcuts-sliders = Sliders
shared-calculator-heading-keyboard-shortcuts-symbols = Symbols
shared-calculator-heading-keyboard-shortcuts-tables = Tables
shared-calculator-heading-mac-table-column-header = Mac Shortcut
shared-calculator-heading-shortcut-table-column-header = Shortcut
shared-calculator-heading-windows-chrome-table-column-header = Windows / ChromeOS Shortcut
shared-calculator-label-accessibility = Accessibility
shared-calculator-label-os = Operating System
shared-calculator-label-saved = Saved!
shared-calculator-label-saving = Saving...
shared-calculator-label-settings-display = Display
shared-calculator-label-toast-learn-more = Learn more
shared-calculator-label-toast-undo = Undo
shared-calculator-label-tooltip-convert-to-decimal = Convert to decimal.
shared-calculator-label-tooltip-convert-to-fraction = Convert to fraction.
shared-calculator-label-value-type-action = an action
shared-calculator-label-value-type-angle = an angle
shared-calculator-label-value-type-any = an unknown object
shared-calculator-label-value-type-arc = an arc
shared-calculator-label-value-type-bool = a true/false value
shared-calculator-label-value-type-circle = a circle
shared-calculator-label-value-type-color = a color
shared-calculator-label-value-type-directed-angle = a directed angle
shared-calculator-label-value-type-distribution = a distribution
shared-calculator-label-value-type-empty-list = an empty list
shared-calculator-label-value-type-error = an error object
shared-calculator-label-value-type-line = a line
shared-calculator-label-value-type-list-of-angles = a list of angles
shared-calculator-label-value-type-list-of-any = a list of unknown objects
shared-calculator-label-value-type-list-of-arcs = a list of arcs
shared-calculator-label-value-type-list-of-bool = a list of true/false values
shared-calculator-label-value-type-list-of-circles = a list of circles
shared-calculator-label-value-type-list-of-colors = a list of colors
shared-calculator-label-value-type-list-of-directed-angles = a list of directed angles
shared-calculator-label-value-type-list-of-distributions = a list of distributions
shared-calculator-label-value-type-list-of-lines = a list of lines
shared-calculator-label-value-type-list-of-numbers = a list of numbers
shared-calculator-label-value-type-list-of-points = a list of points
shared-calculator-label-value-type-list-of-polygons = a list of polygons
shared-calculator-label-value-type-list-of-rays = a list of rays
shared-calculator-label-value-type-list-of-segments = a list of segments
shared-calculator-label-value-type-list-of-transformations = a list of transformations
shared-calculator-label-value-type-matrix = a matrix
shared-calculator-label-value-type-number = a number
shared-calculator-label-value-type-point = a point
shared-calculator-label-value-type-polygon = a polygon
shared-calculator-label-value-type-ray = a ray
shared-calculator-label-value-type-seed = a string
shared-calculator-label-value-type-segment = a segment
shared-calculator-label-value-type-transformation = a transformation
shared-calculator-narration-braille-mode = Braille Mode
shared-calculator-narration-control-toggle-switch-to-default = { $toggled } selected. Press Enter to switch to { $default }.
shared-calculator-narration-control-toggle-switch-to-toggled = { $default } selected. Press Enter to switch to { $toggled }.
shared-calculator-narration-display-as-decimal = Displaying as fraction. Press Enter to display as Decimal
shared-calculator-narration-display-as-fraction = Displaying as decimal. Press Enter to display as Fraction
shared-calculator-narration-evaluation = equals { $answer }
shared-calculator-narration-expression = Expression
shared-calculator-narration-expression-index = Expression { $index }
shared-calculator-narration-expression-list = Expression List
shared-calculator-narration-hotkey-braille-mode-nemeth = Braille mode Nemeth
shared-calculator-narration-hotkey-braille-mode-off = Braille mode off
shared-calculator-narration-hotkey-braille-mode-ueb = Braille mode UEB
shared-calculator-narration-input-error = input has an error
shared-calculator-narration-item-selected = { $item } selected
shared-calculator-narration-item-unselected = { $item } unselected
shared-calculator-narration-keypad = keypad
shared-calculator-narration-keypad-controlbar = Control Bar
shared-calculator-narration-keypad-key-10-n = Times ten to the power of
shared-calculator-narration-keypad-key-abs = Absolute Value
shared-calculator-narration-keypad-key-action-to = Set Value To
shared-calculator-narration-keypad-key-action-with = Substitute With
shared-calculator-narration-keypad-key-alpha = Alpha
shared-calculator-narration-keypad-key-ans = Answer
shared-calculator-narration-keypad-key-arccos = Inverse Cosine
shared-calculator-narration-keypad-key-arccot = Inverse Cotangent
shared-calculator-narration-keypad-key-arccsc = Inverse Cosecant
shared-calculator-narration-keypad-key-arcsec = Inverse Secant
shared-calculator-narration-keypad-key-arcsin = Inverse Sine
shared-calculator-narration-keypad-key-arctan = Inverse Tangent
shared-calculator-narration-keypad-key-backspace = Backspace
shared-calculator-narration-keypad-key-beta = Beta
shared-calculator-narration-keypad-key-binomialdist = Binomial Distribution
shared-calculator-narration-keypad-key-boxplot = Box Plot
shared-calculator-narration-keypad-key-ceil = Ceiling
shared-calculator-narration-keypad-key-corr = Correlation
shared-calculator-narration-keypad-key-cos = Cosine
shared-calculator-narration-keypad-key-cosh = Hyperbolic Cosine
shared-calculator-narration-keypad-key-cot = Cotangent
shared-calculator-narration-keypad-key-coth = Hyperbolic Cotangent
shared-calculator-narration-keypad-key-cov = Co Variance
shared-calculator-narration-keypad-key-covp = Population Co Variance
shared-calculator-narration-keypad-key-csc = Cosecant
shared-calculator-narration-keypad-key-csch = Hyperbolic Cosecant
shared-calculator-narration-keypad-key-cubed = Cubed
shared-calculator-narration-keypad-key-decimal = Decimal
shared-calculator-narration-keypad-key-distance = Distance
shared-calculator-narration-keypad-key-divide = Divide
shared-calculator-narration-keypad-key-dotplot = Dot Plot
shared-calculator-narration-keypad-key-enter = Enter
shared-calculator-narration-keypad-key-erf = Error Function
shared-calculator-narration-keypad-key-exp = Exponent
shared-calculator-narration-keypad-key-factorial = Factorial
shared-calculator-narration-keypad-key-floor = Floor
shared-calculator-narration-keypad-key-fraction = A over B
shared-calculator-narration-keypad-key-histogram = Histogram
shared-calculator-narration-keypad-key-int = Integral
shared-calculator-narration-keypad-key-inversecdf = Inverse CDF function
shared-calculator-narration-keypad-key-ittest = Independent T Test
shared-calculator-narration-keypad-key-left-arrow = Left Arrow
shared-calculator-narration-keypad-key-left-bracket = Left Bracket
shared-calculator-narration-keypad-key-left-paren = Left Parenthesis
shared-calculator-narration-keypad-key-ln = Natural Log
shared-calculator-narration-keypad-key-log = Log
shared-calculator-narration-keypad-key-loga = Log A
shared-calculator-narration-keypad-key-mean = Mean
shared-calculator-narration-keypad-key-median = Median
shared-calculator-narration-keypad-key-midpoint = Midpoint
shared-calculator-narration-keypad-key-minus = Minus
shared-calculator-narration-keypad-key-normaldist = Normal Distribution
shared-calculator-narration-keypad-key-nthroot = Nth Root
shared-calculator-narration-keypad-key-pdf = Probability Density Function
shared-calculator-narration-keypad-key-percent-of = Percent Of
shared-calculator-narration-keypad-key-pi = Pi
shared-calculator-narration-keypad-key-plus = Plus
shared-calculator-narration-keypad-key-poissondist = Poisson Distribution
shared-calculator-narration-keypad-key-polygon = Polygon
shared-calculator-narration-keypad-key-prime = Function derivative
shared-calculator-narration-keypad-key-product = Product
shared-calculator-narration-keypad-key-quantile = Quantile
shared-calculator-narration-keypad-key-quartile = Quartile
shared-calculator-narration-keypad-key-random = Random Number
shared-calculator-narration-keypad-key-reciprocal = Reciprocal
shared-calculator-narration-keypad-key-right-arrow = Right Arrow
shared-calculator-narration-keypad-key-right-bracket = Right Bracket
shared-calculator-narration-keypad-key-right-paren = Right Parenthesis
shared-calculator-narration-keypad-key-round = Round
shared-calculator-narration-keypad-key-sec = Secant
shared-calculator-narration-keypad-key-shift = Shift
shared-calculator-narration-keypad-key-sin = Sine
shared-calculator-narration-keypad-key-sinh = Hyperbolic Sine
shared-calculator-narration-keypad-key-spearman = Spearman Rank Correlation
shared-calculator-narration-keypad-key-sqrt = Square Root
shared-calculator-narration-keypad-key-squared = Squared
shared-calculator-narration-keypad-key-stats = Summary statistics
shared-calculator-narration-keypad-key-stdev = Standard Deviation
shared-calculator-narration-keypad-key-stdevp = Standard Deviation of Population
shared-calculator-narration-keypad-key-subscript = Subscript
shared-calculator-narration-keypad-key-sum = Sum
shared-calculator-narration-keypad-key-superscript = Superscript
shared-calculator-narration-keypad-key-tan = Tangent
shared-calculator-narration-keypad-key-tanh = Hyperbolic Tangent
shared-calculator-narration-keypad-key-tau = Tau
shared-calculator-narration-keypad-key-tdist = Student-t Distribution
shared-calculator-narration-keypad-key-theta = Theta
shared-calculator-narration-keypad-key-times = Times
shared-calculator-narration-keypad-key-toggle-audio-trace = Toggle Audio Trace
shared-calculator-narration-keypad-key-toggle-letters = Toggle Letters
shared-calculator-narration-keypad-key-toggle-numbers = Toggle Numbers
shared-calculator-narration-keypad-key-tscore = T Score
shared-calculator-narration-keypad-key-ttest = T Test
shared-calculator-narration-keypad-key-uniformdist = Uniform Distribution
shared-calculator-narration-keypad-key-ythroot = Yth Root
shared-calculator-narration-keypad-plus-minus = Plus-Minus
shared-calculator-narration-math-input-error-message = expression has error
shared-calculator-narration-redo = redo
shared-calculator-narration-settings-display-size = Display Size
shared-calculator-narration-settings-display-size-default = Display size: default
shared-calculator-narration-settings-display-size-large = Display size: large
shared-calculator-narration-show-as-decimal = Show as Decimal
shared-calculator-narration-show-as-fraction = Show as Fraction
shared-calculator-narration-six-key-mode-off = Six Key Braille Input off
shared-calculator-narration-six-key-mode-on = Six Key Braille Input on
shared-calculator-narration-table-cell-coordinates = Row { $rowNumber } Column { $columnNumber }
shared-calculator-narration-undo = undo
shared-calculator-text-keyboard-shortcut-add-expression = Add an Expression
shared-calculator-text-keyboard-shortcut-add-folder = Add a Folder
shared-calculator-text-keyboard-shortcut-add-image = Add an Image
shared-calculator-text-keyboard-shortcut-add-note = Add a Note
shared-calculator-text-keyboard-shortcut-add-table = Add a Table
shared-calculator-text-keyboard-shortcut-adjust-playback-speed = Adjust Playback Speed (1 = slowest, 5 = fastest)
shared-calculator-text-keyboard-shortcut-announce-slider-animations = Announce Active Slider Animations
shared-calculator-text-keyboard-shortcut-beginning-of-block = Beginning of Current Block
shared-calculator-text-keyboard-shortcut-beginning-of-expression = Beginning of Current Expression
shared-calculator-text-keyboard-shortcut-close-a-dialog = Close a Dialog
shared-calculator-text-keyboard-shortcut-collapse-all-folders = Collapse All Folders
shared-calculator-text-keyboard-shortcut-collapse-folder = Collapse Selected Folder
shared-calculator-text-keyboard-shortcut-decrease-volume = Decrease Volume
shared-calculator-text-keyboard-shortcut-decrease-x = Decrease X
shared-calculator-text-keyboard-shortcut-decrease-x-larger = Decrease X by Larger Amount
shared-calculator-text-keyboard-shortcut-decrease-y = Decrease Y
shared-calculator-text-keyboard-shortcut-decrease-y-larger = Decrease Y by Larger Amount
shared-calculator-text-keyboard-shortcut-degrees-toggle = Toggle Between Degrees and Radians
shared-calculator-text-keyboard-shortcut-delete-expression = Delete the Focused Expression
shared-calculator-text-keyboard-shortcut-delete-selection = Delete Selection
shared-calculator-text-keyboard-shortcut-describe-axes = Describe the graph axes
shared-calculator-text-keyboard-shortcut-end-of-block = End of Current Block
shared-calculator-text-keyboard-shortcut-end-of-expression = End of Current Expression
shared-calculator-text-keyboard-shortcut-exit-block = Exit Current Block
shared-calculator-text-keyboard-shortcut-expand-all-folders = Expand All Folders
shared-calculator-text-keyboard-shortcut-expand-folder = Expand Selected Folder
shared-calculator-text-keyboard-shortcut-first-point = First Point
shared-calculator-text-keyboard-shortcut-focus-expression-list = Focus the Expression List
shared-calculator-text-keyboard-shortcut-focus-first-interactive-point = Focus First Interactive Point On Screen
shared-calculator-text-keyboard-shortcut-hear-graph = Hear Graph
shared-calculator-text-keyboard-shortcut-hear-specific-branch = Hear Only Branch 1 Through 10
shared-calculator-text-keyboard-shortcut-increase-selection-left = Increase Selection Left
shared-calculator-text-keyboard-shortcut-increase-selection-right = Increase Selection Right
shared-calculator-text-keyboard-shortcut-increase-volume = Increase Volume
shared-calculator-text-keyboard-shortcut-increase-x = Increase X
shared-calculator-text-keyboard-shortcut-increase-x-larger = Increase X by Larger Amount
shared-calculator-text-keyboard-shortcut-increase-y = Increase Y
shared-calculator-text-keyboard-shortcut-increase-y-larger = Increase Y by Larger Amount
shared-calculator-text-keyboard-shortcut-keypad-toggle = Show or Hide the Keypad
shared-calculator-text-keyboard-shortcut-last-point = Last Point
shared-calculator-text-keyboard-shortcut-move-to-denominator = Move to Denominator Within Fraction
shared-calculator-text-keyboard-shortcut-move-to-numerator = Move to Numerator Within Fraction
shared-calculator-text-keyboard-shortcut-move-to-origin = Move to Origin
shared-calculator-text-keyboard-shortcut-nemeth-mode = Switch to Nemeth
shared-calculator-text-keyboard-shortcut-next-character = Next Character
shared-calculator-text-keyboard-shortcut-next-curve = Move to Next Curve
shared-calculator-text-keyboard-shortcut-next-expression = Move to Next Expression
shared-calculator-text-keyboard-shortcut-next-interactive-point = Go to Next Interactive Point
shared-calculator-text-keyboard-shortcut-next-poi = Next Point of Interest
shared-calculator-text-keyboard-shortcut-next-point = Next Point
shared-calculator-text-keyboard-shortcut-open-a-graph = Open a Graph
shared-calculator-text-keyboard-shortcut-open-expression-options = Open Options for the Focused Expression
shared-calculator-text-keyboard-shortcut-open-shortcuts-dialog = Open Keyboard Shortcuts Dialog
shared-calculator-text-keyboard-shortcut-previous-character = Previous Character
shared-calculator-text-keyboard-shortcut-previous-curve = Move to Previous Curve
shared-calculator-text-keyboard-shortcut-previous-expression = Move to Previous Expression
shared-calculator-text-keyboard-shortcut-previous-interactive-point = Go to Previous Interactive Point
shared-calculator-text-keyboard-shortcut-previous-poi = Previous Point of Interest
shared-calculator-text-keyboard-shortcut-previous-point = Previous Point
shared-calculator-text-keyboard-shortcut-print-a-graph = Print a Graph
shared-calculator-text-keyboard-shortcut-print-mode = Switch to Print
shared-calculator-text-keyboard-shortcut-redo = Redo
shared-calculator-text-keyboard-shortcut-remove-empty-expression = Remove Selected Empty Expression
shared-calculator-text-keyboard-shortcut-save-a-graph = Save a Graph
shared-calculator-text-keyboard-shortcut-select-all = Select All
shared-calculator-text-keyboard-shortcut-show-answer-as-decimal-or-fraction = Show Answer as Decimal or Fraction
shared-calculator-text-keyboard-shortcut-show-or-hide-expression-list = Show or Hide the Expression List
shared-calculator-text-keyboard-shortcut-slider-decrease = Decrease Value
shared-calculator-text-keyboard-shortcut-slider-decrease-larger = Decrease Value by Larger Increment
shared-calculator-text-keyboard-shortcut-slider-increase = Increase Value
shared-calculator-text-keyboard-shortcut-slider-increase-larger = Increase Value by Larger Increment
shared-calculator-text-keyboard-shortcut-slider-maximum = Highest Value
shared-calculator-text-keyboard-shortcut-slider-minimum = Lowest Value
shared-calculator-text-keyboard-shortcut-slider-trace-decrease = Decrease Value of Selected Slider When in Slider Trace
shared-calculator-text-keyboard-shortcut-slider-trace-decrease-larger = Decrease Value of Selected Slider by Larger Increment When in Slider Trace
shared-calculator-text-keyboard-shortcut-slider-trace-increase = Increase Value of Selected Slider When in Slider Trace
shared-calculator-text-keyboard-shortcut-slider-trace-increase-larger = Increase Value of Selected Slider by Larger Increment When in Slider Trace
shared-calculator-text-keyboard-shortcut-slider-trace-maximum = Move to Highest Value of Selected Slider When in Slider Trace
shared-calculator-text-keyboard-shortcut-slider-trace-minimum = Move to Lowest Value of Selected Slider When in Slider Trace
shared-calculator-text-keyboard-shortcut-slider-trace-next-slider = Select Next Slider When in Slider Trace
shared-calculator-text-keyboard-shortcut-slider-trace-previous-slider = Select Previous Slider When in Slider Trace
shared-calculator-text-keyboard-shortcut-speak-answer = Speak Answer
shared-calculator-text-keyboard-shortcut-speak-branch = Speak Branch
shared-calculator-text-keyboard-shortcut-speak-color = Speak Color
shared-calculator-text-keyboard-shortcut-speak-focused-block = Speak Focused Block
shared-calculator-text-keyboard-shortcut-speak-label = Speak Label
shared-calculator-text-keyboard-shortcut-speak-left-adjacent-block = Speak Left-Adjacent Block
shared-calculator-text-keyboard-shortcut-speak-parent-block = Speak Parent Block
shared-calculator-text-keyboard-shortcut-speak-poi-count = Speak Point of Interest Count
shared-calculator-text-keyboard-shortcut-speak-point-type = Speak Type of Selected Point
shared-calculator-text-keyboard-shortcut-speak-right-adjacent-block = Speak Right-Adjacent Block
shared-calculator-text-keyboard-shortcut-speak-selection = Speak Selection
shared-calculator-text-keyboard-shortcut-speak-x = Speak X Coordinate
shared-calculator-text-keyboard-shortcut-speak-y = Speak Y Coordinate
shared-calculator-text-keyboard-shortcut-summarize-graph = Summarize Selected Curve
shared-calculator-text-keyboard-shortcut-table-first-column = First Column in Row
shared-calculator-text-keyboard-shortcut-table-first-row = First Row in Column
shared-calculator-text-keyboard-shortcut-table-last-column = Last Column in Row
shared-calculator-text-keyboard-shortcut-table-last-row = Last Row in Column
shared-calculator-text-keyboard-shortcut-table-next-cell = Next Cell
shared-calculator-text-keyboard-shortcut-table-next-column = Next Column
shared-calculator-text-keyboard-shortcut-table-next-row = Next Row
shared-calculator-text-keyboard-shortcut-table-previous-cell = Previous Cell
shared-calculator-text-keyboard-shortcut-table-previous-column = Previous Column
shared-calculator-text-keyboard-shortcut-table-previous-row = Previous Row
shared-calculator-text-keyboard-shortcut-table-speak-column-header = Speak Column Header
shared-calculator-text-keyboard-shortcut-toggle-account-menu = Open or Close the Account Menu
shared-calculator-text-keyboard-shortcut-toggle-audio-trace = Enable or Disable Audio Trace Mode
shared-calculator-text-keyboard-shortcut-toggle-braille-typing = Turn Braille Typing On or Off
shared-calculator-text-keyboard-shortcut-toggle-edit-list-mode = Turn Edit List Mode On or Off
shared-calculator-text-keyboard-shortcut-toggle-graph-settings-menu = Open or Close the Graph Settings Menu
shared-calculator-text-keyboard-shortcut-toggle-help-menu = Open or Close the Help Menu
shared-calculator-text-keyboard-shortcut-toggle-language-menu = Open or Close the Language Menu
shared-calculator-text-keyboard-shortcut-toggle-share-menu = Open or Close the Share Menu
shared-calculator-text-keyboard-shortcut-toggle-slider-trace = Toggle Slider Trace Mode
shared-calculator-text-keyboard-shortcut-ueb-mode = Switch to UEB
shared-calculator-text-keyboard-shortcut-undo = Undo
shared-calculator-text-keyboard-shortcut-usually = usually
shared-calculator-text-keyboard-shortcut-zoom-fit = Zoom to Fit
shared-calculator-text-keyboard-shortcut-zoom-in = Zoom In
shared-calculator-text-keyboard-shortcut-zoom-out = Zoom Out
shared-calculator-text-keyboard-shortcut-zoom-restore-default = Restore Default Viewport
shared-label-email = Email
shared-label-family-name = Last Name (optional)
shared-label-given-name-or-nickname = First Name or Nickname
shared-label-name = Name
shared-label-name-or-nickname = Name or Nickname
shared-label-new-email-address = New Email Address
shared-label-password = Password
shared-message-account-reactivated = You previously requested to delete your account, but because you logged back in within 30 days, we will not delete your account. Welcome back!
shared-message-change-password-email-sent = We will send a link to your email address ({ $emailAddress }) so you can change your password.
shared-message-check-email-for-delete-link = Please check your email ({ $emailAddress }) for the link to delete your account.
shared-message-check-email-for-link = Please check { $emailAddress } for the Change Email link.
shared-message-check-email-for-password-link = Please check your email ({ $emailAddress }) for the link to change your password.
shared-message-check-email-for-password-recovery-link = Message sent. Please check your email for a password recovery link.
shared-message-consent-delete-information = If you don't want Desmos to hold onto this information, you may delete your account from the Account Settings menu at any time.
shared-message-consent-information = When you created your Desmos account, you gave us your name, email address, and password (unless you signed in with Google, in which case you gave us access to the name and email address associated with that account). You also gave us access to your saved work. To continue using your Desmos account, please consent below to the collection of this information.
shared-message-consent-text = I agree to let Desmos store and maintain the information I provide (e.g. login credentials, saved work) in order to provide and improve its service. To withdraw consent, you may delete your account at any time.
shared-message-cookie-notice = <1>Note:</1> Desmos uses cookies to enable persistence when you are signed in. If you do not wish to use cookies, please use Desmos without logging in. <2>Learn More.</2>
shared-message-delete-account-notice = When you delete your account, <1>we will retain your data for 30 days.</1> You can reactivate your account at any time during those 30 days by logging back in. If there's something about Desmos we can improve, please <2>let us know.</2>
shared-message-delete-account-will-send-email = We will send you a link to your email address ({ $email }) so you can delete your account.
shared-message-email-sent = Email sent
shared-message-email-settings-will-send-email = We will send a Change Email link to { $emailAddress }.
shared-message-google-login-not-available = Google Login is not available on this device.
shared-message-information-saved = Saved!
shared-message-or-login-with-desmos = Or log in with Desmos
shared-message-please-review-name = We tried to split your name into first and last name. Please review your name below and edit any mistakes.
shared-message-privacy-notice = I have read, understand, and accept the <1>Terms of Service</1> and <2>Privacy Policy</2>{"."}
shared-message-set-new-email-address = Set a new email address and password.
shared-narration-privacy-policy-agreement = Checkbox to indicate agreement to privacy policy (desmos.com/privacy) and terms of service (desmos.com/terms).
shared-prompt-already-have-account = Already have a Desmos account?
shared-prompt-enter-email-for-password-recovery-link = Enter your email address to get a password recovery link.
shared-prompt-forgot-your-password = Forgot your password?
shared-prompt-new-to-desmos-sign-up-here = New to Desmos? <1>Sign up</1>{"."}
shared-prompt-new-to-desmos-teacher-or-student = New to Desmos? <1>Sign up!</1>
shared-prompt-please-consent-to-sign-up-with-apple = Please consent above to sign up with Apple
shared-prompt-please-consent-to-sign-up-with-google = Please consent above to sign up with Google
shared-prompt-sign-up-with-apple = Sign up with Apple
shared-prompt-sign-up-with-google = Sign up with Google
shared-title-account-reactivated = Your account has been reactivated.
shared-title-account-settings = Account Settings
shared-title-change-email-address = Change your Desmos email address
shared-title-change-password-narrow = Password
shared-title-change-password-wide = Change Password
shared-title-consent = We value your privacy
shared-title-delete-account = Are you sure you want to delete your account?
shared-title-email-settings = Email
shared-title-language-menu = Language
shared-title-login = Log In
shared-title-profile-information-narrow = Profile
shared-title-profile-information-wide = Profile Information
shared-title-recover-password = Recover Password
shared-title-signup = Sign-Up
### Strings for the graphing calculator and other tools


### 3090 English words, 916 English strings

basic-calculator-button-controlbar-abc = abc
basic-calculator-button-controlbar-clear = clear
basic-calculator-button-controlbar-clear-all = clear all
basic-calculator-button-controlbar-func = func
basic-calculator-button-controlbar-main = main
basic-calculator-button-turn-braille-mode-off = Turn { $mode } off
basic-calculator-error-fractions-unavailable = Fractions are not available in the current calculator.
basic-calculator-heading-braille-table-type-this = Type this
basic-calculator-heading-braille-table-typeset = Typeset
basic-calculator-heading-page-title-florida = Desmos | Florida Calculator
basic-calculator-heading-page-title-four-function = Desmos | 4-Function Calculator
basic-calculator-heading-title-scientific = Desmos | Scientific Calculator
basic-calculator-label-answer-hint = Your answers show up on this side.
basic-calculator-label-controlbar-deg = deg
basic-calculator-label-controlbar-rad = rad
basic-calculator-label-convert-to-decimal = Convert to decimal.
basic-calculator-label-convert-to-fraction = Convert to fraction.
basic-calculator-label-reverse-contrast = Reverse Contrast
basic-calculator-label-six-key-input = Six Key Braille Input
basic-calculator-link-download-braille-equations = Download Braille Equations
basic-calculator-link-help = Help
basic-calculator-link-privacy-policy = Privacy Policy
basic-calculator-link-terms-of-service = Terms of Service
basic-calculator-link-view-braille-examples = View more examples
basic-calculator-narration-calc-description-fourfunction = Desmos Four-Function Calculator
basic-calculator-narration-calc-description-scientific = Desmos Scientific Calculator
basic-calculator-narration-controlbar-abc = A B C
basic-calculator-narration-controlbar-backspace = backspace
basic-calculator-narration-controlbar-clear = clear
basic-calculator-narration-controlbar-clear-all = clear all
basic-calculator-narration-controlbar-degrees = Degrees
basic-calculator-narration-controlbar-functions = Functions
basic-calculator-narration-controlbar-main = main
basic-calculator-narration-controlbar-radians = Radians
basic-calculator-narration-controlbar-redo = Redo
basic-calculator-narration-controlbar-settings = settings
basic-calculator-narration-controlbar-undo = Undo
basic-calculator-narration-convert-to-decimal = Displaying as fraction. Press Enter to display as Decimal
basic-calculator-narration-convert-to-fraction = Displaying as decimal. Press Enter to display as Fraction
basic-calculator-narration-hotkey-six-key-input-off = Six Key Braille Input off
basic-calculator-narration-hotkey-six-key-input-on = Six Key Braille Input on
basic-calculator-narration-reverse-contrast = Reverse Contrast
basic-calculator-narration-six-key-input = Six Key Braille Input
basic-calculator-text-4fn-page-description = A beautiful, free 4-Function Calculator from Desmos.com.
basic-calculator-text-braille-mode-is-on = { $mode } is on!
basic-calculator-text-how-to-type-braille = Use a Refreshable Braille display, or just type Braille with a keyboard.
basic-calculator-text-scientific-page-description = A beautiful, free online scientific calculator with advanced features for evaluating percentages, fractions, exponential functions, logarithms, trigonometry, statistics, and more.
geometry-label-example-construction-centroid = Centroid
geometry-label-example-construction-circumcenter = Circumcenter
geometry-label-example-construction-equilateral-triangle = Equilateral Triangle
geometry-label-example-construction-orthocenter = Orthocenter
geometry-label-example-construction-perpendicular-bisector = Perpendicular Bisector
geometry-label-example-construction-pythagorean-theorem = Pythagorean Theorem
graphing-calculator-button-audio-trace-hear-graph = Hear Graph
graphing-calculator-button-audio-trace-stop-graph = Stop Graph
graphing-calculator-button-change-image = Change Image
graphing-calculator-button-clear-graph = Delete All
graphing-calculator-button-done = Done
graphing-calculator-button-draggable = Draggable
graphing-calculator-button-edit-graph-on-desmos-logo = edit graph on
graphing-calculator-button-editable-math = Editable Math
graphing-calculator-button-editable-text = Editable Text
graphing-calculator-button-find-cdf = Find Cumulative Probability (CDF)
graphing-calculator-button-funcs = funcs
graphing-calculator-button-functions = functions
graphing-calculator-button-functions-menu-custom-colors = Custom Colors
graphing-calculator-button-functions-menu-number-theory = Number Theory
graphing-calculator-button-functions-menu-special-characters = Special Characters
graphing-calculator-button-hide-folder-from-students = Hide this folder from students
graphing-calculator-button-hide-folder-from-students-2 = Hide this folder from students.
graphing-calculator-button-keypad-audio-trace-off = Audio Trace Off
graphing-calculator-button-keypad-describe-axes = Describe Axes
graphing-calculator-button-keypad-describe-curve = Describe Curve
graphing-calculator-button-keypad-describe-curve-short = Curve
graphing-calculator-button-keypad-describe-point = Describe Point
graphing-calculator-button-keypad-describe-point-short = Point
graphing-calculator-button-label = Label
graphing-calculator-button-label-editable = Editable
graphing-calculator-button-label-show-on-hover = Show on hover
graphing-calculator-button-label-text-outline = Text outline
graphing-calculator-button-load-image-retry = Retry.
graphing-calculator-button-place-image-behind-graphs = Place behind graphs
graphing-calculator-button-regression-log-mode = Log Mode
graphing-calculator-button-regression-plot-residuals = plot
graphing-calculator-button-replace = Replace
graphing-calculator-button-reset-graph = Reset
graphing-calculator-button-settings-degrees = Degrees
graphing-calculator-button-settings-radians = Radians
graphing-calculator-button-settings-zoom-square = Zoom Square
graphing-calculator-button-share-graph-link-copy = Copy
graphing-calculator-button-show-all-table-rows = Show all
graphing-calculator-button-slider-add-all-variables = all
graphing-calculator-button-visual-parameters-binned = Binned
graphing-calculator-button-visual-parameters-center = Center
graphing-calculator-button-visual-parameters-count = Count
graphing-calculator-button-visual-parameters-density = Density
graphing-calculator-button-visual-parameters-exact = Exact
graphing-calculator-button-visual-parameters-exclude-outliers = Exclude Outliers
graphing-calculator-button-visual-parameters-left = Left
graphing-calculator-button-visual-parameters-relative = Relative
graphing-calculator-error-equation-contains-unresolved-details = This equation contains fine detail that has not been fully resolved.
graphing-calculator-error-expression-replacement = Replacement must be a valid function or variable name.
graphing-calculator-error-expression-search = Can only rename a valid function or variable name.
graphing-calculator-error-failed-to-load-image = Failed to load image.
graphing-calculator-error-image-invalid-angle = Invalid angle. Try using any number.
graphing-calculator-error-image-invalid-center = Invalid center. Try, for example, (0,0).
graphing-calculator-error-image-invalid-file = The file "{ $file }" is not an image
graphing-calculator-error-image-invalid-height = Invalid height. Try using any number.
graphing-calculator-error-image-invalid-opacity = Invalid opacity. Try using any number.
graphing-calculator-error-image-invalid-width = Invalid width. Try using any number.
graphing-calculator-error-log-axes-image = Cannot plot images on a log scale.
graphing-calculator-heading-advanced = Advanced
graphing-calculator-heading-arrows = Arrows
graphing-calculator-heading-audio-trace-describe = Describe
graphing-calculator-heading-audio-trace-navigation = Navigation
graphing-calculator-heading-audio-trace-screen-reader = Screen Reader
graphing-calculator-heading-calculus = Calculus
graphing-calculator-heading-clickable = Clickable
graphing-calculator-heading-dist-tab-distributions = Distributions
graphing-calculator-heading-dist-tab-visualizations = Visualizations
graphing-calculator-heading-drag = Drag
graphing-calculator-heading-fill = Fill
graphing-calculator-heading-functions-menu-advanced = Advanced
graphing-calculator-heading-geometry = Geometry
graphing-calculator-heading-hyperbolic-trig = Hyperbolic Trig Functions
graphing-calculator-heading-image-opacity = Opacity
graphing-calculator-heading-inverse-trig = Inverse Trig Functions
graphing-calculator-heading-keypad-audio-trace-point-of-interest = <1>Point</1><2>of Interest</2>
graphing-calculator-heading-label = Label
graphing-calculator-heading-label-orientation = Orientation
graphing-calculator-heading-lines = Lines
graphing-calculator-heading-lists = List Operations
graphing-calculator-heading-mygraphs-examples = Examples
graphing-calculator-heading-on-every-update = On Every Update:
graphing-calculator-heading-points = Points
graphing-calculator-heading-regression-parameters = Parameters
graphing-calculator-heading-regression-residuals = Residuals
graphing-calculator-heading-regression-statistics = Statistics
graphing-calculator-heading-slider-animation-mode = Animation Mode
graphing-calculator-heading-slider-speed = Speed
graphing-calculator-heading-stat-tests = Statistical Tests
graphing-calculator-heading-stats = Statistics
graphing-calculator-heading-style = Style
graphing-calculator-heading-title = Graphing Calculator
graphing-calculator-heading-title-desmos = Desmos | Graphing Calculator
graphing-calculator-heading-title-untitled = Untitled Graph
graphing-calculator-heading-trig = Trig Functions
graphing-calculator-heading-visual-parameters-bar-heights = Bar Heights
graphing-calculator-heading-visual-parameters-bin-alignment = Bin Alignment
graphing-calculator-heading-visual-parameters-display-properties = Display Properties
graphing-calculator-heading-visual-parameters-x-values = X Values
graphing-calculator-label-add-depressed-image-tooltip = Add Depressed Image
graphing-calculator-label-add-hovered-image-tooltip = Add Hovered Image
graphing-calculator-label-add-item-tooltip = Add Item
graphing-calculator-label-add-slider = add slider:
graphing-calculator-label-angle-tooltip = Angle
graphing-calculator-label-animation-properties-tooltip = Animation Properties
graphing-calculator-label-audio-trace-curve = Curve
graphing-calculator-label-audio-trace-need-screen-reader = Your Screen Reader needs to be on to hear these.
graphing-calculator-label-audio-trace-point = Point
graphing-calculator-label-audio-trace-speed = Speed
graphing-calculator-label-audio-trace-volume = Volume
graphing-calculator-label-axes = Axes
graphing-calculator-label-braille-size-etc11 = ETC Romeo/Juliet (11.5 x 11 in)
graphing-calculator-label-braille-size-etc8 = ETC Romeo/Juliet (8.5 x 11 in)
graphing-calculator-label-braille-size-vpmax11 = VP Max (11.5 x 11 in)
graphing-calculator-label-braille-size-vpmax8 = VP Max (8.5 x 11 in)
graphing-calculator-label-cdf-maximum = Max:
graphing-calculator-label-cdf-minimum = Min:
graphing-calculator-label-change-depressed-image-tooltip = Change Depressed Image
graphing-calculator-label-change-hovered-image-tooltip = Change Hovered Image
graphing-calculator-label-checkers = Number of checkers on a side
graphing-calculator-label-convert-to-table-tooltip = Convert to Table
graphing-calculator-label-create-table = Create Table
graphing-calculator-label-depressed = Depressed
graphing-calculator-label-drop-image-here = Drop Image Here
graphing-calculator-label-duplicate-expression-tooltip = Duplicate
graphing-calculator-label-edit-list-tooltip = Edit List
graphing-calculator-label-evaluation-list = { $count } element list
graphing-calculator-label-example-graph-3d-world = 3D World
graphing-calculator-label-example-graph-calculus-derivatives = Calculus: Derivatives
graphing-calculator-label-example-graph-calculus-fundamental-theorem-of-calculus = Calculus: Fundamental Theorem of Calculus
graphing-calculator-label-example-graph-calculus-integral-with-adjustable-bounds = Calculus: Integral with adjustable bounds
graphing-calculator-label-example-graph-calculus-integrals = Calculus: Integrals
graphing-calculator-label-example-graph-calculus-secant-line = Calculus: Secant Line
graphing-calculator-label-example-graph-calculus-tangent-line = Calculus: Tangent Line
graphing-calculator-label-example-graph-calculus-taylor-expansion-of-sin-x = Calculus: Taylor Expansion of sin(x)
graphing-calculator-label-example-graph-checkerboard-inversion = Checkerboard Inversion
graphing-calculator-label-example-graph-conic-sections-circle = Conic Sections: Circle
graphing-calculator-label-example-graph-conic-sections-ellipse-with-foci = Conic Sections: Ellipse with Foci
graphing-calculator-label-example-graph-conic-sections-hyperbola = Conic Sections: Hyperbola
graphing-calculator-label-example-graph-conic-sections-parabola-and-focus = Conic Sections: Parabola and Focus
graphing-calculator-label-example-graph-fastest-path-to-a-point = Fastest Path to a Point
graphing-calculator-label-example-graph-fireworks = Fireworks!
graphing-calculator-label-example-graph-fractal-valentine = Fractal Valentine
graphing-calculator-label-example-graph-lines-point-slope-form = Lines: Point Slope Form
graphing-calculator-label-example-graph-lines-slope-intercept-form = Lines: Slope Intercept Form
graphing-calculator-label-example-graph-lines-two-point-form = Lines: Two Point Form
graphing-calculator-label-example-graph-lists-curve-stitching = Lists: Curve Stitching
graphing-calculator-label-example-graph-lists-family-of-sin-curves = Lists: Family of sin Curves
graphing-calculator-label-example-graph-lists-plotting-a-list-of-points = Lists: Plotting a List of Points
graphing-calculator-label-example-graph-outstretched-arm = Outstretched Arm
graphing-calculator-label-example-graph-pac-man = Pac Man
graphing-calculator-label-example-graph-parabolas-standard-form = Parabolas: Standard Form
graphing-calculator-label-example-graph-parabolas-standard-form-plus-tangent = Parabolas: Standard Form + Tangent
graphing-calculator-label-example-graph-parabolas-vertex-form = Parabolas: Vertex Form
graphing-calculator-label-example-graph-parametric-cycloid = Parametric: Cycloid
graphing-calculator-label-example-graph-parametric-introduction = Parametric: Introduction
graphing-calculator-label-example-graph-polar-conic-sections = Polar: Conic Sections
graphing-calculator-label-example-graph-polar-limacon = Polar: Limacon
graphing-calculator-label-example-graph-polar-logarithmic-spiral = Polar: Logarithmic Spiral
graphing-calculator-label-example-graph-polar-rose = Polar: Rose
graphing-calculator-label-example-graph-pride-flag = PRIDE flag
graphing-calculator-label-example-graph-regular-sine-wave = Regular Sine Wave?
graphing-calculator-label-example-graph-stats-anscombes-quartet = Statistics: Anscombe's Quartet
graphing-calculator-label-example-graph-stats-fourth-order-polynomial = Statistics: 4th Order Polynomial
graphing-calculator-label-example-graph-stats-linear-regression = Statistics: Linear Regression
graphing-calculator-label-example-graph-transformations-inverse-of-a-function = Transformations: Inverse of a Function
graphing-calculator-label-example-graph-transformations-scaling-a-function = Transformations: Scaling a Function
graphing-calculator-label-example-graph-transformations-translating-a-function = Transformations: Translating a Function
graphing-calculator-label-example-graph-trig-period-and-amplitude = Trigonometry: Period and Amplitude
graphing-calculator-label-example-graph-trig-phase = Trigonometry: Phase
graphing-calculator-label-example-graph-trig-unit-circle = Trigonometry: Unit Circle
graphing-calculator-label-example-graph-trig-wave-interference = Trigonometry: Wave Interference
graphing-calculator-label-expression = Expression
graphing-calculator-label-expression-delete-tooltip = Delete
graphing-calculator-label-expression-lowercase = expression
graphing-calculator-label-folder-lowercase = folder
graphing-calculator-label-geometry-lowercase = geometry
graphing-calculator-label-geometry-tool-options = { $tool } options
graphing-calculator-label-geometry-tools = Geometry Tools
graphing-calculator-label-hide-expression-list-tooltip = Hide Expression List
graphing-calculator-label-hide-keypad = Hide Keypad
graphing-calculator-label-hovered = Hovered
graphing-calculator-label-image-angle = Angle:
graphing-calculator-label-image-center = Center:
graphing-calculator-label-image-height = Height:
graphing-calculator-label-image-lowercase = image
graphing-calculator-label-image-opacity = Opacity:
graphing-calculator-label-image-width = Width:
graphing-calculator-label-label-size-tooltip = Label Scale Factor
graphing-calculator-label-line-thickness-tooltip = Line Thickness (px)
graphing-calculator-label-list-index = Use <1>index</1> to reference the clicked index in the list.
graphing-calculator-label-lock-expression-tooltip = Prevent Editing
graphing-calculator-label-new-transformation = New Transformation
graphing-calculator-label-note-lowercase = note
graphing-calculator-label-opacity-tooltip = Opacity (0 to 1)
graphing-calculator-label-open-graph-tooltip = Open Graph (ctrl+o)
graphing-calculator-label-poi-unknown = unknown coordinates
graphing-calculator-label-point-size-tooltip = Point Size (px)
graphing-calculator-label-powered-by = powered by
graphing-calculator-label-randomize-tooltip = Randomize
graphing-calculator-label-recent-transformations = Recent Transformations
graphing-calculator-label-redo-tooltip = Redo (ctrl+y)
graphing-calculator-label-reference-count =
    { $count ->
        [one] (1 reference)
       *[other] ({ $count } references)
    }
graphing-calculator-label-regression-log-mode-help-tooltip = Log mode help
graphing-calculator-label-regression-parameters-not-exact = Parameters might not be exact. Click to learn more.
graphing-calculator-label-regression-what-is-rmse-tooltip = What is RMSE? Click to learn more.
graphing-calculator-label-regression-why-is-negative-tooltip = Why is this negative? Click to learn more.
graphing-calculator-label-remove-depressed-image = Remove depressed image
graphing-calculator-label-remove-hovered-image = Remove hovered image
graphing-calculator-label-rename = rename
graphing-calculator-label-replace-expressions = Replace with
graphing-calculator-label-search-expressions = Search this graph
graphing-calculator-label-settings-arrows = Arrows
graphing-calculator-label-settings-axis-numbers = Axis Numbers
graphing-calculator-label-settings-grid = Grid
graphing-calculator-label-settings-lock-viewport = Lock Viewport
graphing-calculator-label-settings-logarithmic-scale = Logarithmic Scale
graphing-calculator-label-settings-minor-gridlines = Minor Gridlines
graphing-calculator-label-settings-one-quadrant = One Quadrant
graphing-calculator-label-settings-reverse-contrast = Reverse Contrast
graphing-calculator-label-settings-six-key-braille = Six Key Braille Input
graphing-calculator-label-settings-step = Step:
graphing-calculator-label-settings-x-axis = X-Axis
graphing-calculator-label-settings-y-axis = Y-Axis
graphing-calculator-label-show-keypad = Show Keypad
graphing-calculator-label-slider-disabled-while-ticker-playing = Sliders are disabled while the ticker is running.
graphing-calculator-label-slider-step = Step:
graphing-calculator-label-table-lowercase = table
graphing-calculator-label-ticker-close = cancel
graphing-calculator-label-ticker-help-tooltip = On slow computers, this might run slower. Use local variable "dt" to capture the actual update speed.
graphing-calculator-label-ticker-lowercase = ticker
graphing-calculator-label-ticker-min-step = Min Step Time
graphing-calculator-label-ticker-pause = pause
graphing-calculator-label-ticker-play = play
graphing-calculator-label-tooltip-geometry-settings = Geometry Settings
graphing-calculator-label-tooltip-graph-settings = Graph Settings
graphing-calculator-label-tooltip-open-graph = Open Graph
graphing-calculator-label-tooltip-reset = Reset
graphing-calculator-label-tooltip-show-list = Show List
graphing-calculator-label-tooltip-viewport-default = Default Viewport
graphing-calculator-label-tooltip-zoom-in = Zoom In
graphing-calculator-label-tooltip-zoom-out = Zoom Out
graphing-calculator-label-undo-tooltip = Undo (ctrl+z)
graphing-calculator-label-unlock-expression-tooltip = Allow Editing
graphing-calculator-label-update-on-click = On click:
graphing-calculator-link-audio-trace-keyboard-shortcuts = Keyboard Shortcuts
graphing-calculator-link-audio-trace-shortcuts = Shortcuts
graphing-calculator-link-edit-on-desmos = edit graph on
graphing-calculator-link-learn-more = Learn more.
graphing-calculator-link-view-braille-examples = View examples
graphing-calculator-narration-add-expression = Add expression
graphing-calculator-narration-add-folder = Add folder
graphing-calculator-narration-add-image = Add image
graphing-calculator-narration-add-item-menu = Add Item Menu
graphing-calculator-narration-add-note = Add note
graphing-calculator-narration-add-slider-prompt = Add slider for { $vars }
graphing-calculator-narration-add-table = Add table
graphing-calculator-narration-add-ticker = Add Ticker
graphing-calculator-narration-all-folders-collapsed = all folders collapsed
graphing-calculator-narration-all-folders-expanded = all folders expanded
graphing-calculator-narration-arrow-mode-both = Bi-directional arrow
graphing-calculator-narration-arrow-mode-one = Positive directional arrow
graphing-calculator-narration-audio-instructions-enter-audio-trace-mac = Press OPTION+T for audio trace.
graphing-calculator-narration-audio-instructions-enter-audio-trace-windows = Press ALT+T for audio trace.
graphing-calculator-narration-audio-trace-branch-not-found = Branch { $branch } does not exist.
graphing-calculator-narration-audio-trace-cannot-change-slider-value = Unable to adjust slider
graphing-calculator-narration-audio-trace-description-branch-count = Branches: { $branches }.
graphing-calculator-narration-audio-trace-description-color = Color: { $color }.
graphing-calculator-narration-audio-trace-description-multiple-extrema = { $count } extrema.
graphing-calculator-narration-audio-trace-description-multiple-intercepts = { $count } intercepts.
graphing-calculator-narration-audio-trace-description-multiple-intersections = { $count } intersections.
graphing-calculator-narration-audio-trace-description-multiple-labels = { $count } point labels.
graphing-calculator-narration-audio-trace-description-multiple-roots = { $count } zero crossings.
graphing-calculator-narration-audio-trace-description-no-curve-selected = No curve selected.
graphing-calculator-narration-audio-trace-description-no-visible-axes = No visible axes.
graphing-calculator-narration-audio-trace-description-one-extremum = 1 extremum.
graphing-calculator-narration-audio-trace-description-one-intercept = 1 intercept.
graphing-calculator-narration-audio-trace-description-one-intersection = 1 intersection.
graphing-calculator-narration-audio-trace-description-one-label = 1 point label.
graphing-calculator-narration-audio-trace-description-one-root = 1 zero crossing.
graphing-calculator-narration-audio-trace-description-shading-above = Shading above.
graphing-calculator-narration-audio-trace-description-shading-below = Shading below.
graphing-calculator-narration-audio-trace-description-shading-in-regions = Shading in regions.
graphing-calculator-narration-audio-trace-description-shading-left = Shading on the left.
graphing-calculator-narration-audio-trace-description-shading-right = Shading on the right.
graphing-calculator-narration-audio-trace-description-visible-grid = Grid lines are visible.
graphing-calculator-narration-audio-trace-description-visible-x-axis = X axis visible.
graphing-calculator-narration-audio-trace-description-visible-x-axis-and-label = X axis visible and is labeled { $label }.
graphing-calculator-narration-audio-trace-description-visible-x-axis-range = X axis visible from { $xmin } to { $xmax }.
graphing-calculator-narration-audio-trace-description-visible-x-axis-range-and-label = X axis visible from { $xmin } to { $xmax } and is labeled { $label }.
graphing-calculator-narration-audio-trace-description-visible-y-axis = Y axis visible.
graphing-calculator-narration-audio-trace-description-visible-y-axis-and-label = Y axis visible and is labeled { $label }.
graphing-calculator-narration-audio-trace-description-visible-y-axis-range = Y axis visible from { $ymin } to { $ymax }.
graphing-calculator-narration-audio-trace-description-visible-y-axis-range-and-label = Y axis visible from { $ymin } to { $ymax } and is labeled { $label }.
graphing-calculator-narration-audio-trace-expression-with-column = Expression { $index } column { $column }
graphing-calculator-narration-audio-trace-first-point = First point
graphing-calculator-narration-audio-trace-first-slider = First slider.
graphing-calculator-narration-audio-trace-instructions-disable-mac = To disable audio trace, press OPTION+T.
graphing-calculator-narration-audio-trace-instructions-disable-windows = To disable audio trace, press ALT+T.
graphing-calculator-narration-audio-trace-instructions-expression-navigation-mac = To move between expressions, press COMMAND+Up-Arrow or COMMAND+Down-Arrow.
graphing-calculator-narration-audio-trace-instructions-expression-navigation-windows = To move between expressions, press ALT+Up-Arrow or ALT+Down-Arrow.
graphing-calculator-narration-audio-trace-instructions-hear-graph = To hear the graph, press H.
graphing-calculator-narration-audio-trace-instructions-use-arrow-keys = Use Arrow keys to navigate.
graphing-calculator-narration-audio-trace-last-point = Last point
graphing-calculator-narration-audio-trace-last-slider = Last slider.
graphing-calculator-narration-audio-trace-multiple-sliders-paused = { $sliders } animating sliders were paused.
graphing-calculator-narration-audio-trace-no-more-pois = No more points of interest
graphing-calculator-narration-audio-trace-no-sliders-paused = No animating sliders were paused.
graphing-calculator-narration-audio-trace-one-slider-paused = One animating slider was paused.
graphing-calculator-narration-audio-trace-playback-speed = Graph playback speed { $speed }
graphing-calculator-narration-audio-trace-poi-count = Points of interest, { $x }.
graphing-calculator-narration-audio-trace-point-type-definition = Definition
graphing-calculator-narration-audio-trace-point-type-extremum = Extremum
graphing-calculator-narration-audio-trace-point-type-intercept = Intercept
graphing-calculator-narration-audio-trace-point-type-intersection = Intersection
graphing-calculator-narration-audio-trace-point-type-intersection-with-curves = Intersection with { $curves }
graphing-calculator-narration-audio-trace-point-type-label = Label
graphing-calculator-narration-audio-trace-point-type-not-a-poi = Not a P O I
graphing-calculator-narration-audio-trace-point-type-root = Zero
graphing-calculator-narration-audio-trace-point-type-trace = Trace
graphing-calculator-narration-audio-trace-property-branch-number = Branch { $branch }.
graphing-calculator-narration-audio-trace-property-type-before-coordinates = { $type } at
graphing-calculator-narration-audio-trace-property-x = X: { $x }.
graphing-calculator-narration-audio-trace-property-y = Y: { $y }.
graphing-calculator-narration-audio-trace-secret-expression = Secret expression { $index }
graphing-calculator-narration-audio-trace-slider-value-unknown = Unable to determine slider value
graphing-calculator-narration-audio-trace-sound-effects-disabled = Sound effects have been disabled.
graphing-calculator-narration-audio-trace-traceable-curves =
    { $sketchCount ->
        [one] 1 audio traceable curve.
       *[other] { $sketchCount } audio traceable curves.
    }
graphing-calculator-narration-audio-trace-tracing-different-expression = Tracing { $expression }.
graphing-calculator-narration-audio-trace-unable-to-play = Unable to play audio.
graphing-calculator-narration-audio-trace-unable-to-trace-this-expression = Unable to audio trace this expression.
graphing-calculator-narration-audio-trace-unsupported-expression = { $expression } cannot be audio traced.
graphing-calculator-narration-audio-trace-volume = Volume { $volume } percent
graphing-calculator-narration-cdf-maximum = Max
graphing-calculator-narration-cdf-minimum = Min
graphing-calculator-narration-click-action = Click Action
graphing-calculator-narration-clickable-image-options = Clickable Image Options
graphing-calculator-narration-clickable-object-description = clickable object
graphing-calculator-narration-collapse = Collapse
graphing-calculator-narration-collapse-folder-index = Collapse Folder { $index }
graphing-calculator-narration-collapse-folder-title = Collapse { $folder } folder
graphing-calculator-narration-color-unknown = unknown
graphing-calculator-narration-computed-cell-role-description = computed cell
graphing-calculator-narration-create-table = Create Table
graphing-calculator-narration-create-table-expression = Create Table from Expression { $index }
graphing-calculator-narration-delete = Delete
graphing-calculator-narration-delete-expression = Delete Expression { $index }
graphing-calculator-narration-delete-folder-index = Delete Folder { $index }
graphing-calculator-narration-delete-folder-title = Delete { $folder } folder
graphing-calculator-narration-delete-image = Delete Image { $index }
graphing-calculator-narration-delete-table = Delete Table { $index }
graphing-calculator-narration-delete-text = Delete Note { $index }
graphing-calculator-narration-description-collapsed-folder = Collapsed Folder
graphing-calculator-narration-description-collapsed-readonly-folder = Collapsed Locked Folder
graphing-calculator-narration-description-collapsed-secret-folder = Collapsed Secret Folder
graphing-calculator-narration-description-collapsed-secret-readonly-folder = Collapsed Secret Locked Folder
graphing-calculator-narration-description-folder = Folder
graphing-calculator-narration-description-hidden-collapsed-folder = Hidden Collapsed Folder
graphing-calculator-narration-description-hidden-collapsed-readonly-folder = Hidden Collapsed Locked Folder
graphing-calculator-narration-description-hidden-collapsed-secret-folder = Hidden Collapsed Secret Folder
graphing-calculator-narration-description-hidden-collapsed-secret-readonly-folder = Hidden Collapsed Secret Locked Folder
graphing-calculator-narration-description-hidden-folder = Hidden Folder
graphing-calculator-narration-description-hidden-readonly-folder = Hidden Locked Folder
graphing-calculator-narration-description-hidden-secret-folder = Hidden Secret Folder
graphing-calculator-narration-description-hidden-secret-readonly-folder = Hidden Secret Locked Folder
graphing-calculator-narration-description-readonly-folder = Locked Folder
graphing-calculator-narration-description-secret-folder = Secret Folder
graphing-calculator-narration-description-secret-readonly-folder = Secret Locked Folder
graphing-calculator-narration-dist-tab-distributions = Distributions
graphing-calculator-narration-dist-tab-visualizations = Visualizations
graphing-calculator-narration-domain-maximum = domain Maximum:
graphing-calculator-narration-domain-minimum = domain Minimum:
graphing-calculator-narration-drag-mode-x = X
graphing-calculator-narration-drag-mode-xy = X and Y
graphing-calculator-narration-drag-mode-y = Y
graphing-calculator-narration-draggable-image-description = draggable image
graphing-calculator-narration-draggable-image-off-screen-prompt = { " " }not completely visible on screen
graphing-calculator-narration-draggable-label-description = draggable label
graphing-calculator-narration-duplicate = Duplicate
graphing-calculator-narration-duplicate-expression = Duplicate Expression { $index }
graphing-calculator-narration-duplicate-folder-index = Duplicate Folder { $index }
graphing-calculator-narration-duplicate-folder-title = Duplicate { $folder } folder
graphing-calculator-narration-duplicate-image = Duplicate Image { $index }
graphing-calculator-narration-duplicate-table = Duplicate Table { $index }
graphing-calculator-narration-duplicate-text = Duplicate Note { $index }
graphing-calculator-narration-edit-action = Edit Action
graphing-calculator-narration-edit-expression-list = Edit Expression List
graphing-calculator-narration-edit-folder-title = Edit Folder { $index } Title
graphing-calculator-narration-edit-graph-on-desmos = Edit graph on Desmos
graphing-calculator-narration-edit-image-title = Edit Image { $index } Title
graphing-calculator-narration-edit-list-mode-off = Edit list mode off.
graphing-calculator-narration-edit-list-mode-on = Edit list mode on.
graphing-calculator-narration-edit-on-desmos = Edit graph on Desmos
graphing-calculator-narration-edit-slider-variable-limits = Edit { $variable } Limits
graphing-calculator-narration-edit-text-title = Note { $index }
graphing-calculator-narration-edit-title = Edit Title
graphing-calculator-narration-editable-label-mode = Editable label mode
graphing-calculator-narration-editable-point-label-at-coordinates = Editable point label at { $coordinates }
graphing-calculator-narration-expand = Expand
graphing-calculator-narration-expand-folder-index = Expand Folder { $index }
graphing-calculator-narration-expand-folder-title = Expand { $folder } folder
graphing-calculator-narration-expression-audio-trace-mac = To audio trace, press OPTION+T.
graphing-calculator-narration-expression-audio-trace-windows = To audio trace, press ALT+T.
graphing-calculator-narration-expression-bar = Expression Bar
graphing-calculator-narration-expression-evaluation-has-graph = Has graph.
graphing-calculator-narration-expression-evaluation-has-graph-and-regression = Has graph and regression. To access statistics, press Tab.
graphing-calculator-narration-expression-evaluation-has-regression = Has regression. To access statistics, press Tab.
graphing-calculator-narration-expression-evaluation-is-distribution = is distribution.
graphing-calculator-narration-expression-evaluation-is-t-test = is T test. To access statistics, press Tab.
graphing-calculator-narration-expression-hidden-label = Hidden { $label }
graphing-calculator-narration-expression-index-table = Expression { $index } table
graphing-calculator-narration-expression-label = Label
graphing-calculator-narration-expression-search-results =
    { $count ->
        [zero] No results
        [one] 1 result
       *[other] { $count } results
    }
graphing-calculator-narration-fill-opacity = Fill Opacity:
graphing-calculator-narration-fill-visible = Fill visible
graphing-calculator-narration-folder-collapsed = folder collapsed
graphing-calculator-narration-folder-expanded = folder expanded
graphing-calculator-narration-folder-has-items = { $folder } has { $count } items
graphing-calculator-narration-functions = Functions
graphing-calculator-narration-geometry-added-object-type = Added { $type }.
graphing-calculator-narration-geometry-added-object-type-and-point = Added { $type } and 1 point.
graphing-calculator-narration-geometry-added-object-type-and-points = Added { $type } and { $points } points.
graphing-calculator-narration-geometry-added-object-type-with-label = Added { $type } with label { $label }.
graphing-calculator-narration-geometry-added-points = Added { $points } points.
graphing-calculator-narration-geometry-angle-with-assignment = Angle { $assignment }
graphing-calculator-narration-geometry-arc-with-assignment = Arc { $assignment }
graphing-calculator-narration-geometry-circle-with-assignment = Circle { $assignment }
graphing-calculator-narration-geometry-construction-role-description = construction
graphing-calculator-narration-geometry-deselect-all = Deselect All
graphing-calculator-narration-geometry-glider-with-assignment = GliderW { $assignment }
graphing-calculator-narration-geometry-hidden-construction-description = Hidden { $description }
graphing-calculator-narration-geometry-intersection-with-assignment = Intersection { $assignment }
graphing-calculator-narration-geometry-item-at-coordinates = { $itemDescription } at { $x } { $y }
graphing-calculator-narration-geometry-item-at-coordinates-and-intersection = { $itemDescription } intersecting { $parent1 } and { $parent2 } at { $x } { $y }
graphing-calculator-narration-geometry-item-at-coordinates-to-coordinates = { $itemDescription } from { $x1 } { $y1 } to { $x2 } { $y2 }
graphing-calculator-narration-geometry-item-at-coordinates-with-middle-and-end = { $itemDescription } starting at { $x1 } { $y1 } middle at { $x2 } { $y2 } and end at { $x3 } { $y3 }
graphing-calculator-narration-geometry-item-at-coordinates-with-radius = { $itemDescription } at { $x } { $y } with radius { $radius }.
graphing-calculator-narration-geometry-item-at-coordinates-with-vertex-from-to = { $itemDescription } at { $x1 } { $y1 } with vertex { $parent1 }, from { $parent2 } to { $parent3 }
graphing-calculator-narration-geometry-item-unknown = Unknown
graphing-calculator-narration-geometry-line-with-assignment = Line { $assignment }
graphing-calculator-narration-geometry-moved-to-coordinates = Moved to x: { $x }, y: { $y }.
graphing-calculator-narration-geometry-near-item = Near { $item }.
graphing-calculator-narration-geometry-not-a-construction = Selected item is not a construction.
graphing-calculator-narration-geometry-nothing-selected = Nothing selected.
graphing-calculator-narration-geometry-point-with-assignment = Point { $assignment }
graphing-calculator-narration-geometry-polygon-with-assignment = Polygon { $assignment } with { $sideCount } sides
graphing-calculator-narration-geometry-quadrilateral-with-assignment = Quadrilateral { $assignment }
graphing-calculator-narration-geometry-ray-with-assignment = Ray { $assignment }
graphing-calculator-narration-geometry-segment-with-assignment = Segment { $assignment }
graphing-calculator-narration-geometry-tool-cancelled = Cancelled.
graphing-calculator-narration-geometry-triangle-with-assignment = Triangle { $assignment }
graphing-calculator-narration-geometry-unable-to-move = Unable to move.
graphing-calculator-narration-geometry-unlabeled-angle = Angle { $index }
graphing-calculator-narration-geometry-unlabeled-arc = Arc { $index }
graphing-calculator-narration-geometry-unlabeled-circle = Circle { $index }
graphing-calculator-narration-geometry-unlabeled-glider = Glider { $index }
graphing-calculator-narration-geometry-unlabeled-intersection = Intersection { $index }
graphing-calculator-narration-geometry-unlabeled-line = Line { $index }
graphing-calculator-narration-geometry-unlabeled-point = Point { $index }
graphing-calculator-narration-geometry-unlabeled-polygon = Polygon { $index } with { $sideCount } sides
graphing-calculator-narration-geometry-unlabeled-quadrilateral = Quadrilateral { $index }
graphing-calculator-narration-geometry-unlabeled-ray = Ray { $index }
graphing-calculator-narration-geometry-unlabeled-segment = Segment { $index }
graphing-calculator-narration-geometry-unlabeled-triangle = Triangle { $index }
graphing-calculator-narration-graph-settings-controls = Graph Settings Controls
graphing-calculator-narration-graphpaper-label = graph paper
graphing-calculator-narration-hide = Hide
graphing-calculator-narration-hide-animation-properties = Hide Animation Properties
graphing-calculator-narration-hide-expression = Hide Expression { $index }
graphing-calculator-narration-hide-expression-list = Hide expression list
graphing-calculator-narration-hide-folder-index = Hide Folder { $index }
graphing-calculator-narration-hide-folder-title = Hide { $folder } folder
graphing-calculator-narration-hide-image = Hide Image { $index }
graphing-calculator-narration-hide-options = Hide Options
graphing-calculator-narration-hide-options-expression = Hide Options for Expression { $index }
graphing-calculator-narration-hide-options-image = Hide Options for Image { $index }
graphing-calculator-narration-hide-table = Hide Table { $index }
graphing-calculator-narration-hide-table-column = Hide Column
graphing-calculator-narration-hide-text = Hide Note { $index }
graphing-calculator-narration-image-styles = Styles
graphing-calculator-narration-items-deleted =
    { $count ->
        [one] { $count } item deleted.
       *[other] { $count } items deleted.
    }
graphing-calculator-narration-keypad-hidden = Keypad hidden
graphing-calculator-narration-keypad-key-next-curve = Next Curve
graphing-calculator-narration-keypad-key-next-poi = Next Point of Interest
graphing-calculator-narration-keypad-key-next-point = Next Point
graphing-calculator-narration-keypad-key-previous-curve = Previous Curve
graphing-calculator-narration-keypad-key-previous-poi = Previous Point of Interest
graphing-calculator-narration-keypad-key-previous-point = Previous Point
graphing-calculator-narration-keypad-key-speed-down = Speed Down
graphing-calculator-narration-keypad-key-speed-up = Speed Up
graphing-calculator-narration-keypad-key-volume-down = Volume Down
graphing-calculator-narration-keypad-key-volume-up = Volume Up
graphing-calculator-narration-keypad-visible = Keypad visible
graphing-calculator-narration-label-angle = Label Angle:
graphing-calculator-narration-label-size = Label Size:
graphing-calculator-narration-label-text = Label Text
graphing-calculator-narration-label-visible = Label visible
graphing-calculator-narration-line-opacity = Line Opacity:
graphing-calculator-narration-line-style-dashed = Dashed
graphing-calculator-narration-line-style-dotted = Dotted
graphing-calculator-narration-line-style-solid = Solid
graphing-calculator-narration-lines-visible = Lines visible
graphing-calculator-narration-main-desmos-geometry = Desmos Geometry
graphing-calculator-narration-main-desmos-graphing-calculator = Desmos Graphing Calculator
graphing-calculator-narration-make-clickable = make clickable
graphing-calculator-narration-menu-arrows-enabled = Arrows Enabled
graphing-calculator-narration-menu-drag-enabled = Drag Enabled
graphing-calculator-narration-movable-point-description = movable point
graphing-calculator-narration-movable-point-off-screen-prompt = { " " }not visible on screen
graphing-calculator-narration-movable-point-prefix = Graph point
graphing-calculator-narration-movable-point-suffix-usage-instructions = { " " }is movable. Press Arrows or Shift+Arrows to adjust.
graphing-calculator-narration-no-interactive-points = No interactive points on screen
graphing-calculator-narration-open-graph = Open Graph
graphing-calculator-narration-options-menu = Options Menu
graphing-calculator-narration-options-menu-closed = Options menu closed.
graphing-calculator-narration-options-menu-open = Options menu open.
graphing-calculator-narration-pause-variable-animation = Pause { $variable } Animation
graphing-calculator-narration-play-variable-animation = Play { $variable } Animation
graphing-calculator-narration-poi-graph-point = Graph point
graphing-calculator-narration-point-description = point
graphing-calculator-narration-point-opacity = Point Opacity:
graphing-calculator-narration-point-size = Point Size:
graphing-calculator-narration-point-style-cross = Cross
graphing-calculator-narration-point-style-open = Open
graphing-calculator-narration-point-style-point = Point
graphing-calculator-narration-points-visible = Points visible
graphing-calculator-narration-powered-by-desmos = Powered by Desmos
graphing-calculator-narration-redo = Redo
graphing-calculator-narration-rename = Rename
graphing-calculator-narration-rename-expression = Rename in Expression { $index }
graphing-calculator-narration-rename-table = Rename in Table { $index }
graphing-calculator-narration-run-action-icon = Run Action
graphing-calculator-narration-settings-angle = Angle Settings
graphing-calculator-narration-settings-cartesian-grid = Cartesian Grid
graphing-calculator-narration-settings-polar-grid = Polar Grid
graphing-calculator-narration-settings-show-both = Show Both
graphing-calculator-narration-settings-show-positive = Show Positive
graphing-calculator-narration-settings-x-axis-label-placeholder = e.g. \u201Cx\u201D
graphing-calculator-narration-settings-x-axis-logarithmic-scale = make x-axis scale logarithmic
graphing-calculator-narration-settings-x-axis-max = X Axis Maximum:{ " " }
graphing-calculator-narration-settings-x-axis-min = X Axis Minimum:{ " " }
graphing-calculator-narration-settings-x-axis-step = X Axis Step Size:{ " " }
graphing-calculator-narration-settings-y-axis-label-placeholder = e.g. \u201Cy\u201D
graphing-calculator-narration-settings-y-axis-logarithmic-scale = make y-axis scale logarithmic
graphing-calculator-narration-settings-y-axis-max = Y Axis Maximum:{ " " }
graphing-calculator-narration-settings-y-axis-min = Y Axis Minimum:{ " " }
graphing-calculator-narration-settings-y-axis-step = Y Axis Step Size:{ " " }
graphing-calculator-narration-share-graph-link = Link to this graph
graphing-calculator-narration-share-graph-link-copied = Link copied
graphing-calculator-narration-share-graph-link-unable-to-copy = Unable to copy link
graphing-calculator-narration-show = Show
graphing-calculator-narration-show-animation-properties = Show Animation Properties
graphing-calculator-narration-show-expression = Show Expression { $index }
graphing-calculator-narration-show-expression-list = Show expression list
graphing-calculator-narration-show-folder-index = Show Folder { $index }
graphing-calculator-narration-show-folder-title = Show { $folder } folder
graphing-calculator-narration-show-image = Show Image { $index }
graphing-calculator-narration-show-options = Show Options
graphing-calculator-narration-show-options-expression = Show Options for Expression { $index }
graphing-calculator-narration-show-options-image = Show Options for Image { $index }
graphing-calculator-narration-show-table = Show Table { $index }
graphing-calculator-narration-show-table-column = Show Column
graphing-calculator-narration-show-text = Show Note { $index }
graphing-calculator-narration-slider-animate-faster = Animate Faster
graphing-calculator-narration-slider-animate-slower = Animate Slower
graphing-calculator-narration-slider-animating-at-speed = Animating at { $speed }x
graphing-calculator-narration-slider-loop-forwards-and-backwards = Loop forwards and backwards
graphing-calculator-narration-slider-maximum = Slider Maximum:
graphing-calculator-narration-slider-minimum = Slider Minimum:
graphing-calculator-narration-slider-play-indefinitely = Play indefinitely
graphing-calculator-narration-slider-play-once = Play once
graphing-calculator-narration-slider-repeat-one-direction = Repeat in one direction
graphing-calculator-narration-slider-step = Slider Step Size:
graphing-calculator-narration-slider-trace-no-sliders = No sliders to trace.
graphing-calculator-narration-slider-trace-off = Slider trace off.
graphing-calculator-narration-slider-trace-on = Slider trace on.
graphing-calculator-narration-slider-variable-paused = { $variable } paused
graphing-calculator-narration-slider-variable-playing = { $variable } playing
graphing-calculator-narration-slider-variable-restarted = { $variable } restarted
graphing-calculator-narration-table-column-header = Column header { $column }
graphing-calculator-narration-table-no-column-header = No column header
graphing-calculator-narration-table-row-column = Row { $row } Col { $column }
graphing-calculator-narration-tick-action = Tick Action
graphing-calculator-narration-toggle-audio-trace = Toggle Audio Trace
graphing-calculator-narration-toggle-letters = Toggle Letters
graphing-calculator-narration-transformations-menu = Transformations Menu
graphing-calculator-narration-unable-to-activate-account-menu = Unable to activate account menu
graphing-calculator-narration-unable-to-activate-help-menu = Unable to activate help menu
graphing-calculator-narration-unable-to-activate-language-menu = Unable to activate language menu
graphing-calculator-narration-unable-to-activate-share-menu = Unable to activate share menu
graphing-calculator-narration-unable-to-add-expression = Unable to add expression
graphing-calculator-narration-unable-to-add-note = Unable to add note
graphing-calculator-narration-unable-to-add-table = Unable to add table
graphing-calculator-narration-undo = Undo
graphing-calculator-narration-viewport-default = Graph viewport default
graphing-calculator-narration-viewport-restore-default = Restore Default Viewport
graphing-calculator-narration-viewport-updated = Graph viewport updated.
graphing-calculator-narration-viewport-zoom-in = Graph zoom in
graphing-calculator-narration-viewport-zoom-out = Graph zoom out
graphing-calculator-narration-viewport-zoom-square = Graph zoom square
graphing-calculator-narration-visual-parameters-height = Height
graphing-calculator-narration-visual-parameters-offset = Offset
graphing-calculator-narration-visual-parameters-width = Width
graphing-calculator-narration-x-percentage-coordinate = { $x } percent from left.
graphing-calculator-narration-y-percentage-coordinate = { $y } percent from top.
graphing-calculator-text-add-screen-reader-label-placeholder = Add screen reader label
graphing-calculator-text-audio-trace-no-implicit-support = Sorry, but I can't trace implicit curves yet.
graphing-calculator-text-audio-trace-no-parametric-support = Sorry, but I can't trace parametric curves yet.
graphing-calculator-text-audio-trace-no-polar-support = Sorry, but I can't trace polar curves yet.
graphing-calculator-text-audio-trace-off = Audio trace off.
graphing-calculator-text-audio-trace-on = Audio trace on.
graphing-calculator-text-color-black = black
graphing-calculator-text-color-blue = blue
graphing-calculator-text-color-gray = gray
graphing-calculator-text-color-green = green
graphing-calculator-text-color-orange = orange
graphing-calculator-text-color-purple = purple
graphing-calculator-text-color-red = red
graphing-calculator-text-color-unknown = color unknown
graphing-calculator-text-enter-pareneter = Enter the { $param }.
graphing-calculator-text-export-braille-email-accessibility = Feedback? Email <1>accessibility@desmos.com</1>{"."}
graphing-calculator-text-folder-placeholder = Untitled folder
graphing-calculator-text-geometry-arrow-mode = Arrow Mode: { $mode }
graphing-calculator-text-geometry-delete-selected-objects =
    { $count ->
        [one] Delete 1 object
       *[other] Delete { $count } objects
    }
graphing-calculator-text-geometry-glider = glider
graphing-calculator-text-geometry-hide-objects =
    { $count ->
        [one] Hide
       *[other] Hide all
    }
graphing-calculator-text-geometry-intersection = intersection
graphing-calculator-text-geometry-multi-select-more-dropdown = More
graphing-calculator-text-geometry-multi-select-transform = Transform
graphing-calculator-text-geometry-select-hint = Select a { $type }
graphing-calculator-text-geometry-selected-objects =
    { $count ->
        [one] 1 object selected
       *[other] { $count } objects selected
    }
graphing-calculator-text-geometry-show-objects =
    { $count ->
        [one] Show
       *[other] Show all
    }
graphing-calculator-text-geometry-tool-angle-display-name = Angle
graphing-calculator-text-geometry-tool-angle-hint-1 = Choose a point (one leg)
graphing-calculator-text-geometry-tool-angle-hint-2 = Choose a point (vertex)
graphing-calculator-text-geometry-tool-angle-hint-3 = Choose a point (other leg)
graphing-calculator-text-geometry-tool-angles-display-name = Angles
graphing-calculator-text-geometry-tool-angles-hint-1 = Choose a polygon
graphing-calculator-text-geometry-tool-arc-display-name = Arc
graphing-calculator-text-geometry-tool-arc-hint-1 = Choose a point (start)
graphing-calculator-text-geometry-tool-arc-hint-2 = Choose a point (middle)
graphing-calculator-text-geometry-tool-arc-hint-3 = Choose a point (end)
graphing-calculator-text-geometry-tool-box-selection-display-name = Box Select
graphing-calculator-text-geometry-tool-circle-display-name = Circle
graphing-calculator-text-geometry-tool-circle-hint-center = Choose a point (center)
graphing-calculator-text-geometry-tool-circle-hint-radius = Choose a point (radius)
graphing-calculator-text-geometry-tool-compass-display-name = Compass
graphing-calculator-text-geometry-tool-compass-hint-center = Choose a point (center)
graphing-calculator-text-geometry-tool-compass-hint-segment = Choose a segment (radius)
graphing-calculator-text-geometry-tool-dilation-display-name = Dilation
graphing-calculator-text-geometry-tool-dilation-hint-center = Choose point (center)
graphing-calculator-text-geometry-tool-dilation-hint-scale-factor = Scale factor
graphing-calculator-text-geometry-tool-directedangle-display-name = Directed angle
graphing-calculator-text-geometry-tool-line-display-name = Line
graphing-calculator-text-geometry-tool-line-hint-end = Choose a 2nd point
graphing-calculator-text-geometry-tool-line-hint-start = Choose a 1st point
graphing-calculator-text-geometry-tool-midpoint-display-name = Midpoint
graphing-calculator-text-geometry-tool-midpoint-hint = Choose a segment
graphing-calculator-text-geometry-tool-parallel-display-name = Parallel
graphing-calculator-text-geometry-tool-parallel-hint-point = Choose a point to set location
graphing-calculator-text-geometry-tool-parallel-hint-straight-line = Choose a line to set slope
graphing-calculator-text-geometry-tool-perpendicular-display-name = Perpendicular
graphing-calculator-text-geometry-tool-perpendicular-hint-point = Choose a point to set location
graphing-calculator-text-geometry-tool-perpendicular-hint-straight-line = Choose a line to set slope
graphing-calculator-text-geometry-tool-point-display-name = Point
graphing-calculator-text-geometry-tool-point-hint = Select or create a point
graphing-calculator-text-geometry-tool-polygon-display-name = Polygon
graphing-calculator-text-geometry-tool-polygon-hint-finish-point = Choose another point, or click an existing point to finish
graphing-calculator-text-geometry-tool-polygon-hint-first-point = Choose a point
graphing-calculator-text-geometry-tool-polygon-hint-next-point = Choose another point
graphing-calculator-text-geometry-tool-ray-display-name = Ray
graphing-calculator-text-geometry-tool-ray-hint-end = Choose a point (direction)
graphing-calculator-text-geometry-tool-ray-hint-start = Choose a point (vertex)
graphing-calculator-text-geometry-tool-reflection-display-name = Reflection
graphing-calculator-text-geometry-tool-reflection-hint-choose-line = Choose line of reflection
graphing-calculator-text-geometry-tool-rotation-display-name = Rotation
graphing-calculator-text-geometry-tool-rotation-hint-angle = Choose angle
graphing-calculator-text-geometry-tool-rotation-hint-center = Choose point (center)
graphing-calculator-text-geometry-tool-segment-display-name = Segment
graphing-calculator-text-geometry-tool-segment-hint-end = Choose another point
graphing-calculator-text-geometry-tool-segment-hint-start = Choose a point
graphing-calculator-text-geometry-tool-selection-display-name = Select
graphing-calculator-text-geometry-tool-translation-display-name = Translation
graphing-calculator-text-geometry-tool-translation-hint-from = Choose start point
graphing-calculator-text-geometry-tool-translation-hint-to = Choose end point
graphing-calculator-text-geometry-tool-vector-display-name = Vector
graphing-calculator-text-geometry-tool-vector-hint-end = Choose an ending point
graphing-calculator-text-geometry-tool-vector-hint-start = Choose a starting point
graphing-calculator-text-image-placeholder = Unnamed image
graphing-calculator-text-label-orientation-above = Above
graphing-calculator-text-label-orientation-above-left = Above Left
graphing-calculator-text-label-orientation-above-right = Above Right
graphing-calculator-text-label-orientation-below = Below
graphing-calculator-text-label-orientation-below-left = Below Left
graphing-calculator-text-label-orientation-below-right = Below Right
graphing-calculator-text-label-orientation-default = Default
graphing-calculator-text-label-orientation-left = Left
graphing-calculator-text-label-orientation-right = Right
graphing-calculator-text-loading-image = Loading image...
graphing-calculator-text-note-placeholder = Empty note
graphing-calculator-text-page-description = Explore math with our beautiful, free online graphing calculator. Graph functions, plot points, visualize algebraic equations, add sliders, animate graphs, and more.
graphing-calculator-text-parameter-name-binwidth = Bin Width
graphing-calculator-text-parameter-name-data = Data Set
graphing-calculator-text-parameter-name-dof = Degrees of Freedom
graphing-calculator-text-parameter-name-height = Height
graphing-calculator-text-parameter-name-max = Maximum
graphing-calculator-text-parameter-name-mean = Mean
graphing-calculator-text-parameter-name-min = Minimum
graphing-calculator-text-parameter-name-offset = Offset
graphing-calculator-text-parameter-name-probsuccess = Success Probability
graphing-calculator-text-parameter-name-stddev = Standard Deviation
graphing-calculator-text-parameter-name-trials = Trials
graphing-calculator-text-refreshable-braille-display-note = Use a refreshable Braille display, or just type Braille with a keyboard.
graphing-calculator-text-regression-potentially-inaccurate-parameters = Some parameters may be too large or small to represent accurately.
graphing-calculator-text-share-graph-link = Link to this graph
graphing-calculator-text-table-created = Table created.
graphing-calculator-text-table-more-rows = { $rowCount } more rows
graphing-calculator-text-toast-choose-one-file = You can only choose one file as a replacement
graphing-calculator-text-toast-error-importing-graph = Error importing graph. Check the URL?
graphing-calculator-text-toast-error-no-folders = Only graphs without folders can be inserted into a folder.
graphing-calculator-text-toast-expression-size-limit = Maximum expression size reached.
graphing-calculator-text-toast-graph-cleared = Graph cleared.
graphing-calculator-text-toast-graph-reset = Graph reset.
graphing-calculator-text-toast-image-upload-failed = Image upload failed.
graphing-calculator-text-toast-imported-graph = Graph imported!
graphing-calculator-text-toast-importing-graph = Importing graph...
graphing-calculator-text-toast-no-file-selected = You did not select a file
graphing-calculator-text-toast-undo-cmd-z = Press CMD+Z to undo.
graphing-calculator-text-toast-undo-ctrl-z = Press CTRL+Z to undo.
graphing-calculator-text-toast-uploading-images = Uploading images...
graphing-calculator-text-toast-zoom-to-fit = We zoomed to fit your data.
graphing-calculator-text-zoom-fit = Zoom Fit
graphing-tours-heading-advanced-tables = Advanced Tables
graphing-tours-heading-derivatives = Derivatives
graphing-tours-heading-folders = Folders
graphing-tours-heading-lists = Lists
graphing-tours-heading-regressions = Regressions
graphing-tours-heading-restrictions = Restrictions
graphing-tours-heading-sliders = Sliders
graphing-tours-heading-tables = Tables
graphing-tours-label-advanced-tables-continue = Click here to continue editing this table.
graphing-tours-label-advanced-tables-convert = Convert this to a table.
graphing-tours-label-advanced-tables-create = Click here to generate a table.
graphing-tours-label-advanced-tables-dots = Click here to only show the dots.
graphing-tours-label-advanced-tables-edit-list = Click the "Edit List" button.
graphing-tours-label-advanced-tables-graph = Start by graphing a function.
graphing-tours-label-advanced-tables-new-column = Move right to add a new column.
graphing-tours-label-advanced-tables-options = Click and hold on this icon until the options menu opens up.
graphing-tours-label-advanced-tables-start = Let's make a function. First: click here to create a new blank expression.
graphing-tours-label-advanced-tables-type-function = Try typing { $sample_expression }
graphing-tours-label-advanced-tables-wizard = You're a table wizard!
graphing-tours-label-awesome = Awesome!
graphing-tours-label-brilliant = Brilliant!
graphing-tours-label-derivative-graph-derivative = To graph its derivative: { $equation }
graphing-tours-label-derivative-hint-type-derivative = Hint: To get the derivative operator, just type d/dx.
graphing-tours-label-derivative-one-more = Let's try one more: { $equation }
graphing-tours-label-derivative-start-function = Start with a function: { $equation }
graphing-tours-label-derivative-start-graph = Let's graph a derivative!
graphing-tours-label-folders-collapse = Now we\u2019ll explore some folder functionality. Click here to collapse the folder.
graphing-tours-label-folders-did-you-know = Did You Know...
graphing-tours-label-folders-grab = Now grab this equation by its left edge and drag it into the folder.
graphing-tours-label-folders-great-start = That\u2019s a great start!
graphing-tours-label-folders-hide = You can hide everything in the folder with one click. Click here to try.
graphing-tours-label-folders-indicator = Hint: The gray line will show you if the expression is in the folder.
graphing-tours-label-folders-name = Give your folder a name.
graphing-tours-label-folders-new-equation = Let's make a new equation. For example, type: { $equation }
graphing-tours-label-folders-option = ... and select the "folder" option.
graphing-tours-label-folders-start = Let's make a folder!
graphing-tours-label-great-job = Great job!
graphing-tours-label-last-thing = Last thing!
graphing-tours-label-list-computation = You can do a computation on a list. For example: { $equation }
graphing-tours-label-lists-are-powerful = Lists are powerful. Let's see.
graphing-tours-label-lists-begin-equation = Begin by typing { $equation }
graphing-tours-label-lists-count-by = If you want to count by 5 instead, just write something like this: { $equation }
graphing-tours-label-lists-create-range = You can create lists of integers even more easily. Try this: { $equation }
graphing-tours-label-lists-graph-equation = Graph: { $equation }
graphing-tours-label-lists-graph-points = Let's graph a few points.
graphing-tours-label-lists-hint-abc = Hint: press the 'A B C' button on the keypad to find the [ ] buttons
graphing-tours-label-lists-hint-plot-points = Hint: this will plot a point for each item of b.
graphing-tours-label-lists-hint-superscript = Hint: you can type { $suggestion1 } or use the { $suggestion2 } button on the keypad below.
graphing-tours-label-lists-point-equation = Try this: { $equation }
graphing-tours-label-lists-put-to-work = Nice. Let's put that list to work.
graphing-tours-label-new-item = Click here to add a new item.
graphing-tours-label-nice = Nice!
graphing-tours-label-regressions-better-fit = Edit this equation to find a better fit. Try, for example:<br>{ $equation }
graphing-tours-label-regressions-check-model = Nice. Let's check the model.
graphing-tours-label-regressions-data = First, let's get some data.
graphing-tours-label-regressions-data-2 = Let's start with some data!
graphing-tours-label-regressions-docs = Head over to Google Docs and copy and paste this { $sample_data_link }.
graphing-tours-label-regressions-equation = Now type: { $equation }
graphing-tours-label-regressions-expression-option = ... and select the "expression" option.
graphing-tours-label-regressions-fill-sample-data = Fill in the sample data:
graphing-tours-label-regressions-hint-1 = Hint #1: to get { $y_1 } type { $y1 }.
graphing-tours-label-regressions-hint-2 = Hint #2: { $twiddle } is in our onscreen keypad in the 'A B C' section.
graphing-tours-label-regressions-keep-exploring = Nice work &ndash; Keep exploring!
graphing-tours-label-regressions-new-model = Now, let's try a new model.
graphing-tours-label-regressions-new-table = Click here to add a new table.
graphing-tours-label-regressions-own-data = Note: you can add your own data instead by clicking the { $plus_icon } button.
graphing-tours-label-regressions-residuals = Residuals are the difference between your data and your model. Click here to add them to your table and plot them on the graph.
graphing-tours-label-regressions-sample-data = sample data
graphing-tours-label-require-expressions-visible = Click to show the list of expressions.
graphing-tours-label-require-not-edit-list-mode = Click to return to your expressions.
graphing-tours-label-require-resources-not-open = Click to return to this graph.
graphing-tours-label-restrictions-abc = Hint: press the 'A B C' button on the keypad to find the { $buttons } buttons
graphing-tours-label-restrictions-blank-expression = Click here to make a new blank expression.
graphing-tours-label-restrictions-change-equation = Change this equation to { $sample_expression }
graphing-tours-label-restrictions-domain = Restrict the domain of this line by adding { $sample_expression } to the end.
graphing-tours-label-restrictions-dont-forget = Don't forget the "y="!
graphing-tours-label-restrictions-graph-parabola = Now graph: { $sample_expression }
graphing-tours-label-restrictions-move-parabola = Move the parabola.
graphing-tours-label-restrictions-new-expression = Click here to create a new expression.
graphing-tours-label-restrictions-range = Now let's restrict the range. Add { $sample_expression } to the end.
graphing-tours-label-restrictions-star = You're a restrictions star!
graphing-tours-label-restrictions-start = Let's get started!
graphing-tours-label-restrictions-straight-line = Try graphing a straight line, like { $sample_expression }
graphing-tours-label-restrictions-type-all = Try typing all of { $sample_expression }
graphing-tours-label-restrictions-typing-hint = Hint: you can type { $suggestion1 }, or use the { $suggestion2 } button on the keypad below.
graphing-tours-label-self-destruct = This message will self-destruct in { $seconds }...
graphing-tours-label-sliders-add = Now click here to add the sliders.
graphing-tours-label-sliders-blank-expression = Click here to create a new blank expression.
graphing-tours-label-sliders-change-value = Type in here to change the value.
graphing-tours-label-sliders-drag-handle = Drag the handle to change the value.
graphing-tours-label-sliders-hands-free = Go "Hands-free"
graphing-tours-label-sliders-make-sliders = Let's make some sliders!
graphing-tours-label-sliders-press-play = Press play to animate the slider.
graphing-tours-label-sliders-pro = You're a slider pro!
graphing-tours-label-sliders-try-typing = Try typing { $sample_expression }
graphing-tours-label-tables-back = Click back to continue editing.
graphing-tours-label-tables-close-options = Click anywhere to close the drawing options.
graphing-tours-label-tables-dots = Click here to connect the dots.
graphing-tours-label-tables-enter = Now try pressing Enter.
graphing-tours-label-tables-fill-another = Just fill in one more...
graphing-tours-label-tables-fill-cell = Fill it in.
graphing-tours-label-tables-fill-row = Fill in this whole row.
graphing-tours-label-tables-last-trick = Last trick!
graphing-tours-label-tables-next-row = Go down to the next row to add more data.
graphing-tours-label-tables-open-options = Click and hold on this icon until the options menu opens up.
graphing-tours-label-tables-select-table = ... and select the "table" option.
graphing-tours-label-tables-start = Let's make a table!
graphing-tours-label-tables-type-number = Type any number here.
graphing-tours-label-tables-valid-number = Uh-oh! Type a valid number here.
graphing-tours-label-tables-whiz = You're a tables whiz!
matrix-calculator-button-new = New Matrix
matrix-calculator-button-settings = settings
matrix-calculator-heading-edit-matrix = Edit Matrix { $variable }
matrix-calculator-label-columns = Columns
matrix-calculator-label-rows = Rows
matrix-calculator-narration-add-column = Add Column
matrix-calculator-narration-add-row = Add Row
matrix-calculator-narration-evaluation = equals { $rowCount } by { $columnCount } matrix.
matrix-calculator-narration-evaluation-row = Row { $rowNumber }: { $values }.
matrix-calculator-narration-keypad-key-det = Determinant
matrix-calculator-narration-keypad-key-inverse = Inverse
matrix-calculator-narration-keypad-key-rref = Reduced row echelon form
matrix-calculator-narration-keypad-key-trace = Trace
matrix-calculator-narration-keypad-key-transpose = Transpose
matrix-calculator-narration-matrix-with-variable = Matrix { $variable }
matrix-calculator-narration-matrix-without-variable = Matrix
matrix-calculator-narration-new-dimensions = Matrix size: { $rows } by { $cols }
matrix-calculator-narration-remove-column = Remove Column
matrix-calculator-narration-remove-row = Remove Row
matrix-calculator-narration-resize-controls = Resize Matrix Controls
matrix-calculator-narration-settings-menu = Settings Menu
matrix-calculator-narration-title = Desmos Matrix Calculator
### String for curriculum marketing


### 254 English words, 37 English strings

curriculum-info-button-no = No
curriculum-info-button-request-form-submit = Request More Information
curriculum-info-button-yes = Yes
curriculum-info-error-request-form-contact-info-email = Please enter a valid email address.
curriculum-info-error-request-form-contact-info-first-name = Please enter your first name.
curriculum-info-error-request-form-contact-info-last-name = Please enter your last name.
curriculum-info-error-request-form-enter-role = Please enter your role.
curriculum-info-error-request-form-site-name = Please enter the name of your school or district.
curriculum-info-heading-end-of-page-info = Want to learn more?
curriculum-info-heading-grade-level-interest = Which grades are you interested in?
curriculum-info-heading-partners-logos = Some of Our Partner Schools and Districts
curriculum-info-heading-request-form = Request more information about the curriculum.
curriculum-info-heading-request-form-contact-info = Your contact information:
curriculum-info-heading-request-form-this-fall-interest = Are you looking to use the Desmos Curriculum this fall?
curriculum-info-heading-testimonials = What are people saying?
curriculum-info-heading-whats-in-the-curriculum = What's in Desmos Math 6\u2013A1?
curriculum-info-label-grade-6-interest = Grade 6
curriculum-info-label-grade-7-interest = Grade 7
curriculum-info-label-grade-8-interest = Grade 8
curriculum-info-label-request-form-contact-info-email = Email
curriculum-info-label-request-form-contact-info-first-name = First Name
curriculum-info-label-request-form-contact-info-last-name = Last Name
curriculum-info-label-request-form-enter-role = What is your role?
curriculum-info-label-request-form-enter-role-placeholder = Role
curriculum-info-label-request-form-select-role = Select your role:
curriculum-info-label-request-form-site-name = Name of school or district:
curriculum-info-label-request-form-site-name-placeholder = School or District Name
curriculum-info-label-role-administrator = Administrator
curriculum-info-label-role-coach = Math Coach
curriculum-info-label-role-other = Other
curriculum-info-label-role-teacher = Teacher
curriculum-info-label-try-this-activity = Try an activity!
curriculum-info-narration-ipad-with-student-screen = An iPad with a student screen. On the screen, the student sketches planets and explores what happens when the drawing is sent through different machines. Behind the iPad, there is a paper version of the activity where the student has sketched scaled copies of a shape on a grid.
curriculum-info-narration-laptop-with-student-screen = A laptop with a student screen. On the screen, the student describes what he notices and wonder while changing the scale factor of a mosaic pattern he created.
curriculum-info-narration-screen-with-teacher-dashboard = A computer screen with two windows open. The first window shows the teacher screen for Grade 7, Unit 5. The second window, to the right of the first, shows a teacher dashboard with square patterns created by students in the class.
curriculum-info-text-request-sent-confirmation = Thank you, { $firstName }! An email with more information is on the way.
curriculum-info-text-request-sent-other-follow-up-email-subject = I have a question about the Desmos Curriculum
### Strings for desmos.com homepage


### 4816 English words, 410 English strings

frontpage-button-braille-print-examples = Print these examples
frontpage-button-main-join-class = Join
frontpage-error-something-went-wrong-try-again-later = Sorry! Something went wrong. Please try again later.
frontpage-heading-about-desmos-classroom = About Desmos Classroom
frontpage-heading-about-desmos-studio = About Desmos Studio
frontpage-heading-art-contest-guest-judges = Guest Judges
frontpage-heading-braille-examples = Braille Examples
frontpage-heading-braille-table-type-this = Type this
frontpage-heading-braille-table-typeset = Typeset
frontpage-heading-braille-view-examples-in = View examples in:
frontpage-heading-equity-as-we-do-this-work = As we do this work, we ask ourselves...
frontpage-heading-equity-disrupt-systemic-inequities = III.  We want to disrupt systemic inequities and conditions of marginalization in education.
frontpage-heading-equity-more-equitable-workplace = II. We want to work continuously towards an equitable workplace.
frontpage-heading-equity-next-steps = Next Steps and an Invitation
frontpage-heading-equity-principles = Equity Principles
frontpage-heading-equity-serve-all-students-and-teachers = I.  We want our products to serve all students and teachers.
frontpage-heading-footer-company = Company
frontpage-heading-footer-legal = Legal
frontpage-heading-footer-products = Products
frontpage-heading-footer-resources = Resources
frontpage-heading-guiding-build-for-real-classrooms = Build for Real Classrooms
frontpage-heading-guiding-champion-teachers = Champion Teachers
frontpage-heading-guiding-design-for-delight = Design for Delight
frontpage-heading-guiding-principles = Guiding Principles
frontpage-heading-guiding-works-every-time = Works Every Time
frontpage-heading-header-maintenance-mode = Desmos is currently undergoing scheduled maintenance, and accounts are temporarily unavailable.
frontpage-heading-keyboard-shortcuts-four-function = Four Function Calculator Keyboard Shortcuts
frontpage-heading-keyboard-shortcuts-graphing = Graphing Calculator Keyboard Shortcuts
frontpage-heading-keyboard-shortcuts-scientific = Scientific Calculator Keyboard Shortcuts
frontpage-heading-main-global-art-contest-back = The Desmos Global Art Contest is back!
frontpage-heading-main-global-art-contest-finalists-2020 = Global Math Art Contest 2020 Finalists
frontpage-heading-main-global-art-contest-finalists-2021 = Global Math Art Contest 2021 Finalists
frontpage-heading-main-global-art-contest-gallery-2022 = Global Math Art Contest 2022 Gallery
frontpage-heading-main-global-thank-you = Thank you for joining our Global Math Art Contest, { $name }!
frontpage-heading-main-lets-learn-together = Let's learn together.
frontpage-heading-main-our-partners = Our Partners
frontpage-heading-main-students = Students
frontpage-heading-main-teachers = Teachers
frontpage-heading-main-using-desmos-classroom = Using Desmos Classroom?
frontpage-heading-partners-accessibility-out-of-box = Accessibility Out of the Box
frontpage-heading-partners-anywhere-any-device = Anywhere, Any Device
frontpage-heading-partners-constant-improvements = Constant Improvements
frontpage-heading-partners-global-scale = Global Scale
frontpage-heading-partners-rock-solid-reliability = Rock-Solid Reliability
frontpage-heading-partners-want-to-embed = Want to partner with Desmos Studio PBC?
frontpage-heading-shared-contact-us = Contact Us
frontpage-heading-team-job-title-ceo = CEO
frontpage-heading-team-job-title-coaching = Coaching
frontpage-heading-team-job-title-copy-editing = Copy Editing
frontpage-heading-team-job-title-data = Data
frontpage-heading-team-job-title-engineering = Engineering
frontpage-heading-team-job-title-faculty = Faculty
frontpage-heading-team-job-title-interaction-developer = Interaction Developer
frontpage-heading-team-job-title-localization = Localization
frontpage-heading-team-job-title-operations = Operations
frontpage-heading-team-job-title-partnerships = Partnerships
frontpage-heading-team-job-title-product = Product
frontpage-heading-team-job-title-support = Support
frontpage-heading-team-meet-the-team = Meet the Team
frontpage-heading-team-partnerships-programs-and-operations = Partnerships, Programs, and Operations
frontpage-heading-team-product-and-engineering = Product and Engineering
frontpage-heading-team-teaching = Teaching
frontpage-heading-testmode-about-desmos-test-mode = About Desmos Test Mode
frontpage-heading-testmode-about-tab = About
frontpage-heading-testmode-android-tab = Android (Beta)
frontpage-heading-testmode-chromebooks-tab = Chromebooks
frontpage-heading-testmode-feedback-tab = Feedback
frontpage-heading-testmode-ipads-and-iphones-tab = iPads and iPhones
frontpage-heading-testmode-practice-tab = Practice
frontpage-heading-title-404 = Error 404: Page not found
frontpage-heading-title-about = About Us
frontpage-heading-title-art-contest = Art Contest Finalists
frontpage-heading-title-curriculum = Curriculum
frontpage-heading-title-equity = Equity Principles
frontpage-heading-title-frontpage = Let's learn together.
frontpage-heading-title-guiding-principles = Guiding Principles
frontpage-heading-title-partners = Partners
frontpage-heading-title-team = Team
frontpage-label-about-meet-the-team = Meet the Team
frontpage-label-art-contest-certificate = View your Certificate
frontpage-label-art-contest-feedback = Share your Feedback
frontpage-label-art-contest-finalists-2020 = Finalists 2020
frontpage-label-art-contest-finalists-2021 = Finalists 2021
frontpage-label-art-contest-from-artist = From the artist:
frontpage-label-art-contest-from-judges = From the judges:
frontpage-label-art-contest-photo-vernon-1st = 1st Place
frontpage-label-art-contest-photo-vernon-2nd = 2nd Place
frontpage-label-art-contest-photo-vernon-3rd = 3rd Place
frontpage-label-art-contest-trailblazer = Trailblazer
frontpage-label-main-classcode-placeholder = Code
frontpage-link-art-contest-age-range-13-14 = Ages 13-14
frontpage-link-art-contest-age-range-15-16 = Ages 15-16
frontpage-link-art-contest-age-range-17-18 = Ages 17-18
frontpage-link-art-contest-age-range-19 = Ages 19+
frontpage-link-curriculum-schedule-call = Request More Info
frontpage-link-curriculum-try-it = Try It for Free
frontpage-link-footer-classroom-activities = Classroom Activities
frontpage-link-footer-contact-twitter = Twitter
frontpage-link-footer-partnerships = Partnerships
frontpage-link-header-classroom = Classroom
frontpage-link-header-math-tools = Math Tools
frontpage-link-header-resources = Resources
frontpage-link-header-team-desmos = Team Desmos
frontpage-link-main-browse-activities = Browse Activities
frontpage-link-main-for-students = For Students
frontpage-link-main-for-teachers = For Teachers
frontpage-link-main-go-to-student-homepage = Go to Student Homepage
frontpage-link-main-view-the-winners = See all of the featured graphs!
frontpage-link-read-equity-principles = Read our Equity Principles
frontpage-link-read-guiding-principles = Read our Guiding Principles
frontpage-link-shared-about-us = About Us
frontpage-link-shared-account-settings = Account Settings
frontpage-link-shared-api-documentation = API Docs
frontpage-link-shared-assessments = Assessments
frontpage-link-shared-blog = Des-Blog
frontpage-link-shared-careers = Careers
frontpage-link-shared-contact-us = Contact Us
frontpage-link-shared-curriculum = Desmos Math 6\u2013A1
frontpage-link-shared-equity-principles = Equity Principles
frontpage-link-shared-four-function-calculator = Four-Function Calculator
frontpage-link-shared-geometry-tool = Geometry Tool
frontpage-link-shared-graphing-calculator = Graphing Calculator
frontpage-link-shared-guiding-principles = Guiding Principles
frontpage-link-shared-help-center = Help Center
frontpage-link-shared-hiring = We're hiring!
frontpage-link-shared-log-in = Log In
frontpage-link-shared-log-out = Log Out
frontpage-link-shared-matrix-calculator = Matrix Calculator
frontpage-link-shared-scientific-calculator = Scientific Calculator
frontpage-link-shared-sign-up = Sign Up
frontpage-link-shared-store = Desmos Store
frontpage-link-shared-test-practice = Test Practice
frontpage-link-testmode-learn-more-screen-pinning-mode = Learn more about using Screen Pinning on your Android device.
frontpage-narration-art-contest-image-of-graph = Image of { $graphTitle }
frontpage-narration-art-contest-image-of-graph-by = Image of graph by { $name }
frontpage-narration-art-contest-photo-boaler = Photo of Jo Boaler
frontpage-narration-art-contest-photo-bousso = Photo of Diarra Bousso
frontpage-narration-art-contest-photo-sanderson = Photo of Grant Sanderson
frontpage-narration-art-contest-photo-vernon = Photo of Natalie Vernon
frontpage-narration-art-contest-photo-woo = Photo of Eddie Woo
frontpage-narration-main-partner-logo = { $name } logo
frontpage-narration-shared-desmos-logo = Desmos Logo
frontpage-narration-shared-image-of-graph = Image of { $graphTitle }
frontpage-narration-team-collapse-biography = Collapse Biography
frontpage-narration-team-picture-of-name = Picture of { $name }
frontpage-narration-testmode-im-done-timer-ios = The I'm Done button and timer on the iOS closing screen
frontpage-narration-testmode-ipad-opening-screen = The Start Test button on the iPad opening screen
frontpage-narration-testmode-opening-screen = The opening screen of Test Mode
frontpage-text-about-build-a-world = Desmos wants to build a world where every student learns math and loves learning math, where a student\u2019s access to the power and beauty of math doesn't depend on their place of birth, race, ethnicity, gender, or any other aspect of their identity.
frontpage-text-about-classroom = Desmos Classroom is now part of Amplify Education! <1>Learn more</1>{"."}
frontpage-text-about-classroom-curriculum = In 2020, we turned those experiences into <1>a core middle school math program</1>, combining a problem-based curriculum from Illustrative Mathematics, scalable support models from Amplify, and Desmos Classroom's intuitive technology and humanizing pedagogy.
frontpage-text-about-classroom-join-us = Want to learn more? Preview <1>Desmos Math 6-A1</1>, join the Desmos Educators <2>Facebook Community</2>, or find a <3>career with Desmos Classroom</3> at Amplify!
frontpage-text-about-classroom-pedagogy = Desmos Classroom invites, celebrates, and develops student brilliance through <1>free digital classroom activities</1>, thoughtfully designed by teachers for teachers. Those activities are guided by our <2>our pedagogical philosophy</2> and help students to explore concepts deeply, collaborate with their peers on problem-solving, and apply knowledge creatively as mathematicians.
frontpage-text-about-desmos-studio-pbc = Desmos Studio is a Public Benefit Corporation with a goal of helping everyone learn math, love math, and grow with math. We believe that everyone has an inner mathematician and that some people haven\u2019t been given the opportunity, encouragement, or tools to discover theirs. So we prioritize <1>equity</1> and <2>accessibility</2> at every level of our work.
frontpage-text-about-math-tools = Our free suite of math tools, including our Graphing Calculator, is used annually by over 75 million people around the world. Those tools help people represent their ideas mathematically, connect different representations dynamically, make conjectures, and then develop entirely new ideas. They also result in some <1>pretty spectacular art</1>{"."}
frontpage-text-about-partners = We partner with the world's most popular curricula and learning software, and with <1>the majority of U.S. state-level assessments and digital college entrance exams</1>{"."}
frontpage-text-about-studio-join-us = Want to learn more? <1>Play with the calculator</1>, connect with us on <2>Twitter</2>, or find a <3>career with Desmos Studio</3>!
frontpage-text-art-contest-3rd-annual = 3rd Annual Global Math Art Contest
frontpage-text-art-contest-certificate-of-participation = Certificate of Participation
frontpage-text-art-contest-couldnt-find-certificate = We're having trouble finding a submission for the associated with this email address ({ $email }). Try reloading the page or signing in with another account?
frontpage-text-art-contest-date-of-issue = Date of Issue
frontpage-text-art-contest-enter = Learn more about Desmos's Global Art Contest 2021
frontpage-text-art-contest-featured-graph = Featured Graph, { $age }
frontpage-text-art-contest-finalist-title = \u201C{ $graphTitle }\u201D by { $name }
frontpage-text-art-contest-globe-alt-text = Illustration of Earth with a red ribbon around it.
frontpage-text-art-contest-name-and-country = by { $name }, { $country }
frontpage-text-art-contest-page-description-2020 = Desmos's first Global Math Art Contest in 2020 featured over 4,000 graphs from over 100 countries around the world. Here are the winners and finalists, chosen from countless examples of incredible effort, artistry, ingenuity, and creativity.
frontpage-text-art-contest-page-description-2021 = More than 10,000 students from around the world participated in the second annual Global Math Art Contest! Here are the winners and finalists, chosen from countless examples of incredible effort, artistry, ingenuity, and creativity.
frontpage-text-art-contest-page-description-2022 = For our 3rd annual art contest, we decided it was too hard to choose winners from the thousands of amazing graphs submitted in each age category. So we picked 20 to feature from each! Browse these graphs below, and click on any of them to learn more.
frontpage-text-art-contest-please-log-in-for-certificate = Please log in to see your Certificate of Participation.
frontpage-text-braille-examples-calculator-information = Use a Braille display? You can read and write equations in the <1>Four-Function</1> <2>(www.desmos.com/fourfunction)</2>, <3>Scientific</3> <4>(www.desmos.com/scientific)</4>, and <5>Graphing</5> <6>(www.desmos.com/calculator)</6> calculators as well as <7>classroom activities</7> <8>(teacher.desmos.com)</8> using the two most common mathematical Braille codes in North America: Nemeth and Unified English Braille (UEB).
frontpage-text-braille-examples-page-screen-reader-information = Your screen reader should be set for Computer Braille input and output to minimize the risk of translation errors. Check out <1>the help center accessibility page.</1> for more information about using Braille in the Desmos calculators.
frontpage-text-description-about = Desmos is a math ed tech company building calculators, digital classroom tools, math activities, and curriculum for classrooms around the world.
frontpage-text-description-art-contest = The Desmos Math Art Contest is open yearly to students ages 13\u2060\u2013\u206018 to showcase their graphing calculator skills, creativity, and love of math.
frontpage-text-description-equity = Our goal is to support the development of a more equitable math education system and tech industry. We use these principles as our guide.
frontpage-text-description-frontpage = Desmos offers best-in-class calculators, digital math activities, and curriculum to help every student love math and love learning math.
frontpage-text-description-guiding-principles = We have five Guiding Principles. These principles help us make tough decisions. They provide accountability for the outcomes of those decisions. And they help other people make decisions about us, by representing our values to people and organizations who are deciding if we\u2019d be good partners in their work.
frontpage-text-description-team = Our team works across 7 time zones, 2 hemispheres, and 18 states with 1 goal: to help every student learn math and love learning math.
frontpage-text-equity-as-a-us-based-team = As a primarily U.S.-based team, our focus for applying these principles has typically centered on injustices within our country. However, as our team, community of users, and partnerships continue to expand internationally, we seek to learn how we can apply these principles to strive for equitable math education worldwide.
frontpage-text-equity-everyone-understands = Our workplace should be one where everyone understands how they contribute to the company\u2019s mission and feels valued in their contribution. If we don\u2019t intentionally foster diversity and inclusion internally, we remain a part of the broader systemic inequities driving the need for these principles. Equally important, having a diverse group of colleagues is essential to serving a diverse external community. To do this, we must critically examine and address bias in our own processes and interactions.
frontpage-text-equity-goal-more-equitable-math-education-system = Our goal is to support the development of a more equitable math education system and tech industry. We use these principles as guides towards achieving this goal.
frontpage-text-equity-gratitude = We also want to express our gratitude to the many folks who have influenced and pushed our thinking in this area, especially but certainly not limited to <1>Lauren Baucom</1>, <2>Christelle Rocha</2>, <3>Ayanna Perry</3>, and Rochelle Gutierrez.
frontpage-text-equity-how-can-we-measure-impact = How can we measure the impact of our work on communities we aim to serve?
frontpage-text-equity-how-can-we-uphold-values = How can we uphold our values when selecting partners and services?
frontpage-text-equity-how-might-we-attend-to-safety = How might we attend to the mental, emotional, and physical safety of our employees?
frontpage-text-equity-how-might-we-continue-to-prioritize-equity = How might we continue to prioritize a drive for equity as our company changes over time?
frontpage-text-equity-how-might-we-examine-biases = How might we examine and reduce our individual biases?
frontpage-text-equity-how-might-we-share-our-thinking = How might we share our current thinking and get feedback?
frontpage-text-equity-how-might-we-support-access = How might we support the ACCESS and ACHIEVEMENT of the communities we serve?
frontpage-text-equity-how-might-we-support-identity = How might we support the IDENTITY and POWER of the communities we serve?
frontpage-text-equity-how-might-we-sustain-ourselves = How might we sustain ourselves in our day-to-day work?
frontpage-text-equity-how-might-work-disrupt-white-supremacy = How might our work disrupt white supremacy and the oppressive results of dominant culture?
frontpage-text-equity-how-will-it-help = How might this work help the communities we aim to serve? How might it harm these communities?
frontpage-text-equity-on-a-mission = We're on a mission to help every student learn math and love learning math. To achieve our mission, we must acknowledge past and present injustices in our communities and take intentional action to make change.
frontpage-text-equity-tag-or-email = We would love to hear ways these principles may be underdeveloped or ways in which these principles shifted your thinking. If you want to respond publicly, tag us <1>@desmos</1>{"."} If you want to respond privately, feel free to email <2>equity@desmos.com</2>{"."}
frontpage-text-equity-we-have-a-responsibility = We have a responsibility to continuously learn about how systemic inequity is embedded in education and to use this knowledge to drive our decision-making. As we learn and put our learning into practice, we share our work with the hope that others will listen, learn, and push us further.
frontpage-text-equity-we-recognize-creating-adopting = We recognize that creating and adopting a set of equity principles is just one foundational step that helps us orient the work that comes next. We are also aware that our team members\u2019 identities, experiences, and biases limit our ability to help every student or to see ways in which our systems and structures bias some groups over others.
frontpage-text-equity-what-voices-can-we-amplify = What underrepresented voices can we learn from and amplify?
frontpage-text-equity-which-communities-to-learn-from = Which communities do we need to learn from and serve?
frontpage-text-equity-who-serves-harms = Who might each internal process serve? Who might this process harm?
frontpage-text-equity-without-taking-intentional-steps = Without taking intentional steps, our work will not serve all groups well. Therefore, we must focus on identifying and attending to the needs of marginalized and excluded communities. This means learning from and with these teachers and students, and using their needs to shape our work and measure our success.
frontpage-text-footer-copyright-studio = Copyright { $copyrightSign } { $year } Desmos Studio, PBC
frontpage-text-global-thank-you = We were amazed going through all of the incredible graphs. We hope that you had as much fun being a part of the contest as we had running it. If you want to, you can:
frontpage-text-guiding-building-for-real-classrooms = Building for real classrooms requires listening to teachers and striving to understand the operations of their classrooms\u2014the features that make whole-group or small-group discussions <1>successful</1>, for example, or the way unreliable technology can ruin a lesson. Building for real classrooms also requires us to understand the inequities in the way schools are resourced. Knowing that many students and teachers operate with limited devices and connectivity motivates our team to prioritize building performant, low-bandwidth systems.
frontpage-text-guiding-footnote-danny-martin = <1>1</1> <2>Danny Martin</2>, for example, entreats us to consider the brilliance of Black children as an axiom, a statement that is self-evidently true.
frontpage-text-guiding-honor-students-brilliance = Honor Students' Brilliance
frontpage-text-guiding-once-students-realize = Once students realize we are encouraging their agency and creativity, we hope they will seek delight in every corner of our work. Therefore, we're constantly redesigning for delight and updating to respond to all the student creativity we didn\u2019t anticipate.
frontpage-text-guiding-principles-gratitude = All errors in this document are our own, but we are particularly grateful to Desmos Fellows <1>Lauren Baucom</1> and <2>Christelle Rocha</2> for their feedback on earlier drafts of these principles.
frontpage-text-guiding-principles-introduction = We have five Guiding Principles. These principles help us make tough decisions, and provide accountability for the outcomes of those decisions. And they help other people make decisions about us by representing our values to the people and organizations who are deciding if we\u2019d be good partners in their work.
frontpage-text-guiding-remove-barriers = We also try to remove barriers that might prevent certain students from showcasing their brilliance by focusing on equity in our business models and accessibility in our products.
frontpage-text-guiding-so-we-champion = So we champion teachers. We start by listening and learning from and with teachers and researchers. We ask how we can best support each stage of a teacher\u2019s career. We also work to oppose any effort to devalue or deprofessionalize teaching.
frontpage-text-guiding-there-are-a-number = There are a number of reasons that a product might not \u201Cwork\u201D for a user. It could just break, as technology so often does. It could be confusing for a subset of users, perhaps those who are less confident using technology. It could be that someone uses it in a way that we didn\u2019t anticipate. Whatever the reason, even a product that works 99% of the time will interrupt the learning in 1 of 3 classrooms. As a result, we prioritize reliability and usability, even at the expense of development speed. We strive for backwards compatibility, and still open graphs made in the first week of our calculator\u2019s launch. We also aim to design software and lessons that work for a wide variety of inputs. We believe that it\u2019s not our job to enforce rigid syntax, but rather to interpret, as well as we can, anything a user does.
frontpage-text-guiding-to-honor-students = To honor students\u2019 brilliance, we must first create opportunities for students to express their brilliance. We design tools and lessons that invite creativity and welcome multiple approaches. We build features to help teachers showcase student thinking, for example with our <1>dashboard tools</1> that support the <2>5 Practices</2>{"."} We seek to provide meaningful <3>task-oriented</3> feedback on students\u2019 thinking.
frontpage-text-guiding-to-support-real-students = To support real students and real teachers, we need to design for their real and disparate environments.
frontpage-text-guiding-we-are-not-uncritical = We are not uncritical or passive champions. We recognize that teachers can both help and harm. We instead consider ourselves partners, supporters, and advocates in the critical work of building joyful classrooms and honoring the brilliance of every student. Excellence in teaching takes years of training and practice, and supporting such excellence is one of our most powerful levers for achieving our goals.
frontpage-text-guiding-we-believe-that-students = We believe that students are creative, knowledgeable, and brilliant. We recognize that students in math classes are not always treated as such, and that students of certain genders, races, or backgrounds are disproportionately affected.
frontpage-text-guiding-we-cant-enact = We can't enact any of our principles without teachers. We believe that teachers are\u2014and should remain\u2014an integral part of the learning process, and we know that they wield enormous power in their students\u2019 learning experiences.
frontpage-text-guiding-we-know-that-software = We know that software will inevitably break or students will do things we don\u2019t anticipate. We believe that reliability doesn't come from avoiding every possible way something can go wrong, but from reacting quickly, carefully, and <1>blamelessly</1> when it does.
frontpage-text-guiding-we-prioritize-delight = We prioritize delight in our products even at the cost of development time. We would rather release a delightful product or lesson tomorrow than an adequate one today. We aim for delight not just in the user experience but in the learning experience as well. For example, students experience joy in "<1>being the cause</1>," so we try to create tools and lessons that respond to their interesting thinking. We relish surprises from students and try to surprise them in turn by coming along as they go off trail.
frontpage-text-guiding-we-reject-the-idea = We reject the idea that these students are more or less capable and recognize that we must learn from and with marginalized and excluded communities<1>1</1> in order to counter these narratives.
frontpage-text-guiding-we-want-to-help = We want to help all students learn math, but we see little value in their learning math if they don't also find something to <1>love</1> about math as well.
frontpage-text-header-app-links = Download our apps in the <1>Google Play Store</1> and <2>iOS App Store</2>{"."}
frontpage-text-main-interactive-and-creative-activities = Interactive and creative activities for your math class.
frontpage-text-main-join-your-classmates = Join your classmates!
frontpage-text-main-on-a-mission = We're on a mission to help every student learn math and love learning math.
frontpage-text-main-partners-benefits = As a partner of Desmos Studio PBC, you benefit from our continual work to make Desmos Tools more powerful, faster, and easier to use. We release a new version of the API annually in April as a free upgrade for all of our partners. <1>Read our Changelog</1>{"."}
frontpage-text-main-partners-information = Our tools power <1>assessments</1> and major curricula. <2>Learn more</2>
frontpage-text-partners-accessible-api = We believe everyone deserves access to powerful math tools, including those who are blind or visually impaired. Desmos's API is WCAG 2.1 compliant at the AA level. We support fully blind users by converting graphs to sound and connecting with screen readers. <1>Learn More</1>{"."}
frontpage-text-partners-desmos-opening-paragraph = Partner with us to embed the power of Desmos Tools right into your platform, website, or app! Desmos Tools (Graphing, Scientific, Four Function, and Matrix calculators) are available for partners with the Desmos API.
frontpage-text-partners-desmos-runs-on-modern-browser = Desmos Tools run on any modern browser with no downloads or installs. We also run seamlessly on iPhones, iPads, Android phones and tablets, Chromebooks, and Windows touch devices. We've seen just about every combination. We make sure our software runs on any modern browser, in nearly any configuration.
frontpage-text-partners-desmos-used-by-millions = Desmos is used by millions of students and teachers in nearly every country in the world and has been translated into 30 languages.
frontpage-text-partners-desmos-used-by-millions = Desmos Tools are used by millions of people globally, and are translated into a <1>variety of languages</1>{"."}
frontpage-text-partners-uptime = One of the Desmos Studio values is "Works every time." This extends to the Desmos API. With greater than 99.99% uptime over the last 3 years, Desmos Tools provide the reliability your app or website needs. Better yet, we\u2019ll deliver regular library builds that you can host on your own infrastructure.
frontpage-text-team-about-us = Our team works across 7 time zones, 2 hemispheres, and 18 states with 1 goal: to help every student learn math and love learning math. Want to join us? <1>We're hiring!</1>
frontpage-text-testmod-administer-test = <1>To administer a Secure Test:</1><2><3>Have students pin the app.</3><4>Tell the students not unpin the app.</4><5>At the end of the test, confirm that the screen was pinned for the entire test by checking the in-app clock.</5></2>
frontpage-text-testmod-feedback = We work to continuously improve our Test Mode apps, and we welcome your feedback on how we can support the best possible experience for your students and colleagues. Please email us at <1>feedback@desmos.com</1> with any questions or comments!
frontpage-text-testmode-android = Our <1>Android app</1> (currently in Beta testing) allows for offline practice.
frontpage-text-testmode-app-self-lock-mode-colors = While in App Self-Lock mode, the top bar of the calculator will change color according to the calculator in use: green for graphing, purple for scientific, blue for four function. There will also be a badge next to the Desmos logo.
frontpage-text-testmode-chromebooks = Our Chrome app allows for offline practice. You can download the Chrome app by visiting <1>bit.ly/desmos-test-mode-chrome-app</1> on the device. The <2>Chrome browser</2> must be installed on the device to use the Chrome Test Mode app.
frontpage-text-testmode-enable-guided-access = <1>To enable Guided Access:</1><2><3>Go to Settings > General > Accessibility > Guided Access.</3><4>Pick a passcode that needs to be entered.</4><5>Open up the Test Mode app.</5><6>Triple-click the Side or Home button.</6></2><7>This will lock the device to that app and won't allow the student to leave it without a code.</7>
frontpage-text-testmode-enable-screen-pinning = <1>To enter Screen Pinning:</1><2><3>Disable WiFi on your phone.</3><4>Enter Airplane Mode on your phone.</4><5>A "Start Test" button will appear. Click it.</5></2>
frontpage-text-testmode-exit-guided-access = <1>To exit Guided Access:</1><2><3>Triple-click the Side or Home button.</3><4>Enter the passcode that you chose.</4></2>
frontpage-text-testmode-four-function-calculator-app-self-lock-mode-caption = Four function calculator in App Self-Lock mode with a blue top bar.
frontpage-text-testmode-four-function-calculator-blue-top-bar = The secure four function calculator has a blue top bar.
frontpage-text-testmode-four-function-calculator-caption = Four function calculator in kiosk mode with a blue top bar.
frontpage-text-testmode-graphing-calculator-app-self-lock-mode-caption = Graphing calculator in App Self-Lock mode with a green top bar.
frontpage-text-testmode-graphing-calculator-kiosk-mode-caption = Graphing calculator in kiosk mode with a green top bar.
frontpage-text-testmode-guided-access = For additional security, you can lock the student into the app using <1>Guided Access</1>{"."}
frontpage-text-testmode-ipads-and-iphones = Our <1>iPad and iPhone app</1> allows for offline practice. The app also supports additional levels of security.
frontpage-text-testmode-kiosk-mode = Kiosk mode provides an extra level of security by preventing other apps from being used while the calculator is open. Students will be locked into the calculator configuration they choose before pressing "Start Test". Before you sign in, click \u201CApps\u201D on the bottom bar and then select Desmos Test Mode. To exit kiosk mode, turn the Chromebook off.
frontpage-text-testmode-kiosk-mode-colors = While in kiosk mode, the top bar of the calculator will change color according to the calculator in use: green for graphing, purple for scientific, blue for four function. There will also be a badge next to the Desmos logo.
frontpage-text-testmode-levels-of-security = This page describes the various levels of security available through our apps, along with instructions for installation and usage.
frontpage-text-testmode-low-stakes-assessments = Each app lets you administer low-stakes, proctored assessments with security features to help enforce your school's or classroom's policies.
frontpage-text-testmode-partners = Desmos partners with high-stakes test providers in <1>over 35 states and on several national and international exams</1> to provide access to our calculators on testing day.
frontpage-text-testmode-practice = Students can practice using the calculators on our <1>Practice Page</1>{"."} We also provide free apps for <2>Chromebooks,</2> <3>iPads, and iPhones</3> to support practice.
frontpage-text-testmode-practice-apps-match-test-day = Our practice apps match the configuration that students will encounter on test day. Students can practice for a specific assessment by selecting "Choose Assessment" on the opening screen.
frontpage-text-testmode-scientific-calculator-app-self-lock-mode-caption = Scientific calculator in App Self-Lock mode with a purple top bar.
frontpage-text-testmode-scientific-calculator-caption = Scientific calculator in kiosk mode with a purple top bar.
frontpage-text-testmode-scientific-calculator-purple-top-bar = The secure scientific calculator has a purple top bar.
frontpage-text-testmode-screen-pinning-mode = Screen Pinning mode provides an extra level of security by preventing other apps from being used while the calculator is open.
frontpage-text-testmode-secure-graphing-calculator-green-top-bar = The secure graphing calculator has a green top bar.
frontpage-text-testmode-students-can-leave-app-self-lock-mode = Please note that students can leave App Self-Lock by clicking "I'm Done" before the end of the test. You can monitor appropriate usage by looking at the log at the conclusion of the test. It will show how long the student was continuously in the application.
frontpage-text-testmode-students-can-leave-chromebook-app = Please note that students can leave the app by powering down their Chromebook and restarting it. You can monitor appropriate usage by looking at the log at the conclusion of the test. It will show how long the student was continuously in the application.
frontpage-text-testmode-students-can-opt-into-app-self-lock = Students can opt into App Self-Lock by pressing the "Start Test" button. While in App Self-Lock, students will be locked into the calculator they selected before pressing "Start Test". They will not be able to switch calculators nor leave the app until they leave App Self-Lock.
frontpage-text-testmode-to-help-teachers-and-students-prepare = To help students and teachers prepare for assessments, and to support ongoing instruction and formative assessment needs, Desmos has developed a suite of Test Mode apps.
practice-button-sc-info-pdf = { $stateName } PDF
practice-button-state-info-pdf = { $stateName } Information PDF
practice-heading-is-desmos-on-test = Is Desmos on your test?
practice-heading-national-international-assessments = National and International Assessments
practice-heading-practice = Practice
practice-heading-privacy = Privacy
practice-heading-questions-and-feedback = Additional Questions and Feedback
practice-heading-state-assessments = State Assessments
practice-heading-title-test-mode = Test Mode
practice-heading-title-testing = Testing
practice-label-desmos-on-test = Desmos is on the test!
practice-label-desmos-on-test-apply-nysed = Apply to NYSED to use Desmos!
practice-label-desmos-on-test-partial = Desmos can be used on the test
practice-label-desmos-on-tests = Desmos is on the tests!
practice-label-ib-middle-years = International Baccalaureate\xAE (IB) Middle Years Programme (MYP)
practice-label-nwea-map-growth = NWEA MAP\xAE Growth\u2122
practice-label-sample = Sample
practice-label-sbac = Smarter Balanced
practice-label-state-test = State Test:
practice-label-state-tests = State Tests:
practice-label-states-ak-four-function-grades = Grades 5, 8 (Science)
practice-label-states-ak-graphing-grades = Grade 9 (Math)
practice-label-states-ak-scientific-grades = Grades 6-9 (Math), Grade 10 (Science)
practice-label-states-al-four-function-grades = Grades 6-8 (Math), Grade 8 (Science)
practice-label-states-al-scientific-grades = Grades 6-8 (Math), Grade 8 (Science)
practice-label-states-az-four-function-grades = Grade 5 (Science)
practice-label-states-az-graphing-grades = High School Math
practice-label-states-az-scientific-grades = Grade 7-8 (Math), 8 & High School (Sci)
practice-label-states-ca-four-function-grades = Grade 6 (Math), Grade 5 (Science)
practice-label-states-ca-graphing-grades = Grade 11 (Math)
practice-label-states-ca-scientific-grades = Grades 7-8 (Math), Grade 8, High School (Science)
practice-label-states-ct-four-function-grades = Grade 6 (Math) Grade 5 (Sci)
practice-label-states-ct-graphing-grades = High School
practice-label-states-ct-scientific-grades = Grades 7-8 (Math), Grade 8 (Sci)
practice-label-states-de-four-function-grades = Grade 6
practice-label-states-de-graphing-grades = High School
practice-label-states-de-scientific-grades = Grades 7-8
practice-label-states-fl-scientific-grades = Grades 7-8
practice-label-states-ga-four-function-grades = Grades 6-7
practice-label-states-ga-graphing-grades = Grade 8 & High School
practice-label-states-ga-scientific-grades = Grades 6-8 & High School
practice-label-states-hi-four-function-grades = Grade 6 (Math), Grade 5 (Science)
practice-label-states-hi-graphing-grades = Grade 11 (Math, Biology)
practice-label-states-hi-scientific-grades = Grades 7-8 (Math), Grade 8 (Science)
practice-label-states-ia-four-function-grades = Grades 3-6 (Mathematics), Grade 5 (Science)
practice-label-states-ia-scientific-grades = Grades 7-11 (Mathematics), Grades 8 & 10 (Science)
practice-label-states-id-four-function-grades = Grade 6 (Math), Grade 5 (Science)
practice-label-states-id-graphing-grades = Grade 11 (Math), High School (Science)
practice-label-states-id-scientific-grades = Grades 7-8 (Math), Grade 8 (Science)
practice-label-states-in-four-function-grades = Grade 6 (Math) Grades 4, 6 (Sci), I AM
practice-label-states-in-graphing-grades = High School (SAT Math)
practice-label-states-in-scientific-grades = Grades 7-8 (Math), Biology
practice-label-states-ky-four-function-grades = High School (Mathematics)
practice-label-states-ky-graphing-grades = High School (Mathematics and Science)
practice-label-states-ky-scientific-grades = High School (Mathematics)
practice-label-states-la-graphing-grades = High School
practice-label-states-ma-graphing-grades = Grades 8 & 10 (Mathematics)
practice-label-states-ma-scientific-grades = High School (Introductory Physics)
practice-label-states-md-four-function-grades = Grade 5 (Science), Grades 3-7 (Mathematics)
practice-label-states-md-graphing-grades = High School (Mathematics)
practice-label-states-md-scientific-grades = Grade 8 (Mathematics), Grade 8 (Science)
practice-label-states-mi-four-function-grades = Grade 6
practice-label-states-mi-scientific-grades = Grade 7
practice-label-states-mo-four-function-grades = Grades 6-8 (Mathematics), Grade 5 & 8 (Science)
practice-label-states-mo-graphing-grades = Grades 6-8 (Mathematics), Algebra I, Algebra II, Geometry, Grade 8 (Science), Physical Science, and Biology
practice-label-states-mo-scientific-grades = Grades 6-8 (Mathematics), Grade 8 (Science)
practice-label-states-ms-graphing-grades = Algebra 1
practice-label-states-mt-four-function-grades = Grade 6 (Math), Grade 5 (Science)
practice-label-states-mt-graphing-grades = Grade 11 (Math)
practice-label-states-mt-scientific-grades = Grades 7-8 (Math), Grade 8 (Science)
practice-label-states-nc-four-function-grades = Grades 3-5
practice-label-states-nc-graphing-grades = Grade 8, Math 1, and above
practice-label-states-nc-scientific-grades = Grades 6-8
practice-label-states-nd-four-function-grades = Grade 6 (Math), Grade 4 (Science)
practice-label-states-nd-graphing-grades = Grade 10 (Math, Science)
practice-label-states-nd-scientific-grades = Grades 7-8 (Math) Grades8 (Science)
practice-label-states-ne-four-function-grades = Grade 6
practice-label-states-ne-scientific-grades = Grades 7-8 (Math), Biology
practice-label-states-nh-graphing-grades = High School (Math)
practice-label-states-nh-scientific-grades = Grades 6-8 (Math) Grades 5, 8, High School (Science)
practice-label-states-nv-four-function-grades = Grade 5 (Science), Grade 6 (Mathematics)
practice-label-states-nv-scientific-grades = Grades 7-8 (Mathematics), Grade 8, High School (Science)
practice-label-states-ny-graphing-grades = High School (Mathematics)
practice-label-states-oh-graphing-grades = High School
practice-label-states-oh-scientific-grades = Grades 3-8
practice-label-states-or-four-function-grades = Grade 6 (Math), Grade 5 (Science)
practice-label-states-or-graphing-grades = Grade 11 (Math, Science)
practice-label-states-or-scientific-grades = Grades 7-8 (Math), Grade 8 (Science)
practice-label-states-pa-four-function-grades = Mathematics (Grades 4-8, Algebra 1), Science (Grades 4 and 8, Biology, CDT)
practice-label-states-pa-graphing-grades = Mathematics (Algebra I, CDT)
practice-label-states-pa-scientific-grades = Mathematics (Grades 6-8), Science (Grade 8, Biology, CDT)
practice-label-states-ri-graphing-grades = Grade 8 (Mathematics), Grade 11 (Science)
practice-label-states-sc-alt-four-function-grades = Grade 6, Alternate Assessments
practice-label-states-sc-alt-scientific-grades = Grades 7, 8, 11, Alternate Assessments
practice-label-states-sc-std-four-function-grades = Grades 6 (Math, Science)
practice-label-states-sc-std-graphing-grades = Grades 7-8 (Math), Algebra 1, Biology
practice-label-states-sc-std-scientific-grades = Grades 6 (Math, Science), 7-8 (Math), Algebra 1, Biology
practice-label-states-sd-four-function-grades = Grade 6 (Math), Grade 5 (Science)
practice-label-states-sd-graphing-grades = Grade 11 (Math), High School (Science)
practice-label-states-sd-scientific-grades = Grades 7-8 (Math), Grade 8 (Science)
practice-label-states-tn-graphing-grades = Algebra I\u2013II, Geometry, Integrated Math I\u2013III, and Biology
practice-label-states-tn-scientific-grades = Grades 6-8 (Math and Science)
practice-label-states-tx-four-function-grades = Grade 8 Science, Biology
practice-label-states-tx-graphing-grades = Grade 8 Science, Biology, Grade 8 Math, Algebra 1, Algebra 2
practice-label-states-tx-scientific-grades = Grade 8 Science, Biology
practice-label-states-ut-graphing-grades = Grades 9-10 (Mathematics)
practice-label-states-ut-scientific-grades = Grades 9-10 (Science)
practice-label-states-va-four-function-grades = Grades 4-5
practice-label-states-va-graphing-grades = High School
practice-label-states-va-scientific-grades = Grades 6-8
practice-label-states-vi-four-function-grades = Grade 6
practice-label-states-vi-graphing-grades = Grades 10-11
practice-label-states-vi-scientific-grades = Grades 7-8
practice-label-states-vt-four-function-grades = Grade 6 (Math), Grade 5 (Science)
practice-label-states-vt-graphing-grades = High School (Math, Science)
practice-label-states-vt-scientific-grades = Grades 7-8 (Math), Grade 8 (Science)
practice-label-states-wa-four-function-grades = Grade 6 (Math), Grade 5 (Science)
practice-label-states-wa-graphing-grades = Grade 11 (Math), Grade 8, High School (Science)
practice-label-states-wa-scientific-grades = Grades 7-8 (Math)
practice-label-states-wv-four-function-grades = Grade 6
practice-label-states-wv-graphing-grades = High School
practice-label-states-wv-scientific-grades = Grades 7-8
practice-label-states-wy-four-function-grades = Grade 6
practice-label-states-wy-graphing-grades = High School
practice-label-states-wy-scientific-grades = Grades 7-8
practice-link-four-function = Four Function Calculator
practice-link-graphing = Graphing Calculator
practice-link-scientific = Scientific Calculator
practice-narration-close-details = Close Details About { $stateName }
practice-text-accessibility-information = Desmos is committed to helping every student love learning math. We are proud to say that the Desmos calculators are <1>WCAG 2.1 AA compliant. </1>The accessibility improvements we've made ensure students who are blind or visually impaired have the same opportunities as their peers to discover the joy of learning math. Please read more about this at <2>www.desmos.com/accessibility</2>{"."}
practice-text-calculator-note = These calculators differ from the ones on our site. You can find more information in the PDF.
practice-text-data-privacy = Additional rules apply for data privacy when dealing with children under 13. The <1>Four-Function</1> and <2>Scientific</2> calculators, which will be used by students under the age of 13, never request student data as there is no way to log in.
practice-text-description-test-mode = Learn how to configure Test Mode to use Desmos calculators on assessments.
practice-text-description-testing = Is Desmos on your test? Find out if the Desmos calculators are on your state assessments.
practice-text-different-calculators-ib = Please note that these calculators differ from the ones on our site. You can find more information in <1>our overview PDF</1>{"."} Students can practice on the sample <2>Scientific Calculator</2>{"."}
practice-text-different-calculators-nwea = Please note that these calculators differ from the ones on our site. You can find more information in <1>our overview PDF</1>{"."} Students can practice on the sample <2>Four Function</2> or <3>Scientific Calculator</3>{"."}
practice-text-different-calculators-sbac = Desmos calculators are available on Smarter Balanced assessments. Please note that these calculators differ from the standard ones on our site. Students who reside in a Smarter Balanced member state or U.S. territory can practice with the calculators configured for specific test settings available below.
practice-text-more-information = Interested in learning more about Desmos calculator found on your state or national assessment? Check out our <1>professional learning and development offerings</1>{"."}
practice-text-national-international-assessments = Desmos is now available on national and international assessments! These assessments include:
practice-text-practice-information = To help students and teachers prepare for assessments, and to support ongoing instruction and formative assessment needs, Desmos has developed a suite of Test Mode apps. Our practice apps match the configuration that students will encounter on test day. You can learn more at <1>www.desmos.com/test-mode</1>{"."}
practice-text-privacy = During test administrations, Desmos will not receive any data about students. Vendors will host the Desmos technology directly on their servers and will not exchange any data with Desmos's servers. Furthermore, students do not need to sign in or provide any personal information about themselves to be able to practice with Desmos calculators before the test.
practice-text-questions = We know this change may prompt additional questions from teachers, parents, and administrators. Please don't hesitate to email questions or feedback to <1>support@desmos.com</1>{"."}
practice-text-state-assessments = Desmos is also available on a range of state assessments! Find your state below to learn more.
practice-text-state-not-listed = If Desmos isn't on your state assessment yet, and you're interested in changing that, <1>please let us know!</1>
practice-text-students-create-accounts = While practicing for the test, some 11th-grade students using <1>desmos.com/calculator</1> may choose to create accounts to be able to save work for a later time. We encourage everyone to review the <2>Desmos Privacy Policy</2>, which describes what information we collect from these users who are over the age of 13 and what we do with that information.
`;var Tc=class{constructor(e){this.value=e}valueOf(){return this.value}},Ci=class extends Tc{constructor(e="???"){super(e)}toString(e){return`{${this.value}}`}},ha=class extends Tc{constructor(e,r={}){super(e),this.opts=r}toString(e){try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(r){return e.reportError(r),this.value.toString(10)}}},Ll=class extends Tc{constructor(e,r={}){super(e),this.opts=r}toString(e){try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(r){return e.reportError(r),new Date(this.value).toISOString()}}};var h1=100,FN="\u2068",RN="\u2069";function NN(t,e,r){if(r===e||r instanceof ha&&e instanceof ha&&r.value===e.value)return!0;if(e instanceof ha&&typeof r=="string"){let i=t.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value);if(r===i)return!0}return!1}function g1(t,e,r){return e[r]?ap(t,e[r].value):(t.reportError(new RangeError("No default")),new Ci)}function vE(t,e){let r=[],i=Object.create(null);for(let n of e)n.type==="narg"?i[n.name]=Bg(t,n.value):r.push(Bg(t,n));return{positional:r,named:i}}function Bg(t,e){switch(e.type){case"str":return e.value;case"num":return new ha(e.value,{minimumFractionDigits:e.precision});case"var":return BN(t,e);case"mesg":return KN(t,e);case"term":return UN(t,e);case"func":return qN(t,e);case"select":return HN(t,e);default:return new Ci}}function BN(t,{name:e}){let r;if(t.params)if(Object.prototype.hasOwnProperty.call(t.params,e))r=t.params[e];else return new Ci(`$${e}`);else if(t.args&&Object.prototype.hasOwnProperty.call(t.args,e))r=t.args[e];else return t.reportError(new ReferenceError(`Unknown variable: $${e}`)),new Ci(`$${e}`);if(r instanceof Tc)return r;switch(typeof r){case"string":return r;case"number":return new ha(r);case"object":if(r instanceof Date)return new Ll(r.getTime());default:return t.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof r}`)),new Ci(`$${e}`)}}function KN(t,{name:e,attr:r}){let i=t.bundle._messages.get(e);if(!i)return t.reportError(new ReferenceError(`Unknown message: ${e}`)),new Ci(e);if(r){let n=i.attributes[r];return n?ap(t,n):(t.reportError(new ReferenceError(`Unknown attribute: ${r}`)),new Ci(`${e}.${r}`))}return i.value?ap(t,i.value):(t.reportError(new ReferenceError(`No value: ${e}`)),new Ci(e))}function UN(t,{name:e,attr:r,args:i}){let n=`-${e}`,o=t.bundle._terms.get(n);if(!o)return t.reportError(new ReferenceError(`Unknown term: ${n}`)),new Ci(n);if(r){let s=o.attributes[r];if(s){t.params=vE(t,i).named;let l=ap(t,s);return t.params=null,l}return t.reportError(new ReferenceError(`Unknown attribute: ${r}`)),new Ci(`${n}.${r}`)}t.params=vE(t,i).named;let a=ap(t,o.value);return t.params=null,a}function qN(t,{name:e,args:r}){let i=t.bundle._functions[e];if(!i)return t.reportError(new ReferenceError(`Unknown function: ${e}()`)),new Ci(`${e}()`);if(typeof i!="function")return t.reportError(new TypeError(`Function ${e}() is not callable`)),new Ci(`${e}()`);try{let n=vE(t,r);return i(n.positional,n.named)}catch(n){return t.reportError(n),new Ci(`${e}()`)}}function HN(t,{selector:e,variants:r,star:i}){let n=Bg(t,e);if(n instanceof Ci)return g1(t,r,i);for(let o of r){let a=Bg(t,o.key);if(NN(t,n,a))return ap(t,o.value)}return g1(t,r,i)}function CE(t,e){if(t.dirty.has(e))return t.reportError(new RangeError("Cyclic reference")),new Ci;t.dirty.add(e);let r=[],i=t.bundle._useIsolating&&e.length>1;for(let n of e){if(typeof n=="string"){r.push(t.bundle._transform(n));continue}if(t.placeables++,t.placeables>h1)throw t.dirty.delete(e),new RangeError(`Too many placeables expanded: ${t.placeables}, max allowed is ${h1}`);i&&r.push(FN),r.push(Bg(t,n).toString(t)),i&&r.push(RN)}return t.dirty.delete(e),r.join("")}function ap(t,e){return typeof e=="string"?t.bundle._transform(e):CE(t,e)}var kx=class{constructor(e,r,i){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=r,this.args=i}reportError(e){if(!this.errors)throw e;this.errors.push(e)}memoizeIntlObject(e,r){let i=this.bundle._intls.get(e);i||(i={},this.bundle._intls.set(e,i));let n=JSON.stringify(r);return i[n]||(i[n]=new e(this.bundle.locales,r)),i[n]}};function f1(t,e){let r=Object.create(null);for(let[i,n]of Object.entries(t))e.includes(i)&&(r[i]=n.valueOf());return r}var $N=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function m1(t,e){let r=t[0];if(r instanceof Ci)return new Ci(`NUMBER(${r.valueOf()})`);if(r instanceof ha||r instanceof Ll)return new ha(r.valueOf(),__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},r.opts),f1(e,$N)));throw new TypeError("Invalid argument to NUMBER")}var zN=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function y1(t,e){let r=t[0];if(r instanceof Ci)return new Ci(`DATETIME(${r.valueOf()})`);if(r instanceof ha||r instanceof Ll)return new Ll(r.valueOf(),__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},r.opts),f1(e,zN)));throw new TypeError("Invalid argument to DATETIME")}var Kg=class{constructor(e,{functions:r,useIsolating:i=!0,transform:n=o=>o}={}){this._terms=new Map,this._messages=new Map,this._intls=new WeakMap,this.locales=Array.isArray(e)?e:[e],this._functions=__dcg_shared_module_exports__['b']({NUMBER:m1,DATETIME:y1},r),this._useIsolating=i,this._transform=n}hasMessage(e){return this._messages.has(e)}getMessage(e){return this._messages.get(e)}addResource(e,{allowOverrides:r=!1}={}){let i=[];for(let n=0;n<e.body.length;n++){let o=e.body[n];if(o.id.startsWith("-")){if(r===!1&&this._terms.has(o.id)){i.push(new Error(`Attempt to override an existing term: "${o.id}"`));continue}this._terms.set(o.id,o)}else{if(r===!1&&this._messages.has(o.id)){i.push(new Error(`Attempt to override an existing message: "${o.id}"`));continue}this._messages.set(o.id,o)}}return i}formatPattern(e,r=null,i=null){if(typeof e=="string")return this._transform(e);let n=new kx(this,i,r);try{return CE(n,e).toString(n)}catch(o){if(n.errors)return n.errors.push(o),new Ci().toString(n);throw o}}};var SE=/^(-?[a-zA-Z][\w-]*) *= */gm,b1=/\.([a-zA-Z][\w-]*) *= */y,WN=/\*?\[/y,EE=/(-?[0-9]+(?:\.([0-9]+))?)/y,jN=/([a-zA-Z][\w-]*)/y,x1=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,YN=/^[A-Z][A-Z0-9_-]*$/,Ix=/([^{}\n\r]+)/y,JN=/([^\\"\n\r]*)/y,w1=/\\([\\"])/y,v1=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,XN=/^\n+/,C1=/ +$/,QN=/ *\r?\n/g,ZN=/( *)$/,eB=/{\s*/y,S1=/\s*}/y,tB=/\[\s*/y,rB=/\s*] */y,iB=/\s*\(\s*/y,nB=/\s*->\s*/y,oB=/\s*:\s*/y,aB=/\s*,?\s*/y,sB=/\s+/y,sp=class{constructor(e){this.body=[],SE.lastIndex=0;let r=0;for(;;){let L=SE.exec(e);if(L===null)break;r=SE.lastIndex;try{this.body.push(l(L[1]))}catch(R){if(R instanceof SyntaxError)continue;throw R}}function i(L){return L.lastIndex=r,L.test(e)}function n(L,R){if(e[r]===L)return r++,!0;if(R)throw new R(`Expected ${L}`);return!1}function o(L,R){if(i(L))return r=L.lastIndex,!0;if(R)throw new R(`Expected ${L.toString()}`);return!1}function a(L){L.lastIndex=r;let R=L.exec(e);if(R===null)throw new SyntaxError(`Expected ${L.toString()}`);return r=L.lastIndex,R}function s(L){return a(L)[1]}function l(L){let R=u(),q=c();if(R===null&&Object.keys(q).length===0)throw new SyntaxError("Expected message value or attributes");return{id:L,value:R,attributes:q}}function c(){let L=Object.create(null);for(;i(b1);){let R=s(b1),q=u();if(q===null)throw new SyntaxError("Expected attribute value");L[R]=q}return L}function u(){let L;if(i(Ix)&&(L=s(Ix)),e[r]==="{"||e[r]==="}")return h(L?[L]:[],1/0);let R=P();return R?L?h([L,R],R.length):(R.value=_(R.value,XN),h([R],R.length)):L?_(L,C1):null}function h(L=[],R){for(;;){if(i(Ix)){L.push(s(Ix));continue}if(e[r]==="{"){L.push(p());continue}if(e[r]==="}")throw new SyntaxError("Unbalanced closing brace");let N=P();if(N){L.push(N),R=Math.min(R,N.length);continue}break}let q=L.length-1,K=L[q];typeof K=="string"&&(L[q]=_(K,C1));let Y=[];for(let N of L)N instanceof Mx&&(N=N.value.slice(0,N.value.length-R)),N&&Y.push(N);return Y}function p(){o(eB,SyntaxError);let L=g();if(o(S1))return L;if(o(nB)){let R=b();return o(S1,SyntaxError),__dcg_shared_module_exports__['b']({type:"select",selector:L},R)}throw new SyntaxError("Unclosed placeable")}function g(){if(e[r]==="{")return p();if(i(x1)){let[,L,R,q=null]=a(x1);if(L==="$")return{type:"var",name:R};if(o(iB)){let K=y();if(L==="-")return{type:"term",name:R,attr:q,args:K};if(YN.test(R))return{type:"func",name:R,args:K};throw new SyntaxError("Function names must be all upper-case")}return L==="-"?{type:"term",name:R,attr:q,args:[]}:{type:"mesg",name:R,attr:q}}return I()}function y(){let L=[];for(;;){switch(e[r]){case")":return r++,L;case void 0:throw new SyntaxError("Unclosed argument list")}L.push(w()),o(aB)}}function w(){let L=g();return L.type!=="mesg"?L:o(oB)?{type:"narg",name:L.name,value:I()}:L}function b(){let L=[],R=0,q;for(;i(WN);){n("*")&&(q=R);let K=D(),Y=u();if(Y===null)throw new SyntaxError("Expected variant value");L[R++]={key:K,value:Y}}if(R===0)return null;if(q===void 0)throw new SyntaxError("Expected default variant");return{variants:L,star:q}}function D(){o(tB,SyntaxError);let L;return i(EE)?L=E():L={type:"str",value:s(jN)},o(rB,SyntaxError),L}function I(){if(i(EE))return E();if(e[r]==='"')return G();throw new SyntaxError("Invalid expression")}function E(){let[,L,R=""]=a(EE),q=R.length;return{type:"num",value:parseFloat(L),precision:q}}function G(){n('"',SyntaxError);let L="";for(;;){if(L+=s(JN),e[r]==="\\"){L+=T();continue}if(n('"'))return{type:"str",value:L};throw new SyntaxError("Unclosed string literal")}}function T(){if(i(w1))return s(w1);if(i(v1)){let[,L,R]=a(v1),q=parseInt(L||R,16);return q<=55295||57344<=q?String.fromCodePoint(q):"\uFFFD"}throw new SyntaxError("Unknown escape sequence")}function P(){let L=r;switch(o(sB),e[r]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return x(e.slice(L,r))}return e[r-1]===" "?x(e.slice(L,r)):!1}function _(L,R){return L.replace(R,"")}function x(L){let R=L.replace(QN,`
`),q=ZN.exec(L)[1].length;return new Mx(R,q)}}},Mx=class{constructor(e,r){this.value=e,this.length=r}};var cB=["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"],Wo=class{constructor(e){this.value=e}},lp=class{constructor(e,r){this.bundles=e;this.onError=r}static fromSources(e,r,i){let n=[];for(let{lang:o,source:a}of e){let s=o.split("-")[0],l=new Kg(o,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},i),{useIsolating:cB.indexOf(s)>=0}));l.addResource(new sp(a),{allowOverrides:!1}),l.addResource(new sp(`
l10n-internal-date-day-month-year = {DATETIME($d, month: "short", day: "numeric", year: "numeric")}
l10n-internal-date-day-month = {DATETIME($d, month: "short", day: "numeric")}
l10n-internal-time = {DATETIME($d, minute: "numeric", hour: "numeric")}
      `),{allowOverrides:!1}),n.push(l)}return new lp(n,r)}format(e,r){for(let i of this.bundles){if(!i.hasMessage(e))continue;let n=i.getMessage(e);if(!(n!=null&&n.value))return;let o=[],a=i.formatPattern(n.value,this.coerceNumericVariables(r),o);for(let s of o)this.onError(`Error formatting ${e} for locale ${i.locales.join(",")}: ${s}`);return a}this.onError(`Couldn't find message for key ${e} for locales ${this.getLocales().join(",")}`)}formatDate(e,r){return r.showYear?this.format("l10n-internal-date-day-month-year",{d:e}):this.format("l10n-internal-date-day-month",{d:e})}formatTime(e){let r=this.format("l10n-internal-time",{d:e});return this.getLocales()[0]==="en"?r==null?void 0:r.toLowerCase():r}hasTranslation(e,r){for(let i of this.bundles)if(i.locales.indexOf(r)>=0)return i.hasMessage(e);return!1}coerceNumericVariables(e){let r={};for(let i in e){let n=e[i];n instanceof Wo?r[i]=n.value:typeof n=="number"?r[i]=`${n}`:r[i]=n}return r}getLocales(){return this.bundles.reduce((e,r)=>e.concat(r.locales),[])}};var Tx="",DE={},E1={},kE={},dB=["ar","hy-AM","hi","tr","xx-XX"];function Gx(t){Tx=t||""}function IE(t){for(let e in t)delete kE[e],E1[e]=t[e]}function ME(t,e){let r=e!=null?e:Tx;return k1(r).hasTranslation(t,r)}function Aa(t,e){if(e)for(var r in e)e.hasOwnProperty(r)&&(t=t.split("__"+r+"__").join(e[r]));return t}function Ug(t,e,r){return D1(t,e!=null?e:{},r!=null?r:Tx)}function Pl(t){return function(r,i){return D1(r,i!=null?i:{},t())}}function uB(t){let e={};for(let r in t){let i=t[r];i!==void 0&&(e[r]=i)}return e}function D1(t,e,r){let n=k1(r).format(t,uB(e));return n==null?(__dcg_shared_module_exports__['Gc'].warn(`Could not format string ${t}`),""):n}function k1(t){let e=kE[t];if(!e){DE[t]||(DE[t]=Dx([t]));let r=[];for(let n of DE[t]){let o=E1[n];o&&r.push({lang:n,source:o})}let i={};t==="xx-XX"&&(i.transform=n=>n.replace(/[a-z]/gi,"\u2666")),e=kE[t]=lp.fromSources([...r,{lang:"en",source:p1}],n=>{__dcg_shared_module_exports__['Gc'].warn(n)},i)}return e}function TE(){return Tx}function GE(t){return xd.hasOwnProperty(t)||__dcg_shared_module_exports__['p'](dB,t)}function cp(t,e){if(t==null)return"";if(typeof t=="string")return t;if(typeof t=="number")return""+t;let r=t.vars,i;if(r){i={};for(let n in r)r.hasOwnProperty(n)&&(i[n]=cp(r[n],e))}return Ug(t.key,i,e)}var pB=function(){return typeof Desmos!="undefined"&&Desmos.localeData?Desmos.localeData:{}}();function hB(){for(var t=Dx([vu("language"),navigator.userLanguage,navigator.language]),e=0;e<t.length;e++){var r=t[e];if(GE(r))return r}return"en"}function Ax(t){var e=V.Deferred();if(typeof Desmos=="undefined")return e.reject(),e.promise();if(Desmos.supportedLanguages||(Desmos.supportedLanguages=[]),Desmos.supportedLanguages.indexOf(t)>=0||t==="en"||t==="xx-XX")return Gx(t),e.resolve(!0),e.promise();if(!GE(t)){let r=t.indexOf("-")!==-1?t.split("-")[0]:t;for(let i in xd)if(r===i.split("-")[0]&&xd[i].useAsRoot){t=i;break}}return V.get(`/api/v1/calculator/language/${t}.ftl`,ku,function(r){Desmos.localeData||(Desmos.localeData={}),Desmos.supportedLanguages||(Desmos.supportedLanguages=[]),Desmos.localeData[t]=r[t],Desmos.supportedLanguages.push(t),IE(Desmos.localeData),Gx(t),e.resolve(!0)}).fail(function(r){r.status===404&&__dcg_shared_module_exports__['Gc'].warn(t+" is not an available language."),e.reject()}),e.promise()}IE(pB);Gx(hB());var gB=30,fB=10,Vx=__dcg_shared_module_exports__['fc'].RED,Lx=__dcg_shared_module_exports__['fc'].BLUE,Px=__dcg_shared_module_exports__['fc'].GREEN,Ox=__dcg_shared_module_exports__['fc'].PURPLE,_x=__dcg_shared_module_exports__['fc'].ORANGE,Fx=__dcg_shared_module_exports__['fc'].BLACK;function wd(t,e){switch(e){case __dcg_shared_module_exports__['fc'].RED:return t.s("graphing-calculator-text-color-red");case __dcg_shared_module_exports__['fc'].BLUE:return t.s("graphing-calculator-text-color-blue");case __dcg_shared_module_exports__['fc'].GREEN:return t.s("graphing-calculator-text-color-green");case __dcg_shared_module_exports__['fc'].PURPLE:return t.s("graphing-calculator-text-color-purple");case __dcg_shared_module_exports__['fc'].ORANGE:return t.s("graphing-calculator-text-color-orange");case __dcg_shared_module_exports__['fc'].BLACK:return t.s("graphing-calculator-text-color-black");case __dcg_shared_module_exports__['fc'].GRAY:return t.s("graphing-calculator-text-color-gray");default:return t.s("graphing-calculator-text-color-unknown")}}var AE=t=>{if(!Array.isArray(t))return[t];let e=Array(Math.min(t.length,fB));for(let r=0;r<e.length;r++)e[r]=t[Math.round(r*t.length/e.length)];return e},I1=t=>AE(t).every(ES),Rx=t=>AE(t).some(ES),Nx=t=>{let e=AE(t);if(e.length===0)return __dcg_shared_module_exports__['fc'].BLACK;if(e.length===1)return e[0];let r=gB/e.length;return`linear-gradient(to right${e.reduce((i,n,o)=>`${i}, ${n} ${o*r}px, ${n} ${(o+1)*r}px`,"")})`};function Hg(t,e){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t)return!0;return!1}function VE(t){return Hg(t,PE)}function LE(t){return Hg(t,OE)}function T1(t){return Hg(t,_E)}function mB(t){return Hg(t,qg)}function yB(t){return Hg(t,FE)}var PE={OPEN:"OPEN",CROSS:"CROSS",POINT:"POINT"},OE={SOLID:"SOLID",DASHED:"DASHED",DOTTED:"DOTTED"},_E={NONE:"NONE",AUTO:"AUTO",X:"X",Y:"Y",XY:"XY"},qg={POINTS:"POINTS",LINES:"LINES",POINTS_AND_LINES:"POINTS_AND_LINES"},FE={DEFAULT:"default",CENTER:"center",CENTER_AUTO:"center_auto",AUTO_CENTER:"auto_center",ABOVE:"above",ABOVE_LEFT:"above_left",ABOVE_RIGHT:"above_right",ABOVE_AUTO:"above_auto",BELOW:"below",BELOW_LEFT:"below_left",BELOW_RIGHT:"below_right",BELOW_AUTO:"below_auto",LEFT:"left",AUTO_LEFT:"auto_left",RIGHT:"right",AUTO_RIGHT:"auto_right"};function bB(t){return{id:t.id,type:t.type,columns:t.columns.map(xB)}}function xB(t){return{id:t.id,latex:t.latex,color:t.color,hidden:t.hidden,pointStyle:t.pointStyle,pointSize:t.pointSize,pointOpacity:t.pointOpacity,lineStyle:t.lineStyle,lineWidth:t.lineWidth,lineOpacity:t.lineOpacity,points:t.points,lines:t.lines,dragMode:t.dragMode,values:t.values.slice()}}function wB(t){var e=["latex","color","lineStyle","lineWidth","lineOpacity","pointStyle","pointSize","pointOpacity","points","lines","fill","fillOpacity","hidden","secret","dragMode","label","showLabel","labelSize","labelOrientation","interactiveLabel","readonly"],r={id:t.id,type:t.type};return e.forEach(function(i){t.hasOwnProperty(i)&&(r[i]=t[i])}),t.hasOwnProperty("parametricDomain")&&(r.parametricDomain={min:t.parametricDomain.min,max:t.parametricDomain.max}),t.hasOwnProperty("polarDomain")&&(r.polarDomain={min:t.polarDomain.min,max:t.polarDomain.max}),t.hasOwnProperty("domain")&&(r.domain={min:t.domain.min,max:t.domain.max}),t.slider&&(t.slider.hardMin&&(r.sliderBounds=r.sliderBounds||{},r.sliderBounds.min=t.slider.min),t.slider.hardMax&&(r.sliderBounds=r.sliderBounds||{},r.sliderBounds.max=t.slider.max),t.slider.step&&(r.sliderBounds=r.sliderBounds||{},r.sliderBounds.step=t.slider.step),r.playing=!!t.slider.isPlaying),r}function vB(t){return{id:t.id,type:t.type,hidden:t.hidden,secret:t.secret}}function CB(t){return{id:t.id,type:t.type,hidden:t.hidden,secret:t.secret}}function SB(t){return{id:t.id,type:t.type,secret:t.secret}}function Bx(t){switch(t.type){case"expression":return wB(t);case"table":return bB(t);case"folder":return CB(t);case"image":return vB(t);case"text":return SB(t);default:return t}}function dp(t,e){return t.hasOwnProperty("id")?t.id+"":e.generateId()}function EB(t,e){var r={type:"expression",id:dp(t,e)};if(r.type="expression",r.id=dp(t,e),t.hasOwnProperty("latex")&&(r.latex=t.latex+""),t.hasOwnProperty("color")&&(r.color=t.color+""),t.hasOwnProperty("points")&&(r.points=!!t.points),t.hasOwnProperty("lines")&&(r.lines=!!t.lines),t.hasOwnProperty("style")&&(__dcg_shared_module_exports__['Gc'].warn("As of API v1.1 the 'style' property is deprecated and has been split into 'pointStyle' and 'lineStyle'."),VE(t.style)?r.pointStyle=t.style:LE(t.style)?r.lineStyle=t.style:__dcg_shared_module_exports__['Gc'].warn("Invalid style: '"+t.style+"'.")),t.hasOwnProperty("pointStyle")&&(VE(t.pointStyle)?r.pointStyle=t.pointStyle:__dcg_shared_module_exports__['Gc'].warn("Invalid pointStyle: '"+t.pointStyle+"'.")),t.hasOwnProperty("pointSize")&&(r.pointSize=""+t.pointSize),t.hasOwnProperty("pointOpacity")&&(r.pointOpacity=""+t.pointOpacity),t.hasOwnProperty("lineStyle")&&(LE(t.lineStyle)?r.lineStyle=t.lineStyle:__dcg_shared_module_exports__['Gc'].warn("Invalid lineStyle: '"+t.lineStyle+"'.")),t.hasOwnProperty("lineWidth")&&(r.lineWidth=""+t.lineWidth),t.hasOwnProperty("lineOpacity")&&(r.lineOpacity=""+t.lineOpacity),t.hasOwnProperty("hidden")&&(r.hidden=!!t.hidden),t.hasOwnProperty("readonly")&&(r.readonly=!!t.readonly),t.hasOwnProperty("secret")&&(r.secret=!!t.secret),t.hasOwnProperty("sliderBounds")&&t.sliderBounds&&(r.slider={min:__dcg_shared_module_exports__['Xb'](t.sliderBounds.min),max:__dcg_shared_module_exports__['Xb'](t.sliderBounds.max),step:__dcg_shared_module_exports__['Xb'](t.sliderBounds.step)},r.slider.min&&(r.slider.hardMin=!0),r.slider.max&&(r.slider.hardMax=!0)),t.hasOwnProperty("playing")){let{playing:i}=t;typeof i!="boolean"?__dcg_shared_module_exports__['Gc'].warn(`Invalid value for 'playing'. Expected a boolean but got '${i}'.`):(r.slider||(r.slider={}),r.slider.isPlaying=i)}return t.hasOwnProperty("parametricDomain")&&t.parametricDomain?(r.parametricDomain={min:__dcg_shared_module_exports__['Xb'](t.parametricDomain.min),max:__dcg_shared_module_exports__['Xb'](t.parametricDomain.max)},t.hasOwnProperty("domain")&&__dcg_shared_module_exports__['Gc'].warn("Both 'parametricDomain' and the deprecated 'domain' property were specified. Using 'parametricDomain'.")):t.hasOwnProperty("domain")&&(__dcg_shared_module_exports__['Gc'].warn("The 'domain' property is deprecated.Use 'parametricDomain' to specify the domain for parametric functions"),r.parametricDomain={min:__dcg_shared_module_exports__['Xb'](t.domain.min),max:__dcg_shared_module_exports__['Xb'](t.domain.max)}),t.hasOwnProperty("polarDomain")&&t.polarDomain&&(r.polarDomain={min:__dcg_shared_module_exports__['Xb'](t.polarDomain.min),max:__dcg_shared_module_exports__['Xb'](t.polarDomain.max)}),t.hasOwnProperty("dragMode")&&(T1(t.dragMode)?r.dragMode=t.dragMode:__dcg_shared_module_exports__['Gc'].warn("Invalid dragMode: '"+t.dragMode+"'.")),t.hasOwnProperty("label")&&(r.label=t.label+""),t.hasOwnProperty("showLabel")&&(r.showLabel=!!t.showLabel),t.hasOwnProperty("labelSize")&&(typeof t.labelSize=="string"?r.labelSize=t.labelSize:__dcg_shared_module_exports__['Gc'].warn("Invalid labelSize: "+t.labelSize)),t.hasOwnProperty("labelOrientation")&&(yB(t.labelOrientation)?r.labelOrientation=t.labelOrientation:__dcg_shared_module_exports__['Gc'].warn("Invalid labelOrientation: "+t.labelOrientation)),t.hasOwnProperty("fill")&&(r.fill=!!t.fill),t.hasOwnProperty("fillOpacity")&&(r.fillOpacity=""+t.fillOpacity),r}function DB(t,e){var r={id:dp(t,e)};return t.hasOwnProperty("latex")&&(r.latex=t.latex+""),t.hasOwnProperty("color")&&(r.color=t.color+""),t.hasOwnProperty("hidden")&&(r.hidden=!!t.hidden),t.hasOwnProperty("points")&&(r.points=!!t.points),t.hasOwnProperty("lines")&&(r.lines=!!t.lines),t.hasOwnProperty("values")&&t.values&&(r.values=t.values.map(function(i){return i+""})),t.hasOwnProperty("pointStyle")&&(VE(t.pointStyle)?r.pointStyle=t.pointStyle:__dcg_shared_module_exports__['Gc'].warn("Invalid pointStyle: '"+t.pointStyle+"'.")),t.hasOwnProperty("pointSize")&&(r.pointSize=""+t.pointSize),t.hasOwnProperty("pointOpacity")&&(r.pointOpacity=""+t.pointOpacity),t.hasOwnProperty("lineStyle")&&(LE(t.lineStyle)?r.lineStyle=t.lineStyle:__dcg_shared_module_exports__['Gc'].warn("Invalid lineStyle: '"+t.lineStyle+"'.")),t.hasOwnProperty("lineWidth")&&(r.lineWidth=""+t.lineWidth),t.hasOwnProperty("lineOpacity")&&(r.lineOpacity=""+t.lineOpacity),t.hasOwnProperty("columnMode")&&(__dcg_shared_module_exports__['Gc'].warn("As of API v1.1 the 'columnMode' property is deprecated and has been split into individual 'points' and 'lines' properties."),t.columnMode===qg.POINTS_AND_LINES?(r.points=!0,r.lines=!0):t.columnMode===qg.LINES?(r.points=!1,r.lines=!0):(r.points=!0,r.lines=!1),r.lines&&!r.points&&t.hasOwnProperty("dragMode")&&t.dragMode!=="NONE"&&(__dcg_shared_module_exports__['Gc'].warn("A 'lines' value of true and 'points' value of false is only compatible with a dragMode of 'NONE'. Proceeding by setting 'points' to true."),r.points=!0),mB(t.columnMode)&&__dcg_shared_module_exports__['Gc'].warn("Invalid columnMode: '"+t.columnMode+"'.")),t.hasOwnProperty("dragMode")&&(T1(t.dragMode)?r.dragMode=t.dragMode==="AUTO"?"NONE":t.dragMode:__dcg_shared_module_exports__['Gc'].warn("Invalid dragMode: '"+t.dragMode+"'.")),r}function kB(t,e){var r={type:"table",id:dp(t,e)};return t.hasOwnProperty("columns")&&t.columns&&(r.columns=t.columns.map(function(i){return DB(i,e)})),r}function IB(t,e){var r={type:"folder",id:dp(t,e)};return t.hasOwnProperty("hidden")&&(r.hidden=!!t.hidden),r}function MB(t,e){var r={type:"image",id:dp(t,e)};return t.hasOwnProperty("hidden")&&(r.hidden=!!t.hidden),r}function Kx(t,e,r){var i=t.type;if(e&&i&&i!==e){__dcg_shared_module_exports__['Gc'].warn("Cannot change type of expression from '"+e+"' to '"+i+"'.");return}switch(i){case void 0:case"expression":return EB(t,r);case"image":return MB(t,r);case"table":return kB(t,r);case"folder":return IB(t,r);default:if(e){__dcg_shared_module_exports__['Gc'].warn("Cannot modify expressions of type: '"+e+"' through the API.");return}else{__dcg_shared_module_exports__['Gc'].warn("Invalid expression type: '"+i+"'.");return}}}var Ux={};__dcg_shared_module_exports__['h'](Ux,{LARGE:()=>AB,MEDIUM:()=>RE,SMALL:()=>GB,VERY_LARGE:()=>VB,VERY_SMALL:()=>TB});var TB=9,GB=12,RE=16,AB=20,VB=24;var lt=function(t,e,r){var i=document.createElement("img"),n,o;if(i.onerror=e,i.onload=function(){o&&!(r&&r.noRevoke)&&lt.revokeObjectURL(o),e&&e(lt.scale(i,r))},lt.isInstanceOf("Blob",t)||lt.isInstanceOf("File",t))n=o=lt.createObjectURL(t),i._type=t.type;else if(typeof t=="string")n=t,r&&r.crossOrigin&&(i.crossOrigin=r.crossOrigin);else return!1;return n?(i.src=n,i):lt.readFile(t,function(a){var s=a.target;s&&s.result?i.src=s.result:e&&e(a)})},qx=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;lt.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"};lt.transformCoordinates=function(){};lt.getTransformedOptions=function(t){return t};lt.renderImageToCanvas=function(t,e,r,i,n,o,a,s,l,c){return t.getContext("2d").drawImage(e,r,i,n,o,a,s,l,c),t};lt.hasCanvasOption=function(t){return t.canvas||t.crop};lt.scale=function(t,e){e=e||{};var r=document.createElement("canvas"),i=t.getContext||lt.hasCanvasOption(e)&&r.getContext,n=t.naturalWidth||t.width,o=t.naturalHeight||t.height,a=n,s=o,l,c,u,h,p,g,y,w,b,D=function(){var E=Math.max((u||a)/a,(h||s)/s);E>1&&(a=Math.ceil(a*E),s=Math.ceil(s*E))},I=function(){var E=Math.min((l||a)/a,(c||s)/s);E<1&&(a=Math.ceil(a*E),s=Math.ceil(s*E))};return i&&(e=lt.getTransformedOptions(e),y=e.left||0,w=e.top||0,e.sourceWidth?(p=e.sourceWidth,e.right!==void 0&&e.left===void 0&&(y=n-p-e.right)):p=n-y-(e.right||0),e.sourceHeight?(g=e.sourceHeight,e.bottom!==void 0&&e.top===void 0&&(w=o-g-e.bottom)):g=o-w-(e.bottom||0),a=p,s=g),l=e.maxWidth,c=e.maxHeight,u=e.minWidth,h=e.minHeight,i&&l&&c&&e.crop?(a=l,s=c,b=p/g-l/c,b<0?(g=c*p/l,e.top===void 0&&e.bottom===void 0&&(w=(o-g)/2)):b>0&&(p=l*g/c,e.left===void 0&&e.right===void 0&&(y=(n-p)/2))):((e.contain||e.cover)&&(u=l=l||u,h=c=c||h),e.cover?(I(),D()):(D(),I())),i?(r.width=a,r.height=s,lt.transformCoordinates(r,e),lt.renderImageToCanvas(r,t,y,w,p,g,0,0,a,s)):(t.width=a,t.height=s,t)};lt.createObjectURL=function(t){return qx?qx.createObjectURL(t):!1};lt.revokeObjectURL=function(t){return qx?qx.revokeObjectURL(t):!1};lt.readFile=function(t,e,r){if(window.FileReader){var i=new FileReader;if(i.onload=i.onerror=e,r=r||"readAsDataURL",i[r])return i[r](t),i}return!1};(!window.navigator||!window.navigator.platform||!/iP(hone|od|ad)/.test(window.navigator.platform))&&(G1=lt.renderImageToCanvas,lt.detectSubsampling=function(t){var e,r;return t.width*t.height>1024*1024?(e=document.createElement("canvas"),e.width=e.height=1,r=e.getContext("2d"),r.drawImage(t,-t.width+1,0),r.getImageData(0,0,1,1).data[3]===0):!1},lt.detectVerticalSquash=function(t,e){var r=t.naturalHeight||t.height,i=document.createElement("canvas"),n=i.getContext("2d"),o,a,s,l,c;for(e&&(r/=2),i.width=1,i.height=r,n.drawImage(t,0,0),o=n.getImageData(0,0,1,r).data,a=0,s=r,l=r;l>a;)c=o[(l-1)*4+3],c===0?s=l:a=l,l=s+a>>1;return l/r||1},lt.renderImageToCanvas=function(t,e,r,i,n,o,a,s,l,c){if(e._type==="image/jpeg"){var u=t.getContext("2d"),h=document.createElement("canvas"),p=1024,g=h.getContext("2d"),y,w,b,D;if(h.width=p,h.height=p,u.save(),y=lt.detectSubsampling(e),y&&(r/=2,i/=2,n/=2,o/=2),w=lt.detectVerticalSquash(e,y),y||w!==1){for(i*=w,l=Math.ceil(p*l/n),c=Math.ceil(p*c/o/w),s=0,D=0;D<o;){for(a=0,b=0;b<n;)g.clearRect(0,0,p,p),g.drawImage(e,r,i,n,o,-b,-D,n,o),u.drawImage(h,0,0,p,p,a,s,l,c),b+=p,a+=l;D+=p,s+=c}return u.restore(),t}}return G1(t,e,r,i,n,o,a,s,l,c)});var G1,LB=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);lt.blobSlice=LB&&function(){var t=this.slice||this.webkitSlice||this.mozSlice;return t.apply(this,arguments)};lt.metaDataParsers={jpeg:{65505:[]}};lt.parseMetaData=function(t,e,r){r=r||{};var i=this,n=r.maxMetaDataSize||262144,o={},a=!(window.DataView&&t&&t.size>=12&&t.type==="image/jpeg"&&lt.blobSlice);(a||!lt.readFile(lt.blobSlice.call(t,0,n),function(s){var l=s.target.result,c=new DataView(l),u=2,h=c.byteLength-4,p=u,g,y,w,b;if(c.getUint16(0)===65496){for(;u<h&&(g=c.getUint16(u),g>=65504&&g<=65519||g===65534);){if(y=c.getUint16(u+2)+2,u+y>c.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(w=lt.metaDataParsers.jpeg[g],w)for(b=0;b<w.length;b+=1)w[b].call(i,c,u,y,o,r);u+=y,p=u}!r.disableImageHead&&p>6&&(l.slice?o.imageHead=l.slice(0,p):o.imageHead=new Uint8Array(l).subarray(0,p))}else console.log("Invalid JPEG file: Missing JPEG marker.");e(o)},"readAsArrayBuffer"))&&e(o)};var PB=lt.hasCanvasOption;lt.hasCanvasOption=function(t){return PB(t)||t.orientation};lt.transformCoordinates=function(t,e){var r=t.getContext("2d"),i=t.width,n=t.height,o=e.orientation;if(o)switch(o>4&&(t.width=n,t.height=i),o){case 2:r.translate(i,0),r.scale(-1,1);break;case 3:r.translate(i,n),r.rotate(Math.PI);break;case 4:r.translate(0,n),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-n);break;case 7:r.rotate(.5*Math.PI),r.translate(i,-n),r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI),r.translate(-i,0);break}};lt.getTransformedOptions=function(t){if(!t.orientation||t.orientation===1)return t;var e={},r;for(r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);switch(t.orientation){case 2:e.left=t.right,e.right=t.left;break;case 3:e.left=t.right,e.top=t.bottom,e.right=t.left,e.bottom=t.top;break;case 4:e.top=t.bottom,e.bottom=t.top;break;case 5:e.left=t.top,e.top=t.left,e.right=t.bottom,e.bottom=t.right;break;case 6:e.left=t.top,e.top=t.right,e.right=t.bottom,e.bottom=t.left;break;case 7:e.left=t.bottom,e.top=t.right,e.right=t.top,e.bottom=t.left;break;case 8:e.left=t.bottom,e.top=t.left,e.right=t.top,e.bottom=t.right;break}return t.orientation>4&&(e.maxWidth=t.maxHeight,e.maxHeight=t.maxWidth,e.minWidth=t.minHeight,e.minHeight=t.minWidth,e.sourceWidth=t.sourceHeight,e.sourceHeight=t.sourceWidth),e};lt.ExifMap=function(){return this};lt.ExifMap.prototype.map={Orientation:274};lt.ExifMap.prototype.get=function(t){return this[t]||this[this.map[t]]};lt.getExifThumbnail=function(t,e,r){var i,n,o;if(!r||e+r>t.byteLength){console.log("Invalid Exif data: Invalid thumbnail data.");return}for(i=[],n=0;n<r;n+=1)o=t.getUint8(e+n),i.push((o<16?"0":"")+o.toString(16));return"data:image/jpeg,%"+i.join("%")};lt.exifTagTypes={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,r){return t.getUint16(e,r)},size:2},4:{getValue:function(t,e,r){return t.getUint32(e,r)},size:4},5:{getValue:function(t,e,r){return t.getUint32(e,r)/t.getUint32(e+4,r)},size:8},9:{getValue:function(t,e,r){return t.getInt32(e,r)},size:4},10:{getValue:function(t,e,r){return t.getInt32(e,r)/t.getInt32(e+4,r)},size:8}};lt.exifTagTypes[7]=lt.exifTagTypes[1];lt.getExifValue=function(t,e,r,i,n,o){var a=lt.exifTagTypes[i],s,l,c,u,h,p;if(!a){console.log("Invalid Exif data: Invalid tag type.");return}if(s=a.size*n,l=s>4?e+t.getUint32(r+8,o):r+8,l+s>t.byteLength){console.log("Invalid Exif data: Invalid data offset.");return}if(n===1)return a.getValue(t,l,o);for(c=[],u=0;u<n;u+=1)c[u]=a.getValue(t,l+u*a.size,o);if(a.ascii){for(h="",u=0;u<c.length&&(p=c[u],p!=="\0");u+=1)h+=p;return h}return c};lt.parseExifTag=function(t,e,r,i,n){var o=t.getUint16(r,i);n.exif[o]=lt.getExifValue(t,e,r,t.getUint16(r+2,i),t.getUint32(r+4,i),i)};lt.parseExifTags=function(t,e,r,i,n){var o,a,s;if(r+6>t.byteLength){console.log("Invalid Exif data: Invalid directory offset.");return}if(o=t.getUint16(r,i),a=r+2+12*o,a+4>t.byteLength){console.log("Invalid Exif data: Invalid directory size.");return}for(s=0;s<o;s+=1)this.parseExifTag(t,e,r+2+12*s,i,n);return t.getUint32(a,i)};lt.parseExifData=function(t,e,r,i,n){if(!n.disableExif){var o=e+10,a,s,l;if(t.getUint32(e+4)===1165519206){if(o+8>t.byteLength){console.log("Invalid Exif data: Invalid segment size.");return}if(t.getUint16(e+8)!==0){console.log("Invalid Exif data: Missing byte alignment offset.");return}switch(t.getUint16(o)){case 18761:a=!0;break;case 19789:a=!1;break;default:console.log("Invalid Exif data: Invalid byte alignment marker.");return}if(t.getUint16(o+2,a)!==42){console.log("Invalid Exif data: Missing TIFF marker.");return}s=t.getUint32(o+4,a),i.exif=new lt.ExifMap,s=lt.parseExifTags(t,o,o+s,a,i),s&&!n.disableExifThumbnail&&(l={exif:{}},s=lt.parseExifTags(t,o,o+s,a,l),l.exif[513]&&(i.exif.Thumbnail=lt.getExifThumbnail(t,o+l.exif[513],l.exif[514]))),i.exif[34665]&&!n.disableExifSub&&lt.parseExifTags(t,o,o+i.exif[34665],a,i),i.exif[34853]&&!n.disableExifGps&&lt.parseExifTags(t,o,o+i.exif[34853],a,i)}}};lt.metaDataParsers.jpeg[65505].push(lt.parseExifData);lt.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"};lt.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}};lt.ExifMap.prototype.getText=function(t){var e=this.get(t);switch(t){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[t][e];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(e[0],e[1],e[2],e[3]);case"ComponentsConfiguration":return this.stringValues[t][e[0]]+this.stringValues[t][e[1]]+this.stringValues[t][e[2]]+this.stringValues[t][e[3]];case"GPSVersionID":return e[0]+"."+e[1]+"."+e[2]+"."+e[3]}return String(e)};(function(t){var e=t.tags,r=t.map,i;for(i in e)e.hasOwnProperty(i)&&(r[e[i]]=i)})(lt.ExifMap.prototype);lt.ExifMap.prototype.getAll=function(){var t={},e,r;for(e in this)this.hasOwnProperty(e)&&(r=this.tags[e],r&&(t[r]=this.getText(r)));return t};function A1(t,e){for(var r=[.92,.86,.8,.7,.6,.5,.4,.3,.2,.1],i,n=0;n<r.length;n++)if(i=t.toDataURL("image/jpeg",r[n]),i.length<e)return i;return i}function OB(t,e){for(var r=t.toDataURL().length,i=t.width,n=t.height,o=document.createElement("canvas"),a,s=0;s<2;s++){var l=Math.sqrt(e/r);i=Math.round(l*i),n=Math.round(l*n),o.height=n,o.width=i;var c=o.getContext("2d");if(c.drawImage(t,0,0,i,n),a=o.toDataURL(),r=a.length,r<e)return a}return a}function _B(t){for(var e=t.getContext("2d"),r=e.getImageData(0,0,t.width,t.height).data,i=3;i<r.length;i+=4)if(r[i]!==255)return!0;return!1}function Hx(t,e){var r={orientation:!0,canvas:!0,maxWidth:1600,maxHeight:1600};lt(t,function(i){if(!i.toDataURL){e(!0);return}var n=2e5,o;if(t.type==="image/jpeg")o=A1(i,n);else if(o=i.toDataURL(),o.length>n){var a=o.length>.75*i.width*i.height,s=a&&!_B(i);o=s?A1(i,n):OB(i,n)}e(null,o)},r)}var ga=class{constructor(){this.model=new Tn}triggerEvent(e,r){this.model.triggerEvent(e,r)}observeEvent(e,r){this.model.observeEvent(e,r)}unobserveEvent(e){this.model.unobserveEvent(e)}getProperty(e){return this[e]}setProperty(e,r){this[e]=r,this.model.setProperty(e,r)}observe(e,r){this.model.observe(e,r)}observeAndSync(e,r){this.model.observeAndSync(e,r)}unobserve(e){this.model.unobserve(e)}unobserveAll(){this.model.unobserveAll()}};var NE={showGrid:!0,showXAxis:!0,showYAxis:!0,xAxisStep:0,yAxisStep:0,xAxisScale:"linear",yAxisScale:"linear",xAxisMinorSubdivisions:0,yAxisMinorSubdivisions:0,xAxisArrowMode:"NONE",yAxisArrowMode:"NONE",xAxisLabel:"",yAxisLabel:"",xAxisNumbers:!0,yAxisNumbers:!0,polarMode:!1,polarNumbers:!0,degreeMode:!1,randomSeed:"",restrictGridToFirstQuadrant:!1,userLockedViewport:!1},FB={xAxisBase:0,yAxisBase:0,squareAxes:!0,product:"graphing"},vd=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},NE),FB),V1=Object.keys(NE);function L1(t){return t in NE}var up=t=>isFinite(t)&&(t>0||t===0);var os=t=>{if(!t)return 10;let e=t;for(let r=1;e>10;r++)e=__dcg_shared_module_exports__['a'](t,1/r);return e};var as=class extends ga{constructor(){super();this.highlightPropertyMultipliers={};this.stateProperties=[],this.cloneProperties=[],this.highlightPropertyMultipliers={},this.config=new ga;for(var r in vd)vd.hasOwnProperty(r)&&this.addStateProperty(r,vd[r]);this.labelHangingColor="rgba(150,150,150,1)",this.lastChangedAxis="x",this.addDynamicProperties()}addDynamicProperties(){var r=this;function i(o,a,s){r.cloneProperties.push(o);function l(){r.setProperty(o,r.config.projectorMode?s:a)}r.config.observe("projectorMode",l),l()}function n(o,a,s,l,c){r.cloneProperties.push(o);function u(){var p;r.config.projectorMode?p=r.highlight?c:l:p=r.highlight?s:a,r.setProperty(o,p)}var h=[a,s,l,c];r.highlightPropertyMultipliers[o]=h.map(function(p){return p/h[0]}),r.observe("highlight",u),r.config.observe("projectorMode",u),u()}i("labelSize",14,19),i("majorAxisOpacity",.4,1),i("minorAxisOpacity",.12,.25),i("axisOpacity",.9,.9),i("axisLineWidth",1.5,2),i("axisLineOffset",.25,0),i("pixelsPerLabel",80,120),n("curveOpacity",.7,1,.7,1),i("globalCurveColor",void 0,void 0),i("disableFill",!1,!1),n("graphLineWidth",2.5,3.5,5,7),n("pointLineWidth",9,11,15,17)}setController(r){this.controller=r}getHighlightPropertyMultiplier(r,i){var n=i?1:0;return this.config.projectorMode?this.highlightPropertyMultipliers[r][2+n]:this.highlightPropertyMultipliers[r][n]}getFillOpacityMultiplier(){return this.highlight&&this.controller&&this.controller.isGeometry()?2:1}addStateProperty(r,i){this[r]=i,this.stateProperties.push(r),this.cloneProperties.push(r)}static fromObject(r){var i=new as;return i.cloneProperties.forEach(function(n){r.hasOwnProperty(n)&&i.setProperty(n,r[n])}),i}registerCallbacks(r){var i=this,n=function(){r.redrawAllLayers()};this.stateProperties.forEach(function(o){i.observe(o,n)}),this.config.observe("backgroundColor",n),this.config.observe("textColor",n),this.config.observe("invertedColors",n),this.observe("backgroundColor",function(){r.redrawAllLayers()}),this.observe("textColor",function(){r.redrawAllLayers()}),this.config.observe("enableTabindex",function(){r.redrawAllLayers()}),this.config.observeAndSync("projectorMode",function(){r.redrawAllLayers()})}_validateSetting(r,i){var n;switch(r){case"xAxisMinorSubdivisions":case"yAxisMinorSubdivisions":n=Math.round(Math.min(Math.max(0,i),5)),i!==n&&__dcg_shared_module_exports__['Gc'].warn("minorSubdivisions must be an integer between 0 and 5. You provided "+i+", which we changed to "+n+".");break;case"degreeMode":case"projectorMode":case"showGrid":case"showXAxis":case"showYAxis":case"xAxisNumbers":case"yAxisNumbers":case"polarNumbers":case"enableTabindex":case"invertedColors":n=i==="false"?!1:!!i,i!==n&&__dcg_shared_module_exports__['Gc'].warn(r+" must be a Boolean. You provided "+i+" ("+typeof i+"), which we changed to "+n+" ("+typeof n+").");break;case"xAxisStep":case"yAxisStep":n=parseFloat(i),isFinite(i)||(n=0,__dcg_shared_module_exports__['Gc'].warn(r+" must be a number. You provided "+i+", which we changed to "+n+"."));break;case"xAxisScale":case"yAxisScale":n=i,!this.config.logScales&&i==="logarithmic"?(n="linear",__dcg_shared_module_exports__['Gc'].warn("Must set logScales: true to set "+r+" to 'logarithmic'.")):i!=="linear"&&i!=="logarithmic"&&(n="linear",__dcg_shared_module_exports__['Gc'].warn(r+' must be "linear" or "logarithmic". You provided '+i+", which we changed to "+n+"."));break;case"xAxisArrowMode":case"yAxisArrowMode":n=__dcg_shared_module_exports__['rc'][i],n!==i&&(n="NONE",__dcg_shared_module_exports__['Gc'].warn(`unknown AxisArrowMode. Allowed values are: 
`+__dcg_shared_module_exports__['B'](__dcg_shared_module_exports__['rc']).join(`
`)));break;case"xAxisLabel":case"yAxisLabel":n=i,typeof i!="string"&&(n="",__dcg_shared_module_exports__['Gc'].warn(r+" must be a string. you provided a "+typeof i+"."));break;case"randomSeed":n=i,typeof i!="string"&&(n=""+i,__dcg_shared_module_exports__['Gc'].warn("randomSeed must be a string. you provided a "+typeof i+"."));break;case"backgroundColor":n=i,typeof i!="string"&&(n="",__dcg_shared_module_exports__['Gc'].warn(r+" must be a string. you provided a "+typeof i+".")),n||(n="#fff"),n[0]!=="#"&&(n="#"+n);break;case"textColor":n=i,typeof i!="string"&&(n="",__dcg_shared_module_exports__['Gc'].warn(r+" must be a string. you provided a "+typeof i+".")),n||(n="#000"),n[0]!=="#"&&(n="#"+n);break;case"fontSize":n=i,typeof i!="number"&&(n=parseInt(n,10),__dcg_shared_module_exports__['Gc'].warn("fontSize must be a number. Attempted to convert "+i+" to "+n+"."));break;case"language":n=i,typeof i!="string"&&(n="",__dcg_shared_module_exports__['Gc'].warn(r+" must be a string. you provided a "+typeof i+".")),window.Desmos&&window.Desmos.supportedLanguages.indexOf(i)<0&&i!=="en"&&(n="en",__dcg_shared_module_exports__['Gc'].warn(i+" is not currently an available language."));break;default:n=i;break}return n}_validateSettings(r){var i={},n=!1;for(var o in r)this.stateProperties.indexOf(o)>=0?i[o]=this._validateSetting(o,r[o]):(__dcg_shared_module_exports__['Gc'].warn('Invalid graph setting "'+o+'".'),n=!0);return n&&__dcg_shared_module_exports__['Gc'].warn(`Available graph settings are: 
`+this.stateProperties.join(`
`)),i}getBackgroundColor(){var r=__dcg_shared_module_exports__['bc'](this.config.backgroundColor||"#fff");return this.config.invertedColors&&r!=="#ffffff"?__dcg_shared_module_exports__['ec'](r):r}getTextColor(){var r=__dcg_shared_module_exports__['bc'](this.config.textColor||"#000");return this.config.invertedColors&&r!=="#000000"?__dcg_shared_module_exports__['ec'](r):r}setGraphSettings(r){var i=this._validateSettings(r);for(var n in i)i.hasOwnProperty(n)&&(n==="projectorMode"||n==="invertedColors"||n==="fontSize"||n==="language"||n==="backgroundColor"||n==="textColor"?this.config.setProperty(n,i[n]):this.setProperty(n,i[n]))}};at();var RB=function(){{var t=function(e,r,i){var n,o=r.height(),a=e.outerHeight(),s=e.offset(),l=r.offset();if(!s||!l)return!1;var c=r[0].scrollTop,u=s.top+c-l.top,h=u-i,p=a+u+i-o;return h>=p?n=Math.min(Math.max(c,p),h):n=.5*(h+p),n!==c?(r[0].scrollTop=n,r[0].scrollTop!=c):!1};return{scrollVisible:t}}}();var{scrollVisible:ss}=RB;xc();var $x=class{constructor(e){this.settings=e}ensureTripBlock(){if(this.$tripBlock)return;let e=['<div class="trip-block">','<div class="trip-interior">','<a class="trip-close">&times;</a>','<div class="trip-content"></div>',"</div>",'<div class="trip-arrow"></div>',"</div>"].join("");var r=this.$tripBlock=V(e);r.css({top:"-100px"}),V("body").append(r),r.find(".trip-close").on("dcg-tap",i=>{i.preventDefault(),this.stop()}),this.bindKeyEvents()}cleanup(){return this.unbindKeyEvents(),this.hideTripBlock(),!1}bindKeyEvents(){V(document).on({"keydown.Trip":e=>{this.keyEvent(e)}})}unbindKeyEvents(){V(document).off("keydown.Trip")}keyEvent(e){e.which===27&&this.stop()}stop(){this.hideTripBlock(),this.settings.onTripStop()}exitTourBecauseOfError(e,r){var i="",n=r;do i=n.selector+i;while(n=n.prevObject);this.stop(),ao("TourError: could not find $sel.offset()",{metaData:{message:e,selector:i}})}showTripBlock(e,r){if(this.ensureTripBlock(),e.type==="do-not-update")return;let i=(typeof e.sel=="string"?V(e.sel):e.sel).filter(":visible");e.scrollContainer&&ss(i,e.scrollContainer,0);var n=this.$tripBlock;e.type==="final"?n.find(".trip-content").html(r||""):n.find(".trip-content").html(e.content),n.toggleClass("trip-hidden",!!e.hidden);let o=i.outerWidth()||0,a=i.outerHeight()||0,s=n.outerWidth()||0,l=n.outerHeight()||0,c=10,u=10,h=V(window).width()||0,p=i.offset();if(p)this.__cachedMissingSelTime=void 0;else{this.__cachedMissingSelTime?Date.now()-this.__cachedMissingSelTime>1e3&&(e.type==="final"?this.stop():this.exitTourBecauseOfError(e.content,i)):this.__cachedMissingSelTime=Date.now();return}n.removeClass("trip-e trip-s trip-w trip-n");var g=0;switch(e.position){case"e":n.addClass("trip-e"),n.css({left:p.left+o+u,top:p.top-(l-a)/2});break;case"s":n.addClass("trip-s");var y=p.left+(o-s)/2;n.css({left:y,top:p.top+a+c}),y+s>h-1&&(g=h-1-y-s),y<1&&(g=1-y);break;case"w":n.addClass("trip-w"),n.css({left:p.left-(u+s),top:p.top-(l-a)/2});break;default:n.addClass("trip-n"),n.css({left:p.left+(o-s)/2,top:p.top-c-l});break}n.find(".trip-interior").css("transform","translate("+g+"px, 0)"),n.css({display:"inline-block"}),n.find(".trip-math:not(.dcg-mq-math-mode)").each(function(){Uo.StaticMath(this)})}fadeInTripBlock(){this.ensureTripBlock();var e=this.$tripBlock;setTimeout(function(){e.addClass("trip-is-loaded")},0)}hideTripBlock(){this.$tripBlock&&this.$tripBlock.removeClass("trip-is-loaded")}};var zx=class{constructor(){this.tripManager=new $x({onTripStop:this.stopTour.bind(this)}),this.currentStep=void 0,this.currentTour=void 0}_tripLoop(){clearTimeout(this.__tripLoopTimeout),this.running&&(this._advanceTrip(),this.__tripLoopTimeout=setTimeout(this._tripLoop.bind(this),200))}getContent(e){return e.type==="do-not-update"?"":e.type==="final"?e.endingMsg:e.content}_advanceTrip(){var e=this.currentTour.update(),r=new Date().getTime();if(e&&this.currentStep&&this.currentStep.type!=="do-not-update"&&e.type!=="do-not-update"&&this.getContent(e)!==this.getContent(this.currentStep)){if(this.currentStep.delayBeforeExit){if(this.throttleTimer&&r-this.throttleTimer<this.currentStep.delayBeforeExit)return;if(!this.throttleTimer){this.throttleTimer=r;return}}e.delayBeforeEnter&&(this.currentStep=e,this.throttleTimer=r)}if(!(e&&this.currentStep&&this.getContent(this.currentStep)===this.getContent(e)&&this.throttleTimer&&this.throttleTimer<this.currentStep.delayBeforeEnter)&&(this.throttleTimer=null,e&&e.type!=="do-not-update")){if(this.currentStep=e,e.type==="final"){this.finishTour(e,5);return}this.tripManager.showTripBlock(e)}}startTour(e){this.running||(this.currentTour=e,this.running=!0,this._tripLoop(),this.tripManager.fadeInTripBlock())}closingMsg(e,r){return"<b>"+e+"</b><br>This message will self-destruct in "+r+"..."}finishTour(e,r){if(clearTimeout(this.__tripLoopTimeout),this.running=!1,r<0){this.tripManager.stop();return}e.type==="final"?this.tripManager.showTripBlock(e,this.closingMsg(e.endingMsg,r)):this.tripManager.showTripBlock(e),setTimeout(()=>this.finishTour(e,r-1),1e3)}stopTour(){this.running=!1,this.currentStep=void 0,this.currentTour=void 0}};at();function BE(t){var e=t&&t.id;if(t&&t.type==="table"){var r=so(t);if(r){var i=t.columnModels[r.column];e=i?i.id:void 0}else e=void 0}return e}function P1(t,e,r){var i=t.getAllSelectedItems(),n={};for(var o of i){var a=BE(o);a!==void 0&&(n[a]=!0,r[a]||e.selectSketch(a))}for(let s in r)n[s]||e.deselectSketch(s);return n}var Wn=class{constructor(e,r,i){this.pattern=i,this.replen=this.pattern[0]+this.pattern[1],r/this.replen>1e3&&(this.pattern[0]=r*this.pattern[0]/this.replen/1e3,this.pattern[1]=r*this.pattern[1]/this.replen/1e3),this.pstate=0,this.dstaccum=0,this.px=null,this.py=null,this.ctx=e}static getDashedPattern(e,r){let i=e.lineWidth*11/(r?3.5:2.5),n=i*7/11;return[i,n]}static getDottedPattern(e,r,i){let n=.5*e.lineWidth*.1/(i?3.5:2.5),o=n*8/.1;return r&&(o*=2),[n,o]}static getTotalSegmentLength(e){if(e.length<4)return 0;let r=0,i=0,n=e[0],o=e[1];for(;isNaN(n)||isNaN(o);){if(i+=2,i>=e.length)return 0;n=e[i],o=e[i+1]}let a,s;for(i+=2;i<e.length;i+=2)a=e[i],s=e[i+1],!(isNaN(a)||isNaN(s))&&(r+=__dcg_shared_module_exports__['Aa'](a-n,s-o),n=a,o=s);return r}start(e,r){this.px=e,this.py=r}next(e,r){if(this.px===null||this.py===null)throw new Error("Must call start before calling next");let i=this.pattern[this.pstate],n=Math.sqrt(Math.pow(e-this.px,2)+Math.pow(r-this.py,2));if(n>1e-5){for(;n+this.dstaccum>=i;){let o=e-this.px,a=r-this.py,s=i-this.dstaccum;o*=s/n,a*=s/n,this.pstate===0&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(this.px+o,this.py+a)),this.dstaccum=0,this.px+=o,this.py+=a,this.pstate=this.pstate===0?1:0,i=this.pattern[this.pstate],n-=s}this.pstate===0&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(e,r))}this.px=e,this.py=r,this.dstaccum+=n}close(){this.pstate=0,this.dstaccum=0,this.px=null,this.py=null}drawSegment(e){let r=0,i=e[0],n=e[1];for(;isNaN(i)||isNaN(n);){if(r+=2,r>=e.length)return;i=e[r],n=e[r+1]}this.start(i,n);let o,a;for(r+=2;r<e.length;r+=2)o=e[r],a=e[r+1],!(isNaN(o)||isNaN(a))&&this.next(o,a);this.close()}};function UE(t,e){return t+1e-8*(e-t)>t&&e-t>1e-300&&e-t<1e300}function _1(t,e){return t>1e-300&&UE(t,e)}var Si=class{constructor(e=-10,r=10,i=-10,n=10){this.xmin=e,this.xmax=r,this.ymin=i,this.ymax=n}static fromObject({xmin:e,xmax:r,ymin:i,ymax:n}){return new Si(e,r,i,n)}toObject(){return{xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax}}equals(e){return!(this.xmin!==e.xmin||this.ymin!==e.ymin||this.xmax!==e.xmax||this.ymax!==e.ymax)}isXValid(e){return e==="linear"?UE(this.xmin,this.xmax):_1(this.xmin,this.xmax)}isYValid(e){return e==="linear"?UE(this.ymin,this.ymax):_1(this.ymin,this.ymax)}isValid(e){return this.isXValid(e.xAxisScale)&&this.isYValid(e.yAxisScale)}isSquare(e,r){return Math.abs(e.height-e.width*this.aspectRatio(r))<1}aspectRatio(e){let r=e.yAxisScale==="linear"?this.ymax-this.ymin:Math.log(this.ymax/this.ymin),i=e.xAxisScale==="linear"?this.xmax-this.xmin:Math.log(this.xmax/this.xmin);return r/i}getSquaredAxisLimits({axis:e,screen:r,settings:i}){let[n,o,a,s]=e==="y"?[{min:this.ymin,max:this.ymax},{min:this.xmin,max:this.xmax},r.height/r.width,i.yAxisScale]:[{min:this.xmin,max:this.xmax},{min:this.ymin,max:this.ymax},r.width/r.height,i.xAxisScale];if(s==="logarithmic"){let p=n.max/n.min,g=o.max/o.min,y=__dcg_shared_module_exports__['a'](g,a),w=Math.sqrt(y/p);return{min:n.min/w,max:n.max*w}}let l=n.max-n.min,h=.5*((o.max-o.min)*a-l);return{min:n.min-h,max:n.max+h}}squareXAxis(e,r){let{min:i,max:n}=this.getSquaredAxisLimits({axis:"x",screen:e,settings:r});return new Si(i,n,this.ymin,this.ymax)}squareYAxis(e,r){let{min:i,max:n}=this.getSquaredAxisLimits({axis:"y",screen:e,settings:r});return new Si(this.xmin,this.xmax,i,n)}squareCrop(e,r){return this.aspectRatio({xAxisScale:r.xAxisScale,yAxisScale:r.yAxisScale})>e.height/e.width?this.squareYAxis(e,r):this.squareXAxis(e,r)}polarDiameter(){let e=Math.abs(this.xmax),r=Math.abs(this.xmin),i=Math.abs(this.ymax),n=Math.abs(this.ymin);return 1.5*Math.max(e,r,i,n)}largestR(){return Math.sqrt(Math.pow(Math.max(-this.xmin,this.xmax),2)+Math.pow(Math.max(-this.ymin,this.ymax),2))}smallestR(){return this.xmin<=0&&this.xmax>=0&&this.ymin<=0&&this.ymax>=0?0:this.xmin<=0&&this.xmax>=0?Math.min(Math.abs(this.ymin),Math.abs(this.ymax)):this.ymin<=0&&this.ymax>=0?Math.min(Math.abs(this.xmin),Math.abs(this.xmax)):Math.sqrt(Math.pow(Math.max(this.xmin,-this.xmax),2)+Math.pow(Math.max(this.ymin,-this.ymax),2))}};var Ol;function F1(t,e){if(Ol&&Ol.color===e&&Ol.img===t)return Ol.canvas;Ol?(Ol.color=e,Ol.img=t):Ol={color:e,img:t,canvas:document.createElement("canvas")};var r=Ol.canvas;r.width=0,r.width=t.width,r.height=t.height;var i=r.getContext("2d");return i.drawImage(t,0,0),i.fillStyle=e,i.globalCompositeOperation="source-atop",i.fillRect(0,0,t.width,t.height),r}function Wx(t,e,r){let i=t.formula;if(!i||!i.dimensions.x)return;let n=i.dimensions;for(var o=0;o<n.x.length;o++){var a=n.x[o],s=n.y[o],l=n.width[o],c=n.height[o],u=n.radianAngle[o];if(!(!isFinite(a)||!isFinite(s)||!isFinite(l)||!isFinite(c)||!isFinite(u))){ei(e,"dcg-svg-image"),e.save(),Br(e),e.globalAlpha=n.opacity[o];var h=r.mapy(c)-r.mapy(0),p=r.mapx(l)-r.mapx(0),g=u===0?1:Math.abs(p/l*(c/h)),y=r.mapx(a),w=r.mapy(s),b=y-p/2,D=w+h*g/2,I=c<0?-1:1,E=l<0?-1:1,G=b*E,T=D*I,P=Math.abs(p),_=Math.abs(h);u!==0&&(e.translate(y,w),e.scale(1,1/g),e.rotate(u),e.translate(-y,-w)),e.scale(E,I);var x=!1,L=!1,R=t.controller.getGrapher();R&&R.type==="2d"&&(x=R.clickableObjectsLayer.shouldDrawHovered(t.id,o),L=R.clickableObjectsLayer.shouldDrawPressed(t.id,o));var q=t.imageObj,K=q;L?t.depressedImageObj?K=t.depressedImageObj:K=F1(q,"rgba(50,50,50,0.2)"):x&&(t.hoveredImageObj?K=t.hoveredImageObj:K=F1(q,"rgba(200,200,200,0.2)")),e.drawImage(K,G,T,P,_*g),Xs(t)&&t.controller.isTraceEnabled()&&(e.beginPath(),e.rect(G,T,P,_*g),e.restore(),e.save(),e.strokeStyle="#6993C7",e.lineWidth=2,e.stroke()),e.restore()}}}function jn(t,e){let r=t;r._dcgStartNamedGroup&&r._dcgStartNamedGroup(e)}function zg(t,e){let r=t;r._dcgSetTitle&&r._dcgSetTitle(e)}function Yn(t){let e=t;e._dcgEndNamedGroup&&e._dcgEndNamedGroup()}var Jx={};function B1(t={}){return Object.keys(t).length}function Yx(t,e={}){return B1(e)===0?t:t.filter((r,i)=>!e[i])}function R1(t,e){let r=[];for(let i=0;i<t;i++)r.push(e);return r}function UB(){return!!Object.keys(Jx).length}var HE=function(t,e){let r=3;return e&&(r+=e),new Si(-r,t.width+r,-r,t.height+r)},Ei=class{constructor(e,r,i){if(this.controller=e,this.getExpressionAriaLabel=i,r.config.plaidMode){let n=["RED","BLUE","GREEN","PURPLE","ORANGE","BLACK"];for(let o of n)Jx[__dcg_shared_module_exports__['fc'][o]]=document.createElement("img"),Jx[__dcg_shared_module_exports__['fc'][o]].setAttribute("src","/assets/img/april-fools/"+o.toLowerCase()+".png")}}redrawToCtx(e,r,i,n,o,a,s,l){jn(e,"expressions");let c=r.settings.highlight,u=this.controller.isGeometry();o.forEach(h=>{let p=i[h],g=n[h];p!==void 0&&(u&&r.settings.setProperty("highlight",p.showHighlight),jn(e,"sketch"),r.settings.takingScreenshot&&zg(e,this.getExpressionAriaLabel(h)),Ei.drawSketchToCtx({sketch:i[h],ctx:e,projection:r,poiLabelsLayer:a,clickableObjectsLayer:s,geometryContext:this.controller.getGeoModel(),showMovablePoints:l==null?void 0:l.showMovablePoints}),Yn(e)),g&&g.shouldGraph&&g.foreground&&Wx(g,e,r)}),Yn(e),r.settings.setProperty("highlight",c)}static eachSegment(e,r){for(let i of e.branches)if(i.graphMode!==15)for(let n of i.segments)r(i,n)}static drawSketchToCtx({sketch:e,ctx:r,projection:i,poiLabelsLayer:n,clickableObjectsLayer:o,geometryContext:a,showMovablePoints:s}){var y,w;if(!e.branches||!e.branches.length)return;let l=r.lineWidth,c=r.globalAlpha,u=i.settings.globalCurveColor?i.settings.globalCurveColor:e.color,h=Jx[u];if(h&&h.complete&&h.naturalWidth>0){let b=r.createPattern(h,"repeat");r.fillStyle=b}else r.fillStyle=u;r.strokeStyle=u,r.lineJoin="round",r.lineCap="round";let p=!!i.settings.takingScreenshot,g=!!s;for(let b of e.branches){if(b.graphMode===3||b.graphMode===4||b.graphMode===15||b.graphMode===22)continue;let D=1;o.shouldDrawHovered(e.id,b.listIndex)&&(D=1.2),o.shouldDrawPressed(e.id,b.listIndex)&&(D=1.4),D*=(y=a==null?void 0:a.getToolFadeOpacity(e.id))!=null?y:1,D*=i.settings.getFillOpacityMultiplier(),b.color&&!i.settings.globalCurveColor&&!UB()&&(r.fillStyle=b.color),b.graphMode!==6&&(r.desmos_batching=!0,r.beginPath());for(let I of b.segments){let E=(w=b.graphMode)!=null?w:2;if(E===7&&!i.settings.disableFill)Ei.fillPolygonToCtx(r,i,I,b.fillOpacity===void 0?NaN:b.fillOpacity*D);else if(E!==8){let G=b.operator,T=!i.settings.disableFill&&(G=="<"||G==">"||G=="<="||G==">="),P=G=="<="||G=="<";T&&Ei.fillGraphStrokeToCtx(r,i,I,P,E)}}r.globalAlpha=Ei._clampedOpacity(b.fillOpacity===void 0?NaN:b.fillOpacity*D,.4),b.graphMode!==6&&(r.fill(),r.desmos_batching=!1),r.globalAlpha=1}Ei.eachSegment(e,function(b,D){var Y,N,j;if(b.graphMode===3||b.graphMode===4||b.graphMode===15||b.graphMode===22)return;let I=2;b.graphMode&&(I=b.graphMode);let E=D,G=b.lineWidth!==void 0,T=b.lineWidth,P=2.5,_=(Y=b.arrowMode)!=null?Y:"DEFAULT";if(r.strokeStyle=b.color,r.fillStyle=b.color,G&&(T<=0||!isFinite(T)))return;r.lineWidth=G?T:P;let x=i.settings.graphLineWidth/P;e.tokenSelected?x*=2:e.tokenHovered&&(x*=1.5),r.lineWidth*=x,r.globalAlpha*=i.settings.curveOpacity,r.globalAlpha=Ei._clampedOpacity(i.settings.curveOpacity===1?1:b.lineOpacity,.9);let L=b.operator,R="default";L==="<"||L===">"||L==="!="?R="DASHED":L==="<="||L===">="?R="SOLID":e.style==="DASHED"||b.style==="DASHED"?R="DASHED":(e.style==="DOTTED"||b.style==="DOTTED")&&(R="DOTTED",G&&(r.lineWidth*=2)),r.globalAlpha*=(N=a==null?void 0:a.getToolFadeOpacity(e.id))!=null?N:1;let q=!b.isIntersectionExtension&&o.shouldDrawHovered(e.id,b.listIndex),K=!b.isIntersectionExtension&&o.shouldDrawPressed(e.id,b.listIndex);(K||q)&&(r.save(),r.lineWidth+=4.5,K?r.globalAlpha*=.5:r.globalAlpha*=.3,Ei.drawGraphStrokeToCtx(r,i,E,{type:R,graphMode:I,op:L,arrowMode:_,opacityMultiplier:K?.5:.3}),r.restore()),Ei.drawGraphStrokeToCtx(r,i,E,{type:R,graphMode:I,op:L,arrowMode:_,opacityMultiplier:(j=a==null?void 0:a.getToolFadeOpacity(e.id))!=null?j:1})}.bind(this)),r.lineWidth=l,r.globalAlpha=c,Ei.eachSegment(e,function(b,D){var I;if(b.graphMode===3&&b.showPoint||b.graphMode===4&&p){let E=D,G=[],T;if(b.interactiveLabel&&e.labels)for(let N=0,j=e.labels.length;N<j;N++){let B=e.labels[N];if(B.type==="poi"){let A=n.isOpenPOI(B.poi),$=n.getHoveredPOI()===B.poi;G.push(A||$),!A&&$&&(T=N)}}let P=b.graphMode===4&&p&&!g&&b.pointOpacity===1,_=1;typeof b.pointSize=="number"?_=b.pointSize/9:Array.isArray(b.pointSize)&&(_=b.pointSize.map(function(N){return N/9}));let x;Array.isArray(b.color)&&(x=b.color);let L=o.getHoveredObjectById(e.id),R=o.shouldDrawHovered(e.id,void 0),q=o.getPressedObject(),K=o.shouldDrawPressed(e.id,q==null?void 0:q.listIndex),Y=b.droppedIndices;if(R||K){let N=E.length;Y&&(N+=B1(Y));let j=R1(N,0),B=Array.isArray(_)?_.slice():R1(N,_);K&&q?q.listIndex===void 0?(j=j.map(()=>.5),B=B.map(A=>A*1.5)):(j[q.listIndex]=.5,B[q.listIndex]*=1.5):R&&L&&(j=j.map((A,$)=>L.listIndexes===void 0||L.listIndexes[$]?.3:A),B=B.map((A,$)=>L.listIndexes===void 0||L.listIndexes[$]?A*1.5:A)),Ei.drawPointsToCtx({ctx:r,projection:i,segment:E,style:b.style,sizeOverrideIdxs:G,opacityOverrideIdx:T,sizeFactor:B,opacityFactor:j,colorOverrides:x,baseOpacity:b.pointOpacity,droppedIndices:Y,sketch:e}),r.restore()}Ei.drawPointsToCtx({ctx:r,projection:i,segment:E,style:b.style,sizeOverrideIdxs:G,opacityOverrideIdx:T,sizeFactor:_,opacityFactor:(I=a==null?void 0:a.getToolFadeOpacity(e.id))!=null?I:1,colorOverrides:x,baseOpacity:P?.9:b.pointOpacity,droppedIndices:Y,sketch:e})}}.bind(this))}static drawGraphStrokeToCtx(e,r,i,n){let{type:o,graphMode:a,op:s,arrowMode:l}=n;if(a===20||a===21){let[g,y,w]=i,b=r.mathToPixels.mapX(g),D=r.mathToPixels.mapY(y),I=r.mathToPixels.dangerouslyGetXScaleFactor(),E=r.mathToPixels.dangerouslyGetYScaleFactor(),G=Math.abs(w*I),T=Math.abs(w*E),P,_;if(a===21?(P=-i[3],_=-i[4]):(P=0,_=2*Math.PI),e.save(),ei(e,"dcg-svg-curve"),e.desmos_batching||e.beginPath(),o==="DASHED"){let x=Wn.getDashedPattern(e,!!r.settings.highlight);e.setLineDash(x)}else if(o==="DOTTED"){let x=Wn.getDottedPattern(e,!!r.settings.config.projectorMode,!!r.settings.highlight);e.setLineDash(x)}e.ellipse(b,D,G,T,0,P,_,P>_),e.desmos_batching||e.stroke(),Br(e),e.restore();return}else if(a===23){let[g,y,w,b,D]=i,I=fp(b,r),E=r.mathToPixels.mapX(g),G=r.mathToPixels.mapY(y),T=r.mathToPixels.dangerouslyGetXScaleFactor(),P=r.mathToPixels.dangerouslyGetYScaleFactor(),_=T>P?T/P:1,x=T>P?1:P/T,L=Math.abs(_*I),R=Math.abs(x*I);if(e.save(),ei(e,"dcg-svg-curve"),e.globalAlpha=.4*n.opacityMultiplier,e.desmos_batching||e.beginPath(),e.moveTo(E,G),e.lineTo(E+L*Math.cos(-w),G+R*Math.sin(-w)),e.ellipse(E,G,L,R,0,-w,-w-b,b>0),e.lineTo(E,G),!e.desmos_batching&&!D&&e.fill(),e.globalAlpha=n.opacityMultiplier,e.desmos_batching||e.beginPath(),e.ellipse(E,G,L,R,0,-w,-w-b,b>0),D){let q=-w-b,K=E+L*Math.cos(q),Y=G+R*Math.sin(q);zE(e,K,Y,-w,-b,10,L)}e.globalAlpha=n.opacityMultiplier,e.desmos_batching||e.stroke(),e.lineWidth=1.5,e.globalAlpha=.2*n.opacityMultiplier,e.moveTo(E+1.5*L*Math.cos(-w),G+1.5*R*Math.sin(-w)),e.lineTo(E,G),e.lineTo(E+1.5*L*Math.cos(-w-b),G+1.5*R*Math.sin(-w-b)),e.stroke(),Br(e),e.restore()}else if(a===17||a===18||a===19){let{clipped:g,mapped:y}=Rg(i,r,a),[w,b,D,I]=g,[E,G,T,P]=y;e.save(),ei(e,"dcg-svg-curve");let _;if(e.desmos_batching||e.beginPath(),o=="DASHED"?(_=new Wn(e,Wn.getTotalSegmentLength(g),Wn.getDashedPattern(e,!!r.settings.highlight)),_.drawSegment(g)):o=="DOTTED"?(_=new Wn(e,Wn.getTotalSegmentLength(g),Wn.getDottedPattern(e,!!r.settings.config.projectorMode,!!r.settings.highlight)),_.drawSegment(g)):(e.moveTo(w,b),e.lineTo(D,I)),a===17){let x=$B(o)*e.lineWidth,{startArrow:L,endArrow:R}=HB(qB(a,l));L&&rl(e,T,P,E,G,x),R&&rl(e,E,G,T,P,x)}e.desmos_batching||e.stroke(),Br(e),e.restore();return}let c=Ng(a,s!=="=",r.settings),u=ip(i,r.mathToPixels,c),h=yd(u,HE(r.screen,e.lineWidth));if(h.length===0)return;e.save(),ei(e,"dcg-svg-curve");let p;if(e.desmos_batching||e.beginPath(),o=="DASHED")p=new Wn(e,Wn.getTotalSegmentLength(h),Wn.getDashedPattern(e,!!r.settings.highlight)),p.drawSegment(h);else if(o=="DOTTED")p=new Wn(e,Wn.getTotalSegmentLength(h),Wn.getDottedPattern(e,!!r.settings.config.projectorMode,!!r.settings.highlight)),p.drawSegment(h);else if((o==="SOLID"||o==="default")&&e.lineWidth===1)if(h.length>4||h[0]!==h[2]&&h[1]!==h[3]){e.moveTo(h[0],h[1]);for(let y=0;y<h.length;y+=2)e.lineTo(h[y],h[y+1])}else{e.moveTo(__dcg_shared_module_exports__['Ia'](h[0]),__dcg_shared_module_exports__['Ia'](h[1]));for(let y=0;y<h.length;y+=2)e.lineTo(__dcg_shared_module_exports__['Ia'](h[y]),__dcg_shared_module_exports__['Ia'](h[y+1]))}else{e.moveTo(h[0],h[1]);for(let g=0;g<h.length;g+=2)e.lineTo(h[g],h[g+1])}e.desmos_batching||e.stroke(),Br(e),e.restore()}static mapPointToScreen(e,r,i){let o=e.mapx(r);if(o<-20||o>e.screen.width+20)return null;let a=e.mapy(i);return a<-20||a>e.screen.height+20?null:{x:o,y:a}}static drawPointToCtx(e,r,i,n,o,a,s,l,c,u,h){let p=e.lineWidth,g=e.fillStyle,y=e.strokeStyle,w=Ei.mapPointToScreen(r,n,o);if(!w||c!==void 0&&(c<=0||!isFinite(c)))return!1;ei(e,"dcg-svg-point"),a!==void 0?e.globalAlpha=a:e.globalAlpha=.9,u!==void 0&&(e.globalAlpha*=u),e.desmos_batching||e.beginPath();let b=r.settings.pointLineWidth;if(l&&(b=r.settings.config.projectorMode?17:11,e.lineWidth=b),i.tokenSelected?c?c*=2:c=2:i.tokenHovered&&(c?c*=1.5:c=1.5),c!==void 0&&(b*=c,e.lineWidth=b),h&&(e.fillStyle=h,e.strokeStyle=h),s==="CROSS"){let D=b*.4;e.moveTo(w.x-D,w.y-D),e.lineTo(w.x+D,w.y+D),e.moveTo(w.x+D,w.y-D),e.lineTo(w.x-D,w.y+D),e.lineWidth=b*.3}else if(s==="OPEN"){let D=b*.42;e.moveTo(w.x+D,w.y),e.arc(w.x,w.y,D,0,Math.PI*2,!0),e.closePath(),e.fillStyle="white",e.lineWidth=b*.25,e.fill()}else e.moveTo(w.x-.1,w.y-.1),e.lineTo(w.x-.1,w.y+.1),e.lineTo(w.x+.1,w.y+.1),e.lineTo(w.x+.1,w.y-.1);return e.desmos_batching||e.stroke(),e.globalAlpha=1,e.lineWidth=p,e.fillStyle=g,e.strokeStyle=y,Br(e),!0}static drawPointsToCtx(e){let{ctx:r,projection:i,segment:n,style:o,sizeOverrideIdxs:a,opacityOverrideIdx:s,sizeFactor:l,opacityFactor:c,colorOverrides:u,baseOpacity:h,droppedIndices:p}=e,g=r.lineWidth;r.lineWidth=i.settings.pointLineWidth;let y;Array.isArray(h)?(y=h.map(function(w){return Ei._clampedOpacity(w,.9)}.bind(this)),y=Yx(y,p)):y=Ei._clampedOpacity(h,.9),Array.isArray(l)&&(l=Yx(l,p)),Array.isArray(c)&&(c=Yx(c,p)),u&&(u=Yx(u,p));for(let w=0;w<n.length;w++)Ei.drawPointToCtx(r,i,e.sketch,n[w][0],n[w][1],s===w?.6:Array.isArray(y)?y[w]:y,o,a[w],Array.isArray(l)?l[w]:l,Array.isArray(c)?c[w]:c,u&&u[w]);r.lineWidth=g}static fillGraphStrokeToCtx(e,r,i,n,o){e.globalAlpha=o===6?.2:.4;let a=null,s=null,l;if(o===6){s=xx;let u=n?0:r.viewport.polarDiameter(),h=r.settings.degreeMode?180:2*Math.PI;a=t1(i,u,h)}else o===2?(s=YV,l=n?r.viewport.ymin:r.viewport.ymax,a=bE(i,l)):o===1&&(s=jV,l=n?r.viewport.xmin:r.viewport.xmax,a=bE(i,l));if(a===null||s===null)return;let c=HE(r.screen);for(let u of a){let h=Ng(o,!0,r.settings),p=ip(u,r.mathToPixels,h),g=vx(p,c,s,!1);if(g.length>=6){ei(e,"dcg-svg-region"),e.desmos_batching||e.beginPath(),e.moveTo(g[0],g[1]);for(let y=2;y<g.length;y+=2)e.lineTo(g[y],g[y+1]);e.lineTo(g[0],g[1]),e.desmos_batching||e.fill(),Br(e)}}e.globalAlpha=1}static _clampedOpacity(e,r){return typeof e!="number"?r:e<0?0:e>1?1:isFinite(e)?e:r}static fillPolygonToCtx(e,r,i,n){let o=HE(r.screen);e.globalAlpha=Ei._clampedOpacity(n*r.settings.getFillOpacityMultiplier(),.4);let a=ip(i,r.mathToPixels,wx),s=vx(a,o,xx,!1);if(s.length>=6){ei(e,"dcg-svg-region"),e.desmos_batching||e.beginPath(),e.moveTo(s[0],s[1]);for(let l=2;l<s.length;l+=2)e.lineTo(s[l],s[l+1]);e.desmos_batching||e.fill(),Br(e)}e.globalAlpha=1}};function qB(t,e){return t===17?e==="DEFAULT"?"NONE":e:"NONE"}function HB(t){switch(t){case"NONE":return{startArrow:!1,endArrow:!1};case"POSITIVE":return{startArrow:!1,endArrow:!0};case"BOTH":return{startArrow:!0,endArrow:!0};default:let e=t;throw new Error("Unexpected arrowMode: "+e)}}function $B(t){switch(t){case"default":case"SOLID":case"DASHED":return 4;case"DOTTED":return 2;default:let e=t;throw new Error("Unexpected line style "+e)}}function rl(t,e,r,i,n,o){let a=Math.atan2(n-r,i-e),s=i-o*Math.cos(a-Math.PI/9),l=n-o*Math.sin(a-Math.PI/9),c=i-o*Math.cos(a+Math.PI/9),u=n-o*Math.sin(a+Math.PI/9),h=i-(o-2)*Math.cos(a-Math.PI/18),p=n-(o-2)*Math.sin(a-Math.PI/18),g=i-(o-2)*Math.cos(a+Math.PI/18),y=n-(o-2)*Math.sin(a+Math.PI/18);t.moveTo(i,n),t.lineTo(s,l),t.lineTo(c,u),t.lineTo(i,n),t.lineTo(h,p),t.lineTo(g,y),t.lineTo(i,n)}function zE(t,e,r,i,n,o,a){let s=i+n,l=o*Math.min(1,Math.max(.5,Math.abs(n)/.8)),c=n<=0,u=Math.PI/2;a<25?u+=.25:u+=.1,c||(u*=-1);let h=e+Math.cos(s+u),p=r+Math.sin(s+u);rl(t,h,p,e,r,l)}function fp(t,e){let r=20;return e.settings.config.projectorMode&&(r*=1.4),r}var Xx=class{constructor(e){this.savedPOI=[],this.controller=e}redrawToCtx(e,r,i,n,o,a){let s=[];for(var l=0;l<a.length;l++){var c=a[l],u=i[c];if(u){u.showHighlight&&!this.controller.isGeometry()&&this.drawSketchHighlight({sketch:u,ctx:e,projection:r,poiLabelsLayer:n,clickableObjectsLayer:o,geometryContext:this.controller.getGeoModel()});var h=u.getPOI();(u.showPOI||h.length&&h[0].isAttachedToPlottedPoint())&&s.push.apply(s,this.drawPOIs(h,e,"#AAAAAA",r))}}this.savedPOI=s}getDrawnPOI(){return this.savedPOI}drawSketchHighlight(e){e.projection.settings.setProperty("highlight",!0),Ei.drawSketchToCtx(e),e.projection.settings.setProperty("highlight",!1)}drawPOIs(e,r,i,n){r.lineWidth=n.settings.pointLineWidth,r.strokeStyle=i||"#AAAAAA",r.fillStyle=i||"#AAAAAA",r.lineJoin="round",r.lineCap="round";var o=r.globalAlpha;r.globalAlpha=.01;var a=[],s,l=e.length,c;if(l&&e[0].isAttachedToPlottedPoint())for(s=0;s<l;s++)c=e[s],Ei.mapPointToScreen(n,c.x,c.y)&&a.push(c);else for(s=0;s<l;s++)c=e[s],Ei.drawPointToCtx(r,n,c.sketch,c.x,c.y)&&a.push(c);return r.globalAlpha=o,a}};var Qx=class{redrawToCtx(e,r,i){if(i){e.save(),e.lineWidth=2,e.fillStyle="rgba(0,0,0,.15)",e.strokeStyle="rgba(0,0,0,.4)";var n=r.mapx(i.left),o=r.mapy(i.top),a=r.mapx(i.right),s=r.mapy(i.bottom),l=a-n,c=s-o;e.fillRect(n,o,l,c),e.strokeRect(n,o,l,c),e.restore()}}};var Fl=__dcg_shared_module_exports__['i'](ne());var{If:WB}=Fl.Components,Zx=class extends Fl.Class{init(){this.controller=this.props.grapher().controller,this.poiController=this.props.grapher().poiController}template(){return Fl.createElement(WB,{predicate:this.bindFn(this.showCursor)},()=>Fl.createElement("div",{class:Fl.const("dcg-geo-keyboard-cursor"),style:()=>({top:`${this.getPosition().y}px`,left:`${this.getPosition().x}px`})}))}getPosition(){let e=this.poiController.getGeoKeyboardPt(),r=this.props.grapher().getProjection();return{x:r.mapx(e.x),y:r.mapy(e.y)}}showCursor(){return this.controller.isGeometry()&&this.controller.isGraphPaperFocused()&&!(this.controller.getSelectedGeoExpression()||this.controller.hasMultipleItemsSelected())}};var mp,dt,Qg,YE,jE;function co(t,e){var r=Object.keys(e),i;for(i=0;i<r.length;i++)t=t.replace(new RegExp("\\{"+r[i]+"\\}","gi"),e[r[i]]);return t}function ew(t){var e,r,i;if(!t)throw new Error("cannot create a random attribute name for an undefined object");e="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",r="";do for(r="",i=0;i<12;i++)r+=e[Math.floor(Math.random()*e.length)];while(t[r]);return r}function jB(t,e){var r,i,n={},o,a;for(t=t.split(","),e=e||10,r=0;r<t.length;r+=2)i="&"+t[r+1]+";",o=parseInt(t[r],e),n[i]="&#"+o+";";return n["\\xa0"]="&#160;",n}function YB(t){var e={left:"start",right:"end",center:"middle",start:"start",end:"end"};return e[t]||e.start}jE=jB("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);mp={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}};Qg=function(t,e){this.__root=t,this.__ctx=e};Qg.prototype.addColorStop=function(t,e){var r=this.__ctx.__createElement("stop"),i,n;r.setAttribute("offset",t),e.indexOf("rgba")!==-1?(i=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,n=i.exec(e),r.setAttribute("stop-color",co("rgb({r},{g},{b})",{r:n[1],g:n[2],b:n[3]})),r.setAttribute("stop-opacity",n[4])):r.setAttribute("stop-color",e),this.__root.appendChild(r)};YE=function(t,e){this.__root=t,this.__ctx=e};dt=function(t){var e={width:500,height:500,enableMirroring:!1},r;if(arguments.length>1?(r=e,r.width=arguments[0],r.height=arguments[1]):t?r=t:r=e,!(this instanceof dt))return new dt(r);this._randomPostfix="-"+function(){return"xxxxxxxx".replace(/x/g,function(n){return(Math.random()*16|0).toString(16)})}(),this._svgClassNames=[],this.width=r.width||e.width,this.height=r.height||e.height,this.enableMirroring=r.enableMirroring!==void 0?r.enableMirroring:e.enableMirroring,this.canvas=this,this.__document=r.document||document,r.ctx?this.__ctx=r.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)};dt.prototype.__createElement=function(t,e,r){typeof e=="undefined"&&(e={});var i=this.__document.createElementNS("http://www.w3.org/2000/svg",t),n=Object.keys(e),o,a;for(r&&(i.setAttribute("fill","none"),i.setAttribute("stroke","none")),o=0;o<n.length;o++)a=n[o],i.setAttribute(a,e[a]);var s=this._svgClassNames&&this._svgClassNames[this._svgClassNames.length-1];return s&&i.setAttribute("class",s),i};dt.prototype.__setDefaultStyles=function(){var t=Object.keys(mp),e,r;for(e=0;e<t.length;e++)r=t[e],this[r]=mp[r].canvas};dt.prototype.__applyStyleState=function(t){var e=Object.keys(t),r,i;for(r=0;r<e.length;r++)i=e[r],this[i]=t[i]};dt.prototype.__getStyleState=function(){var t,e={},r=Object.keys(mp),i;for(t=0;t<r.length;t++)i=r[t],e[i]=this[i];return e};dt.prototype.__applyStyleToCurrentElement=function(t){var e=this.__currentElement,r=this.__currentElementsToStyle;r&&(e.setAttribute(t,""),e=r.element,r.children.forEach(function(g){g.setAttribute(t,"")}));var i=Object.keys(mp),n,o,a,s,l,c;for(n=0;n<i.length;n++)if(o=mp[i[n]],a=this[i[n]],o.apply){if(a instanceof YE){if(a.__ctx)for(;a.__ctx.__defs.childNodes.length;)s=a.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[s]=s,this.__defs.appendChild(a.__ctx.__defs.childNodes[0]);e.setAttribute(o.apply,co("url(#{id})",{id:a.__root.getAttribute("id")}))}else if(a instanceof Qg)e.setAttribute(o.apply,co("url(#{id})",{id:a.__root.getAttribute("id")}));else if(o.apply.indexOf(t)!==-1&&o.svg!==a)if((o.svgAttr==="stroke"||o.svgAttr==="fill")&&a.indexOf("rgba")!==-1){l=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,c=l.exec(a),e.setAttribute(o.svgAttr,co("rgb({r},{g},{b})",{r:c[1],g:c[2],b:c[3]}));var u=c[4],h=this.globalAlpha;h!=null&&(u*=h),e.setAttribute(o.svgAttr+"-opacity",u)}else{var p=o.svgAttr;if(i[n]==="globalAlpha"&&(p=t+"-"+o.svgAttr,e.getAttribute(p)))continue;e.setAttribute(p,a)}}};dt.prototype.__closestGroupOrSvg=function(t){return t=t||this.__currentElement,t.nodeName==="g"||t.nodeName==="svg"?t:this.__closestGroupOrSvg(t.parentNode)};dt.prototype.getSerializedSvg=function(t){var e=new XMLSerializer().serializeToString(this.__root),r,i,n,o,a,s;if(s=/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi,s.test(e)&&(e=e.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),t)for(r=Object.keys(jE),i=0;i<r.length;i++)n=r[i],o=jE[n],a=new RegExp(n,"gi"),a.test(e)&&(e=e.replace(a,o));return e};dt.prototype.getSvg=function(){return this.__root};dt.prototype._dcgStartNamedGroup=function(t){var e=this.__createElement("g");e.setAttribute("id",t+this._randomPostfix);var r=this.__closestGroupOrSvg();this.__groupStack.push(r),r.appendChild(e),this.__currentElement=e};dt.prototype._dcgEndNamedGroup=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElement||(this.__currentElement=this.__root.childNodes[1])};dt.prototype._dcgSaveClassName=function(t){this._svgClassNames.push(t),this.__currentElement&&this.__currentElement.tagName==="path"&&!this.__currentDefaultPath&&(this.__currentElement.getAttribute("class")||this.__currentElement.setAttribute("class",t))};dt.prototype._dcgRestoreClassName=function(){this._svgClassNames.pop()};dt.prototype.save=function(){var t=this.__createElement("g"),e=this.__closestGroupOrSvg();this.__groupStack.push(e),e.appendChild(t),this.__currentElement=t,this.__stack.push(this.__getStyleState())};dt.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var t=this.__stack.pop();this.__applyStyleState(t)};dt.prototype.__addTransform=function(t){var e=this.__closestGroupOrSvg();if(e.childNodes.length>0){this.__currentElement.nodeName==="path"&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:e,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var r=this.__createElement("g");e.appendChild(r),this.__currentElement=r}var i=this.__currentElement.getAttribute("transform");i?i+=" ":i="",i+=t,this.__currentElement.setAttribute("transform",i)};dt.prototype.scale=function(t,e){e===void 0&&(e=t),this.__addTransform(co("scale({x},{y})",{x:t,y:e}))};dt.prototype.rotate=function(t){var e=t*180/Math.PI;this.__addTransform(co("rotate({angle},{cx},{cy})",{angle:e,cx:0,cy:0}))};dt.prototype.translate=function(t,e){this.__addTransform(co("translate({x},{y})",{x:t,y:e}))};dt.prototype.transform=function(t,e,r,i,n,o){this.__addTransform(co("matrix({a},{b},{c},{d},{e},{f})",{a:t,b:e,c:r,d:i,e:n,f:o}))};dt.prototype.beginPath=function(){var t,e;this.__currentDefaultPath="",this.__currentPosition={},t=this.__createElement("path",{},!0),e=this.__closestGroupOrSvg(),e.appendChild(t),this.__currentElement=t};dt.prototype.__applyCurrentDefaultPath=function(){var t=this.__currentElement;t.nodeName==="path"?t.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",t.nodeName)};dt.prototype.__addPathCommand=function(t){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=t};dt.prototype.moveTo=function(t,e){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:t,y:e},this.__addPathCommand(co("M {x} {y}",{x:t,y:e}))};dt.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")};dt.prototype.lineTo=function(t,e){this.__currentPosition={x:t,y:e},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(co("L {x} {y}",{x:t,y:e})):this.__addPathCommand(co("M {x} {y}",{x:t,y:e}))};dt.prototype.bezierCurveTo=function(t,e,r,i,n,o){this.__currentPosition={x:n,y:o},this.__addPathCommand(co("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:t,cp1y:e,cp2x:r,cp2y:i,x:n,y:o}))};dt.prototype.quadraticCurveTo=function(t,e,r,i){this.__currentPosition={x:r,y:i},this.__addPathCommand(co("Q {cpx} {cpy} {x} {y}",{cpx:t,cpy:e,x:r,y:i}))};var WE=function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]};dt.prototype.arcTo=function(t,e,r,i,n){var o=this.__currentPosition&&this.__currentPosition.x,a=this.__currentPosition&&this.__currentPosition.y;if(!(typeof o=="undefined"||typeof a=="undefined")){if(n<0)throw new Error("IndexSizeError: The radius provided ("+n+") is negative.");if(o===t&&a===e||t===r&&e===i||n===0){this.lineTo(t,e);return}var s=WE([o-t,a-e]),l=WE([r-t,i-e]);if(s[0]*l[1]===s[1]*l[0]){this.lineTo(t,e);return}var c=s[0]*l[0]+s[1]*l[1],u=Math.acos(Math.abs(c)),h=WE([s[0]+l[0],s[1]+l[1]]),p=n/Math.sin(u/2),g=t+p*h[0],y=e+p*h[1],w=[-s[1],s[0]],b=[l[1],-l[0]],D=function(G){var T=G[0],P=G[1];return P>=0?Math.acos(T):-Math.acos(T)},I=D(w),E=D(b);this.lineTo(g+w[0]*n,y+w[1]*n),this.arc(g,y,n,I,E)}};dt.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")};dt.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")};dt.prototype.rect=function(t,e,r,i){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+i),this.lineTo(t,e+i),this.lineTo(t,e),this.closePath()};dt.prototype.fillRect=function(t,e,r,i){var n,o;n=this.__createElement("rect",{x:t,y:e,width:r,height:i},!0),o=this.__closestGroupOrSvg(),o.appendChild(n),this.__currentElement=n,this.__applyStyleToCurrentElement("fill")};dt.prototype.strokeRect=function(t,e,r,i){var n,o;n=this.__createElement("rect",{x:t,y:e,width:r,height:i},!0),o=this.__closestGroupOrSvg(),o.appendChild(n),this.__currentElement=n,this.__applyStyleToCurrentElement("stroke")};dt.prototype.__clearCanvas=function(){for(var t=this.__closestGroupOrSvg(),e=t.getAttribute("transform"),r=this.__root.childNodes[1],i=r.childNodes,n=i.length-1;n>=0;n--)i[n]&&r.removeChild(i[n]);this.__currentElement=r,this.__groupStack=[],e&&this.__addTransform(e)};dt.prototype.clearRect=function(t,e,r,i){if(t===0&&e===0&&r===this.width&&i===this.height){this.__clearCanvas();return}var n,o=this.__closestGroupOrSvg();n=this.__createElement("rect",{x:t,y:e,width:r,height:i,fill:"#FFFFFF"},!0),o.appendChild(n)};dt.prototype.createLinearGradient=function(t,e,r,i){var n=this.__createElement("linearGradient",{id:ew(this.__ids),x1:t+"px",x2:r+"px",y1:e+"px",y2:i+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(n),new Qg(n,this)};dt.prototype.createRadialGradient=function(t,e,r,i,n,o){var a=this.__createElement("radialGradient",{id:ew(this.__ids),cx:i+"px",cy:n+"px",r:o+"px",fx:t+"px",fy:e+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(a),new Qg(a,this)};dt.prototype.__parseFont=function(){var t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i,e=t.exec(this.font),r={style:e[1]||"normal",size:e[4]||"10px",family:e[6]||"sans-serif",weight:e[3]||"normal",decoration:e[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(r.decoration="underline"),this.__fontHref&&(r.href=this.__fontHref),r};dt.prototype.__wrapTextLink=function(t,e){if(t.href){var r=this.__createElement("a");return r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.href),r.appendChild(e),r}return e};dt.prototype.__applyText=function(t,e,r,i){var n=this.__parseFont(),o=this.__closestGroupOrSvg(),a=this.__createElement("text",{"font-family":n.family,"font-size":n.size,"font-style":n.style,"font-weight":n.weight,"text-decoration":n.decoration,x:e,y:r,"text-anchor":YB(this.textAlign)},!0);a.appendChild(this.__document.createTextNode(t)),this.__currentElement=a,this.__applyStyleToCurrentElement(i),o.appendChild(this.__wrapTextLink(n,a))};dt.prototype.fillText=function(t,e,r){this.__applyText(t,e,r,"fill")};dt.prototype.strokeText=function(t,e,r){this.__applyText(t,e,r,"stroke")};dt.prototype.measureText=function(t){return this.__ctx.font=this.font,this.__ctx.measureText(t)};dt.prototype.arc=function(t,e,r,i,n,o){if(i!==n){i=i%(2*Math.PI),n=n%(2*Math.PI),i===n&&(n=(n+2*Math.PI-.001*(o?-1:1))%(2*Math.PI));var a=t+r*Math.cos(n),s=e+r*Math.sin(n),l=t+r*Math.cos(i),c=e+r*Math.sin(i),u=o?0:1,h=0,p=n-i;p<0&&(p+=2*Math.PI),o?h=p>Math.PI?0:1:h=p>Math.PI?1:0,this.lineTo(l,c),this.__addPathCommand(co("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:r,ry:r,xAxisRotation:0,largeArcFlag:h,sweepFlag:u,endX:a,endY:s})),this.__currentPosition={x:a,y:s}}};dt.prototype.clip=function(){var t=this.__closestGroupOrSvg(),e=this.__createElement("clipPath"),r=ew(this.__ids),i=this.__createElement("g");this.__applyCurrentDefaultPath(),t.removeChild(this.__currentElement),e.setAttribute("id",r),e.appendChild(this.__currentElement),this.__defs.appendChild(e),t.setAttribute("clip-path",co("url(#{id})",{id:r})),t.appendChild(i),this.__currentElement=i};dt.prototype.drawImage=function(){var t=Array.prototype.slice.call(arguments),e=t[0],r,i,n,o,a=0,s=0,l,c,u,h,p,g,y,w,b,D,I;if(t.length===3)r=t[1],i=t[2],l=e.width,c=e.height,n=l,o=c;else if(t.length===5)r=t[1],i=t[2],n=t[3],o=t[4],l=e.width,c=e.height;else if(t.length===9)a=t[1],s=t[2],l=t[3],c=t[4],r=t[5],i=t[6],n=t[7],o=t[8];else throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);u=this.__closestGroupOrSvg(),y=this.__currentElement;var E="translate("+r+", "+i+")";if(e instanceof dt){if(h=e.getSvg().cloneNode(!0),h.childNodes&&h.childNodes.length>1){for(p=h.childNodes[0];p.childNodes.length;)I=p.childNodes[0].getAttribute("id"),this.__ids[I]=I,this.__defs.appendChild(p.childNodes[0]);if(g=h.childNodes[1],g){var G=g.getAttribute("transform"),T;G?T=G+" "+E:T=E,g.setAttribute("transform",T),u.appendChild(g)}}}else(e.nodeName==="CANVAS"||e.nodeName==="IMG")&&(w=this.__createElement("image"),w.setAttribute("width",n),w.setAttribute("height",o),w.setAttribute("opacity",this.globalAlpha),w.setAttribute("preserveAspectRatio","none"),(a||s||l!==e.width||c!==e.height)&&(b=this.__document.createElement("canvas"),b.width=n,b.height=o,D=b.getContext("2d"),D.drawImage(e,a,s,l,c,0,0,n,o),e=b),w.setAttribute("transform",E),w.setAttribute("xlink:href",e.nodeName==="CANVAS"?e.toDataURL():e.getAttribute("src")),u.appendChild(w))};dt.prototype.createPattern=function(t,e){var r=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),i=ew(this.__ids),n;return r.setAttribute("id",i),r.setAttribute("width",t.width),r.setAttribute("height",t.height),t.nodeName==="CANVAS"||t.nodeName==="IMG"?(n=this.__document.createElementNS("http://www.w3.org/2000/svg","image"),n.setAttribute("width",t.width),n.setAttribute("height",t.height),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.nodeName==="CANVAS"?t.toDataURL():t.getAttribute("src")),r.appendChild(n),this.__defs.appendChild(r)):t instanceof dt&&(r.appendChild(t.__root.childNodes[1]),this.__defs.appendChild(r)),new YE(r,this)};dt.prototype.setLineDash=function(t){t&&t.length>0?this.lineDash=t.join(","):this.lineDash=null};dt.prototype.ellipse=function(t,e,r,i,n,o,a,s){if(o!==a){o=o%(2*Math.PI),a=a%(2*Math.PI),o===a&&(a=(a+2*Math.PI-.001*(s?-1:1))%(2*Math.PI));var l=t+Math.cos(-n)*r*Math.cos(a)+Math.sin(-n)*i*Math.sin(a),c=e-Math.sin(-n)*r*Math.cos(a)+Math.cos(-n)*i*Math.sin(a),u=t+Math.cos(-n)*r*Math.cos(o)+Math.sin(-n)*i*Math.sin(o),h=e-Math.sin(-n)*r*Math.cos(o)+Math.cos(-n)*i*Math.sin(o),p=s?0:1,g=0,y=a-o;y<0&&(y+=2*Math.PI),s?g=y>Math.PI?0:1:g=y>Math.PI?1:0,this.lineTo(u,h),this.__addPathCommand(co("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:r,ry:i,xAxisRotation:n*(180/Math.PI),largeArcFlag:g,sweepFlag:p,endX:l,endY:c})),this.__currentPosition={x:l,y:c}}};dt.prototype._dcgSetTitle=function(t){var e=this.__currentElement,r=!1,i,n=e.getElementsByTagName("title");n.length>0?i=n[0]:(i=this.__document.createElementNS("http://www.w3.org/2000/svg","title"),r=!0),i.textContent=t,r&&e.appendChild(i)};dt.prototype.drawFocusRing=function(){};dt.prototype.createImageData=function(){};dt.prototype.getImageData=function(){};dt.prototype.putImageData=function(){};dt.prototype.globalCompositeOperation=function(){};dt.prototype.setTransform=function(){};var U1=dt;at();var Rl=document.createElement("canvas").getContext("2d"),Gn=class{constructor(e,r){this._label=e,this._fontSize=r,this._layout=JB(e,r)}getRect(){return this.getRectWhenCenteredAt({x:0,y:0})}getRectWhenCenteredAt(e){return{left:this._layout.left+e.x,right:this._layout.right+e.x,top:this._layout.top+e.y,bottom:this._layout.bottom+e.y}}getBoundsWhenCenteredAt(e,r){switch(r){case"x":return{lower:this._layout.left+e,upper:this._layout.right+e};case"y":return{lower:this._layout.top+e,upper:this._layout.bottom+e};default:let i=r;throw new Error(`Unknown axis: ${i}`)}}getWidth(){return this._layout.right-this._layout.left}getHeight(){return this._layout.bottom-this._layout.top}getDimensionAlongAxis(e){switch(e){case"x":return this.getWidth();case"y":return this.getHeight();default:let r=e;throw new Error(`Unknown axis: ${r}`)}}clampBoundsWithinRect(e,r){let i,n;return e.x+this._layout.left<r.left?i=r.left-this._layout.left:e.x+this._layout.right>r.right?i=r.right-this._layout.right:i=e.x,e.y+this._layout.top<r.top?n=r.top-this._layout.top:e.y+this._layout.bottom>r.bottom?n=r.bottom-this._layout.bottom:n=e.y,{x:i,y:n}}getValue(){return this._label.value}getMinusWidth(){return this.getValue()<0?(Gn.setCtxFontSize(Rl,this._fontSize),Rl.measureText("-1").width-Rl.measureText("1").width):0}getString(){return this._label.superscript?this._label.mantissa+"^"+this._label.superscript:this._label.string}drawCenteredAt(e,r,i){let n=r.x,o=Gn.computeBaselineFromCenter(r.y,this._fontSize);i&&ei(e,i),e.save(),i&&Br(e),Gn.setCtxFontSize(e,this._fontSize),this._label.superscript?(e.strokeText(this._label.mantissa,this._layout.mantissa_x+n,this._layout.mantissa_y+o),e.strokeText(this._label.superscript,this._layout.superscript_x+n,this._layout.superscript_y+o),e.fillText(this._label.mantissa,this._layout.mantissa_x+n,this._layout.mantissa_y+o),e.fillText(this._label.superscript,this._layout.superscript_x+n,this._layout.superscript_y+o)):(e.strokeText(this._label.string,this._layout.mantissa_x+n,this._layout.mantissa_y+o),e.fillText(this._label.string,this._layout.mantissa_x+n,this._layout.mantissa_y+o)),e.restore()}static computeBaselineFromCenter(e,r){return e+.272*r}static setCtxFontSize(e,r){e.font=r+"px Arial",e.textAlign="center"}};function JB(t,e){if(t.superscript){let r=e;Gn.setCtxFontSize(Rl,r);let i=Rl.measureText(t.mantissa).width,n=Math.round(.8*e);Gn.setCtxFontSize(Rl,n);let o=Rl.measureText(t.superscript).width,a=0,s=e/5,l=i/2+o/2,c=-e/4,u=c-n/2,h=s+r/2,p=a-i/2,g=l+o/2;return{top:u,bottom:h,left:p,right:g,mantissa_height:r,mantissa_width:i,mantissa_x:a,mantissa_y:s,superscript_height:n,superscript_width:o,superscript_x:l,superscript_y:c}}else{let r=e;Gn.setCtxFontSize(Rl,e);let i=Rl.measureText(t.string).width,n=0,o=0,a=o-r/2,s=o+r/2,l=n-i/2,c=n+i/2;return{top:a,bottom:s,left:l,right:c,mantissa_height:r,mantissa_width:i,mantissa_x:n,mantissa_y:o}}}function XB(t,e,r,i){let n=Math.ceil(t/r),o=Math.floor(e/r),a=1/r;if(!(n>o)&&!(o-n>1e4))for(let s=n;s<=o;s++)i(s/a)}var JE={base:10,major:[1,2,5],minor:[5,4,5]},QB={base:10,major:[Math.PI,2*Math.PI,5*Math.PI],minor:[4,4,5]},ZB={base:2,major:[Math.PI/3],minor:[3]};function e3(t){return t?{base:10,major:[t,2*t,5*t],minor:[4,4,5]}:JE}function XE(t,e){let{major:r,minor:i,base:n}=e,o=1/0,a=1/0;for(let s=0;s<r.length;s++){let l=r[s],c=Math.ceil(Math.log(t/l)/Math.log(n)),u=l*Math.pow(n,c);if(u<o){o=u;let h=i[s];a=o/h}}return{major:o,minor:a}}function t3(t,e,r){return 1+(e-t)/r}function q1(t){let e=t.screen.width,r=t.screen.height,i=t.viewport.xmax-t.viewport.xmin,n=t.viewport.ymax-t.viewport.ymin,o=t.settings.pixelsPerLabel;return{majorStepX:o/e*i,majorStepY:o/r*n}}function Cd(t){let e=c=>{let[u,h,p,g,y]=c==="x"?[t.viewport.xmin,t.viewport.xmax,t.settings.xAxisStep,t.settings.xAxisNumbers,t.settings.xAxisMinorSubdivisions]:[t.viewport.ymin,t.viewport.ymax,t.settings.yAxisStep,t.settings.yAxisNumbers,t.settings.yAxisMinorSubdivisions],w=h-u,b=Math.abs(p!=null?p:NaN),D=0,I=0;if(b&&b!==Math.PI){let E=t3(u,h,b);if(E>=3&&E<100){let G=0;if(g){let P=0;XB(u,h,b,function(_){let x=new Gn(__dcg_shared_module_exports__['Ma'](_,w),t.settings.labelSize);P=Math.max(x.getDimensionAlongAxis(c),P)}),G=P+10}else G=y===1?8:20;let T=c==="x"?"width":"height";E*G<=t.screen[T]&&(D=b,b===3||b===5?I=1:I=b/4)}}if(!D){let E=q1(t)[c==="x"?"majorStepX":"majorStepY"],G=XE(E,__dcg_shared_module_exports__['Ma'](b,w).string.indexOf("\u03C0")>=0?E>=1?QB:ZB:e3(b));D=G.major,I=G.minor}return{majorStep:D,minorStep:I}},r=()=>{var c,u;if(Math.abs((c=t.settings.xAxisStep)!=null?c:NaN)===Math.abs((u=t.settings.yAxisStep)!=null?u:NaN)){let{xmin:g,xmax:y,ymin:w,ymax:b}=t.viewport,D=t.screen.width/(y-g),I=t.screen.height/(b-w),E=D/I;if(E>=1&&E<=2){let{majorStep:G,minorStep:T}=e("y");return{x:{majorStep:G,minorStep:T},y:{majorStep:G,minorStep:T}}}if(E<=1&&E>=.5){let{majorStep:G,minorStep:T}=e("x");return{x:{majorStep:G,minorStep:T},y:{majorStep:G,minorStep:T}}}}return{x:e("x"),y:e("y")}},i=c=>{let[u,h,p,g]=c==="x"?[t.viewport.xmin,t.viewport.xmax,os(t.settings.xAxisBase||0),t.screen.width]:[t.viewport.ymin,t.viewport.ymax,os(t.settings.yAxisBase||0),t.screen.height],{pixelsPerLabel:y}=t.settings,w=Math.floor(g/y),b=(Math.log(h)-Math.log(u))/Math.log(p),D=.5,I=.5;for(;D<=.5;){I*=2;let G=__dcg_shared_module_exports__['Oa'](I*b);D=(Math.floor(G)+1)/w}let E=I===1?__dcg_shared_module_exports__['a'](2,Math.ceil(Math.log(D)/Math.log(2))):1/I;return{majorStep:E,minorStep:E}},n=()=>{let{xAxisScale:c,yAxisScale:u}=t.settings,h=c==="logarithmic",p=u==="logarithmic";return!h&&!p?r():{x:(h?i:e)("x"),y:(p?i:e)("y")}},{x:o,y:a}=n(),{xAxisMinorSubdivisions:s=0,yAxisMinorSubdivisions:l=0}=t.settings;return{majorStepX:o.majorStep,minorStepX:s>0?o.majorStep/s:o.minorStep,majorStepY:a.majorStep,minorStepY:l>0?a.majorStep/l:a.minorStep}}function H1(t){let e=q1(t),r=XE(e.majorStepX,JE),i=XE(e.majorStepY,JE),n=r.major>i.major?r:i;return{majorStepR:n.major,minorStepR:n.minor}}at();function Ur(){if(document.activeElement){var t=V(document.activeElement);mc(t)&&V(document.activeElement).trigger("blur")}}at();Us();var yp,tw=[],$1="",z1=En();function Ui(){yp!==void 0&&yp.empty()}function Ct(t){tw.push(t)}function ge(t){if(t!==void 0&&Ct(t),yp!==void 0&&tw.length>0){let e=tw.join(" ").replace(/ +(?= )/g,"");yp.attr("aria-relevant",$1===e&&gi?"all":"additions text"),e&&z1.logAria&&__dcg_shared_module_exports__['Gc'].log(e),yp.empty().text(e),$1=e}tw.length=0}function r3(){document.documentElement.addEventListener("focus",t=>{let e=t.target;if(e instanceof Element){let r=e.getAttribute("aria-label");r&&__dcg_shared_module_exports__['Gc'].log(r)}},!0)}z1.logAria&&r3();V(()=>{let t=".dcg-aria-alert";V(t).length===0&&V("body").append("<p aria-live='assertive' aria-atomic='true' class='dcg-aria-alert'></p>"),yp=V(t)});var cs=__dcg_shared_module_exports__['i'](ne());var i3=/`[^`]*`/g,n3=/^[\+\-]?[\d]*(\.\d+)?$/,o3=t=>{if(t!=null){let e=t.match(/`/g);return(e!=null&&e.length||0)%2==0}return!0},a3=t=>{let e=[];if(t==null||t.length==0)return e;let r=0,i;for(;i=i3.exec(t);){let o=t.slice(r,i.index);o.length>0&&e.push({from:r,to:i.index,type:"text",text:o}),r=i.index+i[0].length,e.push({from:i.index,to:r,type:"math",text:i[0].slice(1,-1)})}let n=t.slice(r);return n.length>0&&e.push({from:r,to:t.length,type:"text",text:n}),e},W1=Uo.StaticMath(document.createElement("span"));function uo(t){let e="",r=[];o3(t)?r=a3(t):r=[{from:0,to:t.length,type:"text",text:t}];for(let i of r)e+=i.type==="text"?i.text:nn(i.text);return e}function nn(t){let e="";return n3.test(t)?(/^\+/.test(t)?(e="positive ",t=t.slice(1)):/^\-/.test(t)&&(e="negative ",t=t.slice(1)),e+=t.replace(/(\.)([0-9]+)/g,(r,i,n)=>i+n.split("").join(" ").trim())):(W1.latex(t),e=W1.mathspeak().trim()),e}at();var{For:s3}=cs.Components;function rw(t,e){let r=t[e];return Array.isArray(r)&&t.tableInfo?r[t.tableInfo.rowIndex]:r}var Zg=class extends cs.Class{init(){this.grapher=this.props.grapher(),this.renderedPointsIdOrder=[],this.renderedPoints={}}template(){return cs.createElement(s3,{each:()=>this.renderedPointsIdOrder},cs.createElement("div",{class:cs.const("dcg-graph-outer"),style:this.const({"z-index":0}),onFocusin:()=>this.requestRedrawNextFrame(),onFocusout:()=>this.requestRedrawNextFrame(),didMount:this.bindFn(this.didMountRoot)},e=>cs.createElement("div",{class:this.const({"dcg-tabbable-point":!0,"dcg-movable-point":this.renderedPoints[e].type==="movable"}),style:()=>({transform:this.getTransform(e)}),role:cs.const("button"),"aria-roledescription":()=>this.renderedPoints[e].type==="movable"?this.grapher.controller.s("graphing-calculator-narration-movable-point-description"):this.renderedPoints[e].type==="draggable-label"?this.grapher.controller.s("graphing-calculator-narration-draggable-label-description"):this.grapher.controller.s("graphing-calculator-narration-point-description"),"dcg-mp-id":this.const(e),tabindex:()=>this.getTabIndex(e),"aria-label":()=>this.getAriaLabel(e),"aria-hidden":this.bindFn(this.getAriaHidden)})))}redraw(e,r,i){var n=this.grapher.graphSketches,o=this.renderedPoints;this.renderedPoints={},this.renderedPointsIdOrder=[];var a=this.getFocusedPointId(),s=w=>{var b=this.processPOI(e,r,w,o[w.id],i,a);b&&(this.renderedPoints[w.id]=b,this.renderedPointsIdOrder.push(w.id))};this.grapher.getSketchOrder().forEach(w=>{var b=n[w];b&&(b.getMovablePoints().forEach(s),b.getStaticLabeledPoints().forEach(s))});var l=this.renderedPoints[this.hoveredPointId],c=this.renderedPoints[this.pressedPointId],u=l&&l.poi,h=c&&c.poi;u||this.setHoveredPointId(void 0),h||this.setPressedPointId(void 0);var p=h||u,g,y;p?(g=p.type==="movable-point"&&p.tableInfo&&p.tableInfo.dragX,y=p.type==="movable-point"&&p.tableInfo&&p.tableInfo.dragY,g&&y||!g&&!y?this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point"):g?this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point-ew"):this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point-ns")):this.grapher.setLayerClass("movablePoints",void 0),this.update(),this.speakAriaAlert()}_clampedOpacity(e){return e<0?0:e>1?1:__dcg_shared_module_exports__['J'](e)?e:1}drawForScreenshot(e,r,i,n){var o=this.grapher.graphSketches;for(let c in o){var a=o[c],s=a.branches[0],l;s.graphMode===4&&(l=s.pointOpacity),a.getMovablePoints().forEach(u=>{var h={screenX:r.mapx(u.x),screenY:r.mapy(u.y),color:u.color,pointOpacity:l,animationPercent:0};this.drawMovablePointOnCtx(e,u.sketch,h,i,n)})}}processPOI(e,r,i,n,o,a){var s=i.id,l=i.x,c=i.y,u=r.mapx(l),h=r.mapy(c),p=a===s,g=r.coordsAreOnscreen(u,h,20);if(!(!g&&!p)){if(!n){var y=i.sketch?this.grapher.controller.getItemModel(i.sketch.id):void 0;i.type==="movable-point"?n={type:"movable",id:s,pointOnScreen:g,poi:i,projection:r,screenX,screenY,color:rw(i,"color"),pointOpacity:rw(i,"pointOpacity"),pointIsHovered:!1,pointIsPressed:!1,lastHoverActionTime:0,animationPercent:0}:y&&y.type==="expression"&&y.label!==void 0&&y.showLabel&&y.reconciledDragMode!=="NONE"?n={type:"draggable-label",id:s,pointOnScreen:g,poi:i,projection:r,screenX,screenY}:n={type:"static",id:s,pointOnScreen:g,poi:i,projection:r,screenX,screenY}}return n.pointOnScreen=g,n.poi=i,n.projection=r,n.screenX=u,n.screenY=h,n.type==="movable"&&(n.color=rw(n.poi,"color"),n.pointOpacity=rw(n.poi,"pointOpacity"),this.updateMovablePointAnimation(n),this.drawMovablePointOnCtx(e,n.poi.sketch,n,o)),n}}drawMovablePointOnCtx(e,r,i,n,o){var g;var a;o?a=o:a=this.grapher.settings.config.projectorMode?13.5:10.5,r.tokenSelected?a*=2:r.tokenHovered?a*=1.5:r.showHighlight&&(a*=1.2);var s=Array.isArray(i.color)?i.color[0]:i.color,l=i.screenX,c=i.screenY,u=i.animationPercent||0;n.push({left:l-a,right:l+a,top:c-a,bottom:c+a}),e.save();var h=e.globalAlpha,p=this._clampedOpacity(i.pointOpacity);p*=(g=this.grapher.controller.getGeoModel().getToolFadeOpacity(r.id))!=null?g:1,e.fillStyle=s,e.globalAlpha=.35*p,e.beginPath(),e.moveTo(l+a,c),e.arc(l,c,a,0,Math.PI*2,!0),e.closePath(),e.fill(),e.globalAlpha=p,a*=.3+.7*u,e.beginPath(),e.moveTo(l+a,c),e.arc(l,c,a,0,Math.PI*2,!0),e.closePath(),e.fill(),e.globalAlpha=h,e.restore()}updateMovablePointAnimation(e){var r=Date.now(),i=e.id,n=this.hoveredPointId===i,o=this.pressedPointId===i;e.pointIsPressed=o,n!==e.pointIsHovered&&(e.pointIsHovered=n,e.lastHoverActionTime=r);var a=e.animationPercent||0,s=r-e.lastHoverActionTime,l=.004*s;o?a=1:n?(a+=l,a>=1?a=1:this.requestRedrawNextFrame()):(a-=l,a<=0?a=0:this.requestRedrawNextFrame()),e.animationPercent=a}getTransform(e){var r=this.renderedPoints[e];if(r)return CT(r.screenX,r.screenY)}getTabIndex(e){if(this.grapher.controller.getActiveTool()!=="selection")return-1;let r=this.renderedPoints[e];if(!r)return-1;let i=r.poi,n=this.grapher.controller.getItemEditableLabelMode(i.sketch.id),o=this.grapher.controller.getItemModel(i.sketch.id),a=o&&o.type==="expression"&&!el(o)&&(r.type==="movable"||n===void 0||n==="NONE");var s=this.grapher.settings;let l=s.config.graphpaper&&s.config.enableTabindex;return a&&l?0:-1}getAriaHidden(){var e=this.grapher.settings;return!e.config.graphpaper}getAriaLabel(e){var r=this.getAriaAlert({id:e,includeUsageInstructions:!1});return r&&r.completeMessage}speakAriaAlert(){let e=this.getFocusedPointId();if(e){let i=this.renderedPoints[e];if(!i||i.type==="static")return}var r=this.getAriaAlert({id:e,lastAriaAlert:this.lastAriaAlert,includeUsageInstructions:!0});this.lastAriaAlert=r,r&&r.completeMessage&&ge(r.completeMessage)}getAriaAlert(e){let{id:r,lastAriaAlert:i,includeUsageInstructions:n}=e;if(!r)return;var o=this.renderedPoints[r];if(!o)return;i&&i.id!==r&&(i=void 0);var a=o.poi,s=o.pointOnScreen,l=o.projection;if(!a||!l)return;var c=l.viewport;if(!c)return;var u=i&&i.label,h=a.ariaLabel,p=u!==h,g=i&&i.coordX,y=i&&i.coordY,w=a.x,b=a.y,D=w!==g||b!==y,I=Sd(this.grapher.controller,w,b,c);let{controller:E}=this.grapher;var G=h||E.s("graphing-calculator-narration-movable-point-prefix"),T=(o.type==="movable"||o.type==="draggable-label")&&n?E.s("graphing-calculator-narration-movable-point-suffix-usage-instructions"):"",P=s?"":E.s("graphing-calculator-narration-movable-point-off-screen-prompt"),_;return i?p?_=G+P:D?_=I+P:_="":_=G+". "+I+T+P,{id:r,coordX:w,coordY:b,label:h,completeMessage:_}}setHoveredPointId(e){e!==this.hoveredPointId&&(this.hoveredPointId=e,this.requestRedrawNextFrame())}isMovingPoint(){return!!this.pressedPointId}setPressedPointId(e){e!==this.pressedPointId&&(this.pressedPointId=e,this.requestRedrawNextFrame())}getFocusedPointId(){if(document.activeElement&&V.contains(this.rootNode,document.activeElement)){var e=V(document.activeElement);return e.attr("dcg-mp-id")}}getFocusedPoint(){var e=this.getFocusedPointId();if(e){var r=this.renderedPoints[e];if(r){var i=r.poi;return i}}}didMountRoot(e){this.rootNode=e}requestRedrawNextFrame(){this.grapher.redrawAllLayers()}};function Sd(t,e,r,i){return on(t,e,i)+" "+an(t,r,i)}function on(t,e,r){return t.getGraphSettings().showXAxis?t.s("graphing-calculator-narration-audio-trace-property-x",{x:nn(__dcg_shared_module_exports__['Ma'](e,r.xmax-r.xmin).latex)}):t.s("graphing-calculator-narration-x-percentage-coordinate",{x:Math.round((e-r.xmin)/(r.xmax-r.xmin)*1e3)/10})}function an(t,e,r){return t.getGraphSettings().showYAxis?t.s("graphing-calculator-narration-audio-trace-property-y",{y:nn(__dcg_shared_module_exports__['Ma'](e,r.ymax-r.ymin).latex)}):t.s("graphing-calculator-narration-y-percentage-coordinate",{y:Math.round((r.ymax-e)/(r.ymax-r.ymin)*1e3)/10})}var l3=Math.hypot&&Math.hypot(1/0,NaN)===1/0;function j1(t){return t===1/0||t===-1/0}var Ed=l3?Math.hypot:function(t,e){if(j1(t)||j1(e))return 1/0;if(isNaN(t)||isNaN(e))return NaN;if(t===0&&e===0)return 0;if(Math.abs(t)>Math.abs(e)){let r=e/t;return Math.abs(t)*Math.sqrt(r*r+1)}else{let r=t/e;return Math.abs(e)*Math.sqrt(r*r+1)}};function bp(t){let e=[[t.x0,t.y0],[t.x1,t.y1],[t.x2,t.y2]],[r,i]=__dcg_shared_module_exports__['mb'](e),n=__dcg_shared_module_exports__['xa'](t.x0-r,t.y0-i);return{x:r,y:i,radius:n}}function iw(t){let e=[[t.x0,t.y0],[t.x1,t.y1],[t.x2,t.y2]],[r,i]=__dcg_shared_module_exports__['mb'](e);return{startAngle:Math.atan2(t.y0-i,t.x0-r),deltaAngle:__dcg_shared_module_exports__['nb'](e)}}var Y1=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),c3=(t,e)=>t.x*e.x+t.y*e.y;function ow(t,e){return Ed(t.x-e.x,t.y-e.y)}function J1(t,e){let r={x:t.x1,y:t.y1},i={x:t.x2,y:t.y2},n=Y1(e,r),o=Y1(i,r),a=ow(r,i),s=a*a;return c3(n,o)/s}function tD(t){return[{x1:t.left,y1:t.top,x2:t.left,y2:t.bottom,extendStart:!1,extendEnd:!1},{x1:t.left,y1:t.top,x2:t.right,y2:t.top,extendStart:!1,extendEnd:!1},{x1:t.right,y1:t.top,x2:t.right,y2:t.bottom,extendStart:!1,extendEnd:!1},{x1:t.left,y1:t.bottom,x2:t.right,y2:t.bottom,extendStart:!1,extendEnd:!1}]}function d3(t){let{angle:e,width:r,height:i,center:n}=t,o=n.x,a=n.y,s=Math.cos(-e),l=Math.sin(-e),c=r/2,u=i/2,h={x:o+s*-c-l*-u,y:a+l*-c+s*-u},p={x:o+s*c-l*-u,y:a+l*c+s*-u},g={x:o+s*c-l*u,y:a+l*c+s*u},y={x:o+s*-c-l*u,y:a+l*-c+s*u};return[{x1:h.x,y1:h.y,x2:p.x,y2:p.y,extendStart:!1,extendEnd:!1},{x1:p.x,y1:p.y,x2:g.x,y2:g.y,extendStart:!1,extendEnd:!1},{x1:g.x,y1:g.y,x2:y.x,y2:y.y,extendStart:!1,extendEnd:!1},{x1:y.x,y1:y.y,x2:h.x,y2:h.y,extendStart:!1,extendEnd:!1}]}function u3(t,e){let r=tD(t);return!!(aw(e,r[0])||aw(e,r[1])||aw(e,r[2])||aw(e,r[3]))}function p3(t,e){let r=tD(t);return!!(nl(e,r[0],!1)||nl(e,r[1],!1)||nl(e,r[2],!1)||nl(e,r[3],!1)||nl(e,r[0],!0)||nl(e,r[1],!0)||nl(e,r[2],!0)||nl(e,r[3],!0))}function h3(t,e){let r=tD(t);return!!(Gc(e,r[0],!1)||Gc(e,r[1],!1)||Gc(e,r[2],!1)||Gc(e,r[3],!1)||Gc(e,r[0],!0)||Gc(e,r[1],!0)||Gc(e,r[2],!0)||Gc(e,r[3],!0))}function g3(t,e){return t.left<=e.left&&t.right>=e.right&&t.top<=e.top&&t.bottom>=e.bottom}function f3(t,e){return t.left<=e.x&&e.x<=t.right&&t.top<=e.y&&e.y<=t.bottom}function sw(t,e){if(!e.extendStart){let r=t.left<=e.x1&&e.x1<=t.right,i=t.top<=e.y1&&e.y1<=t.bottom;if(r&&i)return!0}return u3(t,e)}function rL(t,e){let r={x:e.x0,y:e.y0};return!!(f3(t,r)||h3(t,e))}function iL(t,e){let r={left:e.x-e.radius,right:e.x+e.radius,top:e.y-e.radius,bottom:e.y+e.radius};return!!(g3(t,r)||p3(t,e))}function m3(t,e){let r=t.x-e.center.x,i=t.y-e.center.y,n=Math.atan2(i,r),o=Ed(r,i),a={x:o*Math.cos(n+e.angle),y:o*Math.sin(n+e.angle)};return Math.abs(a.x)<=e.width/2&&Math.abs(a.y)<=e.height/2}function nL(t,e){if(e.length<4)return!1;let r={x1:NaN,y1:NaN,x2:e[0],y2:e[1],extendStart:!1,extendEnd:!1};for(var i=2;i<e.length;i+=2)if(r.x1=r.x2,r.y1=r.y2,r.x2=e[i],r.y2=e[i+1],sw(t,r))return!0;return!1}function oL(t,e){var r=d3(e);for(let i of r)if(sw(t,i))return!0;return!!m3({x:t.left,y:t.top},e)}function y3(t,e,r){let i=e.x1-t.x,n=e.x2-t.x,o=e.y1-t.y,a=e.y2-t.y,s=t.radius,l=n-i,c=a-o,u=l*l+c*c,h=i*a-n*o,p=Math.sqrt(s*s*u-h*h);if(p<0)return;if(c>=0)var g=1;else var g=-1;let y=r?-1*g:1*g;return{x:t.x+(h*c+y*g*l*p)/u,y:t.y+(-h*l+y*Math.abs(c)*p)/u}}function b3(t,e){let r=t.y2-t.y1,i=t.x1-t.x2,n=e.y2-e.y1,o=e.x1-e.x2,a=r*t.x1+i*t.y1,s=n*e.x1+o*e.y1,l=r*o-n*i;if(l!==0)return{x:(o*a-i*s)/l,y:(r*s-n*a)/l}}function eD(t,e){let r=J1(e,t);return!(isNaN(r)||r<0&&!e.extendStart||r>1&&!e.extendEnd)}function x3(t,e){let{x:r,y:i}=bp(e),{startAngle:n,deltaAngle:o}=iw(e),a=Math.atan2(t.y-i,t.x-r);return __dcg_shared_module_exports__['za'](a,n,o)}function nl(t,e,r){let i=y3(t,e,r);if(i!=null&&eD(i,e))return i}function Gc(t,e,r){let i=nl(bp(t),e,!1)||Q1,n=Z1(r,eL(t,i),tL(e));if(n||(i=nl(bp(t),e,!0)||Q1,n=Z1(r,eL(t,i),tL(e))),n&&x3(i,t))return i}var Q1={x:NaN,y:NaN};function aw(t,e){let r=b3(t,e);if(r!=null&&eD(r,t)&&eD(r,e))return r}function Z1(t,e,r){let i=e.x*r.y-e.y*r.x;return i>0&&t||i<0&&!t}function eL(t,e){let{x:r,y:i}=bp(t),{deltaAngle:n}=iw(t);return n>0?{x:i-e.y,y:e.x-r}:{x:e.y-i,y:r-e.x}}function tL(t){return{x:t.x2-t.x1,y:t.y2-t.y1}}function rD(t,e,r){let i=a=>r?a.map(s=>{if(s.indexOf("\\idref_{")===0){let l=s.indexOf("}"),c=s.slice(8,l);return r(c)+s.slice(l+1)}else return s}):a;switch(t.type){case"point-reference":return{latex:`${t.id}=${t.parents[0]}`,color:t.color};case"point":var{x:n,y:o}=t;return{latex:t.id+"=\\left("+__dcg_shared_module_exports__['Xb'](n)+","+__dcg_shared_module_exports__['Xb'](o)+"\\right)",color:t.color};case"glider":return{latex:t.id+"=\\operatorname{glider}\\left("+i(t.parents)[0]+","+__dcg_shared_module_exports__['Xb'](t.t)+"\\right)",color:t.color};case"polygon":{let s="";return!e&&t.connectBorder&&(s=","+t.parents[0]),{latex:t.id+"=\\operatorname{"+t.type+"}\\left("+i(t.parents).join(",")+s+"\\right)",color:t.color}}case"circle":case"arc":case"compass":case"segment":case"line":case"ray":case"parallel":case"perpendicular":case"intersection":case"midpoint":case"translation":case"reflection":return{latex:t.id+"=\\operatorname{"+t.type+"}\\left("+i(t.parents).join(",")+"\\right)",color:t.color};case"dilation":case"rotation":return{latex:t.id+"=\\operatorname{"+t.type+"}\\left("+i([t.parents[0]])+","+t.parents[1]+"\\right)",color:t.color};case"angle":case"directedangle":return{showLabel:!0,latex:t.id+"=\\operatorname{"+t.type+"}\\left("+i(t.parents).join(",")+"\\right)",color:t.color};case"angles":case"directedangles":return{showLabel:e,latex:t.id+"=\\operatorname{"+t.type+"}\\left("+i(t.parents).join(",")+"\\right)"+(t.listAccess!==void 0?"\\left["+t.listAccess+"\\right]":""),color:t.color};case"polygon-segment":return{latex:t.id+"="+i(t.parents)[0]+(t.listAccess!==void 0?"\\left["+t.listAccess+"\\right]":"")+".\\operatorname{segments}\\left["+(t.edgeNumber+1)+"\\right]",color:t.color};case"transformed-object":return;default:return t}}function iD(t,e){switch(t.valueType){case __dcg_shared_module_exports__['W']:t.value.forEach((r,i)=>{e({valueType:__dcg_shared_module_exports__['S'],value:r},i+1)});break;case __dcg_shared_module_exports__['da']:t.value.forEach((r,i)=>{e({valueType:__dcg_shared_module_exports__['ca'],value:r},i+1)});break;case __dcg_shared_module_exports__['ba']:t.value.forEach((r,i)=>{e({valueType:__dcg_shared_module_exports__['aa'],value:r},i+1)});break;case __dcg_shared_module_exports__['ja']:t.value.forEach((r,i)=>{e({valueType:__dcg_shared_module_exports__['ia'],value:r},i+1)});break;case __dcg_shared_module_exports__['ha']:t.value.forEach((r,i)=>{e({valueType:__dcg_shared_module_exports__['ga'],value:r},i+1)});break;case __dcg_shared_module_exports__['$']:t.value.forEach((r,i)=>{e({valueType:__dcg_shared_module_exports__['_'],value:r},i+1)});break;case __dcg_shared_module_exports__['fa']:t.value.forEach((r,i)=>{e({valueType:__dcg_shared_module_exports__['ea'],value:r},i+1)});break;case __dcg_shared_module_exports__['la']:t.value.forEach((r,i)=>{e({valueType:__dcg_shared_module_exports__['ka'],value:r},i+1)});break;case __dcg_shared_module_exports__['na']:t.value.forEach((r,i)=>{e({valueType:__dcg_shared_module_exports__['ma'],value:r},i+1)});break;default:e(t,void 0)}}function Dd(t,e,r={expandLists:!0}){t.getAllItemModels().concat(t.getAllToolPreviewItems()).forEach(n=>{if(n.type!=="expression"||!n.latex)return;let o=n.formula.typed_constant_value;if(!o)return;var a=n.formula.geometry;if(!a)return;let s=a;var l=a.identifier;let c=l?__dcg_shared_module_exports__['Ta'](l):"\\idref_{"+n.id+"}",u=!t.getItemModel(n.id);r.expandLists?iD(o,(h,p)=>{let g=c+(p===void 0?"":"\\left["+p+"\\right]"),y={calcId:n.id,data:s,hidden:Og(n),assignment:c,listIndex:p,typedRuntimeValue:h,referenceLatex:g};e(y,u)}):e({calcId:n.id,data:s,hidden:Og(n),assignment:c,listIndex:void 0,typedRuntimeValue:o,referenceLatex:c},u)})}function v3(t,e){switch(t.valueType){case __dcg_shared_module_exports__['W']:return{valueType:__dcg_shared_module_exports__['S'],value:t.value[e]};case __dcg_shared_module_exports__['da']:return{valueType:__dcg_shared_module_exports__['ca'],value:t.value[e]};case __dcg_shared_module_exports__['ba']:return{valueType:__dcg_shared_module_exports__['aa'],value:t.value[e]};case __dcg_shared_module_exports__['ja']:return{valueType:__dcg_shared_module_exports__['ia'],value:t.value[e]};case __dcg_shared_module_exports__['ha']:return{valueType:__dcg_shared_module_exports__['ga'],value:t.value[e]};case __dcg_shared_module_exports__['$']:return{valueType:__dcg_shared_module_exports__['_'],value:t.value[e]};case __dcg_shared_module_exports__['fa']:return{valueType:__dcg_shared_module_exports__['ea'],value:t.value[e]};case __dcg_shared_module_exports__['la']:return{valueType:__dcg_shared_module_exports__['ka'],value:t.value[e]};case __dcg_shared_module_exports__['na']:return{valueType:__dcg_shared_module_exports__['ma'],value:t.value[e]};case __dcg_shared_module_exports__['Y']:case __dcg_shared_module_exports__['U']:case __dcg_shared_module_exports__['T']:case __dcg_shared_module_exports__['pa']:case __dcg_shared_module_exports__['V']:case __dcg_shared_module_exports__['Z']:case __dcg_shared_module_exports__['X']:throw new Error("Programming Error: unexpected type "+__dcg_shared_module_exports__['ra'](t.valueType));default:throw t.valueType,new Error("Programming Error: expected a list type but found "+__dcg_shared_module_exports__['ra'](t.valueType))}}function nD(t,e){return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t),{referenceLatex:t.assignment+"\\left["+e+"\\right]",typedRuntimeValue:v3(t.typedRuntimeValue,e),listIndex:e})}function aL(t){if(!t)return;switch(t.typedRuntimeValue.valueType){case __dcg_shared_module_exports__['S']:return"Point";case __dcg_shared_module_exports__['ca']:return"Circle";case __dcg_shared_module_exports__['ea']:return"Arc";case __dcg_shared_module_exports__['_']:return"Polygon";case __dcg_shared_module_exports__['ga']:return"Line";case __dcg_shared_module_exports__['aa']:return"Segment";case __dcg_shared_module_exports__['ia']:return"Ray";case __dcg_shared_module_exports__['ka']:return"Angle";case __dcg_shared_module_exports__['ma']:return"Angle"}}var Qt=__dcg_shared_module_exports__['i'](ne());function ut(t){return{shouldBeFocused:()=>kd(t),onFocusedChanged:e=>{oD(t,e)}}}function kd(t){let e=t.predicate;if(e&&!e())return!1;let r=t.controller.getFocusLocation();return r&&__dcg_shared_module_exports__['E'](r,t.location)}function oD(t,e){let r=t.predicate;r&&!r()||(e?t.controller.dispatch({type:"set-focus-location",location:t.location}):t.controller.dispatch({type:"blur-focus-location",location:t.location}))}var Ai=__dcg_shared_module_exports__['i'](ne());at();function aD(t){return t.find(':input:enabled, [tabindex="0"], a[href]').filter(":visible:not([aria-hidden=true]):not([aria-disabled=true])")}at();function xp(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}var{IfElse:C3,Switch:S3}=Ai.Components,E3=500,Nn=5,sD=class extends Ai.Class{init(){this.latexKey=0,this.uuid=this.props.uuid()}template(){return Ai.createElement("div",{class:()=>({[this.getCustomClassName()]:!0,"dcg-tooltip-positioning-container":!0,"dcg-latex-tooltip-positioning-container":!!this.props.renderAsLatex,"dcg-tooltip-gravity-ne-se":this.props.gravity()==="ne"||this.props.gravity()==="se","dcg-tooltip-gravity-nw-sw":this.props.gravity()==="nw"||this.props.gravity()==="sw","dcg-tooltip-gravity-n-s":this.props.gravity()==="n"||this.props.gravity()==="s","dcg-tooltip-gravity-e-w":this.props.gravity()==="e"||this.props.gravity()==="w"}),style:()=>({top:`${this.props.hitAreaRect().top+(this.props.offset().top||0)}px`,left:`${this.props.hitAreaRect().left+(this.props.offset().left||0)}px`,width:`${this.props.hitAreaRect().width}px`,height:`${this.props.hitAreaRect().height}px`})},Ai.createElement("div",{class:Ai.const("dcg-tooltip-message-container"),style:this.bindFn(this.getMessageStyle)},C3(()=>!!this.props.renderAsLatex,{true:()=>Ai.createElement("div",{role:Ai.const("tooltip"),id:this.const(this.uuid),class:()=>({"dcg-tooltip-message":!0,"dcg-latex":!0,"dcg-sticky-not-stuck":this.props.isStickyAndNotStuck(),"dcg-tooltip-overflow":this.messageOverflows()}),style:()=>({"max-width":`${this.getMaxWidth()}px`}),didMount:e=>{this.tooltipMessage=e}},Ai.createElement(S3,{key:()=>this.latexKey},()=>this.props.renderAsLatex().view(this.props.tooltip()))),false:()=>Ai.createElement("div",{role:Ai.const("tooltip"),id:this.const(this.uuid),class:Ai.const("dcg-tooltip-message"),style:()=>({background:this.getBackgroundColor(),cursor:this.props.isStickyAndNotStuck()?"pointer":"default"})},this.props.tooltip)})),Ai.createElement("div",{class:()=>({"dcg-tooltip-arrow":!0,[`dcg-tooltip-gravity-${this.props.gravity()[0]}`]:!0}),style:()=>this.props.renderAsLatex?this.getArrowWithBorderStyle():this.getSolidArrowStyle()}))}willUpdate(){this.latexKey++}getCustomClassName(){return this.props.class?this.props.class():""}messageOverflows(){return this.tooltipMessage&&this.tooltipMessage.getBoundingClientRect().width>=this.getMaxWidth()}getArrowWithBorderStyle(){let e=this.props.gravity(),r="10px",i=this.getBackgroundColor(),n="#bbb",o=this.props.isStickyAndNotStuck()?".95":"1",a="8px",s={width:a,height:a,border:`1px solid ${n}`,background:i,opacity:o};switch(e){case"s":return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},s),{top:"100%",left:"50%","margin-top":"1px","border-right":"0","border-bottom":"0"});case"sw":return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},s),{top:"100%",right:r,"margin-top":"1px","border-right":"0","border-bottom":"0"});case"se":return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},s),{top:"100%",left:r,"margin-top":"1px","border-right":"0","border-bottom":"0"});case"n":return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},s),{bottom:"100%",left:"50%","margin-bottom":"1px","border-left":"0","border-top":"0"});case"nw":return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},s),{bottom:"100%",right:r,"margin-bottom":"1px","border-left":"0","border-top":"0"});case"ne":return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},s),{bottom:"100%",left:r,"margin-bottom":"1px","border-left":"0","border-top":"0"});case"e":return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},s),{top:"50%",left:"100%","margin-left":"1px","border-right":"0","border-top":"0"});case"w":return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},s),{top:"50%",right:"100%","margin-right":"1px","border-left":"0","border-bottom":"0"});default:return e}}getSolidArrowStyle(){let e=this.props.gravity(),r=`${this.props.hitAreaRect().width/2}px`,i=this.getBackgroundColor(),n=`transparent transparent ${i} transparent`,o=`${i} transparent transparent transparent`,a=`transparent ${i} transparent transparent`,s=`transparent transparent transparent ${i}`,l=`-${Nn}px`;switch(e){case"s":return{top:"100%",left:"50%",border:`${Nn}px solid transparent`,"border-color":n,"margin-top":l,"margin-left":l};case"sw":return{top:"100%",right:r,border:`${Nn}px solid transparent`,"border-color":n,"margin-top":l,"margin-right":l};case"se":return{top:"100%",left:r,border:`${Nn}px solid transparent`,"border-color":n,"margin-top":l,"margin-left":l};case"n":return{bottom:"100%",left:"50%",border:`${Nn}px solid transparent`,"border-color":o,"margin-bottom":l,"margin-left":l};case"nw":return{bottom:"100%",right:r,border:`${Nn}px solid transparent`,"border-color":o,"margin-bottom":l,"margin-right":l};case"ne":return{bottom:"100%",left:r,border:`${Nn}px solid transparent`,"border-color":o,"margin-bottom":l,"margin-left":l};case"e":return{top:"50%",left:"100%",border:`${Nn}px solid transparent`,"border-color":a,"margin-left":`-${Nn}px`,"margin-top":l};case"w":return{top:"50%",right:"100%",border:`${Nn}px solid transparent`,"border-color":s,"margin-right":l,"margin-top":l};default:return e}}getBackgroundColor(){return this.props.renderAsLatex?"#fff":this.props.isStickyAndNotStuck()?"#666":"#000"}getMaxWidth(){let r=this.props.gravity(),i=this.props.hitAreaRect().left+(this.props.offset().left||0),n=i+this.props.hitAreaRect().width,o=.5*this.props.hitAreaRect().width+i,a=5,s=window.innerWidth-5;switch(r){case"se":case"ne":case"e":return s-i;case"sw":case"nw":case"w":return n-a;case"s":case"n":return Math.min(s-o,o-a)*2;default:return r}}getMessageStyle(){let e=this.props.hitAreaRect(),r=this.props.gravity(),i=this.props.maxWidth();switch(r){case"s":return{top:"100%",width:`${i}px`,transform:"translate(-50%, 0)",left:`${.5*e.width}px`,"margin-top":`${Nn}px`,"text-align":"center"};case"sw":return{top:"100%",width:`${i}px`,right:"0","margin-top":`${Nn}px`,"text-align":"right"};case"se":return{top:"100%",width:`${i}px`,"margin-top":`${Nn}px`,"text-align":"left"};case"n":return{bottom:"100%",width:`${i}px`,transform:"translate(-50%, 0)",left:`${.5*e.width}px`,"margin-bottom":`${Nn}px`,"text-align":"center"};case"nw":return{bottom:"100%",right:"0",width:`${i}px`,"margin-bottom":`${Nn}px`,"text-align":"right"};case"ne":return{bottom:"100%",width:`${i}px`,"margin-bottom":`${Nn}px`,"text-align":"left"};case"e":return{transform:"translate(0, -50%)",left:"100%",width:`${i}px`,top:`${.5*e.height}px`,"margin-left":`${Nn}px`,"text-align":"left"};case"w":return{transform:"translate(0, -50%)",right:"100%",width:`${i}px`,top:`${.5*e.height}px`,"margin-right":`${Nn}px`,"text-align":"right"};default:return r}}};function D3(){return document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}var Ue=class extends Ai.Class{init(){this.uuid=`dcg-tooltip-${xp()}`}template(){return Ai.createElement("div",{class:Ai.const("dcg-tooltip-hit-area-container"),handleevent:Ai.const("true"),didMount:e=>{this.isMounted=!0,this.hitAreaNode=e,this.setupEventListeners(this.hitAreaNode)},onTap:()=>{if(this.shouldStickOnTargetClick())if(this.isStuck)this.clearTimeouts(),this.hideTooltip();else{if(this.props.disabled&&this.props.disabled())return;this.showTooltip(),this.stickTooltip()}else if(this.shouldShowOnTapstart()){if(this.props.disabled&&this.props.disabled())return;this.showTooltip(),this.setUpHideOnExternalMousedown()}}},this.children)}shouldShowOnTapstart(){return this.props.showOnTapstart&&this.props.showOnTapstart()}didUpdate(){this.updateTooltip()}updateTooltip(){if(!this.wrapperRef)return;if(!this.props.tooltip()){this.hideTooltip();return}let e=this.hitAreaNode.getBoundingClientRect(),r=this.wrapperRef.elt.getBoundingClientRect(),{originalTop:i,originalLeft:n}=this.wrapperRef,o=e.top-r.top,a=e.left-r.left;Math.abs(o-i)>3||Math.abs(a-n)>3?this.hideTooltip():this.wrapperRef.view.update()}handleShowEvent(e){if(this.props.disabled&&this.props.disabled())return;let r=this.props.delay?this.props.delay():E3;this.clearTimeouts(),this.showTooltipTimeout=setTimeout(e,r)}handleHideEvent(){this.clearTimeouts(),this.hideTooltipTimeout=setTimeout(this.bindFn(this.hideTooltip),150)}setupEventListeners(e){V(e).on("tipsyshow",r=>{r.target===e&&this.handleShowEvent(()=>{this.showTooltip()})}).on("tipsyhide",r=>{r.target!==e||this.isStuck||this.handleHideEvent()})}willUnmount(){this.clearTimeouts(),this.isMounted=!1,this.hideTooltip()}setUpHideOnExternalMousedown(){V(document).on(`mousedown.dcg-tooltip-${this.uuid} touchstart.dcg-tooltip-${this.uuid} pointerdown.dcg-tooltip-${this.uuid}`,e=>{this.wrapperRef&&(V(e.target).closest(this.hitAreaNode).length||V(e.target).closest(this.wrapperRef.elt).length||this.hideTooltip())})}stickTooltip(){this.isMounted&&this.wrapperRef&&(this.isStuck||(this.setUpHideOnExternalMousedown(),this.isStuck=!0,this.updateTooltip()))}clearTimeouts(){clearTimeout(this.showTooltipTimeout),clearTimeout(this.hideTooltipTimeout)}showTooltip(){if(!this.isMounted||this.wrapperRef||!this.props.tooltip())return;let e=this.hitAreaNode.getBoundingClientRect(),r=document.createElement("div");r.className="dcg-tooltip-mount-pt";let i=V(this.hitAreaNode).closest(".dcg-tap-container")[0],n=D3();(!!n&&V(this.hitAreaNode).closest(n).length>0&&V(n).closest(".dcg-tap-container").length>0?n:i).appendChild(r);let a=r.getBoundingClientRect(),s=e.left-a.left,l=e.top-a.top,c=Math.min(200,this.props.maxParentWidthOverflow?e.width+2*this.props.maxParentWidthOverflow():1/0),u={tooltip:this.props.tooltip,class:this.props.class,isStickyAndNotStuck:()=>this.shouldStickOnTargetClick()&&!this.isStuck,offset:()=>this.props.offset?this.props.offset():{},gravity:()=>this.props.gravity?this.props.gravity():"s",renderAsLatex:this.props.renderAsLatex,maxWidth:()=>c,hitAreaRect:()=>({top:l||0,left:s||0,width:e.width||0,height:e.height||0}),uuid:()=>this.uuid};this.setupEventListeners(r),V(r).on("dcg-tap",()=>{this.shouldStickOnTargetClick()&&this.stickTooltip()});let h=Ai.mountToNode(sD,r,u);V(document).on(`keydown.dcg-tooltip-${this.uuid}`,g=>{Le(g)===oo&&this.hideTooltip()});let p=()=>this.updateTooltip();window.addEventListener("scroll",p,!0),this.wrapperRef={elt:r,view:h,originalLeft:s,originalTop:l,onScroll:p},this.assignAriaDescribedBy()}hideTooltip(){this.clearTimeouts(),this.wrapperRef&&(this.isStuck=!1,V(document).off(`.dcg-tooltip-${this.uuid}`),window.removeEventListener("scroll",this.wrapperRef.onScroll,!0),this.restoreAriaDescribedBy(),Ai.unmountFromNode(this.wrapperRef.elt),this.wrapperRef.elt.parentNode&&this.wrapperRef.elt.parentNode.removeChild(this.wrapperRef.elt),this.wrapperRef=void 0)}assignAriaDescribedBy(){let e=aD(V(this.hitAreaNode))[0]||this.hitAreaNode;this.originalDescribedBy=e.getAttribute("aria-describedby"),e.setAttribute("aria-describedby",this.uuid)}restoreAriaDescribedBy(){let e=aD(V(this.hitAreaNode))[0]||this.hitAreaNode;this.originalDescribedBy?e.setAttribute("aria-describedby",this.originalDescribedBy):e.removeAttribute("aria-describedby")}shouldStickOnTargetClick(){return!!this.props.sticky&&this.props.sticky()}};var Nl=__dcg_shared_module_exports__['i'](ne());var lw=class extends Nl.Class{template(){return Nl.createElement("div",{class:Nl.const("dcg-dot-dot-dropdown")},Nl.createElement("span",null),Nl.createElement("span",null),Nl.createElement("span",null))}};var jo=__dcg_shared_module_exports__['i'](ne());var wp=class extends jo.Class{template(){return jo.createElement("span",{class:jo.const("dcg-navigate-back"),onTap:this.props.onBack,"aria-label":this.props.ariaLabel,role:jo.const("button"),tabindex:jo.const("0"),handleEvent:jo.const("true"),manageFocus:this.const(ut({controller:this.props.controller(),location:{type:"geo-header-back-link"}}))},jo.createElement("i",{class:jo.const("dcg-icon-chevron-left"),"aria-hidden":jo.const("true")}),jo.createElement("div",{class:jo.const("dcg-navigate-back-message")},this.props.message))}};var{Switch:k3}=Qt.Components,cw=class extends Qt.Class{init(){this.controller=this.props.controller(),this.focusOrder=[{type:"geo-header-back-link"},{type:"multi-select-delete-icon"},{type:"multi-select-show-hide-icon"},{type:"multi-select-transformations-icon"},{type:"multi-select-more-icon"}]}template(){return Qt.createElement("div",{class:Qt.const("dcg-multi-select-header dcg-animate-in-after-initial-load"),onKeydown:this.bindFn(this.handleKeydown),onTapStart:this.bindFn(this.clearSelection),role:Qt.const("toolbar"),"aria-label":this.bindFn(this.getSelectedCountString)},Qt.createElement(wp,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-geometry-deselect-all"),controller:this.props.controller,message:this.bindFn(this.getSelectedCountString),onBack:this.bindFn(this.onDone)}),Qt.createElement(Ue,{tooltip:this.bindFn(this.getDeleteItemString)},Qt.createElement("span",{"aria-label":this.bindFn(this.getDeleteItemString),role:Qt.const("button"),tabindex:Qt.const("-1"),handleEvent:Qt.const("true"),class:Qt.const("dcg-multi-select-icon-button dcg-delete-btn"),onTap:this.bindFn(this.deleteSelected),manageFocus:this.const(ut({controller:this.controller,location:{type:"multi-select-delete-icon"}}))},Qt.createElement("i",{class:Qt.const("dcg-icon-trashcan"),"aria-hidden":Qt.const("true")}))),Qt.createElement(k3,{key:this.bindFn(this.getSelectedItemsKey)},()=>Qt.createElement("div",{class:()=>({"dcg-btn-outline":!0,"dcg-show-hide-btn":!0,"dcg-any-visible-objects":this.anyVisible()}),handleEvent:Qt.const("true"),tabindex:Qt.const("-1"),role:Qt.const("button"),onTap:this.bindFn(this.toggleItemsVisible),manageFocus:this.const(ut({controller:this.controller,location:{type:"multi-select-show-hide-icon"}}))},Qt.createElement("div",{"aria-hidden":()=>!this.anyVisible()},()=>this.controller.s("graphing-calculator-text-geometry-hide-objects",{count:new Wo(this.getSelectedCount())})),Qt.createElement("div",{"aria-hidden":this.bindFn(this.anyVisible)},()=>this.controller.s("graphing-calculator-text-geometry-show-objects",{count:new Wo(this.getSelectedCount())})))),Qt.createElement("div",{class:()=>({"dcg-btn-outline":!0,"dcg-transformations-button":!0,"dcg-transformations-open":this.isTransformationsMenuOpen()}),handleEvent:Qt.const("true"),tabindex:Qt.const("-1"),role:Qt.const("button"),"dcg-open-menu-guid":()=>tf(),onTap:this.bindFn(this.toggleTransformationsMenu),manageFocus:this.const(ut({controller:this.controller,location:{type:"multi-select-transformations-icon"}}))},this.bindFn(this.getTransformationsString),Qt.createElement("i",{class:Qt.const("dcg-icon-caret-down"),"aria-hidden":Qt.const("true")})),Qt.createElement(Ue,{tooltip:this.bindFn(this.getMoreString)},Qt.createElement("span",{"aria-label":this.bindFn(this.getMoreString),role:Qt.const("button"),tabindex:Qt.const("-1"),handleEvent:Qt.const("true"),"aria-expanded":this.bindFn(this.isMoreMenuOpen),class:Qt.const("dcg-multi-select-icon-button dcg-more-options"),"dcg-open-menu-guid":()=>ef(),manageFocus:this.const(ut({controller:this.controller,location:{type:"multi-select-more-icon"}})),onTap:this.bindFn(this.toggleMoreMenu)},Qt.createElement(lw,null))))}handleKeydown(e){let r=Le(e);if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||r!=="Left"&&r!=="Right"&&r!=="Home"&&r!=="End")return;let i=this.controller.getFocusLocation();if(!i)return;let n=__dcg_shared_module_exports__['y'](this.focusOrder,i);if(n===-1)return;e.preventDefault(),e.stopPropagation();let o=n;r==="Left"?o=Math.max(0,n-1):r==="Right"?o=Math.min(this.focusOrder.length-1,n+1):r==="Home"?o=0:r==="End"&&(o=this.focusOrder.length-1),o!==n&&this.controller.dispatch({type:"set-focus-location",location:this.focusOrder[o]})}getSelectedCountString(){return this.controller.s("graphing-calculator-text-geometry-selected-objects",{count:new Wo(this.getSelectedCount())})}getDeleteItemString(){return this.controller.s("graphing-calculator-text-geometry-delete-selected-objects",{count:new Wo(this.getSelectedCount())})}getMoreString(){return this.controller.s("graphing-calculator-text-geometry-multi-select-more-dropdown")}getTransformationsString(){return this.controller.s("graphing-calculator-text-geometry-multi-select-transform")}getSelectedItemsKey(){let e=this.controller.getAllSelectedItems();return __dcg_shared_module_exports__['q'](e,"id").join("-")}clearSelection(e){e.wasHandled()||this.onDone()}toggleItemsVisible(){this.anyVisible()?this.hideSelected():this.showSelected()}anyVisible(){let e=this.controller.getAllSelectedItems();return __dcg_shared_module_exports__['o'](e,r=>r.shouldGraph)}isFolderMenuOpen(){return this.controller.isItemSettingsMenuOpen(I3())}isMoreMenuOpen(){return this.controller.isItemSettingsMenuOpen(ef())}isTransformationsMenuOpen(){return this.controller.isItemSettingsMenuOpen(tf())}toggleMoreMenu(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"multi-select-more",guid:ef(),focusFirstOption:e.device==="keyboard"}})}toggleTransformationsMenu(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"multi-select-transformations",guid:tf(),focusFirstOption:e.device==="keyboard"}})}getSelectedCount(){return this.controller.getAllSelectedItems().length}hideSelected(){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"visible",value:!1}})}showSelected(){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"visible",value:!0}})}onDone(){this.controller.dispatch({type:"set-none-selected"})}deleteSelected(){this.controller.dispatch({type:"delete-all-selected-items"})}};function I3(){return"**multi-select-folder**"}function ef(){return"**multi-select-more**"}function tf(){return"**multi-select-transformations**"}function rf(t){if(!t)return 0;if(t.type==="image"&&t.listIndex)return t.listIndex;if("poi"in t)return t.poi.pointIdxOnBranch;if("branchInfo"in t&&t.branchInfo.sketch){var e=t.branchInfo.branch,r=t.branchInfo.sketch.branches[e];return"listIndex"in r&&r.listIndex||0}return 0}var G3=0,ol=class{constructor(e,r){this.geoKeyboardPt={x:NaN,y:NaN};this.grapherIsPressed=!1;this.canceledGeoToolplayWhilePressed=!1;this.manager=e,this.controller=e.controller,this.graphSettings=r,this.$=this.manager.$,this.id=G3++,!(!this.graphSettings.config.graphpaper||this.graphSettings.config.disableMouseInteractions)&&(this.addTouchEventHandlers(),this.addHoverEventHandler(),this.addKeydownEventHandler(),this.addManualUnhoverListener(),this.addGeoEventHandlers())}remove(){this.removeAllGlobalMouseListeners(),this.removeManualUnhoverListener(),this.removeAllGeoListeners()}addGlobalMouseListener(e,r){for(var i=e.split(" "),n=0;n<i.length;n++){var o=i[n]+".dcg-poiController-"+this.id;V(document).on(o,r)}}removeAllGeoListeners(){V(document).off(".dcg-poiController-geo-"+this.id)}removeAllGlobalMouseListeners(){V(document).off(".dcg-poiController-"+this.id)}getToleranceByDevice(e){return e==="touch"?20:10}addGeoEventHandlers(){var e="keydown.dcg-poiController-geo-"+this.id,r="keyup.dcg-poiController-geo-"+this.id,i=e+" "+r;V(document).on(i,n=>{this.controller.isGeoToolActive()&&this.handleGeoShiftKeyChange(n.shiftKey)}),V(document).on("mouseleave.dcg-poiController-geo-"+this.id,()=>{if(this.controller.isGeoToolActive()&&!this.grapherIsPressed){let n=this.controller.getGeoModel();n.onMouseAction("move",{pt:{x:NaN,y:NaN},shift:!1,tolerance:0}),n.onPreviewChange()}}),V(document).on("dcg-tapmove.dcg-poiController-geo-"+this.id,n=>{this.controller.isGeoToolActive()&&this.handleGeoTapMove(n)}),V(document).on("dcg-tapend.dcg-poiController-geo-"+this.id,n=>{this.controller.isGeoToolActive()&&this.handleGeoTapEnd(n)})}addHoverEventHandler(){this.$.on("dcg-tapmove",e=>{if(e.device!=="touch"){var r=document.elementFromPoint(e.clientX,e.clientY),i=!!r&&!!V(r).closest(".dcg-grapher").length,n=this.manager.poiLabelsLayer,o=this.getMouseRelativeToGrapher(e),a=this.getToleranceByDevice(e.device);if(!this.controller.isGeoToolActive()){var s;i&&(s=this.getFeatureUnderPoint(o,a));var l;if(s&&s.type==="movable-point"){let I=s.poi,E=I&&I.getMovablePoint();l=E&&E.id}var c,u=0;s&&s.isClickable&&!e.shiftKey&&!this.manager.movablePointsLayer.isMovingPoint()&&!this.manager.traceLayer.isTracing()&&(c=s.model,u=rf(s));var h=this.manager.clickableObjectsLayer,p={};c&&(p[c.id]={listIndexes:u===void 0?void 0:{[u]:!0}}),h.setHoveredObjects(p);var g;s&&"poi"in s&&s.poi&&(!s.poi.isAttachedToPlottedPoint()||s.poi.hasInteractiveLabel())&&(g=s.poi),g!==n.getHoveredPOI()&&(this.controller.isTraceEnabled()?n.setHoveredPOI(g):n.setHoveredPOI(void 0),this.manager.redrawAllLayers());var y=!1;if(s&&s.type==="image"){var w=Js(s.model),b=s.isClickable;y=w&&!b}var D=!1;s&&s.type==="draggable-label"&&(D=!0),y||D?this.manager.setLayerClass("extraMoveCursor","dcg-mouse-over-movable-point"):this.manager.setLayerClass("extraMoveCursor",""),this.manager.movablePointsLayer.setHoveredPointId(l)}}})}addManualUnhoverListener(){var e=()=>{var r=this.manager;r.poiLabelsLayer.setHoveredPOI(void 0),r.clickableObjectsLayer.setHoveredObjects({}),r.redrawAllLayers()};V(window).on("blur.dcg-poiController-"+this.id,e),this.$.on("mouseleave",e)}removeManualUnhoverListener(){V(window).off(".dcg-poiController-"+this.id)}addTouchEventHandlers(){this.$.on("touchstart",e=>{if(!this.isViewportLocked()){V(e.target).is(":not(input, textarea)")&&e.preventDefault();return}var r=this.getMouseRelativeToGrapher(e),i=this.getToleranceByDevice(e.device),n=this.getFeatureUnderPoint(r,i);n&&(n.type==="image"&&!Xs(n.model)&&!Js(n.model)||n.type==="sketch-branch"&&this.graphSettings.config.onlyTraceSelected&&!n.sketch.selected||V(e.target).is(":not(input, textarea)")&&e.preventDefault())}),this.$.on("dcg-tapstart",e=>{if(this.controller.isGeoToolActive()){e.handle(),this.handleGeoTapStart(e);return}var r=this.getMouseRelativeToGrapher(e),i=this.getToleranceByDevice(e.device),n=this.getFeatureUnderPoint(r,i);if(!n){this.isBoxSelectActive(e)||this.controller.dispatch({type:"set-none-selected"}),this.isBoxSelectActive(e)?this.startBoxSelect(e):this.manager.viewportController.beginPanning(e);return}if("sketch"in n&&n.sketch){var o=e.shiftKey?void 0:rf(n),a=this.controller.tryInsertTokenIntoMathquill(n.sketch.id,o);if(a){e.handle(),e.preventDefault();return}}if(n.isClickable&&!this.isBoxSelectActive(e)){let p="model"in n&&n.model;p?this.manager.clickableObjectsLayer.setPressedObject({id:p.id,listIndex:rf(n)}):this.manager.clickableObjectsLayer.setPressedObject(void 0)}else this.manager.clickableObjectsLayer.setPressedObject(void 0);if(n.type==="editable-label"){e.handle();return}else Ur();if(n.type==="draggable-label"){this.startMovingPoints({evt:e,points:[{type:"draggable-label",label:n.label,startScreenPt:r}]}),e.handle();return}if(n.type==="clickable-label"&&e.handle(),n.type==="image"&&Js(n.model)&&!this.isBoxSelectActive(e)){var s=!1;if(n.isClickable&&(s=!0),this.startMovingPoints({evt:e,points:[{type:"image",image:n.model,startScreenPt:r,shouldDelayUntilRealMove:s}]}),!s){e.handle();return}}if(n.type==="movable-point"){this.startMovingPoints({evt:e,points:[{type:"poi",poi:n.poi,startScreenPt:r}]}),e.handle(),e.handle("do-not-clear-poi-labels");return}var l=!1;let c=n.model;if(c&&c.type==="expression"&&c.formula.geometry&&(l=this.startReverseDrag(c.id,e),l&&n.type!=="static-point"&&this.manager.clickableObjectsLayer.setPressedObject({id:c.id,listIndex:rf(n)})),n.type==="static-point"&&(!n.isClickable||this.isBoxSelectActive(e))){let p=n.poi;if(this.controller.isGeometry()){if(p&&p.hasInteractiveLabel()){this._togglePOIUnderPoint(r,i)&&e.handle("do-not-clear-poi-labels");return}}else if(p){this._togglePOIUnderPoint(r,i)&&e.handle("do-not-clear-poi-labels");return}(!n.sketch.selected||this.isBoxSelectActive(e))&&n.model&&this.selectItemIfNotSecret(n.model.id,this.isBoxSelectActive(e));return}if(this._togglePOIUnderPoint(r,i)){e.handle(),e.handle("do-not-clear-poi-labels");return}if(!l&&n.type==="sketch-branch"&&(!n.isClickable||this.isBoxSelectActive(e))){var u=!this.controller.isTraceEnabled();if(this.graphSettings.config.onlyTraceSelected){if(e.handle("do-not-clear-poi-labels"),!u&&n.sketch.selected&&!this.isBoxSelectActive(e)){this.startTracingBranch(n.branchInfo,r),e.handle();return}}else{var h=!this.controller.isListEnabled();if(u&&h||(this.selectItemIfNotSecret(n.sketch.id,this.isBoxSelectActive(e)),u))return;this.startTracingBranch(n.branchInfo,r),e.handle(),e.handle("do-not-clear-poi-labels");return}}this.addGlobalMouseListener("dcg-tapmove",p=>{this.manager.clickableObjectsLayer.isAnObjectPressed()?r=this.getMouseRelativeToGrapher(p):(this.removeAllGlobalMouseListeners(),this.manager.viewportController.beginPanning(p))}),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",p=>{this.removeAllGlobalMouseListeners();var g=this.manager.clickableObjectsLayer.getPressedObject(),y=g&&g.id;this.manager.clickableObjectsLayer.setPressedObject(void 0);var w=this.getFeatureUnderPoint(r,i);if(!l){if(w&&w.isClickable&&!this.isBoxSelectActive(p)){let b="model"in w&&w.model;b&&b.id===y&&!p.wasHandled("dragged-clickable-object")&&this.controller.dispatch({type:"clickable-item-clicked",id:b.id,listIndex:rf(w)});return}if(w&&w.type==="sketch-branch"&&(!w.sketch.selected||this.isBoxSelectActive(p))){this.selectItemIfNotSecret(w.model.id,this.isBoxSelectActive(p));return}if(w&&(w.type==="movable-point"||w.type==="static-point")){(!w.sketch.selected||this.isBoxSelectActive(p))&&w.model&&this.selectItemIfNotSecret(w.model.id,this.isBoxSelectActive(p));return}if(w&&w.type==="image"){this.selectItemIfNotSecret(w.model.id,this.isBoxSelectActive(p));return}}})})}isBoxSelectActive(e){if(!this.controller.isMultiSelectEnabled())return!1;let r=this.controller.getActiveTool();return r==="selection"&&e.shiftKey||r==="box-selection"}isViewportLocked(){return this.graphSettings.config.lockViewport||this.graphSettings.userLockedViewport}addKeydownEventHandler(){this.$.on("keydown",e=>{if(!this.manager.getAudioTrace().getAudioTraceActive()){var r=this.manager.movablePointsLayer.getFocusedPoint(),i=Le(e),n=vi(e);if(i==="Up"||i==="Down"||i==="Left"||i==="Right")e.stopPropagation(),e.preventDefault(),r?this.movePointFromKeyboard(r,e):this.controller.isGeoUIActive()&&this.moveGeoPointFromKeyboard(e);else if(this.controller.isGeoUIActive()){let o,a,s,l,c,u,h=!1;if(e.ctrlKey&&e.shiftKey&&!e.altKey&&!e.metaKey){let p;if(n==="O"?p={type:"multi-select-more",guid:ef(),focusFirstOption:!0,previousFocusLocation:{type:"graph-paper"}}:n==="A"&&(p={type:"multi-select-transformations",guid:tf(),focusFirstOption:!0,previousFocusLocation:{type:"graph-paper"}}),p){e.preventDefault(),e.stopPropagation();let g=this.controller.getGeoModel().getLastFocusedId();this.controller.getActiveTool()!=="box-selection"&&g!==""&&this.controller.getItemModel(g)&&this.controller.dispatch({type:"set-selected-id",id:g}),this.controller.dispatch({type:"toggle-item-settings-menu",menu:p})}}else if(!e.altKey&&!e.ctrlKey&&!e.metaKey)if(i==="Enter"||i==="Space")e.preventDefault(),e.stopPropagation(),this.controller.getActiveTool()==="box-selection"?(this.selectItemIfNotSecret(this.controller.getGeoModel().getLastFocusedId(),!0),this.describeFocusedConstruction(!1)):this.tapGeoPointFromKeyboard(e);else if(n==="?")e.preventDefault(),e.stopPropagation(),this.controller.getGeoModel().speakCurrentGeoToolHint();else if(n==="D")e.preventDefault(),e.stopPropagation(),this.describeFocusedConstruction();else if(i==="Tab"&&this.controller.getActiveTool()!=="selection"){e.preventDefault(),e.stopPropagation();let p=e.shiftKey?"prev":"next";this.focusGeoObjFromKeyboard(p,e)}else if(i==="Backspace"||i==="Del"){e.preventDefault(),e.stopPropagation();let p=this.controller.getGeoModel().getLastFocusedId();this.controller.getActiveTool()!=="box-selection"&&p!==""&&this.controller.getItemModel(p)&&this.controller.dispatch({type:"set-selected-id",id:p}),this.controller.dispatch({type:"delete-all-selected-items"}),h=!0}else if(n==="-")e.preventDefault(),e.stopPropagation(),o=this.controller.getGeoTools(),s=__dcg_shared_module_exports__['y'](o,{key:this.controller.getActiveTool()}),s===-1?s=0:s===0?s=o.length-1:s-=1,a=o[s],a&&(this.controller.dispatch({type:"select-geo-tool",tool:a.key,clearSelection:!0}),h=!0);else if(n==="=")e.preventDefault(),e.stopPropagation(),o=this.controller.getGeoTools(),s=__dcg_shared_module_exports__['y'](o,{key:this.controller.getActiveTool()}),s===-1?s=o.length-1:s===o.length-1?s=0:s+=1,a=o[s],a&&(this.controller.dispatch({type:"select-geo-tool",tool:a.key,clearSelection:!0}),h=!0);else if(n==="["){if(e.preventDefault(),e.stopPropagation(),o=this.controller.getGeoTools(),s=__dcg_shared_module_exports__['y'](o,{key:this.controller.getActiveTool()}),s===-1||(a=o[s],!a)||(l=a.dropdown||[],l.length===0))return;c=l.indexOf(a.key),c===-1?c=0:c===0?c=l.length-1:c-=1,u=l[c],u&&(this.controller.dispatch({type:"select-geo-tool",tool:u,clearSelection:!0}),h=!0)}else if(n==="]"){if(e.preventDefault(),e.stopPropagation(),o=this.controller.getGeoTools(),s=__dcg_shared_module_exports__['y'](o,{key:this.controller.getActiveTool()}),s===-1||(a=o[s],!a)||(l=a.dropdown||[],l.length===0))return;c=l.indexOf(a.key),c===-1?c=l.length-1:c===l.length-1?c=0:c+=1,u=l[c],u&&(this.controller.dispatch({type:"select-geo-tool",tool:u,clearSelection:!0}),h=!0)}else!e.shiftKey&&n!==void 0&&n>="0"&&n<="9"&&(o=this.controller.getGeoTools(),a=o[e.which-49],a&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"select-geo-tool",tool:a.key,clearSelection:!0}),h=!0));h&&this.handleGeoKeyboardPtMove()}else r&&(n==="X"||n==="Y"||n==="L"||n==="C")&&this.speakPoint(r,n)}})}getMouseRelativeToGrapher(e){var r=this.$[0].getBoundingClientRect(),i=e.touches?e.touches[0]:e,n=i.clientX-r.left,o=i.clientY-r.top;return{x:n,y:o}}_getStyledPointRadiusAdjustments(){return{radiusMultiplier:this.graphSettings.getHighlightPropertyMultiplier("pointLineWidth",!1),selectedRadiusMultiplier:this.graphSettings.getHighlightPropertyMultiplier("pointLineWidth",!0),movablePoint:this.graphSettings.config.projectorMode?30/2:22/2}}_getStyledPointRadiusForPOI(e,r){if(e.isMovable())return r.movablePoint;{let i=e.getPointSize()/2,n=e.isSelected()?r.selectedRadiusMultiplier:r.radiusMultiplier;return i*n}}_getDistanceFromStyledPOI(e,r){var i=this._getStyledPointRadiusForPOI(e,r.adjustments),n=Math.max(0,r.tolerance-i),o=r.projection.map_pt(e),a=__dcg_shared_module_exports__['Aa'](o.x-r.screenPt.x,o.y-r.screenPt.y),s=Math.max(0,a-i);if(s<=n)return s}_getClosestPoint(e,r,i){for(var n=1/0,o,a={projection:this.manager.getProjection(),adjustments:this._getStyledPointRadiusAdjustments(),screenPt:r,tolerance:i},s=0;s<e.length;s++){var l=e[s],c=this._getDistanceFromStyledPOI(l,a);c!==void 0&&c<n&&(n=c,o=l)}return o}findIdsThatIntersectBox(e){for(var r={},i=this.manager.getSketchOrder(),n=i.length-1;n>=0;n--){var o=i[n],a=this.controller.getItemModel(o);if(a){if(a.type==="expression"){var s=this.manager.getGraphSketch(o);if(!s)continue;var l=s.branches;if(!l||!l.length)continue;for(let u=0;u<l.length;u++)if(this.doesBoxIntersectBranch(l[u],e)){r[a.id]=!0;break}}else if(a.type==="image"){var c=this.manager.getGraphImage(o);if(!c)continue;ol.doesBoxIntersectAnyImage(c,e)&&(r[a.id]=!0)}}}return this.manager.poiDotsLayer.getDrawnPOI().forEach(function(u){u.isBareLabel()||(u.isMovable()||u.isAttachedToPlottedPoint())&&ol.doesBoxIntersectPOI(u,e)&&(r[u.sketch.id]=!0)}),r}_getStyledLineAdjustments(){return{thicknessMultiplier:this.graphSettings.getHighlightPropertyMultiplier("graphLineWidth",!1),selectedThicknessMultiplier:this.graphSettings.getHighlightPropertyMultiplier("graphLineWidth",!0)}}_getStyledLineThicknessForBranch(e,r,i){var n=Math.max(0,"lineWidth"in e&&e.lineWidth||0)/2;return r?n*i.selectedThicknessMultiplier:n*i.thicknessMultiplier}_getDistanceFromStyledBranch(e,r,i,n){var o=this._getStyledLineThicknessForBranch(e,r,n.adjustments),a=this.calculateDistanceFromBranch(e,n.screenPt,n.projection,i);let s=Math.max(0,a-o),l=Math.max(0,n.tolerance-o);if(s<=l)return s}getFeatureUnderPoint(e,r){var i=this.manager.poiLabelsLayer,n=this.manager.getProjection();if(this.manager.scaleAxis)return;var o=i.getInteractiveLabelUnderPoint(e);if(o)switch(o.type){case"editable":return{type:"editable-label",model:o.model,isClickable:void 0};case"draggable":return{type:"draggable-label",label:o.label,isClickable:void 0};case"clickable":return{type:"clickable-label",model:o.model,poi:o.poi,isClickable:!0}}var a=this.manager.getSketchOrder(),s={},l=1,c;let u={adjustments:this._getStyledLineAdjustments(),projection:n,screenPt:e,tolerance:r};for(var h=a.length-1;h>=0;h--){var p=a[h],g=this.controller.getItemModel(p),y=l;if(s[p]=y,!!g){if(g.type==="expression"){var w=this.manager.getGraphSketch(p);if(!w)continue;var b=w.branches;if(!b||!b.length)continue;if(w.showHighlight&&!this.controller.isGeometry()&&(y=-1/0,s[p]=y),!c||c.stackingContext>=y)for(var D=el(g),I=0;I<b.length;I++){var E=b[I],G=this._getDistanceFromStyledBranch(E,w.showHighlight,D,u);if(G!==void 0){var T=!1;c?(y<c.stackingContext||y===c.stackingContext&&G<c.distance-3.5)&&(T=!0):T=!0,T&&(c={type:"sketch-branch",model:g,sketch:w,distance:G,stackingContext:y,branchInfo:{id:w.id,branch:I,sketch:w}})}}}else if(g.type==="image"){var P=this.manager.getGraphImage(p);if(!P)continue;var _=this.getImageInfoUnderMouse(P,n.pixelsToMath.mapPoint(e),r);if(!_)continue;P.foreground?(l+=1,y=l,s[p]=y,l+=1):(y=1/0,s[p]=y),(!c||c.stackingContext>y)&&(c={type:"image",model:P,distance:0,stackingContext:y,listIndex:_.listIndex})}}}var x=[],L=[],R=[],q=[],K=c?c.stackingContext:1/0;this.manager.poiDotsLayer.getDrawnPOI().forEach($=>{var J;if(!$.isBareLabel())if($.isMovable()){let ue=$.sketch.id,te=this.controller.getItemModel(ue),Ae=te&&te.type==="expression"&&((J=te.formula.geometry)==null?void 0:J.call);Ae&&Ae.symbol==="glider"?x.push($):L.push($)}else $.isAttachedToPlottedPoint()?s[$.sketch.id]<=K&&R.push($):q.push($)});var Y=this._getClosestPoint(x,e,r);if(Y||(Y=this._getClosestPoint(L,e,r)),Y)return{type:"movable-point",poi:Y,isClickable:void 0,sketch:Y.sketch,model:this.controller.getItemModel(Y.sketch.id)};var N=this._getClosestPoint(q,e,r);if(N)return{type:"poi",poi:N,isClickable:!1,model:void 0};var j=this._getClosestPoint(R,e,r);if(j){var B=this.controller.getItemModel(j.sketch.id);if(B&&B.type==="expression"){var A=el(B);if(A)return{type:"static-point",poi:j,sketch:j.sketch,isClickable:!0,model:B}}return{type:"static-point",poi:j,isClickable:!1,sketch:j.sketch,model:B}}if(c){if(c.type==="sketch-branch")return{type:"sketch-branch",branchInfo:c.branchInfo,sketch:c.sketch,model:c.model,isClickable:el(c.model),isSelected:this.controller.isItemSelected(c.sketch.id),selectionId:this.controller.isItemSelectable(c.model.id)?c.model.id:void 0};if(c.type==="image")return{type:"image",model:c.model,isClickable:Pb(c.model),listIndex:c.listIndex,isSelected:this.controller.isItemSelected(c.model.id),selectionId:this.controller.isItemSelectable(c.model.id)?c.model.id:void 0}}}_togglePOIUnderPoint(e,r){if(this.controller.isTraceEnabled()){var i=this.getFeatureUnderPoint(e,r);if(!i||i.isClickable)return!1;var n="poi"in i&&i.poi;return!n||n.isBareLabel()?!1:(this.manager.poiLabelsLayer.isOpenPOI(n)?(this.manager.poiLabelsLayer.closePOI(n),this.manager.poiLabelsLayer.setHoveredPOI(void 0)):(this.manager.poiLabelsLayer.openPOI(n),this.speakPoint(n)),this.manager.redrawAllLayers(),!0)}}getImageInfoUnderMouse(e,r,i){if(e){var n=e.formula;if(n){var o=n.dimensions;if(!(!o.x||!o.y||!o.width||!o.height||!o.radianAngle||!e.shouldGraph))for(var a=o.x.length-1;a>=0;a--){var s=o.x[a],l=o.y[a],c=o.radianAngle[a],u=s+Math.cos(c)*(r.x-s)-Math.sin(c)*(r.y-l),h=l+Math.sin(c)*(r.x-s)+Math.cos(c)*(r.y-l),p=.5*Math.abs(o.width[a]),g=.5*Math.abs(o.height[a]);if(u>s-p&&u<s+p&&h>l-g&&h<l+g)return{listIndex:a}}}}}doesBoxIntersectBranch(e,r){let i=!1,n=!1;switch(e.graphMode){case 5:case 8:case 2:break;case 6:i=!0;break;case 1:n=!0;break;case 18:case 17:case 19:return sw(r,{x1:e.segments[0][0],y1:e.segments[0][1],x2:e.segments[0][2],y2:e.segments[0][3],extendStart:e.graphMode===18,extendEnd:e.graphMode!==17});case 20:return iL(r,{x:e.segments[0][0],y:e.segments[0][1],radius:e.segments[0][2]});case 21:case 23:{let[u,h]=e.segments[0],[p,g,y]=e.graphMode===21?this.getBoxIntersectArgsForArc(e):this.getBoxIntersectArgsForAngleMarker(e),w=(y-g)/2+g;return rL(r,{x0:u+p*Math.cos(g),y0:h+p*Math.sin(g),x1:u+p*Math.cos(w),y1:h+p*Math.sin(w),x2:u+p*Math.cos(y),y2:h+p*Math.sin(y)})}default:return!1}for(var o=e.segments,a=0;a<o.length;a++){var s=o[a];if(i){let u=s;s=[];for(let h=0;h<u.length;h+=2){var l=u[h],c=u[h+1];s.push(c*Math.cos(l),c*Math.sin(l))}}else if(n){let u=s;s=[];for(let h=0;h<u.length;h+=2)s.push(u[h+1],u[h])}if(nL(r,s))return!0}return!1}getBoxIntersectArgsForArc(e){return[e.segments[0][2],e.segments[0][3],e.segments[0][4]]}getBoxIntersectArgsForAngleMarker(e){let r=e.segments[0][3],i=this.manager.getProjection(),n=fp(r,i),o=i.pixelsToMath.dangerouslyGetXScaleFactor(),a=i.pixelsToMath.dangerouslyGetYScaleFactor();return[Math.abs(Math.min(o,a))*n,e.segments[0][2],e.segments[0][2]+r]}static doesBoxIntersectAnyImage(e,r){var i=e.formula;if(i){var n=i.dimensions;if(!(!n.x||!n.y||!n.width||!n.height||!n.radianAngle||!e.shouldGraph)){for(var o=n.x.length-1;o>=0;o--)if(oL(r,{width:n.width[o],height:n.height[o],angle:n.radianAngle[o],center:{x:n.x[o],y:n.y[o]}}))return!0;return!1}}}static doesBoxIntersectPOI(e,r){return r.left<=e.x&&e.x<=r.right&&r.top<=e.y&&e.y<=r.bottom}calculateDistanceFromBranch(e,r,i,n){if(e&&e.graphMode===7&&(n||this.controller.isGeometry())){var o=e.segments;let l=i.pixelsToMath.mapCoordinatePair([r.x,r.y]);for(var a=0;a<o.length;a++)if(__dcg_shared_module_exports__['hb'](o[a],l))return 0;return 1/0}var s=ol.getBranchesDistanceInfo(e,r,i,n,this.controller.isGeometry());return s?s.minDistance:1/0}static getBranchesDistanceInfo(e,r,i,n,o){let a=r.x,s=r.y,{mathToPixels:l,pixelsToMath:c}=i;switch(e.graphMode){case 5:if(!o&&!n)return;break;case 8:if(!n)return;break;case 6:if(!n)return;break;case 2:case 1:break;case 23:{let[De,_e,Me,He]=e.segments[0],Ze=l.dangerouslyGetXScaleFactor(),_t=l.dangerouslyGetYScaleFactor(),[Re,Tt]=c.mapCoordinatePair([a,s]),dr=fp(He,i),ve=dr/Ze,_r=1/0,rt=Tt-_e,xe=Re-De,dn=Math.atan2(rt,xe);if(__dcg_shared_module_exports__['za'](dn,Me,He)){var u=__dcg_shared_module_exports__['Aa'](rt*_t,xe*Ze);u<=dr+7&&(_r=0)}else{let Je=__dcg_shared_module_exports__['Da'](Re,Tt,De+ve*Math.cos(Me),_e+ve*Math.sin(Me),De,_e),ot=__dcg_shared_module_exports__['Da'](Re,Tt,De+ve*Math.cos(Me+He),_e+ve*Math.sin(Me+He),De,_e),st=__dcg_shared_module_exports__['Aa'](Ze*(Je[0]-Re),_t*(Je[1]-Tt)),ae=__dcg_shared_module_exports__['Aa'](Ze*(ot[0]-Re),_t*(ot[1]-Tt));_r=Math.min(st,ae)}return{closestPoint:{x:a,y:s},minDistance:_r,secondDistance:_r}}break;case 18:case 17:case 19:{var h=l.mapX(e.segments[0][0]),p=l.mapY(e.segments[0][1]),g=l.mapX(e.segments[0][2]),y=l.mapY(e.segments[0][3]),w=e.graphMode===18,b=e.graphMode!==17,D=__dcg_shared_module_exports__['Ea'](a,s,h,p,g,y,w,b);if(!D)return null;var I=__dcg_shared_module_exports__['Aa'](D[0]-a,D[1]-s);return{closestPoint:{x:D[0],y:D[1]},minDistance:I,secondDistance:I}}case 21:case 20:{var E=e.segments[0][0],G=e.segments[0][1],T=e.segments[0][2];let De=e.graphMode===21?e.segments[0][3]:0,_e=e.graphMode===21?e.segments[0][4]:Math.PI*2;var P=__dcg_shared_module_exports__['Ga'](c.mapX(a),c.mapY(s),E,G,T,De,_e);if(!P)return null;let Me=l.mapCoordinatePair(P);var _=__dcg_shared_module_exports__['Aa'](Me[0]-a,Me[1]-s);return{closestPoint:{x:Me[0],y:Me[1]},minDistance:_,secondDistance:_}}default:return}for(var x=1/0,L=1/0,R,q,K=0;K<e.segments.length;K++)for(var Y=e.segments[K],N=0;N<Y.length-3;N+=2){var j=Y[N],B=Y[N+1],A=Y[N+2],$=Y[N+3];if(e.graphMode===6){var J=B,ue=j;j=J*Math.cos(ue),B=J*Math.sin(ue);var te=$,Ae=A;A=te*Math.cos(Ae),$=te*Math.sin(Ae)}e.graphMode===1&&([j,B]=[B,j],[A,$]=[$,A]);let[De,_e]=l.mapCoordinatePair([j,B]),[Me,He]=l.mapCoordinatePair([A,$]);var Se=__dcg_shared_module_exports__['Da'](0,0,De-a,_e-s,Me-a,He-s),ce=__dcg_shared_module_exports__['Aa'](Se[0],Se[1]);Se[e.graphMode===1?1:0]<0?ce<x&&(x=ce,R=Se):ce<L&&(L=ce,q=Se)}var Ee=x<L?R:q;if(Ee){var H=Ee[0]+a,he=Ee[1]+s;return{closestPoint:{x:H,y:he},minDistance:Math.min(x,L),secondDistance:Math.max(x,L)}}}static getBranchesTracePoint(e,r,i,n){var o,a=i.pixelsToMath.mapPoint(r);switch(e.graphMode){case 20:case 21:{let L=e.graphMode===21?e.segments[0][3]:0,R=e.graphMode===21?e.segments[0][4]:Math.PI*2;o=__dcg_shared_module_exports__['Ga'](a.x,a.y,e.segments[0][0],e.segments[0][1],e.segments[0][2],L,R);break}case 18:case 19:case 17:o=__dcg_shared_module_exports__['Ea'](a.x,a.y,e.segments[0][0],e.segments[0][1],e.segments[0][2],e.segments[0][3],e.graphMode===18,e.graphMode!==17);break}if(o)return{x:o[0],y:o[1]};if(!e)return;let s="compiled"in e&&e.compiled,l=s&&s.fn;if(!l)return;var c=this.getBranchesDistanceInfo(e,r,i,!1,n);if(!c)return;let{mathToPixels:u,pixelsToMath:h}=i,p,g;e.graphMode===2?(g="x",p="y"):(g="y",p="x",u=new __dcg_shared_module_exports__['jc'](u.yScale,u.xScale),h=u.inverse());var y=c.minDistance/c.secondDistance;y=y*y;var w=c.closestPoint[g]*(1-y)+r[g]*y,b=.5,D=.5,I=u.mapY(l(h.mapX(w-b))),E=u.mapY(l(h.mapX(w))),G=u.mapY(l(h.mapX(w+b))),T=b*Math.min(1,D/Math.abs(I-E)),P=b*Math.min(1,D/Math.abs(G-E));isFinite(T)||(T=b),isFinite(P)||(P=b);let _=mi(h.mapX(w-T),h.mapX(w+P)),x=l(_);if(!isFinite(u.mapY(x))){let L=u.mapX(_)-b,R=u.mapX(_)+b,q=h.mapX(L),K=h.mapX(R),Y=l(q),N=l(K),j=u.mapY(Y),B=u.mapY(N);Math.abs(j-r[p])<Math.abs(B-r[p])?x=Y:x=N}return{x:e.graphMode===2?_:x,y:e.graphMode===2?x:_}}getPointInfo(e){switch(e.type){case"poi":return e.poi.getMovablePoint();case"image":return{sketch:{id:e.image.formula.center_reference_id}};case"draggable-label":return{sketch:{id:e.label.model.id}};default:return e}}startReverseDrag(e,r){let i=this.getMouseRelativeToGrapher(r),n=[e].concat(this.controller.getAllSelectedItems().map(c=>c.id));var o=this.controller.getGeoModel().getComputedBoard().computeReversibilityLineages(n),a=[],s=!1;for(let c in o){var l=this.manager.poiDotsLayer.getDrawnPOI().filter(u=>u.isMovable()?c===u.sketch.id:!1);if(!l||l.length!==1){s=!0;break}a.push({type:"poi",poi:l[0],startScreenPt:i,shouldDelayUntilRealMove:!0,transformations:o[c]})}return s?!1:a.length>0?(this.startMovingPoints({evt:r,points:a}),!0):!1}startMovingPoints(e){var r=e.evt,i=e.points,n=this.isBoxSelectActive(r),o=!1,a=!1,s=i.map(this.getPointInfo),l=this.controller;function c(){n||(a=!0,l.dispatch({type:"start-moving-points",points:s}))}var u=!1;for(var h of i)if(h.shouldDelayUntilRealMove){u=!0;break}u||c();let p=i.filter(b=>b.type==="poi"&&b.poi.isMovable());var g=i.map(b=>{var D;switch(b.type){case"poi":if(D=b.poi,b.transformations){let E=__dcg_shared_module_exports__['Hb'](b.transformations.forward,[D.x,D.y]);D={x:E[0],y:E[1]}}break;case"image":D={x:b.image.formula.dimensions.x[0],y:b.image.formula.dimensions.y[0]};break;case"draggable-label":D={x:b.label.x,y:b.label.y};break}if(b.type==="poi"){let E=b.poi;this.manager.movablePointsLayer.setPressedPointId(E.isMovable()&&p.length===1?E.getMovablePoint().id:void 0)}var I=this.manager.getProjection().map_pt(D);return{x:b.startScreenPt.x-I.x,y:b.startScreenPt.y-I.y}}),y=void 0,w=()=>{if(y&&(o=!0,!n)){a||c();var b=this.manager.getProjection(),D=this.getMouseRelativeToGrapher(y);y=void 0,this.controller.dispatch({type:"on-move-points",points:i.map(this.getPointInfo),screenPts:g.map(function(I){return{x:D.x-I.x,y:D.y-I.y}}),transform:i.map(I=>I.type==="poi"?I.transformations:void 0),previousScreenPts:i.map(I=>I.startScreenPt),projection:b})}};this.manager.registerMovablePointListener(w),this.addGlobalMouseListener("dcg-tapmove",b=>{y=b}),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",b=>{if(w(),this.manager.deregisterMovablePointListener(),this.removeAllGlobalMouseListeners(),this.manager.movablePointsLayer.setPressedPointId(void 0),a&&(b.handle("dragged-clickable-object"),this.controller.dispatch({type:"stop-moving-points",points:i.map(this.getPointInfo)})),!o){var D=this.getMouseRelativeToGrapher(r),I=this.getToleranceByDevice(r.device),E=this.getFeatureUnderPoint(D,I);if(E&&E.type==="movable-point")if(this.controller.isGeometry())(!E.sketch.selected||this.isBoxSelectActive(b))&&E.model&&this.selectItemIfNotSecret(E.model.id,this.isBoxSelectActive(b));else return;else if(E&&E.type==="sketch-branch"){var G=E.model;G&&G.formula.geometry&&(!E.sketch.selected||this.isBoxSelectActive(b))&&this.selectItemIfNotSecret(E.model.id,this.isBoxSelectActive(b))}}})}startTracingBranch(e,r){this.manager.markLabelsDirty(),this.lastScreenPt=r;var i=this.manager.getProjection(),n=e.sketch,o=n.branches[e.branch],a=ol.getBranchesTracePoint(o,r,i,this.controller.isGeometry());a&&this.speakPoint(a),this.manager.traceLayer.setTraceInfo({pt:a,branchInfo:e}),this.manager.redrawAllLayers(),this.addGlobalMouseListener("dcg-tapmove",this.handleTraceUpdate.bind(this)),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",this.stopTracingBranch.bind(this))}stopTracingBranch(e){this.manager.markLabelsDirty();var r=this.manager.poiLabelsLayer.getHoveredPOI();r&&!this.manager.poiLabelsLayer.isOpenPOI(r)&&(this.manager.poiLabelsLayer.openPOI(r),this.speakPoint(r),this.manager.redrawAllLayers()),this.lastScreenPt=void 0,this.manager.traceLayer.setTraceInfo(void 0),this.manager.redrawAllLayers(),this.removeAllGlobalMouseListeners()}handleTraceUpdate(e){if(this.manager.traceLayer.traceInfo){var r=this.manager.getProjection(),i;if(e)i=this.getMouseRelativeToGrapher(e),this.lastScreenPt=i,this.manager.markLabelsDirty();else if(this.lastScreenPt)i=this.lastScreenPt;else return;var n=1/0,o=-1,a=this.manager.traceLayer.traceInfo,s=this.manager.graphSketches[a.branchInfo.sketch.id];if(s){a.branchInfo.sketch=s;for(var l=a.branchInfo.sketch.branches,c=0;c<l.length;c++){var u=this.calculateDistanceFromBranch(l[c],i,r,!1);u<n&&(o=c,n=u)}var h=l[o],p=h?ol.getBranchesTracePoint(h,i,r,this.controller.isGeometry()):void 0;p&&this.speakPoint(p),this.manager.traceLayer.traceInfo.branchInfo.branch=o,this.manager.traceLayer.traceInfo.pt=p,this.manager.redrawAllLayers()}}}hasNonlinearMoveStrategy(e){if(!e||!e.sketch)return!1;var r=this.controller.getItemModel(e.sketch.id);if(!r||r.type!=="expression"||!r.formula)return!1;var i=r.formula.move_strategy;return!i||!i[0]?!1:i[0].type==="updateSliderNonlinear"}movePointFromKeyboard(e,r){if(r&&!(!e||!e.sketch)){var i=this.controller.getItemModel(e.sketch.id);if(!(!i||i.type!=="expression")){var n=e.type==="movable-point"||i.label!==void 0&&i.showLabel&&i.reconciledDragMode!=="NONE";if(n){var o=this.manager.getProjection(),a=o.map_pt({x:e.x,y:e.y}),s=0,l=0,c=Le(r),u=(o.pixelCoordinates.right-o.pixelCoordinates.left)/40,h=(o.pixelCoordinates.bottom-o.pixelCoordinates.top)/40,p=c==="Up"||c==="Down"?h:u;p=r.shiftKey?p*5:p;var g,y;if(c==="Up"?(y="y",l-=p,g=r.shiftKey?"bigup":"up"):c==="Down"?(y="y",l+=p,g=r.shiftKey?"bigdown":"down"):c==="Left"?(y="x",s-=p,g=r.shiftKey?"bigdown":"down"):c==="Right"&&(y="x",s+=p,g=r.shiftKey?"bigup":"up"),g){var w={x:a.x+s,y:a.y+l},b;y==="x"||this.hasNonlinearMoveStrategy(e)?b={x:g}:y==="y"&&(b={y:g}),this.controller.dispatch({type:"on-move-points",points:[e],screenPts:[w],previousScreenPts:[a],projection:o,keyboardDirection:b})}}}}}getGeoKeyboardPt(){return this.initGeoKeyboardPt(),this.geoKeyboardPt}setGeoKeyboardPt(e){this.geoKeyboardPt=e,this.manager.redrawAllLayers()}initGeoKeyboardPt(){if(!isNaN(this.geoKeyboardPt.x)&&!isNaN(this.geoKeyboardPt.y))return;let e=this.manager.getProjection();if(!e)return;let r=e.viewport,i=Cd(e),n=i.minorStepX,o=i.minorStepY,a=Math.round((r.xmin+r.xmax)/2/n)*n,s=Math.round((r.ymin+r.ymax)/2/o)*o;this.setGeoKeyboardPt({x:a,y:s})}moveGeoPointFromKeyboard(e){if(!e)return;this.initGeoKeyboardPt();let r=this.manager.getProjection();if(!r)return;let i=r.viewport,n=Cd(r),o=n.minorStepX/4,a=n.minorStepY/4;var s=this.geoKeyboardPt.x,l=this.geoKeyboardPt.y,c=Le(e);if(c==="Down"?e.ctrlKey?l=i.ymin:l=Math.max(Math.round((l-a)/a)*a,i.ymin):c==="Up"?e.ctrlKey?l=i.ymax:l=Math.min(Math.round((l+a)/a)*a,i.ymax):c==="Left"?e.ctrlKey?s=i.xmin:s=Math.max(Math.round((s-o)/o)*o,i.xmin):c==="Right"&&(e.ctrlKey?s=i.xmax:s=Math.min(Math.round((s+o)/o)*o,i.xmax)),s!==this.geoKeyboardPt.x||l!==this.geoKeyboardPt.y){this.setGeoKeyboardPt({x:s,y:l}),this.handleGeoKeyboardPtMove(e),Ct(Sd(this.controller,this.geoKeyboardPt.x,this.geoKeyboardPt.y,i));let u=this.manager.clickableObjectsLayer.getHoveredObjects(),h="";for(let p in u){let g=this.controller.getItemModel(p);g!==void 0&&(h===""&&this.controller.getGeoModel().setLastFocusedId(g.id),Ct(this.controller.s("graphing-calculator-narration-geometry-near-item",{item:this.controller.getGeoDescription(g,{includeDetails:!1})})))}ge()}}handleGeoKeyboardPtMove(e){this.initGeoKeyboardPt();let r=this.controller.getGeoModel(),i=!!(e&&e.shiftKey);r.onMouseAction("move",{pt:this.geoKeyboardPt,shift:i,tolerance:this.getToleranceByDevice("keyboard")}),r.onPreviewChange()}tapGeoPointFromKeyboard(e){var c;this.initGeoKeyboardPt();let r=this.controller.getGeoModel(),i=this.controller.getActiveTool(),n=r.getCurrentTool(),o=(c=n.getSpec)==null?void 0:c.call(n),a=!!e.shiftKey;var s=r.onMouseAction("release",{pt:this.geoKeyboardPt,shift:a,tolerance:this.getToleranceByDevice("keyboard")}),l=s&&s.committed;l&&this.controller.dispatch({type:"commit-geo-objects",objects:l}),r.onMouseAction("move",{pt:this.geoKeyboardPt,shift:a,tolerance:this.getToleranceByDevice("keyboard")}),r.onPreviewChange(),this.speakReleaseAndUpdate(i,o,l,e)}speakReleaseAndUpdate(e,r,i,n){this.controller.getEvaluator().notifyWhenSynced(()=>{this.speakGeoReleaseAction(e,r,i);let o,a=i&&Object.keys(i)[0];a&&(o=this.controller.getItemModel(a)),o||(o=this.controller.getSelectedItem()),this.updateFocusedGeoId((o==null?void 0:o.id)||"",n,!1)})}speakGeoReleaseAction(e,r,i){var n;if(i!==void 0){let o=Object.keys(i);if(!r)return;let a="";if(e==="point"){for(let s in i){let l=i[s];if(l){if(l.type==="point-reference"){a=this.controller.s("graphing-calculator-text-geometry-tool-point-display-name");break}else if(l.type==="intersection"){a=this.controller.s("graphing-calculator-text-geometry-intersection");break}else if(l.type==="glider"){a=this.controller.s("graphing-calculator-text-geometry-glider");break}}}a===""&&(a=this.controller.s("graphing-calculator-text-geometry-tool-point-display-name"))}else switch((n=r.outputs[0])==null?void 0:n.type){case"arc":a=this.controller.s("graphing-calculator-text-geometry-tool-arc-display-name");break;case"circle":a=this.controller.s("graphing-calculator-text-geometry-tool-circle-display-name");break;case"line":a=this.controller.s("graphing-calculator-text-geometry-tool-line-display-name");break;case"segment":a=this.controller.s("graphing-calculator-text-geometry-tool-segment-display-name");break;case"ray":a=this.controller.s("graphing-calculator-text-geometry-tool-ray-display-name");break;case"parallel":a=this.controller.s("graphing-calculator-text-geometry-tool-parallel-display-name");break;case"perpendicular":a=this.controller.s("graphing-calculator-text-geometry-tool-perpendicular-display-name");break;case"midpoint":a=this.controller.s("graphing-calculator-text-geometry-tool-midpoint-display-name");break;case"polygon":a=this.controller.s("graphing-calculator-text-geometry-tool-polygon-display-name");break;case"angle":a=this.controller.s("graphing-calculator-text-geometry-tool-angle-display-name");break;case"reflection":a=this.controller.s("graphing-calculator-text-geometry-tool-reflection-display-name");break;case"translation":a=this.controller.s("graphing-calculator-text-geometry-tool-translation-display-name");break;case"dilation":a=this.controller.s("graphing-calculator-text-geometry-tool-dilation-display-name");break;case"rotation":a=this.controller.s("graphing-calculator-text-geometry-tool-rotation-display-name");break;default:a=this.controller.s("graphing-calculator-narration-geometry-item-unknown")}o.length===1?ge(this.controller.s("graphing-calculator-narration-geometry-added-object-type",{type:a})):a!=="graphing-calculator-text-geometry-point"?o.length===2?ge(this.controller.s("graphing-calculator-narration-geometry-added-object-type-and-point",{type:a})):ge(this.controller.s("graphing-calculator-narration-geometry-added-object-type-and-points",{type:a,points:o.length-1})):ge(this.controller.s("graphing-calculator-narration-geometry-added-points",{points:o.length}))}else this.controller.getGeoModel().speakCurrentGeoToolHint()}focusGeoObjFromKeyboard(e,r){let i=this.controller.getGeoModel(),n={};Dd(this.controller,(b,D)=>{D||!this.controller.shouldShowAuthorFeatures()&&this.controller.isItemSecret(b.calcId)&&!this.controller.isItemInGeoFolder(b.calcId)||b.typedRuntimeValue.valueType===__dcg_shared_module_exports__['oa']||(n[b.calcId]=b)});let o=this.manager.getSketchOrder().filter(b=>n[b]!==void 0);if(o.length===0)return;let a=this.controller.getActiveTool(),s=a!=="point"&&a!=="box-selection",l=i.getLastFocusedId();if(l===""){if(s){for(let b=0;b<o.length;b++)if(!i.isObjectALockedToolInput(n[o[b]].assignment)&&i.isValidNextInputType(n[o[b]].typedRuntimeValue.valueType)){this.updateFocusedGeoId(o[b],r);return}}e==="next"?this.updateFocusedGeoId(o[0],r):this.updateFocusedGeoId(o[o.length-1],r);return}let c=Math.max(o.indexOf(l),0),u=0,h=0,p=0,g=0;e==="prev"?(h=Math.max(0,c),g=-1,p=0):(h=Math.min(o.length-1,c),g=1,p=o.length-1);let y=!1,w=()=>{for(u=h;u!==p+g;u+=g){let b=n[o[u]];if(b&&b.calcId!==l&&!i.isObjectALockedToolInput(b.assignment)&&(!s||!i.isTemporaryToolOutput(b.assignment)&&i.isValidNextInputType(b.typedRuntimeValue.valueType))){y=!0;return}}};if(w(),y||(e==="prev"?h=o.length-1:h=0,p=c,w()),!y&&!s)return!1;y&&this.updateFocusedGeoId(o[u],r)}updateFocusedGeoId(e,r,i=!0){let n=this.controller.getGeoModel();n.getLastFocusedId()!==e&&(n.setLastFocusedId(e),this.moveGeoKeyboardPtToFocusedItem(i),this.handleGeoKeyboardPtMove(r),i&&this.describeFocusedConstruction())}describeFocusedConstruction(e=!0){let r=this.controller.getGeoModel().getLastFocusedId(),i=this.controller.getItemModel(r);ge(this.controller.getGeoDescription(i,{includeDetails:e}))}moveGeoKeyboardPtToFocusedItem(e=!0){let r=this.controller.getGeoModel().getLastFocusedId(),i=this.controller.getItemModel(r);if(!i){e&&ge(this.controller.s("graphing-calculator-narration-geometry-nothing-selected"));return}if(i.type!=="expression"||!i.latex){e&&ge(this.controller.s("graphing-calculator-narration-geometry-not-a-construction"));return}let n=i.formula.typed_constant_value;if(!n){e&&ge(this.controller.s("graphing-calculator-narration-geometry-not-a-construction"));return}let o=this.manager.getProjection();if(!o)return;let a=o.viewport,s=n.valueType,l=n.value,c=NaN,u=NaN;s===__dcg_shared_module_exports__['S']?(c=l[0],u=l[1]):s===__dcg_shared_module_exports__['ga']||s===__dcg_shared_module_exports__['ia']||s===__dcg_shared_module_exports__['aa']?(c=(l[0][0]+l[1][0])/2,u=(l[0][1]+l[1][1])/2):(c=l[0][0],u=l[0][1]),this.controller.getGeoModel().setObjectHovered({calcId:r,listIndex:void 0}),!isNaN(c)&&!isNaN(u)?(this.setGeoKeyboardPt({x:c,y:u}),e&&ge(this.controller.s("graphing-calculator-narration-geometry-moved-to-coordinates",{x:on(this.controller,c,a),y:an(this.controller,u,a)}))):e&&ge(this.controller.s("graphing-calculator-narration-geometry-unable-to-move"))}speakPoint(e,r){if(e){var i=this.manager.getAudioTrace();if(i){var n=this.manager.getProjection();if(n){var o=n.viewport;switch(r){case"X":ge(on(this.controller,e.x,o));break;case"Y":ge(an(this.controller,e.y,o));break;case"L":"ariaLabel"in e&&e.ariaLabel?ge(e.ariaLabel):ge(this.controller.s("graphing-calculator-narration-poi-graph-point"));break;case"C":"sketch"in e&&ge(wd(this.controller,e.sketch.color))}}}}}selectItemIfNotSecret(e,r){!this.controller.shouldShowAuthorFeatures()&&this.controller.isItemSecret(e)&&!this.controller.isItemInGeoFolder(e)||(!this.controller.isMultiSelectEnabled()||!r?this.controller.dispatch({type:"set-selected-id",id:e}):this.controller.dispatch({type:"toggle-selected-with-multi-select",id:e}))}convertTouchEventToMathPoint(e){let{clientX:r,clientY:i}=e.changedTouches[0],n=this.manager.$[0].getBoundingClientRect();return this.controller.getGeoModel().convertCanvasPixelsToPoint({x:r-n.left,y:i-n.top})}handleGeoTapStart(e){let r=this.controller.getGeoModel();this.grapherIsPressed=!0;let i=!!e.shiftKey,n=this.convertTouchEventToMathPoint(e);this.geoMouse=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},n),{shift:i}),r.onMouseAction("press",{pt:n,shift:i,tolerance:this.getToleranceByDevice(e.device)}),sL(e)?this.handleGeoTapMove(e):(r.onPreviewChange(),this.updateGeoHoveredObjects())}handleGeoShiftKeyChange(e){let r=this.geoMouse;if(!r||r.shift===e)return;r.shift=e;let i=this.controller.getGeoModel();i.onMouseAction("move",{pt:{x:r.x,y:r.y},shift:r.shift,tolerance:this.getToleranceByDevice("mouse")}),i.onPreviewChange()}handleGeoTapMove(e){let r=this.controller.getGeoModel();if(this.isEventWithinInstance(e)||this.grapherIsPressed){let i=this.convertTouchEventToMathPoint(e),n=!!e.shiftKey;this.geoMouse=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},i),{shift:n}),r.onMouseAction("move",{pt:i,shift:n,tolerance:this.getToleranceByDevice(e.device)})}else this.geoMouse=void 0,r.onMouseAction("move",{pt:{x:NaN,y:NaN},shift:!1,tolerance:0});r.onPreviewChange()}handleGeoTapEnd(e){var s;if(!this.grapherIsPressed)return;let r=this.controller.getGeoModel();this.grapherIsPressed=!1,this.geoMouse=void 0;let{committed:i}=this.canceledGeoToolplayWhilePressed?{committed:void 0}:r.onMouseAction("release",{pt:this.convertTouchEventToMathPoint(e),shift:!!e.shiftKey,tolerance:this.getToleranceByDevice(e.device)});this.canceledGeoToolplayWhilePressed=!1,i&&this.controller.dispatch({type:"commit-geo-objects",objects:i}),this.isEventWithinInstance(e)&&sL(e)?this.handleGeoTapMove(e):r.onPreviewChange();let n=this.controller.getActiveTool(),o=r.getCurrentTool(),a=(s=o.getSpec)==null?void 0:s.call(o);this.speakGeoReleaseAction(n,a,i)}isEventWithinInstance(e){return e.target?V(e.target).closest(this.manager.$).length:0}updateGeoHoveredObjects(){let e=this.controller.getGeoModel(),r={};e.getHoveredItems().forEach(i=>{let n;if("tokenId"in i){let o=this.controller.getGeoTokenInfoFromAssignment(__dcg_shared_module_exports__['Va'](i.tokenId));n=o&&o.calcId}else n=i.calcId;if(n!==void 0){let o=r[n];o?i.listIndex===void 0?o.listIndexes=void 0:o.listIndexes!==void 0&&(o.listIndexes[i.listIndex-1]=!0):r[n]={listIndexes:i.listIndex===void 0?void 0:{[i.listIndex-1]:!0}}}}),this.manager.clickableObjectsLayer.setHoveredObjects(r)}cancelGeoToolplay(){this.canceledGeoToolplayWhilePressed=this.grapherIsPressed,this.updateGeoHoveredObjects()}startBoxSelect(e){let r={};this.controller.getAllSelectedItems().forEach(o=>r[o.id]=!0);let i=this.manager.getProjection().reverse_map_pt(this.getMouseRelativeToGrapher(e)),n;this.addGlobalMouseListener("dcg-tapmove",o=>{n=this.manager.getProjection().reverse_map_pt(this.getMouseRelativeToGrapher(o));let a={left:Math.min(i.x,n.x),top:Math.min(i.y,n.y),right:Math.max(i.x,n.x),bottom:Math.max(i.y,n.y)};this.manager.setBoxSelectRectangle(a);let s=this.findIdsThatIntersectBox(a);this.controller.dispatch({type:"set-all-selected-ids",ids:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},r),s)})}),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",o=>{this.removeAllGlobalMouseListeners(),this.manager.setBoxSelectRectangle(void 0),n||this.controller.dispatch({type:"set-none-selected"})})}};function sL(t){return t.device==="mouse"}at();var ds=class{constructor(e=0,r=0,i=1,n=i){this.tx=e,this.ty=r,this.sx=i,this.sy=n}toJSON(){return{tx:this.tx,ty:this.ty,sx:this.sx,sy:this.sy}}compose(e){return new ds(this.sx*e.tx+this.tx,this.sy*e.ty+this.ty,this.sx*e.sx,this.sy*e.sy)}translate(e,r){let i=r===void 0?e.x:r.x-e.x,n=r===void 0?e.y:r.y-e.y;return new ds(this.tx+i,this.ty+n,this.sx,this.sy)}scale(e,r){return ds.scale(e,r).compose(this)}scaleAtPoint(e,r,i=r){return ds.scaleAtPoint(e,r,i).compose(this)}mapX(e){return this.sx*e+this.tx}mapY(e){return this.sy*e+this.ty}mapPoint(e){return{x:this.mapX(e.x),y:this.mapY(e.y)}}mapRect(e){return{left:this.mapX(e.left),right:this.mapX(e.right),bottom:this.mapY(e.bottom),top:this.mapY(e.top)}}},po=ds;po.scale=function(e,r=e){return new ds(0,0,e,r)},po.translate=function(e,r){return new ds().translate(e,r)},po.scaleAtPoint=function(e,r,i=r){return i===void 0&&(i=r),new ds(e.x*(1-r),e.y*(1-i),r,i)},po.fromRects=function(e,r){let i=(r.right-r.left)/(e.right-e.left),n=(r.top-r.bottom)/(e.top-e.bottom);return new ds(r.left-i*e.left,r.bottom-n*e.bottom,i,n)},po.fromJSON=function(e){return new ds(e.tx,e.ty,e.sx,e.sy)};var us=class{constructor(e,r,i){this.screen=e,this.viewport=r,this.settings=i,this.mathCoordinates=__dcg_shared_module_exports__['ic'](r),this.pixelCoordinates=__dcg_shared_module_exports__['hc'](e),this.updateScalePairs()}updateScalePairs(){let{xAxisScale:e,yAxisScale:r}=this.settings;this.mathToPixels=__dcg_shared_module_exports__['jc'].fromRects(this.mathCoordinates,this.pixelCoordinates,{xAxisScale:e,yAxisScale:r}),this.pixelsToMath=this.mathToPixels.inverse()}mapx(e){return this.mathToPixels.mapX(e)}mapy(e){return this.mathToPixels.mapY(e)}reverse_mapx(e){return this.pixelsToMath.mapX(e)}reverse_mapy(e){return this.pixelsToMath.mapY(e)}mapAlongAxis(e,r){switch(r){case"x":return this.mapx(e);case"y":return this.mapy(e);default:{let i=r;throw new Error(`Unknown axis: ${i}`)}}}reverseMapAlongAxis(e,r){switch(r){case"x":return this.reverse_mapx(e);case"y":return this.reverse_mapy(e);default:{let i=r;throw new Error(`Unknown axis: ${i}`)}}}map_pt(e){return this.mathToPixels.mapPoint(e)}map_xy_pairs(e){for(var r=[],i=0;i<e.length;i+=2)r.push(this.mapx(e[i])),r.push(this.mapy(e[i+1]));return r}reverse_map_pt(e){return this.pixelsToMath.mapPoint(e)}coordsAreOnscreen(e,r,i=0){return e>-i&&r>-i&&e<this.screen.width+i&&r<this.screen.height+i}closestPointOnScreen(e){let r=this.pixelCoordinates;return{x:Math.min(Math.max(e.x,r.left),r.right),y:Math.min(Math.max(e.y,r.top),r.bottom)}}};at();var MY=function(){{var t="_*_";V.Event.prototype.wasHandled=function(e){e=e||t;var r=this.originalEvent,i=r&&r.handledBy;if(i&&i[e])return!0;if(e!==t)return!1;var n=V(this.target).closest("[handleEvent]");return n.length&&n[0]!==this.currentTarget?n.attr("handleEvent")!=="false":!1},V.Event.prototype.handle=function(e){e=e||t;var r=this.originalEvent;if(r){var i=r.handledBy;i||(i=r.handledBy={}),i[e]=!0}}}}();at();var lL=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],dw="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],A3=Array.prototype.slice,cD,Bl;if(V.event.fixHooks)for(dD=lL.length;dD;)V.event.fixHooks[lL[--dD]]=V.event.mouseHooks;var dD,pD=V.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var t=dw.length;t;)this.addEventListener(dw[--t],uD,!1);else this.onmousewheel=uD;V.data(this,"mousewheel-line-height",pD.getLineHeight(this)),V.data(this,"mousewheel-page-height",pD.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=dw.length;t;)this.removeEventListener(dw[--t],uD,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(V(t)["offsetParent"in V.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return V(t).height()},settings:{adjustOldDeltas:!0}};V.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}});function uD(t){var e=t||window.event,r=A3.call(arguments,1),i=0,n=0,o=0,a=0;if(t=V.event.fix(e),t.type="mousewheel","detail"in e&&(o=e.detail*-1),"wheelDelta"in e&&(o=e.wheelDelta),"wheelDeltaY"in e&&(o=e.wheelDeltaY),"wheelDeltaX"in e&&(n=e.wheelDeltaX*-1),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(n=o*-1,o=0),i=o===0?n:o,"deltaY"in e&&(o=e.deltaY*-1,i=o),"deltaX"in e&&(n=e.deltaX,o===0&&(i=n*-1)),!(o===0&&n===0)){if(e.deltaMode===1){var s=V.data(this,"mousewheel-line-height");i*=s,o*=s,n*=s}else if(e.deltaMode===2){var l=V.data(this,"mousewheel-page-height");i*=l,o*=l,n*=l}return a=Math.max(Math.abs(o),Math.abs(n)),(!Bl||a<Bl)&&(Bl=a,cL(e,a)&&(Bl/=40)),cL(e,a)&&(i/=40,n/=40,o/=40),i=Math[i>=1?"floor":"ceil"](i/Bl),n=Math[n>=1?"floor":"ceil"](n/Bl),o=Math[o>=1?"floor":"ceil"](o/Bl),t.deltaX=n,t.deltaY=o,t.deltaFactor=Bl,t.deltaMode=0,r.unshift(t,i,n,o),cD&&clearTimeout(cD),cD=setTimeout(V3,200),(V.event.dispatch||V.event.handle).apply(this,r)}}function V3(){Bl=null}function cL(t,e){return pD.settings.adjustOldDeltas&&t.type==="mousewheel"&&e%120===0}function hD(t,e){var r=e.x-t.x,i=e.y-t.y,n=.5*(t.x+e.x),o=.5*(t.y+e.y),a=.5*__dcg_shared_module_exports__['Aa'](r,i);return{center:ps(n,o),radius:a}}function uL(t,e){var r={x:2*t.x-e.x,y:2*t.y-e.y};return hD(e,r)}function pL(t,e){for(var r=[],i=0;i<t.length;i++)r.push(ps(t[i].pageX-e.left,t[i].pageY-e.top));return r}function ps(t,e){return{x:t,y:e}}function hL(t){return ps(.5*(t.left+t.right),.5*(t.bottom+t.top))}var P3=0,uw=class{constructor(e,r){this.s=Pl(()=>this.grapher.settings.config.language);this.grapher=e,this.$=e.$,this.id=P3++,this.controller=r,this.isScalingEnabled=!1,this.mousePt=ps(0,0),this.lastScrollZoom=Date.now(),this.preventScrollZoom=!1,this.addMouseWheelEventHandler(),this.addTouchEventHandler()}remove(){V(window).off(".viewportcontroller-"+this.id)}getViewport(){return this.grapher.getProjection().viewport}getProjection(){return this.grapher.getProjection()}isViewportLocked(){var e=this.getProjection().settings;return e.config.lockViewport||e.userLockedViewport}updateMouse(e){var r=this.$[0].getBoundingClientRect();this.mousePt=ps(e.clientX-r.left,e.clientY-r.top)}updateScaleAxis(){this.isMouseInViewport()&&(this.isMouseNearYAxis()?this.grapher.scaleAxis="y":this.isMouseNearXAxis()?this.grapher.scaleAxis="x":this.grapher.scaleAxis="both"),this.updateCursor(),this.grapher.redrawAllLayers()}updateCursor(){this.$.toggleClass("dcg-scale-horizontal",this.grapher.scaleAxis==="x"),this.$.toggleClass("dcg-scale-vertical",this.grapher.scaleAxis==="y"),this.$.toggleClass("dcg-scale-both",this.grapher.scaleAxis==="both")}isMouseNearOrigin(){var e=this.getProjection(),r=e.mathToPixels.mapPoint(ps(0,0));return Math.abs(this.mousePt.x-r.x)<50&&Math.abs(this.mousePt.y-r.y)<50}isMouseNearXAxis(){var e=this.getProjection(),r=e.pixelCoordinates,i=e.mathToPixels.mapY(0);return i=Math.min(Math.max(r.top,i),r.bottom),Math.abs(this.mousePt.y-i)<40&&e.settings.showXAxis}isMouseNearYAxis(){var e=this.getProjection(),r=e.pixelCoordinates,i=e.mathToPixels.mapX(0);return i=Math.min(Math.max(r.left,i),r.right),Math.abs(this.mousePt.x-i)<40&&e.settings.showYAxis}isMouseInViewport(){var e=this.getProjection(),r=e.mathCoordinates,i=e.pixelsToMath.mapPoint(this.mousePt);return i.x>=r.left&&i.x<=r.right&&i.y>=r.bottom&&i.y<=r.top}getDefaultViewport(){return this.controller.getDefaultStateViewport()||this.grapher.getDefaultViewport()}_setViewportWithoutCancellingAnimation(e){if(e.isValid(this.controller.getAxisScaleSettings())&&!e.equals(this.getViewport())){var i=this.getProjection();this.grapher._setProjection(new us(i.screen,e,i.settings))}}setViewport(e){this.cancelAnimation(),this._setViewportWithoutCancellingAnimation(e)}setScreen(e){var r=this.getProjection();let i=r.settings.squareAxes?r.viewport.squareYAxis(e,r.settings):r.viewport;var n=new us(e,i,r.settings);this.grapher._setProjection(n)}getTransformedViewport(e){let{pixelCoordinates:r,mathCoordinates:i,settings:n}=this.getProjection(),{xAxisScale:o,yAxisScale:a}=n,s=e.mapRect(r);var l=__dcg_shared_module_exports__['jc'].fromRects(i,s,{xAxisScale:o,yAxisScale:a}).inverse().mapRect(r);return new Si(l.left,l.right,l.bottom,l.top)}transformViewport(e){this.setViewport(this.getTransformedViewport(e)),(this.grapher.scaleAxis==="x"||this.grapher.scaleAxis==="y")&&this.controller.markSquareAxesAfterUserEditedViewport()}animateToViewport(e){this.cancelAnimation();let r=this.getProjection(),i=r.viewport,n=r.mathToPixels;var o=0,a,s=l=>{a||(a=l);var c=(l-a)/500;if(o+=c,o<1){this.__animationTimeout=requestAnimationFrame(s);let u=n.interpolateX(i.xmin,e.xmin,o),h=n.interpolateX(i.xmax,e.xmax,o),p=n.interpolateY(i.ymin,e.ymin,o),g=n.interpolateY(i.ymax,e.ymax,o);this._setViewportWithoutCancellingAnimation(new Si(u,h,p,g)),this.grapher.debounceUserRequestedViewportChange()}else this.setViewport(Si.fromObject(e)),this.grapher.debounceUserRequestedViewportChange(),this.controller.markSquareAxesAfterUserEditedViewport()};this.__animationTimeout=requestAnimationFrame(s)}cancelAnimation(){cancelAnimationFrame(this.__animationTimeout)}addMouseWheelEventHandler(){var e=!1,r,i;V(window).on("scroll.viewportcontroller-"+this.id,function(a){e=!0}),V(window).on("mousewheel.viewportcontroller-"+this.id,function(a){r=a.clientX,i=a.clientY}),V(window).on("mousemove.viewportcontroller-"+this.id,function(a){if(e){var s=a.clientX-r,l=a.clientY-i,c=s*s+l*l;c<100||(e=!1)}});var n=0,o=(a,s)=>{var l=Date.now();if(this.preventScrollZoom&&l-this.lastScrollZoom>50&&(this.preventScrollZoom=!1),this.lastScrollZoom=l,!this.preventScrollZoom){var c=this.getProjection();if(!this.isViewportLocked()){var u=c.mathToPixels;if(!e){a.preventDefault(),this.updateMouse(a);var h=u.mapPoint(ps(0,0)),p=this.isMouseNearOrigin()&&s>0?h:this.mousePt;if(!(n>0)){n+=1,requestAnimationFrame(function(){n--}),s=s>0?1:-1;var g=s>0?1.0625:1/1.0625,y=this.grapher.scaleAxis,w=y==="x"||y==="both"||!y?g:1,b=y==="y"||y==="both"||!y?g:1;this.transformViewport(po.scaleAtPoint(p,w,b)),this.grapher.debounceUserRequestedViewportChange()}}}}};this.$.mousewheel(o)}applyPanTouchChanges(e,r){if(!this.isViewportLocked()&&!this.isScalingEnabled){var i=ps(r[0].x-e[0].x,r[0].y-e[0].y);this.transformViewport(po.translate(i)),this.grapher.debounceUserRequestedViewportChange()}}chooseDragScaleCenter(){var e=this.getProjection(),r=e.pixelCoordinates,i=e.mathToPixels.mapX(0),n=e.mathToPixels.mapY(0);return i=Math.min(Math.max(r.left,i),r.right),n=Math.min(Math.max(r.top,n),r.bottom),ps(i,n)}applyScaleTouchChanges(e,r){if(!this.isViewportLocked()){var i=this.grapher.scaleAxis,n,o;if(e.length===2&&r.length===2)n=hD(e[0],e[1]),o=hD(r[0],r[1]);else if(r.length===1){var a=this.chooseDragScaleCenter();n=uL(a,e[0]),o=uL(a,r[0])}else return;var s=o.radius/n.radius,l=i==="y"?1:s,c=i==="x"?1:s,u=po.scaleAtPoint(n.center,l,c).translate(n.center,o.center);this.transformViewport(u),this.grapher.debounceUserRequestedViewportChange()}}addTouchEventHandler(){var e=[],r=!1,i=!0,n=!0,o=g=>{r||this.isViewportLocked()||(this.updateMouse(g),this.isScalingEnabled&&this.updateScaleAxis())};V(window).on("mousemove.viewportcontroller-"+this.id,o),this.beginPanning=g=>{var y=this.getProjection();if(!this.isViewportLocked()&&!r&&g.touches.length===g.changedTouches.length){r=!0,this.grapher.isDragging=!0,this.updateMouse(g);var w=y.mathToPixels.mapPoint(ps(0,0)),b=this.grapher.scaleAxis;(b==="x"||b==="both")&&(i=this.mousePt.x>w.x),(b==="y"||b==="both")&&(n=this.mousePt.y>w.y),this.controller.dispatch({type:"grapher/drag-start"}),V(document).on("dcg-tapmove.graphdrag",h),V(document).on("dcg-tapstart.graphdrag dcg-tapend.graphdrag dcg-tapcancel.graphdrag",p)}};var a=g=>{if(!(g.length<2)){var y=this.grapher.getProjection(),w=y.pixelCoordinates,b=y.mathToPixels.mapX(0),D=y.mathToPixels.mapY(0),I=40;b=Math.min(Math.max(w.left,b),w.right),D=Math.min(Math.max(w.top,D),w.bottom);var E=g[1].x-g[0].x,G=g[1].y-g[0].y;return Math.abs(g[0].x-b)<I&&Math.abs(g[1].x-b)<I&&Math.abs(G)>3*Math.abs(E)&&y.settings.showYAxis?"y":Math.abs(g[0].y-D)<I&&Math.abs(g[1].y-D)<I&&Math.abs(E)>3*Math.abs(G)&&y.settings.showXAxis?"x":"both"}},s=g=>(this.grapher.scaleAxis||(this.grapher.scaleAxis=a(g)),this.grapher.scaleAxis),l=()=>{this.grapher.scaleAxis&&(this.grapher.scaleAxis=void 0,this.grapher.redrawAllLayers(),this.updateCursor())},c=()=>{this.isScalingEnabled=!1,this.preventScrollZoom=!0,l()},u=g=>g.altKey||g.ctrlKey||g.metaKey,h=g=>{if(r&&!this.isViewportLocked()){var y=pL(g.touches,this.$.offset());if(e.length===2&&y.length===2)s(y),this.applyScaleTouchChanges(e,y);else if(e.length===1&&this.isScalingEnabled){this.updateMouse(g);var w=this.grapher.scaleAxis,b=this.getProjection(),D=b.mathToPixels.mapPoint(ps(0,0)),I,E,G=5,T=i?1:-1,P=n?1:-1;if((w==="x"||w==="both")&&(I=this.mousePt.x>D.x+G*T),(w==="y"||w==="both")&&(E=this.mousePt.y>D.y+G*P),w==="x"&&i!==I||w==="y"&&n!==E||w==="both"&&i!==I&&n!==E)return;this.applyScaleTouchChanges(e,y)}else l();e.length===1&&this.applyPanTouchChanges(e,y),this.controller.dispatch({type:"grapher/drag-move"}),e=y}},p=g=>{r&&(this.cancelAnimation(),e=pL(g.touches,this.$.offset()),g.touches.length===0&&(r=!1,this.grapher.isDragging=!1,V(document).off(".graphdrag"),this.grapher.debounceUserRequestedViewportChange(),this.controller.dispatch({type:"grapher/drag-end"})),(g.touches.length===0||g.touches.length===1&&!this.isScalingEnabled)&&l())};V(window).on("keydown.viewportcontroller-"+this.id,g=>{this.controller.isGeoToolActive()||this.isViewportLocked()||(Le(g)===Xh&&!u(g)&&this.shouldAllowShiftScaling()?(this.isScalingEnabled=!0,this.grapher.scaleAxis||this.updateScaleAxis()):c())}),V(window).on("keyup.viewportcontroller-"+this.id+" blur.viewportcontroller-"+this.id,c)}shouldAllowShiftScaling(){return!this.controller.isGeometry()}zoom(e){var r=this.getProjection().pixelCoordinates;if(e==="in")this.animateToViewport(this.getTransformedViewport(po.scaleAtPoint(hL(r),2))),ge(this.s("graphing-calculator-narration-viewport-zoom-in"));else if(e==="out")this.animateToViewport(this.getTransformedViewport(po.scaleAtPoint(hL(r),.5))),ge(this.s("graphing-calculator-narration-viewport-zoom-out"));else if(e==="square"){var i=this.getSquareViewport();this.getProjection().settings.setProperty("squareAxes",!0),this.animateToViewport(i),ge(this.s("graphing-calculator-narration-viewport-zoom-square"))}}zoomCustom(e){this.animateToViewport(e),ge(this.s("graphing-calculator-narration-viewport-updated"))}setDefaultViewport(){let e=this.controller.getDefaultAxisScaleSettings();this.controller.getGraphSettings().setProperty("xAxisScale",e.xAxisScale),this.controller.getGraphSettings().setProperty("yAxisScale",e.yAxisScale),this.grapher.getProjection().updateScalePairs();let r=this.getDefaultViewport();this.animateToViewport(r),ge(this.s("graphing-calculator-narration-viewport-default"))}isDefaultViewportRestored(){let e=this.getProjection(),{xAxisScale:r,yAxisScale:i}=e.settings,n=r==="linear",o=i==="linear";if(!this.controller.hasDefaultState()&&(!n||!o||!e.settings.squareAxes))return!1;let a=e.viewport,s=this.getDefaultViewport(),l=n?a.xmax-a.xmin:Math.log(a.xmax/a.xmin),c=o?a.ymax-a.ymin:Math.log(a.ymax/a.ymin),u=n?a.xmin-s.xmin:Math.log(a.xmin/s.xmin),h=n?a.xmax-s.xmax:Math.log(a.xmax/s.xmax),p=o?a.ymin-s.ymin:Math.log(a.ymin/s.ymin),g=o?a.ymax-s.ymax:Math.log(a.ymax/s.ymax),y=.025;return Math.abs(u/l)<y&&Math.abs(h/l)<y&&Math.abs(p/c)<y&&Math.abs(g/c)<y}getSquareViewport(){let e=this.getProjection();return e.settings.lastChangedAxis==="y"?e.viewport.squareXAxis(e.screen,e.settings):e.viewport.squareYAxis(e.screen,e.settings)}};var Fc=__dcg_shared_module_exports__['i'](ne());at();var Ac=class{constructor(e,r){this.width=e,this.height=r}};var O3=1,Kl=class{constructor(e,r,i,n,o,a,s){this.x=e,this.y=r,this.type=i,this.sketch=n,this.branch=o,this.pointIdxOnBranch=a,this.bareLabel=s===void 0?!1:s,this.id=O3++}getLabel(){let e=this.sketch&&this.sketch.branches[this.branch];return e&&"labels"in e&&e.labels&&e.labels[this.pointIdxOnBranch]||""}getGraphMode(){return this.sketch.branches[this.branch].graphMode}getCompiledFunction(){let e=this.sketch.branches[this.branch];if(!(!("compiled"in e)||!e.compiled))return e.compiled.fn}isAttachedToPlottedPoint(){return this.type===1006||this.type===1008}isMovable(){return this.getGraphMode()===4}isPersistent(){return this.type===1008}getLabelSize(){let e=this.sketch&&this.sketch.branches[this.branch];return this.type===1008&&e&&"labelSize"in e?e.labelSize===void 0?1:e.labelSize:1}getLabelRotation(){let e=this.sketch&&this.sketch.branches[this.branch];return this.type===1008&&e&&"labelAngle"in e?e.labelAngle===void 0?0:e.labelAngle:0}getPointOpacity(){let e=this.sketch&&this.sketch.branches[this.branch];if(e&&"pointOpacity"in e){let r=e.pointOpacity;if(r!==void 0){let i;return Array.isArray(r)?i=r[this.pointIdxOnBranch]:i=r,isFinite(i)?Math.max(0,Math.min(1,i)):.9}}return this.isMovable()?1:.9}getPointSize(){let e=this.sketch&&this.sketch.branches[this.branch];if(this.isMovable())return 22;if(e&&"pointSize"in e){let r=e.pointSize;if(r!==void 0){let i;return Array.isArray(r)?i=r[this.pointIdxOnBranch]:i=r,isFinite(i)?Math.max(0,i):9}}return 9}getTextOutline(){if(this.hasEditableLabel())return!1;let e=this.sketch&&this.sketch.branches[this.branch];return this.type===1008&&e&&"suppressTextOutline"in e?!e.suppressTextOutline:!0}hasInteractiveLabel(){let e=this.sketch&&this.sketch.branches[this.branch];return e&&"interactiveLabel"in e?!!e.interactiveLabel:!1}hasEditableLabel(){let e=this.sketch&&this.sketch.branches[this.branch];return e&&"editableLabel"in e?!!e.editableLabel:!1}isBareLabel(){return this.bareLabel}getMovablePoint(){return this.sketch.getMovablePointByIndex(this.pointIdxOnBranch)}isSelected(){return this.sketch.showHighlight}};var pw=class{constructor(e,r){this.color="#000000",this.style="normal",this.showPOI=!1,this.showHighlight=!1,this.selected=!1,this.tokenHovered=!1,this.tokenSelected=!1,this.labels=[],this.id=e,this.branches=r!==void 0?r:[],this.getPOI().forEach(i=>{i.type===1008&&this.labels.push({type:"poi",poi:i})}),r.forEach((i,n)=>{if(i.graphMode===22){if(i.objectType===17){let o=new Kl(0,0,1008,this,n,0,!1);this.labels.push({id:"label-"+e+"-"+(i.listIndex||0),type:"segment",poi:o,segments:i.segments[0],text:i.labels&&i.labels[0]||""})}else if(i.objectType===16){let o=new Kl(0,0,1008,this,n,0,!1);this.labels.push({id:"label-"+e+"-"+(i.listIndex||0),type:"polygon",poi:o,segments:i.segments[0],text:i.labels&&i.labels[0]||""})}else if(i.objectType===23){let o=new Kl(0,0,1008,this,n,0,!1);this.labels.push({id:"label-"+e+"-"+(i.listIndex||0),type:"angle",poi:o,segments:i.segments[0],text:i.labels&&i.labels[0]||""})}}})}getPOI(){if(this.__cachedPOI)return this.__cachedPOI;this.__cachedPOI=[],this.__cachedPOIIds={};for(let e=0;e<this.branches.length;e++){let r=this.branches[e];if(r.graphMode===1||r.graphMode===2){let i=r.poi;i.zeros&&this._pushPOI(i.zeros,e,1002),i.intercept&&this._pushPOI(i.intercept,e,1003),i.extrema&&this._pushPOI(i.extrema,e,1004),i.intersections&&this._pushPOI(i.intersections,e,1001)}else if(r.graphMode===3||r.graphMode===4){let i=r.poi,n=r.graphMode===3&&r.interactiveLabel===!0;if(r.showLabel===!0||n){let o=r.nakedLabel;i.defined&&this._pushPOI(i.defined,e,1008,o)}else i.defined&&this._pushPOI(i.defined,e,1006)}}return this.__cachedPOI}getBranchPOI(e){return this.getPOI().filter(r=>r.branch===e)}getMovablePoints(){if(this.__cachedMovablePoints)return this.__cachedMovablePoints;this.__cachedMovablePoints=[];let e=this.branches[0];if(e&&e.segments.length===1&&e.graphMode===4){let r=e.segments[0];for(let i=0;i<r.length;i++){let n;e.tableId&&(n={tableId:e.tableId,columnId:this.id,rowIndex:e.movablePointInfo[i].index,dragX:e.movablePointInfo[i].dragX,dragY:e.movablePointInfo[i].dragY});let o=e.scaleFactors?e.scaleFactors[0][i]:void 0,a=n?n.rowIndex:i,s=e.segments.length===1&&e.labels&&e.labels[i]?e.labels[i]:void 0,l=e.hasOwnProperty("pointOpacity")?e.pointOpacity:1;this.__cachedMovablePoints.push({type:"movable-point",id:"movable:["+this.id+","+a+"]",sketch:this,color:this.color,pointOpacity:l,tableInfo:n,scaleFactor:o,x:r[i][0],y:r[i][1],label:s,ariaLabel:s&&uo(s)})}}return this.__cachedMovablePoints}getMovablePointByIndex(e){return this.getMovablePoints()[e]}getStaticLabeledPoints(){if(this.__cachedStaticLabeledPoints)return this.__cachedStaticLabeledPoints;let e=this.branches[0];return this.__cachedStaticLabeledPoints=[],this.getPOI().forEach(r=>{if(r.type!==1006&&r.type!==1008||e.graphMode!==3)return;var i=e.showLabel;let n=r.getLabel();!i&&n===""||this.__cachedStaticLabeledPoints.push({type:"static-labeled-point",id:"static["+this.id+","+r.id+"]",x:r.x,y:r.y,sketch:r.sketch,label:n,ariaLabel:n!==""?uo(n):void 0})}),this.__cachedStaticLabeledPoints}_pushPOI(e,r,i,n=!1){for(let o=0,a=e.x.length;o<a;o++){let s=new Kl(e.x[o],e.y[o],i,this,r,o,n);e.intersects&&(s.intersects=e.intersects[o]),this.__cachedPOI.push(s),this.__cachedPOIIds[s.id]=s}}updateIntersections(e){for(let i=0,n=this.branches.length;i<n;i++){let o=this.branches[i];o.graphMode!==15&&o.graphMode!==22&&(o.poi.intersections=e[i])}let r=this.__cachedPOI;this.__cachedPOI=[],r.forEach(i=>{i.type!==1001?this.__cachedPOI.push(i):delete this.__cachedPOIIds[i.id]});for(let i=0;i<this.branches.length;i++){let n=this.branches[i];if(n.graphMode===1||n.graphMode===2){let o=n.poi;o.intersections&&this._pushPOI(o.intersections,i,1001)}}}getPOIById(e){return this.__cachedPOIIds[e]}updateFrom(e){if(!e)return;this.showPOI=e.showPOI,this.showHighlight=e.showHighlight,this.selected=e.selected,this.tokenSelected=e.tokenSelected,this.tokenHovered=e.tokenHovered;let r=this.branches[0].graphMode;if(r===3||r===4){let i=!0;for(let n=0;n<this.__cachedPOI.length;n++){let o=e.__cachedPOI[n],a=this.__cachedPOI[n];if(!o||o.type!==a.type){i=!1;break}}if(i)for(let n=0;n<this.__cachedPOI.length;n++){let o=e.__cachedPOI[n],a=this.__cachedPOI[n];delete this.__cachedPOIIds[a.id],this.__cachedPOIIds[o.id]=a,a.id=o.id}}}};var F3={};__dcg_shared_module_exports__['h'](F3,{default:()=>gD});var gD=__dcg_shared_module_exports__['j']("//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAIAAAHVwAgICAgICAgICAgICBAQEBAQEBAQEBAQEBgYGBgYGBgYGBgYGBggICAgICAgICAgICAoKCgoKCgoKCgoKCgoMDAwMDAwMDAwMDAwODg4ODg4ODg4ODg4OD///////////////8AAAA5TEFNRTMuOThyAaUAAAAALmcAABRAJAiwQgAAQAAAB1cctrbdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAjsKyK0YYABp52xtx8wAgAgBd34IAhAgnsECEe7QIAAgsPxACDgcBAEHQfD/g+D4PggCAIf///ghLny4Pg+D5+sHz/wf+XPwfB8H3iMHwfwffUCYPvz/Y7Hg/H4/H4/H4HAwADcoDwAP7XfuAFtXrhzjsjOXP8iCYM4IBVoH2DGAhQR2hm5vikA2IVEPX9nQaITi6IiLCKX/fxcg/DdGmS5BP7fIGQ0hw7DQi5Q//8midImXygdJ0tlz/1NAgXIANV6MA2Vy2y27jv/+1LEBIALOHOTvGGAMXWhbnTxGZ+LOa2FNMsDtj9/jUmPqqqARrNvlVjDDoGZqq0T11A0DVqeEnlQk8q4sVEp0FcqdxLoEJ0RPYWvIlQkbGA0Anw6VJJgqRKw1NJaAXkR4ag0/FwCCABbbdbJA0fzVgdvgvu5Px6Rwiv3VllZVDREqmWntLyBDka3sz951iTve+ddHP0/M3P/+ydU4zbqOZOeop5jfu1kwk8VezPeGc1hRMbWrJNv6SO/fH0Mc15KYvKqAAAAdrdsrbBDuBpp4v/7UsQGgguVE2ekjNP5aSBo6YSNgKAQUoCZEBJK8q73G/nhJFFmLY5dNc4b7gjBRyEs5yjJokY9TBoU/pXQBglyNjeiA87V8vkzaw019YTu2fxY0t6gteLMI37f9fYw7UVnWoE4NJOSpQBu3GfVAIVACgw+IikZZAnB7UKlLGnha4PDbIhsBhk4RYmlE2hYZ8NrQ5HnyEUvZxDyVG1hM33ZZH0OlrJV5///3/51qTGtJgxhREVLEfoO1w6686eRAAAAUicksbA1qegZCe2AuEgJ//tSxAkCDF0XSaw8ailyn+l1h4w1BvVY04S56fYY5nGkBZHMGLBjHDUMlORG4wcCT9R6RB+3vM8jVMU1hmlOoXIOMKqotE2HxWYNJq/7EZ2l63NJ+Z2aTA4Yq+7t0PhOxCz9WP1mA3DJZZGDkRfq+qFAGwhwHUAVqBfDiMUlypaMWApR1VoWLChfUpJzkBDMCTf85UZr6jyHa1psZnTS5iKatTVKcX/Ker9zMvM1T0okGyiQcreJbU1tc+Yj/ms3395FBIADkjlkjbAZNdiwgRD/+1LEBwAL8Tdbp6Rh+XmT6XWHjCx5U4sTCtlUidNtS9I7oUx7oxdIZlOghkIQYzB0vxtMs6QgCg4WMVakQMM5HRfrsdIEftM0yfOHnNGkiPRMoWCKSsxsChat8/vYw4c4t+CMMB5AAAAXZrftWiEVdbSgnURZoWvK2KhK9GfCkIGnQKxIqbYJ0JCNFJ3St1wuUNRLW4Kw5VhLVGrmgYKhhRe1qzzC7SqFFyjJlIqXcPD6gw//epZ9bwQFw+s+rdVAFtzl0AAAA3I3JK0QJxtCHv/7UsQGAApAM0WssGFpSCKqNYMMvgZph6CwIhKEt0yEiMwFKpnDBBajVc5jbTM7KayRt3I43h8Ag05kd9AtqO0bItmf/+Aevzf7dx28sK0hvP//3/izNwf1pfEAgANutuOJACSqWvuW+SKNLQSpOQKsrX3XxnZxy2Rus0Q1irPy9Mkg4kZGJFRQUax4R+jsACwavqYd2bmRX/6VnKrLk2Z2VGYwQNCIEasJh7/oBScAAMtBNgBWssKw0uCAgKkVpJirpZyBklUCwqaSIkW6BgIY//tSxBIDSYw3Km0kSoEzi9KAliSw9QNAydBqoFQVEQNBwiJYiBWdDqxiwVBUGqg6JgaBoGj3//////huVcFQsIRoPjBXLBGA8AkCwOhcD4KAmFAtEYcR6E8gD2OAXJ2N//uSJVZVJNRdh0gkLCwuKioqz4sLC3//////4sLC31ioqKpAoqKirOgFqkxBTUUzLjk4LjKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+1LEIwPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==");xc();var gL=.075,fD=.0015,N3=125,B3=330,K3=2e3,yD=class{suspend(){return new Promise((e,r)=>{if(this.audioContext)this.audioContext.suspend().then(()=>{e()}).catch(i=>{ao(i),r(i)});else{e();return}})}getResumedAudioContext(){return new Promise((e,r)=>{if(!this.audioContext){let i=window.AudioContext||window.webkitAudioContext;if(!i){r();return}try{this.audioContext=new i({latencyHint:"interactive",sampleRate:44100})}catch(n){ao(n),r(n)}}this.audioContext&&(this.audioContext.state==="running"?this.loadPOI().then(()=>{e({audioContext:this.audioContext,poiBuffer:this.poiBuffer})}):this.audioContext.resume().then(()=>this.loadPOI()).then(()=>{e({audioContext:this.audioContext,poiBuffer:this.poiBuffer})}).catch(i=>{ao(i),r(i)}))})}loadPOI(){return new Promise((e,r)=>{if(!this.audioContext){r();return}if(this.poiBuffer){e();return}this.audioContext.decodeAudioData(gD.buffer.slice(0)).then(i=>{this.poiBuffer=i,e()}).catch(i=>{ao(i),r()})})}},of=class{constructor({controller:e,audioPointMove:r,animationFinished:i,audioEnabled:n}){this.controller=e,this.audioSpeed=50,this.audioVolume=.5,this.audioPointMove=r,this.animationFinished=i,this.audioEnabled=n,this.audioContextManager=new yD}releaseAudio(){this.playbackSupported&&(this.stop(),this.audioContextManager.suspend())}prepareAudio(){this.audioContextManager.getResumedAudioContext().then(()=>{this.playbackSupported=!0}).catch(()=>{this.playbackSupported=!1})}stop(){this.playTimeout&&(cancelAnimationFrame(this.playTimeout),this.playTimeout=void 0),this.bufferSource&&(this.bufferSource.stop(),this.bufferSource.disconnect(),this.bufferSource=void 0),this.animationFinished()}isAnimating(){return this.playTimeout!==void 0}getAudioSpeed(){return this.audioSpeed}setAudioSpeed(e){this.audioSpeed=e}getAudioVolume(){return this.audioVolume}setAudioVolume(e){this.audioVolume=e,this.gainMaster!==void 0&&(this.gainMaster.gain.value=this.audioVolume)}getPlaybackSupported(){return this.playbackSupported}playBranchByIndex(e,r,i){!this.audioEnabled()||r<0||r>=e.branches.length||this.isAnimating()||hs(e.branches[r])&&this.playBranch(e.branches[r],r,i).then(()=>{this.stop()})}playSketch(e,r){if(!this.audioEnabled())return;let i=e.branches;if(i.length===0)return;let n=-1,o=()=>{for(n+=1;n<i.length&&!hs(i[n]);)n+=1;n<i.length?this.playBranch(i[n],n,r).then(()=>{o()}):this.stop()};o()}playPoint(e,r){!this.audioEnabled()||!q3(e)||this.audioContextManager.getResumedAudioContext().then(i=>{let{audioContext:n,poiBuffer:o}=i,a=n.sampleRate,s=a*gL,l=n.createBuffer(2,s,a);W3(l,e,r,o),this.connectBuffer(l,n)})}connectBuffer(e,r){if(!this.audioEnabled()||!r)return;this.gainMaster=r.createGain(),this.gainMaster.connect(r.destination),this.gainMaster.gain.value=this.audioVolume;let i=r.createBufferSource();this.bufferSource=i,i.buffer=e,i.connect(this.gainMaster),i.start()}playBranch(e,r,i){return new Promise((n,o)=>{if(!this.audioEnabled()){o();return}this.audioContextManager.getResumedAudioContext().then(a=>{let{audioContext:s,poiBuffer:l}=a,c=this.audioSpeed/10,u=(i.xmax-i.xmin)*(gL/c),h=Y3(e,i,u);if(!h.segments.length){o();return}let p=xD(i,h.graphMode),{independentMin:g,independentMax:y}=vL(h),w=s.sampleRate,b=c*(y-g)/(p.independentMax-p.independentMin),D=Math.floor(w*b),I=s.createBuffer(2,D,w);z3(I,h,i,l),this.connectBuffer(I,s);let E=s.currentTime,G=()=>{if(this.playTimeout!==void 0&&cancelAnimationFrame(this.playTimeout),s.state!=="running"){o();return}let P=s.currentTime-E,_=(b-P)/b*g+P/b*y;if(this.audioPointMove(r,_),P<b)this.playTimeout=requestAnimationFrame(G);else{n();return}};G(),this.controller.dispatch({type:"render"})}).catch(()=>{o()})})}};function yL(){return{amplitude:0,phase:0,noiseVal:0,lowerOctaveGain:0,upperOctaveGain:0}}function bD(t,e,r){if(t===1)return{left:1,right:1};let{independentMin:i,independentMax:n}=r,o=Math.abs((e-i)/(n-i));return isFinite(o)||(o=.5),o=Math.max(Math.min(o,1),0),{left:Math.cos(Math.PI/2*o),right:Math.sin(Math.PI/2*o)}}function bL(t,{independent:e,dependent:r},i,n,o){let{phase:a,noiseVal:s,lowerOctaveGain:l,upperOctaveGain:c}=t,{dependentMin:u,dependentMax:h}=i,p=0,g=0,y=0;if(!isNaN(r)&&u<=r&&r<=h){let w=U3((r-u)/(h-u));a+=w/n,o<4*fD?(g=0,y=0):(g=.5,y=e>=0?.15:0),r<0&&(s=mL(s),p+=.1*s)}else s=mL(s),p+=.04*s;return l+=(g-l)/(n*fD),c+=(y-c)/(n*fD),p+=l*fL(a)+c*fL(2*a),{amplitude:p,phase:a,noiseVal:s,lowerOctaveGain:l,upperOctaveGain:c}}function U3(t){return Math.min(Math.max(B3*Math.pow(2,t),N3),K3)}function fL(t){return .8782*(mD(t)+.25*mD(2*t)+.25*mD(3*t))}function mD(t){return Math.sin(2*Math.PI*t)}function mL(t){let e=Math.random()*2-1;return(t+.2*e)/1.02}function xL(t,e,r,i){let n=t.getChannelData(0),o=e.getChannelData(0),a=e.getChannelData(1);for(let s=0;s<n.length&&s+r<o.length;s++)o[s+r]+=n[s]*i.left,a[s+r]+=n[s]*i.right}function Va(t,e){if(t.isGeoUIActive()&&t.getAllToolPreviewItems().filter(i=>i.id===e.id).length>0)return!1;for(let r of e.branches)if(hs(r))return!0;return!1}function hs(t){switch(t.graphMode){case 1:case 2:case 3:case 4:return t.segments.length>0;default:return!1}}function wL(t){for(let e=0;e<t.branches.length;e++)if(hs(t.branches[e]))return e;return 0}function af(t,e){let r=0;for(let i=0;i<=e;i++)hs(t.branches[i])&&(r+=1);return r}function q3(t){switch(t.graphMode){case 1:case 2:case 3:case 4:return!0;default:return!1}}function xD(t,e){switch(e){case 2:case 3:case 4:return{independentMin:t.xmin,independentMax:t.xmax,dependentMin:t.ymin,dependentMax:t.ymax};case 1:return{independentMin:t.ymin,independentMax:t.ymax,dependentMin:t.xmin,dependentMax:t.xmax};default:throw wD(e)}}function vL(t){let e=t.segments[0],r=t.segments[t.segments.length-1];return{independentMin:e[0],independentMax:r[r.length-2]}}function H3(t){switch(t.graphMode){case 2:case 3:case 4:return{independent:t.x,dependent:t.y};case 1:return{independent:t.y,dependent:t.x};default:throw wD(t.graphMode)}}function $3(t,e){if(t===1)return e.y;if(t===2)return e.x;throw wD(t)}function wD(t){return`Unexpected graph mode. Received ${t}`}function z3(t,e,r,i){let n=t.sampleRate,o=t.getChannelData(0),a=t.getChannelData(1),s=e.graphMode,l=xD(r,s),{independentMin:c,independentMax:u}=vL(e),h=u-c,p=0,g=0,y=o.length-1,w=y/n,b=yL();for(let D=0;D<o.length;D++){let I=(y-D)/y*c+D/y*u,E=bD(s,I,l);for(;p<e.segments.length&&e.segments[p][g]<I;)g+=2,g>=e.segments[p].length&&(p+=1,g=0);let G=e.segments[p],T=NaN,P=NaN;if(G&&G.length>2&&g-2>=0&&g+1<G.length){P=(G[G.length-2]-I)*(w/h);let _=G[g-2],x=G[g-1],L=G[g],R=G[g+1],q=L-_;T=(L-I)/q*x+(I-_)/q*R}b=bL(b,{independent:I,dependent:T},l,n,P),o[D]+=b.amplitude*E.left,a[D]+=b.amplitude*E.right}if(i&&e.poi&&e.poi.intersections){let D=$3(s,e.poi.intersections);for(let I of D){let E=Math.round((I-c)/(u-c)*y);xL(i,t,E,bD(s,I,l))}}}function W3(t,e,r,i){let n=t.sampleRate,o=t.getChannelData(0),a=t.getChannelData(1),s=e.graphMode,l=xD(r,s),c=o.length-1,u=yL(),{independent:h,dependent:p}=H3(e),g=bD(s,h,l);for(let y=0;y<o.length;y++){let w=(c-y)/n;u=bL(u,{independent:h,dependent:p},l,n,w),o[y]+=u.amplitude*g.left,a[y]+=u.amplitude*g.right}i&&e.intersects!==void 0&&xL(i,t,0,g)}function j3(t,e){return t[0]-e[0]}function Y3(t,e,r){switch(t.graphMode){case 2:{let i=[];for(let n of t.segments){let o=yd(n,e);o.length>2&&i.push(o)}return{graphMode:t.graphMode,segments:i,poi:t.poi}}case 1:{let i=[],n={xmin:e.ymin,xmax:e.ymax,ymin:e.xmin,ymax:e.ymax};for(let o of t.segments){let a=yd(o,n);a.length>2&&i.push(a)}return{graphMode:t.graphMode,segments:i,poi:t.poi}}case 3:case 4:{let i=t.segments[0].slice();i.sort(j3);let n=[];for(let o=0;o<i.length;o++){let a=i[o],s=o>0?i[o-1][0]:-1/0,l=o<i.length-1?i[i.length-1][0]:1/0,c=Math.max(a[0]-.5*r,.5*(a[0]+s)),u=Math.min(a[0]+.5*r,.5*(a[0]+l)),h=[c,a[1],u,a[1]],p=yd(h,e);p.length>2&&n.push(p)}return{graphMode:2,segments:n}}default:throw new Error(`Unimplemented graph mode: ${t.graphMode}`)}}function J3(t,e,r){return{x:t.x,y:t.y,branch:t.branch,reportedBranch:r,type:t.type,graphMode:e,intersects:t.intersects}}var sf=class{constructor(e,r,i){this.grapher=i,this.controller=e,this.audiograph=r,this.reset()}reset(){this.currentPoint=void 0,this.resetToFirstBranch(),this.sampledPoints=[],this.pois=[],this.independent=0,this.xstep=0,this.ystep=0}resetToFirstBranch(){let e=this.getCurrentSketch();this.branch=e?wL(e):0}getBranchPoints(e){let r=[];if(e>=0)for(let i of this.getSampledPoints())i.branch===e&&r.push(i);return r}resetTracePoint(){this.drawTrace(this.getCurrentPoint())}drawTrace(e){let r=this.getCurrentSketch();if(!e||!r)return;let i=r.branches[this.branch];if(!i||i.graphMode===3)return;let o={x:e.x,y:e.y},a={branchInfo:{branch:e.branch,id:r.id,sketch:r},pt:o};__dcg_shared_module_exports__['E'](a,this.grapher.traceLayer.getTraceInfo())||(this.grapher.traceLayer.setTraceInfo(a),this.grapher.redrawAllLayers())}moveToOrigin(){let e=this.getCurrentSketch();if(!e||!Va(this.controller,e))return;let r=e.branches[this.branch];if(!hs(r))return;let i=r.graphMode;if(i===2)this.setIndependent("x",0);else if(i===1)this.setIndependent("y",0);else if(i===3){let n=this.getSortedPOI()[0];this.setIndependent("x",n?n.x:0)}}getCurrentSketch(){let e,r=this.getSelectedItem();if(r){let i=this.audiograph.getFocusedCell();if(r.type==="table"){if(i&&(e=this.getGraphSketchForTableCell(r,i)),!e){for(let n of r.columnModels)if(e=this.grapher.getGraphSketch(n.id),e!==void 0)break}}else e=this.grapher.getGraphSketch(r.id)}return e}getFirstTraceableSketch(e){let r,i=this.controller.getItemCount(),n=this.controller.shouldAudioTraceReverseExpressions();for(let o=0;o<i;o++){let a=n?i-1-o:o,s=this.controller.getItemModelByIndex(a);if(s&&this.canTrace(s)){let l=n?this.prevTableColumn(s):this.nextTableColumn(s);if(l?(this.audiograph.setFocusedCell(l),r=this.getGraphSketchForTableCell(s,l)):r=this.grapher.getGraphSketch(s.id),r){e&&e.selectAssociatedExpression&&this.controller.dispatch({type:"set-selected-index",index:a});break}}}return r}canTrace(e){if(e.type==="image")return!1;if("shouldGraph"in e){let r=this.grapher.getGraphSketch(e.id);return r?Va(this.controller,r):!1}return!1}getTraceableExpressionCount(){let e=0,r=this.controller.getItemCount();for(let i=0;i<r;i++){let n=this.controller.getItemModelByIndex(i);n&&this.canTrace(n)&&e++}return e}computeStepSizes(){let e=this.grapher.getProjection().viewport;if(!e)return;this.viewport=e;let r=e.xmin,i=e.xmax;this.xstep=Math.abs(i-r)/100,this.xscale=i-r;let n=e.ymin,o=e.ymax;this.ystep=Math.abs(o-n)/100,this.yscale=o-n;let a=this.getCurrentSketch();if(!a||!Va(this.controller,a))return;let s=a.branches[this.branch];if(!hs(s))return;let l=s.graphMode;if(l===2)this.independent<r?this.independent=r:this.independent>i&&(this.independent=i);else if(l===1)this.independent<n?this.independent=n:this.independent>o&&(this.independent=o);else if(l===3){let c,u;this.independent<r?(u=this.getSortedPOI()[0],this.independent=u&&u.x!==void 0?u.x:0):this.independent>i&&(c=this.getSortedPOI(),u=c[c.length-1],this.independent=u&&u.x!==void 0?u.x:0)}}getPoint(e,r){let i,n=this.getCurrentSketch();if(!n||!Va(this.controller,n))return i;let o,a,s,l=0,c=n.branches[e];if(!c)return;let u=af(n,e);return"compiled"in c&&c.compiled&&(s=c.compiled.fn),a=c.graphMode,a===2?(o=this.getInterveningPOIs(r,r+this.xstep,e,a)[0],(!o||o.x!==r||o.branch!==e)&&(o=void 0,l=s?s(r):0),o?i={x:o.x,y:o.y,type:o.type,typeChain:o.typeChain,branch:o.branch,reportedBranch:u,graphMode:a,intersects:o.intersects}:s&&(i={x:r,y:l,branch:e,reportedBranch:u,graphMode:a})):a===1?(o=this.getInterveningPOIs(r,r+this.ystep,e,a)[0],(!o||o.y!==r||o.branch!==e)&&(o=void 0,l=s?s(r):0),o?i={x:o.x,y:o.y,type:o.type,typeChain:o.typeChain,branch:o.branch,reportedBranch:u,graphMode:a,intersects:o.intersects}:s&&(i={y:r,x:l,branch:e,reportedBranch:u,graphMode:a})):a===3&&(o=this.getInterveningPOIs(r,r+this.xstep,e,a)[0],o&&o.x===r&&o.branch===e?i={x:o.x,y:o.y,type:o.type,typeChain:o.typeChain,branch:o.branch,reportedBranch:u,graphMode:a,intersects:o.intersects}:i={x:r,y:NaN,branch:e,reportedBranch:u,graphMode:a}),i}getSampledPoints(){return this.sampledPoints.length===0&&this.updateSampledPoints(),this.sampledPoints}updateSampledPoints(){let e=this.getCurrentSketch();if(!e||!Va(this.controller,e))return;let r=[];for(let i=0;i<e.branches.length;i++){let n=e.branches[i];if(!hs(n))continue;let o=n.graphMode,a=0,s=0,l=0,c=[];if(o===2||o===3?(a=this.viewport.xmin,s=this.viewport.xmax,l=this.xstep):o===1&&(a=this.viewport.ymin,s=this.viewport.ymax,l=this.ystep),!(a===0&&s===0&&l===0)){for(let u=0;__dcg_shared_module_exports__['Ma'](a+u*l).value<=s;u++){let h=__dcg_shared_module_exports__['Ma'](a+u*l).value,p=this.getInterveningPOIs(h,h+l,i,o);if(p.length>0)c.push.apply(c,p);else{let g=this.getPoint(i,h);g&&c.push(g)}}r.push.apply(r,this.removeDuplicates(c,o))}}this.sampledPoints=r}getCurrentPoint(){return this.currentPoint||this.updateCurrentPoint(),this.currentPoint}updateCurrentPoint(e){if(e){this.currentPoint=e;let r=e.graphMode;r===2||r===3?this.independent=e.x!==void 0?e.x:0:r===1&&(this.independent=e.y!==void 0?e.y:0),this.branch=e.branch}else this.currentPoint=this.getPoint(this.branch,this.independent)}prevPoint(){this.moveToPoint(-1)}nextPoint(){this.moveToPoint(1)}firstPoint(){let e=this.getSampledPoints();e.length>0&&this.updateCurrentPoint(e[0])}lastPoint(){let e=this.getSampledPoints();e.length>0&&this.updateCurrentPoint(e[e.length-1])}moveToPoint(e){let r=this.getCurrentPoint();if(!r)return;if(r.graphMode===3){this.moveToPOI(e);return}let i=this.getSampledPoints(),n=this.getPointIndex(i,r);if(n!==-1){let o=n+e;o<=0?(o=0,Ct(this.controller.s("graphing-calculator-narration-audio-trace-first-point"))):o>=i.length-1&&(o=i.length-1,Ct(this.controller.s("graphing-calculator-narration-audio-trace-last-point")));let a=i[o];this.updateCurrentPoint(a)}}canMoveToPrevPoint(){let e=this.getCurrentPoint();if(!e)return!1;if(e.graphMode===3)return this.canMoveToPrevPOI();let r=this.getSampledPoints();return this.getPointIndex(r,e)>0}canMoveToNextPoint(){let e=this.getCurrentPoint();if(!e)return!1;if(e.graphMode===3)return this.canMoveToNextPOI();let r=this.getSampledPoints();return this.getPointIndex(r,e)<r.length-1}prevPOI(){this.moveToPOI(-1)}nextPOI(){this.moveToPOI(1)}getSortedPOI(){return(!this.pois||this.pois.length===0)&&this.updatePOI(),this.pois}updatePOI(){let e=[],r,i=[],n=this.getCurrentSketch();if(!(!n||!Va(this.controller,n))){for(let o=0;o<n.branches.length;o++){let a=n.branches[o];if(!a)continue;let s=af(n,o),l=a.graphMode;if(i=[],r=n.getBranchPOI(o),r.length>0){l===2||l===3?i=__dcg_shared_module_exports__['u'](r,"x"):l===1&&(i=__dcg_shared_module_exports__['u'](r,"y"));let c=[];for(let u of i)c.push(J3(u,l,s));e.push.apply(e,this.removeDuplicates(c,l))}}this.pois=e}}removeDuplicates(e,r){let i=[];for(let n of e){if(n=__dcg_shared_module_exports__['b']({},n),n.graphMode=r,i.length===0){i.push(n);continue}let o=i[i.length-1];__dcg_shared_module_exports__['Ma'](o.x).value===__dcg_shared_module_exports__['Ma'](n.x).value&&__dcg_shared_module_exports__['Ma'](o.y).value===__dcg_shared_module_exports__['Ma'](n.y).value&&o.branch===n.branch?(o.typeChain||(o.typeChain=o.type!==void 0?[o.type]:[]),n.type!==void 0&&o.typeChain.indexOf(n.type)===-1&&o.typeChain.push(n.type),n.type===1001&&n.intersects&&o.intersects===void 0&&(o.intersects=n.intersects)):i.push(n)}return i}getInterveningPOIs(e,r,i,n){let o=[],a=this.getSortedPOI(),s=NaN;for(let l of a)l&&((n===2||n===3)&&!isNaN(l.x)?s=l.x:n===1&&!isNaN(l.y)&&(s=l.y),l.branch===i&&!isNaN(s)&&(e<=s&&s<r||r<=s&&s<e)&&o.push(l));return e>r?o.reverse():o}setIndependent(e,r){let i=this.getSampledPoints();for(let o of i)if(o&&o.hasOwnProperty(e)&&o[e]===r){if(e==="x"){this.independent=o.x!==void 0?o.x:0,this.updateCurrentPoint();return}else if(e==="y"){this.independent=o.y!==void 0?o.y:0,this.updateCurrentPoint();return}}let n=!0;if(i.length>0){let o=Math.floor((i.length-1)/2),a=i[o];a&&(e==="x"?(this.independent=a.x!==void 0?a.x:0,n=!1):e==="y"&&(this.independent=a.y!==void 0?a.y:0,n=!1))}n&&(this.independent=0),this.resetToFirstBranch(),this.updateCurrentPoint()}moveToPOI(e){if(!this.getCurrentPoint())return;let i=this.getSampledPoints(),n=this.getPOIIndexByDirection(e);n===-1?Ct(this.controller.s("graphing-calculator-narration-audio-trace-no-more-pois")):this.updateCurrentPoint(i[n])}getPOIIndexByDirection(e){let r=this.getCurrentPoint();if(!r)return-1;let i=this.getSampledPoints(),n=this.getPointIndex(i,r),o=-1;if(n!==-1){let a=r.graphMode,s=e===1?i.length-1:0;for(let l=n;l!==s+e;l+=e){let c=i[l];if(((a===2||a===3)&&r.x!==c.x||a===1&&r.y!==c.y)&&c.type!==void 0){o=l;break}}}return o}canMoveToPrevPOI(){return this.getPOIIndexByDirection(-1)!==-1}canMoveToNextPOI(){return this.getPOIIndexByDirection(1)!==-1}getPointIndex(e,r){let i=-1;if(e.length>0&&r){let n=r.graphMode;for(let o=0;o<e.length;o++){let a=e[o];if(((n===2||n===3)&&a.x===r.x||n===1&&a.y===r.y)&&a.branch===r.branch){i=o;break}}}return i}prevCurve(){this.controller.shouldAudioTraceReverseExpressions()?this.curveDown():this.curveUp()}nextCurve(){this.controller.shouldAudioTraceReverseExpressions()?this.curveUp():this.curveDown()}curveUp(){let e=this.getSelectedItem();if(!e)return;let r=this.prevTableColumn(e);if(r)this.audiograph.setFocusedCell(r);else{let i=e.index,n=this.findPrevTraceableIndex({index:i,focusTableCell:!0});if(n!==-1){let o=this.controller.getItemModelByIndex(n);o&&this.controller.dispatch({type:"set-selected-id",id:o.id})}}(r||this.getSelectedItem()!==e)&&this.audiograph.enterAudioTrace()}curveDown(){let e=this.getSelectedItem();if(!e)return;let r=this.nextTableColumn(e);if(r)this.audiograph.setFocusedCell(r);else{let i=e.index,n=this.findNextTraceableIndex({index:i,focusTableCell:!0});if(n!==-1){let o=this.controller.getItemModelByIndex(n);o&&this.controller.dispatch({type:"set-selected-id",id:o.id})}}(r||this.getSelectedItem()!==e)&&this.audiograph.enterAudioTrace()}canMoveToPrevCurve(){let e=this.getSelectedItem();return e?this.controller.shouldAudioTraceReverseExpressions()?this.findNextTraceableIndex({index:e.index,focusTableCell:!1})!==-1:this.findPrevTraceableIndex({index:e.index,focusTableCell:!1})!==-1:!1}canMoveToNextCurve(){let e=this.getSelectedItem();return e?this.controller.shouldAudioTraceReverseExpressions()?this.findPrevTraceableIndex({index:e.index,focusTableCell:!1})!==-1:this.findNextTraceableIndex({index:e.index,focusTableCell:!1})!==-1:!1}findPrevTraceableIndex(e){let r=e.index,i;do{r--,i=this.controller.getItemModelByIndex(r);let n=i&&this.prevTableColumn(i);if(n)return e.focusTableCell&&this.audiograph.setFocusedCell(n),r}while(i&&!this.canTrace(i));return i?r:-1}findNextTraceableIndex(e){let r=e.index,i;do{r++,i=this.controller.getItemModelByIndex(r);let n=i&&this.nextTableColumn(i);if(n)return e.focusTableCell&&this.audiograph.setFocusedCell(n),r}while(i&&!this.canTrace(i));return i?r:-1}prevTableColumn(e){return this.tableColumn(e,-1)}nextTableColumn(e){return this.tableColumn(e,1)}tableColumn(e,r){let i;if(e&&e.type==="table"){let n=this.audiograph.getFocusedCell(),o,a,s;r===-1?(o=n?Math.max(n.location.column-1,0):NaN,a=n&&n.tableId===e.id&&!isNaN(o)?o:e.columnModels.length-1,s=0):(o=n?Math.min(n.location.column+1,e.columnModels.length-1):NaN,a=n&&n.tableId===e.id&&!isNaN(o)?o:0,s=e.columnModels.length-1);let l=(s-a)/r;if(isFinite(l)&&l>=0)for(let c=a;c!==s;c+=r){let u=e.columnModels[c];if(u&&this.grapher.getGraphSketch(u.id)){i={tableId:e.id,location:{column:c,row:0}};break}}}return i}getGraphSketchForTableCell(e,r){if(!e||e.type!=="table"||!r)return;let i=e.columnModels[r.location.column];if(i)return this.grapher.getGraphSketch(i.id)}getXScale(){return this.xscale}getYScale(){return this.yscale}getSelectedItem(){let e=this.controller.getSelectedItem();if(e&&e.type==="folder"){var r=BE(e);return r===void 0?void 0:this.controller.getItemModel(r)}return e}};var lf=[{speed:200,displayedSpeed:"1/4 x"},{speed:100,displayedSpeed:"1/2 x"},{speed:50,displayedSpeed:"1 x"},{speed:25,displayedSpeed:"2 x"},{speed:12.5,displayedSpeed:"4 x"}],cf=class{constructor(e,r){this.grapher=r,this.controller=e,this.audioTraceActive=!1,this.wasFocusInExpressionsView=!1,this.focusedCell=void 0,this.sliderTraceActive=!1,this.sliderIndex=0,this.sliderArray=[],this.lastSpokenBranch=1,this.agNavigator=new sf(e,this,this.grapher),this.tonegen=new of({controller:e,audioPointMove:(i,n)=>{this.agNavigator.drawTrace(this.agNavigator.getPoint(i,n))},animationFinished:()=>{this.recomputePoints(),this.controller.runAfterDispatch(()=>{this.controller.dispatch({type:"render"})})},audioEnabled:()=>this.controller.getAudio()}),this.audioSpeedIndex=2,this.tonegen.releaseAudio()}remove(){}handleKeydown(e){let r=e.altKey||e.metaKey,i=e.altKey&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey,n=e.ctrlKey&&!e.metaKey&&!e.altKey,o=gi?n:r,a=o&&(e.which===61||e.which===187),s=o&&!e.shiftKey&&(e.which===173||e.which===189),l=o&&!e.shiftKey&&vi(e)==="0";i&&vi(e)==="S"?this.agNavigator.getSelectedItem()&&(this.audioTraceActive||this.isFocusInExpressionsView())&&(e.preventDefault(),e.stopPropagation(),this.describeCurve()):i&&vi(e)==="G"?(this.audioTraceActive||this.isFocusInExpressionsView())&&(e.preventDefault(),e.stopPropagation(),this.describeAxes()):i&&vi(e)==="T"?(e.preventDefault(),e.stopPropagation(),this.toggleAudioTrace()):a?(e.preventDefault(),e.stopPropagation(),this.zoom("in")):s?(e.preventDefault(),e.stopPropagation(),this.zoom("out")):l?(e.preventDefault(),e.stopPropagation(),this.setDefaultViewport()):this.audioTraceActive&&(this.sliderTraceActive?this.sliderTraceKeydown(e):this.audioTraceKeydown(e))}sliderTraceKeydown(e){let r=e.altKey||e.metaKey,i=!r&&!e.ctrlKey&&!e.shiftKey;i&&Le(e)===gc||vi(e)==="J"?(e.preventDefault(),e.stopPropagation(),this.decrementSliderValue()):i&&Le(e)===fc||vi(e)==="L"?(e.preventDefault(),e.stopPropagation(),this.incrementSliderValue()):i&&Le(e)===yu?(e.preventDefault(),e.stopPropagation(),this.decrementBigSliderValue()):i&&Le(e)===mu?(e.preventDefault(),e.stopPropagation(),this.incrementBigSliderValue()):!r&&(Le(e)===zn||!e.shiftKey&&Le(e)===Bs||vi(e)==="K")?(e.preventDefault(),e.stopPropagation(),this.nextSlider()):!r&&(Le(e)===Rn||e.shiftKey&&Le(e)===Bs||vi(e)==="I")?(e.preventDefault(),e.stopPropagation(),this.prevSlider()):i&&Le(e)===xu||vi(e)==="U"?(e.preventDefault(),e.stopPropagation(),this.sliderMin()):i&&Le(e)===bu||vi(e)==="N"?(e.preventDefault(),e.stopPropagation(),this.sliderMax()):(this.stopAnimations(),this.audioTraceKeydown(e))}audioTraceKeydown(e){let r=e.altKey||e.metaKey,i=r&&!e.ctrlKey&&!e.shiftKey,n=!r&&!e.ctrlKey&&!e.shiftKey,o=vi(e);if(Le(e)===Rn&&i)e.preventDefault(),e.stopPropagation(),Ui(),this.agNavigator.prevCurve();else if(Le(e)===zn&&i)e.preventDefault(),e.stopPropagation(),Ui(),this.agNavigator.nextCurve();else if(n&&Le(e)===gc||Le(e)===Rn||o==="J")e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"keypad/audio-trace",command:"previous-point"});else if(n&&Le(e)===fc||Le(e)===zn||o==="L")e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"keypad/audio-trace",command:"next-point"});else if(!r&&(Le(e)===yu||!e.shiftKey&&Le(e)===Bs||o==="I"))e.preventDefault(),e.stopPropagation(),this.reportAndMoveToNextPOI();else if(!r&&(Le(e)===mu||e.shiftKey&&Le(e)===Bs||o==="K"))e.preventDefault(),e.stopPropagation(),this.reportAndMoveToPrevPOI();else if(n&&Le(e)===xu||o==="U")e.preventDefault(),e.stopPropagation(),this.reportAndMoveToFirstPoint();else if(n&&Le(e)===bu||o==="N")e.preventDefault(),e.stopPropagation(),this.reportAndMoveToLastPoint();else if(n&&o==="X")e.preventDefault(),e.stopPropagation(),this.reportX();else if(n&&o==="P")e.preventDefault(),e.stopPropagation(),this.reportPOICount();else if(n&&o==="Y")e.preventDefault(),e.stopPropagation(),this.reportY();else if(n&&o==="T")e.preventDefault(),e.stopPropagation(),this.reportType();else if(n&&o==="B")e.preventDefault(),e.stopPropagation(),this.reportBranch();else if(n&&o==="O")e.preventDefault(),e.stopPropagation(),this.reportAndMoveToOrigin();else if(n&&o==="H")e.preventDefault(),e.stopPropagation(),this.hearGraph();else if(n&&typeof o=="string"&&o>="0"&&o<="9"){if(e.preventDefault(),e.stopPropagation(),Ui(),!this.controller.getAudio()){ge(this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled"));return}this.tonegen.stop();let a=this.agNavigator.getCurrentSketch();if(a){let s;e.which===48?s=9:s=e.which-49;let l=s,c=-1;for(let u=0;u<a.branches.length;u++)if(hs(a.branches[u])&&(l-=1),l<0){c=u;break}c>=0?this.tonegen.getPlaybackSupported()?this.tonegen.playBranchByIndex(a,c,this.grapher.getCurrentViewport()):ge(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-play")):ge(this.controller.s("graphing-calculator-narration-audio-trace-branch-not-found",{branch:s+1}))}else ge(this.controller.s("graphing-calculator-narration-audio-trace-description-no-curve-selected"))}else r&&typeof o=="string"&&o>="1"&&o<="5"?(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-audio-trace-speed",speed:parseInt(o,10)-1})):!e.altKey&&!e.ctrlKey&&!e.metaKey&&o==="V"?(e.preventDefault(),e.stopPropagation(),this.controller.getAudio()?e.shiftKey?this.controller.dispatch({type:"keypad/audio-trace",command:"volume-down"}):this.controller.dispatch({type:"keypad/audio-trace",command:"volume-up"}):ge(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-play"))):n&&o==="A"?(e.preventDefault(),e.stopPropagation(),Ui(),this.queueAnimatingPoints(!0),ge()):n&&o==="S"&&this.controller.isListEnabled()?(e.preventDefault(),e.stopPropagation(),this.toggleSliderTrace()):n&&o==="C"?(e.preventDefault(),e.stopPropagation(),this.reportColor()):n&&this.exitAudioTrace();this.controller.dispatch({type:"render"})}describeCurve(){Ui();let e=this.agNavigator.getCurrentSketch();if(!e){ge(this.controller.s("graphing-calculator-narration-audio-trace-description-no-curve-selected"));return}Ct(this.controller.s("graphing-calculator-narration-audio-trace-description-color",{color:wd(this.controller,e.color)}));let r=af(e,e.branches.length-1);r>1&&Ct(this.controller.s("graphing-calculator-narration-audio-trace-description-branch-count",{branches:r}));let i=!1,n=!1;for(let a of e.branches)if(r===1&&a.segments.length>0&&a.hasOwnProperty("operator")){if(a.graphMode===2){if(a.operator===">"||a.operator===">="){Ct(this.controller.s("graphing-calculator-narration-audio-trace-description-shading-above"));break}else if(a.operator==="<"||a.operator==="<="){Ct(this.controller.s("graphing-calculator-narration-audio-trace-description-shading-below"));break}}else if(a.graphMode===1){if(a.operator===">"||a.operator===">="){Ct(this.controller.s("graphing-calculator-narration-audio-trace-description-shading-right"));break}else if(a.operator==="<"||a.operator==="<="){Ct(this.controller.s("graphing-calculator-narration-audio-trace-description-shading-left"));break}}}else r>1&&(a.graphMode===2||a.graphMode===1?(a.operator==="<"||a.operator==="<="||a.operator===">"||a.operator===">=")&&(i=!0):a.graphMode===7&&(n=!0));i&&n&&Ct(this.controller.s("graphing-calculator-narration-audio-trace-description-shading-in-regions"));let o=e.getPOI();if(o.length>0){let a=[];for(let s of o)a[s.type]===void 0?a[s.type]=1:a[s.type]+=1;a.forEach((s,l)=>{l===1001?Ct(s===1?this.controller.s("graphing-calculator-narration-audio-trace-description-one-intersection"):this.controller.s("graphing-calculator-narration-audio-trace-description-multiple-intersections",{count:s})):l===1002?Ct(s===1?this.controller.s("graphing-calculator-narration-audio-trace-description-one-root"):this.controller.s("graphing-calculator-narration-audio-trace-description-multiple-roots",{count:s})):l===1003?Ct(s===1?this.controller.s("graphing-calculator-narration-audio-trace-description-one-intercept"):this.controller.s("graphing-calculator-narration-audio-trace-description-multiple-intercepts",{count:s})):l===1004?Ct(s===1?this.controller.s("graphing-calculator-narration-audio-trace-description-one-extremum"):this.controller.s("graphing-calculator-narration-audio-trace-description-multiple-extrema",{count:s})):l===1008&&Ct(s===1?this.controller.s("graphing-calculator-narration-audio-trace-description-one-label"):this.controller.s("graphing-calculator-narration-audio-trace-description-multiple-labels",{count:s}))})}ge()}describeAxes(){Ui(),ge(this.getAxesDescription())}getAxesDescription(){let{showGrid:e,showXAxis:r,xAxisNumbers:i,showYAxis:n,yAxisNumbers:o,xAxisLabel:a,yAxisLabel:s}=this.grapher.settings,l=this.grapher.getCurrentViewport(),c=[];r&&(i&&a!==""?c.push(this.controller.s("graphing-calculator-narration-audio-trace-description-visible-x-axis-range-and-label",{xmin:nn(__dcg_shared_module_exports__['Ma'](l.xmin,this.agNavigator.getXScale()).latex),xmax:nn(__dcg_shared_module_exports__['Ma'](l.xmax,this.agNavigator.getXScale()).latex),label:a})):i&&a===""?c.push(this.controller.s("graphing-calculator-narration-audio-trace-description-visible-x-axis-range",{xmin:nn(__dcg_shared_module_exports__['Ma'](l.xmin,this.agNavigator.getXScale()).latex),xmax:nn(__dcg_shared_module_exports__['Ma'](l.xmax,this.agNavigator.getXScale()).latex)})):!i&&a!==""?c.push(this.controller.s("graphing-calculator-narration-audio-trace-description-visible-x-axis-and-label",{label:a})):!i&&a===""&&c.push(this.controller.s("graphing-calculator-narration-audio-trace-description-visible-x-axis"))),n&&(o&&s!==""?c.push(this.controller.s("graphing-calculator-narration-audio-trace-description-visible-y-axis-range-and-label",{ymin:nn(__dcg_shared_module_exports__['Ma'](l.ymin,this.agNavigator.getYScale()).latex),ymax:nn(__dcg_shared_module_exports__['Ma'](l.ymax,this.agNavigator.getYScale()).latex),label:s})):o&&s===""?c.push(this.controller.s("graphing-calculator-narration-audio-trace-description-visible-y-axis-range",{ymin:nn(__dcg_shared_module_exports__['Ma'](l.ymin,this.agNavigator.getYScale()).latex),ymax:nn(__dcg_shared_module_exports__['Ma'](l.ymax,this.agNavigator.getYScale()).latex)})):!o&&s!==""?c.push(this.controller.s("graphing-calculator-narration-audio-trace-description-visible-y-axis-and-label",{label:s})):!o&&s===""&&c.push(this.controller.s("graphing-calculator-narration-audio-trace-description-visible-y-axis"))),!r&&!n&&c.push(this.controller.s("graphing-calculator-narration-audio-trace-description-no-visible-axes")),e&&c.push(this.controller.s("graphing-calculator-narration-audio-trace-description-visible-grid"));let u=this.grapher.graphSketches,h=0;for(let p in u)Va(this.controller,u[p])&&(h+=1);return c.push(this.controller.s("graphing-calculator-narration-audio-trace-traceable-curves",{sketchCount:new Wo(h)})),c.join(" ")}queueCoordinates(e,r,i=!1){let n=this.grapher.getProjection().viewport;if(!n||!e)return;let o=this.agNavigator.getCurrentSketch();(e.hasOwnProperty("branch")&&o&&o.branches.length>1&&this.lastSpokenBranch!==e.reportedBranch||r==="branch")&&typeof e.reportedBranch=="number"&&Ct(this.controller.s("graphing-calculator-narration-audio-trace-property-branch-number",{branch:e.reportedBranch})),this.lastSpokenBranch=e.reportedBranch?e.reportedBranch:e.branch+1,e.hasOwnProperty("type")&&!r?Ct(this.controller.s("graphing-calculator-narration-audio-trace-property-type-before-coordinates",{type:this.describePOI(e)})):r==="type"&&Ct(this.describePOI(e)),(!r||r==="x")&&Ct(on(this.controller,e.x,n)),(!r||r==="y")&&Ct(an(this.controller,e.y,n)),i&&ge()}describePOI(e){if(e.typeChain){let r=[];for(let i=0;i<e.typeChain.length;i++)r.push(this.poiTypeToText(e,i));return r.join(", ")}else return this.poiTypeToText(e)}poiTypeToText(e,r){switch(r&&e.typeChain?e.typeChain[r]:e.type){case 1001:let n=this.getIntersectingCurves(e);return n!==""?this.controller.s("graphing-calculator-narration-audio-trace-point-type-intersection-with-curves",{curves:n}):this.controller.s("graphing-calculator-narration-audio-trace-point-type-intersection");case 1002:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-root");case 1003:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-intercept");case 1004:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-extremum");case 1006:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-definition");case 1007:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-trace");case 1008:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-label");default:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-not-a-poi")}}getIntersectingCurves(e){return!e||!e.intersects?"":this.getExpressionAriaLabel(e.intersects)}getExpressionAriaLabel(e){let r=this.controller.getItemModel(e);return r?r.type==="expression"&&r.label?uo(r.label):this.controller.isItemSecret(r.id)?this.controller.s("graphing-calculator-narration-audio-trace-secret-expression",{index:r.secretIndex}):r.type==="table"&&this.focusedCell?this.controller.s("graphing-calculator-narration-audio-trace-expression-with-column",{index:r.displayIndex,column:this.focusedCell.location.column+1}):this.controller.s("shared-calculator-narration-expression-index",{index:r.displayIndex}):""}exitAudioTrace(e){if(this.audioTraceActive){if(this.audioTraceActive=!1,this.controller.isKeypadEnabled()&&this.controller.dispatch({type:"keypad/123"}),e||(e=this.controller.s("graphing-calculator-text-audio-trace-off")),this.controller.dispatch({type:"toast/close"}),this.wasFocusInExpressionsView){let r=this.agNavigator.getSelectedItem();(!r||!this.controller.isItemSelectable(r.id))&&(r=this.controller.getFirstFullyVisibleItem()),r&&this.controller.isItemSelectable(r.id)&&this.controller.dispatch({type:"move-focus-to-item",id:r.id,where:r.type==="table"&&this.focusedCell!==void 0?__dcg_shared_module_exports__['b']({location:"cell"},this.focusedCell.location):"end"})}this.wasFocusInExpressionsView=!1,this.focusedCell=void 0,this.stopAnimations(),this.sliderTraceActive=!1,this.sliderIndex=0,this.tonegen.stop(),this.tonegen.releaseAudio(),this.agNavigator.reset(),this.lastSpokenBranch=1,this.grapher.traceLayer.setTraceInfo(void 0),this.grapher.redrawAllLayers(),ge(e),this.resumeAnimations()}}isFocusInExpressionsView(){return!!this.controller.getFocusedItem()}canAudioTraceCurrentExp(){let e=this.agNavigator.getSelectedItem();return e?e.type==="table"?!!this.agNavigator.getCurrentSketch():this.agNavigator.canTrace(e):!1}enterAudioTrace(e){let r=this.agNavigator.getSelectedItem(),i=r&&r.type!=="table"&&!this.agNavigator.canTrace(r)?this.getExpressionAriaLabel(r.id):void 0,n=!1;this.audioTraceActive||(this.wasFocusInExpressionsView=this.isFocusInExpressionsView(),r&&i&&Ct(this.controller.s("graphing-calculator-narration-audio-trace-unsupported-expression",{expression:i})),n=!!i||!this.wasFocusInExpressionsView);let o;if(n)o=this.agNavigator.getFirstTraceableSketch({selectAssociatedExpression:!0});else if(!i){if(r&&r.type==="expression"&&r.formula&&r.formula.error)return this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-narration-audio-trace-description-no-curve-selected")}});if(r&&r.type==="table"){let s=so(r);(!this.focusedCell||this.focusedCell.tableId!==r.id||s&&(s.column!==this.focusedCell.location.column||s.row!==this.focusedCell.location.row))&&(this.focusedCell=s!==void 0?{tableId:r.id,location:s}:void 0)}else this.focusedCell=void 0;o=this.agNavigator.getCurrentSketch()}if(!o)return this.agNavigator.reset(),this.lastSpokenBranch=1,this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-narration-audio-trace-description-no-curve-selected")}});let a=o.branches[0].graphMode;if(a===8)return this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-implicit-support")}});if(a===5)return this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-parametric-support")}});if(a===6)return this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-polar-support")}});this.agNavigator.reset(),this.agNavigator.computeStepSizes(),this.lastSpokenBranch=1,this.grapher.traceLayer.clearOpenedPOI(),this.grapher.redrawAllLayers(),this.audioTraceActive||(this.controller.isKeypadEnabled()||this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-on"),noAria:!0,onHide:()=>this.exitAudioTrace(),hideAfter:0}}),i&&o&&Ct(this.controller.s("graphing-calculator-narration-audio-trace-tracing-different-expression",{expression:this.getExpressionAriaLabel(o.id)})),Ct(this.controller.s("graphing-calculator-text-audio-trace-on")),this.controller.getAudio()||Ct(this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled")),this.pauseAnimations(),this.queueAnimatingPoints(!1),this.tonegen.prepareAudio(),(!e||!e.fromKeypad)&&(Ct(this.controller.s("graphing-calculator-narration-audio-trace-instructions-use-arrow-keys")),this.controller.getAudio()&&Ct(this.controller.s("graphing-calculator-narration-audio-trace-instructions-hear-graph")),this.agNavigator.getTraceableExpressionCount()>1&&(gi?Ct(this.controller.s("graphing-calculator-narration-audio-trace-instructions-expression-navigation-mac")):Ct(this.controller.s("graphing-calculator-narration-audio-trace-instructions-expression-navigation-windows"))),gi?Ct(this.controller.s("graphing-calculator-narration-audio-trace-instructions-disable-mac")):Ct(this.controller.s("graphing-calculator-narration-audio-trace-instructions-disable-windows"))),this.wasFocusInExpressionsView&&(this.controller.find$(".dcg-graph-outer").one("focusin",()=>{setTimeout(()=>{ge()},0)}),this.controller.dispatch({type:"set-focus-location",location:{type:"graph-paper"}}))),this.agNavigator.moveToOrigin(),Ct(this.getExpressionAriaLabel(o.id)),this.reportAudioTrace({playSound:!1}),this.wasFocusInExpressionsView||ge(),this.audioTraceActive=!0,this.controller.isKeypadEnabled()&&this.controller.dispatch({type:"keypad/audio"})}checkIfSelectedItemChanged(e){this.lastSelectedId!==e&&(this.lastSelectedId=e,this.audioTraceActive&&(e?(Ct(this.getExpressionAriaLabel(e)),this.exitSliderTrace(),this.agNavigator.updatePOI(),this.agNavigator.moveToOrigin(),this.reportAudioTrace(),ge()):this.exitAudioTrace()))}pauseAnimations(){this.sliderArray.length=0,this.controller.getAllModelsWithSliders().forEach(r=>{r.slider.isPlaying&&(this.controller.dispatch({type:"set-slider-isplaying",id:r.id,isPlaying:!1}),this.sliderArray.push(r))})}resumeAnimations(){if(this.sliderArray.length!==0){for(let e=0;e<this.sliderArray.length;e++){let r=this.sliderArray[e];r.slider.isPlaying!==!0&&this.controller.dispatch({type:"set-slider-isplaying",id:r.id,isPlaying:!0})}this.sliderArray.length=0}}stopAnimations(){this.controller.getAllModelsWithSliders().forEach(r=>{r.slider.isPlaying&&this.controller.dispatch({type:"set-slider-isplaying",id:r.id,isPlaying:!1})})}getAnimatingVars(){let e=[];for(let r=0;r<this.sliderArray.length;r++)e.push('"'+In(this.sliderArray[r])+'"');return e}hasActiveSliders(){let e=this.controller.getAllModelsWithSliders();for(let r=0;r<e.length;r++)if(e[r].slider.isPlaying)return!0;return!1}queueAnimatingPoints(e){this.sliderArray.length===1?Ct(this.controller.s("graphing-calculator-narration-audio-trace-one-slider-paused")):this.sliderArray.length>1?Ct(this.controller.s("graphing-calculator-narration-audio-trace-multiple-sliders-paused",{sliders:this.sliderArray.length})):e&&Ct(this.controller.s("graphing-calculator-narration-audio-trace-no-sliders-paused"))}queueSliderLatex(){this.hasActiveSliders()||this.tonegen.stop();let e=this.getSelectedSlider();e?Ct(e.latex):Ct(this.controller.s("graphing-calculator-narration-audio-trace-slider-value-unknown"))}getSelectedSlider(){let e=this.controller.getAllModelsWithSliders();return this.sliderIndex<=e.length-1?e[this.sliderIndex]:null}incrementSliderValue(){this.adjustSlider("up")}decrementSliderValue(){this.adjustSlider("down")}incrementBigSliderValue(){this.adjustSlider("bigup")}decrementBigSliderValue(){this.adjustSlider("bigdown")}nextSlider(){this.adjustSlider("next")}prevSlider(){this.adjustSlider("prev")}sliderMin(){this.adjustSlider("min")}sliderMax(){this.adjustSlider("max")}adjustSlider(e){let r=this.getSelectedSlider();if(!r){Ct(this.controller.s("graphing-calculator-narration-audio-trace-cannot-change-slider-value"));return}let i=r.latex,n=this.controller.getAllModelsWithSliders().length;switch(e){case"up":case"down":case"bigup":case"bigdown":case"min":case"max":this.controller.dispatch({type:"adjust-slider-by-keyboard",id:r.id,adjustment:e}),this.queueSliderLatex(),ge();break;case"next":this.sliderIndex++,this.sliderIndex>=n&&(Ct(this.controller.s("graphing-calculator-narration-audio-trace-last-slider")),this.sliderIndex=n-1),this.queueSliderLatex(),ge();return;case"prev":this.sliderIndex--,this.sliderIndex<0&&(Ct(this.controller.s("graphing-calculator-narration-audio-trace-first-slider")),this.sliderIndex=0),this.queueSliderLatex(),ge();return}!r.slider.isPlaying&&i!==r.latex&&(this.queueSliderLatex(),ge())}toggleAudioTrace(){this.audioTraceActive?this.exitAudioTrace():this.enterAudioTrace()}toggleSliderTrace(){this.sliderTraceActive?this.exitSliderTrace():this.enterSliderTrace()}enterSliderTrace(){if(this.sliderTraceActive)return;this.sliderIndex=0,this.controller.getAllModelsWithSliders().length!==0?(Ct(this.controller.s("graphing-calculator-narration-slider-trace-on")),this.queueSliderLatex(),this.sliderTraceActive=!0):(Ct(this.controller.s("graphing-calculator-narration-slider-trace-no-sliders")),this.sliderTraceActive=!1),ge()}exitSliderTrace(){this.sliderTraceActive&&(Ct(this.controller.s("graphing-calculator-narration-slider-trace-off")),this.sliderTraceActive=!1,this.sliderIndex=0,ge())}recomputePoints(){this.audioTraceActive&&(this.tonegen.isAnimating()||(this.agNavigator.updatePOI(),this.agNavigator.updateSampledPoints(),this.agNavigator.updateCurrentPoint(),this.agNavigator.resetTracePoint(),this.agNavigator.computeStepSizes()))}reportAndMoveToPrevPoint(){Ui(),this.agNavigator.prevPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToNextPoint(){Ui(),this.agNavigator.nextPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToOrigin(){Ui(),this.agNavigator.moveToOrigin(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToPrevPOI(){Ui(),this.agNavigator.prevPOI(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToNextPOI(){Ui(),this.agNavigator.nextPOI(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToFirstPoint(){Ui(),this.agNavigator.firstPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportAndMoveToLastPoint(){Ui(),this.agNavigator.lastPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})}reportX(){Ui(),this.reportAudioTrace({propToSpeak:"x",playSound:!1})}reportY(){Ui(),this.reportAudioTrace({propToSpeak:"y",playSound:!1})}reportColor(){Ui();let e=this.agNavigator.getCurrentSketch();e?Ct(wd(this.controller,e.color)):Ct(this.controller.s("graphing-calculator-narration-color-unknown")),ge()}reportPOICount(){Ui();let e=this.agNavigator.getCurrentSketch(),r=e?e.getPOI().length:0;ge(this.controller.s("graphing-calculator-narration-audio-trace-poi-count",{x:r}))}reportType(){Ui(),this.reportAudioTrace({propToSpeak:"type",playSound:!1})}reportBranch(){Ui(),this.reportAudioTrace({propToSpeak:"branch",playSound:!1})}describePoint(){Ui(),this.reportAudioTrace({playSound:!1}),ge()}playCurrentPoint(){let e=this.agNavigator.getCurrentPoint();e&&this.tonegen.playPoint(e,this.grapher.getCurrentViewport())}reportAudioTrace(e){let r=this.agNavigator.getCurrentPoint();if(!r)return;let i=e&&e.propToSpeak,n=this.controller.getAudio()&&this.tonegen.getPlaybackSupported()&&(e&&e.playSound!==void 0?e.playSound:!0),o=e&&e.speakCoordinates!==void 0?e.speakCoordinates:!0;this.tonegen.stop(),n&&this.playCurrentPoint(),o&&(this.queueCoordinates(r,i),setTimeout(function(){ge()},i?0:100))}adjustPlaybackSpeed(e){if(!this.controller.getAudio()){ge(this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled"));return}if(e<0||e>=lf.length)return;this.audioSpeedIndex=e;let r=lf[e];return this.tonegen.setAudioSpeed(r.speed),ge(this.controller.s("graphing-calculator-narration-audio-trace-playback-speed",{speed:r.displayedSpeed}))}speedUp(){this.adjustPlaybackSpeed(this.audioSpeedIndex+1)}speedDown(){this.adjustPlaybackSpeed(this.audioSpeedIndex-1)}adjustVolume(e){if(Ui(),!this.controller.getAudio()){ge(this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled"));return}let r=this.tonegen.getAudioVolume(),i=e==="up"?Math.min(100,Math.round((r+.1)*100)):Math.max(0,Math.round((r-.1)*100));this.tonegen.setAudioVolume(i/100),this.playCurrentPoint(),ge(this.controller.s("graphing-calculator-narration-audio-trace-volume",{volume:i}))}zoom(e){this.grapher.viewportController.zoom(e)}setDefaultViewport(){this.grapher.viewportController.setDefaultViewport()}getFocusedCell(){return this.focusedCell}setFocusedCell(e){this.focusedCell=e}getAudioTraceActive(){return this.audioTraceActive}hearGraph(){if(Ui(),!this.controller.getAudio()){ge(this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled"));return}if(this.tonegen.getPlaybackSupported()){this.tonegen.stop();let e=this.agNavigator.getCurrentSketch();e&&Va(this.controller,e)?this.tonegen.playSketch(e,this.grapher.getCurrentViewport()):ge(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-trace-this-expression"))}else ge(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-play"))}stopGraph(){this.tonegen.getPlaybackSupported()&&this.tonegen.stop()}getAudioSpeedIndex(){return this.audioSpeedIndex}};var Cw=__dcg_shared_module_exports__['i'](Lc());var X3=10240;function Q3(t,e,r,i,n){let{dotSpacing:o}=t,a=1+o;var s=n.charCodeAt(0)-X3;s&1&&e.fillRect(r,i,1,1),s&2&&e.fillRect(r,i+a,1,1),s&4&&e.fillRect(r,i+2*a,1,1),s&8&&e.fillRect(r+a,i,1,1),s&16&&e.fillRect(r+a,i+a,1,1),s&32&&e.fillRect(r+a,i+2*a,1,1)}function xw(t,e){let{x:r,y:i,width:n,height:o}=e,a=t.getImageData(r,i,n,o).data;for(let s=3;s<a.length;s+=4)if(a[s]!==0)return!1;return!0}function Z3(t,e){let{x:r,y:i,width:n,height:o}=e,a=t.getImageData(r,i,n,o).data;for(let s=3;s<a.length;s+=4)if(a[s]===0)return!1;return!0}function CD(t,e,r,i,n){return xw(e,vw(t,r,i,n))}function eK(t,e,r,i,n){let{dotSpacing:o}=t,a=3+2*o;for(var s=0;s<n.length;s++)Q3(t,e,r+a*s,i,n[s])}function ql(t,e){let{dotSpacing:r}=t;return(2+r)*e.length+(1+r)*(e.length-1)}function ww(t,e){let{dotSpacing:r}=t;return 3+2*r}function vw(t,e,r,i){let{cellPadding:n}=t;return{x:e-n,y:r-n,width:ql(t,i)+2*n,height:ww(t,i)+2*n}}function yw(t,e){if(!t)return e;let r=Math.min(t.x,e.x),i=Math.min(t.y,e.y),n=Math.max(t.x+t.width,e.x+e.width)-r,o=Math.max(t.y+t.height,e.y+e.height)-i;return{x:r,y:i,width:n,height:o}}function CL(t,e,r){return Math.min(Math.max(t,e),r)}function uf(t,e,r,i,n){return{x:CL(r,0,e.canvas.width-ql(t,n)),y:CL(i,0,e.canvas.height-ww(t,n))}}function pf(t,e,r,i,n){let o=e.fillStyle;e.fillStyle="white";let a=vw(t,r,i,n);e.fillRect(a.x,a.y,a.width,a.height),e.fillStyle="black",eK(t,e,r,i,n),e.fillStyle=o}function SD(t,e,r,i){let{cellPadding:n}=t;return{x:Math.round(e-(ql(t,i)+n)),y:r}}function tK(t){return t.replace(/\u283C(?!$)/g,"")}function Ul(t,e){let r=e==="nemeth"?Cw.latexToNemeth(t):Cw.latexToUeb(t);return r.isError?"":tK(r.value)}function Cp(t,e){return e>=0?t*Math.pow(10,e):t/Math.pow(10,-e)}function EL(t,e,r,i){let[n,o]=r,a=Math.ceil(Math.log(o-n)/Math.LN10)-1,s=a,l=5,c=15;e:for(let h=a;a-h<4;h--)for(let p of[5,2,1]){let g=Cp(p,h),y=Math.floor(n/g)+1,w=Math.ceil(o/g)-1;var u=Math.abs(i(g)-i(0));let b=Ul(String(Cp(y*p,h)),e),D=Ul(String(Cp(w*p,h)),e);if(u<ql(t,b)+ql(t," ")||u<ql(t,D)+ql(t," ")||w-y>=c)break e;s=h,l=p}return{int:l,exp:s}}function DL(t,e,r){return EL(t,e,[r.viewport.xmin,r.viewport.xmax],i=>r.mapx(i))}function rK(t,e,r){return r.viewport.isSquare(r.screen,{xAxisScale:r.settings.xAxisScale,yAxisScale:r.settings.yAxisScale})?DL(t,e,r):EL(t,e,[r.viewport.ymin,r.viewport.ymax],i=>r.mapy(i))}function SL(t,e){let{int:r,exp:i}=t,[n,o]=e,a=Math.ceil(n/Cp(r,i)),s=Math.floor(o/Cp(r,i)),l=[];for(var c=a;c<=s;c++)l.push(Cp(c*r,i));return l}function iK(t,e,r){return{x:SL(DL(t,e,r),[r.viewport.xmin,r.viewport.xmax]),y:SL(rK(t,e,r),[r.viewport.ymin,r.viewport.ymax])}}function kL(t,e,r,i,n){if(r.margins===void 0||e===void 0)return;let o=nK(i),a=r.margins,s=__dcg_shared_module_exports__['b']({},e.settings),l=s.showGrid&&oK(i),c=!!s.showXAxis,u=!!s.showYAxis,h=!!s.xAxisNumbers,p=s.xAxisArrowMode,g=!!s.yAxisNumbers,y=s.yAxisArrowMode,w=o.graphLineWidth,b={showGrid:!1,xAxisNumbers:!1,xAxisArrowMode:"NONE",yAxisNumbers:!1,yAxisArrowMode:"NONE",showXAxis:!1,showYAxis:!1,graphLineWidth:w,pointLineWidth:2.5,curveOpacity:1,globalCurveColor:"#000",disableFill:!0};for(let A in b)e.settings[A]=b[A];let D=t.width-a.right-a.left,I=t.height-a.top-a.bottom,E=new Ac(D,I),G=e.getProjection().viewport;e.settings.squareAxes&&(G=G.squareCrop(E,e.settings));let T=new us(E,G,e.settings),P=t.getContext("2d"),_=document.createElement("canvas");_.width=D,_.height=I;let x=_.getContext("2d"),L=document.createElement("canvas");L.width=D,L.height=I;let R=L.getContext("2d"),q=document.createElement("canvas");q.width=D,q.height=I;let K=q.getContext("2d"),Y=document.createElement("canvas");Y.width=D,Y.height=I;let N=Y.getContext("2d"),j=document.createElement("canvas");j.width=D,j.height=I;let B=j.getContext("2d");if(P!==null&&N!==null&&x!==null&&K!==null&&B!==null&&R!==null){e.settings.disableFill=!0,e.screenshotToCanvas(Y,{width:D,height:I,targetPixelRatio:1,transparentBackground:!0}),e.settings.disableFill=!1,e.screenshotToCanvas(_,{width:D,height:I,targetPixelRatio:1,transparentBackground:!0}),P.fillStyle="white",P.fillRect(0,0,t.width,t.height);let A=Math.round(T.mapx(0)),$=Math.round(T.mapy(0)),J=s.xAxisLabel!==""?s.xAxisLabel.replace(/ /g,"\\ "):"x",ue=s.yAxisLabel!==""?s.yAxisLabel.replace(/ /g,"\\ "):"y",te=1;if(c&&T.coordsAreOnscreen(D-6,$-8,0)){let ce=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},o),{cellPadding:o.cellPadding+te}),Ee=2+2*ww(ce,J),H=D-2,he=$-Ee,De=Ul(J,n);({x:H,y:he}=SD(ce,H,he,De)),{x:H,y:he}=uf(ce,x,H,he,De),pf(ce,B,H,he,De)}if(u&&T.coordsAreOnscreen(A+4,1,0)){let ce=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},o),{cellPadding:o.cellPadding+te}),Ee=A+4,H=1,he=Ul(ue,n);({x:Ee,y:H}=uf(ce,x,Ee,H,he)),pf(ce,B,Ee,H,he)}let{x:Ae,y:Se}=iK(o,n,T);if(c){let ce;for(let Ee of Ae){if(Ee===0&&u)continue;let H=Math.round(T.mapx(Ee));if(!(H<2||H>T.screen.width-2)&&h){let he=ql(o,Ul("-1",n))-ql(o,Ul("1",n)),De=Ee<0?he+1:1,_e=H-De,Me=$+4,He=Ul(""+Ee,n);({x:_e,y:Me}=uf(o,B,_e,Me,He)),CD(o,N,_e,Me,He)&&(pf(o,B,_e,Me,He),ce=yw(ce,vw(o,_e,Me,He)))}}o.embossPatternInequalities&&ce&&(ce=yw(ce,{x:0,y:$,width:D,height:0}),K.fillStyle="white",K.fillRect(ce.x,ce.y,ce.width,ce.height))}if(u){let ce;for(let Ee of Se){if(Ee===0&&c)continue;let H=Math.round(T.mapy(Ee));if(H<2||H>T.screen.height-2)continue;let he=-Math.ceil(ww(o," ")/2);if(g){let De=A-4,_e=H+he,Me=Ul(""+Ee,n);({x:De,y:_e}=SD(o,De,_e,Me)),{x:De,y:_e}=uf(o,B,De,_e,Me),CD(o,N,De,_e,Me)&&(pf(o,B,De,_e,Me),ce=yw(ce,vw(o,De,_e,Me)))}}o.embossPatternInequalities&&ce&&(ce=yw(ce,{x:A,y:0,width:0,height:I}),K.fillStyle="white",K.fillRect(ce.x,ce.y,ce.width,ce.height))}if(c&&u){let ce=A-2,Ee=$+2,H=Ul(h||g?"0":"o",n);({x:ce,y:Ee}=SD(o,ce,Ee,H)),T.coordsAreOnscreen(ce,Ee,0)&&({x:ce,y:Ee}=uf(o,B,ce,Ee,H),CD(o,N,ce,Ee,H)&&pf(o,B,ce,Ee,H))}for(let ce of Ae){let Ee=Math.round(T.mapx(ce));Ee<2||Ee>T.screen.width-2||u&&ce===0||l&&hf(K,"white",Ee-1,0,I,3)}for(let ce of Se){let Ee=Math.round(T.mapy(ce));Ee<2||Ee>T.screen.height-2||c&&ce===0||l&&gf(K,"white",Ee-1,0,D,3)}c&&gf(K,"white",$-3,0,D,7),u&&hf(K,"white",A-3,0,I,7);for(let ce of Ae){let Ee=Math.round(T.mapx(ce));Ee<2||Ee>T.screen.width-2||u&&ce===0||(l?hf(K,bw(i),Ee,0,I):c&&hf(K,bw(i),Ee,$-3,$+2))}for(let ce of Se){let Ee=Math.round(T.mapy(ce));Ee<2||Ee>T.screen.height-2||c&&ce===0||(l?gf(K,bw(i),Ee,0,D):u&&gf(K,bw(i),Ee,A-3,A+2))}if(c&&gf(K,vp(i),$,0,D),u&&hf(K,vp(i),A,0,I),y!=="NONE"&&(cK(K,vp(i),A,0),y==="BOTH"&&lK(K,vp(i),A,I-1)),p!=="NONE"&&(aK(K,vp(i),D-1,$),p==="BOTH"&&sK(K,vp(i),0,$)),o.embossPatternInequalities)for(let ce=0;ce<D;ce+=6)for(let Ee=0;Ee<I;Ee+=6){let H={x:ce,y:Ee,width:3,height:3};Z3(x,H)&&xw(K,H)&&xw(N,H)&&xw(B,H)&&dK(R,"black",ce,Ee)}o.embossPatternInequalities||P.drawImage(_,a.left,a.top),P.drawImage(q,a.left,a.top),P.drawImage(Y,a.left,a.top),P.drawImage(j,a.left,a.top),o.embossPatternInequalities&&P.drawImage(L,a.left,a.top)}for(let A in b)e.settings[A]=s[A]}function nK(t){if(t==="etc8"||t==="etc11")return{dotSpacing:0,cellPadding:1,graphLineWidth:1.75,embossPatternInequalities:!0};if(t==="vpmax8"||t==="vpmax11")return{dotSpacing:1,cellPadding:2,graphLineWidth:1,embossPatternInequalities:!1};{let e=t;throw new Error(`Unexpected embosser model ${e}`)}}function oK(t){if(t==="etc8"||t==="etc11")return!1;if(t==="vpmax8"||t==="vpmax11")return!0;{let e=t;throw new Error(`Unexpected embosser model ${e}`)}}function vp(t){switch(t){case"vpmax8":case"vpmax11":return"rgb(145, 145, 145)";case"etc8":case"etc11":return"rgb(0, 0, 0)";default:let e=t;throw new Error("Unexpected embosser model: "+e)}}function bw(t){switch(t){case"vpmax8":case"vpmax11":return"rgb(219, 219, 219)";case"etc8":case"etc11":return"rgb(0, 0, 0)";default:let e=t;throw new Error("Unexpected embosser model: "+e)}}function hf(t,e,r,i,n,o=1){let a=t.fillStyle;t.fillStyle=e,t.fillRect(r-1,i,o,n-i),t.fillStyle=a}function gf(t,e,r,i,n,o=1){let a=t.fillStyle;t.fillStyle=e,t.fillRect(i,r-1,n-i,o),t.fillStyle=a}function aK(t,e,r,i){let n=t.fillStyle;t.fillStyle=e;for(var o=-2;o<=2;o++)t.fillRect(r-Math.abs(o),i-1+o,1,1);t.fillStyle=n}function sK(t,e,r,i){let n=t.fillStyle;t.fillStyle=e;for(var o=-2;o<=2;o++)t.fillRect(r+Math.abs(o),i-1+o,1,1);t.fillStyle=n}function lK(t,e,r,i){let n=t.fillStyle;t.fillStyle=e;for(var o=-2;o<=2;o++)t.fillRect(r-1+o,i-Math.abs(o),1,1);t.fillStyle=n}function cK(t,e,r,i){let n=t.fillStyle;t.fillStyle=e;for(var o=-2;o<=2;o++)t.fillRect(r-1+o,i+Math.abs(o),1,1);t.fillStyle=n}function dK(t,e,r,i){let n=t.fillStyle;t.fillStyle=e,t.fillRect(r+1,i,1,1),t.fillRect(r,i+1,1,1),t.fillRect(r+1,i+1,1,1),t.fillRect(r+2,i+1,1,1),t.fillRect(r+1,i+2,1,1),t.fillStyle=n}var Sp={};Sp.vpmax8={width:170,height:220,margins:{left:5,top:15,right:5,bottom:50},name:t=>t.s("graphing-calculator-label-braille-size-vpmax8")};Sp.vpmax11={width:230,height:220,margins:{left:15,top:15,right:5,bottom:5},name:t=>t.s("graphing-calculator-label-braille-size-vpmax11")};Sp.etc8={width:96,height:96,margins:{left:5,top:15,right:0,bottom:0},name:t=>t.s("graphing-calculator-label-braille-size-etc8")};Sp.etc11={width:132,height:134,margins:{left:10,top:15,right:5,bottom:5},name:t=>t.s("graphing-calculator-label-braille-size-etc11")};var go=__dcg_shared_module_exports__['i'](ne());var{If:pK}=go.Components,Sw=class extends go.Class{init(){this.grapher=this.props.grapher(),this.controller=this.grapher.controller,this.width=0,this.height=0,this.devicePixelRatio=window.devicePixelRatio||1}template(){return go.createElement("div",{class:go.const("dcg-graph-outer"),role:go.const("img"),"aria-roledescription":()=>this.controller.s("graphing-calculator-narration-graphpaper-label"),didMount:e=>this.rootNode=e,manageFocus:this.const(ut({controller:this.controller,location:{type:"graph-paper"}}))},go.createElement(pK,{predicate:()=>this.isIOSAndIframe()},()=>go.createElement("div",{style:go.const("width:1px; height:.5px; pointer-events:none; opacity: 0;"),"aria-hidden":go.const("true")},go.const("text"))),go.createElement("canvas",{class:go.const("dcg-graph-inner"),didMount:e=>{this.canvasNode=e,this.ctx=this.canvasNode.getContext("2d"),this.resize(0,0)},style:()=>({position:"relative",display:"block",outline:"none","-webkit-transform":this.isIOSAndIframe()?"translate3d(0,-.25px,0)":void 0})}))}isIOSAndIframe(){return fu&&El}resize(e,r,i){var n;i=i||this.devicePixelRatio,!(e===this.width&&r===this.height)&&(this.width=e,this.height=r,this.canvasNode.style.width=e+"px",this.canvasNode.style.height=r+"px",this.canvasNode.setAttribute("width",""+e*i),this.canvasNode.setAttribute("height",""+r*i),this.ctx=this.canvasNode.getContext("2d"),(n=this.ctx)==null||n.scale(i,i),this.update())}getAriaLabel(e){if(this.grapher.type==="3d")return"";let r=this.grapher.getAudioTrace();if(!r)return"";let i=this.controller.s("graphing-calculator-narration-graphpaper-label")+". "+r.getAxesDescription();return e===0||r.getAudioTraceActive()||r.agNavigator.getFirstTraceableSketch({selectAssociatedExpression:!1})!==void 0&&(gi?i+=" "+this.controller.s("graphing-calculator-narration-audio-instructions-enter-audio-trace-mac"):i+=" "+this.controller.s("graphing-calculator-narration-audio-instructions-enter-audio-trace-windows")),i}updateAria(e,r){this.rootNode.setAttribute("aria-hidden",!e||!this.grapher.settings.config.graphpaper?"true":"false"),this.rootNode.setAttribute("tabindex",e&&this.grapher.settings.config.graphpaper&&this.grapher.settings.config.enableTabindex&&(r>0||this.controller.isGeoUIActive())?"0":"-1"),this.rootNode.setAttribute("aria-label",this.getAriaLabel(r)),this.update()}};var Lr=__dcg_shared_module_exports__['i'](ne());at();function Ew(t,e,r){return Math.max(e,Math.min(r,t))}var Ep=class{constructor(e){let r=e.data,i=e.width,n=e.height;this.imageData=e;for(let l=1;l<i;l++)r[l]+=r[l-1];for(let l=1;l<n;l++)r[l*i]+=r[l*i-i];let o=i*n-i-n+1,a=i-1;for(var s=0;s<o;s++){let l=1+s%a,u=(1+Math.floor(s/a))*i,h=l-1+u,p=l+u-i,g=l-1+u-i;r[u+l]+=r[h]+r[p]-r[g]}}getSumForValidRect(e){let r=e.left-1,i=e.right-1,n=e.top-1,o=e.bottom-1,a=this.imageData.width,s=this.imageData.data,l=s[r+n*a],c=s[i+n*a],u=s[r+o*a],h=s[i+o*a];return r>=0&&n>=0?h-c-u+l:r>=0?h-u:n>=0?h-c:h}getSum(e){let r={left:Ew(Math.floor(e.left),0,this.imageData.width),right:Ew(Math.ceil(e.right),0,this.imageData.width),top:Ew(Math.floor(e.top),0,this.imageData.height),bottom:Ew(Math.ceil(e.bottom),0,this.imageData.height)};return r.left>=r.right||r.top>=r.bottom?0:this.getSumForValidRect(r)}};var Oc=1/2,Pc=document.createElement("canvas"),ED=[];function hK(t,e){if(!(e.width*e.height>0))return new Ep({width:0,height:0,data:[]});Pc.width=0,Pc.width=Math.round(e.width*Oc),Pc.height=Math.round(e.height*Oc);let i=Pc.getContext("2d");i.save(),i.scale(Pc.width/t.canvas.width,Pc.height/t.canvas.height),i.drawImage(t.canvas,0,0),i.restore();var n=i.getImageData(0,0,Pc.width,Pc.height),o=n.data;o.length/4,ED.length,ED=new Array(o.length/4);for(var a=ED,s=0;s<a.length;s++)a[s]=o[s*4+3];var l=new Ep({width:n.width,height:n.height,data:a});return l}function IL(t){for(var e=0;e<t.length;e++){var r=gK(e,t);t[e]=[r]}return t.map(function(i){return i[0]})}function gK(t,e){var r=1/0,i=-1,n=e[t];if(n.length===1)return n[0];for(var o=0;o<n.length;o++){var a=e[t][o].staticScore,s=fK(t,o,e),l=a+s;(i===-1||l<r)&&(r=l,i=o)}return n[i]}function fK(t,e,r){for(var i=0,n=r[t][e],o=0;o<r.length;o++)if(o!==t){for(var a=0,s=r[o],l=s.length-1;l>=0;l--){var c=s[l],u=Math.max(0,Math.min(n.right,c.right)-Math.max(n.left,c.left)),h=Math.max(0,Math.min(n.bottom,c.bottom)-Math.max(n.top,c.top));a+=u*h}i+=a/s.length}return i}function mK(t,e){var r=e.getSum({left:t.left*Oc,right:t.right*Oc,top:t.top*Oc,bottom:t.bottom*Oc});return r/=200,r/=Oc*Oc,r}function yK(t,e){var r=0;return e.forEach(function(i){r+=ML(t,i)}),r}function bK(t,e){var r=ML(t,e);return 10*(t.width*t.height-r)}function ML(t,e){var r=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left)),i=Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top));return r*i}function TL(t,e,r){let i;return()=>(i||(i={domObstructions:r,viewport:{left:0,right:e.width,top:0,bottom:e.height},integralImage:hK(t,e)}),i)}function Dw(t,e){if(!(e.length<=1)){var r=t();for(var i of e)i.staticScore+=bK(i,r.viewport),i.staticScore+=yK(i,r.domObstructions),i.staticScore+=mK(i,r.integralImage)}}function GL(t,e){var r=e.nakedLabel?0:e.pt_radius,i=Math.round(r/Math.sqrt(2)),n=[],o=e.pt_x,a=e.pt_y,s=e.width,l=e.height,c=400;n.push({cx_s:0,cy_s:0,cx_a:0,cy_a:0,staticScore:c,orientation:"center",matches:{default:1,center:1,center_auto:1,auto_center:1}}),n.push({cx_s:.5,cx_a:r+3,cy_s:0,cy_a:0,staticScore:c,orientation:"right",matches:{default:1,right:1,center_auto:1,auto_right:1}}),n.push({cx_s:-.5,cx_a:-r-3,cy_s:0,cy_a:0,staticScore:c,orientation:"left",matches:{default:1,left:1,center_auto:1,auto_left:1}}),n.push({cx_s:0,cx_a:0,cy_s:-.5,cy_a:-r,staticScore:c,orientation:"above",matches:{default:1,above:1,auto_center:1,above_auto:1}}),n.push({cx_s:-.5,cx_a:-i,cy_s:-.5,cy_a:-i,staticScore:c,orientation:"tl",matches:{default:1,above_left:1,above_auto:1,auto_left:1}}),n.push({cx_s:.5,cx_a:i,cy_s:-.5,cy_a:-i,staticScore:c,orientation:"tr",matches:{default:1,above_right:1,above_auto:1,auto_right:1}}),n.push({cx_s:0,cx_a:0,cy_s:.5,cy_a:r,staticScore:c,orientation:"below",matches:{default:1,below:1,auto_center:1,below_auto:1}}),n.push({cx_s:-.5,cx_a:-i,cy_s:.5,cy_a:i,staticScore:c,orientation:"bl",matches:{default:1,below_left:1,below_auto:1,auto_left:1}}),n.push({cx_s:.5,cx_a:i,cy_s:.5,cy_a:i,staticScore:c,orientation:"br",matches:{default:1,below_right:1,below_auto:1,auto_right:1}});var u=Math.cos(e.rotation),h=Math.sin(e.rotation),p=n.map(function(g){var y=g.cx_s*s+g.cx_a,w=g.cy_s*l+g.cy_a;let b=y*u-w*h,D=w*u+y*h,I=`calc(${g.cx_s*100-50}% + ${g.cx_a}px)`,E=`calc(${g.cy_s*100-50}% + ${g.cy_a}px)`,G=-s/2,T=s/2,P=-l/2,_=l/2;if(e.rotation){let x=xK([{x:G*u-P*h,y:P*u+G*h},{x:G*u-_*h,y:_*u+G*h},{x:T*u-P*h,y:P*u+T*h},{x:T*u-_*h,y:_*u+T*h}]);G=x.left,T=x.right,P=x.top,_=x.bottom}return G=Math.round(o+b+G),T=Math.round(o+b+T),P=Math.round(a+D+P),_=Math.round(a+D+_),{pt_x:Math.round(o),pt_y:Math.round(a),left:G,right:T,top:P,bottom:_,width:T-G,height:_-P,transform:`translate(${I},${E})`,staticScore:e.priorOrientation===g.orientation?g.staticScore-20:g.staticScore,orientation:g.orientation,matches:g.matches}});return e.enforceOrientation&&e.enforceOrientation!=="default"?p=__dcg_shared_module_exports__['m'](p,function(g){return!!g.matches[e.enforceOrientation]}):e.nakedLabel?p=__dcg_shared_module_exports__['m'](p,function(g){return g.orientation==="center"}):e.keepOrientation&&e.priorOrientation?p=__dcg_shared_module_exports__['m'](p,function(g){return g.orientation===e.priorOrientation}):p=__dcg_shared_module_exports__['m'](p,function(g){return g.orientation!=="center"}),Dw(t,p),p}function AL(t,e){var r=[],i=e.width,n=e.height,o=i/2,a=n/2,s=e.pt_x1,l=e.pt_y1,c=e.pt_x2,u=e.pt_y2,h=5,p=(u-l)/(c-s),g=Math.atan2(u-l,c-s)+Math.PI/2,y=h*Math.cos(g),w=h*Math.sin(g),b=Math.min(l,u)-Math.abs(w)-n,D=Math.max(l,u)+Math.abs(w),I=[.5,.4,.6,.2,.8],E=[0,20,20,40,40],G=[];for(let R of I)G.push({x:s*(1-R)+c*R,y:l*(1-R)+u*R});for(let R=0;R<G.length;R++){let q=G[R];var T,P,_,x;if(p>=2||p<=-2){_=x=q.y-a;let j=Math.abs((c-s)/(u-l)*a)+Math.abs(y);T=q.x+j,P=q.x-j-i}else if(p<=.05&&p>=-.05){T=P=q.x-o;let j=Math.abs(p*o)+Math.abs(w);_=q.y-j-n,x=q.y+j}else y>0?(T=q.x+y,P=q.x-y-i):(T=q.x+y-i,P=q.x-y),w>0?(_=q.y+w,x=q.y-w-n):(_=q.y+w-n,x=q.y-w);_<b?_=b:_>D&&(_=D),x<b?x=b:x>D&&(x=D);let K=(c-s)*(_-l)-(u-l)*(T-s)>0,Y=R.toString()+(K?"-a":"-b");r.push({pt_x:q.x,pt_y:q.y,left:T,top:_,staticScore:E[R],orientation:Y,matches:{[Y]:1}});let N=R.toString()+(K?"-b":"-a");r.push({pt_x:q.x,pt_y:q.y,left:P,top:x,staticScore:E[R],orientation:N,matches:{[N]:1}})}var L=r.map(function(R){let q=Math.round(R.left),K=Math.round(R.left+i),Y=Math.round(R.top),N=Math.round(R.top+n);return{pt_x:Math.round(R.pt_x),pt_y:Math.round(R.pt_y),transform:`translate(${R.left-R.pt_x}px,${R.top-R.pt_y}px)`,left:q,right:K,top:Y,bottom:N,width:K-q,height:N-Y,staticScore:e.priorOrientation===R.orientation?R.staticScore-20:R.staticScore,orientation:R.orientation,matches:R.matches}});return e.keepOrientation&&e.priorOrientation&&(L=__dcg_shared_module_exports__['m'](L,function(R){return R.orientation===e.priorOrientation})),Dw(t,L),L}function VL(t,e){var r=[],i=e.pt_x,n=e.pt_y,o=e.width,a=e.height;let s=-(e.startAngle+e.deltaAngle/2),l=e.isRightAngle?e.radius*Math.sqrt(2):e.radius+4,c=l+Math.sqrt(e.width*e.width/4+e.height*e.height/4),u=[],h=c*Math.sin(s);h>l+1/2*a&&(h=l+1/2*a),h<-l-1/2*a&&(h=-l-1/2*a),u.push({x:i+c*Math.cos(s)-o/2,y:n+h-a/2});for(let g=0;g<u.length;g++){let y=u[g],w=g.toString()+"-a";r.push({pt_x:y.x,pt_y:y.y,left:y.x,top:y.y,staticScore:0,orientation:w,matches:{[w]:1}})}var p=r.map(function(g){let y=Math.round(g.left),w=Math.round(g.left+o),b=Math.round(g.top),D=Math.round(g.top+a);return{pt_x:Math.round(g.pt_x),pt_y:Math.round(g.pt_y),transform:`translate(${g.left-g.pt_x}px,${g.top-g.pt_y}px)`,left:y,right:w,top:b,bottom:D,width:w-y,height:D-b,staticScore:e.priorOrientation===g.orientation?g.staticScore-20:g.staticScore,orientation:g.orientation,matches:g.matches}});return e.keepOrientation&&e.priorOrientation&&(p=__dcg_shared_module_exports__['m'](p,function(g){return g.orientation===e.priorOrientation})),Dw(t,p),p}function LL(t,e){for(var r=[],i=e.width,n=e.height,o=10,a=Math.round(o/Math.sqrt(2)),s=0,l=50,c=0,u=0,h=0,p=0;p<e.path.length-2;p+=2)h+=1,c+=e.path[p],u+=e.path[p+1];var g=c/h,y=u/h;r.push({left:g-i/2,top:y-n/2,staticScore:s,orientation:"center",matches:{center:1}}),r.push({left:g+o+3,top:y-n/2,staticScore:l,orientation:"right",matches:{right:1}}),r.push({left:g-(o+i)-3,top:y-n/2,staticScore:l,orientation:"left",matches:{left:1}}),r.push({left:g-i/2,top:y-(n+o),staticScore:l,orientation:"top",matches:{top:1}}),r.push({left:g-(i+a),top:y-(n+a),staticScore:l,orientation:"tl",matches:{tl:1}}),r.push({left:g+a,top:y-(n+a),staticScore:l,orientation:"tr",matches:{tr:1}}),r.push({left:g-i/2,top:y+o,staticScore:l,orientation:"bottom",matches:{bottom:1}}),r.push({left:g-(i+a),top:y+a,staticScore:l,orientation:"bl",matches:{bl:1}}),r.push({left:g+a,top:y+a,staticScore:l,orientation:"br",matches:{br:1}});var w=r.map(function(b){let D=Math.round(b.left),I=Math.round(b.left+i),E=Math.round(b.top),G=Math.round(b.top+n);return{pt_x:Math.round(g),pt_y:Math.round(y),transform:`translate(${b.left-g}px,${b.top-y}px)`,left:D,right:I,top:E,bottom:G,width:I-D,height:G-E,staticScore:e.priorOrientation===b.orientation?b.staticScore-20:b.staticScore,orientation:b.orientation,matches:b.matches}});return e.keepOrientation&&e.priorOrientation&&(w=__dcg_shared_module_exports__['m'](w,function(b){return b.orientation===e.priorOrientation})),Dw(t,w),w}function xK(t){let e=t[0].x,r=t[0].x,i=t[0].y,n=t[0].y;for(var o=t.length-1;o>=1;o--){let{x:a,y:s}=t[o];a<e&&(e=a),a>r&&(r=a),s<i&&(i=s),s>n&&(n=s)}return{left:e,right:r,top:i,bottom:n}}var kw=__dcg_shared_module_exports__['i'](ne());at();var ze=class extends kw.Class{template(){return this.children.length===1?this.children[0]:kw.createElement("div",{didMount:t=>this.didMountMathquill(t)})}didMount(){this.children.length===1&&this.didMountMathquill(this.findRootNode())}didMountMathquill(t){this.staticMath=Uo.StaticMath(t,__dcg_shared_module_exports__['b']({},this.props.config())),V(t).addClass("dcg-static-mathquill-view"),this.updateMathquill()}didUpdate(){this.updateMathquill()}updateMathquill(){this.updateMathquillAria(),this.updateMathquillLatex()}updateMathquillLatex(){if(!this.staticMath)return;let t=this.props.latex();this.lastLatex!==t&&(this.staticMath.latex(t),this.lastLatex=t,this.props.onReflow&&this.props.onReflow())}updateMathquillAria(){if(!this.staticMath||!this.props.getAriaLabel)return;let t=this.props.getAriaLabel();t!==this.staticMath.getAriaLabel()&&this.staticMath.setAriaLabel(t)}};var Do=__dcg_shared_module_exports__['i'](ne());at();function Dp(t){let e=__dcg_shared_module_exports__['Lb'](t),r=0;for(;!__dcg_shared_module_exports__['Nb'](e);)r+=1,e=__dcg_shared_module_exports__['Mb'](e);return r}var La=__dcg_shared_module_exports__['i'](ne());var{If:vK}=La.Components,_c=class extends La.Class{init(){this.controller=this.props.controller()}template(){return La.createElement("span",{class:()=>{let e=this.parentOrChildHovered();return{"dcg-geo-token-view":!0,"dcg-selected-token":this.isTokenSelected(),"dcg-hidden-token":this.isHidden(),"dcg-token-has-label":this.hasLabel(),"dcg-child-of-hovered-token":e==="child","dcg-parent-of-hovered-token":e==="parent"}},style:()=>({"font-family":"dcg-icons",color:this.getColor()}),role:()=>this.props.insideGroup()?"option":"button","aria-roledescription":()=>this.props.insideGroup()?void 0:this.controller.s("graphing-calculator-narration-geometry-construction-role-description"),"aria-label":this.bindFn(this.getAriaLabel),"aria-selected":this.bindFn(this.isTokenSelected),tabindex:()=>this.props.putInTabOrder()?0:-1,manageFocus:()=>this.props.focusLocation?ut({controller:this.controller,location:this.props.focusLocation()}):void 0,onTapStart:this.bindFn(this.onTapStart),onTap:this.bindFn(this.onTap),onPointerOver:this.bindFn(this.onPointerOver),onPointerOut:this.bindFn(this.onPointerOut)},La.createElement("span",{class:La.const("dcg-token-background")}),La.createElement("span",{class:()=>({"dcg-token-icon":!0,[`dcg-token-${this.getIconType()}`]:!0,"dcg-token-is-list":this.getIsList()})},()=>this.getIcon()),La.createElement(vK,{predicate:()=>this.hasLabel()},()=>La.createElement("span",{class:()=>({"dcg-token-label":!0})},()=>this.getTokenInfo().label)))}getIdFromParentRef(e){if(e)return this.controller.getExpressionIdForToken(e[0].substring(1))}parentOrChildHovered(){var c,u,h,p,g,y;if(!this.props.showParentChildrenHover||!this.props.showParentChildrenHover())return!1;let e=this.controller.getHoveredToken();if(!e)return!1;let r=this.controller.getExpressionIdForToken(e),i=this.props.tokenId(),n=this.props.controller().getExpressionIdForToken(i)||"";if(!r)return!1;let o=this.controller.getItemModel(r),a=this.controller.getItemModel(n);if(!o||o.type!=="expression"||!a||a.type!=="expression")return!1;let s=((h=(u=(c=o.formula)==null?void 0:c.geometry)==null?void 0:u.call)==null?void 0:h.parents)||[],l=((y=(g=(p=a.formula)==null?void 0:p.geometry)==null?void 0:g.call)==null?void 0:y.parents)||[];for(let w=0;w<s.length;w++)if(this.getIdFromParentRef(s[w])===n)return"parent";for(let w=0;w<l.length;w++)if(this.getIdFromParentRef(l[w])===r)return"child";return!1}willUnmount(){this.implicitMouseOut()}didUpdate(){let e=this.props.tokenId();this.currentlyActiveTokenId&&e!==this.currentlyActiveTokenId&&this.implicitMouseOut()}implicitMouseOut(){this.currentlyActiveTokenId&&this.controller.runAfterDispatch(()=>{let e=this.currentlyActiveTokenId;e&&(this.currentlyActiveTokenId=void 0,this.controller.dispatch({type:"unset-active-token",id:e,style:"hovered"}))})}hasLabel(){return!!this.getTokenInfo().label}isHidden(){var e=this.getTokenInfo();return e.overrideHidden!==void 0?e.overrideHidden:e.isHidden}getIcon(){let e=this.getTokenInfo();if(!e||e.hasError)return"\uE241";switch(e.iconType){case"point":case"glider":case"intersection":case"strictintersection":case"midpoint":return"\uE21A";case"ray":case"line":case"segment":case"perpendicular":case"parallel":case"circle":case"arc":case"angle":case"angles":case"directedangle":case"directedangles":case"translation":case"dilation":case"rotation":case"reflection":case"transformation":return;case"polygon":return"\uE226";default:return"?"}}getLabel(){return this.getTokenInfo().label}getAriaLabel(){let{description:e}=this.getTokenInfo();return this.isHidden()?this.controller.s("graphing-calculator-narration-geometry-hidden-construction-description",{description:e}):e}getColor(){let e=this.getTokenInfo();return this.isHidden()&&!e.hasError?"#aaa":e.color}getIconType(){return this.getTokenInfo().iconType}getIsList(){return this.getTokenInfo().isList}getTokenInfo(){let e=this.props.tokenId();return this.controller.getTokenRenderInfoById(e)}onPointerOver(e){e.pointerType==="mouse"&&(this.currentlyActiveTokenId=this.props.tokenId(),this.controller.dispatch({type:"set-active-token",id:this.currentlyActiveTokenId,style:"hovered"}))}onPointerOut(e){e.pointerType==="mouse"&&this.currentlyActiveTokenId&&(this.controller.dispatch({type:"unset-active-token",id:this.currentlyActiveTokenId,style:"hovered"}),this.currentlyActiveTokenId=void 0)}onTapStart(e){e.handle()}onTap(e){e.handle(),this.controller.dispatch({type:"select-expression-that-defines-token",id:this.props.tokenId(),toggle:this.isTokenSelected(),multiSelectMode:this.controller.isMultiSelectEnabled()&&!!e.shiftKey})}isTokenSelected(){let e=this.controller.getTokenRenderInfoById(this.props.tokenId());return!!(e&&e.isSelected)}};var{If:CK}=Do.Components,kp=500,qe=class extends Do.Class{constructor(){super(...arguments),this.lastLatexProp="",this.wasFocusedLastUpdate=!1}init(){this.props.tokenController&&(this.tokenController=this.props.tokenController())}template(){return Do.createElement("div",{class:Do.const("dcg-mq-container")},Do.createElement(CK,{predicate:()=>this.getPlaceholder().trim().length>0},()=>Do.createElement("span",{class:Do.const("dcg-mq-placeholder")},Do.createElement(ze,{config:()=>this.props.config(),latex:()=>this.getPlaceholder()}))),Do.createElement("div",{class:()=>({"dcg-math-field":!0,"dcg-no-fadeout":this.props.noFadeout&&this.props.noFadeout(),"dcg-invalid":this.props.hasError(),"dcg-focus":this.props.isFocused()}),didMount:e=>this.didMountMathquill(e),"data-dcg-label":()=>this.props.dataLabelAttributeValue?this.props.dataLabelAttributeValue():void 0}))}didMount(){this.children.length===1&&this.didMountMathquill(this.findRootNode())}willUnmount(){this.$mathField.off(".view"),this.mathField=void 0}getPlaceholder(){return!this.props.placeholder||this.props.isFocused()||this.props.latex()?"":this.props.placeholder()}didMountMathquill(e){let r=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props.config()),{handlers:{reflow:i=>{this.props.onReflow&&this.mathField&&this.props.onReflow(i)}},onCut:()=>{this.mathField&&this.props.onUserChangedLatex(this.mathField.latex())},onPaste:()=>{this.mathField&&this.props.onUserChangedLatex(this.mathField.latex())},overrideTypedText:i=>{this.mathField&&this.viewCanAcceptText(i)&&(this.props.onUserTypedText?this.props.onUserTypedText(i):(this.mathField.typedText(i),this.props.onUserChangedLatex(this.mathField.latex())))},overrideKeystroke:(i,n)=>{if(i==="Backspace"&&n.preventDefault(),!this.mathField)return;if(i==="Spacebar"&&this.props.disableSpace&&this.props.disableSpace())return n.preventDefault();let o=Le(n);if(o==="Up"||o==="Down"||o==="Left"||o==="Right"||o==="Esc"){let a=[];n.ctrlKey&&a.push("Ctrl"),n.metaKey&&a.push("Meta"),n.altKey&&a.push("Alt"),n.shiftKey&&a.push("Shift"),a.length?(a.push(o),i=a.join("-")):i=o}this.props.onUserPressedKey?this.props.onUserPressedKey(i,n):(this.mathField.keystroke(i,n),this.props.onUserChangedLatex(this.mathField.latex()))}});this.props.needsSystemKeypad&&this.props.needsSystemKeypad()&&(r.substituteTextarea=()=>V('<textarea autocorrect="off" autocapitalize="none" spellcheck="false" autocomplete="off">')[0]),this.$mathField=V(e),this.mathField=Uo.MathField(e,r),e._mqMathFieldInstance=this.mathField,e._mqViewInstance=this,this.$mathField.on("focusin.view focusout.view",i=>this.onFocusEvent(i)).on("paste.view",i=>this.onPasteEvent(i)),!Qy&&(fu||Jy)&&this.$mathField.on("keypress.view",i=>this.onKeypressEvent(i)),this.hookupMQTapTouch(),this.updateMathquill()}didUpdate(){this.updateMathquill()}updateMathquill(){this.updateMathquillAria(),this.updateMathquillLatex(),this.updateMathquillFocused(),this.updateMathquillPostLabel(),this.renderTokens()}onFocusEvent(e){let r=this.isFocused();r!==this.shouldBeFocused()&&this.props.onFocusedChanged(r,e)}onPasteEvent(e){let r="",i=window.clipboardData,n=e.originalEvent;i&&i.getData?r=i.getData("Text"):n&&n.clipboardData&&n.clipboardData.getData&&(r=n.clipboardData.getData("text/plain"));var o=this.viewCanAcceptText(r);return!o&&this.props.onExpressionSizeExceeded&&this.props.onExpressionSizeExceeded(),o}viewCanAcceptText(e){return qe.canAcceptText(this.mathField,this.props.capExpressionSize(),e)}renderTokens(){if(!this.$mathField)return;var e=this.tokenController;if(!e)return;var r=this.props.latex();if(!this.lastTokenInfo||this.lastTokenInfo.latex!==r)if(!e.doesLatexContainToken(r))this.lastTokenInfo={latex:r,tokens:[]};else{let o=[];this.$mathField.find(".dcg-mq-token").each(function(a,s){o.push(s)}),this.lastTokenInfo={latex:r,tokens:o}}let i=this.lastTokenInfo.tokens;for(let o of i){var n=o.dcgTokenView;if(n)n.update();else{let a=o.getAttribute("data-dcg-mq-token")||"",s=Do.mountToNode(_c,o,{controller:this.const(e),tokenId:this.const(a),insideMQ:this.const(!0),insideGroup:this.const(!1),putInTabOrder:this.const(!1)});o.dcgTokenView=s}}}static canAcceptText(e,r,i){if(!e)return!1;if(!r)return!0;let n=e.latex();return Dp(n)+Dp(i)<=kp}onKeypressEvent(e){if(e.stopPropagation(),e.preventDefault(),!!this.mathField){var r=e.key&&e.key.length===1?e.key:void 0;r&&this.viewCanAcceptText(r)&&(this.props.onUserTypedText?this.props.onUserTypedText(r):(this.mathField.typedText(r),this.props.onUserChangedLatex(this.mathField.latex())))}}hookupMQTapTouch(){this.$mathField.on("dcg-tap.view",e=>{if(e.device!=="touch"||e.wasHandled()||!this.mathField)return;let r=e.changedTouches[0];this.mathField.clickAt(r.clientX,r.clientY,r.target),this.isFocused()||this.mathField.focus();let i;setTimeout(function(){i=Date.now()},0),this.mathField.ignoreNextMousedown(function(){return i===void 0?!0:Date.now()-i<500})})}updateMathquillAria(){if(!this.mathField)return;let e=this.props.getAriaLabel();e!==this.mathField.getAriaLabel()&&this.mathField.setAriaLabel(e)}updateMathquillPostLabel(){this.mathField&&this.mathField.setAriaPostLabel(this.props.getAriaPostLabel(),this.props.hasError()?5e3:1e3)}updateMathquillLatex(){let e=this.props.latex();this.mathField&&this.lastLatexProp!==e&&(this.props.capExpressionSize()&&Dp(e)>kp||(this.lastLatexProp=e,this.mathField.latex()!==e&&this.mathField.latex(e)))}updateMathquillFocused(){if(!this.mathField)return;let e=this.isFocused(),r=this.shouldBeFocused();r&&r!==this.wasFocusedLastUpdate&&this.props.selectOnFocus&&this.props.selectOnFocus()&&this.mathField.select(),this.wasFocusedLastUpdate=r,e!==r&&(r?this.mathField.focus():this.mathField.blur())}isFocused(){return!!(document.activeElement&&V(document.activeElement).closest(this.$mathField).length)}shouldBeFocused(){return this.props.isFocused()}static getFocusedMathquill(){if(!document.activeElement)return;let e=V(document.activeElement).closest(".dcg-mq-editable-field")[0];if(e)return e._mqMathFieldInstance}static getMQViewInstance(e){let r=e.el();if(r)return r._mqViewInstance}static applyArrowKeyAndReturnIfWasAtBounds(e,r,i){var n=e.selection();let o=n.startIndex===0&&n.endIndex===n.latex.length;if((r==="Up"||r==="Down")&&o)return e.keystroke(r,i),!0;e.keystroke(r,i);var a=e.selection(),s=a.latex!==n.latex||a.startIndex!==n.startIndex||a.endIndex!==n.endIndex;return!s}static simulateKeypress(e,r){var i=qe.getMQViewInstance(e);i&&(i.props.onUserPressedKey?i.props.onUserPressedKey(r):(e.keystroke(r),i.props.onUserChangedLatex(e.latex())))}static simulateUserChangedLatex(e){var r=qe.getMQViewInstance(e);r&&r.mathField&&r.props.onUserChangedLatex(r.mathField.latex())}static handleKeystrokeAndDecideIfSpecialEvent(e,r,i){return r==="Enter"||r==="Delete"&&e.latex()===""||r==="Backspace"&&e.latex()===""?!0:r==="Up"||r==="Down"||r==="Left"||r==="Right"?qe.applyArrowKeyAndReturnIfWasAtBounds(e,r,i):(e.keystroke(r,i),!1)}};var{Input:SK}=Lr.Components,{For:PL,Switch:EK,IfElse:DK}=Lr.Components;function kK(t,e){return e?e.getPOIById(t):null}function IK(t,e){let r=1e3*(e.pixelsToMath.mapX(e.mathToPixels.mapX(t.x)+.5)-e.pixelsToMath.mapX(e.mathToPixels.mapX(t.x)-.5)),i=1e3*(e.pixelsToMath.mapY(e.mathToPixels.mapY(t.y)+.5)-e.pixelsToMath.mapY(e.mathToPixels.mapY(t.y)-.5));return{xscale:r,yscale:i}}function MK(t,e){var r,i=!1;let n="",o="";if(t.type==="poi"){let h=t.poi,{xscale:p,yscale:g}=IK(h,e);r=h.getLabel();let y=h.getGraphMode(),w;var a=h.type===1007&&h.getCompiledFunction();if(a){var s=y===1,l=s?h.y:h.x;if(w=__dcg_shared_module_exports__['Na'](l,p,g,a),s){var c=w[0];w[0]=w[1],w[1]=c}}else w=[__dcg_shared_module_exports__['Ma'](h.x,p),__dcg_shared_module_exports__['Ma'](h.y,g)];i=!isFinite(w[1].value),n=w[0].superscript?w[0].mantissa+"^{"+w[0].superscript+"}":w[0].string,o=w[1].superscript?w[1].mantissa+"^{"+w[1].superscript+"}":w[1].string,n==="undefined"&&(n="\\mathrm{undefined}"),o==="undefined"&&(o="\\mathrm{undefined}")}else r=t.text;var u=r&&__dcg_shared_module_exports__['Hc'](r);return r?u==="latex"?{is_hole:i,type:"latex",text:r.substr(1,r.length-2)}:u==="text"?{is_hole:i,type:"text",text:r}:{is_hole:i,type:"mixed",text:r}:t.type==="poi"?t.poi.hasEditableLabel()?{is_hole:i,type:"text",text:""}:{is_hole:i,type:"latex",text:"\\left("+n+",\\space "+o+"\\right)"}:{is_hole:i,type:"text",text:"?"}}function OL(t,e,r){let i=t.s("graphing-calculator-label-poi-unknown"),n=e.getProjection();if(!n)return i;let o=n.viewport;return o&&r&&(i=Sd(t,r.x,r.y,o)),i}var Ip=class extends Lr.Class{constructor(){super(...arguments),this.labelsDirty=!1}init(){this.grapher=this.props.grapher(),this.controller=this.grapher.controller,this.cachedLabelDict={},this.cachedLabelOrder=[],this.hoveredPOI=void 0,this.openedPOI2Sketch={},this.takingScreenshot=!1}template(){return Lr.createElement(PL,{each:()=>this.cachedLabelOrder},Lr.createElement("div",{class:Lr.const("dcg-graph-outer"),style:this.const({"z-index":0}),didMount:this.bindFn(this.didMountRoot)},e=>Lr.createElement("div",{class:()=>this.getLabelClasses(e),style:()=>this.getLabelStyles(e),didMount:r=>this.linkLabelContainerNode(e,r)},Lr.createElement("div",{class:Lr.const("dcg-pt"),style:()=>this.getDotStyles(e)}),Lr.createElement("div",{class:Lr.const("dcg-label"),didMount:r=>this.linkLabelDOMNode(e,r)},this.renderLabelContent(e)))))}renderLabelContent(e){return Lr.createElement(EK,{key:()=>this.getLabelContent(e).type},r=>r==="text"?Lr.createElement("span",{class:Lr.const("dcg-label-raw-text")},()=>this.getLabelContent(e).text):r==="latex"?Lr.createElement(ze,{latex:()=>this.getLabelContent(e).text,config:this.bindFn(this.getMQConfig)}):r==="mixed"?Lr.createElement(PL,{each:()=>__dcg_shared_module_exports__['Ic'](this.getLabelContent(e).text),key:(i,n)=>`${i}${n}`},Lr.createElement("span",null,i=>DK(()=>__dcg_shared_module_exports__['Hc'](i)==="latex",{true:()=>Lr.createElement(ze,{latex:()=>i.substr(1,i.length-2),config:this.bindFn(this.getMQConfig)}),false:()=>Lr.createElement("span",{class:Lr.const("dcg-label-raw-text")},()=>i)}))):r==="MATH"?Lr.createElement("div",{class:()=>({"dcg-editable-label-border":!0,"dcg-do-not-blur":!0,"dcg-focus":this.shouldEditableLabelBeFocused(e),"dcg-empty-label":this.getEditableLabelText(e).trim().length===0}),style:()=>({"border-color":__dcg_shared_module_exports__['dc'](this.getEditableLabelTextColor(e),.3)})},Lr.createElement(qe,{latex:()=>this.getEditableLabelText(e),placeholder:()=>"",isFocused:()=>this.shouldEditableLabelBeFocused(e),capExpressionSize:()=>!!this.controller.getGraphSettings().config.capExpressionSize,selectOnFocus:Lr.const(!1),config:this.bindFn(this.getMQConfig),getAriaLabel:()=>this.controller.s("graphing-calculator-narration-editable-point-label-at-coordinates",{coordinates:OL(this.controller,this.grapher,this.cachedLabelDict[e])}),getAriaPostLabel:this.const(""),onUserChangedLatex:i=>this.onLabelInput(i,e),onExpressionSizeExceeded:()=>this.controller.dispatch({type:"expression-size-exceeded"}),onFocusedChanged:i=>this.onEditableLabelFocusChange(i,e),hasError:this.const(!1),noFadeout:this.const(!0),needsSystemKeypad:()=>!this.controller.isKeypadEnabled()})):Lr.createElement("div",{class:()=>({"dcg-resizing-text-input-container":!0,"dcg-editable-label-border":!0,"dcg-focus":this.shouldEditableLabelBeFocused(e),"dcg-empty-label":this.getEditableLabelText(e).trim().length===0}),style:()=>({"border-color":__dcg_shared_module_exports__['dc'](this.getEditableLabelTextColor(e),.3)}),onScroll:i=>{i.target&&(i.target.scrollLeft=0)}},Lr.createElement(SK,{"aria-label":()=>this.controller.s("graphing-calculator-narration-editable-point-label-at-coordinates",{coordinates:OL(this.controller,this.grapher,this.cachedLabelDict[e])}),onInput:i=>this.onLabelInput(i,e),value:()=>this.getEditableLabelText(e),onFocus:()=>this.onEditableLabelFocusChange(!0,e),onBlur:()=>this.onEditableLabelFocusChange(!1,e)}),Lr.createElement("span",{class:Lr.const("dcg-text-input-content")},()=>this.getEditableLabelText(e)||" ")))}getSketchIdFromLabelId(e){var r=this.cachedLabelDict[e];if(r)return r.sketchId}getEditableLabelTextColor(e){let r=this.getSketchIdFromLabelId(e);if(!r)return"#000";let i=this.controller.getItemModel(r);return!i||i.type!=="expression"?"#000":rs(i)}onEditableLabelFocusChange(e,r){let i=this.getSketchIdFromLabelId(r);i&&(e?this.controller.dispatch({type:"set-focus-location",location:{type:"editable-label",id:i}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"editable-label",id:i}}),this.update())}shouldEditableLabelBeFocused(e){let r=this.getSketchIdFromLabelId(e),i=this.controller.getFocusLocation();return!(!i||i.type!=="editable-label"||!r||i.id!==r)}onLabelInput(e,r){let i=this.getSketchIdFromLabelId(r);if(!i)return;let n=this.controller.getItemModel(i);if(!n||n.type!=="expression")return;let o=e;this.controller.getItemEditableLabelMode(i)==="MATH"&&o.length>0&&(o="`"+o+"`"),this.controller.dispatch({type:"set-item-label",id:i,label:o})}getEditableLabelText(e){let r=this.getSketchIdFromLabelId(e);if(!r)return"";let i=this.controller.getItemModel(r);return!i||i.type!=="expression"?"":this.controller.getItemEditableLabelMode(r)==="MATH"?i.label.substr(1,i.label.length-2):i.label}linkLabelDOMNode(e,r){var i=this.cachedLabelDict[e];i&&(i.labelDOM=r)}linkLabelContainerNode(e,r){var i=this.cachedLabelDict[e];i&&(i.containerDOM=r)}getLabelClasses(e){var r=this.cachedLabelDict[e];return r?r.classes:{}}getLabelStyles(e){var r=this.cachedLabelDict[e];return r?r.styles:{}}getDotStyles(e){var r=this.cachedLabelDict[e];return r?r.dotStyles:{}}getLabelContent(e){var r=this.cachedLabelDict[e];if(r){let i=this.getSketchIdFromLabelId(e);if(!i)return{is_hole:!1,type:"text",text:""};let n=this.controller.getItemEditableLabelMode(i);return r.classes["dcg-editable-label"]&&n!==void 0&&n!=="NONE"?{is_hole:!1,type:n,text:""}:r.content}return{is_hole:!1,type:"text",text:""}}didMountRoot(e){this.node=e}computeHoveredLabel(e,r){var i;this.hoveredPOI?this.isOpenPOI(this.hoveredPOI)?this.grapher.setLayerClass("hoveredPOI","dcg-mouse-over-opened-poi"):(i=this.computeLabel({poi:this.hoveredPOI,type:"poi"},e,r,"hovered"),this.grapher.setLayerClass("hoveredPOI","dcg-mouse-over-closed-poi")):this.grapher.setLayerClass("hoveredPOI",void 0);var n=this.getHoveredInteractiveLabel();n&&!n.bareLabel?this.grapher.setLayerClass("interactiveLabel","dcg-mouse-over-opened-poi"):this.grapher.setLayerClass("interactiveLabel",void 0),i&&this.saveLabelToCache(i)}computeTraceLabel(e,r){if(this.traceInfo){var i=this.traceInfo.pt;if(i){var n=new Kl(i.x,i.y,1007,this.traceInfo.branchInfo.sketch,this.traceInfo.branchInfo.branch,0),o=this.computeLabel({poi:n,type:"poi"},e,r,"trace");o&&this.saveLabelToCache(o)}}}computeLabel(e,r,i,n){var o=e.type==="poi"?e.poi.id+"":e.id;n==="trace"&&(o="*trace*");var a=e.poi,s=r.mapx(a.x),l=r.mapy(a.y),c=s,u=l;if(e.type!=="poi"&&(s=0,l=0),r.coordsAreOnscreen(s,l,20)){if(this.isHiddenInteractiveLabel(a))return;var h=!1,p=void 0,g=a.sketch,y=g&&g.branches[0];y&&(h=!!("nakedLabel"in y&&y.nakedLabel),p="labelOrientation"in y?y.labelOrientation:void 0);var w=g.id,b=this.controller.getItemModel(w);if(a.hasEditableLabel()&&b&&b.type==="expression"&&!So(b))return;var D=MK(e,r),I=a.pointIdxOnBranch,E=a.getLabelSize();Array.isArray(E)&&(E=E[I]);var G=a.getLabelRotation();Array.isArray(G)&&(G=G[I]);var T=a.getPointOpacity()*this.controller.getGeoModel().getToolFadeOpacity(w),P=!!a.getTextOutline(),_=a.isPersistent(),x=a.isAttachedToPlottedPoint(),L=a.hasInteractiveLabel(),R=a.hasEditableLabel()&&!this.takingScreenshot,q=!!(b&&b.type==="expression"&&el(b)),K=g.color;if(q){if(this.grapher.clickableObjectsLayer.shouldDrawPressed(w,a.pointIdxOnBranch)){var Y=__dcg_shared_module_exports__['cb'](K);Y.l>.2?Y.l-=.2:Y.l+=.1,K=Y.toString()}else if(this.grapher.clickableObjectsLayer.shouldDrawHovered(w,a.pointIdxOnBranch)){var Y=__dcg_shared_module_exports__['cb'](K);Y.l>.2?Y.l-=.1:Y.l+=.2,K=Y.toString()}}var N=!_,j=!!x;L&&(j=!0,N=!0),n==="trace"&&(j=!1,N=!0);var B=i[o],A=B&&B.labelDOM,$=B&&B.containerDOM,J=B&&B.width,ue=B&&B.height,te=B&&B.orientation,Ae={"dcg-poi-label":!0,"dcg-tracept":n==="trace","dcg-opened":n==="opened","dcg-hole":D.is_hole,"dcg-show-border":N,"dcg-hide-dot":j,"dcg-editable-label":R,"dcg-has-outline":P,"dcg-underlined-label":!!(q&&b&&b.type==="expression"&&b.hidden)};isFinite(E)||(E=1);var Se=Math.round(E*1100)/10,ce={left:s+"px",top:l+"px","font-size":Se+"%"};G&&!this.takingScreenshot&&(ce.transform=`rotate(${G}rad)`),_&&K&&(ce.color=K),ce.opacity=`${Math.min(.99,T)}`;var Ee={};return n==="trace"&&(Ee["background-color"]=K,Ee["border-color"]=K),{id:o,sketchId:w,poi:a,x:a.x,y:a.y,screenX:s,screenY:l,top:u,left:c,width:J,height:ue,labelDOM:A,containerDOM:$,forcedOrientation:p,isNakedLabel:h,isClickable:q,orientation:te,rotation:G,classes:Ae,styles:ce,dotStyles:Ee,content:D,hasBorder:a.hasEditableLabel(),opacity:T,hasOutline:P||a.hasEditableLabel(),objectSpec:e.type!=="poi"?e.type==="angle"?{type:e.type,segments:[r.mapx(e.segments[0]),r.mapy(e.segments[1]),e.segments[2],e.segments[3]]}:{type:e.type,segments:r.map_xy_pairs(e.segments)}:void 0}}}computeAllLabels(e,r){var i={},n,o,a=this.grapher.graphSketches;this.grapher.getSketchOrder().forEach(c=>{var u=a[c];if(u){var h=u.labels;if(h.length)for(var p=0;p<h.length;p++){let g=h[p],y=this.computeLabel(g,e,r,"opened");y&&(Array.isArray(u.color)&&(y.styles.color=u.color[p]),this.saveLabelToCache(y))}}});var s={};for(n in this.openedPOI2Sketch){var l=kK(n,a[this.openedPOI2Sketch[n]]);l&&(s[n]=l.sketch.id,o=this.computeLabel({poi:l,type:"poi"},e,r,"opened"),o&&this.saveLabelToCache(o))}return this.openedPOI2Sketch=s,i}saveLabelToCache(e){var r=e.id;this.cachedLabelDict[r]||this.cachedLabelOrder.push(r),this.cachedLabelDict[r]=e}markLabelsDirty(){this.labelsDirty=!0}getInteractiveLabelUnderPoint(e){let r;for(var i=this.cachedLabelOrder.length-1;i>=0;i--){let n=this.cachedLabelOrder[i],o=this.cachedLabelDict[n];if(!o||!o.width||!o.height)continue;let a=o.screenX,s=o.screenY,{left:l,top:c,width:u,height:h}=o;if(u>0&&h>0&&e.x>a+l&&e.x<a+l+u&&e.y>s+c&&e.y<s+c+h){let p=this.getSketchIdFromLabelId(n);if(p===void 0)continue;let g=this.controller.getItemModel(p);if(!g||g.type!=="expression")continue;if(Zu(g))return{type:"editable",model:g};!r&&IV(g)?r={type:"draggable",label:{model:g,x:o.x,y:o.y}}:!r&&o.isClickable&&(r={type:"clickable",model:g,poi:o.poi})}}return r}positionLabels(e,r,i,n,o){var a=!this.labelsDirty;this.labelsDirty=!1;var s=[];r.forEach(h=>{var p=i[h];if(!p||!p.labelDOM)return;let g,y=this.getSketchIdFromLabelId(h);if(y!==void 0){let P=this.grapher.getGraphSketch(y);P&&P.branches&&(g=P.branches[0].pointSize)}(g===void 0||typeof g!="number"||g<0)&&(g=9);let b=(this.grapher.settings.config.projectorMode?14:10)*g/9;var D=p.screenX,I=p.screenY,E=p.labelDOM.clientWidth,G=p.labelDOM.clientHeight;if(!(E>0&&G>0))return;let T=0;this.takingScreenshot&&p.hasBorder&&(T=5),s.push({renderedLabel:p,pt_x:D,pt_y:I,pt_radius:b+T,rotation:p.rotation,nakedLabel:p.isNakedLabel,width:E,height:G,keepOrientation:a,priorOrientation:p.orientation,enforceOrientation:p.forcedOrientation})});var l=TL(e,n,o),c=s.map(function(h){if(h.renderedLabel.objectSpec){if(h.renderedLabel.objectSpec.type==="segment")return AL(l,{pt_x1:h.renderedLabel.objectSpec.segments[0],pt_y1:h.renderedLabel.objectSpec.segments[1],pt_x2:h.renderedLabel.objectSpec.segments[2],pt_y2:h.renderedLabel.objectSpec.segments[3],pt_radius:10,width:h.width,height:h.height,keepOrientation:h.keepOrientation,priorOrientation:h.priorOrientation||""});if(h.renderedLabel.objectSpec.type==="polygon")return LL(l,{path:h.renderedLabel.objectSpec.segments,pt_radius:10,width:h.width,height:h.height,keepOrientation:h.keepOrientation,priorOrientation:h.priorOrientation||""});if(h.renderedLabel.objectSpec.type==="angle"){let p=h.renderedLabel.objectSpec.segments;return VL(l,{pt_x:p[0],pt_y:p[1],startAngle:p[2],deltaAngle:p[3],isRightAngle:!1,radius:20,pt_radius:10,width:h.width,height:h.height,keepOrientation:h.keepOrientation,priorOrientation:h.priorOrientation||""})}}else return GL(l,h);return[]}),u=IL(c);u.forEach(function(h,p){var g=s[p].renderedLabel;g.orientation=h.orientation;let y=h.left-h.pt_x,w=h.top-h.pt_y;g.left=y,g.top=w,g.width=h.width,g.height=h.height;var b=g.labelDOM;if(b){b.style.transform=h.transform,V(b).data("orientation",h.orientation);var D=g.containerDOM;D&&(D.style.left=h.pt_x+"px",D.style.top=h.pt_y+"px"),setTimeout(()=>b.classList.add("dcg-enable-transition"),1)}})}copyToCtx(e){jn(e,"labels");var r=this.node.getBoundingClientRect();this.cachedLabelOrder.forEach(i=>{var n=this.cachedLabelDict[i];if(!n)return;var o=n.labelDOM;if(!o)return;let a={pointCenterX:n.screenX-r.left,pointCenterY:n.screenY-r.top,hasOutline:!!n.hasOutline,hasBorder:!!n.hasBorder};var s=this.computeRotatedCenter(a.pointCenterX,a.pointCenterY,n.rotation);let l=Cx(o,a);e.save(),e.globalAlpha=n.opacity,e.rotate(n.rotation),e.translate(s.x,s.y),Sx(l,e),e.restore()}),Yn(e)}computeRotatedCenter(e,r,i){var n=Math.cos(-i),o=Math.sin(-i),a=e*n-r*o,s=r*n+e*o;return{x:a,y:s}}drawForScreenshot(e,r,i,n,o){this.takingScreenshot=!0,this.redraw(e,r,n,o),this.takingScreenshot=!1,this.copyToCtx(i)}redraw(e,r,i,n){var o=this.cachedLabelDict;this.cachedLabelDict={},this.cachedLabelOrder=[],this.computeAllLabels(e,o),this.computeHoveredLabel(e,o),this.computeTraceLabel(e,o),this.update(),this.positionLabels(r,this.cachedLabelOrder,this.cachedLabelDict,i,n)}clearOpenedPOI(){this.openedPOI2Sketch={}}closePOI(e){delete this.openedPOI2Sketch[e.id]}openPOI(e){this.openedPOI2Sketch[e.id]=e.sketch.id}isOpenPOI(e){return this.openedPOI2Sketch.hasOwnProperty(e.id)}isOpenInteractiveLabel(e){return this.isOpenPOI(e)?e.hasInteractiveLabel():!1}isHiddenInteractiveLabel(e){return!e||!e.hasInteractiveLabel()?!1:!this.isOpenPOI(e)&&this.getHoveredPOI()!==e}setHoveredPOI(e){this.hoveredPOI=e}getHoveredPOI(){return this.hoveredPOI}getHoveredInteractiveLabel(){var e=this.getHoveredPOI();if(e&&e.hasInteractiveLabel())return e}setTraceInfo(e){this.traceInfo=e}isTracing(){return!!this.traceInfo}getTraceInfo(){return this.traceInfo}getMQConfig(){return this.controller.getMathquillConfig({})}};at();var Pa=__dcg_shared_module_exports__['i'](ne());var{For:TK}=Pa.Components,ff=class extends Pa.Class{init(){this.grapher=this.props.grapher(),this.controller=this.grapher.controller,this.renderedTabTargetOrder=[],this.renderedTabTargets={}}template(){return Pa.createElement(TK,{each:()=>this.renderedTabTargetOrder},Pa.createElement("div",{class:Pa.const("dcg-graph-outer"),style:this.const({"z-index":0}),onFocusin:this.bindFn(this.handleFocusChange),onFocusout:this.bindFn(this.handleFocusChange),onKeydown:this.bindFn(this.handleKeydown),didMount:e=>this.rootNode=e},e=>Pa.createElement("div",{class:Pa.const("dcg-tabbable-draggableimage"),style:()=>this.getStyle(e),role:Pa.const("button"),"aria-roledescription":()=>this.controller.s("graphing-calculator-narration-draggable-image-description"),"dcg-draggableimage-id":this.const(e),tabindex:()=>this.getTabIndex(),"aria-hidden":this.bindFn(this.getAriaHidden),"aria-label":()=>this.getAriaLabel(e)})))}redrawToCtx(e,r,i,n){this.renderedTabTargets={},this.renderedTabTargetOrder=[],jn(e,"background-images"),(n===void 0||n.length<__dcg_shared_module_exports__['w'](i))&&(n=__dcg_shared_module_exports__['B'](i));for(let a of n){let s=i[a];s&&s.shouldGraph&&!s.foreground&&Wx(s,e,r);var o=this.controller.getItemModel(a);if(o&&o.type==="image"&&o.shouldGraph&&Js(o)){let l=o.formula.dimensions;if(!l||!l.x||!l.y||!l.width||!l.height||!l.radianAngle)continue;for(let c=0;c<l.x.length;c++)if(isFinite(l.x[c])&&isFinite(l.y[c])&&isFinite(l.width[c])&&isFinite(l.height[c])&&isFinite(l.radianAngle[c])){this.renderedTabTargetOrder.push(a),this.renderedTabTargets[a]={id:a,description:this.getComputedDescription(o,c),x:l.x[c],y:l.y[c],radianAngle:l.radianAngle[c],width:l.width[c],height:l.height[c],widthScale:Math.abs(r.mapx(1)-r.mapx(0)),heightScale:Math.abs(r.mapy(1)-r.mapy(0)),screenX:r.mapx(l.x[c]),screenY:r.mapy(l.y[c]),centerId:o.formula.center_reference_id};break}}}Yn(e),this.update(),this.speakAriaAlert()}getStyle(e){var r=this.renderedTabTargets[e];if(!r)return;let{screenX:i,screenY:n,radianAngle:o,width:a,height:s,widthScale:l,heightScale:c}=r,u=c/l,h=a*l,p=s*c/u,g=i-h/2,y=n-p/2;var w=`translate(${g}px, ${y}px)`,b=o?` rotate(${o}rad)`:"",D=u===1?"":` scale(1,${u})`;return{position:"absolute",top:0,left:0,transform:w+D+b,width:h+"px",height:p+"px"}}getTabIndex(){if(this.controller.getActiveTool()!=="selection")return-1;var e=this.grapher.settings;return e.config.graphpaper&&e.config.enableTabindex?0:-1}getAriaHidden(){var e=this.grapher.settings;return!e.config.graphpaper}getComputedDescription(e,r){let i=e.formula&&e.formula.computed_description&&e.formula.computed_description[r];return i&&i!==""?uo(i):this.grapher.getAudioTrace().getExpressionAriaLabel(e.id)}getAriaLabel(e){var r=this.getAriaAlert({id:e,includeUsageInstructions:!1});return r&&r.completeMessage}speakAriaAlert(){let e=this.focusedId;if(!(e&&!this.renderedTabTargets[e])){var r=this.getAriaAlert({id:e,lastAriaAlert:this.lastAriaAlert,includeUsageInstructions:!0});this.lastAriaAlert=r,r&&r.completeMessage&&ge(r.completeMessage)}}getAriaAlert(e){let{id:r,lastAriaAlert:i,includeUsageInstructions:n}=e;if(r){var o=this.controller.getItemModel(r);if(!(!o||o.type!=="image")){var a=this.renderedTabTargets[r];if(a){i&&i.id!==r&&(i=void 0);var s=i&&i.label,l=a.description,c=s!==l,u=i&&i.coordX,h=i&&i.coordY,p=a.x,g=a.y,y=p!==u||g!==h,w=this.grapher.getProjection(),b=Sd(this.controller,p,g,w.viewport),D=l,I=n?this.controller.s("graphing-calculator-narration-movable-point-suffix-usage-instructions"):"",E=this.isImageFullyVisible(o,w)?"":this.controller.s("graphing-calculator-narration-draggable-image-off-screen-prompt"),G;return i?c?G=D+E:y?G=b+E:G="":G=D+". "+b+I+E,{id:r,coordX:p,coordY:g,label:l,completeMessage:G}}}}}handleFocusChange(){let e;if(document.activeElement&&V.contains(this.rootNode,document.activeElement)){var r=V(document.activeElement);e=r.attr("dcg-draggableimage-id")}this.focusedId!==e&&(this.focusedId=e,this.lastAriaAlert=void 0,this.requestRedrawNextFrame())}requestRedrawNextFrame(){this.grapher.redrawAllLayers()}handleKeydown(e){if(!this.focusedId)return;let r=this.renderedTabTargets[this.focusedId];if(!r)return;let i=Le(e),n=vi(e);i==="Up"||i==="Down"||i==="Left"||i==="Right"?(e.stopPropagation(),e.preventDefault(),this.moveImageFromKeyboard(r,e)):(n==="X"||n==="Y"||n==="L")&&this.speakImageAttribute(r,n)}moveImageFromKeyboard(e,r){if(!(e===void 0||e.centerId===void 0)){var i=this.grapher.getProjection(),n=i.map_pt({x:e.x,y:e.y}),o=0,a=0,s=Le(r),l=(i.pixelCoordinates.right-i.pixelCoordinates.left)/40,c=(i.pixelCoordinates.bottom-i.pixelCoordinates.top)/40,u=s==="Up"||s==="Down"?c:l;u=r.shiftKey?u*5:u;var h,p;if(s==="Up"?(p="y",a-=u,h=r.shiftKey?"bigup":"up"):s==="Down"?(p="y",a+=u,h=r.shiftKey?"bigdown":"down"):s==="Left"?(p="x",o-=u,h=r.shiftKey?"bigdown":"down"):s==="Right"&&(p="x",o+=u,h=r.shiftKey?"bigup":"up"),h){var g={x:n.x+o,y:n.y+a},y;p==="x"||this.hasNonlinearMoveStrategy(e.centerId)?y={x:h}:p==="y"&&(y={y:h}),this.controller.dispatch({type:"on-move-points",points:[{sketch:{id:e.centerId}}],screenPts:[g],previousScreenPts:[n],projection:i,keyboardDirection:y})}}}speakImageAttribute(e,r){if(e){var i=this.grapher.getAudioTrace();if(i){var n=this.grapher.getProjection();if(n){var o=n.viewport;switch(r){case"X":ge(on(this.controller,e.x,o));break;case"Y":ge(an(this.controller,e.y,o));break;case"L":ge(e.description);break}}}}}hasNonlinearMoveStrategy(e){if(!e)return!1;var r=this.controller.getItemModel(e);if(!r||r.type!=="expression"||!r.formula)return!1;var i=r.formula.move_strategy;return!i||!i[0]?!1:i[0].type==="updateSliderNonlinear"}isImageFullyVisible(e,r){let i=e.formula.dimensions;if(!i||!i.x||!i.y)return!1;for(var n=0;n<i.x.length;n++)if(!r.coordsAreOnscreen(r.mapx(i.x[n]),r.mapy(i.y[n])))return!1;return!0}};var Oa=__dcg_shared_module_exports__['i'](ne());at();var{For:GK}=Oa.Components;function AK(t,e){return e===void 0&&(e=0),`${t}i${e}`}var mf=class extends Oa.Class{constructor(){super(...arguments),this.hoveredObjects={}}init(){this.grapher=this.props.grapher(),this.controller=this.grapher.controller,this.renderedTabTargetOrder=[],this.renderedTabTargets={}}template(){return Oa.createElement(GK,{each:()=>this.renderedTabTargetOrder},Oa.createElement("div",{class:Oa.const("dcg-graph-outer"),style:this.const({"z-index":0}),onFocusin:this.bindFn(this.handleFocusChange),onFocusout:this.bindFn(this.handleFocusChange),didMount:e=>this.rootNode=e},e=>Oa.createElement("div",{class:Oa.const("dcg-tabbable-clickableobject"),role:Oa.const("button"),"aria-roledescription":()=>this.controller.s("graphing-calculator-narration-clickable-object-description"),"dcg-clickableobject-id":()=>this.getModelId(e),tabindex:()=>this.getTabIndex(e),"aria-hidden":this.bindFn(this.getAriaHidden),"aria-label":()=>this.getCachedDescription(e),onTap:()=>{this.controller.dispatch({type:"clickable-item-clicked",id:this.getModelId(e),listIndex:this.getListIndex(e)})}})))}redraw(){this.renderedTabTargets={},this.renderedTabTargetOrder=[];let e=this.grapher.getSketchOrder();for(let r of e){let i=this.controller.getItemModel(r);if(!i)continue;let n=this.grapher.getGraphSketch(r),o=this.grapher.getGraphImage(r);if(n&&i.type==="expression"&&el(i))for(let a=0;a<n.branches.length;a++){let s=n.branches[a];if(!s.segments||s.segments.length===0)continue;let l=0;s.graphMode===3||s.graphMode===4?n.getBranchPOI(a).forEach(c=>{l=c.pointIdxOnBranch||0,isFinite(c.x)&&isFinite(c.y)&&this.addClickableObjectToDom(i,l)}):(l="listIndex"in s&&s.listIndex!==void 0?s.listIndex:0,s.segments.length>0&&this.addClickableObjectToDom(i,l))}else if(o&&o.shouldGraph&&i.type==="image"&&Pb(i)){let a=i.formula&&i.formula.dimensions;if(!a||!a.x||!a.y||!a.width||!a.height||!a.radianAngle)continue;for(let s=0;s<a.x.length;s++)isFinite(a.x[s])&&isFinite(a.y[s])&&isFinite(a.width[s])&&isFinite(a.height[s])&&isFinite(a.radianAngle[s])&&this.addClickableObjectToDom(i,s)}}Object.keys(this.hoveredObjects).length||this.pressedObject?this.grapher.setLayerClass("clickableObjects","dcg-mouse-over-clickable-object"):this.grapher.setLayerClass("clickableObjects",void 0),this.update()}addClickableObjectToDom(e,r){let i=AK(e.id,r);this.renderedTabTargetOrder.indexOf(i)!==-1||this.renderedTabTargets[i]!==void 0||(this.renderedTabTargetOrder.push(i),this.renderedTabTargets[i]={type:e.type,id:e.id,listIndex:r,description:this.getComputedDescription(e,r)})}getTabIndex(e){if(this.controller.getActiveTool()!=="selection"||!this.renderedTabTargets[e])return-1;let i=this.grapher.settings;return!i.config.graphpaper||!i.config.enableTabindex?-1:0}getAriaHidden(){var e=this.grapher.settings;return!e.config.graphpaper}getCachedDescription(e){var r=this.renderedTabTargets[e];return r.description}getComputedDescription(e,r){let i=e.formula&&e.formula.computed_description&&e.formula.computed_description[r];return i&&i!==""?uo(i):this.grapher.getAudioTrace().getExpressionAriaLabel(e.id)}getModelId(e){var r=this.renderedTabTargets[e];return r?r.id:""}getListIndex(e){var r=this.renderedTabTargets[e];return r?r.listIndex:0}shouldDrawHovered(e,r){if(!e)return!1;if(e===this.focusedId)return!0;if(this.isAnObjectPressed()&&!this.isObjectPressed(e))return!1;var i=this.getHoveredObjectById(e);return i?i.listIndexes===void 0||r===void 0?!0:!!i.listIndexes[r]:!1}setHoveredObjects(e){__dcg_shared_module_exports__['E'](e,this.hoveredObjects)||(this.hoveredObjects=e,this.requestRedrawNextFrame())}getHoveredObjects(){return this.hoveredObjects}getHoveredObjectById(e){return this.hoveredObjects[e]}shouldDrawPressed(e,r){if(!e)return!1;let i=this.pressedObject;return!i||i.id!==e?!1:r===void 0?!0:i.listIndex===r}isObjectPressed(e){return e===void 0?!1:!!(this.pressedObject&&this.pressedObject.id===e)}setPressedObject(e){!e&&!this.pressedObject||e&&this.pressedObject&&e.id===this.pressedObject.id&&e.listIndex===this.pressedObject.listIndex||(this.pressedObject=e,this.requestRedrawNextFrame())}getPressedObject(){return this.pressedObject}isAnObjectPressed(){return!!this.pressedObject}handleFocusChange(){var e=void 0;if(document.activeElement&&V.contains(this.rootNode,document.activeElement)){var r=V(document.activeElement);e=r.attr("dcg-clickableobject-id")}this.focusedId!==e&&(this.focusedId=e,this.requestRedrawNextFrame())}requestRedrawNextFrame(){this.grapher.redrawAllLayers()}};Us();var VK=En().reflectionArc;function Iw(t){return t.valueType===__dcg_shared_module_exports__['S']?t.value:t.valueType===__dcg_shared_module_exports__['W']?t.value[0]:void 0}function LK(t){return t.valueType===__dcg_shared_module_exports__['ga']||t.valueType===__dcg_shared_module_exports__['ia']||t.valueType===__dcg_shared_module_exports__['aa']?{segment:t.valueType===__dcg_shared_module_exports__['aa'],value:t.value}:t.valueType===__dcg_shared_module_exports__['ha']||t.valueType===__dcg_shared_module_exports__['ja']||t.valueType===__dcg_shared_module_exports__['ba']?{segment:t.valueType===__dcg_shared_module_exports__['ba'],value:t.value[0]}:void 0}function _L(t){return t.valueType===__dcg_shared_module_exports__['R']?t.value:t.valueType===__dcg_shared_module_exports__['U']?t.value[0]:void 0}var Mw=class{constructor(e){this.controller=e}getTransformationPreviewInfoFromItem(e){var r;if(e.type==="expression")return(r=e.formula.geometry)==null?void 0:r.transformation_preview_info}getInprogressTransformation(){let e=this.controller.getAllToolPreviewItems();for(let r of e){let i=this.getTransformationPreviewInfoFromItem(r);if(i)return i}}getHoveredOrSelectedTransformations(){let e=[];this.controller.getAllSelectedItems().forEach(s=>{if(s.type!=="expression")return;let l=this.getTransformationPreviewInfoFromItem(s);l&&e.push(l)});var i=this.controller.getHoveredToken();if(!i)return e;let n=this.controller.getGeoItemsByTokenLatex("\\token{"+i+"}");if(n.length!==1)return e;let o=n[0];if(o.type!=="expression")return e;let a=this.getTransformationPreviewInfoFromItem(o);return a&&e.push(a),e}drawTranslationPreview(e,r,i,n){let o=r.mapx(i[0]),a=r.mapy(i[1]),s=r.mapx(n[0]),l=r.mapy(n[1]);e.save(),e.beginPath(),e.strokeStyle="rgba(0,0,0,.2)",e.lineWidth=5,e.moveTo(o,a),e.lineTo(s,l),rl(e,o,a,s,l,20),e.stroke(),e.restore()}drawReflectionPreview(e,r,i){let n=i.value,o=i.segment,[a,s,l,c]=Rg([n[0][0],n[0][1],n[1][0],n[1][1]],r,18).clipped,u=(a+l)/2,h=(s+c)/2;if(o){let[I,E,G,T]=Rg([n[0][0],n[0][1],n[1][0],n[1][1]],r,17).clipped;u=(I+G)/2,h=(E+T)/2}let p=40,g=p/__dcg_shared_module_exports__['Aa'](a-l,s-c),y=u+(c-s)*g,w=h-(l-a)*g,b=u-(c-s)*g,D=h+(l-a)*g;if(e.save(),e.beginPath(),e.strokeStyle="rgba(0,0,0,.2)",e.lineWidth=4,e.moveTo(a,s),e.lineTo(l,c),VK){let I=Math.atan2(w-h,y-u),E=p,G=p*.7;e.moveTo(y,w),e.ellipse(u,h,E,G,I,0,Math.PI,!1);let T=.35,P=I+Math.PI/2+T,_=I+Math.PI/2-T;rl(e,y+Math.cos(P),w+Math.sin(P),y,w,10),rl(e,b+Math.cos(_),D+Math.sin(_),b,D,10)}else e.moveTo(y,w),e.lineTo(b,D),rl(e,u,h,y,w,10),rl(e,u,h,b,D,10);e.stroke(),e.restore()}drawDilationPreview(e,r,i,n){e.save(),e.beginPath(),e.strokeStyle="rgba(0,0,0,.2)",e.lineWidth=3;let o=n<.6||n>1.4&&n<2?6:10,a=r.pixelsToMath.mapX(25)-r.pixelsToMath.mapX(0);[[a,0],[0,a],[-a,0],[0,-a]].forEach(s=>{let l=[i[0]+s[0],i[1]+s[1]],c=__dcg_shared_module_exports__['Hb'](__dcg_shared_module_exports__['Eb'](i,n),l),[u,h]=r.map_xy_pairs(l),[p,g]=r.map_xy_pairs(c);e.moveTo(u,h),e.lineTo(p,g),rl(e,u,h,p,g,o)}),e.stroke(),e.restore()}drawRotationPreview(e,r,i,n){e.save(),e.beginPath(),e.strokeStyle="rgba(0,0,0,.2)",e.lineWidth=2.5,n*=-1;let o=40,[a,s]=r.map_xy_pairs(i),l=a+o,c=s,u=a+o*Math.cos(n),h=s+o*Math.sin(n),p=n<=0;e.moveTo(l,c),e.arc(a,s,o,0,n,p),zE(e,u,h,0,n,10,o),e.stroke(),e.restore()}redrawToCtx(e,r){if(!this.controller.isGeometry())return;let i=this.getInprogressTransformation(),n=this.getHoveredOrSelectedTransformations();i&&n.push(i);for(let o=0;o<n.length;o++){let a=n[o],s=a.args;switch(a.type){case"translation":{let l=Iw(s[0]),c=Iw(s[1]);l&&c&&this.drawTranslationPreview(e,r,l,c)}break;case"reflection":{let l=LK(s[0]);l&&this.drawReflectionPreview(e,r,l)}break;case"dilation":{let l=Iw(s[0]),c=_L(s[1]);l&&c!==void 0&&isFinite(c)&&c!==1&&this.drawDilationPreview(e,r,l,c)}break;case"rotation":{let l=Iw(s[0]),c=_L(s[1]);l&&c!==void 0&&isFinite(c)&&c!==0&&(this.controller.isDegreeMode()&&(c*=Math.PI/180),this.drawRotationPreview(e,r,l,c))}break}}}};var Aw=class{redrawToCtx(e,r,i){jn(e,"graphpaper");let n=r.settings.showGrid;if(r.settings.polarMode&&n){let o=H1(r);jn(e,"grid"),this.drawPolarGrid(e,r,o),Yn(e),jn(e,"axis"),this.drawAxes(e,r,i);let a=this.drawPolarStepNumbers(e,r,o);this.drawLabels(e,r,a),Yn(e)}else{let o=Cd(r);n&&(jn(e,"grid"),this.drawCartesianGrid(e,r,o),Yn(e));let a=!n;jn(e,"axis"),this.drawAxes(e,r,i);let s=this.drawCartesianStepNumbers(e,r,o,a);this.drawLabels(e,r,s),Yn(e)}Yn(e)}addTextShadow(e,r){e.strokeStyle=r.settings.getBackgroundColor(),e.lineWidth=3,e.miterLimit=2}drawPolarGrid(e,r,i){e.save();let n=r.settings.minorAxisOpacity,a=1-(1-r.settings.majorAxisOpacity)/(1-n),s=__dcg_shared_module_exports__['Ia'](r.mapx(0)),l=__dcg_shared_module_exports__['Ia'](r.mapy(0)),c=r.screen.height/(r.viewport.ymax-r.viewport.ymin),u=r.screen.width/(r.viewport.xmax-r.viewport.xmin),h=c/u,p=u/c,g=l/h,y=r.viewport.smallestR(),w=r.viewport.largestR(),b=i.minorStepR*Math.max(1,Math.floor(y/i.minorStepR)),D=i.majorStepR*Math.max(1,Math.floor(y/i.majorStepR));e.lineWidth=1,e.strokeStyle="rgba(0, 0 , 0, "+n+")",Tp(b,w,i.minorStepR,function(E){ei(e,"dcg-svg-minor-gridline"),e.beginPath(),Br(e),e.scale(1,h);let G=r.mapx(E)-s;e.moveTo(s+G,g),e.arc(s,g,G,0,2*Math.PI),e.scale(1,p),e.stroke()});let I=y>0?5:15;Tp(0,359,I,function(E){if((E===0||E===180)&&r.settings.showXAxis||(E===90||E===270)&&r.settings.showYAxis)return;ei(e,"dcg-svg-minor-gridline"),e.beginPath(),Br(e),e.moveTo(s,l);let G=r.mapx(w*Math.cos(E*Math.PI/180)),T=r.mapy(w*Math.sin(E*Math.PI/180));e.lineTo(__dcg_shared_module_exports__['Ia'](G),__dcg_shared_module_exports__['Ia'](T)),e.stroke()}),e.lineWidth=1,e.strokeStyle="rgba(0, 0 , 0, "+a+")",Tp(D,w,i.majorStepR,function(E){ei(e,"dcg-svg-major-gridline"),e.beginPath(),Br(e),e.scale(1,h);let G=r.mapx(E)-s;e.moveTo(s+G,g),e.arc(s,g,G,0,2*Math.PI),e.scale(1,p),e.stroke()}),e.restore()}drawCartesianGrid(e,r,i){e.save();let{xmin:n,xmax:o,ymin:a,ymax:s}=r.viewport,l=r.screen.width,c=r.screen.height,u=c,h=0;r.settings.restrictGridToFirstQuadrant&&(n=0,a=0,u=r.mapy(0),h=r.mapx(0));let p=r.settings.minorAxisOpacity,g=r.settings.majorAxisOpacity;e.lineWidth=1,e.strokeStyle="rgba(0, 0 , 0, "+p+")";let y=D=>{if(D===0&&r.settings.showYAxis)return;let I=__dcg_shared_module_exports__['Ia'](r.mapx(D));I===__dcg_shared_module_exports__['Ia'](0)||I===__dcg_shared_module_exports__['Ia'](l)||(e.beginPath(),e.moveTo(I,0),e.lineTo(I,u),e.stroke())},w=D=>{if(D===0&&r.settings.showXAxis)return;let I=__dcg_shared_module_exports__['Ia'](r.mapy(D));I===__dcg_shared_module_exports__['Ia'](0)||I===__dcg_shared_module_exports__['Ia'](c)||(e.beginPath(),e.moveTo(h,I),e.lineTo(l,I),e.stroke())};ei(e,"dcg-svg-minor-gridline"),Mp({axis:"x",lineType:"minor",axisRangeMin:n,axisRangeMax:o,cartesianStepSizes:i,projection:r,callbackfn:y}),Mp({axis:"y",lineType:"minor",axisRangeMin:a,axisRangeMax:s,cartesianStepSizes:i,projection:r,callbackfn:w}),Br(e);let b=1-(1-g)/(1-p);e.strokeStyle="rgba(0, 0 , 0, "+b+")",ei(e,"dcg-svg-major-gridline"),Mp({axis:"x",lineType:"major",axisRangeMin:n,axisRangeMax:o,cartesianStepSizes:i,projection:r,callbackfn:y}),Mp({axis:"y",lineType:"major",axisRangeMin:a,axisRangeMax:s,cartesianStepSizes:i,projection:r,callbackfn:w}),Br(e),e.restore()}drawAxes(e,r,i){let n=r.settings.axisLineOffset,o=r.settings.axisOpacity.toString(),a="rgba(127,205,230,"+o+")",s="rgba(0,0,0,"+o+")",l=r.settings.xAxisArrowMode,c=r.settings.yAxisArrowMode,u=r.settings.showXAxis,h=r.settings.showYAxis,p=1,g=Math.round(r.mapx(0))-n,y=Math.round(r.mapy(0))-n,w=r.screen.height,b=r.screen.width;function D(G,T,P){e.save();let _=Math.PI/12,x=8*Math.max(e.lineWidth,1.5);e.lineJoin="round",e.fillStyle=s,e.strokeStyle=s,e.beginPath(),e.moveTo(G,T),e.lineTo(G+Math.cos(P-_)*x,T+Math.sin(P-_)*x),e.lineTo(G+Math.cos(P+_)*x,T+Math.sin(P+_)*x),e.lineTo(G,T),e.lineTo(G+Math.cos(P-_)*x,T+Math.sin(P-_)*x),e.stroke(),e.fill(),e.restore()}let I=w,E=0;r.settings.restrictGridToFirstQuadrant&&(I=y,E=g,l==="BOTH"&&(l="POSITIVE"),c==="BOTH"&&(c="POSITIVE")),h&&(jn(e,"yaxis"),r.settings.takingScreenshot&&zg(e,r.settings.yAxisLabel||"Y axis"),e.save(),ei(e,"dcg-svg-axis-line"),e.lineWidth=r.settings.axisLineWidth*(i==="y"?p:1),e.strokeStyle=i==="y"?a:s,c==="BOTH"?(e.beginPath(),e.moveTo(g,2*r.settings.axisLineWidth),e.lineTo(g,w-2*r.settings.axisLineWidth),e.stroke(),D(g,w-r.settings.axisLineWidth,3*Math.PI/2),D(g,r.settings.axisLineWidth,Math.PI/2)):c==="POSITIVE"?(e.beginPath(),e.moveTo(g,2*r.settings.axisLineWidth),e.lineTo(g,I),e.stroke(),D(g,r.settings.axisLineWidth,Math.PI/2)):(e.beginPath(),e.moveTo(g,0),e.lineTo(g,I),e.stroke()),Br(e),e.restore(),Yn(e)),u&&(jn(e,"xaxis"),r.settings.takingScreenshot&&zg(e,r.settings.xAxisLabel||"X axis"),e.save(),ei(e,"dcg-svg-axis-line"),e.lineWidth=r.settings.axisLineWidth*(i==="x"?p:1),e.strokeStyle=i==="x"?a:s,l==="BOTH"?(e.beginPath(),e.moveTo(2*r.settings.axisLineWidth,y),e.lineTo(b-2*r.settings.axisLineWidth,y),e.stroke(),D(r.settings.axisLineWidth,y,0),D(b-r.settings.axisLineWidth,y,Math.PI)):l==="POSITIVE"?(e.beginPath(),e.lineTo(E,y),e.lineTo(b-2*r.settings.axisLineWidth,y),e.stroke(),D(b-r.settings.axisLineWidth,y,Math.PI)):(e.beginPath(),e.lineTo(E,y),e.lineTo(b,y),e.stroke()),Br(e),e.restore(),Yn(e))}drawPolarStepNumbers(e,r,i){e.save();let n=r.settings.showGrid,o=r.settings.xAxisNumbers&&r.settings.showXAxis,a=r.settings.yAxisNumbers&&r.settings.showYAxis,s=n&&r.settings.polarNumbers,l=r.viewport.largestR(),c=r.viewport.smallestR(),u=r.viewport.xmin,h=r.viewport.xmax,p=r.viewport.ymin,g=r.viewport.ymax,y=r.screen.width,w=r.screen.height,b={left:3,right:y-3,top:3,bottom:w-3},D=r.settings.labelHangingColor,I=r.settings.getTextColor(),E=r.settings.labelSize,G=E;this.addTextShadow(e,r),e.fillStyle=I;function T(B,A,$){let J=Math.sqrt(B*B-A*A);p<=J&&J<=g&&$.push({x:r.mapx(A),y:r.mapy(J)}),p<=-J&&-J<=g&&$.push({x:r.mapx(A),y:r.mapy(-J)})}function P(B,A,$){let J=Math.sqrt(B*B-A*A);u<=J&&J<=h&&$.push({x:r.mapx(J),y:r.mapy(A)}),u<=-J&&-J<=h&&$.push({x:r.mapx(-J),y:r.mapy(A)})}let _=r.mapx(0),x=r.mapy(0),L=p<=0&&0<=g,R=u<=0&&0<=h,q=L&&o,K=R&&a,Y="";if(!q&&!K&&n){let B=Math.abs(_),A=Math.abs(_-y),$=Math.abs(x),J=Math.abs(x-w),ue,te,Ae,Se;B<=A?(ue="left",Ae=B):(ue="right",Ae=A),$<=J?(te="top",Se=$):(te="bottom",Se=J),o&&a?Y=Ae<=Se?ue:te:a?Y=ue:o&&(Y=te)}let N={left:0,right:y,top:x-1,bottom:x+1},j={left:_-1,right:_+1,top:0,bottom:w};if(Tp(0,l,i.majorStepR,function(B){let A=[],$=[],J=[],ue=new Gn(__dcg_shared_module_exports__['Ma'](B,l),E),te=ue.getRect();switch(B>0?(K&&p<=B&&B<=g&&$.push({x:_-te.right-5,y:r.mapy(B)}),K&&p<=-B&&-B<=g&&$.push({x:_-te.right-5,y:r.mapy(-B)}),q&&u<=B&&B<=h&&A.push({x:r.mapx(B),y:x-te.top+3}),q&&u<=-B&&-B<=h&&A.push({x:r.mapx(-B),y:x-te.top+3})):K&&!o&&p<=B&&B<=g?$.push({x:_-te.right-5,y:r.mapy(B)}):q&&!a&&u<=B&&B<=h&&A.push({x:r.mapx(B),y:x-te.top+3}),Y){case"top":P(B,g,J);break;case"bottom":P(B,p,J);break;case"left":T(B,u,J);break;case"right":T(B,h,J);break}A.forEach(function(Ae){Ae=ue.clampBoundsWithinRect(Ae,b),ue.drawCenteredAt(e,Ae,"dcg-svg-axis-value"),Tw(N,ue.getRectWhenCenteredAt(Ae))}),$.forEach(function(Ae){Ae=ue.clampBoundsWithinRect(Ae,b),ue.drawCenteredAt(e,Ae,"dcg-svg-axis-value"),Tw(j,ue.getRectWhenCenteredAt(Ae))}),J.forEach(function(Ae){Ae=ue.clampBoundsWithinRect(Ae,b),ue.drawCenteredAt(e,Ae,"dcg-svg-axis-value")})}),s){let B=Math.ceil(c/i.majorStepR),A=Math.floor(l/i.majorStepR),J=Math.ceil((B+A)/2)*i.majorStepR,ue=c>0?15:30;Tp(0,359,ue,function(te){let Ae;r.settings.degreeMode?Ae=te.toString()+"\xB0":Ae=__dcg_shared_module_exports__['Ma'](te*Math.PI/180,2*Math.PI).string;let Se=e.measureText(Ae).width/2,ce=J/1.05,Ee=ce*Math.cos(te*Math.PI/180),H=ce*Math.sin(te*Math.PI/180);if(Ee<u||Ee>h||H<p||H>g)return;let he=r.mapx(Ee),De=r.mapy(H);te===0||te===180?De-=G:(te===90||te===270)&&(he+=Se+3);let _e=FL(he,3+Se,y-3-Se),Me=FL(De,3+G,w-3-G);Me=Gn.computeBaselineFromCenter(Me,E),ei(e,"dcg-svg-polar-axis-value"),e.save(),Br(e),e.fillStyle=D,Gn.setCtxFontSize(e,E),e.strokeText(Ae,_e,Me),e.fillText(Ae,_e,Me),e.restore()})}return e.restore(),{x:N,y:j}}drawLabels(e,r,i){let n=r.viewport.xmin,o=r.viewport.xmax,a=r.viewport.ymin,s=r.viewport.ymax,l=r.screen.width,c=r.screen.height,u=(o-n)/l,h=(s-a)/c,p=r.settings.getTextColor(),g=r.mapx(0),y=r.mapy(0),w=r.settings.labelSize,b=15,D=r.settings.showXAxis&&r.settings.xAxisLabel,I=r.settings.showYAxis&&r.settings.yAxisLabel,E=i.x,G=i.y;if(D&&E){ei(e,"dcg-svg-axis-label"),e.save(),Br(e),e.fillStyle=p;let T;if(e.__xLabelOffset&&r.settings.isViewportTransient&&Gw(e.__xLabelOffset.xscale,u)&&Gw(e.__xLabelOffset.yscale,h)&&(T={x:e.__xLabelOffset.x+g,y:e.__xLabelOffset.y+y}),this._setAxisLabelFont(e,D,w,r),!T){let P=e.measureText(D).width,_=l-P-b,x=w;E.bottom+x<c?T={x:_,y:E.bottom+x}:T={x:_,y:E.top-x/2},e.__xLabelOffset={x:T.x-g,y:T.y-y,xscale:u,yscale:h}}e.strokeText(D,T.x,T.y),e.fillText(D,T.x,T.y),e.restore()}else e.__xLabelPosition=null;if(I&&G){ei(e,"dcg-svg-axis-label"),e.save(),Br(e),e.fillStyle=p;let T;if(e.__yLabelOffset&&r.settings.isViewportTransient&&Gw(e.__yLabelOffset.xscale,u)&&Gw(e.__yLabelOffset.yscale,h)&&(T={x:e.__yLabelOffset.x+g,y:e.__yLabelOffset.y+y}),this._setAxisLabelFont(e,I,w,r),!T){let P=e.measureText(I).width,_=w,x=P+5;if(!this._isShortMathyLabel(I)){let R=P;P=_,_=R,x=P*.5}let L=0+b+_;G.left-P>0?T={x:G.left-x,y:L}:T={x:G.right+P,y:L},e.__yLabelOffset={x:T.x-g,y:T.y-y,xscale:u,yscale:h}}e.translate(T.x,T.y),this._isShortMathyLabel(I)||e.rotate(-Math.PI/2),e.strokeText(I,0,0),e.fillText(I,0,0),e.restore()}else e.__yLabelPosition=null}_isShortMathyLabel(e){return e.trim().match(/^([a-zA-Z]?)\(?([a-zA-Z]?)\)?$/)}_setAxisLabelFont(e,r,i,n){this.addTextShadow(e,n),this._isShortMathyLabel(r)?e.font="italic "+Math.round(i*1.4)+"px Times":e.font=Math.round(i*1.2)+"px Arial"}drawCartesianStepNumbers(e,r,i,n){e.save();let o=r.settings.showXAxis,a=r.settings.showYAxis,s=o&&r.settings.xAxisNumbers,l=a&&r.settings.yAxisNumbers,{xmin:c,xmax:u,ymin:h,ymax:p}=r.viewport,g=r.screen.width,y=r.screen.height,w={left:3,top:3,right:g-3,bottom:y-3};r.settings.restrictGridToFirstQuadrant&&(c=0,h=0);let b=r.settings.labelHangingColor,D=r.settings.getTextColor(),I=r.mapx(0),E=r.mapy(0),G=r.settings.labelSize;this.addTextShadow(e,r);let T={left:0,right:g,top:E-1,bottom:E+1},P={left:I-1,right:I+1,top:0,bottom:y},_=5,x=!1;if(o&&a&&(s||l)){x=!0,e.fillStyle=D;let q=new Gn(__dcg_shared_module_exports__['Ma'](0,1),G);q.drawCenteredAt(e,{x:I-q.getRect().right-_,y:E-q.getRect().top+_},"dcg-svg-axis-value")}let L=[],R=[];if(s&&Mp({axis:"x",lineType:"major",axisRangeMin:c,axisRangeMax:u,cartesianStepSizes:i,projection:r,callbackfn:q=>{let{xAxisScale:K}=r.settings,Y=K==="logarithmic"?void 0:u-c,N=new Gn(__dcg_shared_module_exports__['Ma'](q,Y),G);N.getString()==="0"&&x||L.push(N)}}),l&&Mp({axis:"y",lineType:"major",axisRangeMin:h,axisRangeMax:p,cartesianStepSizes:i,projection:r,callbackfn:q=>{let{yAxisScale:K}=r.settings,Y=K==="logarithmic"?void 0:p-h,N=new Gn(__dcg_shared_module_exports__['Ma'](q,Y),G);N.getString()==="0"&&x||R.push(N)}}),n){e.save(),ei(e,"dcg-svg-tickmark");let q=r.settings.axisLineOffset,Y="rgba(0,0,0,"+r.settings.axisOpacity.toString()+")";e.lineWidth=r.settings.axisLineWidth,e.strokeStyle=Y;let N=Math.round(r.mapy(0))-q,j=Math.round(r.mapx(0))-q,B=Math.round(2*e.lineWidth)-q;e.beginPath(),L.forEach(function(A){let $=Math.round(r.mapx(A.getValue()))-q;e.moveTo($,N-B),e.lineTo($,N+B)}),R.forEach(function(A){let $=Math.round(r.mapy(A.getValue()))-q;e.moveTo(j-B,$),e.lineTo(j+B,$)}),e.stroke(),Br(e),e.restore()}return L.forEach(function(q){let K={x:r.mapx(q.getValue())-.5*q.getMinusWidth(),y:E-q.getRect().top+_},Y=q.clampBoundsWithinRect(K,w);e.fillStyle=K.y===Y.y?D:b;let N="dcg-svg-axis-value";K.x!==Y.x&&(N+=" dcg-svg-offcenter-axis-value"),q.drawCenteredAt(e,Y,N),Tw(T,q.getRectWhenCenteredAt(Y)),Br(e)}),R.forEach(function(q){let K={x:I-_-q.getRect().right,y:r.mapy(q.getValue())},Y=q.clampBoundsWithinRect(K,w);e.fillStyle=K.x===Y.x?D:b;let N="dcg-svg-axis-value";K.y!==Y.y&&(N+=" dcg-svg-offcenter-axis-value"),q.drawCenteredAt(e,Y,N),Tw(P,q.getRectWhenCenteredAt(Y)),Br(e)}),e.restore(),{x:T,y:P}}};function Tp(t,e,r,i){let n=Math.ceil(t/r),o=Math.floor(e/r);if(DD({nmin:n,nmax:o}))for(var a=n;a<=o;a++)i(a*r)}var PK=({stepTicks:t,projection:e,axis:r,min:i,max:n,major:o})=>{if(t.length<2)return[...t];let a=new Array(t.length*2-1);a[a.length-1]=t[t.length-1];for(let b=0;b<t.length-1;b++){let D=e.mapAlongAxis(t[b],r),I=e.mapAlongAxis(t[b+1],r);a[b*2]=t[b],a[b*2+1]=e.reverseMapAlongAxis((D+I)/2,r)}let s=a.map((b,D,I)=>{if(D%2===0)return I[D];let E,G,T,P=1;do E=Math.round(I[D]*P)/P,G=Math.round(I[D-1]*P)/P,T=Math.round(I[D+1]*P)/P,P*=10;while(G>=E||T<=E);return E}),l=s.map(b=>{let D=o*b;return new Gn(__dcg_shared_module_exports__['Ma'](D),e.settings.labelSize).getBoundsWhenCenteredAt(e.mapAlongAxis(D,r),r)}),c=25,u=s.filter((b,D)=>{if(D%2===0)return!0;let I=r==="x"?D-1:D+1;if(l[D].lower<l[I].upper+c)return!1;let E=r==="x"?D+1:D-1;return!(l[D].upper>l[E].lower-c)}),h=u.length,p=h,g=!1,y=!1,w=0;for(;!y&&w<u.length-1;){let b=o*u[++w];!g&&b>=i&&(h=w-1,g=!0),!y&&b>n&&(p=w+1,y=!0)}return u.slice(h,p)},OK=(t,e,r,i,n,o,a)=>{let s=Math.max(1,r),l=Math.ceil(__dcg_shared_module_exports__['Oa'](Math.log(t)/Math.log(i)/s)),c=Math.floor(__dcg_shared_module_exports__['Oa'](Math.log(e)/Math.log(i)/s));if(DD({nmin:l,nmax:c})){for(let u=l;u<=c;u++)a(__dcg_shared_module_exports__['a'](i,u*s));if(!(r>=1))for(let u=l-1;u<=c;u++){let h=__dcg_shared_module_exports__['a'](i,u*s),p=Math.log(1/r)/Math.log(2),g=[1,i];for(let y=0;y<p;y++)g=PK({stepTicks:g,projection:n,axis:o,min:t,max:e,major:h});g=g.slice(1,g.length-1);for(let y of g)a(h*y)}}},_K=(t,e,r,i,n,o,a)=>{if(r<1)return;let s=Math.floor(__dcg_shared_module_exports__['Oa'](Math.log(t)/Math.log(i)/r)),l=Math.ceil(__dcg_shared_module_exports__['Oa'](Math.log(e)/Math.log(i)/r));if(!DD({nmin:s,nmax:l}))return;let c=r>1?Math.min(r,8):i-1,u=r>1?h=>__dcg_shared_module_exports__['a'](i,h*(r/c)):h=>h+1;for(let h=s;h<l;h++){let p=__dcg_shared_module_exports__['a'](i,h*r);for(let g=1;g<c;g++)a(p*u(g))}},DD=({nmin:t,nmax:e})=>isFinite(e-t)&&e-t<=1e4,Mp=({axis:t,lineType:e,axisRangeMin:r,axisRangeMax:i,cartesianStepSizes:n,projection:o,callbackfn:a})=>{let[s,l,c,u]=t==="x"?[o.settings.xAxisScale,os(o.settings.xAxisBase),n.majorStepX,n.minorStepX]:[o.settings.yAxisScale,os(o.settings.yAxisBase),n.majorStepY,n.minorStepY],h=e==="major",p=h?c:u;s==="logarithmic"?(h?OK:_K)(r,i,p,l,o,t,a):Tp(r,i,p,a)};function FL(t,e,r){return t<e?e:t>r?r:t}function Tw(t,e){e.left<t.left&&(t.left=e.left),e.right>t.right&&(t.right=e.right),e.top<t.top&&(t.top=e.top),e.bottom>t.bottom&&(t.bottom=e.bottom)}function Gw(t,e){let r=Math.abs(t),i=Math.abs(e),n=1e-4;return Math.abs(r-i)<=(r<i?i:r)*n}function FK(){return new Ac(1024,768)}function RL(t){let{xAxisScale:e,yAxisScale:r,xAxisBase:i,yAxisBase:n}=t,o=os(i),a=os(n);return new Si(...e==="linear"?[-10,10]:[__dcg_shared_module_exports__['a'](o,-5),__dcg_shared_module_exports__['a'](o,5)],...r==="linear"?[-10,10]:[__dcg_shared_module_exports__['a'](a,-5),__dcg_shared_module_exports__['a'](a,5)])}var Hl=class{constructor(e,r,i,n){this.type="2d";this.lastActiveToken={selected:void 0,hovered:void 0};this._layerClasses={};this.$=e,this.evaluator=n,this.controller=i,this.settings=r;let o=FK(),a=RL(r).squareYAxis(o,r);this.setUserRequestedViewport(a),this.__projection=new us(o,a,r),this.markLabelsDirty=__dcg_shared_module_exports__['A'](()=>{this.evaluator.notifyWhenSynced(()=>{this.poiLabelsLayer.markLabelsDirty(),this.redrawAllLayers()})},300),this.poiController=new ol(this,r),this.viewportController=new uw(this,this.controller),this.showPOIDots=!0,this.$.css("overflow","hidden"),this.graphSketches={},this.graphImages={},this.audioGraph=new cf(i,this);var s=this;this.canvasLayer=Fc.mountToNode(Sw,this.$[0],{grapher:function(){return s}}),this.boxSelectLayer=new Qx,this.$.append(this.canvasLayer.rootNode);var l=V("<div></div>");this.$.append(l),this.imageLayer=Fc.mountToNode(ff,l[0],{grapher:function(){return s}}),this.gridLayer=new Aw,this.poiDotsLayer=new Xx(this.controller),this.graphsLayer=new Ei(this.controller,this.settings,g=>this.audioGraph.getExpressionAriaLabel(g)),this.transformationPreviewLayer=new Mw(this.controller);var c=V("<div></div>");this.$.append(c),this.clickableObjectsLayer=Fc.mountToNode(mf,c[0],{grapher:function(){return s}});var u=V("<div></div>");this.$.append(u),this.movablePointsLayer=Fc.mountToNode(Zg,u[0],{grapher:function(){return s}});var h=V("<div></div>");this.$.append(h),this.poiLabelsLayer=Fc.mountToNode(Ip,h[0],{grapher:function(){return s}});var p=V("<div></div>");this.$.append(p),this.geoKeyboardCursorLayer=Fc.mountToNode(Zx,p[0],{grapher:()=>this}),this.traceLayer=this.poiLabelsLayer,this.scaleAxis=void 0,this.__sketchOrder=[],this.__redrawRequested=!1,this.__isRedrawingSlowly=!1,this.events=new Tn}privateGetGridLayer(){return this.gridLayer}static copyGraphProperties(e,r){e=__dcg_shared_module_exports__['mc'](vd,e);let i=__dcg_shared_module_exports__['b']({},e);return delete i.viewport,r.setGraphSettings(i),e}remove(){this.$.remove(),this.poiController.remove(),this.viewportController.remove(),this.audioGraph.remove()}tick(e){this.__redrawRequested&&this._redrawAllLayers(),this.__movablePointListener&&this.__movablePointListener()}registerMovablePointListener(e){this.__movablePointListener=e}deregisterMovablePointListener(){this.__movablePointListener=void 0}setSketchOrder(e){__dcg_shared_module_exports__['E'](this.__sketchOrder,e)||(this.__sketchOrder=e,this.redrawAllLayers())}clear(){this.graphSketches={},this.graphImages={}}getSketchOrder(){return this.__sketchOrder}getGraphSketch(e){return this.graphSketches[e]}getGraphImage(e){return this.graphImages[e]}addGraphSketch(e){this.graphSketches[e.id]=e}removeGraphSketch(e){delete this.graphSketches[e]}addGraphImage(e){e.imageObj.width&&e.imageObj.height?(this.graphImages[e.id]=e,this.redrawAllLayers()):V(e.imageObj).on("load.calc_load",()=>this.addGraphImage(e))}removeGraphImage(e){let r=this.graphImages[e];r&&V(r.imageObj).off("load.calc_load"),delete this.graphImages[e],this.redrawAllLayers()}setBoxSelectRectangle(e){this.boxSelectRectangle=e,this.redrawAllLayers()}getProjection(){return this.__projection}_setProjection(e){this.__projection=e,this.redrawAllLayers()}getAudioTrace(){return this.audioGraph}getDefaultViewport(){let e=this.getProjection(),r=RL(this.settings),{xAxisScale:i,yAxisScale:n}=this.settings;return i===n?r.squareYAxis(e.screen,this.settings):r}_updateScreenSize(e,r){if(e<=0||r<=0)return;let n=this.getProjection().screen;if(n.width===e&&n.height===r)return;this.$.width(e);let o=new Ac(e,r);this.viewportController.setScreen(o)}_setIsVisible(e){e!==this.isVisible&&(this.isVisible=e,e?this.redrawAllLayers():this.canvasLayer.resize(0,0))}getIsVisible(){return this.isVisible}update(){let e=this.controller.computeMajorLayout().grapher;e.width>0&&e.height>0?(this._setIsVisible(!0),this._updateScreenSize(e.width,e.height),this.$.css({position:"absolute",left:e.left+"px",top:e.top+"px",width:e.width+"px",height:e.height+"px"})):this._setIsVisible(!1)}setActiveToken(e,r){var i=this.lastActiveToken[r];this.lastActiveToken[r]=e;var n=e&&this.getGraphSketch(e),o=i&&this.getGraphSketch(i);o!==n&&(o&&(r==="selected"?o.tokenSelected=!1:r==="hovered"&&(o.tokenHovered=!1)),n&&(r==="selected"?n.tokenSelected=!0:r==="hovered"&&(n.tokenHovered=!0))),this.redrawAllLayers()}deselectSketch(e){let r=this.getGraphSketch(e);r&&(r.selected=!1,r.showPOI=!1,r.showHighlight=!1)}selectSketch(e){let r=this.getGraphSketch(e);r&&(r.selected=!0,r.showPOI=this.controller.isTraceEnabled(),r.showHighlight=!0)}updateSketch(e,r){let i=this.getGraphSketch(e);if(!r.length){this.removeGraphSketch(e);return}let n=new pw(e,r);r[0].graphMode!==15&&(n.color=r[0].color,r[0].style&&(n.style=r[0].style)),i&&n.updateFrom(i);let o=!!this.controller.getPropagatedSelectedIds()[e];n.selected=o,n.tokenHovered=e===String(this.lastActiveToken.hovered),n.tokenSelected=e===String(this.lastActiveToken.selected),n.showPOI=o&&this.controller.isTraceEnabled(),n.showHighlight=o,this.addGraphSketch(n)}updateIntersections(e,r){let i=this.getGraphSketch(e);i&&i.updateIntersections(r)}redrawAllLayers(){this.__redrawRequested=!0}_clear(){var i;let e=this.getProjection(),r=e.screen;this.canvasLayer.resize(e.screen.width,e.screen.height),(i=this.canvasLayer.ctx)==null||i.clearRect(0,0,r.width,r.height)}_redrawAllLayers(){this.update(),this.isVisible&&(this.__redrawRequested=!1,this._clear(),this.audioGraph.recomputePoints(),this._recomputeClickableObjects(),this._redrawImageLayer(),this._redrawGridLayer(),this._redrawGraphsLayer(),this._redrawPointsAndLabels(),this._redrawTransformationPreviewLayer(),this._redrawBoxSelectLayer(),this._redrawGeoKeyboardCursorLayer(),this._updateCanvasLayerAria(),this.events.triggerEvent("redraw",void 0))}_redrawGridLayer(){this.canvasLayer.ctx&&this.gridLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.scaleAxis)}_recomputeClickableObjects(){this.clickableObjectsLayer.redraw()}_redrawGraphsLayer(){this.canvasLayer.ctx&&this.graphsLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.graphSketches,this.graphImages,this.__sketchOrder,this.poiLabelsLayer,this.clickableObjectsLayer)}_redrawTransformationPreviewLayer(){this.canvasLayer.ctx&&this.transformationPreviewLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection())}_redrawBoxSelectLayer(){this.canvasLayer.ctx&&this.boxSelectLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.boxSelectRectangle)}_redrawGeoKeyboardCursorLayer(){this.geoKeyboardCursorLayer.update()}_updateCanvasLayerAria(){let e=0;for(let r in this.graphSketches)Va(this.controller,this.graphSketches[r])&&(e+=1);this.canvasLayer.updateAria(this.isVisible,e)}_redrawPointsAndLabels(){if(!this.canvasLayer.ctx)return;var e=this.getProjection();let r=[];this.movablePointsLayer.redraw(this.canvasLayer.ctx,e,r),this.showPOIDots&&this.poiDotsLayer.redrawToCtx(this.canvasLayer.ctx,e,this.graphSketches,this.poiLabelsLayer,this.clickableObjectsLayer,this.__sketchOrder);let i=this.$[0].getBoundingClientRect();__dcg_shared_module_exports__['k']([this.controller.find$(".dcg-overgraph-pillbox-elements")[0],this.controller.find$(".dcg-graphpaper-branding")[0]],o=>{if(!o)return;let a=o.getBoundingClientRect();r.push({left:a.left-i.left,top:a.top-i.top,right:a.right-i.left,bottom:a.bottom-i.top})});var n=this.canvasLayer.ctx.canvas.getBoundingClientRect();this.poiLabelsLayer.redraw(e,this.canvasLayer.ctx,{width:n.width,height:n.height},r)}_redrawImageLayer(){this.canvasLayer.ctx&&this.imageLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.graphImages,this.__sketchOrder)}_parseScreenshotOpts(e){let r=this.getProjection(),i,n,o,a,s,l;return e?(i=e.width||e.height||r.screen.width,n=e.height||e.width||r.screen.height,o=e.targetPixelRatio||1,o<1&&(o=1),a=(i<256||n<256)&&!e.preserveAxisNumbers,s=as.fromObject(e.settings||this.settings),l=!!e.transparentBackground):(i=r.screen.width,n=r.screen.height,o=1,a=!1,s=as.fromObject(this.settings),l=!1),a&&(s.setProperty("xAxisNumbers",!1),s.setProperty("yAxisNumbers",!1),s.setProperty("polarNumbers",!1)),{width:i,height:n,targetPixelRatio:o,settings:s,transparentBackground:l}}_syncScreenshotReturnCanvas(e){var r=document.createElement("canvas");if(e&&e.braille){let{embosserModel:i,brailleMode:n}=e.braille,o=Sp[i];r.width=o.width,r.height=o.height,kL(r,this,o,i,n)}else{let i=this._parseScreenshotOpts(e);r.width=i.width*i.targetPixelRatio,r.height=i.height*i.targetPixelRatio,this.screenshotToCanvas(r,e)}return r}screenshot(e){return this._syncScreenshotReturnCanvas(e).toDataURL("image/png")}asyncScreenshot(e,r){let i=!1;!e.transparentBackground&&e.showLabels&&(e=__dcg_shared_module_exports__['M'](e),e.transparentBackground=!0,i=!0);let n=this._syncScreenshotReturnCanvas(e),o=n.getContext("2d"),a=n,s=o;e&&e.format==="svg"&&(i=!1,e.transparentBackground&&(e=__dcg_shared_module_exports__['M'](e),e.transparentBackground=!1),s=new U1(n.width,n.height),a={getContext:()=>s,width:n.width,height:n.height},this.screenshotToCanvas(a,e));let l=this.makeScreenshotProjection(e),c=[];if(e.showMovablePoints&&this.movablePointsLayer.drawForScreenshot(s,l,c),e.showLabels){var u=l.screen.width,h=l.screen.height,p=l.settings.labelSize||15,g=1;(u<200||h<200)&&(g=.9);let y=p*g+"px",w=V(`<div class="dcg-calculator-api-container">
          <div class="dcg-container">
            <div class="dcg-grapher" style="font-size:${y}"></div>
          </div>
        </div>`).css({width:l.screen.width,height:l.screen.height,position:"fixed",left:"0px",top:"0px"}).appendTo("body"),b=w.find(".dcg-grapher"),D=Fc.mountToNode(Ip,b[0],{grapher:()=>this}),I={width:l.screen.width,height:l.screen.height};D.drawForScreenshot(l,o,s,I,c),w.remove()}i&&(s.globalCompositeOperation="destination-over",s.fillStyle="#FFF",s.fillRect(0,0,a.width,a.height)),e&&e.format==="svg"?r(s.getSerializedSvg()):r(a.toDataURL("image/png"))}makeScreenshotProjection(e){let{width:r,height:i,settings:n}=this._parseScreenshotOpts(e),o=new Ac(r,i),a=this.getProjection().viewport;return this.getSetting("squareAxes")&&(a=a.squareCrop(o,this.settings)),new us(o,a,n)}screenshotToCanvas(e,r){let i=this._parseScreenshotOpts(r),{targetPixelRatio:n,transparentBackground:o}=i,a=e.getContext("2d");a.scale(n,n);let s=this.makeScreenshotProjection(r);s.settings.takingScreenshot=!0,jn(a,"background"),ei(a,"dcg-svg-background"),o?a.clearRect(0,0,s.screen.width,s.screen.height):(a.fillStyle="white",a.fillRect(0,0,s.screen.width,s.screen.height)),Br(a),Yn(a),this.imageLayer.redrawToCtx(a,s,this.graphImages,this.__sketchOrder),this.gridLayer.redrawToCtx(a,s),this.graphsLayer.redrawToCtx(a,s,this.graphSketches,this.graphImages,this.__sketchOrder,this.poiLabelsLayer,this.clickableObjectsLayer,r)}getImageData(e,r,i,n){var o;return(o=this.canvasLayer.ctx)==null?void 0:o.getImageData(e,r,i,n)}getSetting(e,r){let i=this.settings.getProperty(e);return i!==void 0?i:r}getState(e){let r={viewport:this.getCurrentViewport()};return this.settings.stateProperties.forEach(i=>{i!=="randomSeed"&&(r[i]=this.getSetting(i))}),e.stripDefaults&&(r=__dcg_shared_module_exports__['kc'](vd,r)),r}getUndoRedoState(){let e={};return this.settings.stateProperties.forEach(r=>{e[r]=this.getSetting(r)}),e.viewport=this.getUserRequestedViewport(),e}notifyAfterRedraw(e){if(this.__isRedrawingSlowly)requestAnimationFrame(this.notifyAfterRedraw.bind(this,e));else if(!this.__redrawRequested)e();else{this.notifyAfterRedraw_i?this.notifyAfterRedraw_i++:this.notifyAfterRedraw_i=1;let r="redraw.notifyAfterRedraw"+this.notifyAfterRedraw_i;this.events.observeEvent(r,()=>{this.events.unobserveEvent(r),e()})}}getCurrentViewport(){return this.viewportController.getViewport().toObject()}getUserRequestedViewport(){return this._lastUserRequestedViewport}setUserRequestedViewport(e){this._lastUserRequestedViewportUpdateToken||(this._lastUserRequestedViewportUpdateToken=0),this._lastUserRequestedViewportUpdateToken+=1,this._lastUserRequestedViewport=__dcg_shared_module_exports__['M'](e)}debounceUserRequestedViewportChange(){this.__debouncedViewportCommit||(this.__debouncedViewportCommit=__dcg_shared_module_exports__['A']((i,n)=>{if(!this.isDragging&&this._lastUserRequestedViewportUpdateToken===n){if(this._lastUserRequestedViewport){var o=Si.fromObject(this._lastUserRequestedViewport),a=this.computeConcreteViewport(o);if(a.equals(i))return}this.controller.dispatch({type:"commit-user-requested-viewport",viewport:i})}},1e3));let e=this.getCurrentViewport();this.__debouncedViewportCommit(e,this._lastUserRequestedViewportUpdateToken)}setGrapherState(e,r){if((!r||!r.doNotClear)&&this.clear(),e=Hl.copyGraphProperties(e,this.settings),"viewport"in e){let i=Si.fromObject(e.viewport);this.setUserRequestedViewport(i);let n=this.computeConcreteViewport(i);this.viewportController.setViewport(n)}this.redrawAllLayers()}computeConcreteViewport(e){let r=this.getProjection().screen;return this.getSetting("squareAxes")&&!e.isSquare(r,this.controller.getAxisScaleSettings())?e.squareYAxis(r,this.settings):e}setLayerClass(e,r){var i=this._layerClasses[e];this._layerClasses[e]=r,i!==r&&(i&&this.$.removeClass(i),r&&this.$.addClass(r))}};var yf=class{constructor(e){this.model=e;this.displayName="graphing-calculator-text-geometry-tool-selection-display-name";this.toolType="selection";this.icon=[{type:"filled-polygon",color:"#000",path:[40,30,58,46,51,47,56,60,53,62,47,49,41,54,40,30]}]}getNumberInputLatex(){return""}clearTentativeOutputs(){}canNextInputBePoint(){return!1}getNecessaryComplexObject(){}getNonPointInputType(){}getHint(){return""}getComplexInputs(){return{point:0,straight:0,segment:0,circle:0,arc:0,polygon:0,image:0,angle:0,number:0}}onButton(){this.model.setToolMode("selection")}onNumberInput(e){}onPress(e){}onRelease(e){return this.tryCommitResults()}onMove(e){}tryCommitResults(){return{committed:void 0}}};var ti=class{constructor(e){this.model=e;this.isDragCreatable=!1;this.s=e.s}createOutput(){return this.model.createCustomToolOutput(this.getSpec())}clearTentativeOutputs(){let e=this.getSpec();var r={},i=this.model.getNonObjectsState().ui.currentTool.idMap;for(let n in i){let o=i[n];!this.model.isObjectALockedToolInput(o)&&this.model.isObjectUncommitted(o)&&(r[n]=o)}this.model.deleteObjectsAndRememberReusableId(r),this.model.tentativelyMatchToolInput(e,""),this.createOutput()}shouldReferenceSpecificItemInList(e,r){return!r}getExpandedReferenceForDef(e,r){return this.shouldReferenceSpecificItemInList(e,r)?e.referenceLatex:e.assignment}getListIndexForHover(e,r){if(this.shouldReferenceSpecificItemInList(e,r))return e.listIndex}_getOrCreatePoint(e,r,i){var c,u;let n=this.model.getOrCreatePointNearMouse(e,i);if(n.type==="def")return{createdNew:!1,def:n.def,reference:this.getExpandedReferenceForDef(n.def,r)};let o=this.createPointDefinition(n.spec,r),a=n.spec.type==="point-reference"?n.spec.targetSpec.parentDefs:n.spec.parentDefs,s=0;for(let h=0;h<a.length;h++){let p=a[h];if(p.polygonEdgeInfo){let g=this.model.createToolInputDependency({type:"polygon-segment",parents:[(c=p.polygonEdgeInfo)==null?void 0:c.polygonDef.referenceLatex],edgeNumber:((u=p.polygonEdgeInfo)==null?void 0:u.edgeNumber)||0},this.getSpec(),s);o.parents[h]=g,s+=1,this.model.setObjectHovered({tokenId:g,listIndex:void 0})}else this.model.setObjectHovered({calcId:p.calcId,listIndex:this.getListIndexForHover(p,r)})}return{createdNew:!0,def:void 0,reference:this.model._createInputObject(o)}}_isReadyToCommit(){return this.model.getNonObjectsState().ui.currentTool.inputIndex>=this.getSpec().inputs.length}_getFirstMissingInput(){let{inputIndex:e}=this.model.getNonObjectsState().ui.currentTool;return this.getSpec().inputs[e]}canNextInputBePoint(){let e=this._getFirstMissingInput();return!!(e&&e.type==="point")}getNonPointInputType(){let e=this._getFirstMissingInput();if(!(!e||e.type==="point"))return e.type}getNecessaryComplexObject(){if(!this.canNextInputBePoint())return this.getNonPointInputType()}getHint(){let e=this._getFirstMissingInput();return e?e.hint!==void 0?this.s(e.hint):this.s("graphing-calculator-text-geometry-select-hint",{type:e.type}):""}getComplexInputs(){let e=this.getSpec(),r={point:0,straight:0,segment:0,circle:0,arc:0,polygon:0,angle:0,number:0};for(let i of e.inputs)r[i.type]+=1,i.type==="segment"&&(r.straight+=1);return r}onPress(e){this.onMove(e),this.isDragCreatable&&this.model.getNonObjectsState().ui.currentTool.inputIndex===0&&this.model.attemptLockToolInputIn(this.getSpec())}onRelease(e){return this.onMove(e),this.tryCommitResults()}tryCommitResults(){this.model.attemptLockToolInputIn(this.getSpec());let e;return this._isReadyToCommit()&&(e=this.model.getUncommittedObjects(),this.model.commitObjects(),this.model.deselectAllObjects(),this.model.cancelToolplay()),{committed:e}}onMove(e){var n,o;this.clearTentativeOutputs();let r=this.canNextInputBePoint(),i=this.getNonPointInputType();if(r||i){let a=!1;if(i){let s=this.model.getObjectDefUnderMouse(e.pt,e.tolerance);if(s&&this.model.objectIsInstanceOf(s,i))if(s.polygonEdgeInfo){let l=this.model.createToolInputDependency({type:"polygon-segment",parents:[(n=s.polygonEdgeInfo)==null?void 0:n.polygonDef.assignment],edgeNumber:((o=s.polygonEdgeInfo)==null?void 0:o.edgeNumber)||0},this.getSpec(),0);this.model.setObjectHovered({tokenId:l,listIndex:void 0});let c=l;this.model.tentativelyMatchToolInput(this.getSpec(),c),a=!0}else{let l=this.getExpandedReferenceForDef(s,e.shift);this.model.setObjectHovered({calcId:s.calcId,listIndex:this.getListIndexForHover(s,e.shift)}),this.model.tentativelyMatchToolInput(this.getSpec(),l),a=!0}}if(!a&&r){let s=this._getOrCreatePoint(e.pt,e.shift,e.tolerance);s.def&&!s.createdNew&&this.model.setObjectHovered({calcId:s.def.calcId,listIndex:this.getListIndexForHover(s.def,e.shift)}),this.toolType!=="custom"&&!!this.model.getNonObjectsState().ui.currentTool.lockedIds[s.reference]||this.model.tentativelyMatchToolInput(this.getSpec(),s.reference)}}this.createOutput()}getNumberInputLatex(){let e=this.getSpec(),{idMap:r,inputIndex:i}=this.model.getNonObjectsState().ui.currentTool,n=e.inputs[i];return n&&n.type==="number"&&r[n.id]||""}onNumberInput(e){this.clearTentativeOutputs(),this.model.tentativelyMatchToolInput(this.getSpec(),e),this.createOutput()}createPointDefinition(e,r){let i=e.parentDefs,n;switch(e.type){case"point-reference":{n={type:"point-reference",parents:[this.getExpandedReferenceForDef(i[0],r)]};break}default:{let o=i.map(a=>this.getExpandedReferenceForDef(a,r));n=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},e),{parents:o})}}return n}};function Vw(t,e){switch(e){case"point":return t===__dcg_shared_module_exports__['S'];case"straight":return t===__dcg_shared_module_exports__['ga']||t===__dcg_shared_module_exports__['ia']||t===__dcg_shared_module_exports__['aa'];case"angle":return t===__dcg_shared_module_exports__['ka']||t===__dcg_shared_module_exports__['ma'];case"arc":return t===__dcg_shared_module_exports__['ea'];case"circle":return t===__dcg_shared_module_exports__['ca'];case"polygon":return t===__dcg_shared_module_exports__['_'];case"segment":return t===__dcg_shared_module_exports__['aa'];case"number":return t===__dcg_shared_module_exports__['R'];default:return e}}var RK="graphing-calculator-text-geometry-tool-point-hint",bf=class extends ti{constructor(r){super(r);this.model=r;this.displayName="graphing-calculator-text-geometry-tool-point-display-name",this.toolName="point",this.toolType="simple",this.icon=[{type:"point",x:50,y:50,size:"large"}]}getSpec(){return{inputs:[{type:"point",id:"1",hint:RK}],outputs:[]}}};var NK="graphing-calculator-text-geometry-tool-line-hint-start",BK="graphing-calculator-text-geometry-tool-line-hint-end",xf=class extends ti{constructor(r){super(r);this.model=r;this.displayName="graphing-calculator-text-geometry-tool-line-display-name",this.toolType="simple",this.toolName="line",this.isDragCreatable=!0,this.icon=[{type:"stroked-path",path:[78,22,22,78],lineWidth:"large"},{type:"point",x:68,y:32},{type:"point",x:32,y:68}]}getSpec(){return{inputs:[{type:"point",id:"1",hint:NK},{type:"point",id:"2",hint:BK}],outputs:[{id:"3",type:"line",hidden:!1,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};var KK="graphing-calculator-text-geometry-tool-segment-hint-start",UK="graphing-calculator-text-geometry-tool-segment-hint-end",wf=class extends ti{constructor(r){super(r);this.model=r;this.displayName="graphing-calculator-text-geometry-tool-segment-display-name",this.toolName="segment",this.isDragCreatable=!0,this.toolType="simple",this.icon=[{type:"stroked-path",path:[68,32,32,68],lineWidth:"large"},{type:"point",x:68,y:32},{type:"point",x:32,y:68}]}getSpec(){return{inputs:[{type:"point",id:"1",hint:KK},{type:"point",id:"2",hint:UK}],outputs:[{id:"3",type:"segment",hidden:!1,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};var qK="graphing-calculator-text-geometry-tool-ray-hint-start",HK="graphing-calculator-text-geometry-tool-ray-hint-end",vf=class extends ti{constructor(r){super(r);this.model=r;this.displayName="graphing-calculator-text-geometry-tool-ray-display-name",this.toolName="ray",this.isDragCreatable=!0,this.toolType="simple",this.icon=[{type:"stroked-path",path:[78,22,32,68],lineWidth:"large"},{type:"point",x:68,y:32},{type:"point",x:32,y:68}]}getSpec(){return{inputs:[{type:"point",id:"1",hint:qK},{type:"point",id:"2",hint:HK}],outputs:[{id:"3",type:"ray",hidden:!1,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};var $K="graphing-calculator-text-geometry-tool-circle-hint-center",zK="graphing-calculator-text-geometry-tool-circle-hint-radius",Cf=class extends ti{constructor(r){super(r);this.model=r;this.displayName="graphing-calculator-text-geometry-tool-circle-display-name",this.toolName="circle",this.isDragCreatable=!0,this.toolType="simple",this.icon=[{type:"circle",x:50,y:50,radius:26},{type:"point",x:50,y:50},{type:"point",x:68,y:32}]}getSpec(){return{inputs:[{type:"point",id:"1",hint:$K},{type:"point",id:"2",hint:zK}],outputs:[{id:"3",type:"circle",hidden:!1,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};var WK="graphing-calculator-text-geometry-tool-arc-hint-1",jK="graphing-calculator-text-geometry-tool-arc-hint-2",YK="graphing-calculator-text-geometry-tool-arc-hint-3",Sf=class extends ti{constructor(r){super(r);this.model=r;this.displayName="graphing-calculator-text-geometry-tool-arc-display-name",this.toolName="arc",this.toolType="complex";let i=50,n=80,o=80,a=-3,s=-2.6,l=-1.7;this.icon=[{type:"arc",x:n,y:o,radius:i,startAngle:a,endAngle:l},{type:"point",x:n+i*Math.cos(a),y:o+i*Math.sin(a)},{type:"point",x:n+i*Math.cos(s),y:o+i*Math.sin(s)},{type:"point",x:n+i*Math.cos(l),y:o+i*Math.sin(l)}]}getSpec(){return{inputs:[{type:"point",id:"1",hint:WK},{type:"point",id:"2",hint:jK},{type:"point",id:"3",hint:YK}],outputs:[{id:"4",type:"arc",hidden:!1,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"},{type:"reference-input",id:"3"}]}]}}};var JK="graphing-calculator-text-geometry-tool-parallel-hint-straight-line",XK="graphing-calculator-text-geometry-tool-parallel-hint-point",Ef=class extends ti{constructor(r){super(r);this.model=r;this.displayName="graphing-calculator-text-geometry-tool-parallel-display-name",this.toolName="parallel",this.toolType="complex",this.icon=[{type:"stroked-path",color:"light",path:[25,50,75,30],lineWidth:"large"},{type:"stroked-path",path:[25,70,75,50],lineWidth:"large"},{type:"point",x:50,y:60,size:"medium"}]}getSpec(){return{inputs:[{type:"straight",id:"1",hint:JK},{type:"point",id:"2",hint:XK}],outputs:[{id:"3",type:"parallel",hidden:!1,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};var QK="graphing-calculator-text-geometry-tool-perpendicular-hint-straight-line",ZK="graphing-calculator-text-geometry-tool-perpendicular-hint-point",Df=class extends ti{constructor(r){super(r);this.model=r;this.displayName="graphing-calculator-text-geometry-tool-perpendicular-display-name",this.toolName="perpendicular",this.toolType="complex",this.icon=[{type:"stroked-path",color:"light",path:[40,25,60,75],lineWidth:"large"},{type:"stroked-path",path:[25,60,75,40],lineWidth:"large"},{type:"point",x:50,y:50,size:"medium"}]}getSpec(){return{inputs:[{type:"straight",id:"1",hint:QK},{type:"point",id:"2",hint:ZK}],outputs:[{id:"3",type:"perpendicular",hidden:!1,parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};var e5="graphing-calculator-text-geometry-tool-midpoint-hint",kf=class extends ti{constructor(r){super(r);this.model=r;this.displayName="graphing-calculator-text-geometry-tool-midpoint-display-name",this.toolName="midpoint",this.toolType="simple",this.icon=[{type:"stroked-path",path:[32,32,68,68]},{type:"point",x:50,y:50,size:"large"}]}getSpec(){return{inputs:[{type:"segment",id:"1",hint:e5}],outputs:[{id:"2",type:"midpoint",hidden:!1,parents:[{type:"reference-input",id:"1"}]}]}}};var t5="graphing-calculator-text-geometry-tool-polygon-hint-first-point",r5="graphing-calculator-text-geometry-tool-polygon-hint-next-point",i5="graphing-calculator-text-geometry-tool-polygon-hint-finish-point",If=class extends ti{constructor(r){super(r);this.model=r;this.addExtraPoint=!1;this.displayName="graphing-calculator-text-geometry-tool-polygon-display-name",this.toolName="polygon",this.toolType="complex",this.icon=[{type:"filled-polygon",path:[40,30,70,70,30,60,40,30]},{type:"stroked-path",path:[40,30,70,70,30,60,40,30]},{type:"point",x:40,y:30},{type:"point",x:70,y:70},{type:"point",x:30,y:60}]}clearTentativeOutputs(){let r=this.addExtraPoint;this.addExtraPoint=!0,super.clearTentativeOutputs(),this.addExtraPoint=r}getHint(){let r=this.model.getNonObjectsState().ui.currentTool.inputIndex;return r===0?this.s(t5):r<3?this.s(r5):this.s(i5)}canNextInputBePoint(){return!0}getSpec(){let{inputIndex:r}=this.model.getNonObjectsState().ui.currentTool,i=r;this.addExtraPoint&&(i+=1),i<2&&(i=2);for(var n={inputs:[],outputs:[]},o=[],a=0;a<i;a++){let s=a.toString();o.push({type:"reference-input",id:s}),n.inputs.push({type:"point",id:s})}return n.outputs.push({id:"polygon",type:"polygon",hidden:!1,parents:o,connectBorder:!this.addExtraPoint}),n}onRelease(r){var i=this.onMove(r);this.addExtraPoint=!i;let n=this.getSpec();if(this.addExtraPoint=!1,this.model.attemptLockToolInputIn(n),!i)return{committed:void 0};let o;return this._isReadyToCommit()&&(o=this.model.getUncommittedObjects(),this.model.commitObjects(),this.model.deselectAllObjects(),this.model.cancelToolplay()),{committed:o}}onMove(r){this.clearTentativeOutputs();let i=!1,n=this.model.getObjectDefUnderMouse(r.pt,r.tolerance),{idMap:o}=this.model.getNonObjectsState().ui.currentTool;if(n){let s=this.getExpandedReferenceForDef(n,r.shift);if(this.model.objectIsInstanceOf(n,"point")&&this.model.isObjectALockedToolInput(s)&&o[0]===s)return i=!0,n&&this.model.setObjectHovered({calcId:n.calcId,listIndex:this.getListIndexForHover(n,r.shift)}),this.createOutput(),i}this.addExtraPoint=!0;let a=this._getOrCreatePoint(r.pt,r.shift,r.tolerance);return this.model.tentativelyMatchToolInput(this.getSpec(),a.reference),a.def&&!a.createdNew&&this.model.setObjectHovered({calcId:a.def.calcId,listIndex:this.getListIndexForHover(a.def,r.shift)}),this.createOutput(),this.addExtraPoint=!1,i}};var n5="graphing-calculator-text-geometry-tool-compass-hint-segment",o5="graphing-calculator-text-geometry-tool-compass-hint-center",Mf=class extends ti{constructor(r){super(r);this.model=r;this.displayName="graphing-calculator-text-geometry-tool-compass-display-name",this.toolName="compass",this.toolType="complex",this.icon=[{type:"stroked-path",path:[50,50,75,50]},{type:"circle",x:50,y:50,radius:25}]}getSpec(){return{inputs:[{type:"segment",id:"1",hint:n5},{type:"point",id:"2",hint:o5}],outputs:[{id:"3",type:"circle",hidden:!1,parents:[{type:"reference-input",id:"2"},{type:"reference-input",id:"1"}]}]}}};var a5="graphing-calculator-text-geometry-tool-angle-hint-1",s5="graphing-calculator-text-geometry-tool-angle-hint-2",l5="graphing-calculator-text-geometry-tool-angle-hint-3",NL="graphing-calculator-text-geometry-tool-angles-hint-1",Md=class extends ti{constructor(r){super(r);this.model=r;this.toolType="complex",this.displayName="graphing-calculator-text-geometry-tool-angle-display-name",this.toolName="angle",this.angleType="angle",this.anglesType="angles",this.icon=[{type:"stroked-path",path:[40,30,30,70,70,70],color:"#CCC"},{type:"angle",x:30,y:70,radius:20,startAngle:-1.325817,deltaAngle:1.325817,isDirected:!1},{type:"point",x:30,y:70},{type:"point",x:40,y:30},{type:"point",x:70,y:70}]}canNextInputBePoint(){return!0}shouldReferenceSpecificItemInList(r,i){return __dcg_shared_module_exports__['va'](r.typedRuntimeValue.valueType,__dcg_shared_module_exports__['_'])?!0:super.shouldReferenceSpecificItemInList(r,i)}getNonPointInputType(){let{inputIndex:r}=this.model.getNonObjectsState().ui.currentTool;if(r===0)return"polygon"}getSpec(){let{inputIndex:r,idMap:i}=this.model.getNonObjectsState().ui.currentTool,n=i[1];if(!r&&!n)return{inputs:[{type:"polygon",id:"1",hint:NL}],outputs:[{id:"2",type:this.anglesType,listAccess:void 0,hidden:!1,showLabel:!0,label:"",parents:[{type:"reference-input",id:"1"}]}]};let o=[];if(n&&this.model.findDefsForInputId(n).forEach(s=>{let l=s.typedRuntimeValue;if(l.valueType===__dcg_shared_module_exports__['_']){let c=l.value.length;c>0&&o.push({referenceLatex:s.referenceLatex,sides:c})}}),o.length){let a=[],s=2;return o.forEach(l=>{for(var c=0;c<l.sides;c++)a.push({id:s+"",type:this.anglesType,listAccess:c+1,hidden:!1,showLabel:!0,label:"",parents:[{type:"hardcoded",id:l.referenceLatex}]}),s+=1}),{inputs:[{type:"polygon",id:"1",hint:NL}],outputs:a}}return{inputs:[{type:"point",id:"1",hint:a5},{type:"point",id:"2",hint:s5},{type:"point",id:"3",hint:l5}],outputs:[{id:"4",type:this.angleType,hidden:!1,showLabel:!0,label:"",parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"},{type:"reference-input",id:"3"}]}]}}};var Tf=class extends Md{constructor(r){super(r);this.model=r;this.displayName="graphing-calculator-text-geometry-tool-directedangle-display-name",this.toolName="directedangle",this.angleType="directedangle",this.anglesType="directedangles",this.icon=[{type:"stroked-path",path:[40,30,30,70,70,70],color:"#CCC"},{type:"angle",x:30,y:70,radius:20,isDirected:!0,startAngle:-1.325817,deltaAngle:1.325817},{type:"stroked-path",path:[35,50,41,50,37,55,35,50],color:"#000",lineWidth:"medium"},{type:"point",x:30,y:70},{type:"point",x:40,y:30},{type:"point",x:70,y:70}]}};var gs=class extends ti{generateDefaultName(){return"does not matter"}};var Gf=class extends gs{constructor(r){super(r);this.model=r;this.displayName="graphing-calculator-text-geometry-tool-reflection-display-name",this.toolName="reflection",this.toolType="transformation",this.icon=[{type:"stroked-path",color:"light",path:[40,15,40,65]},{type:"stroked-path",color:"#000",lineWidth:"small",arrow:!0,path:[24,38,26,35,27,33,29,31,31,30,33,28,35,27,37,25,39,24,41,23,43,22,44,21,47,20,47.1,19.95]},{type:"point",x:20,y:40},{type:"point",x:60,y:40}]}getSpec(){return{inputs:[{type:"straight",id:"1",hint:"graphing-calculator-text-geometry-tool-reflection-hint-choose-line"}],outputs:[{id:"2",type:"reflection",hidden:!1,name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"}]}]}}};var Af=class extends gs{constructor(r){super(r);this.model=r;this.displayName="graphing-calculator-text-geometry-tool-translation-display-name",this.toolName="translation",this.toolType="transformation",this.icon=[{type:"stroked-path",color:"#000",lineWidth:"small",arrow:!0,path:[22,58,52,32]},{type:"point",x:22,y:58},{type:"point",x:60,y:24}]}getSpec(){return{inputs:[{type:"point",id:"1",hint:"graphing-calculator-text-geometry-tool-translation-hint-from"},{type:"point",id:"2",hint:"graphing-calculator-text-geometry-tool-translation-hint-to"}],outputs:[{id:"3",type:"translation",hidden:!1,name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};var Vf=class extends gs{constructor(r){super(r);this.model=r;this.displayName="graphing-calculator-text-geometry-tool-rotation-display-name",this.toolName="rotation",this.toolType="transformation",this.icon=[{type:"stroked-path",color:"#000",lineWidth:"small",arrow:!0,path:[60,58,60,50,59,47,58,44,57,42,56,40,55,38,53,36,52,34,50,32,49,31]},{type:"point",x:22,y:58,hollow:!0},{type:"point",x:42,y:22},{type:"point",x:60,y:58}]}getSpec(){return{inputs:[{type:"point",id:"1",hint:"graphing-calculator-text-geometry-tool-rotation-hint-center"},{type:"number",id:"2",hint:"graphing-calculator-text-geometry-tool-rotation-hint-angle"}],outputs:[{id:"3",type:"rotation",hidden:!1,name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};var Lf=class extends gs{constructor(r){super(r);this.model=r;this.displayName="graphing-calculator-text-geometry-tool-dilation-display-name",this.toolName="dilation",this.toolType="transformation",this.icon=[{type:"stroked-path",color:"#000",lineWidth:"small",arrow:!0,path:[37,46,51,32.5]},{type:"point",x:22,y:58,hollow:!0},{type:"point",x:60,y:24,size:"large"},{type:"point",x:37,y:46}]}getSpec(){return{inputs:[{type:"point",id:"1",hint:"graphing-calculator-text-geometry-tool-dilation-hint-center"},{type:"number",id:"2",hint:"graphing-calculator-text-geometry-tool-dilation-hint-scale-factor"}],outputs:[{id:"3",type:"dilation",hidden:!1,name:this.generateDefaultName(),parents:[{type:"reference-input",id:"1"},{type:"reference-input",id:"2"}]}]}}};var Pf=class{constructor(e){this.model=e;this.displayName="graphing-calculator-text-geometry-tool-box-selection-display-name";this.toolType="selection";this.icon=[{type:"stroked-path",color:"#aaa",path:[35,35,51,35,51,51,35,51,35,35]},{type:"filled-polygon",color:"#000",path:[50,50,63.5,62,58.25,62.75,62,72.5,59.75,74,55.25,64.25,50.75,68,50,50]}]}getNumberInputLatex(){return""}clearTentativeOutputs(){}canNextInputBePoint(){return!1}getNecessaryComplexObject(){}getNonPointInputType(){}getHint(){return""}getComplexInputs(){return{point:0,straight:0,segment:0,circle:0,arc:0,polygon:0,image:0,angle:0,number:0}}onButton(){this.model.setToolMode("box-selection")}onNumberInput(e){}onPress(e){}onRelease(e){return this.tryCommitResults()}onMove(e){}tryCommitResults(){return{committed:void 0}}};var kD={selection:yf,point:bf,line:xf,segment:wf,ray:vf,circle:Cf,arc:Sf,parallel:Ef,perpendicular:Df,midpoint:kf,polygon:If,compass:Mf,angle:Md,directedangle:Tf,reflection:Gf,translation:Af,rotation:Vf,dilation:Lf,"box-selection":Pf};function c5(t,e){var a;if(e.typedRuntimeValue.valueType===__dcg_shared_module_exports__['oa'])return[];let r=e.data.call;if(!r||!r.parents)return[];let i=r.symbol,n=r.parents.map(Gp),o;switch(i){case"circle":{let[s,l]=n,c=l&&((a=t[l])==null?void 0:a.typedRuntimeValue.valueType);c&&__dcg_shared_module_exports__['va'](c,__dcg_shared_module_exports__['aa'])?o=[s]:o=[s,l];break}case"apply":{o=[n[1]];break}case"parallel":case"perpendicular":{o=[n[1]];break}case"polygon":{o=n.every(s=>s!==void 0)?n:[];break}default:o=n}return o.filter(KL)}var d5=[[1,0],[0,0],!1],Lw=class{constructor(e,r){let i=(e==null?void 0:e.list)||[];r&&(i=i.concat(r)),this.list=i;let n=(e==null?void 0:e.forward)||d5;r&&(n=__dcg_shared_module_exports__['Fb'](n,r.value)),this.forward=n,this.inverse=__dcg_shared_module_exports__['Gb'](n)}add(e){return new Lw(this,e)}equals(e){if(this.list.length!==e.list.length)return!1;for(let r=this.list.length-1;r>=0;r--){let i=this.list[r],n=e.list[r];if(!__dcg_shared_module_exports__['E'](i,n))return!1}return!0}isCompletelyRigid(){return this.list.length===0}},Of=Lw;Of.COMPLETELY_RIGID=new Lw(void 0);function u5(t){var i,n;let e={},r={};for(let o in t){let a=t[o];if(!a)continue;for(let l of((i=a.data.call)==null?void 0:i.parents)||[]){let c=Gp(l);c&&(e[c]||(e[c]=[]),(n=e[c])==null||n.push(a.assignment))}let s=c5(t,a);r[a.assignment]=s}return{parentToChildren:e,childToReversibilityParents:r}}function BL(t){let e=[],r={},i,n=1,o=2;function a(s){var l;r[s]!==o&&(r[s]=n,(l=t[s])==null||l.forEach(a),r[s]=o,e.unshift(s))}for(let s in t)r[s]===i&&a(s);return e}function ID(t,e){var h,p,g,y,w,b,D,I,E,G;let r={},i={},n={},o={},a={};for(let T of e)a[T]=!0,n[T]=Of.COMPLETELY_RIGID;let{parentToChildren:s,childToReversibilityParents:l}=u5(t);for(let T of BL(l)){let P=t[T];if(!P)return{};let _=(h=P.data.call)==null?void 0:h.symbol,x=(((p=P.data.call)==null?void 0:p.parents)||[]).map(Gp).filter(KL);if(n[P.assignment])if(P.typedRuntimeValue.valueType===__dcg_shared_module_exports__['S']&&!_)r[P.assignment]=n[P.assignment];else if(_==="glider"&&x.length&&!a[x[0]])i[P.assignment]=n[P.assignment];else{let L=n[P.assignment];if(_==="apply"){let q=(g=t[x[0]])==null?void 0:g.typedRuntimeValue;if((q==null?void 0:q.valueType)!==__dcg_shared_module_exports__['oa'])return{};L=L.add(q)}let R=(y=l[P.assignment])!=null?y:[];for(let q of R)n[q]?L.equals(n[q])||(n[q]=Of.COMPLETELY_RIGID,o[q]=!0):n[q]=L}}let c={};for(let T in n)c[T]=!0;for(let T of BL(s))if(c[T]){for(let P of s[T]||[])c[P]=!0;if(n[T]){let P=l[T]||[];for(let _ of P)o[_]&&(o[T]=!0)}}for(let T in i){let _=(((b=(w=t[T])==null?void 0:w.data.call)==null?void 0:b.parents)||[]).map(Gp)[0];_&&c[_]&&(o[_]=!0)}for(let T in t){if(!c[T])continue;let P=t[T],_=(D=P==null?void 0:P.data.call)==null?void 0:D.symbol,x=(((I=P==null?void 0:P.data.call)==null?void 0:I.parents)||[]).map(Gp);if(_==="apply"&&n[T]){let L=x[1],R=x[0];if(!L||!R)return{};let q=(((G=(E=t[R])==null?void 0:E.data.call)==null?void 0:G.parents)||[]).map(Gp),K=q.some(N=>N&&c[N]);if(n[T].isCompletelyRigid()&&n[L].isCompletelyRigid()||K){o[L]=!0;for(let N of q)N&&(o[N]=!0)}}}let u=[];for(let T in o)a[T]||u.push(T);return u.length?ID(t,e.concat(u)):__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},r),i)}function Gp(t){return t?__dcg_shared_module_exports__['Ta'](t[0]):void 0}function KL(t){return t!==void 0}var _f=class{constructor(){this._nextId=0;this._defs={}}clear(){this._nextId=0,this._defs={}}add(e,r){let i;r?(i=e.assignment,e.listIndex!==void 0&&(i+="\\left["+e.listIndex+"\\right]")):i="**geo-internal-id-"+this._nextId++,this._defs[i]=e}computeReversibilityLineages(e){var s;let r=this.buildAssignmentMap(),i={};for(let l in r){let c=r[l];c&&(i[c.calcId]=c)}let n=[];for(let l of e){let c=i[l];if(!c)return{};n.push(c.assignment)}let o=ID(this.buildAssignmentMap(),n),a={};for(let l in o){let c=(s=r[l])==null?void 0:s.calcId;c&&(a[c]=o[l])}return a}buildAssignmentMap(){let e={};for(let r in this._defs){let i=this._defs[r];i&&(e[i.assignment]=i)}return e}getDepthValues(){var c,u;var e={},r={};let i=this.buildAssignmentMap();for(let h in i){let p=i[h];if(!p)continue;let g=[],y=[];(c=p.data.call)!=null&&c.parents?y=(u=p.data.call)==null?void 0:u.parents:p.data.assignmentRhsReference&&(y=[p.data.assignmentRhsReference]),y.forEach(w=>{let b=w&&w[0];if(b){let D=__dcg_shared_module_exports__['Ta'](b);g.push(D),r[D]||(r[D]=[]),r[D].push(p.assignment)}}),e[p.assignment]=g}let n=h=>{if(o[h]!==void 0)return o[h];var p=-1,g=e[h]||[];for(let w=0;w<g.length;w++){let b=n(g[w]);b>p&&(p=b)}let y=p+1;return o[h]=y,y};var o={};for(var a in e)o[a]=n(a);var s={},l={};for(var a in r){let p=o[a],g=1/0;r[a].forEach(y=>{let w=o[y];w>p&&(p=w),w<g&&(g=w)}),s[a]=p,l[a]=g}return{createdDepth:o,lastReferencedDepth:s,firstReferencedDepth:l}}};function UL(t,e,r){let n=.5/(2*r*e);return mi(t-n,t+n)}function Ff(t,e,r,i,n=0){let o=__dcg_shared_module_exports__['Ca'](t.x,t.y,0,r[0],r[1],0,i[0],i[1],0);n&&(o+=n);let s=.5/(__dcg_shared_module_exports__['lb'](r,i)*e);return mi(o-s,o+s)}function fs(t,e){for(let r of e)r&&(r.min!==void 0&&t<r.min?t=r.min:r.max!==void 0&&t>r.max&&(t=r.max));return t}function Pw(t,e,r,i){if(!r)return 0;var n=t.mapx(1)-t.mapx(0);switch(r.valueType){case __dcg_shared_module_exports__['ca']:{let a=e.x-r.value[0][0],s=e.y-r.value[0][1],l=Math.atan2(s,a)/(2*Math.PI);l<0&&(l+=1),l=UL(l,n,r.value[1]);let c=fs(0,[i]),u=fs(1,[i]);if(l>=c&&l<=u)return l;{let h=__dcg_shared_module_exports__['rb'](r.value,c),p=__dcg_shared_module_exports__['rb'](r.value,u),g=__dcg_shared_module_exports__['lb'](h,[e.x,e.y]),y=__dcg_shared_module_exports__['lb'](p,[e.x,e.y]);return g<=y?c:u}}case __dcg_shared_module_exports__['ea']:{let a=__dcg_shared_module_exports__['ub'](r.value);if(!a)return 0;if(a.type==="segment"){let s=Ff(e,n,a.start,a.end);return fs(s,[{min:0,max:1},i])}else if(a.type==="rays"){let s=__dcg_shared_module_exports__['lb'](a.start1,[e.x,e.y]),l=__dcg_shared_module_exports__['lb'](a.start2,[e.x,e.y]),c=!i||i.min===void 0?-1/0:i.min,u=!i||i.max===void 0?1/0:i.max;return s<l?c>0?u>=1?1:c:fs(-Ff(e,n,a.start1,a.end1),[{min:void 0,max:0},i]):u<1?c<=0?0:u:fs(Ff(e,n,a.start2,a.end2,1),[{min:1,max:void 0},i])}else if(a.type=="arc"){let[s,l]=a.center,{radius:c,startAngle:u}=a,h=__dcg_shared_module_exports__['nb'](r.value),p=e.x-s,g=e.y-l,y=__dcg_shared_module_exports__['ya'](Math.atan2(g,p),u,h);if(y>=0&&y<=1)y=UL(y,n,c);else{let D=ow(e,{x:s+c*Math.cos(u),y:l+c*Math.sin(u)}),I=ow(e,{x:s+c*Math.cos(u+h),y:l+c*Math.sin(u+h)});D<=I?y=0:y=1}let w=fs(0,[i]),b=fs(1,[i]);if(y>=w&&y<=b)return y;{let D=__dcg_shared_module_exports__['sb'](r.value,w),I=__dcg_shared_module_exports__['sb'](r.value,b),E=__dcg_shared_module_exports__['lb'](D,[e.x,e.y]),G=__dcg_shared_module_exports__['lb'](I,[e.x,e.y]);return E<=G?w:b}}return fs(0,[i])}case __dcg_shared_module_exports__['ia']:case __dcg_shared_module_exports__['aa']:case __dcg_shared_module_exports__['ga']:{let a=Ff(e,n,r.value[0],r.value[1]);return fs(a,[{min:r.valueType===__dcg_shared_module_exports__['ga']?void 0:0,max:r.valueType!==__dcg_shared_module_exports__['aa']?void 0:1},i])}case __dcg_shared_module_exports__['_']:{let a=r.value,s=1/0,l=fs(0,[i]),c=i&&i.min!==void 0?i.min:-1/0,u=i&&i.max!==void 0?i.max:1/0,h=Math.floor(Math.max(c,0)),p=Math.ceil(Math.min(u,a.length));for(let g=h;g<p;g++){let y=a[g],w=a[(g+1)%a.length],b=fs(Ff(e,n,y,w,g),[{min:g,max:g+1},i]),D=__dcg_shared_module_exports__['tb'](r.value,b),I=__dcg_shared_module_exports__['lb'](D,[e.x,e.y]);I<s&&(s=I,l=b)}return l}case __dcg_shared_module_exports__['S']:case __dcg_shared_module_exports__['ka']:case __dcg_shared_module_exports__['ma']:case __dcg_shared_module_exports__['oa']:return 0;default:return r}}function qL(t,e){switch(t.valueType){case __dcg_shared_module_exports__['ca']:return __dcg_shared_module_exports__['rb'](t.value,e);case __dcg_shared_module_exports__['ea']:return __dcg_shared_module_exports__['sb'](t.value,e);case __dcg_shared_module_exports__['ia']:return __dcg_shared_module_exports__['qb'](t.value,e);case __dcg_shared_module_exports__['aa']:return __dcg_shared_module_exports__['pb'](t.value,e);case __dcg_shared_module_exports__['ga']:return __dcg_shared_module_exports__['ob'](t.value,e);case __dcg_shared_module_exports__['_']:return __dcg_shared_module_exports__['tb'](t.value,e);case __dcg_shared_module_exports__['S']:case __dcg_shared_module_exports__['ka']:case __dcg_shared_module_exports__['ma']:case __dcg_shared_module_exports__['oa']:return[NaN,NaN];default:return t}}function p5(t,e){if(!e)return!1;let{left:r,right:i,top:n,bottom:o}=t.pixelCoordinates,{x:a,y:s}=e.mathPoint;if(e.transform){let l=e.model.formula.typed_constant_value;if((l==null?void 0:l.valueType)!==__dcg_shared_module_exports__['S'])throw new Error(`Expected movable point to be a Point but found ${l?__dcg_shared_module_exports__['qa'](l.valueType):void 0} instead`);a=a!=null?a:l.value[0],s=s!=null?s:l.value[1],[a,s]=__dcg_shared_module_exports__['Hb'](e.transform.forward,[a,s])}if(a!==void 0){let l=t.mathToPixels.mapX(a);if(l<r-.5||l>i+.5)return!1}if(s!==void 0){let l=t.mathToPixels.mapY(s);if(l<n-.5||l>o+.5)return!1}return!0}function HL(t,e){if(e.length===1&&!p5(t,e[0]))return!1;let r=!1;for(let i of e){if(i.newPointLatex){let n=i.model.latex;ca(i.model,i.newPointLatex),r=r||n!==i.model.latex}for(let n in i.sliderUpdates){let{value:o,model:a}=i.sliderUpdates[n];i.commitSliderSoftLimits&&Qu(a);let s=a.latex;rx(a,o),r=r||s!==a.latex}}return r}function $L({projection:t,transform:e,controller:r,strategy:i,mode:n,clampToViewport:o}){var G;let a=r.getItemModel(i.id);if(!a||a.type!=="expression")throw new Error(`Programming error: updateSliderNonlinear move strategy should point to an expression item, but found ${a==null?void 0:a.type}`);let s=n==="up"||n==="bigup",l=((G=a.slider)==null?void 0:G.step)!==""&&(s&&!a.slider.hardMax||!s&&!a.slider.hardMin);i.compiled.fn||__dcg_shared_module_exports__['Kb'](i.compiled);let c=i.compiled.fn;e&&(c=T=>__dcg_shared_module_exports__['Hb'](e.forward,i.compiled.fn(T)));let u=T=>{let[P,_]=c(T);return{x:P,y:_}=t.mathToPixels.mapPoint({x:P,y:_}),[P,_]},h=ua(a),[p,g]=u(h),y=QS(a,n,{ignoreSoftLimits:l}),w=y,[b,D]=u(w),I=__dcg_shared_module_exports__['Aa'](b-p,D-g);if(I<1){let T=__dcg_shared_module_exports__['gb'](u,[p+(b-p)/I,g+(D-g)/I],w,w>h?w:i.min,w<h?w:i.max,1);if(T){let P=mi(T[0],T[1]);(n==="bigup"||n==="bigdown")&&(P=h+(P-h)*5);let _=Ta(a,__dcg_shared_module_exports__['fb'](P,i.min,i.max),{ignoreSoftLimits:l}),[x,L]=u(_);__dcg_shared_module_exports__['Aa'](x-p,L-g)>I&&(y=_)}}o&&(y=WL(t,ua(a),y,c));let E=c(y);return{mathPoint:{x:E[0],y:E[1]},sliderUpdates:{[i.id]:{model:a,value:y}}}}function zL({controller:t,projection:e,transform:r,strategy:i,targetScreenPoint:n,clampToViewport:o}){let a={mathPoint:{},sliderUpdates:{}},s=t.getItemModel(i.id);if(!s||s.type!=="expression")throw new Error(`Programming error: updateSliderNonlinear move strategy should point to an expression item, but found ${s==null?void 0:s.type}`);i.compiled.fn||__dcg_shared_module_exports__['Kb'](i.compiled);let l=i.compiled.fn;r&&(l=E=>__dcg_shared_module_exports__['Hb'](r.forward,i.compiled.fn(E)));let c=E=>{let[G,T]=l(E);return{x:G,y:T}=e.mathToPixels.mapPoint({x:G,y:T}),[G,T]},u=i.initialValue,h=i.min,p=i.max,g=[n.x,n.y],y=__dcg_shared_module_exports__['gb'](c,g,u,h,p,1);if(!y)return a;let w=mi(y[0],y[1]);h!==void 0&&w<h&&(w=h),p!==void 0&&w>p&&(w=p);let b=Ta(s,w,{ignoreSoftLimits:!0});o&&(b=WL(e,ua(s),b,l));let[D,I]=l(b);return a.mathPoint.x=D,a.mathPoint.y=I,a.sliderUpdates[s.id]={value:b,model:s},a}function TD({controller:t,projection:e,transform:r,strategy:i,targetScreenPoint:n}){let o=e.reverse_map_pt(n);if(r){let u=__dcg_shared_module_exports__['Hb'](r.inverse,[o.x,o.y]);o={x:u[0],y:u[1]}}let a=i.type==="updateSliderForGlider"?{min:i.min,max:i.max}:void 0,s=Pw(e,o,i.movesOn,a);if(!isFinite(s))return;let l=qL(i.movesOn,s),c={mathPoint:{x:l[0],y:l[1]},newPointLatex:void 0,sliderUpdates:{}};if(i.type==="updateGliderParameter"){let u=i.span;c.newPointLatex=u.input.slice(0,u.start)+__dcg_shared_module_exports__['Xb'](s)+u.input.slice(u.end)}else if(i.type==="updateSliderForGlider"){let u=t.getItemModel(i.id);u&&u.type==="expression"&&(c.sliderUpdates[u.id]={value:s,model:u})}return c}function WL(t,e,r,i){let n=u=>{let[h,p]=i(u);return t.mathToPixels.mapPoint({x:h,y:p})},o=({x:u,y:h})=>{let{left:p,right:g,top:y,bottom:w}=t.pixelCoordinates;return u>=p&&u<=g&&h>=y&&h<=w},a=e,s=n(e),l=r,c=n(r);if(o(c)||!o(s))return r;for(;;){let u=s.x-c.x,h=s.y-c.y;if(u*u+h*h<.5)break;let p=__dcg_shared_module_exports__['eb'](a,l);if(p===a||p===l){[a,l]=o(s)?[a,a]:[l,l];break}let g=n(p);o(g)!==o(s)?[l,c]=[p,g]:[a,s]=[p,g]}return mi(a,l)}function GD({controller:t,projection:e,transform:r,formula:i,moveStrategy:n,dragMode:o,targetScreenPoint:a,clampToViewport:s}){if(r){let{x:g,y}=e.pixelsToMath.mapPoint(a),[w,b]=__dcg_shared_module_exports__['Hb'](r.inverse,[g,y]);a=e.mathToPixels.mapPoint({x:w,y:b})}var l=e.pixelsToMath.mapRect({left:a.x-.5,right:a.x+.5,top:a.y+.5,bottom:a.y-.5}),c=[{min:l.left,max:l.right},{min:l.top,max:l.bottom}];let u={mathPoint:{},sliderUpdates:{}},[h,p]=n;if(h.type==="updateCoordinate"||p.type==="updateCoordinate"){let g=h5(i,c,o);if(g){let{latex:y,x:w,y:b}=g;(w!==void 0||b!==void 0)&&(u.newPointLatex=y,u.mathPoint.x=w!=null?w:u.mathPoint.x,u.mathPoint.y=b!=null?b:u.mathPoint.y)}}for(let g of[0,1]){let y=n[g];if(MD(g,o)&&y.type==="updateSlider"){let w=t.getItemModel(y.id);if(!w||w.type!=="expression")continue;let[b,D]=y.coefficients,I=mi(D*c[g].min+b,D*c[g].max+b),E=Ta(w,I,{ignoreSoftLimits:!0}),G=(E-b)/D;if(!s||r){u.mathPoint[g===0?"x":"y"]=G,u.sliderUpdates[w.id]={value:E,model:w};continue}let[T,P]=g===0?[e.mathCoordinates.left,e.mathCoordinates.right]:[e.mathCoordinates.bottom,e.mathCoordinates.top],_=G<T?T:G>P?P:void 0;_!==void 0&&Ga(w)===void 0?(u.mathPoint[g===0?"x":"y"]=_,u.sliderUpdates[w.id]={value:D*_+b,model:w}):(u.mathPoint[g===0?"x":"y"]=G,u.sliderUpdates[w.id]={value:E,model:w})}}return u}function h5(t,e,r){if(!t.move_strategy)throw new Error("Programming error: expected move_strategy to be defined.");var i=mi(e[0].min,e[0].max),n=mi(e[1].min,e[1].max);let[o,a]=t.move_strategy,s=!1,l=!1,c,u="",h=0;if(o.type==="updateCoordinate"&&MD(0,r)&&(c=o.inputSpan.input,s=!0,u+=c.slice(h,o.inputSpan.start),u+=__dcg_shared_module_exports__['Xb'](i),h=o.inputSpan.end),a.type==="updateCoordinate"&&MD(1,r)&&(c=a.inputSpan.input,l=!0,u+=c.slice(h,a.inputSpan.start),u+=__dcg_shared_module_exports__['Xb'](n),h=a.inputSpan.end),c!==void 0)return u+=c.slice(h),{latex:u,x:s?i:void 0,y:l?n:void 0}}function MD(t,e){switch(e){case"X":return t===0;case"Y":return t===1;case"XY":return!0;default:return!1}}function jL(t,e,r){r.forEach(i=>{g5(t,e,i)})}function YL(t,e,r,i,n,o,a){var s=!1,l=e.length===1;let c=[];for(let h=0;h<e.length;h++){let p=e[h];if(p.tableInfo){m5(t,p,i[h],n),s=!0;continue}var u=t.getItemModel(p.sketch.id);if(u){if(u.type==="image")s=s||x5(t,u,p,i[h],n);else if(u.type==="expression"){let g=w5({controller:t,movedExpr:u,currentScreenPoint:r[h],targetScreenPoint:i[h],projection:n,transform:o&&o[h],isOnlyPoint:l,keyboardDirection:a});g&&c.push(g)}}}return s=s||HL(n,c),s}function JL(t,e){e.forEach(r=>{f5(t,r)})}function g5(t,e,r){if(r.tableInfo){Dr(e,void 0);let s=t.getItemModel(r.tableInfo.tableId);if(!s||s.type!=="table")return;IS(s,!0)}else{let s=t.getItemModel(r.sketch.id);if(!s||!(s.type==="expression"||s.type==="image")||!s.formula||!s.formula.move_strategy)return;for(var i=s.formula.move_strategy,n=0;n<i.length;n++){let l=i[n];if(i[n].type==="updateCoordinate"||i[n].type==="updateGliderParameter")s.type==="image"?PS(s,!0):s.type==="expression"&&eE(s,!0);else if(l.type==="updateSlider"||l.type==="updateSliderNonlinear"||l.type==="updateSliderForGlider"){var o=t.getItemModel(l.id);if(!o||o.type!=="expression")continue;var a;if(s.type==="expression"?a=s.reconciledDragMode:a=void 0,a==="NONE"||n===0&&a==="Y"||n===1&&a==="X")continue;Lg(o,!0)}}}}function f5(t,e){for(let r of t.getAllItemModels())r.type==="table"?r.draggingOnGraphpaper&&IS(r,!1):r.type==="expression"?(r.sliderDragging&&Lg(r,!1),r.draggingOnGraphpaper&&eE(r,!1)):r.type==="image"&&r.draggingOnGraphpaper&&PS(r,!1)}function m5(t,e,r,i){var n=e.tableInfo.tableId,o=e.tableInfo.rowIndex,a=e.tableInfo.columnId,s=e.tableInfo.dragX,l=e.tableInfo.dragY,c=t.getItemModel(n);if(!(!c||c.type!=="table")){var u=kn(c,a);if(u){var h=i.closestPointOnScreen(r),p=i.pixelsToMath.mapRect(XL(h,.5)),g={x:__dcg_shared_module_exports__['Xb'](mi(p.left,p.right)),y:__dcg_shared_module_exports__['Xb'](mi(p.top,p.bottom))};if(s&&Dl(c,{row:o+1,column:0},g.x),l){let y=u.index;Dl(c,{row:o+1,column:y},g.y)}}}}function XL(t,e){return{left:t.x-e,right:t.x+e,top:t.y+e,bottom:t.y-e}}function y5(t,e,r){if(r[0]===0&&r[1]===0)return{x:e.x,y:e.y,width:t.width,height:t.height};let i=Math.cos(t.radianAngle),n=Math.sin(t.radianAngle),o=e.x-t.x,a=e.y-t.y;if(r[0]===0)return{x:t.x,y:t.y,width:t.width,height:2*r[1]*(i*a+n*o)};if(r[1]===0)return{x:t.x,y:t.y,width:2*r[0]*(i*o-n*a),height:t.height};var s=2*(t.width*r[0]*(i*o-n*a)+t.height*r[1]*(n*o+i*a))/(t.width*t.width+t.height*t.height);return{x:t.x,y:t.y,width:s*t.width,height:s*t.height}}function b5(t,e,r){let i=[{x:e.left,y:e.bottom},{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.right,y:e.bottom}],n=["x","y","width","height"],o={x:1/0,y:1/0,width:1/0,height:1/0},a={x:-1/0,y:-1/0,width:-1/0,height:-1/0};for(let s of i){let l=y5(t,s,r);for(let c of n)o[c]=Math.min(o[c],l[c]),a[c]=Math.max(a[c],l[c])}return{min:o,max:a}}function Rf(t){return t===void 0?NaN:t[0]}function x5(t,e,r,i,n){var $;var o=e.formula;if(!o||(($=o.move_strategy)==null?void 0:$.length)!==4)return!1;var a=o.dimensions,s={x:Rf(a.x),y:Rf(a.y),width:Rf(a.width),height:Rf(a.height),radianAngle:Rf(a.radianAngle)},l=r.scaleFactor||[0,0],c=l[0]!==0&&l[1]!==0,u=n.closestPointOnScreen(i),h=n.pixelsToMath.mapRect(XL(u,c?.05:.5)),p=b5(s,h,l),g=n.mathToPixels.mapRect({left:s.x-.5*s.width,right:s.x+.5*s.width,top:s.y-.5*s.height,bottom:s.y+.5*s.height}),y=Math.abs(g.right-g.left),w=Math.abs(g.bottom-g.top),b=n.mathToPixels.mapRect({left:p.min.x-.5*p.min.width,right:p.min.x+.5*p.min.width,top:p.min.y-.5*p.min.height,bottom:p.min.y+.5*p.min.height}),D=Math.abs(b.right-b.left),I=Math.abs(b.bottom-b.top);if(D<y&&D<1||I<w&&I<1)return!1;var E=["width","height","x","y"];let G=!1;for(var T=0;T<E.length;T++){var P=E[T],_=o.move_strategy[T];switch(_.type){case"updateCoordinate":var x=mi(p.min[P],p.max[P]),L=_.inputSpan.input,R=__dcg_shared_module_exports__['Xb'](x);switch(P){case"width":case"height":Ho(e,P,R);break;case"x":if(o.move_strategy[3].type==="updateCoordinate"){let ue=o.move_strategy[3],te=mi(p.min.y,p.max.y),Ae=__dcg_shared_module_exports__['Xb'](te),Se=L.slice(0,_.inputSpan.start)+R+L.slice(_.inputSpan.end,ue.inputSpan.start)+Ae+L.slice(ue.inputSpan.end);Ho(e,"center",Se)}else{let ue=L.slice(0,_.inputSpan.start)+R+L.slice(_.inputSpan.end);Ho(e,"center",ue)}break;case"y":if(o.move_strategy[2].type!=="updateCoordinate"){let ue=L.slice(0,_.inputSpan.start)+R+L.slice(_.inputSpan.end);Ho(e,"center",ue)}break;default:return P}G=!0;break;case"updateSlider":var q=t.getItemModel(_.id);if(!q||q.type!=="expression")continue;var K=_.coefficients[0],Y=_.coefficients[1],N=Y*p.min[P]+K,j=Y*p.max[P]+K,B=mi(N,j),A=q.latex;rx(q,B),q.latex!==A&&(G=!0);break}}return G}function w5({controller:t,movedExpr:e,currentScreenPoint:r,targetScreenPoint:i,projection:n,transform:o,isOnlyPoint:a,keyboardDirection:s}){var y,w;let l=e.formula;if(!l||((y=l.move_strategy)==null?void 0:y.length)!==2)return;let c=e.reconciledDragMode||"NONE",[u,h]=l.move_strategy;if(a&&u.type==="updateCoordinate"&&h.type==="updateCoordinate"){let b=n.reverse_map_pt(i),D=AD(n,b);D&&(i=n.map_pt(D))}let p=a?n.closestPointOnScreen(i):i;if(!s){let b;switch(u.type){case"updateSliderNonlinear":b=zL({controller:t,projection:n,transform:o,strategy:u,targetScreenPoint:p,clampToViewport:a});break;case"updateGliderParameter":case"updateSliderForGlider":b=TD({controller:t,projection:n,transform:o,strategy:u,targetScreenPoint:p});break;default:b=GD({controller:t,projection:n,transform:o,formula:l,moveStrategy:l.move_strategy,dragMode:c,targetScreenPoint:p,clampToViewport:a})}return b&&__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},b),{commitSliderSoftLimits:!1,transform:o,model:e})}let g;if(u.type==="updateSliderNonlinear"){if(!(s!=null&&s.x))return;g=$L({projection:n,transform:o,controller:t,strategy:u,mode:s.x,clampToViewport:a})}else if(u.type==="updateGliderParameter"||u.type==="updateSliderForGlider")g=TD({controller:t,projection:n,transform:o,strategy:u,targetScreenPoint:p});else{let b=s.x?0:1,D=s.x?p.x-r.x:p.y-r.y,I=l.move_strategy[b];if(I.type==="updateSlider"){let E=t.getItemModel(I.id);if((E==null?void 0:E.type)!=="expression")throw new Error(`Programming error: updateSlider move strategy should point to an expression item, but found ${E==null?void 0:E.type}`);let G=Ga(E);if(G){let T=n.mathToPixels.mapPoint({x:0,y:0}),P=I.coefficients[1],_=Math.abs(b===0?n.mathToPixels.mapX(G/P)-T.x:n.mathToPixels.mapY(G/P)-T.y),x=Math.ceil(1/_);D=_*x*(D>0?1:-1);let L=(w=s.x)!=null?w:s.y;(L==="bigup"||L==="bigdown")&&(D*=5)}}g=GD({controller:t,projection:n,transform:o,formula:l,moveStrategy:l.move_strategy,dragMode:c,targetScreenPoint:{x:r.x+(b===0?D:0),y:r.y+(b===1?D:0)},clampToViewport:a})}return g&&__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},g),{commitSliderSoftLimits:!0,transform:o,model:e})}function AD(t,e){if(!t.settings.showGrid)return;let r=Cd(t),i=r.minorStepX,n=r.minorStepY,o=t.map_pt(e),a=Math.round(e.x/i)*i,s=Math.round(e.y/n)*n,l=5,c={x:a,y:s},u=t.map_pt(c);if(__dcg_shared_module_exports__['Aa'](u.x-o.x,u.y-o.y)<=l)return c}function eP(t,e){let r={i:0,x:NaN,y:NaN},i={i:1,x:NaN,y:NaN};if(!t||!e)return[r,i];let n=QL(t.typedRuntimeValue),o=QL(e.typedRuntimeValue);if(!n||!o)return[r,i];let a=ZL(n,o);return r.x=a[0],r.y=a[1],a=ZL(o,n),i.x=a[0],i.y=a[1],[r,i]}function QL(t){switch(t.valueType){case __dcg_shared_module_exports__['aa']:case __dcg_shared_module_exports__['ga']:case __dcg_shared_module_exports__['ia']:return{type:"straight",def:t.value};case __dcg_shared_module_exports__['ca']:return{type:"circle",def:t.value};case __dcg_shared_module_exports__['ea']:return{type:"arc",def:t.value}}}function ZL(t,e){switch(t.type){case"straight":switch(e.type){case"straight":return __dcg_shared_module_exports__['yb'](t.def,e.def);case"circle":return __dcg_shared_module_exports__['wb'](t.def,e.def);case"arc":return __dcg_shared_module_exports__['Ab'](t.def,e.def)}case"circle":switch(e.type){case"straight":return __dcg_shared_module_exports__['xb'](t.def,e.def);case"circle":return __dcg_shared_module_exports__['vb'](t.def,e.def);case"arc":return __dcg_shared_module_exports__['zb'](t.def,e.def)}case"arc":switch(e.type){case"straight":return __dcg_shared_module_exports__['Cb'](t.def,e.def);case"circle":return __dcg_shared_module_exports__['Bb'](t.def,e.def);case"arc":return __dcg_shared_module_exports__['Db'](t.def,e.def)}}return[NaN,NaN]}var tP=[{key:"compass",objects:"Segment + Point"},{key:"midpoint",objects:"Segment"},{key:"parallel",objects:"Line + Point"},{key:"perpendicular",objects:"Line + Point"},{key:"image",objects:"2 Points"}];function ms(t){return __dcg_shared_module_exports__['D'](t)}function ys(t){this.setState(t)}ys.prototype.setState=function(t){this.state=t};ys.prototype.getState=function(){return this.state};ys.prototype.set=function(t,e){if(arguments.length===1){this.state=t;return}else if(typeof t=="string"){this.state=ms(this.state),this.state[t]=e;return}var r=t.length-2,i=t[r+1],n;this.state=n=ms(this.state);for(var o=0;o<=r;o++){var a=t[o];n=n[a]=ms(n[a])}n[i]=e};ys.prototype.deepMutate=function(t,e){if(arguments.length===1){e=t,this.state=__dcg_shared_module_exports__['M'](this.state),e(this.state);return}else if(typeof t=="string"){this.state=ms(this.state),this.state[t]=__dcg_shared_module_exports__['M'](this.state[t]),e(this.state[t]);return}for(var r=t.length-2,i=t[r+1],n=this.state=ms(this.state),o=0;o<=r;o++){var a=t[o];n=n[a]=ms(n[a])}n=n[i]=__dcg_shared_module_exports__['M'](n[i]),e(n)};ys.prototype.shallowMutate=function(t,e){if(arguments.length===1){e=t,this.state=ms(this.state),e(this.state);return}else if(typeof t=="string"){this.state=ms(this.state),this.state[t]=ms(this.state[t]),e(this.state[t]);return}for(var r=t.length-1,i=this.state=ms(this.state),n=0;n<=r;n++){var o=t[n];i=i[o]=ms(i[o])}e(i)};ys.areShallowEqual=function(t,e){};ys.areDeepEqual=function(t,e){};function Nf(t){return t?!!(v5(t)||t==="Circle"||t==="Arc"||t==="Polygon"):!1}function v5(t){if(!t)return!1;switch(t){case"Line":case"Ray":case"Vector":case"Segment":return!0}return!1}var C5=!0,S5=!1;function E5(){return{point:__dcg_shared_module_exports__['fc'].PURPLE,line:__dcg_shared_module_exports__['fc'].BLUE,circle:__dcg_shared_module_exports__['fc'].GREEN,polygon:__dcg_shared_module_exports__['fc'].BLUE,angle:__dcg_shared_module_exports__['fc'].BLACK}}function D5(t,e){let r=[],i=t.parents;for(let n=0;n<i.length;n++){let o=i[n];o.type==="hardcoded"?r[n]=o.id:r[n]=e[o.id]}return r}var Bf=class{constructor(e){this._nextObjectId=0;this.clear(),this.controller=e,this.s=this.controller.s,this._tools={};for(let r in kD)this._tools[r]=new kD[r](this)}onPreviewChange(){var o,a;var e=this.controller.getToolPreviewJSONState(),r=this.getUncommittedObjects();for(var i in r){var n=r[i];n.type==="polygon"&&this.isObjectHovered(n.parents[0])&&n.parents.push(n.parents[0])}__dcg_shared_module_exports__['E'](e,r)?this.controller.dispatch({type:"render"}):this.controller.dispatch({type:"set-tool-preview-state",state:r}),(a=(o=this.controller.getGrapher())==null?void 0:o.poiController)==null||a.updateGeoHoveredObjects()}peekNextObjectId(){return"\\token{"+this._nextObjectId.toString()+"}"}generateObjectId(){let e=this.peekNextObjectId();return this._nextObjectId+=1,e}updateNextObjectId(e){e>this._nextObjectId&&(this._nextObjectId=e)}clear(){let e={objects:{},ui:{currentTool:{name:"selection",idMap:{},reusableInputIdMap:{},lockedIds:{},inputIndex:0,outputHistory:{}},colors:E5()},hoveredObjects:[],uncommittedIds:{},selectedIds:{},lastFocusedId:"",nextSelectionNumber:1,fadeAnimations:{},maxAnimationEndTime:0};this.store?this.store.set(e):this.store=new ys(e)}onMouseAction(e,r){let i=this.getCurrentTool();if(i.getNumberInputLatex())return{committed:void 0};switch(this.updateNextObjectId(this.controller.findLastTokenNumber()+1),this.clearHoveredObjects(),e){case"press":return i.onPress(r),{committed:void 0};case"move":return i.onMove(r),{committed:void 0};case"release":return i.onRelease(r)}}getNonObjectsState(){return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.store.getState()),{objects:void 0})}getCurrentTool(){return this.getTool(this.getToolMode())}getTool(e){return this._tools[e]}defaultColorForObject(e,r){switch(r.type){case"point":case"point-reference":case"midpoint":case"glider":case"intersection":return e.colors.point;case"line":case"segment":case"polygon-segment":case"ray":case"perpendicular":case"parallel":return e.colors.line;case"circle":case"compass":case"arc":return e.colors.circle;case"polygon":return e.colors.polygon;case"angle":case"angles":case"directedangle":case"directedangles":return e.colors.angle;case"dilation":case"translation":case"reflection":case"rotation":return __dcg_shared_module_exports__['fc'].GRAY;case"transformed-object":return __dcg_shared_module_exports__['fc'].BLACK;default:return r}}_deselectAll(){this.store.shallowMutate(e=>{e.nextSelectionNumber=1,e.selectedIds={}})}_modifySelection(e){let r=this.getNonObjectsState().nextSelectionNumber;this.store.shallowMutate("selectedIds",i=>{for(let n in e)e[n]?i[n]||(i[n]=r,r+=1):delete i[n]}),this.store.set("nextSelectionNumber",r)}_addObjects(e){this.store.shallowMutate("objects",r=>{for(let i of e)r[i.id]=i})}_deleteObjects(e){if(!e.length)return;let r={};this.store.shallowMutate("objects",i=>{for(let n of e)r[n]=S5,delete i[n]}),this._modifySelection(r),this.store.shallowMutate("uncommittedIds",i=>{for(let n of e)delete i[n]})}createCustomToolOutput(e){this.generateIdsForNewToolOutputs(e);let{idMap:r}=this.getNonObjectsState().ui.currentTool,i=[],n=this.getNonObjectsState().ui;for(let o of e.outputs){let a=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},o),{id:r[o.id],color:this.defaultColorForObject(n,o),parents:D5(o,r)});i.push(a)}this._shouldNewObjectsBeMarkedUncommitted()&&this.store.shallowMutate("uncommittedIds",o=>{for(let a of i)o[a.id]=!0}),this._addObjects(i)}_getReusableIdForCurrentInput(e){let r=this.getCurrentTool();if(!r.getSpec)return;let{inputIndex:i,reusableInputIdMap:n}=this.getNonObjectsState().ui.currentTool,a=r.getSpec().inputs[i];if(!a)return;let s=a.id;return e!==void 0&&(s+="-"+e),n[s]}_createInputObject(e,r){let i,n=this._shouldNewObjectsBeMarkedUncommitted();n?i=this._getReusableIdForCurrentInput(r)||this.generateObjectId():i=this.generateObjectId(),n&&this.store.set(["uncommittedIds",i],!0);let o=this.defaultColorForObject(this.getNonObjectsState().ui,e),a=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({hidden:!1},e),{id:i,color:o});return this._addObjects([a]),i}attemptLockToolInputIn(e){let{currentTool:r}=this.getNonObjectsState().ui,i=r.inputIndex,n=e.inputs[i];if(!n)return;let o=n.id,a=r.idMap[o];if(!a){this.getCurrentTool().canNextInputBePoint()||this.controller.dispatch({type:"select-geo-tool",tool:"selection"});return}this.store.set(["ui","currentTool","inputIndex"],i+1),this.store.set(["ui","currentTool","lockedIds",a],!0);for(var s=0;s<2;s++){let l=o+"-"+s,c=r.idMap[l];c&&this.store.set(["ui","currentTool","lockedIds",c],!0)}this.updateFadeAnimations()}generateIdsForNewToolOutputs(e){let{idMap:r}=this.getNonObjectsState().ui.currentTool,i=!1,n={};for(let o of e.outputs)r[o.id]||(i=!0,n[o.id]=this.generateObjectId());i&&this.store.set(["ui","currentTool","idMap"],__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},r),n))}tentativelyMatchToolInput(e,r){let{currentTool:i}=this.getNonObjectsState().ui,n=i.inputIndex,o=e.inputs[n];if(!o)return;let a=o.id;this.store.set(["ui","currentTool","idMap",a],r)}createToolInputDependency(e,r,i){let n=this._createInputObject(e,i),{currentTool:o}=this.getNonObjectsState().ui,a=o.inputIndex,s=r.inputs[a];if(!s)throw new Error("programming error: could not find input "+a+" in spec");let l=s.id;return this.store.set(["ui","currentTool","idMap",l+"-"+i],n),n}isObjectALockedToolInput(e){return!!this.getNonObjectsState().ui.currentTool.lockedIds[e]}getEnabledAdditionalTools(){return tP.filter(e=>!0)}getAdditionalTools(){return this.getEnabledAdditionalTools()}isAnyAdditionalToolEnabled(){return this.getAdditionalTools().length>0}setObjectSelected(e){let r={};r[e]=C5,this._modifySelection(r)}setObjectsSelected(e){__dcg_shared_module_exports__['k'](e,r=>{this.setObjectSelected(r)})}deleteSelectedObjects(){let e=this.getSelectedObjectIdsUnsorted();this._deleteObjects(e)}isObjectHovered(e){let r=this.getNonObjectsState().hoveredObjects;for(let i of r)if("calcId"in i&&i.calcId===e)return!0;return!1}isObjectUncommitted(e){return!!this.getNonObjectsState().uncommittedIds[e]}getUncommittedObjectIds(){return Object.keys(this.getNonObjectsState().uncommittedIds)}getUncommittedObjects(){let e={},r=this.store.getState().objects,i=this.getUncommittedObjectIds();for(let n of i)e[n]=r[n];return e}isTemporaryToolOutput(e){let{idMap:r,lockedIds:i,reusableInputIdMap:n}=this.store.getState().ui.currentTool;for(var o in n)if(n[o]===e&&!i[e])return!0;for(var o in r)if(r[o]===e&&!i[e])return!0;return!1}isValidNextInputType(e){let r=this.getCurrentTool(),i=r.getNonPointInputType();return e&&__dcg_shared_module_exports__['sa'](e)&&(e=__dcg_shared_module_exports__['ta'](e)),!!(i&&e&&Vw(e,i)||r.canNextInputBePoint()&&e&&Vw(e,"point"))}recordCommittedOutput(e){this.store.shallowMutate(["ui","currentTool","outputHistory"],r=>{r[e]=!0})}updateFadeAnimations(){let e=this.controller.getAllItemModels(),r=Date.now(),i=-1/0;this.store.shallowMutate(["fadeAnimations"],n=>{var o,a;if(this.getCurrentTool().toolType==="selection"){for(let s in n)n[s]={type:"fade-in",start:r-150};i=r-150}else for(let s of e){if(s.type!=="expression"||!s.latex)continue;let l=s.id,c=(o=s.formula)==null?void 0:o.geometry,u;this.getCurrentTool().toolType==="selection"?u="fade-in":c!=null&&c.unconstructable?u="fade-out":this.getCurrentTool().canNextInputBePoint()&&(c!=null&&c.valueType)&&!__dcg_shared_module_exports__['va'](c.valueType,__dcg_shared_module_exports__['ka'])&&!__dcg_shared_module_exports__['va'](c.valueType,__dcg_shared_module_exports__['ma'])||c!=null&&c.valueType&&__dcg_shared_module_exports__['va'](c.valueType,__dcg_shared_module_exports__['_'])&&this.isValidNextInputType(__dcg_shared_module_exports__['aa'])||this.isValidNextInputType(c==null?void 0:c.valueType)||this.store.getState().ui.currentTool.outputHistory[l]?u="fade-in":u="fade-out";let h=this.store.getState().fadeAnimations[l];if(h&&h.type!==u){let p=__dcg_shared_module_exports__['jb'](r-h.start,0,150),g=r+p-150;n[l]={type:u,start:g},i=Math.max(i,g)}else if(u==="fade-out"){let p=(a=h==null?void 0:h.start)!=null?a:r;n[l]={type:"fade-out",start:p},i=Math.max(i,p)}}}),isFinite(i)&&this.store.set("maxAnimationEndTime",i+150)}getToolFadeOpacity(e){let r=this.controller.getItemModel(e);if((r==null?void 0:r.type)!=="expression")return 1;let i=this.store.getState().fadeAnimations[r.id];if(!i)return 1;let n=Date.now(),o=__dcg_shared_module_exports__['jb']((n-i.start)/150,0,1),a=i.type==="fade-in"?.2:1,s=i.type==="fade-in"?1:.2;return a*(1-o)+s*o}isFading(){return Date.now()<=this.store.getState().maxAnimationEndTime}isObjectSelected(e){return!!this.getNonObjectsState().selectedIds[e]}getSelectedObjectIdsUnsorted(){return Object.keys(this.getNonObjectsState().selectedIds)}getSelectedObjectIdsSorted(){let e=this.getNonObjectsState().selectedIds,r=this.getSelectedObjectIdsUnsorted();return __dcg_shared_module_exports__['u'](r,n=>e[n])}deselectAllObjects(){this._deselectAll()}getToolMode(){return this.getNonObjectsState().ui.currentTool.name}setToolMode(e){let r=this.getToolMode();this.store.set(["ui","currentTool"],{name:e,idMap:{},reusableInputIdMap:{},lockedIds:{},inputIndex:0,outputHistory:e!==r?{}:this.store.getState().ui.currentTool.outputHistory}),this.updateFadeAnimations(),e!==r&&this.controller.isGraphPaperFocused()&&(Ct(this.getCurrentToolDisplayName()+"."),this.speakCurrentGeoToolHint())}resetToolMode(){this.setToolMode(this.getToolMode())}areAnyObjectsHovered(){return!!this.getNonObjectsState().hoveredObjects.length}setObjectHovered(e){this.store.deepMutate(r=>{r.hoveredObjects.push(e)})}getNecessaryComplexObject(){return this.getCurrentTool().getNecessaryComplexObject()}objectIsInstanceOf(e,r){let i=e==null?void 0:e.typedRuntimeValue.valueType;if(i)return Vw(i,r)}getSelectionBox(){return this.getTool("selection").getSelectionBox()}commitObjects(){this.store.set("uncommittedIds",{}),this.store.set("objects",{})}applyTransformation(e){}getProjection(){return this.controller.getGrapher().getProjection()}_getPixelScaler(){return this.getProjection().mapx(1)-this.getProjection().mapx(0)}_getPixelsFromPoint(e){return this._getPixelScaler()*e-6}_getPixelsFromPath(e){return this._getPixelScaler()*e-1}_getPixelsAwayFromDef(e,r,i){let n=i.typedRuntimeValue;switch(n.valueType){case __dcg_shared_module_exports__['S']:{let h=r.mapx(n.value[0]),p=r.mapy(n.value[1]);return __dcg_shared_module_exports__['Aa'](e.x-h,e.y-p)-6}case __dcg_shared_module_exports__['ga']:case __dcg_shared_module_exports__['aa']:case __dcg_shared_module_exports__['ia']:{let u=r.mapx(n.value[0][0]),h=r.mapy(n.value[0][1]),p=r.mapx(n.value[1][0]),g=r.mapy(n.value[1][1]);var o=n.valueType===__dcg_shared_module_exports__['ga'],a=n.valueType!==__dcg_shared_module_exports__['aa'],s=__dcg_shared_module_exports__['Ea'](e.x,e.y,u,h,p,g,o,a);return s?__dcg_shared_module_exports__['Aa'](s[0]-e.x,s[1]-e.y):1/0}case __dcg_shared_module_exports__['ca']:{let u=n.value[0][0],h=n.value[0][1],p=n.value[1],g=0,y=Math.PI*2,w=r.reverse_mapx(e.x),b=r.reverse_mapy(e.y);var l=__dcg_shared_module_exports__['Ga'](w,b,u,h,p,g,y);return l?r.screen.width/(r.viewport.xmax-r.viewport.xmin)*__dcg_shared_module_exports__['Aa'](l[0]-w,l[1]-b):1/0}case __dcg_shared_module_exports__['ea']:{let u=__dcg_shared_module_exports__['ub'](n.value);if(!u)return 1/0;let h=(p,g,y,w)=>{let b=r.mapx(p[0]),D=r.mapy(p[1]),I=r.mapx(g[0]),E=r.mapy(g[1]);var G=__dcg_shared_module_exports__['Ea'](e.x,e.y,b,D,I,E,y,w);return G?__dcg_shared_module_exports__['Aa'](G[0]-e.x,G[1]-e.y):1/0};if(u.type==="arc"){let p=r.reverse_mapx(e.x),g=r.reverse_mapy(e.y);var l=__dcg_shared_module_exports__['Ga'](p,g,u.center[0],u.center[1],u.radius,u.startAngle,u.endAngle);return l?r.screen.width/(r.viewport.xmax-r.viewport.xmin)*__dcg_shared_module_exports__['Aa'](l[0]-p,l[1]-g):1/0}else return u.type==="segment"?h(u.start,u.end,!1,!1):Math.min(h(u.start1,u.end1,!1,!0),h(u.start2,u.end2,!1,!0))}case __dcg_shared_module_exports__['_']:{let u=[];return n.value.forEach(h=>{u.push(r.mapx(h[0]),r.mapy(h[1]))}),__dcg_shared_module_exports__['hb'](u,[e.x,e.y])?0:1/0}case __dcg_shared_module_exports__['ka']:case __dcg_shared_module_exports__['ma']:{let u=r.screen.width/(r.viewport.xmax-r.viewport.xmin),h=r.screen.height/(r.viewport.ymax-r.viewport.ymin),[[p,g],y,w]=n.value,b=fp(w,r),D=b/u,I=r.reverse_mapx(e.x),E=r.reverse_mapy(e.y),G=1/0,T=E-g,P=I-p,_=Math.atan2(T,P);if(__dcg_shared_module_exports__['za'](_,y,w)){var c=__dcg_shared_module_exports__['Aa'](T*h,P*u);c<=b+7&&(G=0)}else{let x=__dcg_shared_module_exports__['Da'](I,E,p+D*Math.cos(y),g+D*Math.sin(y),p,g),L=__dcg_shared_module_exports__['Da'](I,E,p+D*Math.cos(y+w),g+D*Math.sin(y+w),p,g),R=__dcg_shared_module_exports__['Aa'](u*(x[0]-I),h*(x[1]-E)),q=__dcg_shared_module_exports__['Aa'](u*(L[0]-I),h*(L[1]-E));G=Math.min(R,q)}return G}case __dcg_shared_module_exports__['oa']:return 1/0;default:return 1/0}}_addAnyNearbyPolygonEdges(e,r,i,n){if(e.typedRuntimeValue.valueType!==__dcg_shared_module_exports__['_'])return;let o=e.typedRuntimeValue.value;for(var a=0;a<o.length;a++){let l=o[a],c=o[(a+1)%o.length],u=__dcg_shared_module_exports__['Fa'](r.x,r.y,l[0],l[1],c[0],c[1]);var s=this._getPixelsFromPath(u);if(s<i){let h=e.referenceLatex+".\\operatorname{segments}\\left["+(a+1)+"\\right]",p={calcId:e.calcId,listIndex:e.listIndex,hidden:e.hidden,assignment:h,referenceLatex:h,data:e.data,typedRuntimeValue:{valueType:__dcg_shared_module_exports__['aa'],value:[l,c]},polygonEdgeInfo:{edgeNumber:a,polygonDef:e}};n.push({def:p,layerNumber:-1,pixelsAway:s,polygonEdge:a})}}}_getObjectsUnderMouse(e,r){let i=[],n=this.getCurrentTool().getNecessaryComplexObject(),o=n===void 0||n==="segment"||n==="straight",a=this.convertCanvasPixelsToPoint(e),s=this.getProjection();return Dd(this.controller,l=>{if(this.isTemporaryToolOutput(l.assignment)||l.hidden||l.data.unconstructable||(o&&l.typedRuntimeValue.valueType===__dcg_shared_module_exports__['_']&&this._addAnyNearbyPolygonEdges(l,a,r,i),n&&!this.objectIsInstanceOf(l,n)))return;let c=this._getPixelsAwayFromDef(e,s,l);if(c<=r){let u={def:l,layerNumber:0,pixelsAway:c};i.push(u)}}),i.sort((l,c)=>{let u=c.layerNumber-l.layerNumber;return u!==0?u:l.pixelsAway-c.pixelsAway}),i}convertCanvasPixelsToPoint(e){return this.getProjection().reverse_map_pt(e)}convertPointToCanvasPixels(e){return this.getProjection().map_pt(e)}deleteObjectsAndRememberReusableId(e){for(let r in e)this._deleteObjects([e[r]]);this.store.shallowMutate(["ui","currentTool"],r=>r.reusableInputIdMap=e)}getObjectDefUnderMouse(e,r){let i=this.convertPointToCanvasPixels(e),n=this._getObjectsUnderMouse(i,r)[0];return n&&n.def}getOrCreatePointNearMouse(e,r){let i=this.convertPointToCanvasPixels(e),n=this._getObjectsUnderMouse(i,r),o=[];for(let h of n){let p=h.def,g=aL(p);g==="Point"?o.push({def:p,type:g}):g==="Polygon"||Nf(g)&&o.push({def:p,type:g})}let{def:a,type:s}=o[0]||{},{def:l,type:c}=o[1]||{};if(s==="Point")return{type:"def",def:a};if(Nf(s)&&Nf(c)){let h=eP(a,l).map(p=>({x:p.x,y:p.y,i:p.i,pixelsFromPoint:this._getPixelsFromPoint(Ed(p.x-e.x,p.y-e.y))}));if(h.sort((p,g)=>p.pixelsFromPoint-g.pixelsFromPoint),h=h.filter(p=>p.pixelsFromPoint<5),h[0]){let p=h[0].i===0?[a,l]:[l,a],g=this.findIncidentPointDef(a,l);if(g!=null&&g.hidden){let y=!1,w;if(iD(g.typedRuntimeValue,(b,D)=>{let[I,E]=b.value,G=this.getProjection().mathToPixels.mapPoint({x:I,y:E});Ed(G.x-i.x,G.y-i.y)<r&&(y=!0,w=D)}),y)return w!==void 0&&(g=nD(g,w)),{type:"spec",spec:{type:"point-reference",targetSpec:{type:"intersection",parentDefs:p},parentDefs:[g]}}}return{type:"spec",spec:{type:"intersection",parentDefs:p}}}else return this.makeGliderSpec(e,a)}else if(Nf(s))return this.makeGliderSpec(e,a);let u=this.computeRoundedPt(e);return{type:"spec",spec:{type:"point",x:u.x,y:u.y,parentDefs:[]}}}findIncidentPointDef(e,r){let i=e.typedRuntimeValue.valueType,n=r.typedRuntimeValue.valueType,o={};Dd(this.controller,s=>{if(s.data.identifier&&__dcg_shared_module_exports__['va'](s.typedRuntimeValue.valueType,__dcg_shared_module_exports__['S'])){let l=s.data.identifier;o[l]=s}},{expandLists:!1});let a=__dcg_shared_module_exports__['Vb']({getGeometryTree:s=>s.data.call,getValueType:s=>s.typedRuntimeValue.valueType,lookup:s=>o[s],resolvesTo:(s,l)=>s===l.data.identifier},e,i,r,n);if(a){let[s,l]=a,c=o[s];return l===void 0?c:nD(c,l)}}makeGliderSpec(e,r){var i=Pw(this.getProjection(),e,r.typedRuntimeValue);return{type:"spec",spec:{type:"glider",t:i,parentDefs:[r]}}}computeRoundedPt(e){var r=this.getProjection(),i=AD(r,e);i&&(e=i);var n=.5/this._getPixelScaler();return{x:mi(e.x-n,e.x+n),y:mi(e.y-n,e.y+n)}}_shouldNewObjectsBeMarkedUncommitted(){return this.getToolMode()!=="selection"}clearHoveredObjects(){this.store.set("hoveredObjects",[])}getHoveredItems(){return this.store.getState().hoveredObjects}cancelToolplay(){this._deleteObjects(this.getUncommittedObjectIds()),this.clearHoveredObjects(),this.resetToolMode()}isToolplayActive(){return this.getNonObjectsState().ui.currentTool.inputIndex>0}getComputedBoard(){let e=new _f;return Dd(this.controller,(r,i)=>{e.add(r,i)}),e}findDefsForInputId(e){let r=[];return Dd(this.controller,i=>{(i.assignment===e||i.referenceLatex===e)&&r.push(i)}),r}isCreatingNewTransform(){return this.getCurrentTool().toolType==="transformation"}getCurrentToolDisplayName(){return this.controller.s(this.getCurrentTool().displayName)}isCurrentToolComplex(){return this.getCurrentTool().toolType==="complex"}isCurrentToolSingleUse(){return this.getCurrentTool().toolType==="transformation"}getIconInstructionsForTool(e){let r=this.getTool(e);return r?r.icon:[]}getDisplayNameForTool(e){let r=this.getTool(e);return r?this.controller.s(r.displayName):""}getViewportBounds(){return this.controller.getGrapher().getCurrentViewport()}getLastFocusedId(){return this.getNonObjectsState().lastFocusedId}setLastFocusedId(e){this.store.shallowMutate(r=>{r.lastFocusedId=e})}speakCurrentGeoToolHint(){ge(this.getCurrentTool().getHint())}};function k5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var I5="ID_",Rc=function(){function t(){k5(this,t),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return t.prototype.register=function(r){var i=I5+this._lastID++;return this._callbacks[i]=r,i},t.prototype.unregister=function(r){this._callbacks[r]||Kf(!1,"Dispatcher.unregister(...): `%s` does not map to a registered callback.",r),delete this._callbacks[r]},t.prototype.waitFor=function(r){this._isDispatching||Kf(!1,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var i=0;i<r.length;i++){var n=r[i];if(this._isPending[n]){this._isHandled[n]||Kf(!1,"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",n);continue}this._callbacks[n]||Kf(!1,"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",n),this._invokeCallback(n)}},t.prototype.dispatch=function(r){this._isDispatching&&Kf(!1,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this._startDispatching(r);try{for(var i in this._callbacks)this._isPending[i]||this._invokeCallback(i)}finally{this._stopDispatching()}},t.prototype.isDispatching=function(){return this._isDispatching},t.prototype._invokeCallback=function(r){this._isPending[r]=!0,this._callbacks[r](this._pendingPayload),this._isHandled[r]=!0},t.prototype._startDispatching=function(r){for(var i in this._callbacks)this._isPending[i]=!1,this._isHandled[i]=!1;this._pendingPayload=r,this._isDispatching=!0},t.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},t}();function Kf(t,e,r,i,n,o,a,s){if(e===void 0)throw new Error("invariant requires an error message argument");if(!t){var l;if(e===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,i,n,o,a,s],u=0;l=new Error(e.replace(/%s/g,function(){return c[u++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var $l=class{constructor(e=100){this.clear(),this._sizeLimit=e}clear(){this._stack=[],this._stackPointer=-1}getState(){return this._stack[this._stackPointer]}serializeForBugsnag(){function e(r){try{return JSON.stringify(r,null,2)}catch(i){return"[[could not jsonify]]"}}return{currentState:e(this._stack[this._stackPointer]),undoState:e(this._stack[this._stackPointer-1]),redoState:e(this._stack[this._stackPointer+1])}}addState(e){this.canRedo()&&this._stack.splice(this._stackPointer+1),this._stack.push(e),this._stack.length>this._sizeLimit&&this._stack.shift(),this._stackPointer=this._stack.length-1}replaceState(e){this.canRedo()&&this._stack.splice(this._stackPointer+1),this.replaceInteriorState(e)}replaceInteriorState(e){this._stack.length===0?(this._stack.push(e),this._stackPointer=0):this._stack[this._stackPointer]=e}canUndo(){return this._stackPointer>0}canRedo(){return this._stackPointer<this._stack.length-1}undo(){this.canUndo()&&(this._stackPointer-=1)}redo(){this.canRedo()&&(this._stackPointer+=1)}};function M5(t){typeof t.min=="number"&&(t.min=""+t.min),typeof t.max=="number"&&(t.max=""+t.max),typeof t.step=="number"&&(t.step=""+t.step)}function T5(t){t.slider&&M5(t.slider),typeof t.id!="string"&&(t.id=""+t.id)}function G5(t){let e=A5(t)+1,r={},i,n;for(let o of t)if(T5(o),o.type==="folder")i=o.id,r[o.id]&&(o.id=""+e,e+=1),n=o.id,r[o.id]=!0,o.hasOwnProperty("folderId")&&delete o.folderId;else{if(i!==void 0&&o.folderId===i?o.folderId=n:(o.folderId&&(o.folderId=""),i=void 0,n=void 0),o.type==="table"&&Array.isArray(o.columns))for(let a of o.columns)r[a.id]&&(a.id=""+e,e+=1),r[a.id]=!0;r[o.id]&&(o.id=""+e,e+=1),r[o.id]=!0}}function iP(t,e){let r=parseFloat(e);return r!==Math.floor(r)?t:Math.max(t,r)}function A5(t){let e=0;for(let r of t)if(e=iP(e,r.id),r.type==="table"&&Array.isArray(r.column))for(let i of r.columns)iP(e,i.id);return e}function Ow(t){let e=__dcg_shared_module_exports__['M'](t);return Array.isArray(e.expressions.list)&&G5(e.expressions.list),e}var VD={NONE:"NONE",POSITIVE:"POSITIVE",BOTH:"BOTH"},V5={expression:!0,table:!0,image:!0,folder:!0,text:!0};function L5(t){if(t.type){if(V5.hasOwnProperty(t.type))return t.type;throw new Error("Invalid item type: '"+t.type+"'.")}return t.text!==void 0?"text":t.columns!==void 0||t.headings!==void 0?"table":"expression"}function _w(t){return t.replace(/\\(total|length|mean|median|quantile|stdev|stddev|stdDev|stdevp|stddevp|stdDevP|var|variance|cov|corr|ceil|floor|round|abs|mod|lcm|mcm|mcd|nCr|nPr|signum|sign|arcsinh|arccosh|arctanh|arccsch|arcsech|arccoth|arccsc|arcsec|arccot)/g,"\\operatorname{$1}")}function P5(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(r==="latex"?e[r]=_w(t[r]):r==="values"?e[r]=t[r].map(_w):e[r]=t[r]);return e}function O5(t){var e=L5(t),r={},i;switch(e){case"expression":for(i in t)t.hasOwnProperty(i)&&(i==="latex"?r[i]=_w(t[i]):r[i]=t[i]);return r.type=e,r;case"table":for(i in t)t.hasOwnProperty(i)&&(i==="columns"?r[i]=t[i].map(P5):r[i]=t[i]);return r.type=e,r;case"image":for(i in t)t.hasOwnProperty(i)&&(i==="width"||i==="height"||i==="x"||i==="y"?r[i]=_w(t[i]):r[i]=t[i]);return r.type=e,r;case"text":case"folder":for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return r.type=e,r}}var nP={none:VD.NONE,both:VD.BOTH,positive:VD.POSITIVE};function _5(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(r==="xAxisArrows"||r==="yAxisArrows"||(e[r]=t[r]));return e.xAxisArrowMode=nP[t.xAxisArrows||"none"],e.yAxisArrowMode=nP[t.yAxisArrows||"none"],e}function oP(t){if(t.version)throw new Error("Unexpected version: "+t.version);var e={};return e.graph=_5(t.graph),e.expressions={list:t.expressions.list.map(O5)},e.version=0,e}var F5=1;function Fw(t){return t.replace(/\\(sech|csch)/g,"\\operatorname{$1}")}function R5(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(r==="latex"?e[r]=Fw(t[r]):r==="values"?e[r]=t[r].map(Fw):e[r]=t[r]);return e}function N5(t){var e=t.type,r={},i;switch(e){case"expression":for(i in t)t.hasOwnProperty(i)&&(i==="latex"?r[i]=Fw(t[i]):r[i]=t[i]);return r;case"table":for(i in t)t.hasOwnProperty(i)&&(i==="columns"?r[i]=t[i].map(R5):r[i]=t[i]);return r;case"image":for(i in t)t.hasOwnProperty(i)&&(i==="width"||i==="height"||i==="x"||i==="y"?r[i]=Fw(t[i]):r[i]=t[i]);return r;case"text":case"folder":for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return r;default:throw new Error("Unexpected expression type: "+e)}}function aP(t){if(t.version)throw new Error("Unexpected version: "+t.version);var e={};return e.graph=t.graph,e.expressions={list:t.expressions.list.map(N5)},e.version=F5,e}var B5=2,K5="#C0504D",U5="#4F81BD",q5="#9BBB59",H5="#8064A2",$5="#F79646",z5="#000000";function sP(t){switch(t){case K5:return __dcg_shared_module_exports__['fc'].RED;case U5:return __dcg_shared_module_exports__['fc'].BLUE;case q5:return __dcg_shared_module_exports__['fc'].GREEN;case H5:return __dcg_shared_module_exports__['fc'].PURPLE;case $5:return __dcg_shared_module_exports__['fc'].ORANGE;case z5:return __dcg_shared_module_exports__['fc'].BLACK;default:return t}}function W5(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(r==="color"?e[r]=sP(t[r]):e[r]=t[r]);return e}function j5(t){var e=t.type,r={},i;switch(e){case"expression":for(i in t)t.hasOwnProperty(i)&&(i==="color"?r[i]=sP(t[i]):r[i]=t[i]);return r;case"table":for(i in t)t.hasOwnProperty(i)&&(i==="columns"?r[i]=t[i].map(W5):r[i]=t[i]);return r;case"image":case"text":case"folder":for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return r;default:throw new Error("Unexpected expression type: "+e)}}function lP(t){if(t.version>1)throw new Error("Unexpected version: "+t.version);var e={};return e.graph=t.graph,e.expressions={list:t.expressions.list.map(j5)},e.version=B5,e}var Y5=3;function LD(t){if(typeof t=="string")return t;if(t===void 0)return"";var e=t+"";return e=e.replace(/1e\+?([-\d]+)/,"10^{$1}"),e=e.replace(/([-\d\.]+)e\+?([-\d]+)/,"$1\\cdot 10^{$2}"),e}function J5(t){var e=t.type,r={},i;switch(e){case"expression":for(i in t)t.hasOwnProperty(i)&&(i==="sliderMax"||i==="sliderMin"||i==="sliderInterval"?r[i]=LD(t[i]):i==="domain"?r[i]={max:LD(t[i].max),min:LD(t[i].min)}:r[i]=t[i]);return r.hasOwnProperty("sliderMin")&&r.sliderInterval===void 0&&(r.sliderInterval=""),r;case"image":case"table":case"text":case"folder":for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return r;default:throw new Error("Unexpected expression type: "+e)}}function cP(t){if(t.version>2)throw new Error("Unexpected version: "+t.version);var e={};return e.graph=t.graph,e.expressions={list:t.expressions.list.map(J5)},e.version=Y5,e}var X5=4;function dP(t){switch(t){case"point":return"POINT";case"cross":return"CROSS";case"open":return"OPEN";case"normal":return"SOLID";case"dashed":return"DASHED";case"dotted":return"DOTTED";default:return t}}function Q5(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(r==="style"?e[r]=dP(t[r]):e[r]=t[r]);return e}function Z5(t){var e=t.type,r={},i;switch(e){case"expression":for(i in t)t.hasOwnProperty(i)&&(i==="style"?r[i]=dP(t[i]):r[i]=t[i]);return r;case"table":for(i in t)t.hasOwnProperty(i)&&(i==="columns"?r[i]=t[i].map(Q5):r[i]=t[i]);return r;case"image":case"text":case"folder":for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return r;default:throw new Error("Unexpected expression type: "+e)}}function uP(t){if(t.version!==3)throw new Error("Unexpected version: "+t.version);var e={};return e.graph=t.graph,e.expressions={list:t.expressions.list.map(Z5)},e.version=X5,e}function e4(t){var e={},r;for(var i in t)if(t.hasOwnProperty(i))switch(r=t[i],i){case"showAxes":e.showXAxis=r,e.showYAxis=r;break;case"showLabels":e.xAxisNumbers=r,e.yAxisNumbers=r,e.polarNumbers=r;break;case"labelXMode":e.xAxisStep=r==="pi"?Math.PI:0;break;case"labelYMode":e.yAxisStep=r==="pi"?Math.PI:0;break;default:e[i]=r}return e}function t4(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(r==="showPoints"||r==="showLine"||(e[r]=t[r]));return(t.showPoints!==void 0||t.showLine!==void 0)&&(t.showPoints&&t.showLine?e.columnMode="POINTS_AND_LINES":t.showPoints?e.columnMode="POINTS":t.showLine?e.columnMode="LINES":(e.hidden=!0,e.columnMode="POINTS")),e}function r4(t){var e=t.type,r={},i;switch(e){case"expression":t.hidden===void 0?t.hasOwnProperty("graphed")?r.hidden=!t.graphed:t.hasOwnProperty("userRequestedGraphing")?r.hidden=t.userRequestedGraphing==="never":r.hidden=!1:r.hidden=t.hidden;for(i in t)if(t.hasOwnProperty(i)&&!(i==="graphed"||i==="userRequestedGraphing"||i==="hidden")&&i!=="slider"){if(i==="color"){typeof t.color=="object"?r.color=t.color.value:r.color=t.color;continue}if(i==="style"){r.style=t.style==="normal"?"SOLID":t.style;continue}if(i==="sliderInterval"){r.sliderInterval=t.sliderInterval==="undefined"?"":t.sliderInterval;continue}r[i]=t[i]}return r;case"table":if(t.headings||t.columns){var n=t.headings?t.headings:t.columns;if(r.columns=n.map(t4),t.rows)for(var o=0;o<r.columns.length;o++){var a=r.columns[o];a.values=[];for(var s=0;s<t.rows.length;s++)a.values.push(t.rows[s][o])}}for(i in t)t.hasOwnProperty(i)&&(i==="rows"||i==="headings"||i==="columns"||(r[i]=t[i]));return r;case"image":case"text":case"folder":for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return r;default:throw new Error("Unexpected expression type: "+e)}}function pP(t){if(t.version!==4)throw new Error("Unexpected version: "+t.version);var e={version:5,graph:e4(t.graph),expressions:{list:t.expressions.list.map(r4)}};return e}var i4=6;function n4(t){return t.length<2?!1:t[0]==="`"&&t[t.length-1]==="`"}function o4(t){if(n4(t))return{raw:t,parts:[t]};for(var e=["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\{[a-zA-Z0-9]+\\}"],r="({"+e.join("})|({")+"})",i=new RegExp(r,"g"),n=[],o=0,a=0,s;s=i.exec(t);){a=s.index,a>o&&n.push(t.substr(o,a-o));var l=s[0],c=l.replace(/[{}\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");n.push({symbol:c,str:l}),o=s.index+l.length}return o<t.length&&n.push(t.substr(o)),{raw:t,parts:n}}function a4(t){var e={};for(var r in t)if(t.hasOwnProperty(r)&&r!=="style")if(r==="values"&&(e[r]=t[r].map(function(i){return i?""+i:""})),r==="columnMode"&&!t.hasOwnProperty("points")&&!t.hasOwnProperty("lines"))switch(t[r]){case"LINES":e.points=!1,e.lines=!0;break;case"POINTS_AND_LINES":e.points=!0,e.lines=!0;break;default:e.points=!0,e.lines=!1}else e[r]=t[r];return e.hasOwnProperty("pointStyle")||(e.pointStyle="POINT"),e.hasOwnProperty("lineStyle")||(e.lineStyle="SOLID"),e.id=""+e.id,e}var hP={sliderMin:"min",sliderMax:"max",sliderInterval:"step",sliderHardMin:"hardMin",sliderHardMax:"hardMax",sliderAnimationPeriod:"animationPeriod",sliderLoopMode:"loopMode",sliderPlayDirection:"playDirection",sliderIsPlaying:"isPlaying"};function s4(t){var e=o4(t),r="";return __dcg_shared_module_exports__['k'](e.parts,function(i){r+=typeof i=="object"&&i.str?"$"+i.str:i}),r}function l4(t,e){var r=t.latex.split("=");if(r.length===2){var i=ai(r[1],e);if(isFinite(i)){var n=t.slider.hardMin?ai(t.slider.min||"-10",e):void 0,o=t.slider.hardMax?ai(t.slider.max||"10",e):void 0,a=t.slider.step?ai(t.slider.step,e):void 0,s=__dcg_shared_module_exports__['_a']({target:i,step:a,hardMin:n,hardMax:o});s.min||(delete t.slider.hardMin,delete t.slider.min),s.max||(delete t.slider.hardMax,delete t.slider.max),s.step||delete t.slider.step}}}function c4(t,e,r,i){var n=t.type,o={},a;switch(n){case"folder":for(a in t)t.hasOwnProperty(a)&&(a==="memberIds"||(o[a]=t[a]));break;case"expression":for(a in t)if(t.hasOwnProperty(a)){if(a==="style"&&!t.hasOwnProperty("pointStyle")&&!t.hasOwnProperty("lineStyle")){var s=t[a];__dcg_shared_module_exports__['p'](["POINT","OPEN","CROSS"],s)?(o.pointStyle=s,o.lineStyle="SOLID"):__dcg_shared_module_exports__['p'](["SOLID","DASHED","DOTTED"],s)?(o.pointStyle="POINT",o.lineStyle=s):(o.pointStyle="POINT",o.lineStyle="SOLID");continue}hP.hasOwnProperty(a)?(o.slider=o.slider||{},o.slider[hP[a]]=t[a]):o[a]=t[a],t.label&&(o.label=s4(t.label))}o.latex&&o.slider&&!o.slider.isPlaying&&l4(o,i),o.hasOwnProperty("fillOpacity")||(o.fillOpacity=.4),o.label===!1&&(o.label=""),o.labelSize||(o.labelSize="medium"),o.labelOrientation||(o.labelOrientation="default"),o.verticalLabel||(o.verticalLabel=!1),o.interactiveLabel||(o.interactiveLabel=!1);break;case"image":for(a in t)!t.hasOwnProperty(a)||a==="x"||a==="y"||(o[a]=t[a]);o.center="\\left("+(t.x||"0")+","+(t.y||"0")+"\\right)",o.angle=t.angle||"0",o.foreground=!!o.foreground;break;case"text":for(a in t)t.hasOwnProperty(a)&&(o[a]=t[a]);break;case"table":for(a in t)t.hasOwnProperty(a)&&(a==="columns"?o[a]=t[a].map(a4):o[a]=t[a]);break;default:throw new Error("Unexpected expression type: "+n)}if(o.id=""+o.id,t.type==="folder")e.folderId=o.id,e.memberIds=t.memberIds,o.folderId="";else{var l=r[o.id];e.memberIds&&e.memberIds[l]?o.folderId=e.folderId:(o.folderId="",e.folderId=void 0,e.memberIds=void 0)}return o}function d4(t){for(var e=0,r=/^[0-9]+$/,i=t.length-1;i>=0;i--){var n=t[i],o=n.id,a;if(r.test(o)&&(a=parseInt(o,10),a>e&&(e=a)),n.type==="table"&&n.columns)for(var s=n.columns.length-1;s>=0;s--)o=n.columns[s].id,r.test(o)&&(a=parseInt(o,10),a>e&&(e=a))}return e+1}function gP(t){if(t.version!==5)throw new Error("Unexpected version: "+t.version);var e=!!(t.graph&&t.graph.degreeMode),r=t.expressions.list,i=-1,n={},o={},a={};return{version:i4,graph:t.graph,expressions:{list:r.map(function(l){return n[l.id]?(i===-1&&(i=d4(r)),o[i]=l.id,l=__dcg_shared_module_exports__['M'](l),l.id=i+"",i+=1):o[l.id]=l.id,n[l.id]=!0,c4(l,a,o,e)})}}}function PD(t){if(t.version!==6)throw new Error(`Unexpected version: ${t.version}`);let e=t.expressions.list.map(r=>{if(r.type==="expression"&&r.domain){let i=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},r),{parametricDomain:{min:r.domain.min,max:r.domain.max}});return delete i.domain,i}return r});return{version:7,randomSeed:t.randomSeed,graph:t.graph,expressions:{list:e}}}function u4(t){return t.length===1?`0${t}`:t}function al(){let t=new Uint8Array(16);if(typeof crypto!="undefined")crypto.getRandomValues(t);else if(typeof msCrypto!="undefined")msCrypto.getRandomValues(t);else return __dcg_shared_module_exports__['bb'](Date.now().toString()+Math.random().toString());return Array.prototype.slice.call(t).map(r=>u4(r.toString(16))).join("")}function OD(t){let e=t.split("_");return e.length===2&&e[1]&&e[1].length===1?e[0]+"_{"+e[1]+"}":t}function fP(t){return t=__dcg_shared_module_exports__['M'](t),!t.rules&&(t.assignment||t.expression)&&(t.rules=[{id:"1",assignment:t.assignment||"",expression:t.expression||""}]),delete t.assignment,delete t.expression,t}function Uf(t){let e=/\\operatorname(?:\{stdev\}p|\{stddev\}p|\{stdDev\}P|\{var\}iance)/g;return t.replace(e,r=>{switch(r){case"\\operatorname{stdev}p":return"\\operatorname{stdevp}";case"\\operatorname{stddev}p":return"\\operatorname{stddevp}";case"\\operatorname{stdDev}P":return"\\operatorname{stdDevP}";case"\\operatorname{var}iance":return"\\operatorname{variance}";default:return""}})}function p4(t){return t.columns?__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t),{columns:t.columns.map(h4)}):t}function h4(t){let{latex:e,values:r}=t,i=__dcg_shared_module_exports__['b']({},t);return e&&(i.latex=Uf(e),i.latex=OD(i.latex)),r&&(i.values=r.map(function(n){return n?Uf(n):""})),i}function _D(t){if(t.version!==7)throw new Error(`Unexpected version: ${t.version}`);let e=t.expressions.list.map(r=>{if(r.type==="image"){let i=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},r),{opacity:""});r.hasOwnProperty("stringOpacity")?i.opacity=r.stringOpacity:r.hasOwnProperty("opacity")?i.opacity=r.opacity+"":delete i.opacity,r.clickableInfo&&(i.clickableInfo=fP(r.clickableInfo)),delete i.stringOpacity;for(let n in r)if(n==="x"||n==="y"||n==="width"||n==="height"){let o=r[n];o&&(i[n]=Uf(o))}return i}else if(r.type==="expression"){let i=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},r),{fillOpacity:"",lineStyle:"SOLID"});if(r.lineStyle==="SINGLE_PIXEL"?i.lineWidth="1":r.hasOwnProperty("lineStyle")?i.lineStyle=r.lineStyle:delete i.lineStyle,i.hasOwnProperty("lineWidth")||(i.lineWidth=""),i.hasOwnProperty("lineOpacity")||(i.lineOpacity=""),i.hasOwnProperty("pointOpacity")||(i.pointOpacity=""),i.hasOwnProperty("pointSize")||(i.pointSize=""),i.hasOwnProperty("colorLatex")||(i.colorLatex=""),typeof r.latex=="string"&&(i.latex=Uf(r.latex)),r.latex&&(i.latex=Uf(r.latex)),r.hasOwnProperty("stringFillOpacity")?i.fillOpacity=r.stringFillOpacity:r.hasOwnProperty("fillOpacity")?i.fillOpacity=r.fillOpacity+"":delete i.fillOpacity,i.slider&&r.slider&&r.slider.newLoopMode&&(i.slider=__dcg_shared_module_exports__['M'](i.slider),i.slider.loopMode=r.slider.newLoopMode,delete i.slider.newLoopMode),i.residualVariable&&(i.residualVariable=OD(i.residualVariable)),i.regressionParameters){i.regressionParameters={};for(let n in r.regressionParameters){let o=OD(n),a=r.regressionParameters[n];i.regressionParameters[o]=a}}return r.clickableInfo&&(i.clickableInfo=fP(r.clickableInfo)),i}else if(r.type==="table")return p4(r);return r});return{version:8,randomSeed:t.randomSeed||al(),graph:t.graph,expressions:{list:e}}}function g4(t,e,r){if(t.verticalLabel)switch(delete e.verticalLabel,r?e.labelAngle="90":e.labelAngle="\\frac{\\pi}{2}",t.labelOrientation){case"above":e.labelOrientation="right";break;case"below":e.labelOrientation="left";break;case"left":e.labelOrientation="above";break;case"right":e.labelOrientation="below";break}t.extendedLabelOrientation&&(e.labelOrientation=t.extendedLabelOrientation,delete e.extendedLabelOrientation)}function f4(t,e){if(t.vizProps)switch(t.vizProps.dotplotSize){case"small":e.pointSize="9";break;case"large":e.pointSize="20";break}if(t.vizProps){let r=__dcg_shared_module_exports__['b']({},t.vizProps);delete r.dotplotSize,Object.keys(r).length?e.vizProps=r:delete e.vizProps}}function FD(t){return t.filter(({assignment:e,expression:r})=>!!e&&!!r)}function RD(t){return t.map(({assignment:e,expression:r})=>`${e}\\to ${r}`).join(",")||""}function ND(t){let e=JSON.stringify(t),r=/_(\d)|_\{(\d+)\}/g,i,n={};for(;(i=r.exec(e))!==null;){let o=i[1]!==void 0?i[1]:i[2];n[o]=!0}return n}function BD(t,e){for(let r=e+1;;r++)if(!t[r])return r}function mP(t){let e=JSON.stringify(t),r=/"(\d+)"/g,i,n={};for(;(i=r.exec(e))!==null;){let o=i[1]!==void 0?i[1]:i[2];n[o]=!0}return n}function yP(t,e){for(let r=e+1;;r++)if(!t[r])return r}function m4(t){if(/^\d+$/.test(t)){let e=parseInt(t,10);return e===0?"\\infty":""+Math.round(1e3/e)}else return`\\frac{1000}{${t}}`}function y4(t,e){let r={handlerLatex:t,playing:!0,open:!0};return e!==void 0&&(r.minStepLatex=m4(e)),r}function KD(t){if(t.version!==8)throw new Error(`Unexpected version: ${t.version}`);var e=!1;t.graph&&t.graph.degreeMode&&(e=!0);let r=t.expressions.ticker||Lu,i=0,n,o=0,a,s=[];for(let u of t.expressions.list)switch(u.type){case"expression":{let h=__dcg_shared_module_exports__['b']({},u);g4(u,h,e),f4(u,h);let p;if(u.clickableInfo&&u.clickableInfo.rules){let l=u.clickableInfo,{rules:g}=l,w=__dcg_shared_module_exports__['e'](l,["rules"]),b=FD(g),D=RD(b);if(b.length>1){n||(n=ND(t)),i=BD(n,i),a||(a=mP(t)),o=yP(a,o);let I=`A_{${i}}`;w.latex=I,p={type:"expression",id:""+o,latex:`${I}=${D}`},u.folderId!==void 0&&(p.folderId=u.folderId)}else w.latex=D;h.clickableInfo=w}h.clickableInfo&&h.clickableInfo.enabled&&h.hidden&&(h.clickableInfo.enabled=!1),s.push(h),p&&s.push(p);break}case"image":{if(u.clickableInfo&&u.clickableInfo.rules){let h=__dcg_shared_module_exports__['b']({},u),c=u.clickableInfo,{rules:p}=c,y=__dcg_shared_module_exports__['e'](c,["rules"]),w=FD(p),b=RD(w),D;if(w.length>1){n||(n=ND(t)),i=BD(n,i),a||(a=mP(t)),o=yP(a,o);let I=`A_{${i}}`;y.latex=I,D={type:"expression",id:""+o,latex:`${I}=${b}`},u.folderId!==void 0&&(D.folderId=u.folderId)}else y.latex=b;h.clickableInfo=y,s.push(h),D&&s.push(D)}else s.push(u);break}case"simulation":{let h;if(u.clickableInfo&&u.clickableInfo.rules){let g=FD(u.clickableInfo.rules);h=RD(g)}else h="";if(u.isPlaying&&h!==""){n||(n=ND(t)),i=BD(n,i);let g=`A_{${i}}`;h=`${g}=${h}`,r=y4(g,u.fps)}let p={type:"expression",id:u.id,latex:h};u.folderId!==void 0&&(p.folderId=u.folderId),s.push(p);break}default:s.push(u);break}return{version:9,randomSeed:t.randomSeed||al(),graph:t.graph,expressions:{list:s,ticker:r}}}function bP(t){t.clickableInfo&&(t.description===void 0&&t.clickableInfo.description!==void 0&&(t.description=t.clickableInfo.description),delete t.clickableInfo.description,Object.keys(t.clickableInfo).length===0&&delete t.clickableInfo)}function b4(t){switch(t.labelSize){case"small":t.labelSize="0.85";break;case"medium":t.labelSize="1";break;case"large":t.labelSize="1.35";break;default:break}}function x4(t){let e=0,r=/^[0-9]+$/;for(var i=t.length-1;i>=0;i--){var n=t[i];let o=n.id;if(r.test(o)){let a=parseInt(o,10);a>e&&(e=a)}if(n.type==="table"&&n.columns){for(let a=n.columns.length-1;a>=0;a--)if(o=n.columns[a].id,!!o&&r.test(o)){let s=parseInt(o,10);s>e&&(e=s)}}}return e}function UD(t){if(t.version!==9)throw new Error(`Unexpected version: ${t.version}`);let e=[],r={},i=x4(t.expressions.list);for(let o of t.expressions.list)switch(o.type){case"expression":{let l=__dcg_shared_module_exports__['b']({},o);bP(l),b4(l),e.push(l);break}case"image":{let l=__dcg_shared_module_exports__['b']({},o);bP(l);let c=l.description;(c===void 0||c==="")&&l.draggable&&l.center!==void 0&&l.center!==""&&(r[l.center]===void 0?r[l.center]=[l]:r[l.center].push(l)),e.push(l);break}case"table":let a=__dcg_shared_module_exports__['b']({},o);if(!a.columns||!Qs(a.columns[0].latex)){e.push(a);break}let s=a.columns[0].latex;for(let l=1;l<a.columns.length;l++){let c=a.columns[l];if(!c.lines||!kl(c.latex,s))continue;delete c.lines,i++;let u={type:"expression",latex:"y="+Rb(c.latex,s,"x"),id:`${i}`};c.color&&(u.color=c.color),c.lineStyle&&(u.lineStyle=c.lineStyle),c.lineWidth&&(u.lineWidth=c.lineWidth),c.lineOpacity&&(u.lineOpacity=c.lineOpacity),e.push(u)}e.push(a);break;default:e.push(o);break}for(let o of e){if(o.type!=="expression"||o.latex===void 0||o.latex===""||o.latex.indexOf("=")===-1||o.dragMode===void 0||o.dragMode==="NONE"||o.label===void 0||o.label==="")continue;let a=o.latex.slice(0,o.latex.indexOf("=")),s=r[a];if(s!==void 0)for(let l of s)l.description=o.label}return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t),{version:10,expressions:__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t.expressions),{list:e})})}function qD(t){if(t.version!==10)throw new Error(`Unexpected version: ${t.version}`);let e=__dcg_shared_module_exports__['b']({},t.graph);return delete e.projectorMode,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t),{version:11,graph:e})}function xP(t){return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t),{version:10})}var HD=[oP,aP,lP,cP,uP,pP,gP,PD,_D,KD,UD,qD];var sl=11;function bs(t){if(t.version>sl)return typeof console!="undefined"&&console.warn&&console.warn("Loading saved state with version "+t.version+" but last known version is "+sl+". States saved in a newer version of the calculator may not load correctly in an older version of the calculator."),Ow(t);if(t.hasOwnProperty("version")&&!HD[t.version])return typeof console!="undefined"&&console.warn&&console.warn("State has invalid version "+t.version+". If a version is present, it should be a non-negative integer less than or equal to "+sl+"."),Ow(t);for(t.hasOwnProperty("version")||(t=HD[0](t));t.version<sl;)t=HD[t.version+1](t);return Ow(t)}function w4(t){return xP(t)}function wP(t){return w4(bs(t))}var vP=t=>({value:"0",min:"0",max:t.degreeMode?"360":"2\\pi"}),C4={latex:void 0,polarDomainMin:void 0,polarDomainMax:void 0,parametricDomainMin:void 0,clickableInfoLatex:void 0,parametricDomainMax:void 0,colorLatex:void 0,tableColumnColorLatex:void 0,cdfMin:()=>({value:"0",min:"-10",max:"10"}),cdfMax:()=>({value:"0",min:"-10",max:"10"}),pointSize:()=>({value:9+"",min:"0",max:"10"}),tableColumnPointSize:()=>({value:9+"",min:"0",max:"10"}),labelAngle:vP,labelSize:()=>({value:"1",min:"0",max:"5"}),lineWidth:()=>({value:2.5+"",min:"0",max:"10"}),tableColumnLineWidth:()=>({value:2.5+"",min:"0",max:"10"}),fillOpacity:()=>({value:.4+"",min:"0",max:"1"}),lineOpacity:()=>({value:.9+"",min:"0",max:"1"}),tableColumnLineOpacity:()=>({value:.9+"",min:"0",max:"1"}),pointOpacity:()=>({value:.9+"",min:"0",max:"1"}),tableColumnPointOpacity:()=>({value:.9+"",min:"0",max:"1"}),sliderMin:void 0,sliderMax:void 0,sliderStep:void 0,residualVariable:void 0,tableHeader:void 0,tableCellValue:void 0,imageOpacity:()=>({value:"1",min:"0",max:"1"}),imageCenter:void 0,imageHeight:()=>({value:"10",min:"-10",max:"10"}),imageWidth:()=>({value:"10",min:"-10",max:"10"}),imageAngle:vP,tickerMinStep:()=>({value:"0",min:"0"}),tickerHandler:void 0},CP={rgb:{paramBounds:t=>({value:"0",min:"0",max:"255",step:"1"})},hsv:{paramBounds:t=>t===0?{value:"0",min:"0",max:"360",step:"1"}:{value:"0.5",min:"0",max:"1"}}};function EP(t,e,r){var i=t.map(function(a){return{location:a.location,parsed:__dcg_shared_module_exports__['Ub'](a.latex)}}),n={};for(let a of e)for(let s of i){var o=S4(a,s,r);o&&o.length&&(n[a]=o[0])}return n}function S4(t,{parsed:e,location:r},i){if(e.type==="Identifier"&&e._symbol===t){let o=C4[r];return o?[o(i)]:void 0}e.type==="Assignment"&&(e=e._expression);let n=[];switch(e.type){case"FunctionCall":{let o=e._symbol;if(CP.hasOwnProperty(o)){let a=CP[o];e.args.forEach(function(s,l){if(s.type==="Identifier"&&s._symbol===t){var c=a.paramBounds(l);c&&n.push(c)}})}break}default:return}return n}function Yi(t,e,r){let i=D4(t,e,r);ri(t,i)}function ri(t,e){if(t.focusLocation=e,!e||(e.type==="ticker"&&(t.getListModel().ticker.playing=!1,Dr(t.getListModel(),void 0)),e.type==="settings"||e.type==="generic-menu"||e.type==="editable-label"||e.type==="add-item-btn"||e.type==="add-expression-btn"||e.type==="add-note-btn"||e.type==="add-table-btn"||e.type==="add-folder-btn"||e.type==="add-ticker-btn"||e.type==="add-image-btn"||e.type==="edit-list-toggle"||e.type==="hide-expression-list-btn"||e.type==="show-expression-list-btn"||e.type==="zoom-restore-btn"||e.type==="search-expressions"||e.type==="replace-expressions"||e.type==="ticker"||e.type==="geo-token"||e.type==="geo-show-constructions-icon"||e.type==="geo-basic-tool"||e.type==="geo-basic-tool-dropdown"||e.type==="geo-basic-tool-menu-item"||e.type==="multi-select-more-icon"||e.type==="multi-select-transformations-icon"||e.type==="geo-header-back-link"||e.type==="multi-select-delete-icon"||e.type==="multi-select-show-hide-icon"||e.type==="new-transformation-number"||e.type==="label-points-icon"||e.type==="regression-output"||e.type==="graph-paper"))return;let r=t.getItemModel(e.id);if(e.type==="expression-menu"){Dr(t.getListModel(),void 0);return}else Dr(t.getListModel(),r);r&&r.type==="expression"&&zo(r,!1)}function D4(t,e,r){let i=t.getItemModel(e);if(!i)return;let n=t.isInEditListMode()||t.isItemReadonly(i.id);switch(i.type){case"expression":return{type:n?"readonly-expression":i.type,id:e};case"folder":case"text":return{type:i.type,id:e};case"table":{let a={row:1,column:0},s=!1;return r&&(r.location==="cell"?a={row:r.row,column:r.column}:r==="end"?a={row:Da(i),column:0}:r==="start"?a={row:0,column:0}:r==="container"&&(s=!0)),s?{type:"table-container",id:e}:{type:i.type,id:e,location:a}}case"image":return{type:i.type,id:e,location:"name"};default:return i}}function DP(t){var e=t.getSelectedItem();if(e&&e.type==="expression"&&!e.readonly){Yi(t,e.id);return}if(e&&e.type==="table"&&t.focusLocation&&!e.readonly)return;var r=t.getFirstFullyVisibleItem();let i=t.getListModel();for(;r&&(r.type!=="expression"||r.readonly);)r=dd(i,r.index);if(r){Yi(t,r.id);return}let n=t.createItemModel({type:"expression",id:t.generateId(),color:t.getNextColor()});ts(t.getListModel(),n),Yi(t,n.id)}function kP(t){let e=t.focusLocation;if(e&&!(e.type==="settings"||e.type==="generic-menu"||e.type==="editable-label"||e.type==="add-item-btn"||e.type==="add-expression-btn"||e.type==="add-note-btn"||e.type==="add-table-btn"||e.type==="add-ticker-btn"||e.type==="add-folder-btn"||e.type==="add-image-btn"||e.type==="edit-list-toggle"||e.type==="hide-expression-list-btn"||e.type==="show-expression-list-btn"||e.type==="zoom-restore-btn"||e.type==="search-expressions"||e.type==="replace-expressions"||e.type==="ticker"||e.type==="geo-token"||e.type==="geo-show-constructions-icon"||e.type==="geo-basic-tool"||e.type==="geo-basic-tool-dropdown"||e.type==="geo-basic-tool-menu-item"||e.type==="multi-select-more-icon"||e.type==="multi-select-transformations-icon"||e.type==="geo-header-back-link"||e.type==="multi-select-delete-icon"||e.type==="multi-select-show-hide-icon"||e.type==="new-transformation-number"||e.type==="label-points-icon"||e.type==="regression-output"||e.type==="graph-paper"))return t.getItemModel(e.id)}function Vp(t,e,r){ri(t,{type:"table",id:e,location:r})}function MP(t,e,r){var i=t.getItemModel(e);if(!i||i.type!=="table")return;let n=i;var o=so(n),a=o?o.row:-1,s=o?o.column:-1,l=n.columnModels,c=Da(n),u=l.length,h=(b,D)=>{b===-1?$D(t):b>c?zD(t):(D===-1?(D=u-1,b--):D===u&&(b++,D=0),Vp(t,e,{row:b,column:D}))},p=b=>{c>2&&rG(n,a-1),Vp(t,e,{row:b,column:s})},g=b=>{s===0||u<=2||(iG(n,s),Vp(t,e,{row:a,column:b}))};let y=!!n.columnModels[0].disabled;switch(r){case"Left":h(a,s-1);break;case"Right":h(a,s+1);break;case"Up":h(a-1,s);break;case"Down":h(a+1,s);break;case"Enter":if(a>=c)return YD(t);if(s>0||y)return h(a+1,s);if(a===c-1){let b=nG(n,a);kS(n,a);for(var w=0;w<b.length;w++)Dl(n,{row:a+1,column:w},b[w]);Vp(t,e,{row:a+1,column:s});return}kS(n,a),Vp(t,e,{row:a+1,column:s});break;case"Backspace":a===0?s===0?WD(t):s===u-1||s===1&&u===3?h(0,s-1):g(s-1):s!==0?h(a,s-1):a===c||y?h(a-1,s):p(a-1);break;case"Delete":a===0?s===0?jD(t):s<u-1&&g(s):a>=c||y||p(a);break}}function $D(t){var e=t.getSelectedItem();!e||t.inAudioTraceMode()||(!Hb(t.getListModel())&&t.getTickerOpen()&&ri(t,{type:"ticker",location:"handler"}),e=t.getSelectedItem(),!e)||Yi(t,e.id,"end")}function zD(t){var r;if(!t.inAudioTraceMode()){if(((r=t.getFocusLocation())==null?void 0:r.type)==="ticker"){let i=Ru(t.getListModel());if(i)return Yi(t,i.id,"start")}if(!$b(t.getListModel())&&!t.isInEditListMode()){let i=t.createItemModel({type:"expression",id:t.generateId(),color:t.getNextColor()});ts(t.getListModel(),i),Dr(t.getListModel(),i)}var e=t.getSelectedItem();e&&Yi(t,e.id,"start")}}function WD(t){if(t.isInEditListMode())return;var e=t.getSelectedItem();if(!e||t.getItemCount()===1&&e.type==="expression")return;var r=e.type==="text";let i=qo(e);if(i){let n=t.getNumberOfItemsInFolder(i.id);if(e.index===i.index+n){Eo(e,"");return}}if(JD(t,{moveSelection:!0}),r&&Ja&&El){Dr(t.getListModel(),void 0);return}e=t.getSelectedItem(),e&&Yi(t,e.id,"end")}function jD(t){if(!t.isInEditListMode()){var e=t.getSelectedItem();e&&(t.getItemCount()===1&&e.type==="expression"||(XD(t,{moveSelection:!0}),e=t.getSelectedItem(),e&&Yi(t,e.id,"start")))}}function YD(t){if(!t.isInEditListMode()){var e=t.getSelectedItem();if(e){if(e.type==="text"&&Ja&&El){Ur(),Dr(t.getListModel(),void 0);return}if(gg(e).length&&t.areSlidersEnabled())return t.createSlidersForItem(e.id,gg(e).concat(""));var r=t.createItemModel({type:"expression",id:t.generateId(),color:t.getNextColor()}),i=e.index+1;e.type==="folder"&&e.collapsed&&(i+=t.getNumberOfItemsInFolder(e.id)),ka(t.getListModel(),r,i),Dr(t.getListModel(),r),e.type==="folder"&&!e.collapsed?Eo(r,e.id):e.type!=="folder"&&e.folderId&&Eo(r,e.folderId),e=t.getSelectedItem(),e&&Yi(t,e.id)}}}function JD(t,{moveSelection:e}){let r=t.getSelectedItem(),i=t.getListModel();if(!r||r.readonly)return;let n=cd(i,r.index);if(t._removeExpressionSynchronously(r),e){if(!n){let o=Ru(i);o&&(n=o)}Dr(i,n)}else Dr(i,void 0)}function XD(t,{moveSelection:e}){let r=t.getSelectedItem(),i=t.getListModel();if(!r||r.readonly)return;let n=dd(i,r.index);if(t._removeExpressionSynchronously(r),e){if(!n){let o=Bb(i);o&&(n=o)}Dr(i,n)}else Dr(i,void 0)}function I4(t){switch(t){case"histogram":case"dotplot":return 12;case"boxplot":return 40}return 1/0}function M4(t){return t==="boxplot"||t==="dotplot"||t=="histogram"}function T4(t){return t==="boxplot"?3:.5}function G4(t,e){if(t.type==="dotplot"||t.type==="histogram"){let n=Math.max(1,t.xmax-t.xmin)*80/(t.binWidth?t.binWidth:1),o=.5*(e.screen.width-n)/n;return Math.max(.2,o)}return .5}function A4(t,e,r){t=__dcg_shared_module_exports__['M'](t);let i=1.2;return e&&t.xmax<0&&t.xmin<0&&t.xmax/(t.xmin-t.xmax)<i&&(t.xmax=0),e&&t.xmax>0&&t.xmin>0&&t.xmin/(t.xmax-t.xmin)<i&&(t.xmin=0),r&&t.ymax<0&&t.ymin<0&&t.ymax/(t.ymin-t.ymax)<i&&(t.ymax=0),r&&t.ymax>0&&t.ymin>0&&t.ymin/(t.ymax-t.ymin)<i&&(t.ymin=0),t}function V4(t,e,r,i){let n=t.type,o=G4(t,e),a=T4(n),s,l,c,u;if(t.xmin===t.xmax&&(r?(t.xmin-=.5,t.xmax+=.5):(t.xmin*=.5,t.xmax/=.5)),t.ymin===t.ymax&&(i?(t.ymin-=.5,t.ymax+=.5):(t.ymin*=.5,t.ymax/=.5)),r){let h=(t.xmax-t.xmin)*o;s=t.xmin-h,l=t.xmax+h}else{let h=__dcg_shared_module_exports__['a'](t.xmax/t.xmin,o);s=t.xmin/h,l=t.xmax*h}if(i){let h=(t.ymax-t.ymin)*a;c=t.ymin-h,u=t.ymax+h}else{let h=__dcg_shared_module_exports__['a'](t.ymax/t.ymin,a);c=t.ymin/h,u=t.ymax*h}if(M4(n)){let h=e.screen.height/e.screen.width,p=(l-s)*h;if(p>t.ymax-t.ymin&&p<I4(n)*(t.ymax-t.ymin)){let g=.5*(t.ymax+t.ymin);u=g+.5*p,c=g-.5*p}}return{xmin:s,xmax:l,ymin:c,ymax:u}}function TP(t,e){var r=Nw(t,e);if(!r)return!1;let{xAxisScale:i,yAxisScale:n}=e.settings;if(!Si.fromObject(r).isValid({xAxisScale:i,yAxisScale:n}))return!1;var a=e.mapx(r.xmin),s=e.mapx(r.xmax),l=e.mapy(r.ymin),c=e.mapy(r.ymax),u=10,h=Math.abs(a)<=u&&Math.abs(c)<=u&&Math.abs(s-e.screen.width)<=u&&Math.abs(l-e.screen.height)<=u;return!h}function Nw(t,e){let r=1/0,i=-1/0,n=1/0,o=-1/0,a=0,s=t.length,l=e.settings.xAxisScale==="linear",c=e.settings.yAxisScale==="linear";for(let u=0;u<s;u++){let h=A4(t[u],l,c);if(!isFinite(h.xmax-h.xmin)||!isFinite(h.ymax-h.ymin)){a+=1;continue}if(!l&&!(h.xmax>0&&h.xmin>0)||!c&&!(h.ymax>0&&h.ymin>0)){a+=1;continue}let p=V4(h,e,l,c);p.xmin<r&&(r=p.xmin),p.xmax>i&&(i=p.xmax),p.ymin<n&&(n=p.ymin),p.ymax>o&&(o=p.ymax)}if(a!==s)return{xmin:r,xmax:i,ymin:n,ymax:o}}function GP(t){switch(t){case"letters":return"capitalLetters";case"noQwertyLetters":return"noQwertyCapitalLetters";case"noQwertyCapitalLetters":return"noQwertyLetters";default:return"letters"}}function QD(t){return{keypadMinimized:!yT,keypadLayout:"mainNumbers",keypadFunctionsOpen:!1,graphSettingsOpen:!1,addExpressionOpen:!1,expressionsVisible:!!t.expressions,inEditListMode:!1,isFileDraggedOver:!1,expressionsHiddenTime:void 0}}var VP={xmin:"",xmax:"",xstep:"",ymin:"",ymax:"",ystep:""};function LP(t){return t in VP}function L4(t){let e=t.split("\xD7");return(e.length>1&&e[0]==="1"?e.slice(1):e).join("\\cdot")}function $f(t,e){let r=__dcg_shared_module_exports__['Ma'](t,e),i="";if(r.mantissa)i=L4(r.mantissa)+"^{"+r.superscript+"}";else{let n=r.string.split("/");n.length===2?n[0][0]==="-"?i="-\\frac{"+n[0].slice(1)+"}{"+n[1]+"}":i="\\frac{"+n[0]+"}{"+n[1]+"}":i=r.string}return i=i.replace(/π/,"\\pi"),i}function P4(t,e){let r=e.xAxisScale==="linear"?t.xmax-t.xmin:void 0,i=e.yAxisScale==="linear"?t.ymax-t.ymin:void 0;return{xmin:$f(t.xmin,r),xmax:$f(t.xmax,r),ymin:$f(t.ymin,i),ymax:$f(t.ymax,i)}}function AP(t,e){return t===0?"":$f(t,e)}function PP(t,e){return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},P4(t,e.scales)),{xstep:AP(e.steps.xAxisStep,t.xmax-t.xmin),ystep:AP(e.steps.yAxisStep,t.ymax-t.ymin)})}function ZD(){return{limitLatex:__dcg_shared_module_exports__['b']({},VP)}}at();xc();var _4={version:sl,randomSeed:"",graph:{viewport:{xmin:-10,ymin:-13.25,xmax:10,ymax:13.25}},expressions:{list:[{id:"1",type:"expression"}]}},Lp=_4;at();function OP(t){let e=[],r=t.getAllItemModels();for(let i of r){let n=t.getItemRootNodeById(i.id);n&&e.push(n)}return e}function F4(t){let e=t.getAllItemModels();for(let r=e.length-1;r>=0;r--){let i=e[r];if(i.dcgView)return i.id}}function _P(t,e){let r=OP(t),i=0,n=r.length-1;for(;i<=n;){let o=i+Math.floor((n-i)/2),a=r[o],s=a.getBoundingClientRect();if(s.top>e)n=o-1;else if(s.bottom<e)i=o+1;else return a}}function R4(t,e){let r=OP(t),i=0,n=r.length-1,o;for(;i<=n;){let a=i+Math.floor((n-i)/2),s=r[a];s.getBoundingClientRect().top>e?(n=a-1,o=s):i=a+1}return o}function FP(t,e){let r=jf(t);if(!r)return;if(e){let n=t.getItemRootNodeById(e);if(n){let o=n.getBoundingClientRect();if(o.height>0&&o.top<=r.top&&o.bottom>=r.top)return e}}let i=_P(t,r.top);return i?V(i).attr("expr-id"):ek(t)}function RP(t,e){let r=jf(t);if(!r)return;let i=F4(t);if(!i)return;if(e){let o=t.getItemRootNodeById(e);if(o){let a=o.getBoundingClientRect();if(a.height>0&&a.top<=r.bottom&&a.bottom>=r.bottom||e===i&&a.bottom<=r.bottom)return e}}let n=_P(t,r.bottom);return n&&V(n).attr("expr-id")||i}function ek(t){let e=jf(t);if(!e)return;let r=R4(t,e.top-2);if(r)return V(r).attr("expr-id")}function zf(t){return t.find$(".dcg-exppanel")[0]}function Wf(t){let e=zf(t);if(e)return V(e)}function jf(t){let e=zf(t);if(e)return e.getBoundingClientRect()}function NP(t){let e=zf(t);if(!e)return;let r=e.getBoundingClientRect(),i=e.scrollTop;return r.top-i}function BP(t){let e=t.find$(".dcg-expressionlist");if(e.length===1)return e.height()}function KP(t){let e=Wf(t);return e&&e.find(".dcg-drag-container").height()||0}at();var Yf=class{constructor(e){this.active=!1,this.controller=e;let r=Wf(e);r&&(this.$exppanel=r)}startDragging(e){this.active=!0,this.mouseY=e,this.setupEventListeners()}applyDrag(){let r=this.controller.getListModel().dragState;if(!r)return;this.scheduleUpdateScroll();let i=this.measureDOM(r);if(!i)return;let{floatingPreviewRect:n}=i,o=this.controller.getItemModel(r.firstItemId);if(!o)return;let a=o.index;for(let{id:y,rect:w}of i.visibleRects){if(y===o.id)continue;let b=this.controller.getItemModel(y);if(!b)return;if(b.index<o.index){if(n.top<w.top+w.height/2){a=b.index;break}}else n.bottom>w.top+w.height/2&&(a=b.index,b.type==="folder"&&b.collapsed&&(a+=this.controller.getNumberOfItemsInFolder(b.id)))}let s,l;a>o.index?(s=a,l=a+1):a<o.index?(s=a-1,l=a):(s=a-1,l=a+1);let c=this.controller.getItemModelByIndex(s),u=this.controller.getItemModelByIndex(l),h="",p="";c&&(c.type==="folder"?h=c.id:h=c.folderId),u&&(u.type==="folder"?p=u.id:p=u.folderId);let g="";return h&&(p===h?o.type==="folder"?a=o.index:g=h:o.type!=="folder"&&this.isPreviewTopContainedInFolder(i,h)&&(g=h)),{dragState:__dcg_shared_module_exports__['b']({},i.dragState),newIndex:a,folderId:g}}measureDOM(e){let r=NP(this.controller),i=BP(this.controller);if(r===void 0||i===void 0)return;let n=KP(this.controller),o=e.mouseY-e.grabOffset+2,a=o-r;a=Math.max(a,-n/2),a=Math.min(a,i-n);let s={top:o,bottom:o+n,height:n},l=this.controller.findFirstVisibleItem(),c=this.controller.findLastVisibleItem();if(!l||!c)return;let u=[];for(var h=l.index;h<=c.index;h++){let p=this.controller.getItemModelByIndex(h);if(!p)continue;let g=this.controller.getItemRootNodeById(p.id);if(g&&p.id!==e.firstItemId){let y=g.getBoundingClientRect();u.push({id:p.id,rect:y})}}if(u.length!==0)return{dragState:__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},e),{itemTop:a}),floatingPreviewRect:s,visibleRects:u}}isPreviewTopContainedInFolder(e,r){let{visibleRects:i,floatingPreviewRect:n}=e;for(let{id:o,rect:a}of i)if(a.top<=n.top&&a.bottom>=n.top){let s=this.controller.getItemModel(o);if(!s)return!1;if(s.type==="folder"&&s.id===r||s.type!=="folder"&&s.folderId===r)return!0}return!1}scheduleUpdateScroll(){this.updateScrollScheduled||(this.updateScrollScheduled=!0,requestAnimationFrame(()=>{this.updateScroll(),this.updateScrollScheduled=!1}))}stop(){this.active=!1,this.tearDownEventListeners(),this.controller.dispatch({type:"stop-dragdrop"})}setupEventListeners(){V(document).on("dcg-tapmove.dragdrop",e=>{this.mouseY=e.changedTouches[0].clientY,this.controller.dispatch({type:"update-dragdrop",mouseY:this.mouseY})}),V(document).on("dcg-tapend.dragdrop",e=>{this.stop(),e.handle("dragdrop")})}tearDownEventListeners(){V(document).off(".dragdrop")}updateScroll(){if(this.active){var e=this.$exppanel[0].getBoundingClientRect(),r=0;r=Math.min(r,this.mouseY-e.top),r=Math.max(r,this.mouseY-e.bottom+30),r=r*e.height/900,r&&this.$exppanel.scrollTop(this.$exppanel.scrollTop()+r)}}};var N4={loga:t=>{t.write("\\log_{}"),t.typedText("("),t.keystroke("Left"),t.keystroke("Down")},nthroot:t=>{t.write("\\sqrt[]{}"),t.keystroke("Left"),t.keystroke("Left")},ddx:t=>{t.write("\\frac{d}{dx}")},arcsin:t=>{t.write("sin^{-1}"),t.typedText("(")},arccos:t=>{t.write("cos^{-1}"),t.typedText("(")},arctan:t=>{t.write("tan^{-1}"),t.typedText("(")},arcsec:t=>{t.write("sec^{-1}"),t.typedText("(")},arccsc:t=>{t.write("csc^{-1}"),t.typedText("(")},arccot:t=>{t.write("cot^{-1}"),t.typedText("(")},"A^T":t=>{t.typedText("^T"),t.keystroke("Right")},"A^-1":t=>{t.typedText("^-1"),t.keystroke("Right")},"A^2":t=>{t.typedText("^2"),t.keystroke("Right")},"a^2":t=>{t.typedText("^2"),t.keystroke("Right")},"a^3":t=>{t.typedText("^3"),t.keystroke("Right")},"a/b":t=>{t.write("\\frac{}{}"),t.keystroke("Left")},integral:t=>{t.cmd("integral")}};function Pp(t,e){N4[e](t)}at();var xs=__dcg_shared_module_exports__['i'](Lc()),Bn=__dcg_shared_module_exports__['i'](ne());var Op=__dcg_shared_module_exports__['i'](ne());at();var{Input:B4}=Op.Components,Td=class extends Op.Class{init(){this.ASCIICharacters=` A1B'K2L@CIF/MSP"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=`,this.ASCIITable=[],this.HomeRowCharacters="FDSJKL",this.charCodes=[],this.sixKeyModel={keysDown:0,stickyKeysDown:0};let e;for(e=0;e<this.ASCIICharacters.length;e++)this.ASCIITable.push(this.ASCIICharacters.charCodeAt(e));for(e=0;e<this.HomeRowCharacters.length;e++)this.charCodes.push(this.HomeRowCharacters.charCodeAt(e))}template(){return Op.createElement(B4,{class:this.const("dcg-braille-input dcg-do-blur"),tabindex:()=>this.props.tabindex?this.props.tabindex():0,readonly:()=>this.props.isStatic()?"true":void 0,autocomplete:this.const("off"),autocorrect:this.const("off"),autocapitalize:this.const("off"),spellcheck:this.const("false"),onKeydown:this.bindFn(this.onKeydown),onKeyup:this.bindFn(this.onKeyup),onInput:this.bindFn(this.props.onInput),value:()=>this.props.value(),"aria-label":()=>this.props.ariaLabel()||Aa(""),didMount:this.bindFn(this.didMount),didUnmount:this.bindFn(this.props.didUnmount),placeholder:()=>this.props.placeholder?this.props.placeholder():"",size:()=>this.props.size&&this.props.size()})}didMount(e){this.rootNode=e,V(this.rootNode).on("focus",r=>{this.props.shouldFocus()||this.props.onFocusedChanged(!0,r.originalEvent||r)}).on("blur",r=>{this.props.shouldFocus()&&this.props.onFocusedChanged(!1,r.originalEvent||r)}),this.props.didMount(e),this.updateFocus()}didUpdate(){this.updateFocus()}updateFocus(){this.rootNode&&(this.props.shouldFocus()&&document.activeElement!==this.rootNode&&this.rootNode.focus(),!this.props.shouldFocus()&&document.activeElement===this.rootNode&&this.rootNode.blur())}onKeydown(e){let r=this.charCodes.indexOf(e.which);!this.props.isStatic()&&this.isSixKeyInput()&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&r!==-1?(this.sixKeyModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.sixKeyModel),{keysDown:this.addKey(this.sixKeyModel.keysDown,r),stickyKeysDown:this.addKey(this.sixKeyModel.stickyKeysDown,r)}),e.preventDefault()):this.props.onKeydown&&this.props.onKeydown(e)}onKeyup(e){let r=this.charCodes.indexOf(e.which),i=!1;return!this.props.isStatic()&&this.isSixKeyInput()&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&r!==-1?(this.sixKeyModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.sixKeyModel),{keysDown:this.removeKey(this.sixKeyModel.keysDown,r)}),this.sixKeyModel.keysDown===0&&(this.addCharacter(this.bitsToASCII(this.sixKeyModel.stickyKeysDown)),this.sixKeyModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.sixKeyModel),{stickyKeysDown:0}))):i=!0,i||e.preventDefault(),i}addKey(e,r){return e|1<<r}removeKey(e,r){return e&~(1<<r)}bitsToASCII(e){return String.fromCharCode(this.ASCIITable[e])}addCharacter(e){this.rootNode&&!this.props.isStatic()&&(this.rootNode.setRangeText(e,this.rootNode.selectionStart,this.rootNode.selectionEnd,"end"),this.props.onInput(this.rootNode.value))}isSixKeyInput(){return typeof this.props.sixKeyInput=="function"&&this.props.sixKeyInput()}};var{If:ik}=Bn.Components,Vi=class extends Bn.Class{init(){this.currentBrailleValue=this.getBrailleFromLatex(this.props.latex()),this.currentBrailleMode=this.props.mode(),this.hasTranslationError=!1,this.currentLatex=this.props.latex()}isFocused(){return this.brailleInput!==void 0&&document.activeElement==this.brailleInput}getBrailleShouldFocus(){return this.props.mode()!=="none"&&this.props.brailleShouldFocus&&this.props.brailleShouldFocus()}isStatic(){return!!this.props.isStatic&&this.props.isStatic()}isInline(){return!!this.props.isInline&&this.props.isInline()}hasError(){return!!this.props.hasError&&this.props.hasError()}willUpdate(){let e=this.currentLatex!==this.props.latex(),r=this.props.mode(),i=r!==this.currentBrailleMode&&r!=="none";this.isFocused()&&!e&&!i||(this.currentLatex=this.props.latex(),(i||!this.hasTranslationError||e||this.isStatic())&&(this.currentBrailleValue=this.getBrailleFromLatex(this.props.latex()),this.hasTranslationError=!1),this.currentBrailleMode=r)}onBrailleInput(e){if(!this.props.onBrailleInput)return;let r=this.getLatexFromBraille(e);this.hasTranslationError=r.isError;let i=this.props.capExpressionSize&&this.props.capExpressionSize();if(!r.isError&&i&&i.exceedsLimit(r.value)){i.onExpressionSizeExceeded();return}this.currentBrailleValue=e,r.isError||(this.currentLatex=r.value,this.props.onBrailleInput(r.value))}getBrailleFromLatex(e,r=!1){let i=K4(e,this.props.mode());return i.isError?"":r?i.value:xs.UnicodeBraille.toExpandedBrailleAscii(i.value)}getLatexFromBraille(e){return U4(xs.UnicodeBraille.coerceToSixDotCells(e),this.props.mode())}getBrailleLabel(e){return this.getBrailleFromLatex(e.replace(/\s/,"\\ "))}shouldShowBraille(){let e=this.props.mode();return e==="nemeth"||e==="ueb"}isOverflowingLeft(){return this.brailleInput?this.brailleInput.scrollLeft>0:!1}isOverflowingRight(){if(!this.brailleInput)return!1;let e=this.brailleInput.getBoundingClientRect().width,r=this.brailleInput.scrollWidth,i=this.brailleInput.scrollLeft;return r>e+i+2}didMountBrailleInput(e){this.brailleInput=e}didUnmountBrailleInput(){this.brailleInput=void 0}getTooltipGravity(){let e=this.props.tooltipOptions&&this.props.tooltipOptions();return e&&e.gravity?e.gravity:"se"}getTooltipDelay(){let e=this.props.tooltipOptions&&this.props.tooltipOptions();return e&&e.delay?e.delay:0}handleBrailleFocusChanged(e,r){this.props.onBrailleFocusedChanged&&this.props.onBrailleFocusedChanged(e,r),this.brailleInput&&(e&&this.props.selectOnFocus&&this.props.selectOnFocus()&&this.brailleInput.select(),this.isStatic()&&this.brailleInput.scrollTo(0,0))}getTooltipText(){let e=this.props.placeholder&&!this.isFocused()?this.props.placeholder():"";return Aa(this.props.latex()||e)}template(){return Bn.createElement("div",{class:Bn.const("dcg-mathquill-wrapper")},Bn.createElement(ik,{predicate:()=>this.shouldShowBraille()},()=>Bn.createElement("div",{class:()=>({"dcg-mathquill-braille":!0,"dcg-focus":this.getBrailleShouldFocus(),"dcg-invalid":this.hasError(),"dcg-mathquill-static-braille":this.isStatic(),"dcg-mathquill-braille-overflow-left":this.isOverflowingLeft(),"dcg-mathquill-braille-overflow-right":this.isOverflowingRight()}),"data-dcg-label":()=>this.props.dataLabelAttributeValue?this.props.dataLabelAttributeValue():void 0},Bn.createElement(Ue,{class:this.const("dcg-mathquill-braille-tooltip"),renderAsLatex:()=>({view:this.props.tooltipOptions().latexView}),tooltip:()=>this.getTooltipText(),gravity:this.bindFn(this.getTooltipGravity),delay:this.bindFn(this.getTooltipDelay),showOnTapstart:this.const(!0)},Bn.createElement(ik,{predicate:()=>this.isInline()},()=>Bn.createElement("span",{class:Bn.const("dcg-inline-braille")},()=>Aa(this.getBrailleFromLatex(this.props.latex(),!0)))),Bn.createElement(ik,{predicate:()=>!this.isInline()},()=>Bn.createElement(Td,{ariaLabel:()=>Aa(this.props.ariaLabel?this.getBrailleLabel(this.props.ariaLabel()):""),didMount:this.bindFn(this.didMountBrailleInput),didUnmount:this.bindFn(this.didUnmountBrailleInput),onFocusedChanged:this.bindFn(this.handleBrailleFocusChanged),shouldFocus:this.bindFn(this.getBrailleShouldFocus),onKeydown:this.props.onBrailleKeydown,onInput:this.bindFn(this.onBrailleInput),sixKeyInput:this.props.sixKeyInput,value:()=>this.currentBrailleValue,placeholder:()=>Aa(this.props.placeholder?this.getBrailleFromLatex(this.props.placeholder()):""),tabindex:()=>this.props.tabindex?this.props.tabindex():0,isStatic:this.bindFn(this.isStatic),size:()=>this.currentBrailleValue&&this.currentBrailleValue.length||1}))))),Bn.createElement("div",{class:Bn.const("dcg-typeset-math"),style:()=>({display:this.shouldShowBraille()&&!this.isInline()?"none":void 0}),"aria-hidden":()=>this.shouldShowBraille()},this.children))}};function ko(){if(!(!document.activeElement||!V(document.activeElement).hasClass("dcg-braille-input")))return document.activeElement}function _p(t){return!t||V(t).val()===""}function K4(t,e){return e==="nemeth"?xs.latexToNemeth(t):e==="ueb"?xs.latexToUeb(t):{isError:!0,error:"Braille mode should be 'nemeth' or 'ueb'"}}function U4(t,e){return e==="nemeth"?xs.nemethToLatex(t):e==="ueb"?xs.uebToLatex(t):{isError:!0,error:"Braille mode should be 'nemeth' or 'ueb'"}}function Fp(t){switch(t){case"reflection":case"translation":case"rotation":case"dilation":case"scaled-rotation":return!0}return!1}function q4(t){for(let e in t)return!1;return!0}function H4(t){var i;if(t.type!=="expression")return;let e=t.formula.assignment;return e||((i=t.formula.geometry)==null?void 0:i.identifier)}function $4(t){var r,i;let e={lookupIdentifier:{},lookupCalcId:{}};for(let n of t){let o={calcId:n.id,identifier:H4(n),referencesTheseIdentifiers:{},referencedByTheseCalcIds:{}};e.lookupCalcId[o.calcId]=o,o.identifier&&(e.lookupIdentifier[o.identifier]=o)}for(let n of t){let o=e.lookupCalcId[n.id];if(o){if(n.type==="expression"){n.folderId===__dcg_shared_module_exports__['uc']&&(o.isGarbageCollectable=!n.readonly,(n.latex.indexOf("\\operatorname{segments}")!==-1||Ma(n))&&(o.deleteIfNotReferenced=!0));let a=(i=(r=n.formula.geometry)==null?void 0:r.call)==null?void 0:i.parents;a&&a.forEach(s=>{if(!s)return;let l=s[0];UP(e,o,l)})}Ou(n,a=>{var s=a.match(/(\\token{[0-9]+})/g);if(s)for(let l of s){let c=__dcg_shared_module_exports__['Va'](l);c!==o.identifier&&UP(e,o,c)}})}}return e}function UP(t,e,r){e.referencesTheseIdentifiers[r]=!0;let i=t.lookupIdentifier[r];i&&(i.referencedByTheseCalcIds[e.calcId]=!0)}function z4(t,e){var l;let r=[];for(let c of e){let u=t.lookupCalcId[c];if(u){r.push(u);var i=u.referencesTheseIdentifiers;for(let h in i){let p=t.lookupIdentifier[h];p&&delete p.referencedByTheseCalcIds[u.calcId]}}}var n={},o={};for(let c of r){let u=c.referencesTheseIdentifiers;for(let p in u)n[p]=!0;let h=c.identifier;if(h){var a=(l=t.lookupIdentifier[h])==null?void 0:l.referencedByTheseCalcIds;if(a)for(let p in a){let g=t.lookupCalcId[p];g&&g.isGarbageCollectable&&(o[p]=!0)}}}for(let c in n){let u=t.lookupIdentifier[c];if(u&&u.deleteIfNotReferenced){var s=u.referencedByTheseCalcIds;u.calcId&&u.isGarbageCollectable&&q4(s)&&(o[u.calcId]=!0)}}for(let c of r)delete t.lookupCalcId[c.calcId],c.identifier&&delete t.lookupIdentifier[c.identifier];return Object.keys(o)}function qP(t,e){let r=t.getAllItemModels(),i=e.map(a=>a.id),n=$4(r.concat(e));for(var o={};i.length;){i=z4(n,i);for(let a of i)o[a]=!0}return Object.keys(o)}var Rp={version:sl,randomSeed:"",graph:{viewport:{xmin:-10,ymin:-13.25,xmax:10,ymax:13.25},product:"geometry-calculator",showXAxis:!1,showYAxis:!1,degreeMode:!0},expressions:{list:[{type:"folder",id:__dcg_shared_module_exports__['uc'],title:"geometry",secret:!0},{id:"1",type:"expression"}]}};function Jf(t){return/^\s*https?:\/\/([-a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/calculator\/./.test(t)}function HP(t){return/^\s*https?:\/\/([-a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/geometry-beta\/./.test(t)}function Bw(t){return/^\s*https?:\/\/([-a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/geometry\/./.test(t)}Us();function $P(t){var e;switch(t.type){case"tick":return!1;case"tick-ticker":return!1;case"on-evaluator-changes":return!!((e=t.eventUpdates)!=null&&e.userAction);default:return!0}}var Gd=class{constructor(e){this.__nextItemId=0;this.__pendingImageUploads={};this.__lastSelectedIdsForPropagation={};this.nextSubscription=0;this.subscriptions={};this._queuedCallbacks=[];this._hasUnsavedChanges=!1;this.shouldScrollSelectedItemIntoViewAfterDispatch=!1;this.lastParsableObjects={};this.isExpressionSearchStrValidForReplace=!1;this.isExpressionReplaceStrValidForReplace=!1;this.expressionSearchCount=0;this.expressionSearchOpen=!1;this.geoUIActive=!1;this.showConstructionsOpen=!1;this.activeTool="selection";this.activeTokens={selected:void 0,hovered:void 0};this.geoTools=[{key:"selection",objects:"",dropdown:["selection","box-selection"],resetOnChange:["box-selection"]},{key:"point",objects:"",dropdown:["point","midpoint"],resetOnChange:["midpoint"]},{key:"segment",objects:"",dropdown:["segment","line","ray","parallel","perpendicular"],resetOnChange:["parallel","perpendicular"]},{key:"circle",objects:"",dropdown:["circle","compass","arc"],resetOnChange:["compass","arc"]},{key:"angle",dropdown:["angle","directedangle"],objects:""},{key:"polygon",objects:""}];this.apiMethodCallStack=[];this.canShowKeyboardShortcuts=!1;this.toastData={};this.s=Pl(()=>this.graphSettings.config.language);this.raw=(e,r)=>Aa(e,r);this.hasTranslation=e=>{let r=this.graphSettings.config.language;return ME(e,r)};this.unpack=e=>{let r=this.graphSettings.config.language;return cp(e,r)};this.dispatch=e=>{if(e.type==="blur-focus-location"&&this.dispatcher.isDispatching()){this.runAfterDispatch(()=>{this.dispatch(e)});return}if(e.type==="set-focus-location"&&this.dispatcher.isDispatching()){this.runAfterDispatch(()=>{this.dispatch(e)});return}if(e.type==="tick"&&this.dispatcher.isDispatching()){this.runAfterDispatch(()=>{this.dispatch(e)});return}e.type==="tick"||ig("dispatch::"+this.bugsnagContext,{type:e.type}),this.dispatcher.isDispatching()&&ig("dispatch-in-dispatch::"+this.bugsnagContext,{type:e.type}),this.dispatcher.dispatch(e),this.onEventsEmitted&&this.onEventsEmitted(this.enqueuedEvents);let r;for(;r=this._queuedCallbacks.shift();)r()};this._requiresTickNextFrame=!1;this.cachedGeoTokenDepths={};this.cachedGeoTokenGroups={};this.cachedGeoTokenInfo={};this.toolPreviewJSONState={};this.updateViews=()=>{for(var e in this.subscriptions)this.subscriptions[e]()};this.bugsnagContext="";this.inPrintMode=!1;this.lastInfiniteScrollFirstDOM=void 0;this.lastInfiniteScrollLastDOM=void 0;this.hasDispatchSinceLastInfiniteScrollUpdate=!1;this.stateStack=new $l;this.isCurrentlyDoingSetState=!1;this.isCurrentlyDoingRestoreState=!1;var r,i;this.graphSettings=e,(i=(r=this.graphSettings).setController)==null||i.call(r,this),this.listModel=fA(this),this.layoutModel=QD(this.graphSettings.config),this.layoutMeasurements={width:0,height:0},this.settingsViewModel=ZD(),this.imageRetryState={lastAttemptTime:0,attempts:0},this.makeGeoAPI(),this.setupDispatcher()}hasUnsavedChanges(){return this._hasUnsavedChanges}getExpressionSearchOpen(){return this.expressionSearchOpen}getShowConstructionsOpen(){return this.showConstructionsOpen}isGeoUIActive(){return this.geoUIActive}isGeoToolActive(){return this.activeTool!=="selection"&&this.activeTool!=="box-selection"}getActiveTool(){return this.activeTool}getGeoModel(){return this.geoModel}getGeoTools(){return this.geoTools}getTickerOpen(){return this.areActionsEnabled()?this.listModel.ticker.open:!1}getTickerPlaying(){return this.areActionsEnabled()?this.listModel.ticker.playing:!1}hasVisibleAndUndoableToast(){return typeof this.toastData.undoCallback=="function"}getToastData(){return this.toastData}toastUndo(){typeof this.toastData.undoCallback=="function"&&(this.toastData.undoCallback(),this.dispatch({type:"toast/close"}))}runAfterDispatch(e){this.dispatcher.isDispatching()?this._queuedCallbacks.push(e):e()}enqueueEvent(e,r){var n;let i=r&&this.apiMethodCallStack.length===0&&$P(r)||!!((n=this.enqueuedEvents[e])!=null&&n.isUserInitiated)||e==="userMovedPoint";this.enqueuedEvents[e]={isUserInitiated:i}}pushAPIMethodCall(){this.apiMethodCallStack.push(!0)}popAPIMethodCall(){this.apiMethodCallStack.pop()}getGrapherDimensions(){if(!this.grapher)return{width:0,height:0};let{screen:e}=this.grapher.getProjection();return{width:e.width,height:e.height}}setRandomSeed(e){this.graphSettings.setProperty("randomSeed",e)}getRandomSeed(){return this.graphSettings.randomSeed}shouldDispatchTickNextFrame(){return!!this._requiresTickNextFrame}markTickRequiredNextFrame(){this._requiresTickNextFrame=!0}handleTick(e){var r;this.areActionsEnabled()&&aA(this.listModel.ticker,{currentFrameTime:e,previousFrameTime:this.lastFrameTime})?this.dispatch({type:"tick-ticker",time:e}):this.shouldDispatchTickNextFrame()&&this.dispatch({type:"tick",time:e}),this.getGeoModel().isFading()&&((r=this.grapher)==null||r.redrawAllLayers()),this.lastFrameTime=e}setupDispatcher(){this.dispatcher=new Rc,this.dispatcher.register(e=>{let r=this.getSelectedItem(),i=this.getFocusLocation();this.shouldScrollSelectedItemIntoViewAfterDispatch=!1;let n;this.enqueuedEvents={change:void 0,graphReset:void 0,clearUnsavedChanges:void 0,openDrawer:void 0,showHotkeysModal:void 0,userMovedPoint:void 0,userClickedObject:void 0,userEditedLabel:void 0},e.type==="tick"&&(this._requiresTickNextFrame=!1),this.isCurrentlyDoingSetState=!1,this.isCurrentlyDoingRestoreState=!1,this.handleDispatchedAction(e),this.constrainMultiSelect(),this.updateTheComputedWorld();var o=this.getImageToRetry();(this.getPlayingSliders().length>0||this.isDragDropActive()||o)&&this.markTickRequiredNextFrame(),o&&this.retryLoadingFailedImage(o),e.type!=="undo"&&e.type!=="redo"&&!this.isDragDropActive()&&this.commitUndoRedoSynchronously(e),this.requestParseForAllItems(),this.isCurrentlyDoingSetState=!1,this.isCurrentlyDoingRestoreState=!1,this.enqueuedEvents.change&&this.grapher&&this.grapher.markLabelsDirty(),this.enqueuedEvents.clearUnsavedChanges?this._hasUnsavedChanges=!1:this.enqueuedEvents.change&&(this._hasUnsavedChanges=!0);let a=this.getSelectedItem();a?(!r||r.guid!==a.guid)&&(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0):this.shouldScrollSelectedItemIntoViewAfterDispatch=!1;let s=this.getFocusLocation();s&&!__dcg_shared_module_exports__['E'](s,i)&&this.getFocusedItem()==a&&(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0),i&&r&&r.type==="table"&&i.type==="table"&&(!s||s.type!=="table"||i.id!==s.id)&&r.isExpanded&&(Tu(r,!1),s||(n=r)),s&&a&&a.type==="table"&&$0(a),(e.type==="adjust-slider-by-dragging-thumb"||e.type==="adjust-slider-by-keyboard")&&(n=this.getItemModel(e.id)),this.updateRenderShellsBeforePaint(),this.updateViews(),n?this.scrollItemIntoView(n):this.shouldScrollSelectedItemIntoViewAfterDispatch&&this.scrollSelectedItemIntoView(),this.updateDragDrop(),this.updateRenderShellsAfterDispatch()})}handleDispatchedAction(e){var p,g,y,w;switch(e.type){case"render":break;case"undo":this.undo();break;case"redo":this.redo();break;case"clear-undoredo-history":this.clearUndoRedoHistory();break;case"on-special-key-pressed":e.key==="Enter"?YD(this):e.key==="Up"?$D(this):e.key==="Down"?zD(this):e.key==="Backspace"?WD(this):e.key==="Delete"&&jD(this);break;case"select-previous-expression":Hb(this.listModel);break;case"select-next-expression":$b(this.listModel);break;case"toggle-label-for-all-selected-points":this.toggleLabelForAllSelectedObjects();break;case"update-all-selected-items":{let x=e.update;if(e.update.prop==="folderId"){let L;if(e.update.createFolder){L=this.generateId();let A=this.createItemModel({type:"folder",id:L,title:e.update.value}),$=this.getItemCount()-1,J=Fu(this.listModel,$);J&&J.type==="expression"&&J.latex===""?this._toplevelReplaceItemAt(this.getItemCount()-1,A,!1):ts(this.listModel,A)}else L=e.update.value;let R=this.getItemModel(L);if(!R||R.type!=="folder")return;let q={},K={};this.getAllSelectedItems().forEach(A=>{var $;if(!(A.type==="folder"||A.folderId===L)&&(q[A.id]=A,A.type==="expression")){let J=($=A.formula.geometry)==null?void 0:$.call;if(J&&J.symbol==="apply"){let ue=J.parents[0]&&J.parents[0][0];ue&&(K[ue]=!0)}}});for(let A in K){let $=qu(this.listModel,A);$.length===1&&$[0].folderId!==L&&(q[$[0].id]=$[0])}let Y={},N=[];for(let A in q){let $=q[A];N.push($)}N.forEach(A=>{if(A.type==="expression"){let $=tE(A.latex);$&&(Y[A.id]=$)}}),N.sort((A,$)=>A.index-$.index);let j=this.findLastSubscriptForLetters();N.forEach(A=>{if(A.type==="expression"){var $=Y[A.id];if($){var J=Vg(A)[0].toUpperCase(),ue=(j[J]||0)+1;j[J]=ue,Uu(this.listModel,$,J+"_{"+ue+"}")}}}),N.forEach(A=>{Wu(this.listModel,A.id)});let B=R.index+this.getNumberOfItemsInFolder(L)+1;N.forEach(A=>{ka(this.listModel,A,B),B+=1}),N.forEach(A=>{Eo(A,L)})}else if(x.prop==="visible")this.getAllSelectedItems().forEach(L=>{this._setItemHidden(L.id,!x.value),x.value===!1&&L.type==="expression"&&hd(L,!1)});else if(e.update.prop==="color"){let L=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&sx(R,L)})}else if(e.update.prop==="colorLatex"){let L=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&Dg(R,L)})}else if(e.update.prop==="showLabel"){let L=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&hd(R,L)})}else if(e.update.prop==="label"){let L=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&Ml(R,L)})}else if(e.update.prop==="dragMode"){let L=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&gd(R,L)})}else if(e.update.prop==="lineWidth"){let L=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&Yu(R,L)})}else if(e.update.prop==="lineOpacity"){let L=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&ju(R,L)})}else if(e.update.prop==="lineStyle"){let L=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&lx(R,L)})}else if(e.update.prop==="strictIntersection"){let L=e.update.value;this.getAllSelectedItems().forEach(R=>{R.type==="expression"&&kV(R,L)})}}break;case"delete-all-selected-items":let b=qS(this.listModel,Object.keys(this.getSelectedExpressionIds()));this.garbageCollectGeo(b),ge(this.s("graphing-calculator-narration-items-deleted",{count:new Wo(b.length)}));break;case"upward-delete-selected-expression":JD(this,{moveSelection:!1});break;case"downward-delete-selected-expression":XD(this,{moveSelection:!1});break;case"table-show-more-rows":{let x=this.getItemModel(e.id);if(!x||x.type!=="table")return;let L=ld(x);if(!L)return;Dr(this.listModel,x),Tu(x,!0),ri(this,{type:"table",id:x.id,location:{row:L.min,column:0}})}break;case"navigate-table-by-key":MP(this,e.id,e.key);break;case"delete-item-and-animate-out":this._deleteItemAndAnimateOut(e.id,e.setFocusAfterDelete);break;case"finish-deleting-item-after-animation":this._finishDeletingItemAfterAnimation(e.id,e.setFocusAfterDelete);break;case"expression-zoom-fit":this._expressionZoomFit(e.id,e.focusAfterTap);break;case"set-expression-properties-from-api":this._setExpressionPropertiesFromAPI(e.id,e.properties);break;case"add-item-to-end-from-api":this._addItemToEndFromAPI(this.createItemModel(e.state));break;case"duplicate-expression":{let x=this.getItemModel(e.id);if(!x||x.type==="folder")return;this.copyExpressionToIndex(x,x.index+1)}break;case"duplicate-folder":{let{id:x}=e,L=this.getItemModel(x);if(!L||L.type!=="folder")return;let R=this.createItemModel(__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},pb(L,{stripDefaults:!1})),{id:this.generateId()})),q=this.getNumberOfItemsInFolder(x),K=q+1;this._toplevelInsertItemAt(L.index+K,R,!1,void 0);let Y=L.index+1,N=Y+q;for(let j=Y;j<=N;j++){let B=Fu(this.listModel,j);if(!B||B.type==="folder")return;this.copyExpressionToIndex(B,j+K,R.id)}}break;case"insert-item-at-index":{let x=this.createItemModel(e.state);this._toplevelInsertItemAt(e.index,x,e.focus,e.folderId)}break;case"new-expression-at-end":{this.setGeoTool("selection");let x=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});this.setEditListMode(!1),ts(this.listModel,x),Yi(this,x.id)}break;case"new-expression":{let x=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});this.setEditListMode(!1),this._toplevelNewItemAtSelection(x,{shouldFocus:!0}),this._closeAddExpression()}break;case"new-text":{let x=this.createItemModel({id:this.generateId(),type:"text"});this._toplevelNewItemAtSelection(x,{shouldFocus:!0}),this._closeAddExpression()}break;case"new-folder":{let x=this.createItemModel({type:"folder",id:this.generateId()});this._toplevelNewItemAtSelection(x,{shouldFocus:!0}),this._closeAddExpression()}break;case"new-images":this._uploadImagesAndWaitForThemToLoad({files:e.files}),this._closeAddExpression();break;case"change-image":this._uploadImagesAndWaitForThemToLoad({files:e.files,id:e.id});break;case"new-table":{let x=this._createTableItem();this._toplevelNewItemAtSelection(x,{shouldFocus:!0}),this._closeAddExpression()}break;case"paste-table":this._pasteTable(e.data);break;case"insert-several-expressions":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,this._insertSeveralExpressions(e.expressions);break;case"append-number-list":this._appendNumberList(e.latex);break;case"remove-item-by-id":Wu(this.listModel,e.id);break;case"replace-item-at-index":{let x=this.createItemModel(e.state);this._toplevelReplaceItemAt(e.index,x,e.focus)}break;case"create-sliders-for-item":this.createSlidersForItem(e.id,e.variables);break;case"create-sliders-for-ticker":this.createSlidersForTicker(e.variables);break;case"convert-image-to-draggable":this.convertImageToDraggable(e.id);break;case"start-dragdrop":{let x=this.getItemModel(e.id);if(!x)return;let L=this.getItemRootNodeById(x.id);if(!L)return;let R=L.getBoundingClientRect();Dr(this.listModel,void 0);let q=e.grabY-R.top,K=!1,Y=1;x.type==="folder"&&(Y+=this.getNumberOfItemsInFolder(x.id),x.collapsed||(K=!0,Iu(x,!0))),hg(this.listModel,{firstItemId:x.id,numberOfItems:Y,expandFolder:K,grabOffset:q,mouseY:e.mouseY,itemTop:0}),this.dragdrop_expressions.startDragging(e.mouseY)}break;case"update-dragdrop":{let x=this.listModel.dragState;if(!x)return;hg(this.listModel,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},x),{mouseY:e.mouseY}))}break;case"stop-dragdrop":{let x=this.listModel.dragState;if(!x)return;let L=this.getItemModel(x.firstItemId);if(!L)return;Dr(this.listModel,L),L.type==="folder"&&x.expandFolder&&Iu(L,!1),hg(this.listModel,void 0)}break;case"set-selected-id":{let x=this.getItemModel(e.id);Dr(this.listModel,x)}break;case"set-all-selected-ids":zS(this.listModel,e.ids);break;case"toggle-selected-with-multi-select":$S(this.listModel,e.id);break;case"set-selected-index":{let x=this.getItemModelByIndex(e.index);Dr(this.listModel,x)}break;case"set-none-selected":Dr(this.listModel,void 0);break;case"set-focus-location":{let x=e.location?e.location.type:"";if(x==="expression"&&this.setGeoTool("selection"),x==="table"&&(this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{inEditListMode:!1})),x==="graph-paper"){this.setGraphPaperFocus({isFocused:!0});break}ri(this,e.location)}break;case"focus-first-expression":{if(!this.getGraphSettings().config.expressions)return;let x=Ru(this.listModel);if(!x)break;Yi(this,x.id,"end");break}case"move-focus-to-item":Yi(this,e.id,e.where);break;case"blur-focus-location":this.isFocusLocationFocused(e.location)&&ri(this,void 0),((p=e.location)==null?void 0:p.type)==="graph-paper"&&this.setGraphPaperFocus({isFocused:!1});break;case"set-folder-collapsed":{let x=this.getItemModel(e.id);if(!x||x.type!=="folder")return;Iu(x,e.isCollapsed)}break;case"set-all-folders-collapsed":qA(this.listModel,e.isCollapsed);break;case"set-item-secret":{let x=this.getItemModel(e.id);if(!x)return;WS(x,e.isSecret)}break;case"set-item-readonly":{let{id:x,readonly:L}=e,R=this.getItemModel(x);if(!R)return;if(Zb(R,L),R.type==="folder")for(let q of wA(this.listModel,x))Zb(q,L)}break;case"set-tablecolumn-color":{let x=this.getItemModel(e.tableId);if(!x||x.type!=="table")return;gG(x,e.columnId,e.color)}break;case"set-tablecolumn-colorlatex":{let x=this.getItemModel(e.tableId);if(!x||x.type!=="table")return;Sb(x,e.columnId,e.colorLatex)}break;case"set-show-cdf":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;BV(x,e.showCDF)}break;case"set-cdf-min":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;Xb(x,e.latex)}break;case"set-cdf-max":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;Qb(x,e.latex)}break;case"toggle-item-hidden":this._toggleItemHidden(e.id);break;case"toggle-tablecolumn-hidden":this._toggleTableColumnHidden(e.tableId,e.columnId);break;case"toggle-item-settings-menu":this.isItemSettingsMenuOpen(e.menu.guid)?this.closeItemSettingsMenu():(this.listModel.openItemMenu=e.menu,e.menu.focusFirstOption&&(e.menu.type==="geo-tool-dropdown"?ri(this,{type:"geo-basic-tool-menu-item",tool:e.menu.tools[0]}):e.menu.type==="multi-select-more"||e.menu.type==="multi-select-transformations"?ri(this,{type:"generic-menu",where:"start"}):ri(this,{type:"expression-menu",id:e.menu.model.id,location:"start"})));break;case"close-item-settings-menu":this.closeItemSettingsMenu();break;case"toggle-fraction-evaluation":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;let L=Sc(x);xV(x,!L)}break;case"set-item-label":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;Ml(x,e.label),this.enqueueEvent("userEditedLabel",e)}break;case"set-item-showlabel":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;hd(x,e.showLabel),e.showLabel||(Pg(x,!1),dx(x,"NONE"))}break;case"set-item-color":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;sx(x,e.color)}break;case"set-item-description":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression"&&x.type!=="image")return;x.type==="expression"?wV(x,e.description):x.type==="image"&&RG(x,e.description)}break;case"set-item-fill":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;nE(x,e.fill),this._setItemHidden(x.id,ep(x))}break;case"set-image-opacity":{let x=this.getItemModel(e.id);if(!x||x.type!=="image")return;KG(x,e.opacity),this._setItemHidden(x.id,!1)}break;case"set-image-in-foreground":{let x=this.getItemModel(e.id);if(!x||x.type!=="image")return;LS(x,e.foreground)}break;case"image-upload-error":this.__pendingImageUploads[e.token]&&(delete this.__pendingImageUploads[e.token],this._showToast({message:this.s("graphing-calculator-text-toast-image-upload-failed")}));break;case"image-upload-success":{if(this.__pendingImageUploads[e.token])if(delete this.__pendingImageUploads[e.token],e.id){let x=this.getItemModel(e.id);x&&x.type==="image"&&UG(x,e.url)}else{let x=this.createItemModel({type:"image",id:this.generateId(),width:e.width,height:e.height,image_url:e.url,name:e.name});this._toplevelNewItemAtSelection(x,{shouldFocus:!1})}this.isUploadingImages()||(this.toastData={})}break;case"image-load-success":{let x=this.getItemModel(e.id);if(!x||x.type!=="image")return;Vb(x,"loaded"),this.imageRetryState={lastAttemptTime:0,attempts:0}}break;case"image-load-error":{let x=this.getItemModel(e.id);if(!x||x.type!=="image")return;Vb(x,"failed")}break;case"image-retry-loading":{let x=this.getItemModel(e.id);if(!x||x.type!=="image")return;OS(x)}break;case"set-item-dragmode":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;gd(x,e.dragMode)}break;case"set-tablecolumn-dragmode":{let x=this.getItemModel(e.tableId);if(!x||x.type!=="table")return;hG(x,e.columnId,e.dragMode),e.dragMode!=="NONE"&&this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-points":{let x=this.getItemModel(e.tableId);if(!x||x.type!=="table")return;TS(x,e.columnId,e.bool),this._setTableColumnHidden(e.tableId,e.columnId,Eb(x,e.columnId))}break;case"set-tablecolumn-lines":{let x=this.getItemModel(e.tableId);if(!x||x.type!=="table")return;uG(x,e.columnId,e.bool),this._setTableColumnHidden(e.tableId,e.columnId,Eb(x,e.columnId))}break;case"set-tablecolumn-linestyle":{let x=this.getItemModel(e.tableId);if(!x||x.type!=="table")return;pG(x,e.columnId,e.lineStyle),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-linewidth":{let x=this.getItemModel(e.tableId);if(!x||x.type!=="table")return;xb(x,e.columnId,e.lineWidth),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-lineopacity":{let x=this.getItemModel(e.tableId);if(!x||x.type!=="table")return;wb(x,e.columnId,e.lineOpacity),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-pointsize":{let x=this.getItemModel(e.tableId);if(!x||x.type!=="table")return;vb(x,e.columnId,e.pointSize),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-pointopacity":{let x=this.getItemModel(e.tableId);if(!x||x.type!=="table")return;Cb(x,e.columnId,e.pointOpacity),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-tablecolumn-pointstyle":{let x=this.getItemModel(e.tableId);if(!x||x.type!=="table")return;dG(x,e.columnId,e.pointStyle),this._setTableColumnHidden(e.tableId,e.columnId,!1)}break;case"set-item-points":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;oE(x,e.points),this._setItemHidden(e.id,ep(x)),!e.points&&x.dragMode!=="NONE"&&gd(x,"NONE")}break;case"set-item-pointstyle":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;aE(x,e.pointStyle),this._setItemHidden(e.id,!1)}break;case"set-item-lines":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;sE(x,e.lines),this._setItemHidden(e.id,ep(x))}break;case"set-item-linestyle":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;lx(x,e.lineStyle),this._setItemHidden(e.id,!1)}break;case"set-item-arrow-mode":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;CV(x,e.value),this._setItemHidden(e.id,!1);break}case"set-item-label-dropdown-open":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;vV(x,e.open)}break;case"set-item-fillopacity":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;Cg(x,e.fillOpacity),this._setItemHidden(e.id,!1)}break;case"set-item-lineopacity":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;ju(x,e.lineOpacity),this._setItemHidden(e.id,!1)}break;case"set-item-pointopacity":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;Sg(x,e.pointOpacity),x.showLabel||this._setItemHidden(e.id,!1)}break;case"set-item-pointsize":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;Eg(x,e.pointSize),this._setItemHidden(e.id,!1)}break;case"set-item-linewidth":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;Yu(x,e.lineWidth),this._setItemHidden(e.id,!1)}break;case"set-item-colorlatex":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;Dg(x,e.colorLatex)}break;case"set-item-labelSize":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;kg(x,e.labelSize)}break;case"set-item-labelangle":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;Jb(x,e.labelAngle)}break;case"set-item-label-orientation":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;lE(x,e.labelOrientation)}break;case"set-suppress-text-outline":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;EV(x,e.suppressTextOutline)}break;case"set-item-interactive-label":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;Pg(x,e.interactiveLabel),e.interactiveLabel&&dx(x,"NONE")}break;case"set-item-editable-label-mode":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;x.editableLabelMode!=="NONE"&&e.editableLabelMode!=="NONE"&&x.editableLabelMode!==e.editableLabelMode&&Ml(x,""),dx(x,e.editableLabelMode),e.editableLabelMode!=="NONE"&&Pg(x,!1)}break;case"plot-residuals":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;var r=x.formula.regression;if(!r)return;var i=r.residualSuggestionId;if(!i)return;var n=this.getItemModel(i);if(!n)return;yb(n,{latex:__dcg_shared_module_exports__['Ta'](r.residualVariable),columnIndex:n.columnModels.length-1})}break;case"toggle-logmode":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;var o=x.isLogModeRegression;iE(x,!o)}break;case"set-item-latex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;let L=e.latex;if(L==='"'&&this.areNotesEnabled()){let R=this.createItemModel({id:this.generateId(),type:"text"});this._toplevelReplaceItemAt(x.index,R,!0)}else if(L==="")zV(x);else if(L==="ticker"&&this.canAddTicker())this.listModel.ticker.open=!0,this.focusLocation={type:"ticker",location:"handler"},this._removeExpressionSynchronously(x);else if(L==="folder"&&this.areFoldersEnabled()){let R=this.createItemModel({id:this.generateId(),type:"folder"});qo(x)?(this._toplevelNewItemAtSelection(R,{shouldFocus:!0}),ca(x,"")):this._toplevelReplaceItemAt(x.index,R,!0)}else if(L==="table"){let R=this._createTableItem();this._toplevelReplaceItemAt(x.index,R,!0)}else!this.isGeometry()&&(L==="betchacant"||L==="pride")?this.runAfterDispatch(()=>{this.triggerEasterEgg&&this.triggerEasterEgg(L)}):(ca(x,L),this.lastUserUpdatedExpressionItem=x)}break;case"set-visualization-prop":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;oV(x,e.prop,e.value)}break;case"set-clickableinfo-prop":{let x=this.getItemModel(e.id);if(!x)return;x.type==="expression"?aV(x,e.prop,e.value):x.type==="image"&&Lb(x,e.prop,e.value)}break;case"set-clickableinfo-rule-latex":{let x=this.getItemModel(e.id);if(!x)return;x.type==="expression"?Wb(x,e.latex):x.type==="image"&&YG(x,e.latex)}break;case"set-folder-title":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let x=this.getItemModel(e.id);if(!x||x.type!=="folder")return;R0(x,e.title)}break;case"set-image-mq-attribute":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let x=this.getItemModel(e.id);if(!x||x.type!=="image")return;Ho(x,e.attribute,e.latex)}break;case"set-image-name":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let x=this.getItemModel(e.id);if(!x||x.type!=="image")return;NG(x,e.name)}break;case"set-image-draggable":{let x=this.getItemModel(e.id);if(!x||x.type!=="image")return;let L=Au(x);if(!L)return;VS(x,e.draggable),e.draggable&&(L.reconciledDragMode==="NONE"||L.dragMode==="AUTO")&&gd(L,"XY")}break;case"set-graph-settings":for(let x in e)x!=="type"&&this.graphSettings.setProperty(x,e[x]);break;case"set-polar-mode":this.graphSettings.setProperty("polarMode",e.polarMode),e.polarMode&&(this.graphSettings.setProperty("xAxisScale","linear"),this.graphSettings.setProperty("yAxisScale","linear"),(g=this.grapher)==null||g.getProjection().updateScalePairs());break;case"set-polar-domain-minlatex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;bg(x,e.latex)}break;case"set-polar-domain-maxlatex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;wg(x,e.latex)}break;case"set-parametric-domain-minlatex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;xg(x,e.latex)}break;case"set-parametric-domain-maxlatex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;vg(x,e.latex)}break;case"set-note-text":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let x=this.getItemModel(e.id);if(!x||x.type!=="text")return;DG(x,e.text)}break;case"set-edit-list-mode":{let x=Hu(this.listModel);if(this.setEditListMode(e.isEditListMode),e.focusExpressionList){if(x===void 0&&(x=this.getItemModelByIndex(0)),!x)return;Yi(this,x.id,x.type==="table"&&e.isEditListMode?"container":"start")}else Dr(this.listModel,void 0),ri(this,void 0)}break;case"set-projector-mode":this.getGraphSettings().config.setProperty("projectorMode",e.value);break;case"set-inverted-colors":this.getGraphSettings().config.setProperty("invertedColors",e.value);break;case"set-tablecell-latex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let x=this.getItemModel(e.tableId);if(!x||x.type!=="table")return;Dl(x,e.cell,e.latex)}break;case"set-state":this.externalSetState(e.state,e.opts);break;case"set-blank":this.externalSetState(this.getBlankState(),e.opts);break;case"clear-unsaved-changes":this.enqueueEvent("clearUnsavedChanges",e);break;case"reset-graph":{let x=this.getState();this.externalSetState(this.graphSettings.defaultState,{allowUndo:!0});let L=this.getItemModelByIndex(0);L&&Yi(this,L.id,"end"),this._showToast({message:this.s("graphing-calculator-text-toast-graph-reset"),undoCallback:()=>this.dispatch({type:"set-state",state:x,opts:{allowUndo:!0}})}),this.enqueueEvent("graphReset",e)}break;case"clear-graph":{if(this.triggerClearGraph){this.runAfterDispatch(()=>this.triggerClearGraph());return}let x=this.getState();this.externalSetState(this.getBlankState(),{allowUndo:!0});let L=this.getItemModelByIndex(0);L&&Yi(this,L.id,"end"),this._showToast({message:this.s("graphing-calculator-text-toast-graph-cleared"),undoCallback:()=>this.dispatch({type:"set-state",state:x,opts:{allowUndo:!0}})}),this.enqueueEvent("graphReset",e)}break;case"on-evaluator-changes":{if(this.onEvaluatorChangesSpy&&this.onEvaluatorChangesSpy(e.changes,e.timingData,e.graphData,e.eventUpdates),BA(this.listModel,e.changes),!e.graphData)break;var a;for(a in e.graphData.addedGraphs){var s=e.graphData.addedGraphs[a];this.grapher&&this.grapher.updateSketch(a,s),__dcg_shared_module_exports__['Ib'](s)&&NA(this.listModel,a,s)}for(a in e.graphData.removedGraphs)this.grapher&&this.grapher.removeGraphSketch(a);for(a in e.graphData.intersections){let x=e.graphData.intersections[a];this.grapher&&this.grapher.type==="2d"&&__dcg_shared_module_exports__['Ib'](x)&&this.grapher.updateIntersections(a,x)}if(this.grapher&&this.grapher.poiController&&this.grapher.poiController.handleTraceUpdate(),e.eventUpdates){let x=!1;for(let L in e.eventUpdates.updates)if(this.doesIdentifierBlockActionUpdate(L)){x=!0;break}if(!x){for(let L in e.eventUpdates.updates)this.updateLatexForIdentifier(L,e.eventUpdates.updates[L]);e.eventUpdates.objectClicked&&this.enqueueEvent("userClickedObject",e),this.onActionUpdatesAppliedSpy&&this.onActionUpdatesAppliedSpy(e.eventUpdates)}}}break;case"add-helper-expression":TA(this.listModel,e.state);break;case"tick":this._tickSliders(e.time);break;case"tick-ticker":this.tickTicker(e.time);break;case"adjust-slider-by-keyboard":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;QA(x,e.adjustment)}break;case"adjust-slider-by-dragging-thumb":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;ZA(x,e.target)}break;case"set-slider-minlatex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;fg(x,e.latex)}break;case"set-slider-maxlatex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;mg(x,e.latex)}break;case"set-slider-steplatex":{this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;yg(x,e.latex)}break;case"set-slider-dragging":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;Lg(x,e.dragging)}break;case"play-slider-from-min":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;let L=da(x);if(isNaN(L))return;let R=Cc(x.latex,L);zo(x,!1),ca(x,R),zo(x,!0)}break;case"set-slider-isplaying":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;zo(x,e.isPlaying)}break;case"set-slider-loopmode":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;yV(x,e.loopMode)}break;case"set-slider-animationperiod":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression")return;bV(x,e.animationPeriod)}break;case"show-expressions-list":this._showExpressions(e.focusHideIcon);break;case"hide-expressions-list":this._hideExpressions(e.focusShowIcon);break;case"open-drawer":this.enqueueEvent("openDrawer",e);break;case"re-randomize":this.setRandomSeed(al());break;case"resize-exp-list":this._setExpListWidth(e.expListWidth);break;case"toast/show":this._showToast(e.toast);break;case"toast/close":this.closeToast();break;case"toast/undo":let D=this.toastData.undoCallback;D&&this.runAfterDispatch(D),this.toastData={};break;case"toast/learn-more":let I=this.toastData.learnMoreCallback;I&&this.runAfterDispatch(I),this.toastData={};break;case"start-moving-points":jL(this,this.listModel,e.points);break;case"stop-moving-points":JL(this,e.points);break;case"on-move-points":YL(this,e.points,e.previousScreenPts,e.screenPts,e.projection,e.transform,e.keyboardDirection)&&this.enqueueEvent("userMovedPoint",e);break;case"commit-user-requested-viewport":this._commitUserRequestedViewport(e.viewport);break;case"set-axis-scale":switch(e.settings.axis){case"x":{let{scale:x,limitLatex:L}=e.settings;this.graphSettings.setProperty("xAxisScale",x),(y=this.grapher)==null||y.getProjection().updateScalePairs(),this._setAxisLimitLatex("xmin",L.min),this._setAxisLimitLatex("xmax",L.max),this.grapher&&(this.lastDirectlyEditedViewport=this.grapher.getCurrentViewport());break}case"y":{let{scale:x,limitLatex:L}=e.settings;this.graphSettings.setProperty("yAxisScale",x),(w=this.grapher)==null||w.getProjection().updateScalePairs(),this._setAxisLimitLatex("ymin",L.min),this._setAxisLimitLatex("ymax",L.max),this.grapher&&(this.lastDirectlyEditedViewport=this.grapher.getCurrentViewport());break}default:{let x=e.settings.axis;throw new Error(`Exhaustive check failed for set-axis-scale axis: ${x}`)}}break;case"toggle-lock-viewport":this.graphSettings.setProperty("userLockedViewport",!this.graphSettings.userLockedViewport);break;case"set-axis-limit-latex":this._setAxisLimitLatex(e.limit,e.latex),this.grapher&&(this.lastDirectlyEditedViewport=this.grapher.getCurrentViewport());break;case"toggle-graph-settings":this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{graphSettingsOpen:!this.layoutModel.graphSettingsOpen}),Dr(this.listModel,void 0),e.focusOnOpen&&(this.layoutModel.graphSettingsOpen?this.isGeometry()?ri(this,{type:"settings",location:"reverse-contrast"}):this.getGraphSettings().config.projectorMode?ri(this,{type:"settings",location:"large-size"}):ri(this,{type:"settings",location:"default-size"}):ri(this,{type:"settings",location:"icon"}));break;case"close-graph-settings":this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{graphSettingsOpen:!1}),e.focusIconAfterClose&&ri(this,{type:"settings",location:"icon"});break;case"toggle-add-expression":this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{addExpressionOpen:!this.layoutModel.addExpressionOpen}),e.focusOnOpen&&this.layoutModel.addExpressionOpen&&ri(this,{type:"add-expression-btn"});break;case"close-add-expression":this._closeAddExpression(),e.focusIconAfterClose&&ri(this,{type:"add-item-btn"});break;case"ui/container-resized":this.layoutMeasurements={width:e.size.width,height:e.size.height},this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;break;case"enter-printmode":this.inPrintMode=!0;break;case"exit-printmode":this.inPrintMode=!1;break;case"expression-size-exceeded":this._showToast({message:this.s("graphing-calculator-text-toast-expression-size-limit")});break;case"keypad/set-layout":this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{keypadLayout:e.layout,keypadFunctionsOpen:!1});break;case"keypad/set-minimized":this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{keypadMinimized:e.minimized,keypadLayout:"mainNumbers"}),this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,this.needsFakeKeypad()||DP(this),ge(e.minimized?this.s("graphing-calculator-narration-keypad-hidden"):this.s("graphing-calculator-narration-keypad-visible"));break;case"keypad/type-text":this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch(()=>{let x=qe.getFocusedMathquill();x&&qe.canAcceptText(x,this.getCapExpressionSize(),e.text)&&(x.typedText(e.text),qe.simulateUserChangedLatex(x))});break;case"keypad/press-key":this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch(()=>{let x=qe.getFocusedMathquill();x&&qe.simulateKeypress(x,e.key)});break;case"keypad/audio-trace":this.handleAudioTraceCommand(e.command);break;case"set-audio-trace-speed":this.setAudioTraceSpeed(e.speed);break;case"keypad/custom-command":this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch(()=>{let x=qe.getFocusedMathquill();x&&(Pp(x,e.command),qe.simulateUserChangedLatex(x))});break;case"keypad/shift":this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{keypadLayout:GP(this.getKeypadLayout()),keypadFunctionsOpen:!1});break;case"keypad/123":this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{keypadLayout:"mainNumbers",keypadFunctionsOpen:!1});break;case"keypad/abc":this.isQwertyKeyboardEnabled()?this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{keypadLayout:"letters",keypadFunctionsOpen:!1}):this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{keypadLayout:"noQwertyLetters",keypadFunctionsOpen:!1});break;case"keypad/audio":this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{keypadMinimized:!1,keypadLayout:"audio",keypadFunctionsOpen:!1});break;case"keypad/functions":this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{keypadFunctionsOpen:!this.isKeypadFunctionsPopoverOpen()});break;case"grapher/drag-start":break;case"grapher/drag-move":break;case"grapher/drag-end":break;case"open-on-web":this._openOnWeb();break;case"file-is-dragged-over":this.listModel.openItemMenu=void 0,this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{isFileDraggedOver:!0});break;case"file-is-not-dragged-over":this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{isFileDraggedOver:!1});break;case"zoom":this.grapher&&this.grapher.viewportController.zoom(e.direction);break;case"set-default-viewport":this.grapher&&this.grapher.viewportController.setDefaultViewport();break;case"set-hovered-image":{let x=this.getItemModel(e.id);if(!x||x.type!=="image")return;Lb(x,"hoveredImage",e.url)}break;case"set-depressed-image":{let x=this.getItemModel(e.id);if(!x||x.type!=="image")return;Lb(x,"depressedImage",e.url)}break;case"clickable-item-clicked":this.handleClickableItemClicked(e.id,e.listIndex);break;case"action-single-step":{let x=this.getItemModel(e.id);if(!x||x.type!=="expression"||!x.formula.action_value)return;this.evaluator.addActionStepEvent(x.id)}break;case"update-expression-search-str":this.updateExpressionSearchStr(e.str);break;case"update-expression-replace-str":this.updateExpressionReplaceStr(e.str);break;case"rename-identifier-global":this.suggestedIdentifierRename=void 0,Uu(this.listModel,e.search,e.replace);break;case"rename-identifier-in-item":this.suggestedIdentifierRename=void 0;let E=this.getItemModel(e.id);E&&E.type==="folder"?Uu(this.listModel,e.search,e.replace,{limitToFolder:e.id}):Uu(this.listModel,e.search,e.replace,{limitToItem:e.id});break;case"update-ticker-handlerlatex":this.updateTickerHandlerLatex(e.latex);break;case"update-ticker-minsteplatex":this.updateTickerMinStepLatex(e.latex);break;case"set-braille-mode":this.setBrailleMode(e.mode);break;case"set-six-key-input":this.setSixKeyInput(e.useSixKeyInput);break;case"set-show-constructions-open":this.showConstructionsOpen=e.open,e.focusIcon&&ri(this,{type:"geo-show-constructions-icon"});break;case"select-geo-tool":this.listModel.openItemMenu=void 0,this.setGeoTool(e.tool),e.clearSelection&&Dr(this.listModel,void 0),e.focusGraphPaper&&this.setGraphPaperFocus({isFocused:!0});break;case"cancel-geo-toolplay":this.cancelGeoToolplay();break;case"commit-geo-objects":{let x=[];var l=this.findLastSubscriptForLetters(),c={};let L=[];for(let R in e.objects){var u=e.objects[R];Fp(u.type)&&L.push(R);var h=rD(u,!0,q=>{let K=c[q];if(K)return K.assignmentLatex;let Y=this.getItemModel(q);if(!Y||Y.type!=="expression")return q;var N=this._autoNameExpression(Y,l);return K=c[q]={model:Y,assignmentLatex:N},K.assignmentLatex});h&&x.push(__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},h),{tokenId:R}))}if(x.length){let R=this.listModel.__toolPreviewIdToModel,q=this.getGeometryFolder(),K=q?q.index+this.getNumberOfItemsInFolder(q.id)+1:0;x.forEach(Y=>{let N;for(let j in R){let B=R[j];if(B.latex.indexOf(Y.tokenId+"=")===0){N=B;break}}N?(N.latex=Y.latex,N.color=Y.color,N.showLabel=!!Y.showLabel,q&&(N.folderId=q.id)):N=this.createItemModel({id:this.generateId(),type:"expression",showLabel:Y.showLabel,latex:Y.latex,folderId:q&&q.id,color:Y.color}),q?(ka(this.listModel,N,K),K+=1):ts(this.listModel,N),this.getGeoModel().recordCommittedOutput(N.id)})}L.length===1&&this.transformAllSelectedItemsByAssignmentLatex(L[0]),this.geoModel.isCurrentToolSingleUse()&&this.setGeoTool("selection"),this.isGeometry()&&this.getGeoModel().updateFadeAnimations()}break;case"rename-identifier":{let x=e.from,L=e.to,R=this.getGeometryFolder();R&&this.getGeoItemsByTokenLatex(x).forEach(q=>{e.geoFolder&&q.folderId!==R.id?(Eo(q,R.id),$u(this.listModel,q.index,R.index+1,1)):!e.geoFolder&&q.folderId===R.id&&($u(this.listModel,q.index,R.index+this.getNumberOfItemsInFolder(R.id),1),Eo(q,""))}),Uu(this.listModel,x,L)}break;case"set-active-token":this.activeTokens[e.style]=e.id;break;case"unset-active-token":this.activeTokens[e.style]===e.id&&(this.activeTokens[e.style]=void 0);break;case"select-expression-that-defines-token":{let x=this.getExpressionIdForToken(e.id);if(!x)return;this.setGeoTool("selection"),e.multiSelectMode||e.toggle?$S(this.listModel,x):this.tryInsertTokenIntoMathquill(x,void 0)||Dr(this.listModel,this.getItemModel(x))}break;case"close-expression-search":this.expressionSearchOpen=!1,this.updateExpressionSearchStr("");let G=this.getItemModelByIndex(0);G&&Yi(this,G.id,"end");break;case"open-expression-search":this.expressionSearchOpen=!0,this.focusLocation={type:"search-expressions"};let T=e.latex;e.rename&&!Qs(T)&&(T="");let P=e.rename?T?`\\operatorname{rename}\\ ${T}\\to`:"\\operatorname{rename}\\ ":T;this.updateExpressionSearchStr(P);break;case"open-ticker":this.listModel.ticker.open=!0,this.focusLocation={type:"ticker",location:"handler"},this._closeAddExpression();break;case"close-ticker":this.listModel.ticker.open=!1,this.listModel.ticker.playing=!1,this.listModel.ticker.minStepLatex="",this.listModel.ticker.handlerLatex="";break;case"toggle-ticker":this.listModel.ticker.playing=!this.listModel.ticker.playing,this.listModel.ticker.lastTickTime=void 0,this.pauseAllSliders();break;case"set-tool-preview-state":this.setToolPreviewState(e.state);break;case"apply-transformation-to-selected":this.transformAllSelectedItemsByAssignmentLatex(e.assignmentLatex),this.closeItemSettingsMenu();break;case"style-for-geo-depth":{let x=this.geoModel.getComputedBoard().getDepthValues().lastReferencedDepth,L=parseInt(e.depth),R=!1;e.depthOrder.forEach(q=>{var K=this.cachedGeoTokenDepths[q];if(!K)return;let Y=parseInt(q),N=q===e.depth,j=Y<L;K.forEach(B=>{var A=B.calcId,$=this.getItemModel(A);if(!(!$||$.type!=="expression")){var J=R?!0:$.hidden;$.hidden&&(N||j&&L<1+x["\\token{"+B.token+"}"])&&(J=!1),J===$.hidden?cE($,void 0):cE($,J)}}),N&&(R=!0)})}break;default:return e}}transformAllSelectedItemsByAssignmentLatex(e){var h;let r=qb(this.listModel),i=this.findLastTokenNumber()+1,n=this.findLastSubscriptForLetters(),o=this.getGeometryFolder(),a=o?o.index+this.getNumberOfItemsInFolder(o.id)+1:0,s={};for(let p of r){if(p.type!=="expression")continue;var l=p.formula.geometry;if(!l)continue;var c=(h=p.formula.typed_constant_value)==null?void 0:h.valueType;if(!c||__dcg_shared_module_exports__['va'](c,__dcg_shared_module_exports__['oa']))continue;var u=l.identifier;let g;u?g=__dcg_shared_module_exports__['Ta'](u):g=this._autoNameExpression(p,n);let y=`\\token{${i}}`;i+=1;let w=`${y}=${e}\\left(${g}\\right)`,b=this.createItemModel({id:this.generateId(),type:"expression",showLabel:p.showLabel&&!p.label,latex:w,folderId:o&&o.id,color:p.color});s[b.id]=!0,o?(ka(this.listModel,b,a),a+=1):ts(this.listModel,b)}Object.keys(s).length&&zS(this.listModel,s)}_autoNameExpression(e,r){var i=Vg(e)[0].toUpperCase(),n=(r[i]||0)+1;r[i]=n;var o=i+"_{"+n+"}";return ca(e,o+"="+e.latex),o}setGeoTool(e){if(!this.geoUIActive||this.activeTool===e)return;this.geoTools.forEach(i=>{i.dropdown&&i.dropdown.indexOf(e)!==-1?i.key=e:i.dropdown&&i.resetOnChange&&i.resetOnChange.indexOf(i.key)!==-1&&(i.key=i.dropdown[0])}),this.activeTool=e,this.getGeoModel().setToolMode(e),this.cancelGeoToolplay()}cancelGeoToolplay(){var r,i;let e=this.getGeoModel();e.cancelToolplay(),e.deselectAllObjects(),this.setToolPreviewState({}),(i=(r=this.grapher)==null?void 0:r.poiController)==null||i.cancelGeoToolplay()}setToolPreviewState(e){this.toolPreviewJSONState=e;var r=this.listModel.__toolPreviewIdToModel;this.listModel.__toolPreviewIdToModel={};for(let i in e){let n=e[i],o=rD(n,!1);if(!o)continue;let a;for(let s in r){let l=r[s];if(l.latex.indexOf(i+"=")===0){a=l;break}}a?(a.latex=o.latex,a.color=o.color,a.showLabel=!!o.showLabel):a=jb({id:this.generateId(),type:"expression",color:o.color,latex:o.latex,showLabel:!!o.showLabel},this),this.listModel.__toolPreviewIdToModel[a.id]=a}}isGeoItem(e){let r=this.getItemModel(e);return r&&r.type==="expression"&&r.formula&&r.formula.geometry&&!r.formula.error}getSelectedGeoExpression(){var e=this.getSelectedItem();if(e&&this.isGeoItem(e.id)&&e.type==="expression")return e}getGeometryFolder(){let e=this.getItemModel(__dcg_shared_module_exports__['uc']);return e&&e.type==="folder"?e:void 0}isItemInGeoFolder(e){var r=this.getItemModel(e);return!r||r.type==="folder"?!1:r.folderId===__dcg_shared_module_exports__['uc']}isGeoFolder(e){return e.id===__dcg_shared_module_exports__['uc']}pauseAllSliders(){this.getPlayingSliders().forEach(e=>{zo(e,!1)})}countGlobalIdentifierOccurences(e){return DA(this.listModel,e)}handleClickableItemClicked(e,r){var n;let i=this.getItemModel(e);i&&(i.type!=="expression"&&i.type!=="image"||((n=i.formula.click_handler)==null?void 0:n.status)==="maybe-valid"&&this.evaluator.addClickEvent(i.id,r))}canAddTicker(){return!this.getTickerOpen()}countIdentifierAssignments(e){return qu(this.listModel,e).length}doesIdentifierBlockActionUpdate(e){var r=this.getFocusLocation(),i=qu(this.listModel,e);for(let n of i)if((r==null?void 0:r.type)==="expression"&&r.id===n.id||mV(n))return!0;return!1}getItemsByIdentifier(e){return qu(this.listModel,e)}getGeoItemsByTokenLatex(e){let r=e+"=";return Kb(this.listModel).filter(i=>{if(i.type==="expression"){var n=i.latex.trim();return n.indexOf(r)===0}})}isAtLeastOnePointSelected(){let e=this.getAllSelectedItems();for(var r=0;r<e.length;r++){let i=e[r];if(i.type==="expression"&&Ma(i))return!0}return!1}toggleLabelForAllSelectedObjects(){let e=[],r=[];this.getAllSelectedItems().forEach(n=>{n.type==="expression"&&Ma(n)&&(n.showLabel?r.push(n):e.push(n))});let i=/^([A-Z])([0-9]*)$/;if(e.length){let n=0;this.getAllItemModels().forEach(o=>{if(o.type!=="expression"||!o.showLabel||!o.label)return;let a=o.label.match(i);if(!a)return;let s=a[1].charCodeAt(0)-65;a[2]&&(s+=parseInt(a[2])*26),s>=n&&(n=s+1)}),e.forEach(o=>{if(!o.label){let a=n;n++;let s=String.fromCharCode(a%26+65),l=Math.floor(a/26),c=l>0?l+"":"";Ml(o,s+c)}hd(o,!0)})}else r.length&&r.forEach(n=>{i.test(n.label)&&Ml(n,""),hd(n,!1)})}updateLatexForIdentifier(e,r){var i=qu(this.listModel,e);if(i.length===1){var n=i[0];n.slider.isPlaying?(zo(n,!1),ca(n,r),zo(n,!0)):ca(n,r)}}updateExpressionSearchStr(e){this.rawExpressionSearchStr=e;let r="\\operatorname{rename}";if(e.indexOf(r)===0){let n=e.slice(r.length).replace(/\\ /g,"").split(/\\to(?![a-zA-Z])/);n.length===2?(this.expressionSearchStr=n[0],this.isExpressionSearchStrValidForReplace=Qs(this.expressionSearchStr),this.updateExpressionReplaceStr(n[1])):(this.expressionSearchStr=n[0],this.isExpressionSearchStrValidForReplace=!1,this.updateExpressionReplaceStr(""));let o=SA(this.listModel,this.getExpressionSearchStr());this.expressionSearchCount=this.expressionSearchOpen?o:0}else this.expressionSearchStr=e.length>1&&"rename".indexOf(e)===0?"":e,this.isExpressionSearchStrValidForReplace=!1,this.updateExpressionReplaceStr(""),this.filterItemsBySearch()}filterItemsBySearch(){if(!this.getExpressionReplaceStr()){let e=EA(this.listModel,this.getExpressionSearchStr());this.expressionSearchCount=this.expressionSearchOpen?e:0}}updateExpressionReplaceStr(e){this.expressionReplaceStr=e,this.isExpressionReplaceStrValidForReplace=Qs(e)}getIsExpressionSearchStrValidForReplace(){return this.isExpressionSearchStrValidForReplace}getIsExpressionReplaceStrValidForReplace(){return this.isExpressionReplaceStrValidForReplace}isSearchReplaceValid(){return this.getIsExpressionSearchStrValidForReplace()&&this.getIsExpressionReplaceStrValidForReplace()}shouldShowReplaceIcon(){return this.isSearchReplaceValid()}updateTickerHandlerLatex(e){this.listModel.ticker.handlerLatex=e}updateTickerMinStepLatex(e){this.listModel.ticker.minStepLatex=e}getRawExpressionSearchStr(){return this.rawExpressionSearchStr||""}getExpressionSearchStr(){return this.expressionSearchStr||""}getExpressionReplaceStr(){return this.expressionReplaceStr||""}getExpressionSearchCount(){return this.expressionSearchCount||0}getTicker(){return this.listModel.ticker}getTickerHandlerLatex(){return this.listModel.ticker.handlerLatex||""}getTickerMinStepLatex(){return this.listModel.ticker.minStepLatex||""}getTickerAvgDelta(){return this.listModel.ticker.avgDelta}getBrailleMode(){return this.graphSettings.config.brailleMode}setBrailleMode(e){this.graphSettings.config.setProperty("brailleMode",e)}getSixKeyInput(){return this.graphSettings.config.sixKeyInput}setSixKeyInput(e){this.graphSettings.config.setProperty("sixKeyInput",e)}getBrailleControls(){return this.graphSettings.config.brailleControls}setBrailleControls(e){this.graphSettings.config.setProperty("brailleControls",e)}getAudio(){return this.graphSettings.config.audio}setAudio(e){this.graphSettings.config.setProperty("audio",e)}setEditListMode(e){this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{inEditListMode:e})}generateTableXSubscript(){return ug(this.listModel)}findLastTokenNumber(){return kA(this.listModel)}findLastSubscriptForLetters(){return IA(this.listModel)}_createTableItem(){let e=this.generateTableXSubscript(),r=MS(e,[[],[]],this);return this.createItemModel(r)}_populateSettingsViewLimitLatex(){if(!this.grapher)return;let e=this.grapher.getCurrentViewport();this.isGraphSettingsOpen()&&__dcg_shared_module_exports__['E'](e,this.lastDirectlyEditedViewport)||(this.settingsViewModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.settingsViewModel),{limitLatex:PP(e,{steps:this.getAxisStepSettings(),scales:this.getAxisScaleSettings()})}))}getAxisStepSettings(){return{xAxisStep:this.graphSettings.xAxisStep,yAxisStep:this.graphSettings.yAxisStep}}getAxisScaleSettings(){return{xAxisScale:this.graphSettings.xAxisScale,yAxisScale:this.graphSettings.yAxisScale}}getDefaultAxisScaleSettings(){var r,i;let{defaultState:e}=this.graphSettings;return{xAxisScale:((r=e==null?void 0:e.graph)==null?void 0:r.xAxisScale)||"linear",yAxisScale:((i=e==null?void 0:e.graph)==null?void 0:i.yAxisScale)||"linear"}}getSettingsViewModel(){return this.settingsViewModel}getListModel(){return this.listModel}hasBackgroundColor(){return this.getBackgroundColor()!=="#ffffff"}getBackgroundColor(){return this.getGraphSettings().getBackgroundColor()}getTextColor(){return this.getGraphSettings().getTextColor()}getPillboxBackgroundColor(){return __dcg_shared_module_exports__['dc'](this.getBackgroundColor(),-.07)}subToChanges(e){let r=this.nextSubscription;return this.nextSubscription+=1,this.subscriptions[r]=e,()=>{delete this.subscriptions[r]}}updateTheComputedWorld(){ud(this.listModel),MA(this.listModel),this.grapher&&this.grapher.setSketchOrder(this.listModel.drawOrder);var e={};let r=g=>{let y=tE(g.latex),w=y&&Xu(y);w&&(e[w]?e[w].multiple=!0:e[w]={model:g,multiple:!1})};for(let g of this.getAllToolPreviewItems())rE(g),r(g);for(let g of this.getAllItemModels())switch(g.type){case"expression":rE(g),r(g);break;case"image":qG(g);break;case"table":eG(g);break;case"folder":_0(g);break;case"text":IG(g);break;default:return g}this.geoUIActive=this.isGeometry()&&!this.getGraphSettings().config.hideGeoUI;var i=this.cachedGeoTokenGroups={};this.cachedGeoTokenInfo={};for(var n in e){var{multiple:o,model:a}=e[n],s="blue";let g="unknown",y="unknown",w=!1,b=!1,D=!1,I=!1;var l=void 0;if(!o&&a?(s=rs(a),a.hidden&&(I=!0),l=a.geoOverrideHidden,w=pV(a),y=fV(a),g=Vg(a),a.error&&(b=!0,s="#")):(s="#fa824c",g="error",b=!0),g&&a){var c=i[g];c||(c=i[g]=[]),c.push({color:s,id:a.id,token:n,groupType:g}),this.isItemSelected(a.id)&&(D=!0)}else b=!0;let E=this.getGeoDescription(a,{includeDetails:!1}),G=(a==null?void 0:a.label)||"";this.cachedGeoTokenInfo[n]={groupType:g,iconType:y,isList:w,hasError:b,color:s,isSelected:D,isHidden:I,description:E,label:G,overrideHidden:l,calcId:a&&a.id||""}}this.cachedGeoTokenDepths={};let{createdDepth:u,firstReferencedDepth:h}=this.geoModel.getComputedBoard().getDepthValues();for(let g in this.cachedGeoTokenInfo){let{calcId:y}=this.cachedGeoTokenInfo[g];if(!this.getItemModel(y))continue;let b=u["\\token{"+g+"}"]||0,D=h["\\token{"+g+"}"];D=isFinite(D)?D:0;let I=Math.max(b,D-1)+"",E=this.cachedGeoTokenDepths[I];E||(E=[],this.cachedGeoTokenDepths[I]=E);let G=this.cachedGeoTokenInfo[g];E.push({color:G.color,groupType:G.groupType,token:g,calcId:y})}if(oA(this.listModel.ticker),this.isCurrentFocusLocationValid()||ri(this,void 0),this.listModel.openItemMenu){let g=this.getOpenMenuIcon();document.body&&g&&document.body.contains(g[0])||(this.listModel.openItemMenu=void 0)}let p=this.getSelectedItem();p&&!this.getItemModel(p.id)&&Dr(this.listModel,void 0),this._populateSettingsViewLimitLatex(),this.propagateSelection(),this.propagateActiveTokens(),this.isKeypadOpen()||(this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{keypadFunctionsOpen:!1})),this.updateSuggestedIdentifierRenameInfo(),this.runAfterDispatch(()=>{this.grapher&&this.grapher.type==="2d"&&this.grapher.audioGraph.checkIfSelectedItemChanged(p?p.id:void 0),this.grapher&&this.grapher.type==="2d"&&this.focusLocation&&this.focusLocation.type!=="graph-paper"&&this.grapher.audioGraph.exitAudioTrace()})}getOpenMenuIcon(){let e=this.getOpenItemMenu();if(!e)return;let r=e.guid,i=this.find$(`[dcg-open-menu-guid="${r}"]`);if(i.length!==0)return i}propagateSelection(){this.grapher?this.__lastSelectedIdsForPropagation=P1(this,this.grapher,this.__lastSelectedIdsForPropagation):this.__lastSelectedIdsForPropagation={}}propagateActiveTokens(){!this.grapher||!(this.grapher instanceof Hl)||(this.grapher.setActiveToken(this.getExpressionIdForToken(this.activeTokens.selected),"selected"),this.grapher.setActiveToken(this.getExpressionIdForToken(this.activeTokens.hovered),"hovered"))}getHoveredToken(){return this.activeTokens.hovered}doesLatexContainToken(e){return hV(e)}getToolPreviewJSONState(){return this.toolPreviewJSONState}garbageCollectGeo(e){if(!this.isGeometry())return;let r=qP(this,e);r.length&&qS(this.listModel,r)}getExpressionIdForToken(e){if(!e)return;let r=gV(e);var i=this.getGeoItemsByTokenLatex(r);if(i.length===1)return i[0].id}tryInsertTokenIntoMathquill(e,r){if(!this.isGeometry()||!e)return!1;var i=this.getItemModel(e);if(!i||i.type!=="expression")return!1;let n=i.formula.typed_constant_value;r===0&&(!n||!__dcg_shared_module_exports__['sa'](n.valueType))&&(r=void 0);var o=!1,a,s=In(i);if(s)a=__dcg_shared_module_exports__['Ta'](s);else if(i.formula.geometry){let u=ug(this.listModel);a=__dcg_shared_module_exports__['Ta']("P_"+u),o=!0}if(!a)return!1;r!==void 0&&(a+="\\left["+(r+1)+"\\right]");var l=this.getFocusLocation();if(!l||!this.seemsLikeInsertingTokenWillImproveThings())return!1;var c=l.type==="expression";return c?(o&&(i.reconciledDragMode==="NONE"&&i.dragMode==="AUTO"&&gd(i,"NONE"),ca(i,a+"="+i.latex)),this.writeIdentifierIntoCurrentMathquill(a),!0):!1}seemsLikeInsertingTokenWillImproveThings(){var e=this.getSelectedItem();if(!e||e.type!=="expression")return!1;var r=Ia(e),i=e.error&&!r,n=e.latex.indexOf("polygon")!==-1;if(!i&&!n)return!1;let o=qe.getFocusedMathquill();if(!o)return!1;let a=o.selection(),s=a.startIndex===a.latex.length,l=a.latex[a.startIndex-1]===")";return!(s&&l)}writeIdentifierIntoCurrentMathquill(e){this.runAfterDispatch(()=>{let r=qe.getFocusedMathquill();if(!r)return;var i=r.selection();let n=!1,o=!1;if(i.startIndex===i.endIndex){var a=i.latex.slice(0,i.startIndex);n=/\\token\{\d+\}$/.test(a),o=/[a-zA-Z0-9]$/.test(a)}let s=(n||o?",":"")+e;qe.canAcceptText(r,this.getCapExpressionSize(),s)&&(r.write(s),qe.simulateUserChangedLatex(r))})}getSelectedExpressionIds(){return LA(this.listModel)}getPropagatedSelectedIds(){return this.__lastSelectedIdsForPropagation}areParsableObjectsEqual(e,r){return e===r?!0:__dcg_shared_module_exports__['E'](__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},e),{regressionParameters:void 0}),__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},r),{regressionParameters:void 0}))}requestParseForAllItems(){(this.isCurrentlyDoingSetState||this.isCurrentlyDoingRestoreState)&&(this.lastParsableObjects={},this.evaluator.clearStatementsAndStartCompleteState(),this.isCurrentlyDoingRestoreState&&this.evaluator.markUndoRedoState());var e={},r=this.lastParsableObjects;for(let i of this.getAllItemModels())switch(i.type){case"expression":case"image":case"table":e[i.guid]=i.cachedParsableState;break;case"folder":case"text":break;default:return i}for(let i of vA(this.listModel))e[i.guid]=i.cachedParsableState;for(let i of Bu(this.listModel))e[i.guid]=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},i.cachedParsableState),{isToolPreview:!0});this.listModel.ticker.cachedParsableState&&(e[this.listModel.ticker.guid]=this.listModel.ticker.cachedParsableState);for(let i in r){let n=r[i],o=e[i];if(n.type==="image"&&(!o||o.type!==n.type||o.guid!==n.guid)&&this.grapher&&this.grapher.removeGraphImage(n.id),!o&&(this.evaluator.removeStatement(n.id),n.type==="table"))for(let a of n.columns)this.evaluator.removeStatement(a.id)}for(let i in e){let n=e[i],o=r[i];if(n.type==="image"&&(!o||n.type!==o.type||n.guid!==o.guid)&&this.grapher){let a=this.getItemModel(n.id);a&&a.type==="image"&&this.grapher.addGraphImage(a)}this.areParsableObjectsEqual(n,o)||(this.grapher&&n.type==="statement"&&n.latex===""&&this.grapher.removeGraphSketch(n.id),this.evaluator.addStatement(n))}this.lastParsableObjects=e}getViewState(){if(this.grapher){let e=this.grapher.getProjection();return{viewport:e.viewport.toObject(),screen:e.screen,xAxisScale:e.settings.xAxisScale,yAxisScale:e.settings.yAxisScale,degreeMode:e.settings.degreeMode}}else return}getTokenRenderInfoById(e){let r=this.cachedGeoTokenInfo[e];return r||(r={iconType:"unknown",isList:!1,hasError:!0,color:"#fa824c",isSelected:!1,groupType:"unknown",isHidden:!1,overrideHidden:void 0,description:"",label:"",calcId:""}),r}setEvaluator(e){this.evaluator=e}getEvaluator(){return this.evaluator}setGrapher(e){this.grapher=e}getGrapher(){return this.grapher}shouldExpressionZoomFit(e){if(!this.grapher||!this.isZoomFitEnabled())return!1;if(e.type==="expression"||e.type==="table"){if(e.type==="expression"&&(e.error||!e.shouldGraph||!e.formula.is_graphable)||!e.boundingBoxes||!e.boundingBoxes.length)return!1;var r=this.grapher.viewportController;return"getProjection"in r?TP(e.boundingBoxes,r.getProjection()):!1}else return!1}setBugsnagContext(e){this.bugsnagContext=e}getItemRootNodeById(e){let r=this.getItemModel(e);if(r&&r.dcgView)return r.dcgView.findRootNode()}getItemSelectorById(e){let r=this.getItemRootNodeById(e);return r?V(r):void 0}generateId(){var e=this.__nextItemId;return this.__nextItemId+=1,e+""}getNextColor(){return yA(this.listModel)}getNextDisplayIndex(){return this.listModel.nextDisplayIndex}_clearPendingImageUploads(){this.__pendingImageUploads={}}isUploadingImages(){return Object.keys(this.__pendingImageUploads).length>0}getExpressionAnalysis(){return this.listModel.expressionAnalysis}createItemModel(e){return _u(this.listModel,e)}getItemModel(e,r){return es(this.listModel,e,r)}getColorById(e){let r=this.getItemModel(e);return!r||r.type!=="expression"?"":XS(r)}getAllColorAssignments(){let e=[];for(let r of this.getAllItemModels()){if(r.type!=="expression")continue;let i=In(r);if(!i)continue;let n=this.getEvaluationValueForItem(r.id);(typeof n=="string"||Array.isArray(n)&&typeof n[0]=="string")&&e.push({id:r.id,assignmentLatex:__dcg_shared_module_exports__['Ta'](i)})}return e}getItemModelByIndex(e){return Fu(this.listModel,e)}getItemCount(){return pg(this.listModel)}getItemEditableLabelMode(e){let r=this.getItemModel(e);if(!(!r||r.type!=="expression"))return DV(r)}isItemSecret(e){let r=this.getItemModel(e);return r?dg(r):!1}isItemReadonly(e){let r=this.getItemModel(e);return r?BS(r):!1}isItemSelected(e){let r=this.getItemModel(e);return!!r&&Xs(r)}hasAnyItemsSelected(){return this.getAllSelectedItems().length>0}hasMultipleItemsSelected(){return this.getAllSelectedItems().length>1}isItemSelectable(e){let r=this.getItemModel(e);return r?Nu(r):!1}anyItemDependsOnRandomSeed(){return KA(this.listModel)}areActionsEnabled(){return this.graphSettings.config.actions==="auto"?UA(this.listModel):!!this.graphSettings.config.actions}getAllItemModels(){return Kb(this.listModel)}getAllToolPreviewItems(){return Bu(this.listModel)}getAllModelsWithSliders(){return VA(this.listModel)}getGraphSettings(){return this.graphSettings}getAudioGraph(){return this.grapher!==void 0&&this.grapher.type==="2d"?this.grapher.audioGraph:void 0}inAudioTraceMode(){let e=this.getAudioGraph();return!!(e&&e.audioTraceActive)}canAudioTrace(){let e=this.getAudioGraph();return e?e.canAudioTraceCurrentExp():!1}isAudioTracing(){let e=this.getAudioGraph();return e?e.tonegen.isAnimating():!1}expressionsAreFullWidth(){return this.isNarrow()||this.graphSettings.config.graphpaper===!1}getExpListWidthString(){return this.expressionsAreFullWidth()?"100%":this.rootElt?this._getExpListWidth()+"px":"0"}getExpListWidth(){return this.rootElt?this._getExpListWidth():0}findFirstVisibleItem(){let e=FP(this,this._previousFirstVisibleId);if(this._previousFirstVisibleId=e,e)return this.getItemModel(e)}findLastVisibleItem(){let e=RP(this,this._previousLastVisibleId);if(this._previousLastVisibleId=e,e)return this.getItemModel(e)}updateRenderShellsAfterDispatch(){if(!this.rootElt||!this.isListVisible())return;let e=this.findFirstVisibleItem(),r=this.findLastVisibleItem();var i=e&&this.getItemRootNodeById(e.id),n=r&&this.getItemRootNodeById(r.id);if(i===this.lastInfiniteScrollFirstDOM&&n===this.lastInfiniteScrollLastDOM&&!this.hasDispatchSinceLastInfiniteScrollUpdate)return;this.lastInfiniteScrollFirstDOM=i,this.lastInfiniteScrollLastDOM=n,this.hasDispatchSinceLastInfiniteScrollUpdate=!1;let o=!1,a=e?e.index:1/0,s=r?r.index:1/0,l=this.listModel.dragState&&this.listModel.dragState.firstItemId,c,u=this.getOpenItemMenu();u&&u.type!=="multi-select-more"&&u.type!=="multi-select-transformations"&&u.type!=="geo-tool-dropdown"&&(c=u.model.id);for(let p of this.getAllItemModels()){var h=(p.index<a||p.index>s||p.isHiddenFromUI)&&!(p.type==="expression"&&p.sliderDragging);if(l==p.id&&(h=!1),c===p.id&&(h=!1),p.renderShell!==h&&(p.renderShell=h,o=!0,h)){let g=this.getItemRootNodeById(p.id);if(g){let y=g.getBoundingClientRect().height;y>0&&(p.cachedRenderHeight=y)}}}o&&this.markTickRequiredNextFrame()}updateRenderShellsBeforePaint(){if(this.hasDispatchSinceLastInfiniteScrollUpdate=!0,this.inPrintMode){for(let r of this.getAllItemModels())r.renderShell=!1;return}for(let r of this.getAllItemModels())r.isHiddenFromUI&&(r.renderShell=!0),r.type==="expression"&&r.sliderDragging&&(r.renderShell=!1);let e=this.getSelectedItem();e&&!this.isGeoItem(e.id)&&(e.renderShell=!1)}updateDragDrop(){let e=this.listModel.dragState;if(!e)return;let r=this.getItemModel(e.firstItemId);if(!r)return;let i=this.dragdrop_expressions.applyDrag();i&&(hg(this.listModel,i.dragState),Eo(r,i.folderId),r.index!==i.newIndex&&$u(this.listModel,r.index,i.newIndex,e.numberOfItems))}_tickSliders(e){this.getPlayingSliders().forEach(function(r){eV(r,e)})}tickTicker(e){let r=this.listModel.ticker.lastTickTime===void 0;this.evaluator.addClockTickEvent(this.listModel.ticker.id,r),sA(this.listModel.ticker,e)}stopAllSliders(){for(let e of this.getAllItemModels())e.type==="expression"&&e.slider.isPlaying&&zo(e,!1)}getPlayingSliders(){var e=this.getAllItemModels(),r=[];for(let i of e)i.type==="expression"&&i.sliderExists&&i.slider.isPlaying&&r.push(i);return r}areAnyImagesLoading(){return mA(this.listModel)}_commitUserRequestedViewport(e){this.grapher&&this.grapher.setUserRequestedViewport(e)}_setAxisLimitLatex(e,r){this.settingsViewModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.settingsViewModel),{limitLatex:__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.settingsViewModel.limitLatex),{[e]:r})});let n=r===""&&(e==="xstep"||e==="ystep")?0:ai(r,this.graphSettings.degreeMode);switch(e){case"xstep":{if(!up(n))return;this.graphSettings.setProperty("xAxisStep",n)}break;case"ystep":{if(!up(n))return;this.graphSettings.setProperty("yAxisStep",n)}break;case"xmin":case"xmax":case"ymin":case"ymax":{if(!this.grapher)return;let o=this.grapher.viewportController.getViewport(),a="xmin";e==="xmin"&&(a="xmax"),e==="ymax"&&(a="ymin"),e==="ymin"&&(a="ymax");let s=ai(this.settingsViewModel.limitLatex[a],this.graphSettings.degreeMode),l=Si.fromObject(__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},o.toObject()),{[e]:n,[a]:s}));if(!l.isValid(this.getAxisScaleSettings()))return;this.grapher.viewportController.setViewport(l);let u=e==="xmin"||e==="xmax"?"x":"y";this.graphSettings.setProperty("lastChangedAxis",u),this.markSquareAxesAfterUserEditedViewport()}break}if(this.grapher){let o=this.grapher.viewportController.getViewport().toObject();this._commitUserRequestedViewport(o)}}markSquareAxesAfterUserEditedViewport(){if(!this.grapher)return;let e=this.grapher.viewportController.getViewport().isSquare(this.grapher.getProjection().screen,this.getAxisScaleSettings());this.graphSettings.setProperty("squareAxes",e)}getLockViewportConfigSetting(){return this.graphSettings.config.lockViewport}getLockViewportUserSetting(){return this.graphSettings.userLockedViewport}canUserAddExpressions(){return!!this.graphSettings.config.expressions}areNotesEnabled(){return!!this.graphSettings.config.notes}areSlidersEnabled(){return!!this.graphSettings.config.sliders}areLinksEnabled(){return!!this.graphSettings.config.links}areImagesEnabled(){let e=window.FileReader,r=Ja&&jh&&jh[0]===8&&jh[1]===0&&jh[2]===0;return!!(this.graphSettings.config.images&&e&&!r)}areFoldersEnabled(){return!!this.graphSettings.config.folders}isDecimalToFractionEnabled(){return!!this.graphSettings.config.decimalToFraction}isTraceEnabled(){return!!this.graphSettings.config.trace}areFunctionsRestricted(){return!!this.graphSettings.config.restrictedFunctions}areGeometryFunctionsForceEnabled(){return!!this.graphSettings.config.forceEnableGeometryFunctions}isQwertyKeyboardEnabled(){return!!this.graphSettings.config.qwertyKeyboard}isZoomFitEnabled(){return!!this.graphSettings.config.zoomFit}canEditOnWeb(){return!!this.graphSettings.config.editOnWeb}hasTransparentBackground(){return!!this.graphSettings.config.transparentBackground}shouldAudioTraceReverseExpressions(){return!!this.graphSettings.config.audioTraceReverseExpressions}hasDefaultState(){return!!this.graphSettings.defaultState}getDefaultStateViewport(){var e=this.graphSettings.defaultState;if(e&&e.graph)return e.graph.viewport}getColors(){return this.graphSettings.config.colors}getImageOpacities(){return["0.2","0.4","0.6","0.8","1"]}getUIDragModes(){return["X","Y","XY"]}getNumberOfItemsInFolder(e){return bA(this.listModel,e)}getEnabledDragModesForItem(e){let r=this.getItemModel(e);if(!r||r.type!=="expression")return[];let i=r.formula,n=[];if(!i.move_strategy)return n;let o=i.move_strategy[0].type!=="none",a=i.move_strategy[1].type!=="none",s=o&&a;return o&&n.push("X"),a&&n.push("Y"),s&&n.push("XY"),n}shouldShowEvaluationForItem(e){let r=this.getItemModel(e);return!r||r.type!=="expression"?!1:JS(r)}getEvaluationValueForItem(e){let r=this.getItemModel(e);return r?r.type!=="expression"?NaN:XS(r):NaN}canDisplayEvaluationForItemAsFraction(e){if(!this.isDecimalToFractionEnabled())return!1;let r=this.getItemModel(e);if(!r||r.type!=="expression"||tx(r))return!1;let i=this.getEvaluationValueForItem(e);return typeof i!="number"?!1:__dcg_shared_module_exports__['Pa'](i)}shouldEvaluationForItemDisplayAsFraction(e){if(!this.isDecimalToFractionEnabled())return!1;let r=this.getItemModel(e);return!r||r.type!=="expression"?!1:Sc(r)}getEvaluationLabelOptionsForItem(e){return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},JA),{displayAsFraction:this.shouldEvaluationForItemDisplayAsFraction(e)})}getPointStyles(){return["POINT","OPEN","CROSS"]}getLineStyles(){return["SOLID","DASHED","DOTTED"]}getOpacities(){return[.2,.4,.8]}isInEditListMode(){return this.layoutModel.inEditListMode}shouldShowAuthorFeatures(){return!!this.graphSettings.config.authorFeatures}getInvertedColors(){return!!this.graphSettings.config.invertedColors}canUseAdvancedStyling(){return this.graphSettings.config.advancedStyling}isDegreeMode(){return this.graphSettings.degreeMode}areLogModeRegressionsForced(){return this.graphSettings.config.forceLogModeRegressions}setAllRegressionsToLogMode(){for(let e of this.getAllItemModels())e.type==="expression"&&e.formula&&e.formula.is_regression&&iE(e,!0)}isGraphSettingsOpen(){return this.layoutModel.graphSettingsOpen}isAddExpressionOpen(){return this.layoutModel.addExpressionOpen}shouldRenderList(){if(this.layoutModel.expressionsVisible)return!0;var e=this.layoutModel.expressionsHiddenTime;return e===void 0?!1:Date.now()-e<=500}isListVisible(){return this.layoutModel.expressionsVisible}isGrapherEnabled(){return this.graphSettings.config.graphpaper!==!1}isListEnabled(){return this.graphSettings.config.expressions!==!1}areDistributionsEnabled(){return this.graphSettings.config.distributions===!0}isExpressionListFocused(){let e=this.getFocusLocation();if(!e)return!1;switch(e.type){case"settings":case"generic-menu":case"expression-menu":case"editable-label":case"geo-token":case"multi-select-more-icon":case"multi-select-transformations-icon":case"geo-header-back-link":case"multi-select-delete-icon":case"multi-select-show-hide-icon":case"new-transformation-number":case"label-points-icon":case"geo-show-constructions-icon":case"geo-basic-tool":case"geo-basic-tool-dropdown":case"geo-basic-tool-menu-item":case"regression-output":case"graph-paper":case"zoom-restore-btn":return!1;case"distribution-param":case"cdf-limit":case"slider-limit":case"domain-limit":case"expression":case"visualization-prop":case"search-expressions":case"replace-expressions":case"ticker":case"table":case"image":case"readonly-expression":case"braille-output":case"table-container":case"text":case"folder":case"add-item-btn":case"add-expression-btn":case"add-note-btn":case"add-table-btn":case"add-folder-btn":case"add-ticker-btn":case"add-image-btn":case"change-image-btn":case"edit-list-toggle":case"expression-icon":case"image-icon":case"slider-icon":case"slider-animation-properties-icon":case"slider-thumb":case"table-icon":case"action-icon":case"hide-expression-list-btn":case"show-expression-list-btn":case"top-level-icon":return!0;default:return e}}needsFakeKeypad(){if(this.inAudioTraceMode()&&this.isKeypadEnabled())return!0;let e=this.getFocusLocation();if(!e||this.getBrailleMode()!=="none"&&ko())return!1;switch(e.type){case"settings":return LP(e.location);case"new-transformation-number":case"distribution-param":case"cdf-limit":case"slider-limit":case"domain-limit":case"expression":case"visualization-prop":case"search-expressions":case"replace-expressions":case"ticker":return!0;case"expression-menu":return e.location==="opacity"||e.location==="linewidth"||e.location==="lineopacity"||e.location==="pointopacity"||e.location==="pointsize"||e.location==="labelsize"||e.location==="labelangle"||e.location==="updaterule";case"table":{if(this.isInEditListMode())return!1;let n=e.location;if(n.row===0)return!0;var r=this.getItemModel(e.id);if(!r||r.type!=="table")return!1;let o=r.columnModels[n.column];return o?!o.disabled:!1}case"image":return e.location!=="name";case"readonly-expression":case"braille-output":case"regression-output":case"graph-paper":case"table-container":case"text":case"folder":case"add-item-btn":case"add-expression-btn":case"add-note-btn":case"add-table-btn":case"add-folder-btn":case"add-ticker-btn":case"add-image-btn":case"change-image-btn":case"edit-list-toggle":case"hide-expression-list-btn":case"show-expression-list-btn":case"geo-token":case"multi-select-more-icon":case"multi-select-transformations-icon":case"geo-header-back-link":case"multi-select-delete-icon":case"multi-select-show-hide-icon":case"label-points-icon":case"geo-show-constructions-icon":case"geo-basic-tool":case"geo-basic-tool-dropdown":case"geo-basic-tool-menu-item":case"generic-menu":case"zoom-restore-btn":return!1;case"expression-icon":case"image-icon":case"slider-icon":case"action-icon":case"slider-animation-properties-icon":case"slider-thumb":case"table-icon":case"top-level-icon":return!1;case"editable-label":return this.getItemEditableLabelMode(e.id)==="MATH";default:return e}}isIdentifierRenameValid(e){return Qs(e)?!CA(this.listModel,e):!1}getBrandingMode(){return this.getEditLink()?"static-edit-link":this.getGraphSettings().config.editOnWeb?"edit-link":"powered-by"}getEditLink(){return window.iframeEmbedBrandingLink}_expressionZoomFit(e,r){let i=this.getItemModel(e);if(!this.grapher||!this.isZoomFitEnabled()||!i||i.type!=="expression"&&i.type!=="table"||!i.boundingBoxes||!i.boundingBoxes.length)return;var n=this.grapher.viewportController;if(!("zoomCustom"in n))return;let o=Nw(i.boundingBoxes,n.getProjection());o&&n.zoomCustom(o),r&&ri(this,{type:"zoom-restore-btn"})}_deleteItemAndAnimateOut(e,r){let n=this.getItemSelectorById(e);n&&(n.css({transition:.2+"s",opacity:"0",transform:"scale(.1, .1)"}),setTimeout(()=>{this.dispatch({type:"finish-deleting-item-after-animation",id:e,setFocusAfterDelete:r})},1e3*.2))}_finishDeletingItemAfterAnimation(e,r){let i=this.getItemModel(e);if(!i)return;let n=this.getItemSelectorById(e);var o=n&&document.activeElement&&V(document.activeElement).closest(n).length>0,a=cd(this.listModel,i.index);if(this._removeExpressionSynchronously(i),!(!r||!o)){if(!a){let s=Ru(this.listModel);s&&(a=s)}a&&Yi(this,a.id,"end")}}_removeExpressionSynchronously(e){let r=zu(this.listModel,e.index);if(this.garbageCollectGeo(r),AA(this.listModel)){let i=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});ts(this.listModel,i)}}setRootElt(e){this.rootElt=e,this.dragdrop_expressions=new Yf(this)}getRootElt(){return this.rootElt}_hideExpressions(e){this.graphSettings.config.expressions&&(Dr(this.listModel,void 0),this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{expressionsVisible:!1,expressionsHiddenTime:Date.now()}),e?ri(this,{type:"show-expression-list-btn"}):Ur())}_showExpressions(e){this.graphSettings.config.expressions&&(this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{expressionsVisible:!0}),e?ri(this,{type:"hide-expression-list-btn"}):Ur())}_showToast(e){if(this.toastData=e,this.toastData.hasOwnProperty("undoCallback")&&!Xy){let i=gi?this.s("graphing-calculator-text-toast-undo-cmd-z"):this.s("graphing-calculator-text-toast-undo-ctrl-z");this.toastData.message+=" "+i}clearTimeout(this._hideToastTimeout);let r=typeof e.hideAfter=="number"?e.hideAfter:6e3;r>0&&(this._hideToastTimeout=setTimeout(()=>{this.dispatch({type:"toast/close",onHide:this.toastData.onHide})},r))}_setExpressionPropertiesFromAPI(e,r){let i=this.getItemModel(e);if(i)if(i.type==="table"&&r.columns){r=__dcg_shared_module_exports__['M'](r);let a=cG(i,r);var n=_u(this.listModel,a);this._toplevelReplaceItemAt(i.index,n,!1)}else{let a=this.getItemModel(e);if(!a)return;for(var o in r)if(r.hasOwnProperty(o))switch(o){case"slider":{if(a.type!=="expression")continue;let s=r[o];s.hasOwnProperty("min")&&fg(a,s.min),s.hasOwnProperty("max")&&mg(a,s.max),s.hasOwnProperty("step")&&yg(a,s.step),s.hasOwnProperty("isPlaying")&&zo(a,s.isPlaying)}break;case"polarDomain":{if(a.type!=="expression")continue;bg(a,__dcg_shared_module_exports__['Xb'](r.polarDomain.min)),wg(a,__dcg_shared_module_exports__['Xb'](r.polarDomain.max))}break;case"parametricDomain":{if(a.type!=="expression")continue;xg(a,__dcg_shared_module_exports__['Xb'](r.parametricDomain.min)),vg(a,__dcg_shared_module_exports__['Xb'](r.parametricDomain.max))}break;case"hidden":this._setItemHidden(e,r.hidden);break;case"secret":WS(a,r.secret);break;case"readonly":Zb(a,r.readonly);break;case"color":{if(a.type!=="expression")continue;sx(a,r.color)}break;case"dragMode":{if(a.type!=="expression")continue;gd(a,r.dragMode)}break;case"label":{if(a.type!=="expression")continue;Ml(a,r.label)}break;case"showLabel":{if(a.type!=="expression")continue;hd(a,r.showLabel)}break;case"labelSize":{if(a.type!=="expression")continue;kg(a,r.labelSize)}break;case"labelOrientation":{if(a.type!=="expression")continue;lE(a,r.labelOrientation)}break;case"latex":if(a.type!=="expression")continue;ca(a,r.latex);break;case"points":if(a.type!=="expression")continue;oE(a,!!r.points);break;case"lines":if(a.type!=="expression")continue;sE(a,!!r.lines);break;case"pointStyle":if(a.type!=="expression")continue;aE(a,r.pointStyle);break;case"pointSize":if(a.type!=="expression")continue;Eg(a,r.pointSize);break;case"pointOpacity":if(a.type!=="expression")continue;Sg(a,r.pointOpacity);break;case"lineStyle":if(a.type!=="expression")continue;lx(a,r.lineStyle);break;case"lineWidth":if(a.type!=="expression")continue;Yu(a,r.lineWidth);break;case"lineOpacity":if(a.type!=="expression")continue;ju(a,r.lineOpacity);break;case"fill":if(a.type!=="expression")continue;nE(a,r.fill);break;case"fillOpacity":if(a.type!=="expression")continue;Cg(a,r.fillOpacity);break;case"id":case"type":case"domain":break;default:throw new Error("trying to call setProperty for: "+o)}}}_isParentFolderHidden(e){let r=this.getItemModel(e);if(!r)return!1;let i=qo(r);return i?i.hidden:!1}_toggleItemHidden(e){if(this._isParentFolderHidden(e))this._setItemHidden(e,!1);else{let r=this.getItemModel(e);if(!r)return;switch(r.type){case"expression":case"image":case"folder":this._setItemHidden(e,!r.hidden);break;case"table":case"text":break;default:return r}}}_toggleTableColumnHidden(e,r){if(this._isParentFolderHidden(e))this._setTableColumnHidden(e,r,!1);else{let i=this.getItemModel(e);if(!i||i.type!=="table")return;let n=kn(i,r);if(!n)return;this._setTableColumnHidden(e,r,!n.hidden)}}_setTableColumnHidden(e,r,i){let n=this.getItemModel(e);if(!n||n.type!=="table")return;let o=Eb(n,r);!i&&this._isParentFolderHidden(e)&&this._setItemHidden(n.folderId,!1),fG(n,r,i),!i&&o&&TS(n,r,!0)}_setItemHidden(e,r){let i=this.getItemModel(e);if(i)switch(!r&&i.type!=="folder"&&this._isParentFolderHidden(i.id)&&this._setItemHidden(i.folderId,!1),i.type){case"expression":MV(i,r);break;case"folder":N0(i,r);break;case"image":_G(i,r);break;case"table":case"text":break;default:return i}}_addItemToEndFromAPI(e){let r=Bb(this.listModel);!e.secret&&r&&r.type==="expression"&&r.latex===""&&zu(this.listModel,r.index),ts(this.listModel,e)}copyExpressionToIndex(e,r,i){let n={stripDefaults:!1},o;switch(e.type){case"expression":o=pd(e,n);break;case"table":o=Gu(e,n),o.columns&&o.columns.forEach(s=>{s.id=this.generateId()});break;case"image":o=Ab(e,n);break;case"text":o=kb(e,n);break;default:return}let a=this.createItemModel(__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},o),{id:this.generateId()}));this._toplevelInsertItemAt(r,a,!1,i||e.folderId)}_toplevelInsertItemAt(e,r,i,n){let o=r;ka(this.listModel,o,e),n&&Eo(o,n),i&&Yi(this,o.id)}_toplevelNewItemAtSelection(e,r){this.setGeoTool("selection");let i=this.getSelectedItem();if(i){let s=i.type==="expression"&&!i.latex;if(s&&!i.folderId&&(e.type!=="expression"||e.latex))return this._toplevelReplaceItemAt(i.index,e,r.shouldFocus);if(s&&i.folderId&&e.type!=="expression"&&e.type!=="folder")return this._toplevelReplaceItemAt(i.index,e,r.shouldFocus);if(i.type!=="folder"&&!i.folderId){let l;return this._toplevelInsertItemAt(i.index+1,e,r.shouldFocus,l)}if(i.type!=="folder"&&i.folderId&&e.type!=="folder")return this._toplevelInsertItemAt(i.index+1,e,r.shouldFocus,i.folderId);if(i.type==="folder"&&!i.collapsed&&e.type!=="folder")return this._toplevelInsertItemAt(i.index+1,e,r.shouldFocus,i.id)}let n=this.getFirstFullyVisibleItem();for(n&&n.type==="folder"&&(n=this.getItemModelByIndex(n.index+1));n&&n.type!=="folder"&&n.folderId;)n=this.getItemModelByIndex(n.index+1);let o=n?n.index:this.getItemCount(),a;return this._toplevelInsertItemAt(o,e,r.shouldFocus,a)}getFirstFullyVisibleItem(){let e=ek(this);if(e)return es(this.listModel,e)}find$(e){return V(this.rootElt).find(e)}getExppanelSelector(){let e=zf(this);if(e)return V(e)}scrollItemIntoView(e){if(!this.rootElt||!this.isListVisible())return;let r=this.getItemSelectorById(e.id),i=Wf(this);if(!(!r||!i)){if(e.type==="table"){let n=r.find(".dcg-row .dcg-selected");if(n.length===1){ss(n,i,60);return}}ss(r,i,90)}}scrollSelectedItemIntoView(){let e=this.getSelectedItem();if(e){if(e&&e.type!=="folder"&&e.folderId){let r=this.getItemModel(e.folderId);r&&r.type==="folder"&&r.collapsedChildIsSelected&&(e=r)}this.scrollItemIntoView(e)}}_pasteTable(e){if(!this.grapher)return;let r=ug(this.listModel),i=MS(r,e,this),n=this.createItemModel(i);this._toplevelNewItemAtSelection(n,{shouldFocus:!0}),this._closeAddExpression();let o=this.grapher.getProjection(),a=o.viewport,s=__dcg_shared_module_exports__['l'](e[0],function(u){return parseFloat(u)}),l=__dcg_shared_module_exports__['l'](e[1],function(u){return parseFloat(u)}),c={xmin:__dcg_shared_module_exports__['s'](s),xmax:__dcg_shared_module_exports__['r'](s),ymin:__dcg_shared_module_exports__['s'](l),ymax:__dcg_shared_module_exports__['r'](l),type:"table"};if(isFinite(c.xmin)&&isFinite(c.xmax)&&isFinite(c.ymin)&&isFinite(c.ymax)&&(c.xmax>a.xmax||c.xmin<a.xmin||c.ymax>a.ymax||c.ymin<a.ymin)){let u=Nw([c],o);if(u){let h=new Si(u.xmin,u.xmax,u.ymin,u.ymax);this.grapher.viewportController.setViewport(h),this._showToast({message:this.s("graphing-calculator-text-toast-zoom-to-fit"),undoCallback:()=>{this.dispatch({type:"undo"})}})}}}_insertSeveralExpressions(e){for(var r=0;r<e.length;r++){let i;i=this.createItemModel(e[r]),this._toplevelNewItemAtSelection(i,{shouldFocus:!0})}}_appendNumberList(e){let r=this.getSelectedItem();if(r&&r.type==="expression"){let i=r.latex,n=this.createItemModel({type:"expression",id:this.generateId(),latex:i+e});return this._toplevelReplaceItemAt(r.index,n,!0)}}_openOnWeb(){this.runAfterDispatch(()=>{if(!this.grapher)return;let e=JSON.stringify(this.getState()),r=this.grapher.screenshot({width:100,height:100}),o=(this.getGraphSettings().config.crossOriginSaveTest?"/":"https://www.desmos.com/")+"api/v1/calculator/cross_origin_save",a=V('<input type="text" name="calc_state" />').val(e),s=V('<input type="text" name="thumb_data" />').val(r),l=V('<form target="_blank" method="POST" style="display:none;"></form>').attr("action",o).append(V('<input type="text" name="is_open_on_web" value="true" />')).append(V('<input type="text" name="my_graphs" value="false" />')).append(V('<input type="text" name="is_update" value="false" />')).append(a).append(s);V(this.rootElt).append(l),l.trigger("submit").remove()})}notifyBugsnagAboutMissingSelectedItem(e,r){let i=Hu(this.listModel);var n="";try{i?n=JSON.stringify(i.cachedUndoRedoFullState,null,2):n="undefined"}catch(s){n="[[could not stringify]]"}var o="";try{if(!i)o="undefined";else{let s={id:i.id,index:i.index,displayIndex:i.index,secretIndex:i.secretIndex,guid:i.guid,renderShell:i.renderShell,isHiddenFromUI:i.isHiddenFromUI,hasDCGView:!!i.dcgView,cachedRenderHeight:i.cachedRenderHeight};o=JSON.stringify(s,null,2)}}catch(s){o="[[could not stringify]]"}var a="";try{a=JSON.stringify(HS(this.listModel),null,2)}catch(s){a="[[could not stringify]]"}ao("ReplaceItemAtError: no item at index",{metaData:{index:e,shouldFocus:r,selectedModelJSON:o,selectedItemJSON:n,listStateJSON:a}})}_toplevelReplaceItemAt(e,r,i){let n=r,o=this.getItemModelByIndex(e);o||this.notifyBugsnagAboutMissingSelectedItem(e,i);let a=o.type!=="folder"&&o.folderId;zu(this.listModel,e),ka(this.listModel,n,e),a&&Eo(n,a),i&&Yi(this,n.id)}convertImageToDraggable(e){let r=this.getItemModel(e);if(!r||r.type!=="image")return;let i=r.folderId,n=r.index+1,o=r.center,a=ug(this.listModel),s=__dcg_shared_module_exports__['Ta']("C_"+a),l=this.createItemModel({id:this.generateId(),type:"expression",latex:s+"="+o,dragMode:"XY",hidden:!0});ka(this.listModel,l,n),i&&Eo(l,i),Ho(r,"center",s),VS(r,!0),LS(r,!0),this.listModel.openItemMenu=void 0}createSlidersForItem(e,r){let i=this.getItemModel(e);if(!i)return;let n=i.type!=="folder"&&i.folderId;return this.createSliders({model:i,folderId:n,index:i.index+1},r)}createSlidersForTicker(e){return this.createSliders({model:this.listModel.ticker,folderId:!1,index:0,doNotChangeFocus:!0},e)}createSliders({model:e,folderId:r,index:i,doNotChangeFocus:n},o){var a=[];e.type==="ticker"?Ob(e,(p,g)=>{a.push({latex:p,location:g})}):Ou(e,(p,g)=>{a.push({latex:p,location:g})});var s=EP(a,o,{degreeMode:this.graphSettings.degreeMode});let l=e.formula?e.formula.action_value:void 0;for(var c=o.map(p=>{var g=s[p],y="1";g&&g.value!==void 0&&(y=g.value);var w;p===""?w="":l&&l.hasOwnProperty(p)?w=l[p]:w=__dcg_shared_module_exports__['Ta'](p)+"="+y;var b={type:"expression",id:this.generateId(),latex:w,color:this.getNextColor(),hidden:!!w};return g&&(g.min!==void 0&&(b.slider||(b.slider={}),b.slider.hardMin=!0,b.slider.min=g.min),g.max!==void 0&&(b.slider||(b.slider={}),b.slider.hardMax=!0,b.slider.max=g.max),g.step!==void 0&&(b.slider||(b.slider={}),b.slider.step=g.step)),b}),u=c.length-1;u>=0;u--){let p=this.createItemModel(c[u]);ka(this.listModel,p,i),r&&Eo(p,r)}if(n)return;let h=c[c.length-1];h.latex===""?Yi(this,h.id):ri(this,void 0)}_uploadImagesAndWaitForThemToLoad(e){let{files:r,id:i}=e;if(!r||r.length===0){this._showToast({message:this.s("graphing-calculator-text-toast-no-file-selected")});return}if(i&&r.length>1){this._showToast({message:this.s("graphing-calculator-text-toast-choose-one-file")});return}let n=jG({controller:this,files:r,id:i}),o=n.errors[0];o&&this._showToast({message:o});for(let a of n.tokens)this.__pendingImageUploads[a]=!0;this.isUploadingImages()&&this._showToast({message:this.s("graphing-calculator-text-toast-uploading-images"),onHide:()=>{this._clearPendingImageUploads()}})}getImageToRetry(){let e;for(let r of this.getAllItemModels())r.type==="image"&&r.loadStatus==="failed"&&(!e||e.failures>r.failures)&&(e=r);return e}retryLoadingFailedImage(e){let r=Date.now(),i=r-this.imageRetryState.lastAttemptTime,n=1e3*Math.pow(2,this.imageRetryState.attempts);this.imageRetryState.attempts>0&&i<n||(OS(e),this.imageRetryState={lastAttemptTime:r,attempts:this.imageRetryState.attempts+1})}getSelectedItem(){return Hu(this.listModel)}getAllSelectedItems(){return qb(this.listModel)}getOpenItemMenu(){return this.listModel.openItemMenu}isItemSettingsMenuOpen(e){var r=this.listModel.openItemMenu;return r?r.guid===e:!1}closeItemSettingsMenu(){let e=this.getOpenItemMenu();e!==void 0&&(e.focusFirstOption&&(e.previousFocusLocation!==void 0?ri(this,e.previousFocusLocation):this.focusOpenMenuIcon()),this.listModel.openItemMenu=void 0)}focusOpenMenuIcon(){let e=this.getOpenItemMenu();e&&(e.type==="slider"?this.dispatch({type:"set-focus-location",location:{type:"slider-animation-properties-icon",id:e.model.id}}):e.type==="image"?this.dispatch({type:"set-focus-location",location:{type:"image-icon",id:e.model.id}}):e.type==="table-column"?this.dispatch({type:"set-focus-location",location:{type:"table-icon",id:e.model.table.id,columnId:e.model.id}}):e.type==="geo-tool-dropdown"?this.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool-dropdown",tool:e.tools[0]}}):e.type==="multi-select-more"?this.dispatch({type:"set-focus-location",location:{type:"multi-select-more-icon"}}):e.type==="multi-select-transformations"?this.dispatch({type:"set-focus-location",location:{type:"multi-select-transformations-icon"}}):this.dispatch({type:"set-focus-location",location:{type:"expression-icon",id:e.model.id}}))}getFocusedItem(){return kP(this)}getFocusLocation(){return this.focusLocation}isFocusLocationFocused(e){let r=this.focusLocation,i=e;return!r||!i?!1:__dcg_shared_module_exports__['E'](r,i)}isCurrentFocusLocationValid(){let e=this.focusLocation;if(!e)return!0;if(e.type==="settings")return e.location==="icon"||this.isGraphSettingsOpen();if(e.type==="add-item-btn"||e.type==="edit-list-toggle"||e.type==="hide-expression-list-btn"||e.type==="show-expression-list-btn")return this.isListEnabled();if(e.type==="add-expression-btn"||e.type==="add-table-btn")return this.layoutModel.addExpressionOpen;if(e.type==="add-note-btn")return this.layoutModel.addExpressionOpen&&this.areNotesEnabled();if(e.type==="add-folder-btn")return this.layoutModel.addExpressionOpen&&this.areFoldersEnabled();if(e.type==="add-ticker-btn")return this.layoutModel.addExpressionOpen&&this.areActionsEnabled();if(e.type==="add-image-btn")return this.layoutModel.addExpressionOpen&&this.areImagesEnabled();if(e.type==="zoom-restore-btn")return!0;if(e.type==="search-expressions"||e.type==="replace-expressions")return this.expressionSearchOpen;if(e.type==="ticker")return this.listModel.ticker.open;if(e.type==="generic-menu")return!!this.getOpenItemMenu();if(e.type==="graph-paper"){let n=this.getGrapher();return!!(n&&n.getIsVisible()&&n.settings.config.graphpaper)}if(e.type==="geo-show-constructions-icon"||e.type==="geo-token"||e.type==="multi-select-more-icon"||e.type==="multi-select-transformations-icon"||e.type==="label-points-icon")return this.isGeoUIActive();if(e.type==="new-transformation-number"){let n=this.getGeoModel(),o=n.getCurrentTool(),a=n.getNonObjectsState().ui.currentTool.inputIndex,s=o.getSpec&&o.getSpec();return!!s&&!!s.inputs[a]&&s.inputs[a].type==="number"}if(e.type==="geo-header-back-link")return this.isGeoUIActive()&&this.hasAnyItemsSelected();if(e.type==="multi-select-delete-icon"||e.type==="multi-select-show-hide-icon")return this.isGeoUIActive()&&this.getActiveTool()==="box-selection"&&this.hasAnyItemsSelected();if(e.type==="geo-basic-tool"||e.type==="geo-basic-tool-dropdown")return this.isGeoUIActive()&&e.tool!=="";if(e.type==="regression-output")return e.parameter!=="";let r=this.getOpenItemMenu();if(e.type==="geo-basic-tool-menu-item")return this.isGeoUIActive()&&e.tool!==""&&r!==void 0&&r.type==="geo-tool-dropdown";let i;if(r&&r.type==="table-column"?i=r.model.table:i=this.getItemModel(e.id),!i)return!1;if(e.type==="change-image-btn")return this.listModel&&i.type==="image"&&this.areImagesEnabled();if(e.type==="expression-menu"){if(e.location==="start"||e.location==="end"||e.location==="updaterule"||e.location==="anywhere"||i.type==="table")return!0;if(i.type!=="expression")return!1;let{points:n,lines:o,fill:a}=i;tl(i)&&(a=!0);let s=__dcg_shared_module_exports__['$b'](i.formula.expression_type,{points:n,lines:o,fill:a});return!(!s.fill&&!s.points&&!s.lines&&!i.showLabel)}if(!this.isItemSelected(e.id)&&e.type!=="editable-label")return!1;switch(e.type){case"domain-limit":return!(i.type!=="expression"||!ux(i));case"expression-icon":case"top-level-icon":return!0;case"image-icon":return i.type==="image"&&i.loadStatus!=="loading"&&i.loadStatus!=="failed"&&!i.error;case"action-icon":return!(i.type!=="expression"||!tp(i));case"slider-icon":case"slider-animation-properties-icon":case"slider-thumb":case"slider-limit":return!(i.type!=="expression"||!LV(i));case"table-icon":return i.type==="table"&&this.getGraphSettings().config.graphpaper;case"visualization-prop":return!(i.type!=="expression"||!hx(i));case"distribution-param":if(i.type!=="expression")return!1;let n=pa(i);return n?e.location in n.values:!1;case"cdf-limit":return i.type!=="expression"?!1:Al(i);case"image":return i.type==="image";case"folder":return i.type==="folder";case"text":return i.type==="text";case"expression":return i.type==="expression"&&!this.isInEditListMode();case"readonly-expression":return this.isItemReadonly(i.id)||i.type==="expression"&&this.isInEditListMode();case"braille-output":return i.type==="expression"&&this.getBrailleMode()!=="none";case"table":return i.type!=="table"?!1:xG(i,e.location);case"table-container":return i.type==="table"&&this.isInEditListMode();case"editable-label":return i.type!=="expression"?!1:Zu(i);default:return e}}isDragDropActive(){return!!this.listModel.dragState}isItemBeingDragged(e){let r=this.listModel.dragState;return!!(r&&r.firstItemId===e)}getDraggedItemId(){let e=this.listModel.dragState;return e&&e.firstItemId}getRawDragState(){return this.listModel.dragState}initStateStack(){this.stateStack=new $l,this.stateStack.addState({diffState:this.getUndoRedoDiffState(),fullState:this.getUndoRedoFullState()})}getUndoRedoDiffState(){return{randomSeed:this.getRandomSeed(),layoutModel:this.layoutModel,settingsViewModel:this.settingsViewModel,graph:this.grapher?this.grapher.getUndoRedoState():void 0,expressions:PA(this.listModel),wasCompleteSetState:this.isCurrentlyDoingSetState}}getUndoRedoFullState(){return{randomSeed:this.getRandomSeed(),layoutModel:this.layoutModel,settingsViewModel:this.settingsViewModel,graph:this.grapher?this.grapher.getUndoRedoState():void 0,expressions:HS(this.listModel),wasCompleteSetState:this.isCurrentlyDoingSetState}}getState(e){let r={stripDefaults:!0};e&&e.hasOwnProperty("stripDefaults")&&(r.stripDefaults=!!e.stripDefaults);let i=this.grapher?this.grapher.getState(r):__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.getBlankState().graph),{degreeMode:this.graphSettings.degreeMode});var n={version:sl,randomSeed:this.getRandomSeed(),graph:i,expressions:OA(this.listModel,r)};return e&&e.avoidBackMigration?__dcg_shared_module_exports__['M'](n):wP(__dcg_shared_module_exports__['M'](n))}isGeometry(){return this.graphSettings.config.product==="geometry-calculator"}isMultiSelectEnabled(){return this.isGeometry()}canLoadPastedLink(e){return this.graphSettings.config.pasteGraphLink?this.isGeometry()?Jf(e)||HP(e)||Bw(e):Jf(e):!1}getBlankState(){return this.isGeometry()?Rp:this.graphSettings.config.clearIntoDegreeMode?__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},Lp),{graph:__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},Lp.graph),{degreeMode:!0})}):Lp}externalSetState(e,r){this._clearPendingImageUploads(),this.rootElt&&V(document.activeElement).closest(this.rootElt).length&&V(document.activeElement).trigger("blur"),r||(r={}),e||(e=this.getBlankState()),typeof e=="string"&&(e=JSON.parse(e)),e&&(e=bs(e));let i=this.graphSettings.config.product,n;if(!e.graph||e.graph.product===void 0?n="graphing":n=e.graph.product,n!==i)throw new Error(`Data Error: state appears to have been saved in the '${n}' product and cannot be opened in the '${i}' product.`);let o=this.layoutModel;this.setState(e,r),GA(this.listModel),Ub(this.listModel),this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},QD(this.graphSettings.config)),{keypadMinimized:o.keypadMinimized,keypadLayout:o.keypadLayout,keypadFunctionsOpen:o.keypadFunctionsOpen,expressionsVisible:!!this.graphSettings.config.expressions&&(this.isListVisible()||!!r.forceExpressionsOpen)}),this.settingsViewModel=ZD(),ri(this,void 0),r.forceUnsavedChanges?this.enqueueEvent("change"):this.enqueueEvent("clearUnsavedChanges")}setState(e,r){if(this.isCurrentlyDoingSetState=!0,this.suggestedIdentifierRename=void 0,this.lastUserUpdatedExpressionItem=void 0,"graph"in e&&(this.grapher?this.grapher.setGrapherState(e.graph):Hl.copyGraphProperties(e.graph,this.graphSettings)),"expressions"in e){Dr(this.listModel,void 0);let i=_A(e.expressions);i>=this.__nextItemId&&(this.__nextItemId=i+1),FA(this.listModel,e.expressions,r||{})}e.layoutModel&&(this.layoutModel=e.layoutModel),e.settingsViewModel&&(this.settingsViewModel=e.settingsViewModel),(!r||!r.allowUndo)&&this.clearUndoRedoHistory(),this.setRandomSeed(e.randomSeed||al())}updateToState(e){this.isCurrentlyDoingRestoreState=!0,this.suggestedIdentifierRename=void 0,this.lastUserUpdatedExpressionItem=void 0,"graph"in e&&this.grapher&&this.grapher.setGrapherState(e.graph,{doNotClear:!0}),"expressions"in e&&RA(this.listModel,e.expressions),e.layoutModel&&(this.layoutModel=e.layoutModel),e.settingsViewModel&&(this.settingsViewModel=e.settingsViewModel)}commitUndoRedoSynchronously(e){let r=this.stateStack.getState(),i=r&&r.diffState,n=this.getUndoRedoDiffState();if(j4(i,n))return;let o={diffState:n,fullState:this.getUndoRedoFullState()};$P(e)?(this.stateStack.addState(o),this.enqueueEvent("change",e)):this.stateStack.replaceInteriorState(o)}undo(){if(!this.canUndo())return;this.closeToast(),this.stateStack.undo();let e=this.stateStack.getState().fullState;e.wasCompleteSetState?this.setState(e,{allowUndo:!0}):this.updateToState(e),this.enqueueEvent("change",{type:"undo"})}redo(){if(!this.canRedo())return;this.stateStack.redo();let e=this.stateStack.getState().fullState;e.wasCompleteSetState?this.setState(e,{allowUndo:!0}):this.updateToState(e),this.enqueueEvent("change",{type:"undo"})}clearUndoRedoHistory(){this.stateStack.clear()}canUndo(){return this.stateStack.canUndo()}canRedo(){return this.stateStack.canRedo()}closeToast(){let e=this.toastData.onHide;e&&this.runAfterDispatch(e),this.toastData={}}_closeAddExpression(){this.layoutModel=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.layoutModel),{addExpressionOpen:!1})}doesDOMHaveSize(){return this.layoutMeasurements.width>0&&this.layoutMeasurements.height>0}_getExpListWidth(){var e;if(this.userSpecifiedExpListWidth!==void 0){let n=this.isGeometry()?320:200;e=Math.max(280,Math.min(this.layoutMeasurements.width-n,this.userSpecifiedExpListWidth))}else{if(e=this.layoutMeasurements.width,!e)return 356;var r=.2*e+160;e=Math.min(500,Math.max(280,r))}var i=this.layoutMeasurements.width-this.getGrapherHeight();return Math.abs(i-e)<=10?i:e}_setExpListWidth(e){this.userSpecifiedExpListWidth!==e&&(this.userSpecifiedExpListWidth=e)}getKeypadHeight(){return this.computeMajorLayout().keypad.height}isKeypadEnabled(){return!!this.graphSettings.config.keypad}isKeypadOpen(){if(!this.isKeypadEnabled())return!1;let e=this.layoutModel.keypadMinimized&&!this.isNarrow();return this.needsFakeKeypad()&&!e}isHideKeypadButtonVisible(){return this.getBrailleMode()==="none"&&this.isKeypadOpen()&&(!this.isNarrow()||this.inAudioTraceMode())}isKeypadFunctionsPopoverOpen(){return!!this.layoutModel.keypadFunctionsOpen}getKeypadLayout(){return this.layoutModel.keypadLayout}isLetterKeypadOpen(){let e=this.getKeypadLayout();return this.isKeypadOpen()&&(e==="letters"||e==="noQwertyLetters"||e==="capitalLetters"||e==="noQwertyCapitalLetters")}isFileDraggedOver(){return this.layoutModel.isFileDraggedOver}getGeoToolbarHeight(){return this.isGeoUIActive()?48:0}isNarrowGeometryHeader(){return this.computeMajorLayout().grapher.width<450}getGrapherHeight(){return this.layoutMeasurements.height-this.getGeoToolbarHeight()}computeMajorLayout(){var e=this.layoutMeasurements.width,r=this.layoutMeasurements.height,i=this.isNarrow(),n=this.isListVisible(),o=this.isKeypadOpen(),a=!this.isGrapherEnabled(),s=!this.isListEnabled(),l=!!this.getGraphSettings().config.projectorMode,c={left:0,top:0,width:0,height:0},u={left:0,top:0,width:0,height:0},h={left:0,top:r,width:e,height:l?i?185:193:169};s?(u.width=e,u.height=r):a?(c.width=e,c.height=r):n?i?(c.width=e,c.height=Math.round(.58*r),c.top=r-c.height,u.width=e,u.height=r-c.height):(c.width=this.getExpListWidth(),c.height=r,u.left=c.width,u.width=e-u.left,u.height=r):n||(i?(c.width=e,c.height=Math.round(.58*r),c.top=r,u.width=e,u.height=r):(c.width=this.getExpListWidth(),c.height=r,c.left=-c.width,u.width=e,u.height=r)),o&&(h.top-=h.height,s||(c.height-=h.height));let p=this.getGeoToolbarHeight();return p&&(u.top+=p,u.height-=p),{list:c,grapher:u,keypad:h}}isNarrow(){return this.isGeometry()?this.layoutMeasurements.width<600:this.layoutMeasurements.width<450}getLayoutMeasurements(){return this.layoutMeasurements}getCapExpressionSize(){return!!this.getGraphSettings().config.capExpressionSize}handleAudioTraceCommand(e){let r=this.getAudioGraph();if(r===void 0)return;let i=r.agNavigator;switch(e){case"on":this.runAfterDispatch(()=>{r.enterAudioTrace({fromKeypad:!0})});break;case"off":this.runAfterDispatch(()=>{r.exitAudioTrace()});break;case"hear-graph":r.hearGraph();break;case"stop-graph":r.stopGraph();break;case"volume-down":r.adjustVolume("down");break;case"volume-up":r.adjustVolume("up");break;case"speed-down":r.speedDown();break;case"speed-up":r.speedUp();break;case"previous-point":this.runAfterDispatch(()=>{r.reportAndMoveToPrevPoint()});break;case"next-point":this.runAfterDispatch(()=>{r.reportAndMoveToNextPoint()});break;case"previous-poi":this.runAfterDispatch(()=>{r.reportAndMoveToPrevPOI()});break;case"next-poi":this.runAfterDispatch(()=>{r.reportAndMoveToNextPOI()});break;case"previous-curve":this.runAfterDispatch(()=>{i.prevCurve()});break;case"next-curve":this.runAfterDispatch(()=>{i.nextCurve()});break;case"describe-point":r.describePoint();break;case"describe-curve":r.describeCurve();break;case"describe-axes":r.describeAxes();break;case"keyboard-shortcuts":this.enqueueEvent("showHotkeysModal",{type:"keypad/audio-trace",command:e});break;default:return e}}setAudioTraceSpeed(e){let r=this.getAudioGraph();r&&r.adjustPlaybackSpeed(e)}setGraphPaperFocus(e){ri(this,e.isFocused?{type:"graph-paper"}:void 0);var r=this.getGrapher();r==null||r.redrawAllLayers(),this.isGeoToolActive()&&this.runAfterDispatch(()=>{var i;e.isFocused&&this.getGeoModel().speakCurrentGeoToolHint(),(i=r==null?void 0:r.poiController)==null||i.handleGeoKeyboardPtMove()})}isGraphPaperFocused(){let e=this.getFocusLocation();return!!e&&e.type==="graph-paper"}setCanShowKeyboardShortcuts(e){this.canShowKeyboardShortcuts=e}getCanShowKeyboardShortcuts(){return this.canShowKeyboardShortcuts}getGeometryConstructionCount(){return this.getNumberOfItemsInFolder(__dcg_shared_module_exports__['uc'])}getAllGeometryConstructionIds(){return xA(this.listModel,__dcg_shared_module_exports__['uc'])}makeGeoAPI(){this.geoModel=new Bf(this)}getGeoTokenInfoFromAssignment(e){if(!e)return;let r=e.match(/^\$(\d+)/);if(r)return this.cachedGeoTokenInfo[r[1]]}getGeoDescription(e,r={includeDetails:!0}){if(!e)return this.s("graphing-calculator-narration-geometry-nothing-selected");if(e.type!=="expression"||!e.latex)return this.s("graphing-calculator-narration-geometry-not-a-construction");let i=e.formula.typed_constant_value;if(!i)return this.s("graphing-calculator-narration-geometry-not-a-construction");let n=this.grapher&&this.grapher.getProjection(),o=n&&n.viewport,a=e.formula.assignment||"",s=e.formula.geometry&&e.formula.geometry.call,l=s&&s.symbol,c=s&&s.parents?s.parents.map(R=>R===void 0?"":R[0]):[],u=i.valueType,h=i.value,p=[],g="",y,w,b,D,I,E,G,T,P,_,x;if(l==="apply"&&typeof c[0]=="string"){let R="",q=this.getItemsByIdentifier(c[0]);for(let K of q){if(K.type!=="expression")continue;let Y=K.formula.geometry;if(!(!Y||!Y.call)){R=Y.call.symbol;break}}R==="dilation"?p.push(this.raw("dilated")):R==="rotation"?p.push(this.raw("rotated")):R==="translation"?p.push(this.raw("translated")):R==="reflection"?p.push(this.raw("reflected")):p.push(this.raw("transformed"))}switch(u){case __dcg_shared_module_exports__['S']:if(l==="intersection"){e.label!==void 0&&e.label!==""?g=this.s("graphing-calculator-narration-geometry-intersection-with-assignment",{assignment:uo(e.label)}):/^\$/.test(a)?g=this.s("graphing-calculator-narration-geometry-unlabeled-intersection",{index:e.id}):g=this.s("graphing-calculator-narration-geometry-intersection-with-assignment",{assignment:a}),y=h[0],w=h[1],P=c[0]!==void 0?this.getGeoTokenInfoFromAssignment(c[0]):void 0,_=c[1]!==void 0?this.getGeoTokenInfoFromAssignment(c[1]):void 0,r.includeDetails&&o&&typeof y=="number"&&typeof w=="number"&&P!==void 0&&_!==void 0?p.push(this.s("graphing-calculator-narration-geometry-item-at-coordinates-and-intersection",{itemDescription:g,parent1:P.description,parent2:_.description,x:on(this,y,o),y:an(this,w,o)})):p.push(g);break}else if(l==="glider"){e.label!==void 0&&e.label!==""?g=this.s("graphing-calculator-narration-geometry-glider-with-assignment",{assignment:uo(e.label)}):/^\$/.test(a)?g=this.s("graphing-calculator-narration-geometry-unlabeled-glider",{index:e.id}):g=this.s("graphing-calculator-narration-geometry-glider-with-assignment",{assignment:a}),y=h[0],w=h[1],r.includeDetails&&o&&typeof y=="number"&&typeof w=="number"?p.push(this.s("graphing-calculator-narration-geometry-item-at-coordinates",{itemDescription:g,x:on(this,y,o),y:an(this,w,o)})):p.push(g);break}else e.label!==void 0&&e.label!==""?g=this.s("graphing-calculator-narration-geometry-point-with-assignment",{assignment:uo(e.label)}):/^\$/.test(a)?g=this.s("graphing-calculator-narration-geometry-unlabeled-point",{index:e.id}):g=this.s("graphing-calculator-narration-geometry-point-with-assignment",{assignment:a});y=h[0],w=h[1],r.includeDetails&&o&&typeof y=="number"&&typeof w=="number"?p.push(this.s("graphing-calculator-narration-geometry-item-at-coordinates",{itemDescription:g,x:on(this,y,o),y:an(this,w,o)})):p.push(g);break;case __dcg_shared_module_exports__['ca']:/^\$/.test(a)?g=this.s("graphing-calculator-narration-geometry-unlabeled-circle",{index:e.id}):g=this.s("graphing-calculator-narration-geometry-circle-with-assignment",{assignment:a}),y=h[0][0],w=h[0][1],G=h[1],r.includeDetails&&o&&typeof y=="number"&&typeof w=="number"&&typeof G=="number"?p.push(this.s("graphing-calculator-narration-geometry-item-at-coordinates-with-radius",{itemDescription:g,x:on(this,y,o),y:an(this,w,o),radius:nn(__dcg_shared_module_exports__['Ma'](G,o.xmax-o.xmin).latex)})):p.push(g);break;case __dcg_shared_module_exports__['ea']:/^\$/.test(a)?g=this.s("graphing-calculator-narration-geometry-unlabeled-arc",{index:e.id}):g=this.s("graphing-calculator-narration-geometry-arc-with-assignment",{assignment:a}),y=h[0][0],w=h[0][1],b=h[1][0],D=h[1][1],I=h[2][0],E=h[2][1],r.includeDetails&&o&&typeof y=="number"&&typeof w=="number"&&typeof b=="number"&&typeof D=="number"&&typeof I=="number"&&typeof E=="number"?p.push(this.s("graphing-calculator-narration-geometry-item-at-coordinates-with-middle-and-end",{itemDescription:g,x1:on(this,y,o),y1:an(this,w,o),x2:on(this,b,o),y2:an(this,D,o),x3:on(this,I,o),y3:an(this,E,o)})):p.push(g);break;case __dcg_shared_module_exports__['_']:T=h.length,T===3?/^\$/.test(a)?g=this.s("graphing-calculator-narration-geometry-unlabeled-triangle",{index:e.id}):g=this.s("graphing-calculator-narration-geometry-triangle-with-assignment",{assignment:a}):T===4?/^\$/.test(a)?g=this.s("graphing-calculator-narration-geometry-unlabeled-quadrilateral",{index:e.id}):g=this.s("graphing-calculator-narration-geometry-quadrilateral-with-assignment",{assignment:a}):/^\$/.test(a)?g=this.s("graphing-calculator-narration-geometry-unlabeled-polygon",{index:e.id,sideCount:T}):g=this.s("graphing-calculator-narration-geometry-polygon-with-assignment",{assignment:a,sideCount:T}),y=h[0][0],w=h[0][1],r.includeDetails&&o&&typeof y=="number"&&typeof w=="number"?p.push(this.s("graphing-calculator-narration-geometry-item-at-coordinates",{itemDescription:g,x:on(this,y,o),y:an(this,w,o)})):p.push(g);break;case __dcg_shared_module_exports__['ga']:case __dcg_shared_module_exports__['ia']:case __dcg_shared_module_exports__['aa']:u===__dcg_shared_module_exports__['ga']?/^\$/.test(a)?g=this.s("graphing-calculator-narration-geometry-unlabeled-line",{index:e.id}):g=this.s("graphing-calculator-narration-geometry-line-with-assignment",{assignment:a}):u===__dcg_shared_module_exports__['ia']?/^\$/.test(a)?g=this.s("graphing-calculator-narration-geometry-unlabeled-ray",{index:e.id}):g=this.s("graphing-calculator-narration-geometry-ray-with-assignment",{assignment:a}):u===__dcg_shared_module_exports__['aa']&&(/^\$/.test(a)?g=this.s("graphing-calculator-narration-geometry-unlabeled-segment",{index:e.id}):g=this.s("graphing-calculator-narration-geometry-segment-with-assignment",{assignment:a})),y=h[0][0],w=h[0][1],b=h[1][0],D=h[1][1],r.includeDetails&&o&&typeof y=="number"&&typeof w=="number"&&typeof b=="number"&&typeof D=="number"?p.push(this.s("graphing-calculator-narration-geometry-item-at-coordinates-to-coordinates",{itemDescription:g,x1:on(this,y,o),y1:an(this,w,o),x2:on(this,b,o),y2:an(this,D,o)})):p.push(g);break;case __dcg_shared_module_exports__['ka']:case __dcg_shared_module_exports__['ma']:/^\$/.test(a)?g=this.s("graphing-calculator-narration-geometry-unlabeled-angle",{index:e.id}):g=this.s("graphing-calculator-narration-geometry-angle-with-assignment",{assignment:a}),y=h[0][0],w=h[0][1],c.length&&(P=c[0]!==void 0?this.getGeoTokenInfoFromAssignment(c[0]):void 0,_=c[1]!==void 0?this.getGeoTokenInfoFromAssignment(c[1]):void 0,x=c[2]!==void 0?this.getGeoTokenInfoFromAssignment(c[2]):void 0),r.includeDetails&&o&&typeof y=="number"&&typeof w=="number"?P!==void 0&&_!==void 0&&x!==void 0?p.push(this.s("graphing-calculator-narration-geometry-item-at-coordinates-with-vertex-from-to",{itemDescription:g,x1:on(this,y,o),y1:an(this,w,o),parent1:P.description,parent2:_.description,parent3:x.description})):p.push(this.s("graphing-calculator-narration-geometry-item-at-coordinates",{itemDescription:g,x:on(this,y,o),y:an(this,w,o)})):p.push(g);break;default:p.push(this.s("graphing-calculator-narration-geometry-item-unknown"))}let L=p.join(" ");return this.activeTool==="box-selection"?this.isItemSelected(e.id)?this.s("shared-calculator-narration-item-selected",{item:L}):this.s("shared-calculator-narration-item-unselected",{item:L}):L}isDispatching(){return this.dispatcher.isDispatching()}getSuggestedIdentifierRenameInfo(e){if(this.suggestedIdentifierRename&&this.suggestedIdentifierRename.id===e)return this.suggestedIdentifierRename}updateSuggestedIdentifierRenameInfo(){if(!this.shouldShowAuthorFeatures())return;let e=this.lastUserUpdatedExpressionItem;if(!e){this.suggestedIdentifierRename=void 0;return}this.suggestedIdentifierRename&&this.suggestedIdentifierRename.id!==e.id&&(this.suggestedIdentifierRename=void 0);var r=e.formula.assignment||"",i=r?__dcg_shared_module_exports__['Ta'](r):"";if(!this.suggestedIdentifierRename){i&&(this.suggestedIdentifierRename={id:e.id,from:i,to:i,countOfChanges:0});return}if(i!==this.suggestedIdentifierRename.to){if(this.suggestedIdentifierRename.to=i,this.suggestedIdentifierRename.from===this.suggestedIdentifierRename.to||!this.suggestedIdentifierRename.from||!this.suggestedIdentifierRename.to){this.suggestedIdentifierRename.countOfChanges=0;return}if(this.countIdentifierAssignments(r)>1){this.suggestedIdentifierRename.countOfChanges=0;return}var n=this.countGlobalIdentifierOccurences(this.suggestedIdentifierRename.from);this.suggestedIdentifierRename.countOfChanges=n}}getMathquillConfig(e){let r=e.additionalOperators||[];return{autoOperatorNames:Ko({additionalOperators:r,includeGeometryFunctions:this.isGeometry()}),autoCommands:qs({additionalCommands:this.isGeometry()?[]:["int"],disallowAns:this.isGeometry()}),logAriaAlerts:!!En().logAria}}constrainMultiSelect(){if(this.isMultiSelectEnabled())return;let e=qb(this.listModel);e.length>1&&Dr(this.listModel,e[0])}};function zP(t){return t&&__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t),{wasCompleteSetState:void 0,layoutModel:void 0,settingsViewModel:void 0})}function j4(t,e){return __dcg_shared_module_exports__['E'](zP(t),zP(e))}var hh=__dcg_shared_module_exports__['i'](ne());at();var Xf=class{constructor(e){this.controller=e}handleKeydown(e){let r=vi(e);if(Yh(e))e.stopPropagation(),e.preventDefault(),this.controller.hasVisibleAndUndoableToast()?this.controller.toastUndo():this.controller.dispatch({type:"undo"});else if(Jh(e))e.stopPropagation(),e.preventDefault(),this.controller.dispatch({type:"redo"});else if(e.altKey&&!e.ctrlKey&&!e.metaKey&&e.shiftKey&&r==="Z"){let i=this.controller.getSelectedItem();i&&i.id&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"expression-zoom-fit",id:i.id,focusAfterTap:!1}))}else if(e.altKey!==gi&&e.metaKey===gi&&!e.ctrlKey&&e.shiftKey&&r==="A"&&this.controller.isDecimalToFractionEnabled()){let i=this.controller.getSelectedItem();i&&i.type==="expression"&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"toggle-fraction-evaluation",id:i.id}),this.controller.runAfterDispatch(()=>{Sc(i)?ge(this.controller.s("shared-calculator-narration-show-as-fraction")):ge(this.controller.s("shared-calculator-narration-show-as-decimal"))}))}else if(!e.altKey&&e.ctrlKey!==gi&&e.metaKey===gi&&r==="F"){if(this.controller.isExpressionListFocused()){let i=qe.getFocusedMathquill(),n="";try{n=i.__controller.cursor.selection.join("latex")||""}catch(o){}this.controller.dispatch({type:"open-expression-search",rename:!!e.shiftKey,latex:n}),e.preventDefault(),e.stopPropagation()}}else if((e.altKey||e.metaKey)&&!e.ctrlKey&&!e.shiftKey&&r===void 0){if(Le(e)===Rn){let i=this.controller.getSelectedItem();i&&i.type==="folder"&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-folder-collapsed",id:i.id,isCollapsed:!0}),ge(this.controller.s("graphing-calculator-narration-folder-collapsed")))}else if(Le(e)===zn){let i=this.controller.getSelectedItem();i&&i.type==="folder"&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-folder-collapsed",id:i.id,isCollapsed:!1}),ge(this.controller.s("graphing-calculator-narration-folder-expanded")))}}else if(e.shiftKey&&(e.altKey||e.metaKey)&&!e.ctrlKey){if(Le(e)===Rn)e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-all-folders-collapsed",isCollapsed:!0}),ge(this.controller.s("graphing-calculator-narration-all-folders-collapsed"));else if(Le(e)===zn)e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-all-folders-collapsed",isCollapsed:!1}),ge(this.controller.s("graphing-calculator-narration-all-folders-expanded"));else if(r==="E"){if(!this.controller.isListEnabled())return;this.controller.isListVisible()?(this.controller.dispatch({type:"hide-expressions-list",focusShowIcon:!1}),ge(this.controller.s("graphing-calculator-narration-hide-expression-list"))):(this.controller.dispatch({type:"show-expressions-list",focusHideIcon:!1}),this.focusExpressionList()),e.preventDefault(),e.stopPropagation()}}else if(e.ctrlKey&&(e.altKey||e.metaKey)&&!e.shiftKey){if(r==="E"){if(!this.controller.isListEnabled())return;e.preventDefault(),e.stopPropagation(),this.focusExpressionList()}else if(r==="X"){if(!this.controller.isListEnabled())return;e.preventDefault(),e.stopPropagation(),this.controller.canUserAddExpressions()?(ge(this.controller.s("graphing-calculator-narration-add-expression")),this.controller.dispatch({type:"new-expression"})):ge(this.controller.s("graphing-calculator-narration-unable-to-add-expression"))}else if(r==="O"){if(!this.controller.isListEnabled())return;e.preventDefault(),e.stopPropagation(),this.controller.canUserAddExpressions()&&this.controller.areNotesEnabled()?(ge(this.controller.s("graphing-calculator-narration-add-note")),this.controller.dispatch({type:"new-text"})):ge(this.controller.s("graphing-calculator-narration-unable-to-add-note"))}else if(r==="F"&&this.controller.canUserAddExpressions()&&this.controller.areFoldersEnabled())e.preventDefault(),e.stopPropagation(),ge(this.controller.s("graphing-calculator-narration-add-folder")),this.controller.dispatch({type:"new-folder"});else if(r==="I"&&this.controller.canUserAddExpressions()&&this.controller.areImagesEnabled())e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"toggle-add-expression",focusOnOpen:!1}),this.controller.runAfterDispatch(()=>{this.controller.find$(".dcg-add-expression-container input[type=file]").trigger("click"),ge(this.controller.s("graphing-calculator-narration-add-image"))});else if(r==="T")e.preventDefault(),e.stopPropagation(),this.controller.canUserAddExpressions()?(ge(this.controller.s("graphing-calculator-narration-add-table")),this.controller.dispatch({type:"new-table"})):ge(this.controller.s("graphing-calculator-narration-unable-to-add-table"));else if(r==="M"&&this.controller.isGeoUIActive())e.preventDefault(),e.stopPropagation(),this.controller.getActiveTool()==="box-selection"&&this.controller.hasAnyItemsSelected()?this.controller.dispatch({type:"set-focus-location",location:{type:"geo-header-back-link"}}):this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:this.controller.getActiveTool()}});else if(r==="G")e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"toggle-graph-settings",focusOnOpen:!0});else if(r==="P"){e.preventDefault(),e.stopPropagation();let i;if(this.controller.isGeoUIActive()){this.controller.dispatch({type:"set-focus-location",location:{type:"graph-paper"}});return}else i=this.controller.find$(".dcg-tabbable-point, .dcg-tabbable-clickableobject, .dcg-tabbable-draggableimage").filter("[tabindex=0]"),i.length===0&&(i=this.controller.find$(".dcg-editable-label-border").find('input, textarea, [role="textbox"]'));this.focusElement(i.first(),this.controller.s("graphing-calculator-narration-no-interactive-points"))}else if(r==="Z"){let i=this.controller.getSelectedItem();i&&i.id&&this.controller.dispatch({type:"expression-zoom-fit",id:i.id,focusAfterTap:!1})}else if(r==="D"&&this.controller.canUserAddExpressions()){e.preventDefault(),e.stopPropagation();let i=!this.controller.isInEditListMode();this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:i,focusExpressionList:!0})}}else if(!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey){if(Le(e)===oa)(!document.activeElement||!mc(V(document.activeElement)))&&e.preventDefault();else if(Le(e)===oo&&!this.controller.getOpenItemMenu()&&!this.controller.isGraphSettingsOpen()){if(this.controller.isGeoUIActive()){let i=!1,n=this.controller.getGeoModel();if(this.controller.hasAnyItemsSelected()&&(this.controller.dispatch({type:"set-none-selected"}),i=!0),n.isToolplayActive()&&(this.controller.dispatch({type:"cancel-geo-toolplay"}),ge(this.controller.s("graphing-calculator-narration-geometry-tool-cancelled")),i=!0),this.controller.isGraphPaperFocused()&&(this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:this.controller.getActiveTool()}}),i=!0),this.controller.getActiveTool()!=="selection"&&!i){this.controller.dispatch({type:"select-geo-tool",tool:"selection"});let o=this.controller.getFocusLocation();o&&o.type==="geo-basic-tool"&&this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool",tool:this.controller.getActiveTool()}}),i=!0}if(i){e.preventDefault(),e.stopPropagation();return}}this.controller.isInEditListMode()&&this.controller.find$(".dcg-options-menu").length===0&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!0}))}}else if(!e.metaKey&&!e.shiftKey&&e.ctrlKey===gi&&e.altKey===!gi){if(r==="N"){if(!this.controller.getBrailleControls())return;e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-braille-mode",mode:"nemeth"}),ge(this.controller.s("shared-calculator-narration-hotkey-braille-mode-nemeth"))}else if(r==="U"){if(!this.controller.getBrailleControls())return;e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-braille-mode",mode:"ueb"}),ge(this.controller.s("shared-calculator-narration-hotkey-braille-mode-ueb"))}else if(r==="Q"||r==="X"){if(!this.controller.getBrailleControls())return;e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-braille-mode",mode:"none"}),ge(this.controller.s("shared-calculator-narration-hotkey-braille-mode-off"))}else if(r==="6"){if(!this.controller.getBrailleControls())return;e.preventDefault(),e.stopPropagation();let i=!this.controller.getSixKeyInput();this.controller.dispatch({type:"set-six-key-input",useSixKeyInput:i}),ge(i?this.controller.s("shared-calculator-narration-six-key-mode-on"):this.controller.s("shared-calculator-narration-six-key-mode-off"))}else if(r==="D")e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-graph-settings",degreeMode:!this.controller.getGraphSettings().degreeMode}),ge(this.controller.getGraphSettings().degreeMode?this.controller.s("graphing-calculator-button-settings-degrees"):this.controller.s("graphing-calculator-button-settings-radians"));else if(r==="K"){if(!this.controller.isKeypadEnabled()||this.controller.inAudioTraceMode())return;e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"keypad/set-minimized",minimized:this.controller.isHideKeypadButtonVisible()})}}}focusExpressionList(){let e=this.controller.getSelectedItem();e?this.controller.dispatch({type:"move-focus-to-item",id:e.id}):this.controller.dispatch({type:"focus-first-expression"})}focusElement(e,r){e.length?e.trigger("focus"):r&&ge(r)}};at();function ok(){if(!document.activeElement)return;let t=V(document.activeElement);mc(t)&&V("<input />").prependTo("body").trigger("focus").attr({readonly:"readonly",disabled:"true"}).trigger("blur").remove()}at();var Y4=function(){{var t=0,e=1,r=2,i=!1,n=function(){o(document),i=!0},o=function(a){i||V(a).bind("touchstart",function(s){var l=V(s.target),c=t,u=null;if(!l.closest("[disablescroll]").length)for(;c===t&&l.length&&l[0].tagName!==void 0;){var h=l.css("overflow"),p=l.css("overflow-y");if(h!=="hidden"&&h!=="visible"&&p!=="hidden"&&p!=="hidden"){var g=l.scrollTop();g!==0&&(c=r),l.scrollTop(g+1),l.scrollTop()!==g&&(c=e|c,l.scrollTop(g))}l=l.parent()}if(c!==t){u=[];for(var y=s.originalEvent.touches,w=0;w<y.length;w++){var b={};for(var D in y[w])y[w].hasOwnProperty(D)&&(b[D]=y[w][D]);u.push(b)}}V(document).on("touchmove.scrollfix",function(I){if(u){var E=u[0],G=I.originalEvent.touches[0],T=G.screenY-E.screenY;(T>0&&!(c&r)||T<0&&!(c&e))&&(c=t),T&&(u=null)}c===t&&I.preventDefault()}),V(document).on("touchend.scrollfix",function(){V(document).off(".scrollfix")})})};return{limitScrollOnElement:o,limitScrollOnDocument:n}}}();var{limitScrollOnElement:Kw,limitScrollOnDocument:Vre}=Y4;var Kt=__dcg_shared_module_exports__['i'](ne());at();var mt=__dcg_shared_module_exports__['i'](ne());at();at();at();var jP=__dcg_shared_module_exports__['i'](ne());function J4(t){let e=V(t.target);return e.hasClass("dcg-exp-action-button")||e.hasClass("dcg-icon-duplicate")||e.hasClass("dcg-icon-remove")||e.hasClass("dcg-icon-lock")||e.hasClass("dcg-icon-pencil")}var Io=class extends jP.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,this._isFirstRender=!0,this._isDragCopy=this.props.isDragCopy()}onItemViewMounted(){this._isDragCopy||(this.model.dcgView=this),this._isFirstRender=!1}onItemViewUnmounted(){this._isDragCopy||(this.model.dcgView=void 0)}isFirstRender(){return this._isFirstRender}onMouseSelect(e){if(this.controller.isInEditListMode()&&!J4(e)){this.exitEditListMode();return}this.controller.isItemReadonly(this.id)||e.type==="dcg-tap"&&e.device==="mouse"||e.type==="dcg-tapstart"&&e.device==="touch"||e.wasHandled()||(e.handle(),this.controller.dispatch({type:"set-selected-id",id:this.id}))}onDragPending(e){this.controller.isItemReadonly(this.model.id)||this.props.onDragPending(e)}exitEditListMode(){this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!0})}};var Qn=__dcg_shared_module_exports__['i'](ne());var zl=__dcg_shared_module_exports__['i'](ne());var Jn=class extends zl.Class{template(){return zl.createElement(Ue,{tooltip:this.props.error,sticky:this.const(!0),gravity:this.props.gravity},zl.createElement("div",{class:()=>({"dcg-tooltipped-error":!0,"dcg-white":this.props.isWhite&&this.props.isWhite(),"dcg-small":this.props.size&&this.props.size()==="small"})},zl.createElement("i",{class:zl.const("dcg-icon-error"),"aria-hidden":zl.const("true")})))}};var An=__dcg_shared_module_exports__['i'](ne());var Xn=__dcg_shared_module_exports__['i'](ne());var{If:Uw}=Xn.Components,Li=class extends Xn.Class{template(){return Xn.createElement("span",{class:()=>({"dcg-do-not-blur":!0,"dcg-circular-icon":!0,"dcg-thick-outline":this.isThickOutline(),"dcg-white-icon":!!this.props.whiteIcon&&this.props.whiteIcon(),"dcg-hidden":this.isHidden(),"dcg-semi-transparent":this.props.semiTransparent&&this.props.semiTransparent(),"dcg-colored-icon":this.isColoredIcon(),"dcg-has-background-image":this.hasBackgroundImage(),[this.iconModifier()]:this.iconModifier().length>0}),style:this.bindFn(this.getIconStyle)},Xn.createElement(Uw,{predicate:this.bindFn(this.hasBackgroundImage)},()=>Xn.createElement("span",{class:Xn.const("dcg-background-image"),style:()=>({"background-image":this.props.backgroundImage&&this.props.backgroundImage(),opacity:this.props.backgroundOpacity&&this.props.backgroundOpacity()})})),Xn.createElement(Uw,{predicate:()=>!!this.backgroundIcon()},()=>Xn.createElement("i",{class:()=>({[this.backgroundIcon()]:!0,"dcg-layered-icon":!0}),style:()=>({opacity:this.backgroundOpacity()})})),Xn.createElement(Uw,{predicate:()=>!!this.primaryIcon()},()=>Xn.createElement("i",{class:()=>({[this.primaryIcon()]:!0,"dcg-layered-icon":!0}),style:()=>({color:this.props.foregroundColor&&this.props.foregroundColor()})})),Xn.createElement(Uw,{predicate:()=>this.props.iconType()==="loading"},()=>Xn.createElement("span",{class:Xn.const("dcg-spinner")})))}isColoredIcon(){return!this.isThickOutline()&&!this.isHidden()&&!this.hasBackgroundImage()&&this.props.iconType()!=="loading"}iconModifier(){if(!this.props.iconModifier)return"";switch(this.props.iconModifier()){case"medium":return"dcg-modifier-size-medium";case"large":return"dcg-modifier-size-large";case"small":return"dcg-modifier-size-small";case"rotated":return"dcg-modifier-rotated";case"none":return""}}getIconStyle(){let e=!this.isHidden()&&this.props.backgroundColor?Nx(this.props.backgroundColor()):void 0;return e?{background:e}:{}}isHidden(){return this.props.iconType()==="hidden"}isThickOutline(){let e=this.props.iconType();return e==="folder"||e==="pause"||e==="play"||e==="fraction"||e==="action"||e==="metronome"}hasBackgroundImage(){return!!this.props.backgroundImage&&!this.isHidden()&&!!this.props.backgroundImage()}primaryIcon(){let e=this.props.iconType();switch(e){case"folder":return"dcg-icon-folder";case"pause":return"dcg-icon-pause";case"play":return"dcg-icon-play";case"polygon-dashed":case"polygon-dashed-filled":return"dcg-icon-polygon-dashed";case"polygon-dotted":case"polygon-dotted-filled":return"dcg-icon-polygon-dotted";case"polygon-default":case"polygon-default-filled":return"dcg-icon-polygon-solid";case"graph-dashed":case"parametric-dashed-filled":return"dcg-icon-parametric-dashed";case"graph-dotted":case"parametric-dotted-filled":return"dcg-icon-parametric-dotted";case"graph-default":case"parametric-default-filled":return"dcg-icon-parametric-solid";case"movable-vertical":return"dcg-icon-move-vertical";case"movable-both":return"dcg-icon-move";case"movable-horizontal":return"dcg-icon-move-horizontal";case"point-open":return"dcg-icon-open";case"point-cross":return"dcg-icon-cross";case"point-default":return"dcg-icon-point";case"table-points":case"table-points-and-lines":return"dcg-icon-points";case"table-lines":return"dcg-icon-lines-solid";case"shaded-inequality":case"inequality":return"dcg-icon-shaded-inequality-dash";case"check":return"dcg-icon-check";case"none":case"background":case"hidden":case"polygon-none-filled":case"parametric-none-filled":case"loading":return"";case"fraction":return"dcg-icon-fraction";case"boxplot":return"dcg-icon-boxplot";case"dotplot-cross":return"dcg-icon-dotplot-cross";case"dotplot-default":return"dcg-icon-dotplot-default";case"dotplot-open":return"dcg-icon-dotplot-open";case"histogram":return"dcg-icon-histogram";case"unfilled-distribution":case"filled-distribution":return"dcg-icon-distribution";case"action":return"dcg-icon-chevron-right";case"metronome":return"dcg-icon-metronome-2";case"arrow-right":return"dcg-icon-arrow-right";default:return e}}backgroundOpacity(){let e=this.backgroundIcon();return e==="dcg-icon-polygon-filled"||e==="dcg-icon-parametric-filled"||e==="dcg-icon-shaded-inequality-shade2"||e==="dcg-icon-distribution-fill"||e==="dcg-icon-histogram-fill"?.5:1}backgroundIcon(){let e=this.props.iconType();return e==="filled-distribution"?"dcg-icon-distribution-fill":e==="histogram"?"dcg-icon-histogram-fill":e==="polygon-dashed-filled"||e==="polygon-dotted-filled"||e==="polygon-default-filled"||e==="polygon-none-filled"?"dcg-icon-polygon-filled":e==="parametric-dashed-filled"||e==="parametric-dotted-filled"||e==="parametric-default-filled"||e==="parametric-none-filled"?"dcg-icon-parametric-filled":e==="table-points-and-lines"?"dcg-icon-lines-solid":e==="shaded-inequality"?"dcg-icon-shaded-inequality-shade2":e==="action"?"dcg-icon-minus":""}};var qw=class extends An.Class{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return An.createElement("div",{class:An.const("dcg-play-pause-icon-view")},An.createElement(Ue,{gravity:this.const("se"),tooltip:()=>this.controller.s("graphing-calculator-label-slider-disabled-while-ticker-playing"),disabled:()=>!this.controller.getTickerPlaying(),sticky:this.const(!0)},An.createElement("div",{class:()=>({"dcg-circular-icon-container":!0,"dcg-disabled":this.controller.getTickerPlaying()}),"aria-label":this.bindFn(this.getAriaLabel),role:An.const("button"),tabindex:An.const("0"),onTap:e=>{e.wasHandled("dragdrop")||this.toggleSliderIsPlaying()},manageFocus:this.const(ut({controller:this.controller,location:{type:"slider-icon",id:this.model.id}}))},An.createElement(Li,{iconType:()=>this.getIconType(),whiteIcon:()=>!this.controller.isInEditListMode()&&this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)}))),An.createElement("div",{class:An.const("dcg-slider-menu-container")},An.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-animation-properties-tooltip"),gravity:this.const("e")},An.createElement("div",{class:()=>({"dcg-slider-menu-opener":!0,"dcg-menu-open":this.myOptionsOpen()}),tabindex:An.const(0),"dcg-open-menu-guid":()=>this.getMenuGUID(),role:An.const("button"),"aria-label":()=>this.myOptionsOpen()?this.controller.s("graphing-calculator-narration-hide-animation-properties"):this.controller.s("graphing-calculator-narration-show-animation-properties"),onTap:e=>{e.wasHandled("dragdrop")||e.wasLongheld()||this.toggleOptions(e)},manageFocus:this.const(ut({controller:this.controller,location:{type:"slider-animation-properties-icon",id:this.model.id}}))},An.createElement("i",{class:this.bindFn(this.getIcon),"aria-hidden":An.const("true")})))))}getIcon(){return __dcg_shared_module_exports__['P'](this.model.slider.loopMode)}getIconType(){return!this.model.slider.isPlaying||ZS(this.model)?"play":"pause"}getMenuGUID(){return"slider-"+this.model.guid}myOptionsOpen(){return this.controller.isItemSettingsMenuOpen(this.getMenuGUID())}toggleOptions(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"slider",model:this.model,guid:this.getMenuGUID(),focusFirstOption:e.device==="keyboard"}})}getAriaLabel(){if(!this.model.sliderExists)return"";var e=In(this.model);return e?this.model.slider.isPlaying?this.controller.s("graphing-calculator-narration-pause-variable-animation",{variable:e}):this.controller.s("graphing-calculator-narration-play-variable-animation",{variable:e}):""}toggleSliderIsPlaying(){if(this.model.sliderExists){var e="",r=In(this.model);ZS(this.model)?(typeof r=="string"&&(e=this.controller.s("graphing-calculator-narration-slider-variable-restarted",{variable:r})),this.controller.dispatch({type:"play-slider-from-min",id:this.model.id})):this.model.slider.isPlaying?(typeof r=="string"&&(e=this.controller.s("graphing-calculator-narration-slider-variable-paused",{variable:r})),this.controller.dispatch({type:"set-slider-isplaying",id:this.model.id,isPlaying:!1})):(typeof r=="string"&&(e=this.controller.s("graphing-calculator-narration-slider-variable-playing",{variable:r})),this.controller.dispatch({type:"set-slider-isplaying",id:this.model.id,isPlaying:!0})),e!==""&&ge(e)}}};var ll=__dcg_shared_module_exports__['i'](ne());var Hw=class extends ll.Class{constructor(){super(...arguments),this.isAnimating=!1,this.unmounted=!1}init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return ll.createElement("div",{class:()=>({"dcg-action-icon-view":!0,"dcg-action-icon-view-animating":this.isAnimating})},ll.createElement("div",{class:ll.const("dcg-circular-icon-container"),"aria-label":()=>this.controller.s("graphing-calculator-narration-run-action-icon"),role:ll.const("button"),tabindex:ll.const("0"),onTap:e=>{e.wasHandled("dragdrop")||this.runActionOnce()},manageFocus:this.const(ut({controller:this.props.controller(),location:{type:"action-icon",id:this.model.id}}))},ll.createElement(Li,{iconType:this.const("action"),whiteIcon:()=>!this.controller.isInEditListMode()&&this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)})))}willUnmount(){this.unmounted=!0}runActionOnce(){this.isAnimating=!0,this.controller.dispatch({type:"action-single-step",id:this.model.id}),setTimeout(()=>{this.isAnimating=!1,this.unmounted||this.update()},150)}};function yi(t,e){if(t){if(t.type==="expression")switch(e){case"delete":return t.controller.s("graphing-calculator-narration-delete-expression",{index:t.displayIndex});case"duplicate":return t.controller.s("graphing-calculator-narration-duplicate-expression",{index:t.displayIndex});case"show":return t.controller.s("graphing-calculator-narration-show-expression",{index:t.displayIndex});case"hide":return t.controller.s("graphing-calculator-narration-hide-expression",{index:t.displayIndex});case"show-options":return t.controller.s("graphing-calculator-narration-show-options-expression",{index:t.displayIndex});case"hide-options":return t.controller.s("graphing-calculator-narration-hide-options-expression",{index:t.displayIndex});case"create_table":return t.controller.s("graphing-calculator-narration-create-table-expression",{index:t.displayIndex});case"rename":return t.controller.s("graphing-calculator-narration-rename-expression",{index:t.displayIndex})}if(t.type==="image")switch(e){case"delete":return t.controller.s("graphing-calculator-narration-delete-image",{index:t.displayIndex});case"duplicate":return t.controller.s("graphing-calculator-narration-duplicate-image",{index:t.displayIndex});case"show":return t.controller.s("graphing-calculator-narration-show-image",{index:t.displayIndex});case"hide":return t.controller.s("graphing-calculator-narration-hide-image",{index:t.displayIndex});case"show-options":return t.controller.s("graphing-calculator-narration-show-options-image",{index:t.displayIndex});case"hide-options":return t.controller.s("graphing-calculator-narration-hide-options-image",{index:t.displayIndex});case"edit_title":return t.controller.s("graphing-calculator-narration-edit-image-title",{index:t.displayIndex})}if(t.type==="text")switch(e){case"delete":return t.controller.s("graphing-calculator-narration-delete-text",{index:t.displayIndex});case"duplicate":return t.controller.s("graphing-calculator-narration-duplicate-text",{index:t.displayIndex});case"show":return t.controller.s("graphing-calculator-narration-show-text",{index:t.displayIndex});case"hide":return t.controller.s("graphing-calculator-narration-hide-text",{index:t.displayIndex});case"edit_title":return t.controller.s("graphing-calculator-narration-edit-text-title",{index:t.displayIndex})}if(t.type==="table")switch(e){case"delete":return t.controller.s("graphing-calculator-narration-delete-table",{index:t.displayIndex});case"duplicate":return t.controller.s("graphing-calculator-narration-duplicate-table",{index:t.displayIndex});case"show":return t.controller.s("graphing-calculator-narration-show-table",{index:t.displayIndex});case"hide":return t.controller.s("graphing-calculator-narration-hide-table",{index:t.displayIndex});case"rename":return t.controller.s("graphing-calculator-narration-rename-table",{index:t.displayIndex})}if(t.type==="folder"){let r=!!t.title;switch(e){case"collapse":return r?t.controller.s("graphing-calculator-narration-collapse-folder-title",{folder:t.title}):t.controller.s("graphing-calculator-narration-collapse-folder-index",{index:t.displayIndex});case"expand":return r?t.controller.s("graphing-calculator-narration-expand-folder-title",{folder:t.title}):t.controller.s("graphing-calculator-narration-expand-folder-index",{index:t.displayIndex});case"show":return r?t.controller.s("graphing-calculator-narration-show-folder-title",{folder:t.title}):t.controller.s("graphing-calculator-narration-show-folder-index",{index:t.displayIndex});case"hide":return r?t.controller.s("graphing-calculator-narration-hide-folder-title",{folder:t.title}):t.controller.s("graphing-calculator-narration-hide-folder-index",{index:t.displayIndex});case"duplicate":return r?t.controller.s("graphing-calculator-narration-duplicate-folder-title",{folder:t.title}):t.controller.s("graphing-calculator-narration-duplicate-folder-index",{index:t.displayIndex});case"delete":return r?t.controller.s("graphing-calculator-narration-delete-folder-title",{folder:t.title}):t.controller.s("graphing-calculator-narration-delete-folder-index",{index:t.displayIndex});case"edit_title":return t.controller.s("graphing-calculator-narration-edit-folder-title",{index:t.displayIndex})}}switch(e){case"delete":return t.controller.s("graphing-calculator-narration-delete");case"duplicate":return t.controller.s("graphing-calculator-narration-duplicate");case"expand":return t.controller.s("graphing-calculator-narration-expand");case"collapse":return t.controller.s("graphing-calculator-narration-collapse");case"show":return t.controller.s("graphing-calculator-narration-show");case"hide":return t.controller.s("graphing-calculator-narration-hide");case"show-options":return t.controller.s("graphing-calculator-narration-show-options");case"hide-options":return t.controller.s("graphing-calculator-narration-hide-options");case"create_table":return t.controller.s("graphing-calculator-narration-create-table");case"rename":return t.controller.s("graphing-calculator-narration-rename");case"edit_title":return t.controller.s("graphing-calculator-narration-edit-title");default:return e}}}var{SwitchUnion:X4}=Qn.Components,Q4="#6A93D2",YP="#000",JP="#fff",Qf=class extends Qn.Class{init(){this.model=this.props.model(),this.controller=this.props.controller()}template(){return Qn.createElement("div",{class:Qn.const("dcg-expression-icon-container")},X4(this.bindFn(this.getIconMode),{error:()=>Qn.createElement(Jn,{error:this.bindFn(this.getErrorMsg),isWhite:this.bindFn(this.isSelected),gravity:this.const("se")}),none:()=>Qn.createElement("span",null),slider:()=>Qn.createElement(qw,{controller:this.props.controller,model:this.props.model}),action:()=>Qn.createElement(Hw,{controller:this.props.controller,model:this.props.model}),icon:()=>Qn.createElement("div",{class:Qn.const("dcg-circular-icon-container"),role:Qn.const("button"),tabindex:Qn.const("0"),"dcg-open-menu-guid":()=>this.getMenuGUID(),"aria-label":this.bindFn(this.getIconAriaLabel),onTap:e=>{if(!e.wasHandled("dragdrop")&&!e.wasLongheld()){if(this.myOptionsOpen())return this.toggleOptions(e);if((this.controller.isInEditListMode()||e.shiftKey)&&!this.isFraction())return this.toggleOptions(e);if(this.isFraction())return this.onToggleFractionDisplay();this.toggleGraphShown()}},onLongHold:e=>{e.handle("dcg-longhold"),e.handle("dcg-tap"),!this.isFraction()&&this.toggleOptions(e)},manageFocus:this.const(ut({controller:this.controller,location:{type:"expression-icon",id:this.model.id}}))},Qn.createElement(Li,{iconType:this.bindFn(this.getIconType),backgroundColor:this.bindFn(this.getBackgroundColor),whiteIcon:this.bindFn(this.isSelected),foregroundColor:this.bindFn(this.getForegroundColor),iconModifier:this.bindFn(this.getIconModifier)}))}))}getErrorMsg(){return this.colorError()?this.controller.s("shared-calculator-error-color-not-assigned"):this.controller.unpack(this.model.error)}getMenuGUID(){return this.model.guid}myOptionsOpen(){return this.controller.isItemSettingsMenuOpen(this.getMenuGUID())}toggleOptions(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"expression",model:this.model,guid:this.getMenuGUID(),focusFirstOption:e.device==="keyboard"}})}isSelected(){return this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)}isFraction(){return this.controller.canDisplayEvaluationForItemAsFraction(this.model.id)}getIconMode(){return this.hasError()?"error":this.controller.getGraphSettings().config.graphpaper?tx(this.model)?"icon":this.hasSlider()?"slider":this.isFraction()?"icon":this.isNonemptyAction()?"action":"none":"none"}toggleGraphShown(){this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id})}colorError(){return!!this.model.formula.rgb_value&&!this.model.formula.assignment}hasError(){return this.colorError()?!0:!!this.model.error&&!Ia(this.model)&&this.controller.getBrailleMode()==="none"}hasSlider(){return!!this.model.sliderExists}isNonemptyAction(){return tp(this.model)}getDisplayProps(){let{points:e,lines:r,fill:i}=this.model;return __dcg_shared_module_exports__['$b'](this.model.formula.expression_type,{points:e,lines:r,fill:i})}getBackgroundColor(){if(!this.isFraction())return Ig(this.model);let e=this.isSelected();return this.controller.shouldEvaluationForItemDisplayAsFraction(this.model.id)?e?JP:YP:""}getForegroundColor(){if(!this.isFraction())return"";let e=this.isSelected(),r=this.controller.shouldEvaluationForItemDisplayAsFraction(this.model.id);return e!==r?JP:e?Q4:YP}onToggleFractionDisplay(){this.controller.dispatch({type:"toggle-fraction-evaluation",id:this.model.id})}getIconModifier(){return kc(this.model)&&Tl(this.model,"alignedAxis")==="y"?"rotated":"none"}getIconType(){if(this.isFraction())return"fraction";if(!this.model.shouldGraph)return"hidden";if(this.controller.isInEditListMode())return"none";let e=this.model.pointStyle,r=this.model.lineStyle,i=this.getDisplayProps(),n=this.model.formula;if(kc(this.model))return"boxplot";if(Gl(this.model)){if(this.model.pointStyle==="POINT")return"dotplot-default";if(this.model.pointStyle==="CROSS")return"dotplot-cross";if(this.model.pointStyle==="OPEN")return"dotplot-open"}if(fd(this.model))return"histogram";if(Ic(this.model))return Al(this.model)?"filled-distribution":"unfilled-distribution";if(this.model.reconciledDragMode==="X")return"movable-horizontal";if(this.model.reconciledDragMode==="Y")return"movable-vertical";if(this.model.reconciledDragMode==="XY")return"movable-both";if(Ma(this.model))return So(this.model)?e==="OPEN"?"point-open":e==="CROSS"?"point-cross":"point-default":i.lines&&i.points?"table-points-and-lines":i.lines?"table-lines":"table-points";let o=this.getDisplayProps().fill;if(Zs(this.model))return o?i.lines?r==="DASHED"?"polygon-dashed-filled":r==="DOTTED"?"polygon-dotted-filled":"polygon-default-filled":"polygon-none-filled":i.lines?r==="DASHED"?"polygon-dashed":r==="DOTTED"?"polygon-dotted":"polygon-default":"none";if(Ec(this.model))return o?i.lines?r==="DASHED"?"parametric-dashed-filled":r==="DOTTED"?"parametric-dotted-filled":"parametric-default-filled":"parametric-none-filled":i.lines?r==="DASHED"?"graph-dashed":r==="DOTTED"?"graph-dotted":"graph-default":"none";var a=n.operator,s=__dcg_shared_module_exports__['Ya'][a].direction!==0,l=__dcg_shared_module_exports__['Ya'][a].inclusive===!1;return n.is_shade_between||!l&&s?"shaded-inequality":l&&!s?"inequality":l&&s?"shaded-inequality":r==="DASHED"?"graph-dashed":r==="DOTTED"?"graph-dotted":"graph-default"}getIconAriaLabel(){return this.isFraction()?Sc(this.model)?this.controller.s("shared-calculator-narration-display-as-decimal"):this.controller.s("shared-calculator-narration-display-as-fraction"):this.myOptionsOpen()?yi(this.model,"hide-options"):this.controller.isInEditListMode()?yi(this.model,"show-options"):this.model.hidden?yi(this.model,"show"):yi(this.model,"hide")}};var jr=__dcg_shared_module_exports__['i'](ne());var $w=__dcg_shared_module_exports__['i'](ne());var Np=class extends $w.Class{template(){return $w.createElement("span",{class:()=>{var e,r;return{"dcg-color-swatch":!0,"dcg-color-evaluation":(r=(e=this.props).isEvaluation)==null?void 0:r.call(e),"dcg-light-color":Rx(this.props.color())}},style:()=>({background:Nx(this.props.color())})})}};var{If:Z4,SwitchUnion:eU}=jr.Components;function tU(t,e){return __dcg_shared_module_exports__['Qa'](t,e)}var Ad=class extends jr.Class{init(){this.controller=this.props.controller()}template(){return jr.createElement("div",{class:jr.const("dcg-evaluation-container")},jr.createElement("div",{didMount:e=>this.containerNode=e,class:()=>({"dcg-evaluation":!0,"dcg-do-blur":!0,"dcg-hidden":this.props.controller().isInEditListMode()}),handleEvent:jr.const("true"),tabindex:()=>this.props.focusable()&&this.controller.getBrailleMode()==="none"?"0":"-1",onFocus:()=>{this.controller.getBrailleMode()==="none"&&this.evaluationNode&&this.onSelectEvaluation()},onBlur:()=>{this.controller.getBrailleMode()==="none"&&this.evaluationNode&&this.onUnselectEvaluation()},onTap:()=>{var e;return(e=this.containerNode)==null?void 0:e.focus()}},jr.createElement(Vi,__dcg_shared_module_exports__['b']({latex:this.bindFn(this.getBrailleEvaluation),ariaLabel:this.const(""),brailleShouldFocus:()=>{let e=this.controller.getFocusLocation();return!e||e.type!=="braille-output"?!1:e.id===this.props.id()},onBrailleInput:()=>{},isStatic:this.const(!0),onBrailleFocusedChanged:e=>{e?this.controller.dispatch({type:"set-focus-location",location:{type:"braille-output",id:this.props.id()}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"braille-output",id:this.props.id()}})}},gn(this.controller,{gravity:"sw"})),jr.createElement("div",{class:jr.const("dcg-evaluation-label-container")},jr.createElement(Z4,{predicate:()=>!!this.props.dependent()},()=>jr.createElement(ze,{latex:()=>__dcg_shared_module_exports__['Ta'](this.props.dependent()),config:this.const({})})),jr.createElement("span",{class:jr.const("dcg-equals")},jr.createElement(ze,{latex:this.const("="),config:this.const({})}))),jr.createElement("span",{class:()=>({"dcg-text-selectable":this.getEvaluationType()!=="rgbcolor","dcg-evaluation-html":!0,"dcg-color-evaluation":this.getEvaluationType()==="rgbcolor"}),didMount:this.bindFn(this.didMountEvaluation)},eU(()=>this.getEvaluationType(),{list:()=>jr.createElement("span",{class:jr.const("dcg-evaluation-list")},()=>this.controller.s("graphing-calculator-label-evaluation-list",{count:this.props.val().length})),fraction:()=>jr.createElement(ze,{latex:()=>__dcg_shared_module_exports__['Sa'](this.props.val(),this.getLabelOptions()),config:this.const({})}),undefined:()=>jr.createElement("span",null,jr.const("undefined")),scientific:()=>jr.createElement(ze,{latex:()=>`${this.getNumberLabel().mantissa}\\times10^{${this.getNumberLabel().exponent}}`,config:this.const({})}),decimal:()=>jr.createElement(ze,{latex:()=>this.getNumberLabel().value,config:this.const({})}),rgbcolor:()=>jr.createElement(Np,{color:()=>this.controller.getColorById(this.props.id()),isEvaluation:this.const(!0)})})))),jr.createElement("div",{class:jr.const("dcg-clear")}))}getNumberLabel(){return tU(this.props.val(),this.getLabelOptions())}getEvaluationType(){let e=this.props.val();return typeof e=="string"?"rgbcolor":Array.isArray(e)?typeof e[0]=="string"?"rgbcolor":"list":this.getNumberLabel().type}getLabelOptions(){return this.props.controller().getEvaluationLabelOptionsForItem(this.props.id())}didMountEvaluation(e){this.evaluationNode=e}onSelectEvaluation(){let e=document.createRange();e.selectNodeContents(this.evaluationNode);let r=window.getSelection();r&&(r.removeAllRanges(),r=window.getSelection(),r&&r.addRange(e))}onUnselectEvaluation(){let e=window.getSelection();e&&e.removeAllRanges()}getBrailleEvaluation(){let e="";this.props.dependent()&&(e=__dcg_shared_module_exports__['Ta'](this.props.dependent())),e+="=";let r=this.getEvaluationType();switch(r){case"list":e+=this.controller.s("graphing-calculator-label-evaluation-list",{count:this.props.val().length});break;case"fraction":e+=__dcg_shared_module_exports__['Sa'](this.props.val(),this.getLabelOptions());break;case"undefined":e="undefined";break;case"scientific":e+=`${this.getNumberLabel().mantissa}\\times10^{${this.getNumberLabel().exponent}}`;break;case"decimal":e+=this.getNumberLabel().value;break;case"rgbcolor":e+=this.props.val();break;default:return r}return e}};var ma=__dcg_shared_module_exports__['i'](ne()),Zf=class extends ma.Class{template(){return this.controller=this.props.controller(),ma.createElement("div",{class:ma.const("dcg-unresolved")},ma.createElement("i",{class:ma.const("dcg-icon-error"),"aria-hidden":ma.const("true")}),ma.const("\xA0"),()=>this.controller.s("graphing-calculator-error-equation-contains-unresolved-details"),ma.createElement("a",{href:ma.const("https://help.desmos.com/hc/en-us/articles/202529079-Unresolved-Detail-In-Plotted-Functions"),target:ma.const("_blank")},()=>this.controller.s("graphing-calculator-link-learn-more")))}};var Mo=__dcg_shared_module_exports__['i'](ne());at();xc();var Yo=__dcg_shared_module_exports__['i'](ne());var{SwitchUnion:rU}=Yo.Components,Ir=class extends Yo.Class{init(){this.controller=this.props.controller()}template(){return Yo.createElement("div",{class:this.bindFn(this.getContainerClass)},rU(()=>String(this.props.readonly()),{true:()=>Yo.createElement(Vi,__dcg_shared_module_exports__['b']({latex:this.bindFn(this.getStaticLatex),brailleShouldFocus:this.props.isFocused,isStatic:this.const(!0),onBrailleFocusedChanged:this.props.handleFocusChanged,ariaLabel:this.bindFn(this.getBrailleLabel),dataLabelAttributeValue:this.props.dataLabelAttributeValue},gn(this.props.controller())),Yo.createElement(ze,{latex:this.bindFn(this.getStaticLatex),config:this.bindFn(this.getMQConfig),getAriaLabel:this.props.ariaLabel},Yo.createElement("span",{class:Yo.const("dcg-math-field"),"data-dcg-label":()=>this.props.dataLabelAttributeValue?this.props.dataLabelAttributeValue():void 0,manageFocus:this.const({shouldBeFocused:()=>this.props.isFocused(),onFocusedChanged:(e,r)=>this.props.handleFocusChanged(e,r)}),tabindex:Yo.const("0")}))),false:()=>Yo.createElement(Vi,__dcg_shared_module_exports__['b']({latex:this.props.latex,brailleShouldFocus:this.props.isFocused,selectOnFocus:this.const(!0),onBrailleInput:this.props.handleLatexChanged,onBrailleFocusedChanged:this.props.handleFocusChanged,onBrailleKeydown:this.bindFn(this.onBrailleKeydown),hasError:this.props.hasError,placeholder:this.props.placeholder,ariaLabel:this.bindFn(this.getBrailleLabel),dataLabelAttributeValue:this.props.dataLabelAttributeValue},gn(this.props.controller())),Yo.createElement(qe,{latex:this.props.latex,getAriaPostLabel:()=>{var r,i;let e=((i=(r=this.props).ariaPostLabel)==null?void 0:i.call(r))||"";return this.props.hasError()&&e===""&&(e=this.controller.s("shared-calculator-narration-math-input-error-message")),e},isFocused:this.props.isFocused,placeholder:this.props.placeholder,capExpressionSize:()=>this.controller.getCapExpressionSize(),selectOnFocus:this.const(!0),config:this.bindFn(this.getMQConfig),getAriaLabel:this.props.ariaLabel,hasError:this.props.hasError,dataLabelAttributeValue:this.props.dataLabelAttributeValue,onUserPressedKey:this.props.handlePressedKey,onUserChangedLatex:this.props.handleLatexChanged,onExpressionSizeExceeded:()=>this.controller.dispatch({type:"expression-size-exceeded"}),onFocusedChanged:this.props.handleFocusChanged,needsSystemKeypad:()=>!this.controller.isKeypadEnabled()}))}))}getStaticLatex(){return this.props.latex()?this.props.latex():this.props.placeholder?this.props.placeholder():""}getContainerClass(){let e=this.props.containerClass?this.props.containerClass():{};return e["dcg-inline-math-input-view"]=!0,this.props.fullWidth&&this.props.fullWidth()&&(e["dcg-full-width-inline-math-input"]=!0),this.props.fontSize&&this.props.fontSize()==="large"&&(e["dcg-large-font-inline-math-input"]=!0),this.props.noBorder&&this.props.noBorder()&&(e["dcg-no-border-inline-math-input"]=!0),e}onBrailleKeydown(e){if(!this.props.handlePressedKey)return;let r=Le(e);r&&this.props.handlePressedKey(r,e)}getMQConfig(){return this.controller.getMathquillConfig({})}getBrailleLabel(){return this.props.brailleLabel?this.props.brailleLabel():this.props.ariaLabel()}};var em=class extends Mo.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return Mo.createElement("div",{class:Mo.const("dcg-domain dcg-do-blur"),handleEvent:Mo.const("true")},Mo.createElement("div",{class:Mo.const("dcg-display-domain dcg-do-blur"),handleEvent:Mo.const("true")},Mo.createElement(Ir,{readonly:()=>this.controller.isItemReadonly(this.id),latex:()=>this.getMinLatex(),isFocused:()=>this.getFocusedInput()==="min",placeholder:()=>__dcg_shared_module_exports__['Ma'](lV(this.model)).latex,ariaLabel:()=>this.controller.s("graphing-calculator-narration-domain-minimum"),brailleLabel:()=>this.controller.raw("dmin"),handleFocusChanged:e=>this.handleFocusedChanged("min",e),hasError:()=>!dV(this.model),controller:this.props.controller,handlePressedKey:(e,r)=>this.handlePressedKey("min",e,r),handleLatexChanged:e=>this.dispatchMinLatexIfChanged(e),dataLabelAttributeValue:this.const("domain-min")}),Mo.createElement("span",{class:Mo.const("dcg-interval-interior")},Mo.createElement(ze,{latex:()=>this.getDomainVariableLatex(),config:this.const({})})),Mo.createElement(Ir,{readonly:()=>this.controller.isItemReadonly(this.id),latex:()=>this.getMaxLatex(),isFocused:()=>this.getFocusedInput()==="max",placeholder:()=>__dcg_shared_module_exports__['Ma'](cV(this.model)).latex,ariaLabel:()=>this.controller.s("graphing-calculator-narration-domain-maximum"),brailleLabel:()=>this.controller.raw("dmax"),handleFocusChanged:e=>this.handleFocusedChanged("max",e),hasError:()=>!uV(this.model),controller:this.props.controller,handlePressedKey:(e,r)=>this.handlePressedKey("max",e,r),handleLatexChanged:e=>this.dispatchMaxLatexIfChanged(e),dataLabelAttributeValue:this.const("domain-max")})))}handlePressedKey(e,r,i){if(!this.controller.isInEditListMode()){if(r==="Esc"){this.controller.dispatch({type:"set-focus-location",location:void 0});return}if(r==="Enter")return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"})}let n=qe.getFocusedMathquill(),o=ko();if(r==="Left"||r==="Right"||r==="Down"||r==="Up"){var a;n?a=qe.applyArrowKeyAndReturnIfWasAtBounds(n,r,i):o&&(o.selectionStart===0&&r==="Left"||o.selectionStart===V(o).val().length&&r==="Right"||r==="Up"||r==="Down")?a=!0:a=!1,a&&(i&&i.preventDefault(),r==="Left"?e==="max"&&this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.model.id,location:"min"}}):r==="Right"?e==="min"&&this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.model.id,location:"max"}}):r==="Down"?this.controller.dispatch({type:"on-special-key-pressed",key:"Down"}):r==="Up"&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.model.id}}));return}n&&(n.keystroke(r,i),e==="min"?this.dispatchMinLatexIfChanged(n.latex()):e==="max"&&this.dispatchMaxLatexIfChanged(n.latex()))}handleFocusedChanged(e,r){r?this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"domain-limit",id:this.id,location:e}})}dispatchMinLatexIfChanged(e){if(this.getMinLatex()!==e){let r=this.getDomainType();if(r==="unknown"){ao("DomainView is in use for a non-parametric, non-polar expression",{severity:"error",metaData:{expression:pd(this.model,{stripDefaults:!0})}});return}this.controller.dispatch(r==="polar"?{type:"set-polar-domain-minlatex",id:this.id,latex:e}:{type:"set-parametric-domain-minlatex",id:this.id,latex:e})}}dispatchMaxLatexIfChanged(e){if(this.getMaxLatex()!==e){let r=this.getDomainType();if(r==="unknown"){ao("DomainView is in use for a non-parametric, non-polar expression",{severity:"error",metaData:{expression:pd(this.model,{stripDefaults:!0})}});return}this.controller.dispatch(r==="polar"?{type:"set-polar-domain-maxlatex",id:this.id,latex:e}:{type:"set-parametric-domain-maxlatex",id:this.id,latex:e})}}getFocusedInput(){let e=this.controller.getFocusLocation();if(!(!e||e.type!=="domain-limit"||e.id!==this.id))return e.location}getMinLatex(){switch(this.getDomainType()){case"parametric":return AV(this.model);case"polar":return TV(this.model);default:return""}}getMaxLatex(){switch(this.getDomainType()){case"parametric":return VV(this.model);case"polar":return GV(this.model);default:return""}}getDomainVariableLatex(){switch(this.getDomainType()){case"parametric":return"\\le t \\le";case"polar":return"\\le \\theta \\le";default:return""}}getDomainType(){return Dc(this.model)?"polar":Ec(this.model)?"parametric":"unknown"}getMQConfig(){return{autoOperatorNames:Ko({})}}};var fe=__dcg_shared_module_exports__['i'](ne());var ya=__dcg_shared_module_exports__['i'](ne());at();var kt=class extends ya.Class{template(){return ya.createElement("div",{role:ya.const("checkbox"),tabindex:()=>this.props.disabled&&this.props.disabled()?-1:0,"aria-label":()=>{var e,r;return(r=(e=this.props).ariaLabel)==null?void 0:r.call(e)},"aria-labelledby":()=>{var e,r;return(r=(e=this.props).labelledBy)==null?void 0:r.call(e)},"aria-describedby":()=>{var e,r;return(r=(e=this.props).describedBy)==null?void 0:r.call(e)},"aria-disabled":()=>this.props.disabled&&this.props.disabled(),"aria-checked":this.props.checked,manageFocus:()=>{var e,r;return(r=(e=this.props).manageFocus)==null?void 0:r.call(e)},class:()=>({"dcg-component-checkbox":!0,"dcg-checked":this.props.checked(),"dcg-disabled":this.props.disabled&&this.props.disabled(),"dcg-small":this.props.small&&this.props.small(),[this.props.class===void 0?"":this.props.class()]:this.props.class!==void 0}),style:()=>this.props.style?this.props.style():{},onTap:this.bindFn(this.onChange)},ya.createElement("span",{class:ya.const("dcg-checkbox")},ya.createElement("i",{class:ya.const("dcg-icon-check"),"aria-hidden":ya.const("true")})),ya.createElement("span",{class:ya.const("dcg-checkbox-children")},this.children))}onChange(e){e.target&&V(e.target).attr("href")||this.props.disabled&&this.props.disabled()||this.props.onChange(!this.props.checked())}};var{If:_a,For:iU,IfElse:nU}=fe.Components,tm=class extends fe.Class{template(){return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,fe.createElement(_a,{predicate:this.bindFn(this.hasRegression)},()=>fe.createElement("div",{class:fe.const("dcg-regression-container")},fe.createElement("div",{class:fe.const("dcg-handle-event"),handleEvent:fe.const("true")},fe.createElement(_a,{predicate:this.bindFn(this.getShouldSuggestLogMode)},()=>fe.createElement("div",{class:fe.const("dcg-log-mode-toggle")},nU(()=>this.areLogModeRegressionsForced(),{true:()=>fe.createElement("div",{class:fe.const("dcg-action-log-mode-toggle dcg-no-hover-styling")},()=>this.controller.s("graphing-calculator-button-regression-log-mode")),false:()=>fe.createElement("div",null,fe.createElement(kt,{class:this.const("dcg-action-log-mode-toggle dcg-log-mode-checkbox"),onChange:this.bindFn(this.onTapLogMode),checked:()=>this.getIsLogModeRegression()},()=>this.controller.s("graphing-calculator-button-regression-log-mode")),fe.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-regression-log-mode-help-tooltip"),gravity:this.const("e")},fe.createElement("a",{"aria-label":()=>this.controller.s("graphing-calculator-label-regression-log-mode-help-tooltip"),class:fe.const("dcg-log-mode-toggle-help"),target:fe.const("_blank"),href:fe.const("https://help.desmos.com/hc/en-us/articles/204349605")},fe.createElement("i",{class:fe.const("dcg-icon-question-sign"),"aria-hidden":fe.const("true")}))))}))),fe.createElement("div",{class:fe.const("dcg-statistics"),role:fe.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-heading-regression-statistics")},fe.createElement("div",{class:fe.const("dcg-expression-footer-title")},()=>this.controller.s("graphing-calculator-heading-regression-statistics"),fe.createElement(_a,{predicate:()=>this.getRegression().statistics.hasOwnProperty("RMSE")},()=>fe.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-regression-what-is-rmse-tooltip"),gravity:this.const("s")},fe.createElement("a",{class:fe.const("dcg-expression-footer-title-help"),target:fe.const("_blank"),href:fe.const("https://help.desmos.com/hc/en-us/articles/202529129-What-is-RMSE-"),"aria-label":()=>this.controller.s("graphing-calculator-label-regression-what-is-rmse-tooltip")},fe.createElement("i",{class:fe.const("dcg-icon-question-sign"),"aria-hidden":fe.const("true")})))),fe.createElement(_a,{predicate:()=>this.getRegression().statistics.Rsquared<0},()=>fe.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-regression-why-is-negative-tooltip"),gravity:this.const("s")},fe.createElement("a",{"aria-label":()=>this.controller.s("graphing-calculator-label-regression-why-is-negative-tooltip"),class:fe.const("dcg-expression-footer-title-help"),target:fe.const("_blank"),href:fe.const("https://help.desmos.com/hc/en-us/articles/202529139-Why-am-I-seeing-a-negative-R-2-value-")},fe.createElement("i",{class:fe.const("dcg-icon-question-sign"),"aria-hidden":fe.const("true")}))))),fe.createElement("div",{class:fe.const("dcg-statistics-values")},fe.createElement(_a,{predicate:()=>this.getRegression().statistics.hasOwnProperty("Rsquared")},()=>fe.createElement("div",null,fe.createElement(Vi,__dcg_shared_module_exports__['b']({latex:()=>"R^2="+Wl(this.getRegression(),"Rsquared"),brailleShouldFocus:()=>{let e=this.controller.getFocusLocation();return!e||e.type!=="regression-output"?!1:e.parameter==="Rsquared"},onBrailleFocusedChanged:e=>{e?this.controller.dispatch({type:"set-focus-location",location:{type:"regression-output",parameter:"Rsquared"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"regression-output",parameter:"Rsquared"}})},ariaLabel:this.const(""),isStatic:this.const(!0)},gn(this.controller)),fe.createElement(ze,{latex:()=>"R^2="+Wl(this.getRegression(),"Rsquared"),config:this.const({})},fe.createElement("span",{tabindex:fe.const("0"),manageFocus:this.const(ut({predicate:()=>this.controller.getBrailleMode()==="none",controller:this.controller,location:{type:"regression-output",parameter:"Rsquared"}}))}))))),fe.createElement(_a,{predicate:()=>this.getRegression().statistics.hasOwnProperty("rsquared")},()=>fe.createElement("div",null,fe.createElement(Vi,__dcg_shared_module_exports__['b']({latex:()=>"r^2="+Wl(this.getRegression(),"rsquared"),brailleShouldFocus:()=>{let e=this.controller.getFocusLocation();return!e||e.type!=="regression-output"?!1:e.parameter==="rsquared"},onBrailleFocusedChanged:e=>{e?this.controller.dispatch({type:"set-focus-location",location:{type:"regression-output",parameter:"rsquared"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"regression-output",parameter:"rsquared"}})},ariaLabel:this.const(""),isStatic:this.const(!0)},gn(this.controller)),fe.createElement(ze,{latex:()=>"r^2="+Wl(this.getRegression(),"rsquared"),config:this.const({})},fe.createElement("span",{tabindex:fe.const("0"),manageFocus:this.const(ut({predicate:()=>this.controller.getBrailleMode()==="none",controller:this.controller,location:{type:"regression-output",parameter:"rsquared"}}))}))))),fe.createElement(_a,{predicate:()=>this.getRegression().statistics.hasOwnProperty("r")},()=>fe.createElement("div",null,fe.createElement(Vi,__dcg_shared_module_exports__['b']({latex:()=>"r="+Wl(this.getRegression(),"r"),brailleShouldFocus:()=>{let e=this.controller.getFocusLocation();return!e||e.type!=="regression-output"?!1:e.parameter==="r"},onBrailleFocusedChanged:e=>{e?this.controller.dispatch({type:"set-focus-location",location:{type:"regression-output",parameter:"r"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"regression-output",parameter:"r"}})},ariaLabel:this.const(""),isStatic:this.const(!0)},gn(this.controller)),fe.createElement(ze,{latex:()=>"r="+Wl(this.getRegression(),"r"),config:this.const({})},fe.createElement("span",{class:fe.const("dcg-r-value"),tabindex:fe.const("0"),manageFocus:this.const(ut({predicate:()=>this.controller.getBrailleMode()==="none",controller:this.controller,location:{type:"regression-output",parameter:"r"}}))}))))),fe.createElement(_a,{predicate:()=>this.getRegression().statistics.hasOwnProperty("RMSE")},()=>fe.createElement("div",null,fe.createElement(Vi,__dcg_shared_module_exports__['b']({latex:()=>"\\operatorname{RMSE}="+Wl(this.getRegression(),"RMSE"),brailleShouldFocus:()=>{let e=this.controller.getFocusLocation();return!e||e.type!=="regression-output"?!1:e.parameter==="RMSE"},onBrailleFocusedChanged:e=>{e?this.controller.dispatch({type:"set-focus-location",location:{type:"regression-output",parameter:"RMSE"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"regression-output",parameter:"RMSE"}})},ariaLabel:this.const(""),isStatic:this.const(!0)},gn(this.controller)),fe.createElement(ze,{latex:()=>"\\operatorname{RMSE}="+Wl(this.getRegression(),"RMSE"),config:this.const({})},fe.createElement("span",{tabindex:fe.const("0"),manageFocus:this.const(ut({predicate:()=>this.controller.getBrailleMode()==="none",controller:this.controller,location:{type:"regression-output",parameter:"RMSE"}}))}))))))),fe.createElement("div",{role:fe.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-heading-regression-residuals"),class:fe.const("dcg-residuals")},fe.createElement("div",{class:fe.const("dcg-expression-footer-title")},()=>this.controller.s("graphing-calculator-heading-regression-residuals")),fe.createElement(Vi,__dcg_shared_module_exports__['b']({latex:this.bindFn(this.getResidualVariable),brailleShouldFocus:()=>{let e=this.controller.getFocusLocation();return!e||e.type!=="regression-output"?!1:e.parameter===this.getResidualVariable()},onBrailleFocusedChanged:e=>{e?this.controller.dispatch({type:"set-focus-location",location:{type:"regression-output",parameter:this.getResidualVariable()}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"regression-output",parameter:this.getResidualVariable()}})},ariaLabel:this.const(""),isStatic:this.const(!0)},gn(this.controller)),fe.createElement(ze,{latex:this.bindFn(this.getResidualVariable),config:this.const({})},fe.createElement("span",{class:fe.const("dcg-residuals-variable"),tabindex:fe.const("0"),manageFocus:this.const(ut({predicate:()=>this.controller.getBrailleMode()==="none",controller:this.controller,location:{type:"regression-output",parameter:this.getResidualVariable()}}))}))),fe.createElement(_a,{predicate:this.bindFn(this.getResidualSuggestionVisible)},()=>fe.createElement("div",{class:fe.const("dcg-residual-suggestion dcg-action-plot-residual dcg-btn dcg-btn-light-gray"),role:fe.const("button"),onTap:this.bindFn(this.onTapResidualsSuggestion)},()=>this.controller.s("graphing-calculator-button-regression-plot-residuals")))),fe.createElement(_a,{predicate:()=>Object.keys(this.getRegression().parameters).length>0},()=>fe.createElement("div",{class:fe.const("dcg-parameters-container")},fe.createElement("div",{class:fe.const("dcg-expression-footer-title")},()=>this.controller.s("graphing-calculator-heading-regression-parameters"),fe.createElement(_a,{predicate:()=>this.isNonLinearRegression()},()=>fe.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-regression-parameters-not-exact"),gravity:this.const("s")},fe.createElement("a",{class:fe.const("dcg-expression-footer-title-help"),target:fe.const("_blank"),href:fe.const("https://help.desmos.com/hc/en-us/articles/360042428612"),"aria-label":()=>this.controller.s("graphing-calculator-label-regression-parameters-not-exact")},fe.createElement("i",{class:fe.const("dcg-icon-question-sign"),"aria-hidden":fe.const("true")}))))),fe.createElement(iU,{each:()=>Object.keys(this.getRegression().parameters)},fe.createElement("div",{role:fe.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-heading-regression-parameters"),class:fe.const("dcg-parameters")},e=>fe.createElement(Vi,__dcg_shared_module_exports__['b']({latex:()=>e+"="+ak(this.getRegression(),e),brailleShouldFocus:()=>{let r=this.controller.getFocusLocation();return!r||r.type!=="regression-output"?!1:r.parameter===e},onBrailleFocusedChanged:r=>{r?this.controller.dispatch({type:"set-focus-location",location:{type:"regression-output",parameter:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"regression-output",parameter:e}})},ariaLabel:this.const(""),isStatic:this.const(!0)},gn(this.controller)),fe.createElement(ze,{latex:()=>e+"="+ak(this.getRegression(),e),config:this.const({})},fe.createElement("span",{class:fe.const("dcg-parameter"),tabindex:fe.const("0"),manageFocus:this.const(ut({controller:this.controller,location:{type:"regression-output",parameter:e}}))}))))))),fe.createElement("div",{class:fe.const("dcg-clear")}),fe.createElement(_a,{predicate:()=>this.hasParameterWarning()},()=>fe.createElement("div",{class:fe.const("dcg-parameter-warning")},fe.createElement("i",{class:fe.const("dcg-icon-error"),"aria-hidden":fe.const("true")}),fe.const("\xA0"),()=>this.controller.s("graphing-calculator-text-regression-potentially-inaccurate-parameters"),fe.const("\xA0"),fe.createElement("a",{href:fe.const("https://help.desmos.com/hc/en-us/articles/360042942771"),target:fe.const("_blank")},()=>this.controller.s("graphing-calculator-link-learn-more")))))))}onTapResidualsSuggestion(){this.controller.dispatch({type:"plot-residuals",id:this.id})}onTapLogMode(){this.controller.dispatch({type:"toggle-logmode",id:this.id})}getRegression(){return this.model.formula.regression}hasRegression(){return!!this.model.formula.regression}isNonLinearRegression(){return!this.getRegression().isLinear}getResidualVariable(){return this.getRegression().residualVariable||""}getResidualSuggestionVisible(){return this.getRegression().residualSuggestionId!==void 0}areLogModeRegressionsForced(){return this.controller.areLogModeRegressionsForced()}getShouldSuggestLogMode(){return!!this.getRegression().shouldSuggestLogMode}hasParameterWarning(){return!!this.getRegression().parameterWarning}getIsLogModeRegression(){return!!this.model.isLogModeRegression}};function ak(t,e){return __dcg_shared_module_exports__['Sa'](t.parameters[e],{digits:6,smallCutoff:1e-6,bigCutoff:1e9})}function Wl(t,e){return __dcg_shared_module_exports__['Sa'](t.statistics[e],{zeroCutoff:1e-15,digits:4,smallCutoff:1e-6,bigCutoff:1e9})}at();var bi=__dcg_shared_module_exports__['i'](ne());var Di=__dcg_shared_module_exports__['i'](ne());at();at();var zw=class extends ga{constructor(){super();this.dragging=!1,this.guid=__dcg_shared_module_exports__['K']("dragdrop-class")}_evt2pt(r){return{x:r.changedTouches[0].pageX-this._offsetPt.x,y:r.changedTouches[0].pageY-this._offsetPt.y}}_dispatch(r,i){if(this._destroyed)return;let n=this._evt2pt(i);this.triggerEvent(r,{x:n.x,y:n.y,dx:n.x-this._startPt.x,dy:n.y-this._startPt.y,evt:i})}destroy(){V(document).off(`.${this.guid}`),this._destroyed=!0}startDrag(r,i={}){if(!this.dragging)return V(document).on(`dcg-tapmove.${this.guid}`,n=>{(n.originalEvent||n).preventDefault(),cancelAnimationFrame(this.frameThrottle),this.frameThrottle=requestAnimationFrame(()=>this.doDrag(n))}),V(document).on(`dcg-tapend.${this.guid} dcg-tapcancel.${this.guid}`,n=>this.endDrag(n)),this._offsetPt={x:0,y:0},i.origin&&(this._offsetPt={x:this._evt2pt(r).x-i.origin.x,y:this._evt2pt(r).y-i.origin.y}),this._startPt=this._evt2pt(r),this.setProperty("dragging",!0),this._dispatch("onGrab",r)}doDrag(r){this.dragging&&this._dispatch("onDrag",r)}endDrag(r){this.dragging&&(V(document).off(`.${this.guid}`),this.doDrag(r),this.setProperty("dragging",!1),this._dispatch("onDrop",r))}};var{If:oU}=Di.Components;function XP(t,e,r){return Math.min(Math.max(t,e),r)}var rm=class extends Di.Class{template(){return Di.createElement("div",{class:()=>({"dcg-slider-interior":!0,"dcg-disable-slider":this.shouldDisableSlider()}),didMount:this.bindFn(this.didMountRoot),onTapStart:this.bindFn(this.onStartDrag),style:Di.const({"touch-action":"none"})},Di.createElement("div",{class:Di.const("dcg-track")},Di.createElement("div",{class:Di.const("dcg-ticks"),onMount:this.bindFn(this.didMountTickMarks)}),Di.createElement("div",{class:Di.const("dcg-graphic")})),Di.createElement(oU,{predicate:this.bindFn(this.shouldShowZeroMarker)},()=>Di.createElement("div",{class:Di.const("dcg-zeroMarker"),style:()=>({left:this.getZeroMarkerPercent()+"%"})})),Di.createElement("div",{class:()=>({"dcg-thumb":!0,"dcg-down":this.isDragging}),role:Di.const("slider"),tabindex:Di.const("0"),disablescroll:Di.const("true"),style:()=>({left:this.getThumbPercent()+"%"}),onKeyDown:this.bindFn(this.onKeyDown),"aria-label":this.props.ariaLabel,"aria-valuemin":this.props.min,"aria-valuemax":this.props.max,"aria-valuenow":this.props.value,manageFocus:this.buildFocusManager()},Di.createElement("div",{class:Di.const("dcg-graphic")}),Di.createElement("div",{class:Di.const("dcg-center")})))}willUnmount(){this.dragDrop.destroy()}didMountRoot(e){this.rootNode=e,this.dragDrop=new zw,this.isMounted=!0,this.dragDrop.observeEvent("onDrop",()=>{this.isDragging=!1,this.update(),this.props.onDrop&&this.props.onDrop()}),this.dragDrop.observeEvent("onGrab",()=>{this.isDragging=!0,this.update(),this.props.onGrab&&this.props.onGrab()}),this.dragDrop.observeEvent("onDrag",(r,i)=>{this.props.onDragUpdate(this.valueFromPixels(i.x))})}didMountTickMarks(e){this.tickMarksNode=e,this.renderTickMarks()}didUpdate(){this.renderTickMarks()}shouldDisableSlider(){return this.props.min()===this.props.max()}renderTickMarks(){if(this.tickMarksNode){var e=this.props.step(),r=this.props.min(),i=this.props.max(),n;if(e===void 0?n=0:n=100*e/(i-r),n<3&&(n=0),n>100&&(n=0),isNaN(n)&&(n=0),this.lastTickMarksPercent!==n){this.lastTickMarksPercent=n;var o="";if(n>0&&n<100)for(var a=n;a<100;a+=n)o+='<div class="dcg-tick" style="left:'+a+'%"></div>';this.tickMarksNode.innerHTML=o}}}shouldShowZeroMarker(){return this.props.min()<=0&&this.props.max()>=0}getZeroMarkerPercent(){var e=this.props.min(),r=this.props.max();return 100*(0-e)/(r-e)}getThumbPercent(){return 100*this.percentFromValue(this.props.value())}valueFromPixels(e){if(!this.isMounted)return 0;let r=this.props.min(),i=this.props.max(),n=this.rootNode.getBoundingClientRect().width,o=XP(e/n,0,1),a=r+(i-r)*o,s=(i-r)/n;return mi(a-s,a+s)}percentFromValue(e){let r=this.props.min(),i=this.props.max();return XP((e-r)/(i-r),0,1)}pixelsFromValue(e){if(!this.isMounted)return 0;let r=this.percentFromValue(e);return this.rootNode.getBoundingClientRect().width*r}onKeyDown(e){switch(Le(e)){case Rn:this.props.onUpPress&&(this.props.onUpPress(),e.preventDefault());break;case zn:this.props.onDownPress&&(this.props.onDownPress(),e.preventDefault());break;case Ks:this.props.onEnterPress&&(this.props.onEnterPress(),e.preventDefault());break;case oo:document.activeElement&&V(document.activeElement).trigger("blur");break;case gc:this.props.onKeyboardUpdate("down"),e.preventDefault();break;case fc:this.props.onKeyboardUpdate("up"),e.preventDefault();break;case yu:this.props.onKeyboardUpdate("bigdown"),e.preventDefault();break;case mu:this.props.onKeyboardUpdate("bigup"),e.preventDefault();break;case xu:this.props.onKeyboardUpdate("min"),e.preventDefault();break;case bu:this.props.onKeyboardUpdate("max"),e.preventDefault();break}}onStartDrag(e){if(e.device==="keyboard"||!e.target)return;e.preventDefault(),Ur();let r={x:0,y:0};V(e.target).closest(".dcg-thumb").length===1?r.x=this.pixelsFromValue(this.props.value()):r.x=e.changedTouches[0].clientX-this.rootNode.getBoundingClientRect().left,this.dragDrop.startDrag(e,{origin:r})}buildFocusManager(){return!this.props.onFocusedChanged||!this.props.isFocused?this.const(void 0):this.const({shouldBeFocused:this.props.isFocused,onFocusedChanged:this.props.onFocusedChanged})}};at();var Pi=__dcg_shared_module_exports__['i'](ne());var{If:aU}=Pi.Components,im=class extends Pi.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return Pi.createElement("div",{class:Pi.const("dcg-slider_menu dcg-do-blur"),handleEvent:Pi.const("true"),didMount:e=>this.node=e},Pi.createElement("div",{class:Pi.const("dcg-editable-mathquill-container")},Pi.createElement(aU,{predicate:()=>!this.shouldOnlyShowStep()},()=>Pi.createElement("span",null,Pi.createElement(Ir,{readonly:()=>this.controller.isItemReadonly(this.id),latex:()=>this.model.slider.hardMin?this.model.slider.min:"",isFocused:()=>this.getFocusedInput()==="min",ariaLabel:()=>this.controller.s("graphing-calculator-narration-slider-minimum"),brailleLabel:()=>this.controller.raw("sldrmin"),handleFocusChanged:(e,r)=>this.handleFocusedChanged("min",e,r),hasError:()=>!nx(this.model),controller:this.props.controller,handlePressedKey:(e,r)=>this.handlePressedKey("min",e,r),handleLatexChanged:e=>this.handleLatexChanged("min",e),dataLabelAttributeValue:this.const("slidermin")}),Pi.createElement("span",{class:Pi.const("dcg-interval-interior")},Pi.createElement(ze,{latex:this.bindFn(this.getDependentLatex),config:this.const({})},Pi.createElement("span",null))),Pi.createElement(Ir,{readonly:()=>this.controller.isItemReadonly(this.id),latex:()=>this.model.slider.hardMax?this.model.slider.max:"",isFocused:()=>this.getFocusedInput()==="max",ariaLabel:()=>this.controller.s("graphing-calculator-narration-slider-maximum"),brailleLabel:()=>this.controller.raw("sldrmax"),handleFocusChanged:(e,r)=>this.handleFocusedChanged("max",e,r),hasError:()=>!ox(this.model),controller:this.props.controller,handlePressedKey:(e,r)=>this.handlePressedKey("max",e,r),handleLatexChanged:e=>this.handleLatexChanged("max",e),dataLabelAttributeValue:this.const("slidermax")}))),Pi.createElement("span",{class:()=>({"dcg-slider-step-container":!this.shouldOnlyShowStep()})},Pi.createElement("span",{class:Pi.const("dcg-slider-step-label"),"aria-hidden":Pi.const("true")},()=>this.controller.s("graphing-calculator-label-slider-step")),Pi.createElement(Ir,{readonly:()=>this.controller.isItemReadonly(this.id),latex:()=>this.model.slider.step,isFocused:()=>this.getFocusedInput()==="step",ariaLabel:()=>this.controller.s("graphing-calculator-narration-slider-step"),brailleLabel:()=>this.controller.raw("sldrstep"),handleFocusChanged:(e,r)=>this.handleFocusedChanged("step",e,r),hasError:()=>!ax(this.model),controller:this.props.controller,handlePressedKey:(e,r)=>this.handlePressedKey("step",e,r),handleLatexChanged:e=>this.handleLatexChanged("step",e),dataLabelAttributeValue:this.const("sliderstep")}))))}handlePressedKey(e,r,i){if(!this.controller.isInEditListMode()&&!this.shouldOnlyShowStep()&&(r==="Esc"||r==="Enter")){this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.id}});return}let n=qe.getFocusedMathquill(),o=ko();if(r==="Left"||r==="Right"||r==="Down"||r==="Up"){var a;n?a=qe.applyArrowKeyAndReturnIfWasAtBounds(n,r,i):o&&(o.selectionStart===0&&r==="Left"||o.selectionStart===V(o).val().length&&r==="Right"||r==="Up"||r==="Down")?a=!0:a=!1,a&&(i&&i.preventDefault(),r==="Left"&&!this.shouldOnlyShowStep()?e==="max"?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:"min"}}):e==="step"&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:"max"}}):r==="Right"&&!this.shouldOnlyShowStep()?e==="min"?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:"max"}}):e==="max"&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:"step"}}):r==="Down"?this.controller.dispatch({type:"on-special-key-pressed",key:"Down"}):r==="Up"&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}));return}n&&(n.keystroke(r,i),this.handleLatexChanged(e,n.latex()))}shouldOnlyShowStep(){return this.model.slider.loopMode==="PLAY_INDEFINITELY"}handleLatexChanged(e,r){e==="min"?this.dispatchMinLatexIfChanged(r):e==="max"?this.dispatchMaxLatexIfChanged(r):e==="step"&&this.dispatchStepLatexIfChanged(r)}handleFocusedChanged(e,r,i){r&&this.getFocusedInput()!==e?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:e}}):this.getFocusedInput()===e&&this.controller.getBrailleMode()==="none"&&(!i.relatedTarget||!this.node.contains(i.relatedTarget))&&this.controller.dispatch({type:"blur-focus-location",location:{type:"slider-limit",id:this.id,location:e}})}dispatchMinLatexIfChanged(e){this.model.slider.min!==e&&this.controller.dispatch({type:"set-slider-minlatex",id:this.id,latex:e})}dispatchMaxLatexIfChanged(e){this.model.slider.max!==e&&this.controller.dispatch({type:"set-slider-maxlatex",id:this.id,latex:e})}dispatchStepLatexIfChanged(e){this.model.slider.step!==e&&this.controller.dispatch({type:"set-slider-steplatex",id:this.id,latex:e})}getDependentLatex(){var e=In(this.model)||"";return" \\le "+__dcg_shared_module_exports__['Ta'](e)+" \\le "}getFocusedInput(){let e=this.controller.getFocusLocation();if(!(!e||e.type!=="slider-limit"||e.id!==this.id))return e.location}getMQConfig(){return{autoOperatorNames:Ko()}}};var{If:QP}=bi.Components,nm=class extends bi.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return bi.createElement("span",{class:bi.const("dcg-slider-container"),tapboundary:bi.const("true"),onKeydown:e=>{Le(e)==="Tab"&&!e.altKey&&!e.metaKey&&!e.ctrlKey&&(e.shiftKey?this.isSliderMinFocused()&&this.controller.isInEditListMode()?(e.target!==null&&V(e.target).closest(".dcg-expressionitem").find('[tabindex="0"]:visible:first').trigger("focus"),e.preventDefault(),e.stopPropagation()):this.isSliderThumbFocused()&&(this.controller.isItemReadonly(this.model.id)||(this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:"step"}}),e.preventDefault(),e.stopPropagation())):!e.shiftKey&&this.isSliderStepFocused()&&(this.controller.isInEditListMode()?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-icon",id:this.id}}):this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.id}}),e.preventDefault(),e.stopPropagation()))}},bi.createElement(QP,{predicate:this.bindFn(this.shouldShowSlider)},()=>bi.createElement("div",{class:bi.const("dcg-do-blur dcg-slider"),handleEvent:bi.const("true")},bi.createElement("div",{class:bi.const("dcg-minLabel dcg-template-minlabelhtml"),role:bi.const("button"),tabindex:bi.const("0"),"aria-label":this.bindFn(this.getMinAriaLabel),onTap:()=>this.onEditLimit("min")},bi.createElement(ze,{latex:()=>ix(this.model),config:this.const({})})),bi.createElement(rm,{min:()=>da(this.model),max:()=>is(this.model),step:()=>Ga(this.model),value:()=>ua(this.model),ariaLabel:()=>this.controller.getBrailleMode()==="none"?'"'+In(this.model)+'"':""+In(this.model),onGrab:this.bindFn(this.onGrab),onDrop:this.bindFn(this.onDrop),onDragUpdate:this.bindFn(this.onDragUpdate),onKeyboardUpdate:this.bindFn(this.onKeyboardUpdate),onUpPress:()=>this.controller.dispatch({type:"on-special-key-pressed",key:"Up"}),onDownPress:()=>this.controller.dispatch({type:"on-special-key-pressed",key:"Down"}),onEnterPress:()=>this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"}),isFocused:this.bindFn(this.isSliderThumbFocused),onFocusedChanged:e=>{e?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"slider-thumb",id:this.id}})}}),bi.createElement("div",{class:bi.const("dcg-maxLabel dcg-template-maxlabelhtml"),onTap:()=>this.onEditLimit("max"),role:bi.const("button"),tabindex:bi.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-narration-slider-maximum")+" "+uo(ix(this.model))},bi.createElement(ze,{latex:()=>rV(this.model),config:this.const({})})))),bi.createElement(QP,{predicate:this.bindFn(this.shouldShowLimitInputs)},()=>bi.createElement(im,{model:this.props.model,controller:this.props.controller})))}getMinAriaLabel(){return this.controller.isItemReadonly(this.model.id)?this.controller.s("graphing-calculator-narration-slider-minimum")+" "+uo(ix(this.model)):this.controller.s("graphing-calculator-narration-edit-slider-variable-limits",{variable:this.controller.getBrailleMode()==="none"?'"'+In(this.model)+'"':""+In(this.model)})}onGrab(){this.dispatchIsDraggingIfChanged(!0)}onDrop(){this.controller.dispatch({type:"set-none-selected"}),this.dispatchIsPlayingIfChanged(!1),this.dispatchIsDraggingIfChanged(!1)}onKeyboardUpdate(e){this.controller.dispatch({type:"adjust-slider-by-keyboard",id:this.id,adjustment:e})}onDragUpdate(e){this.controller.dispatch({type:"adjust-slider-by-dragging-thumb",id:this.model.id,target:e})}onEditLimit(e){this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:e}})}dispatchIsPlayingIfChanged(e){this.model.slider.isPlaying!==e&&this.controller.dispatch({type:"set-slider-isplaying",id:this.id,isPlaying:e})}dispatchIsDraggingIfChanged(e){this.model.sliderDragging!==e&&this.controller.dispatch({type:"set-slider-dragging",id:this.id,dragging:e})}shouldShowLimitInputs(){if(this.controller.isInEditListMode())return!0;if(this.controller.isItemReadonly(this.model.id))return!1;if(!nx(this.model)||!ox(this.model)||!ax(this.model)||this.model.slider.loopMode==="PLAY_INDEFINITELY")return!0;let e=this.controller.getFocusLocation();return!!(e&&(e.type==="slider-limit"||e.type==="expression"||e.type==="top-level-icon"||e.type==="readonly-expression")&&e.id===this.id)}shouldShowSlider(){return!this.shouldShowLimitInputs()}isSliderThumbFocused(){let e=this.controller.getFocusLocation();return!!(e&&e.type==="slider-thumb"&&e.id===this.id)}isSliderMinFocused(){let e=this.controller.getFocusLocation();return!!(e&&e.type==="slider-limit"&&e.id===this.id&&e.location==="min")}isSliderStepFocused(){let e=this.controller.getFocusLocation();return!!(e&&e.type==="slider-limit"&&e.id===this.id&&e.location==="step")}};at();var si=__dcg_shared_module_exports__['i'](ne());var{For:sU,If:lU}=si.Components,ws=class extends si.Class{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return si.createElement("div",{class:si.const("dcg-create-sliders dcg-action-createslider"),handleEvent:si.const("true"),onTap:this.bindFn(this.onCreateSlider)},si.createElement("span",{class:si.const("dcg-msg")},()=>this.controller.s("graphing-calculator-label-add-slider")),si.createElement("span",{class:si.const("btns")},si.createElement(sU,{each:()=>this.getMissingVariables().slice(0,4)},si.createElement("span",null,e=>si.createElement("div",{class:si.const("dcg-slider-btn-container"),var_name:this.const(e)},si.createElement("div",{role:si.const("button"),tabindex:si.const("0"),class:()=>({"dcg-btn-slider":!0,"dcg-btn-blue":this.getMissingVariables().length===1,"dcg-btn-light-gray":this.getMissingVariables().length!==1}),didMount:r=>{r.innerHTML=__dcg_shared_module_exports__['Ua'](e)}})))),si.createElement(lU,{predicate:()=>this.getMissingVariables().length>1},()=>si.createElement("div",{class:si.const("dcg-slider-btn-container dcg-all")},si.createElement("div",{role:si.const("button"),tabindex:si.const("0"),class:si.const("dcg-btn-slider dcg-btn-blue")},()=>this.controller.s("graphing-calculator-button-slider-add-all-variables"))))))}onCreateSlider(e){if(this.controller.dispatch({type:"set-none-selected"}),!e.target)return;var r=V(e.target).closest(".dcg-slider-btn-container");if(!r.length)return;let i=r.hasClass("dcg-all"),n=i?this.getMissingVariables():[r.attr("var_name")];if(this.model.type==="ticker"?this.controller.dispatch({type:"create-sliders-for-ticker",variables:this.getMissingVariables()}):this.controller.dispatch({type:"create-sliders-for-item",id:this.model.id,variables:n}),e.device==="keyboard"){let o=this.model.id,a=this.props.controller().getItemSelectorById(o);if(!a)return;i?this.controller.dispatch({type:"move-focus-to-item",id:o}):a.find(".dcg-btn-blue").trigger("focus")}}getMissingVariables(){return this.model.type==="ticker"?lg(this.model):gg(this.model)}didMount(){this.promptAlertTimeout&&clearTimeout(this.promptAlertTimeout),this.promptAlertTimeout=setTimeout(()=>{for(var e=[],r=this.getMissingVariables(),i=0;i<r.length;i++)e.push('"'+r[i]+'"');ge(this.controller.s("graphing-calculator-narration-add-slider-prompt",{vars:e.join(",")})),this.promptAlertTimeout=0},2e3)}didUnmount(){this.promptAlertTimeout&&clearTimeout(this.promptAlertTimeout)}};var fo=__dcg_shared_module_exports__['i'](ne());var om=class extends fo.Class{template(){return fo.createElement("div",{class:fo.const("dcg-prompt-rename"),handleEvent:fo.const("true")},()=>Ug("graphing-calculator-label-rename"),fo.createElement("span",{class:fo.const("dcg-btn-light-gray"),onTap:this.props.handleRename,tabindex:fo.const(0),role:fo.const("button")},fo.createElement(ze,{latex:()=>this.props.from()+" \\to "+this.props.to(),config:this.const({})},fo.createElement("span",{style:fo.const("pointer-events:none")}))),fo.createElement("span",{class:fo.const("dcg-reference-count")},()=>Ug("graphing-calculator-label-reference-count",{count:new Wo(this.props.count())})))}};var Jo=__dcg_shared_module_exports__['i'](ne());var Kn=__dcg_shared_module_exports__['i'](ne());var{For:cU,If:dU}=Kn.Components,Oi=class extends Kn.Class{init(){this.config=this.props.staticConfig()}template(){return Kn.createElement(cU,{each:()=>this.config,key:e=>e.key},Kn.createElement("div",{class:Kn.const("dcg-segmented-control-container"),role:Kn.const("group"),"aria-label":this.props.ariaGroupLabel},e=>Kn.createElement("div",{class:()=>({"dcg-segmented-control-btn":!0,"dcg-selected":e.selected(),"dcg-theme-mini":this.getTheme()==="mini","dcg-theme-default":this.getTheme()==="default","dcg-disabled":this.isDisabled(),[e.class?e.class():""]:!!e.class}),role:Kn.const("button"),tabindex:Kn.const(0),"aria-label":()=>this.getAriaLabel(e),style:()=>({"min-width":this.props.minButtonWidth?this.props.minButtonWidth()+"px":void 0}),"aria-pressed":()=>e.selected(),onTap:()=>{this.isDisabled()||e.onSelect()},manageFocus:()=>{if(e.focusHelperOptions)return ut(e.focusHelperOptions)}},Kn.createElement(Ue,{tooltip:()=>e.tooltip?e.tooltip():"",gravity:()=>e.tooltipGravity?e.tooltipGravity():"s",disabled:()=>!(e.tooltip&&e.tooltip())},Kn.createElement("div",{class:Kn.const("dcg-segmented-control-interior")},()=>e.label?e.label():"",Kn.createElement(dU,{predicate:()=>!!e.icon},()=>Kn.createElement("i",{class:()=>e.icon?e.icon():""})))))))}getAriaLabel(e){return e.ariaLabel?e.ariaLabel():e.label?e.label():e.tooltip?e.tooltip():""}isDisabled(){return this.props.disabled&&this.props.disabled()}getTheme(){return this.props.theme?this.props.theme():"default"}};var{Input:uU,IfElse:pU}=Jo.Components,Vd=class extends Jo.Class{template(){return this.controller=this.props.controller(),Jo.createElement("div",{class:()=>({"dcg-label-visible":this.getShowLabel(),"dcg-label-container":!0,"dcg-do-blur":!0}),tapboundary:Jo.const("true"),handleEvent:Jo.const("true")},Jo.createElement(kt,{onChange:this.bindFn(this.onCheckboxInput),checked:this.bindFn(this.getShowLabel)},()=>this.controller.s("graphing-calculator-button-label")+(this.getIsDisabled()?"":":")),pU(this.bindFn(this.hasEditableLabel),{true:()=>Jo.createElement("div",{class:Jo.const("dcg-editable-mode-toggle")},Jo.createElement(Oi,{theme:this.const("mini"),staticConfig:this.bindFn(this.getEditableLabelOptions),ariaGroupLabel:()=>this.controller.s("graphing-calculator-narration-editable-label-mode")})),false:()=>Jo.createElement(uU,{class:()=>({"dcg-label-input":!0,"dcg-disabled-input":this.getIsDisabled(),"dcg-disabled-editable-input":this.hasEditableLabel(),"dcg-readonly":this.getIsReadonly()}),disabled:this.bindFn(this.getIsReadonly),"aria-label":()=>this.controller.s("graphing-calculator-narration-label-text"),"aria-disabled":()=>this.getIsDisabled()||this.hasEditableLabel()||this.getIsReadonly(),value:this.bindFn(this.getLabel),onInput:this.bindFn(this.onLabelInput)})}))}getEditableLabelOptions(){return[{key:"math",label:()=>this.controller.s("graphing-calculator-button-editable-math"),selected:()=>this.model().editableLabelMode==="MATH",onSelect:()=>this.setEditableLabelMode("MATH")},{key:"text",label:()=>this.controller.s("graphing-calculator-button-editable-text"),selected:()=>this.model().editableLabelMode==="TEXT",onSelect:()=>this.setEditableLabelMode("TEXT")}]}setEditableLabelMode(e){this.controller.dispatch({type:"set-item-editable-label-mode",id:this.id(),editableLabelMode:e})}getIsReadonly(){return this.controller.isItemReadonly(this.model().id)}model(){return this.props.model()}id(){return this.model().id}getLabel(){return this.model().label||""}hasEditableLabel(){return Zu(this.model())}getShowLabel(){return!!this.model().showLabel}getIsDisabled(){return this.getLabel().length===0&&!this.getShowLabel()}onLabelInput(e){var r=e;this.controller.dispatch({type:"set-item-label",id:this.id(),label:r}),this.controller.dispatch({type:"set-item-showlabel",id:this.id(),showLabel:!!r})}onCheckboxInput(){if(this.props.useSmartPointLabeling&&this.props.useSmartPointLabeling()){this.controller.dispatch({type:"toggle-label-for-all-selected-points"});return}this.controller.dispatch({type:"set-item-showlabel",id:this.id(),showLabel:!this.getShowLabel()})}};var ba=__dcg_shared_module_exports__['i'](ne());var qi=__dcg_shared_module_exports__['i'](ne());var{If:ZP}=qi.Components,am=class extends qi.Class{constructor(){super(...arguments),this.focusedValues={}}template(){return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,qi.createElement("div",{class:qi.const("dcg-cdf-footer-container dcg-do-blur"),tapboundary:qi.const("true"),handleEvent:qi.const("true")},qi.createElement(kt,{checked:()=>Al(this.model),disabled:()=>pE(this.model)||this.controller.isItemReadonly(this.model.id),onChange:e=>{this.controller.dispatch({type:"set-show-cdf",id:this.model.id,showCDF:e})}},()=>this.controller.s("graphing-calculator-button-find-cdf")),qi.createElement(ZP,{predicate:()=>Al(this.model)},()=>qi.createElement("div",null,qi.createElement("span",{class:qi.const("dcg-cdf-limit-name")},()=>this.controller.s("graphing-calculator-label-cdf-minimum")),qi.createElement(Ir,{handleFocusChanged:e=>this.handleFocusedChanged("min",e),latex:()=>gx(this.model),hasError:()=>!mx(this.model),isFocused:()=>this.isInputFocused("min"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-cdf-minimum"),placeholder:()=>RV(this.model),handlePressedKey:(e,r)=>this.handlePressedKey(e,r,"min"),controller:this.props.controller,handleLatexChanged:this.bindFn(this.updateCDFMin),readonly:()=>this.controller.isItemReadonly(this.model.id)}),qi.createElement("span",{class:qi.const("dcg-cdf-limit-name")},()=>this.controller.s("graphing-calculator-label-cdf-maximum")),qi.createElement(Ir,{handleFocusChanged:e=>this.handleFocusedChanged("max",e),latex:()=>fx(this.model),hasError:()=>!yx(this.model),isFocused:()=>this.isInputFocused("max"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-cdf-maximum"),placeholder:()=>NV(this.model),handlePressedKey:(e,r)=>this.handlePressedKey(e,r,"max"),controller:this.props.controller,handleLatexChanged:this.bindFn(this.updateCDFMax),readonly:()=>this.controller.isItemReadonly(this.model.id)}),qi.createElement(ZP,{predicate:this.bindFn(this.showEvaluation)},()=>qi.createElement("div",{class:qi.const("dcg-cdf-evaluation-container")},qi.createElement(Ad,{val:()=>mE(this.model),controller:this.props.controller,dependent:this.const(""),id:()=>this.model.id,focusable:this.const(!0)}))))))}handlePressedKey(e,r,i){if(e==="Esc"){this.controller.dispatch({type:"set-focus-location",location:void 0});return}if(e==="Enter")return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});var n=qe.getFocusedMathquill();n&&(n.keystroke(e,r),i==="min"&&gx(this.model)!==n.latex()&&this.updateCDFMin(n.latex()),i==="max"&&fx(this.model)!==n.latex()&&this.updateCDFMax(n.latex()))}updateCDFMax(e){this.controller.dispatch({type:"set-cdf-max",id:this.model.id,latex:e})}updateCDFMin(e){this.controller.dispatch({type:"set-cdf-min",id:this.model.id,latex:e})}showEvaluation(){return!(!yx(this.model)||!mx(this.model))}isInputFocused(e){let r=this.controller.getFocusLocation();return!r||r.type!=="cdf-limit"||r.id!==this.id?!1:r.location===e}handleFocusedChanged(e,r){r?this.controller.dispatch({type:"set-focus-location",location:{type:"cdf-limit",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"cdf-limit",id:this.id,location:e}})}};var Vn=__dcg_shared_module_exports__['i'](ne());var{If:hU,For:eO,SwitchUnion:gU}=Vn.Components,Bp=class extends Vn.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return gU(this.bindFn(this.getSuggestionType),{list:()=>Vn.createElement(eO,{each:this.bindFn(this.getListOfParameters)},Vn.createElement("div",{class:()=>({"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":this.controller.getBrailleMode()!=="none"})},e=>Vn.createElement("span",{class:Vn.const("dcg-parameter-name")},()=>this.getParamName(e)))),listWithDefault:()=>Vn.createElement(eO,{each:this.bindFn(this.getListOfParameters)},Vn.createElement("div",{class:()=>({"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":this.controller.getBrailleMode()!=="none"}),onTap:this.bindFn(this.fillInDefaults)},e=>Vn.createElement("span",{class:Vn.const("dcg-parameter-name")},()=>this.getParamName(e),Vn.createElement(hU,{predicate:()=>this.shouldShowDefaultValue(e)},()=>Vn.createElement("span",{class:Vn.const("dcg-default-marker")},Vn.const("= "),()=>this.getDefaultValue(e)))))),individual:()=>Vn.createElement("div",{class:()=>({"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":this.controller.getBrailleMode()!=="none"})},this.bindFn(this.getMissingRequiredParamText)),none:()=>{}})}getExtractedAndDefaultArgString(e){let{params:r,values:i,defaults:n}=e;return r.map((a,s)=>{let l=i[a],c=n[s];return l||c||""}).join(",")}fillInDefaults(){let e=pa(this.model);if(!e)return;let{symbol:r,span:i}=e,{input:n,start:o,end:a}=i,s=this.getExtractedAndDefaultArgString(e),l=`\\operatorname{${r}}\\left(${s}\\right)`,c=`${n.slice(0,o)}${l}${n.slice(a)}`;this.controller.dispatch({type:"set-item-latex",id:this.id,latex:c}),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}),this.controller.dispatch({type:"keypad/press-key",key:"Left"})}isMissingDefault(){if(!Fg(this.model))return!1;let e=pa(this.model);if(!e)return!1;for(var r=0;r<e.params.length;r++)if(this.shouldShowDefaultValue(e.params[r]))return!0;return!1}getSuggestionType(){return this.getListOfParameters().length>1?this.isMissingDefault()?"listWithDefault":"list":this.missingRequiredParam()?"individual":"none"}missingRequiredParam(){let e=pa(this.model);if(e&&e.params.length===1){var r=e.params[0];if(!this.getDefaultValue(r)&&!this.getParameterExtractedValue(r))return r}}getMissingRequiredParamText(){var e=this.missingRequiredParam();return e?this.controller.s("graphing-calculator-text-enter-pareneter",{param:this.getParamName(e)}):""}getDefaultValue(e){let r=pa(this.model);if(!r||!r.params)return"";for(let i=0;i<r.params.length;i++)if(r.params[i]===e)return r.defaults[i]||"";return""}getParameterExtractedValue(e){let r=pa(this.model);return r&&r.values[e]||""}shouldShowDefaultValue(e){return!this.getParameterExtractedValue(e)&&!!this.getDefaultValue(e)}getListOfParameters(){let e=pa(this.model);return e?e.params:[]}getParamName(e){switch(e){case"mean":return this.controller.s("graphing-calculator-text-parameter-name-mean");case"stdev":return this.controller.s("graphing-calculator-text-parameter-name-stddev");case"dof":return this.controller.s("graphing-calculator-text-parameter-name-dof");case"probsuccess":return this.controller.s("graphing-calculator-text-parameter-name-probsuccess");case"trials":return this.controller.s("graphing-calculator-text-parameter-name-trials");case"data":return this.controller.s("graphing-calculator-text-parameter-name-data");case"binwidth":return this.controller.s("graphing-calculator-text-parameter-name-binwidth");case"min":return this.controller.s("graphing-calculator-text-parameter-name-min");case"max":return this.controller.s("graphing-calculator-text-parameter-name-max");case"height":return this.controller.s("graphing-calculator-text-parameter-name-height");case"offset":return this.controller.s("graphing-calculator-text-parameter-name-offset");default:return e}}};var{If:fU}=ba.Components,sm=class extends ba.Class{template(){return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,ba.createElement("div",{class:ba.const("dcg-distribution-parameters-container dcg-do-blur"),tapboundary:ba.const("true"),handleEvent:ba.const("true")},ba.createElement(Bp,{model:this.props.model,controller:this.props.controller}),ba.createElement(fU,{predicate:()=>uE(this.model)},()=>ba.createElement(am,{model:this.props.model,controller:this.props.controller})))}};var At=__dcg_shared_module_exports__['i'](ne());var{SwitchUnion:mU,If:tO}=At.Components,Kp=class extends At.Class{template(){return At.createElement("div",{class:At.const("dcg-toggle-container")},At.createElement("div",{class:At.const("dcg-expression-footer-title")},this.props.title,At.createElement(tO,{predicate:()=>!!this.props.helpLink},()=>At.createElement("a",{"aria-label":()=>this.props.controller().s("account-shell-link-help"),class:At.const("dcg-expression-footer-title-help"),target:At.const("_blank"),href:this.props.helpLink},At.createElement("i",{class:At.const("dcg-icon-question-sign"),"aria-hidden":At.const("true")})))),At.createElement(Oi,{staticConfig:this.bindFn(this.getSegmentedControlOptions),ariaGroupLabel:this.props.title,disabled:this.bindFn(this.isReadonly),theme:this.const("mini"),minButtonWidth:this.const(65)}))}isReadonly(){return this.props.controller().isItemReadonly(this.props.model().id)}getSegmentedControlOptions(){return this.props.options().map(e=>({key:e.name,label:()=>e.displayName,selected:()=>this.isSelected(e.name),onSelect:()=>{this.props.controller().dispatch({type:"set-visualization-prop",id:this.props.model().id,prop:this.props.vizProp(),value:e.name})}}))}isSelected(e){return Tl(this.props.model(),this.props.vizProp())===e}},lm=class extends At.Class{template(){return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,At.createElement("div",{class:At.const("dcg-visualization-parameters-container dcg-do-blur"),tapboundary:At.const("true"),handleEvent:At.const("true")},At.createElement(Bp,__dcg_shared_module_exports__['b']({},this.props)),At.createElement("div",{class:At.const("dcg-smaller-font")},mU(()=>this.getVisualizationType(),{boxplot:()=>At.createElement("div",null,At.createElement("div",{class:At.const("dcg-expression-footer-title")},()=>this.controller.s("graphing-calculator-heading-visual-parameters-display-properties")),this.makeMQInput({prop:"axisOffset",siblingProps:["breadth"],default:"1",name:()=>this.controller.s("graphing-calculator-narration-visual-parameters-offset")}),this.makeMQInput({prop:"breadth",siblingProps:["axisOffset"],default:"1",name:()=>Tl(this.model,"alignedAxis")==="y"?this.controller.s("graphing-calculator-narration-visual-parameters-width"):this.controller.s("graphing-calculator-narration-visual-parameters-height")}),At.createElement(kt,{checked:()=>!!Tl(this.model,"showBoxplotOutliers"),disabled:()=>this.controller.isItemReadonly(this.model.id),onChange:this.bindFn(this.onToggleOutliers)},At.createElement("span",{class:At.const("dcg-parameter-name")},()=>this.controller.s("graphing-calculator-button-visual-parameters-exclude-outliers")))),dotplot:()=>At.createElement(tO,{predicate:()=>sV(this.model)},()=>At.createElement("div",{class:At.const("dcg-toggles-container")},At.createElement(Kp,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{vizProp:()=>"dotplotXMode",options:()=>[{name:"exact",displayName:this.controller.s("graphing-calculator-button-visual-parameters-exact")},{name:"bin",displayName:this.controller.s("graphing-calculator-button-visual-parameters-binned")}],title:()=>this.controller.s("graphing-calculator-heading-visual-parameters-x-values")})),At.createElement(Kp,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{vizProp:()=>"binAlignment",options:()=>[{name:"center",displayName:this.controller.s("graphing-calculator-button-visual-parameters-center")},{name:"left",displayName:this.controller.s("graphing-calculator-button-visual-parameters-left")}],title:()=>this.controller.s("graphing-calculator-heading-visual-parameters-bin-alignment")})))),histogram:()=>At.createElement("div",{class:At.const("dcg-toggles-container")},At.createElement(Kp,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{vizProp:()=>"histogramMode",options:()=>[{name:"",displayName:this.controller.s("graphing-calculator-button-visual-parameters-count")},{name:"relative",displayName:this.controller.s("graphing-calculator-button-visual-parameters-relative")},{name:"density",displayName:this.controller.s("graphing-calculator-button-visual-parameters-density")}],title:()=>this.controller.s("graphing-calculator-heading-visual-parameters-bar-heights"),helpLink:this.const("https://help.desmos.com/hc/en-us/articles/360022405991")})),At.createElement(Kp,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{vizProp:()=>"binAlignment",options:()=>[{name:"center",displayName:this.controller.s("graphing-calculator-button-visual-parameters-center")},{name:"left",displayName:this.controller.s("graphing-calculator-button-visual-parameters-left")}],title:()=>this.controller.s("graphing-calculator-heading-visual-parameters-bin-alignment")}))),none:()=>At.createElement("span",null)})))}makeMQInput(e){return At.createElement("span",null,At.createElement("span",{class:At.const("dcg-parameter-name")},e.name,At.const(":")),At.createElement(Ir,{latex:()=>this.getPropLatex(e),ariaLabel:e.name,placeholder:()=>e.default,isFocused:()=>this.isInputFocused(e.prop),hasError:()=>!nV(this.model,e.prop),handleFocusChanged:r=>this.handleFocusedChanged(e.prop,r),handlePressedKey:(r,i)=>this.handlePressedKey(r,i,e.prop),handleLatexChanged:r=>this.handleLatexChanged(e.prop,r),readonly:()=>this.controller.isItemReadonly(this.model.id),controller:this.props.controller}))}handlePressedKey(e,r,i){if(e==="Esc"){this.controller.dispatch({type:"set-focus-location",location:void 0});return}if(e==="Enter")return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});var n=qe.getFocusedMathquill();n&&(n.keystroke(e,r),this.handleLatexChanged(i,n.latex()))}isInputFocused(e){let r=this.controller.getFocusLocation();return!r||r.type!=="visualization-prop"||r.id!==this.id?!1:r.location===e}handleFocusedChanged(e,r){r?this.controller.dispatch({type:"set-focus-location",location:{type:"visualization-prop",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"visualization-prop",id:this.id,location:e}})}getPropLatex({prop:e}){let r=Tl(this.model,e);return typeof r=="string"?r:""}handleLatexChanged(e,r){Tl(this.model,e)!==r&&this.controller.dispatch({type:"set-visualization-prop",id:this.id,prop:e,value:r})}onToggleOutliers(){var e=Tl(this.model,"showBoxplotOutliers");this.controller.dispatch({type:"set-visualization-prop",id:this.id,prop:"showBoxplotOutliers",value:!e})}getVisualizationType(){return Fg(this.model)?kc(this.model)?"boxplot":Gl(this.model)?"dotplot":fd(this.model)?"histogram":"none":"none"}};var Vt=__dcg_shared_module_exports__['i'](ne());var cm=class extends Vt.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return Vt.createElement("div",{class:Vt.const("dcg-ttest-footer-container dcg-do-blur"),handleEvent:Vt.const("true")},Vt.createElement("table",null,Vt.createElement("tr",null,Vt.createElement("td",null,Vt.createElement("div",{class:Vt.const("dcg-value"),role:Vt.const("textbox"),"aria-readonly":Vt.const("true"),tabindex:Vt.const("0"),"aria-label":()=>"Less than: "+this.getLessThan()},Vt.createElement("span",{class:Vt.const("dcg-operator")},Vt.createElement(ze,{config:this.const({}),latex:this.const("<")})),Vt.createElement("span",{class:Vt.const("dcg-evaluation")},Vt.createElement(ze,{config:this.const({}),latex:()=>this.getLessThan()}))))),Vt.createElement("tr",null,Vt.createElement("td",null,Vt.createElement("div",{class:Vt.const("dcg-value"),role:Vt.const("textbox"),"aria-readonly":Vt.const("true"),tabindex:Vt.const("0"),"aria-label":()=>"Greater than: "+this.getGreaterThan()},Vt.createElement("span",{class:Vt.const("dcg-operator")},Vt.createElement(ze,{config:this.const({}),latex:this.const(">")})),Vt.createElement("span",{class:Vt.const("dcg-evaluation")},Vt.createElement(ze,{config:this.const({}),latex:()=>this.getGreaterThan()}))))),Vt.createElement("tr",null,Vt.createElement("td",null,Vt.createElement("div",{class:Vt.const("dcg-value"),role:Vt.const("textbox"),"aria-readonly":Vt.const("true"),tabindex:Vt.const("0"),"aria-label":()=>"Not equal: "+this.getNotEqual()},Vt.createElement("span",{class:Vt.const("dcg-operator")},Vt.createElement(ze,{config:this.const({}),latex:this.const("\u2260")})),Vt.createElement("span",{class:Vt.const("dcg-evaluation")},Vt.createElement(ze,{config:this.const({}),latex:()=>this.getNotEqual()})))))))}getLessThan(){var e=Gg(this.model);return e?__dcg_shared_module_exports__['Zb'](e.lessThan,5):""}getGreaterThan(){var e=Gg(this.model);return e?__dcg_shared_module_exports__['Zb'](e.greaterThan,5):""}getNotEqual(){var e=Gg(this.model);return e?__dcg_shared_module_exports__['Zb'](e.notEqual,5):""}};var je=__dcg_shared_module_exports__['i'](ne());var dm=class extends je.Class{template(){return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,je.createElement("div",{class:je.const("dcg-stats-footer-container dcg-do-blur"),handleEvent:je.const("true")},je.createElement("table",null,je.createElement("tr",null,je.createElement("td",null,je.createElement("div",{class:je.const("dcg-value"),role:je.const("textbox"),"aria-readonly":je.const("true"),tabindex:je.const("0"),"aria-label":()=>"Min: "+this.getMin()},je.createElement("span",{class:je.const("dcg-row-header")},je.const("Min")),je.createElement("span",{class:je.const("dcg-evaluation")},je.createElement(ze,{config:this.const({}),latex:this.bindFn(this.getMin)}))))),je.createElement("tr",null,je.createElement("td",null,je.createElement("div",{class:je.const("dcg-value"),role:je.const("textbox"),"aria-readonly":je.const("true"),tabindex:je.const("0"),"aria-label":()=>"Q1: "+this.getQ1()},je.createElement("span",{class:je.const("dcg-row-header")},je.const("Q1")),je.createElement("span",{class:je.const("dcg-evaluation")},je.createElement(ze,{config:this.const({}),latex:this.bindFn(this.getQ1)}))))),je.createElement("tr",null,je.createElement("td",null,je.createElement("div",{class:je.const("dcg-value"),role:je.const("textbox"),"aria-readonly":je.const("true"),tabindex:je.const("0"),"aria-label":()=>"Median: "+this.getMedian()},je.createElement("span",{class:je.const("dcg-row-header")},je.const("Median")),je.createElement("span",{class:je.const("dcg-evaluation")},je.createElement(ze,{config:this.const({}),latex:this.bindFn(this.getMedian)}))))),je.createElement("tr",null,je.createElement("td",null,je.createElement("div",{class:je.const("dcg-value"),role:je.const("textbox"),"aria-readonly":je.const("true"),tabindex:je.const("0"),"aria-label":()=>"Q3: "+this.getQ3()},je.createElement("span",{class:je.const("dcg-row-header")},je.const("Q3")),je.createElement("span",{class:je.const("dcg-evaluation")},je.createElement(ze,{config:this.const({}),latex:this.bindFn(this.getQ3)}))))),je.createElement("tr",null,je.createElement("td",null,je.createElement("div",{class:je.const("dcg-value"),role:je.const("textbox"),"aria-readonly":je.const("true"),tabindex:je.const("0"),"aria-label":()=>"Max: "+this.getMax()},je.createElement("span",{class:je.const("dcg-row-header")},je.const("Max")),je.createElement("span",{class:je.const("dcg-evaluation")},je.createElement(ze,{config:this.const({}),latex:this.bindFn(this.getMax)})))))))}getMin(){let e=Ju(this.model);return e?__dcg_shared_module_exports__['Yb'](e.min):""}getQ1(){let e=Ju(this.model);return e?__dcg_shared_module_exports__['Yb'](e.q1):""}getMedian(){let e=Ju(this.model);return e?__dcg_shared_module_exports__['Yb'](e.median):""}getQ3(){let e=Ju(this.model);return e?__dcg_shared_module_exports__['Yb'](e.q3):""}getMax(){let e=Ju(this.model);return e?__dcg_shared_module_exports__['Yb'](e.max):""}};var _i=__dcg_shared_module_exports__['i'](ne());var{If:yU}=_i.Components,Ld=class extends _i.Class{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return _i.createElement("div",{class:_i.const("dcg-action-info"),handleEvent:_i.const("true")},_i.createElement("span",{class:_i.const("dcg-action-label")},_i.const("Run ")),_i.createElement(ze,{latex:()=>this.model.clickableInfo.latex,config:this.bindFn(this.getMQConfig)}),_i.createElement("span",{class:_i.const("dcg-action-label")},_i.const(" on click")),_i.createElement(yU,{predicate:()=>!this.controller.isItemReadonly(this.model.id)},()=>_i.createElement("span",{class:_i.const("dcg-click-edit"),role:_i.const("button"),tabindex:_i.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-narration-edit-action"),onTap:this.bindFn(this.editAction)},_i.createElement("i",{class:_i.const("dcg-icon-pencil"),"aria-hidden":_i.const("true")}))))}editAction(){this.model.type==="expression"?this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"expression",model:this.model,guid:this.getMenuGUID(),focusFirstOption:!1}}):this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"image",model:this.model,guid:this.getMenuGUID(),focusFirstOption:!1}}),this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:this.model.id,location:"updaterule"}})}getMenuGUID(){return this.model.guid}getMQConfig(){return{autoOperatorNames:Ko({additionalOperators:["index"]}),autoCommands:qs()}}};var It=__dcg_shared_module_exports__['i'](ne());var{If:Ww}=It.Components,Fa=class extends It.Class{init(){this.controller=this.props.controller()}template(){return It.createElement(Ww,{predicate:this.bindFn(this.shouldShowOptions)},()=>It.createElement("span",{class:()=>({"dcg-expression-edit-actions":!0,"dcg-limited-height":this.limitedHeight()}),style:()=>({background:this.controller.getBackgroundColor()}),didMount:()=>{this.controller.isInEditListMode()&&ge(this.controller.s("graphing-calculator-narration-edit-list-mode-on"))},didUnmount:()=>{this.controller.isInEditListMode()||ge(this.controller.s("graphing-calculator-narration-edit-list-mode-off"))}},It.createElement(Ww,{predicate:()=>!this.controller.hasBackgroundColor()},()=>It.createElement("span",{class:It.const("dcg-graphic"),handleEvent:It.const("true ")})),It.createElement(Ww,{predicate:this.bindFn(this.canConvertToTable)},()=>It.createElement(Ue,{tooltip:this.bindFn(this.getConvertTooltip),gravity:this.const("s")},It.createElement("span",{class:It.const("dcg-action-createtable dcg-exp-action-button"),handleEvent:It.const("true"),role:It.const("button"),tabindex:It.const("0"),"aria-label":()=>yi(this.model(),"create_table"),onTap:this.bindFn(this.onCreateTable)},It.createElement("i",{class:It.const("dcg-icon-table"),"aria-hidden":It.const("true")})))),It.createElement(Ww,{predicate:()=>this.controller.shouldShowAuthorFeatures()},()=>It.createElement(Ue,{tooltip:this.bindFn(this.getReadonlyToggleLabel),gravity:this.const("s")},It.createElement("span",{class:()=>({"dcg-action-createtable":!0,"dcg-exp-action-button":!0,"dcg-selected":this.isReadonly()}),handleEvent:It.const("true"),role:It.const("button"),tabindex:It.const("0"),"aria-label":this.bindFn(this.getReadonlyToggleLabel),onTap:this.bindFn(this.onToggleReadonly)},It.createElement("i",{class:It.const("dcg-icon-lock"),"aria-hidden":It.const("true")})))),It.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-duplicate-expression-tooltip"),gravity:this.const("s")},It.createElement("span",{class:It.const("dcg-duplicate-btn dcg-exp-action-button"),handleEvent:It.const("true"),role:It.const("button"),tabindex:It.const("0"),"aria-label":()=>yi(this.model(),"duplicate"),onTap:this.bindFn(this.onDuplicateWithoutFocus)},It.createElement("i",{class:It.const("dcg-icon-duplicate"),"aria-hidden":It.const("true")}))),It.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-expression-delete-tooltip"),gravity:this.const("sw")},It.createElement("span",{class:It.const("dcg-delete-btn dcg-exp-action-button"),handleEvent:It.const("true"),role:It.const("button"),tabindex:It.const("0"),"aria-label":()=>yi(this.model(),"delete"),onTap:this.bindFn(this.onDelete)},It.createElement("i",{class:It.const("dcg-icon-remove"),"aria-hidden":It.const("true")})))))}shouldShowOptions(){return this.controller.isInEditListMode()&&(this.controller.shouldShowAuthorFeatures()||!this.controller.isItemReadonly(this.props.id()))}model(){return this.controller.getItemModel(this.props.id())}getConvertTooltip(){return this.shouldInsertOnCreateTable()?this.controller.s("graphing-calculator-label-convert-to-table-tooltip"):this.controller.s("graphing-calculator-label-create-table")}canConvertToTable(){let e=this.model();return!!(e&&e.type==="expression"&&e.formula.is_tableable)}limitedHeight(){let e=this.model();return e&&(e.type==="image"||this.isSlider())}isSlider(){let e=this.model();return e&&e.type==="expression"&&e.sliderExists}generateSubscriptedTableColumns(e,r,i){var n={independent:r,dependent:i};if(r==="x")return n;var o=__dcg_shared_module_exports__['Ub'](r);if(o.type!=="Identifier")return n;var a=__dcg_shared_module_exports__['Ub'](i);if(a.type!=="FunctionCall"||a.args.length!==1)return n;var s=a.args[0];if(s.type!=="Identifier"||s._symbol!==r)return n;let l=a.getInputString(),c=s.getInputSpan(),u=l.substr(0,c.start),h=l.substr(c.end);return n.independent="x_{"+e+"}",n.dependent=u+n.independent+h,n}shouldInsertOnCreateTable(){let e=this.model();return!!e&&e.type==="expression"&&Ma(e)}onCreateTable(){let e=this.model();if(!(!e||e.type!=="expression")){var r=e.formula;if(r.is_tableable&&r.table_info){var i=r.table_info,n=e.index,o=i.independent_variable,a=i.dependent_column;if(i.by_reference){let w=this.generateSubscriptedTableColumns(this.controller.generateTableXSubscript(),o,a);o=w.independent,a=w.dependent}var s,l=[],c=[];if(i.values)for(s=0;s<i.values.length;s++){var u=i.values[s][0];l.push(isNaN(u)?"":u+"");var h=i.values[s][1];c.push(isNaN(h)?"":h+"")}else for(s=-2;s<=2;s++)l.push(s+""),c.push("");var p={id:this.controller.generateId(),type:"table",readonly:!i.by_reference&&e.readonly,columns:[{id:this.controller.generateId(),latex:o,color:this.controller.getNextColor(),hidden:!1,values:l,points:!0,lines:!1,dragMode:"NONE",pointStyle:"POINT",lineStyle:"SOLID",colorLatex:"",lineOpacity:"",lineWidth:"",pointOpacity:"",pointSize:""},{id:this.controller.generateId(),latex:a,color:rs(e),hidden:!1,values:c,points:!0,lines:this.shouldInsertOnCreateTable()&&!!e.lines,dragMode:"NONE",pointStyle:"POINT",lineStyle:"SOLID",colorLatex:"",lineOpacity:"",lineWidth:"",pointOpacity:"",pointSize:""}]},g=this.controller;this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!1}),this.shouldInsertOnCreateTable()?this.controller.dispatch({type:"replace-item-at-index",index:n,state:p,focus:!0}):this.controller.dispatch({type:"insert-item-at-index",index:n+1,state:p,folderId:e.folderId,focus:!0});var y=function(){g.dispatch({type:"undo"}),g.dispatch({type:"set-edit-list-mode",isEditListMode:!0,focusExpressionList:!1})};this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-table-created"),undoCallback:y}})}}}onDelete(e){this.controller.dispatch({type:"delete-item-and-animate-out",id:this.props.id(),setFocusAfterDelete:e.device==="keyboard"})}onDuplicateWithoutFocus(){let e=this.model();e&&(e.type==="folder"?this.controller.dispatch({type:"duplicate-folder",id:this.props.id()}):this.controller.dispatch({type:"duplicate-expression",id:this.props.id()}))}isReadonly(){return this.controller.isItemReadonly(this.props.id())}onToggleReadonly(){let e=this.model();e&&this.controller.dispatch({type:"set-item-readonly",id:this.props.id(),readonly:!e.readonly})}getReadonlyIcon(){return this.isReadonly()?"dcg-icon-lock":"dcg-icon-pencil"}getReadonlyToggleLabel(){return this.isReadonly()?this.controller.s("graphing-calculator-label-unlock-expression-tooltip"):this.controller.s("graphing-calculator-label-lock-expression-tooltip")}};var To=__dcg_shared_module_exports__['i'](ne());var{If:bU}=To.Components,Up=class extends To.Class{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return To.createElement(bU,{predicate:()=>this.controller.shouldExpressionZoomFit(this.model)},()=>To.createElement("div",{class:To.const("dcg-suggested-zoom-view dcg-do-blur"),handleEvent:To.const(!0)},To.createElement(Ue,{tooltip:this.bindFn(this.getZoomText),gravity:()=>"e"},To.createElement("i",{onTap:this.bindFn(this.onZoom),role:To.const("button"),tabindex:To.const("0"),"aria-label":this.bindFn(this.getZoomText),class:To.const("dcg-icon-zoom-fit")}))))}getZoomText(){return this.controller.s("graphing-calculator-text-zoom-fit")}onZoom(e){this.controller.dispatch({type:"expression-zoom-fit",id:this.model.id,focusAfterTap:e.device==="keyboard"})}};var ht=__dcg_shared_module_exports__['i'](ne());var fn=__dcg_shared_module_exports__['i'](ne());var{Switch:xU}=fn.Components,Ra=class extends fn.Class{init(){this.controller=this.props.controller(),this.model=this.props.model()}iconType(){return this.controller.shouldShowReplaceIcon()?"rename":this.controller.isItemReadonly(this.model.id)?this.controller.shouldShowAuthorFeatures()?"lock":"none":"delete"}getAriaLabel(){switch(this.iconType()){case"none":case"lock":return;case"rename":return yi(this.model,"rename");case"delete":return yi(this.model,"delete")}}onIconTap(){this.iconType()==="delete"?this.controller.dispatch({type:"delete-item-and-animate-out",id:this.model.id,setFocusAfterDelete:!this.controller.isInEditListMode()}):this.iconType()==="rename"&&this.controller.dispatch({type:"rename-identifier-in-item",search:this.controller.getExpressionSearchStr(),replace:this.controller.getExpressionReplaceStr(),id:this.model.id})}isIconTappable(){let e=this.iconType();return e!=="none"&&e!=="lock"}template(){return fn.createElement("div",{class:fn.const("dcg-top-level-icon"),tabIndex:()=>this.isIconTappable()?0:-1,"aria-label":this.bindFn(this.getAriaLabel),handleEvent:this.bindFn(this.isIconTappable),onTap:this.bindFn(this.onIconTap),role:fn.const("button"),manageFocus:this.const({shouldBeFocused:()=>kd({controller:this.controller,location:{type:"top-level-icon",id:this.model.id}}),onFocusedChanged:(e,r)=>{var i;e?this.controller.dispatch({type:"set-focus-location",location:{type:"top-level-icon",id:this.model.id}}):r.relatedTarget&&!((i=r.relatedTarget)!=null&&i.closest("[data-dcg-label]"))&&this.controller.dispatch({type:"blur-focus-location",location:{type:"top-level-icon",id:this.model.id}})}})},fn.createElement(xU,{key:()=>this.iconType()},e=>{switch(e){case"delete":return fn.createElement("i",{class:fn.const("dcg-icon-remove dcg-top-level-delete"),"aria-hidden":fn.const("true")});case"lock":return fn.createElement("i",{class:fn.const("dcg-icon-lock dcg-lock-indicator"),"aria-hidden":fn.const("true")});case"rename":return fn.createElement("i",{class:fn.const("dcg-icon-replace"),"aria-hidden":fn.const("true")});case"none":return fn.createElement("span",null)}}))}};var{If:Pd,SwitchUnion:wU}=ht.Components,um=class extends Io{didMount(){this.onItemViewMounted(),this.lastBrailleMode=this.controller.getBrailleMode()}didMountRootNode(e){this.rootNode=e}willUnmount(){this.onItemViewUnmounted()}template(){return ht.createElement("div",{class:()=>({"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-mathitem":!0,"dcg-inFolder":!!this.model.folderId,"dcg-readonly":this.controller.isItemReadonly(this.id),"dcg-selected":this.controller.isItemSelected(this.id)&&!this.controller.isInEditListMode(),"dcg-dragging":!!this.controller.isItemBeingDragged(this.id),"dcg-hasSlider":this.hasSlider(),"dcg-hasEvaluation":this.controller.shouldShowEvaluationForItem(this.id),"dcg-hasRegression":this.hasRegression(),"dcg-hasDomain":this.hasDomain()}),"expr-id":()=>this.model.id,didMount:this.bindFn(this.didMountRootNode)},ht.createElement("div",{class:ht.const("dcg-fade-container"),onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},ht.createElement("div",{class:ht.const("dcg-main")},ht.createElement(Pd,{predicate:()=>!this.controller.isInEditListMode()&&!this.isReadonly()},()=>ht.createElement(Vi,__dcg_shared_module_exports__['b']({latex:()=>Ag(this.model),ariaLabel:()=>this.getAriaLabel("braille"),brailleShouldFocus:()=>this.isFocused(),onBrailleInput:e=>this.handleLatexChanged(e),onBrailleFocusedChanged:(e,r)=>this.handleMQFocusedChanged(e,r),onBrailleKeydown:this.bindFn(this.handleBraillePressedKey)},gn(this.controller)),ht.createElement(qe,{latex:()=>Ag(this.model),getAriaLabel:()=>this.getAriaLabel("speech"),getAriaPostLabel:this.bindFn(this.getFormulaAria),isFocused:()=>this.isFocused(),tokenController:this.props.controller,capExpressionSize:()=>this.controller.getCapExpressionSize(),config:this.bindFn(this.getMQConfig),hasError:this.const(!1),onUserPressedKey:(e,r)=>this.handlePressedKey(e,r),onUserChangedLatex:e=>this.handleLatexChanged(e),onExpressionSizeExceeded:()=>this.controller.dispatch({type:"expression-size-exceeded"}),onFocusedChanged:(e,r)=>this.handleMQFocusedChanged(e,r),needsSystemKeypad:()=>!this.controller.isKeypadEnabled()}))),ht.createElement(Pd,{predicate:()=>this.controller.isInEditListMode()||this.isReadonly()},()=>ht.createElement("div",{class:ht.const("dcg-edit-list-mathquill"),tabindex:()=>this.controller.getBrailleMode()==="none"?"0":"-1",onTap:()=>this.controller.isInEditListMode()?this.exitEditListMode():{},onKeydown:this.bindFn(this.handleReadonlyPressedKey),manageFocus:this.const({shouldBeFocused:()=>this.controller.getBrailleMode()!=="none"?!1:kd({controller:this.controller,location:{type:"readonly-expression",id:this.model.id}}),onFocusedChanged:(e,r)=>{this.controller.getBrailleMode()==="none"&&(e?this.controller.dispatch({type:"set-focus-location",location:{type:"readonly-expression",id:this.model.id}}):this.doesNodeBelongToSliderLimit(r.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"readonly-expression",id:this.model.id}}))}})},ht.createElement(Vi,__dcg_shared_module_exports__['b']({latex:()=>Ag(this.model),ariaLabel:()=>this.getAriaLabel("braille"),isStatic:this.const(!0),brailleShouldFocus:()=>{let e=this.controller.getFocusLocation();return!e||e.type!=="readonly-expression"?!1:e.id===this.id},onBrailleFocusedChanged:(e,r)=>{e?this.controller.dispatch({type:"set-focus-location",location:{type:"readonly-expression",id:this.model.id}}):this.doesNodeBelongToSliderLimit(r.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"readonly-expression",id:this.model.id}})}},gn(this.controller)),ht.createElement(ze,{latex:()=>Ag(this.model),config:this.bindFn(this.getMQConfig),getAriaLabel:()=>this.getAriaLabel("speech")}))))),ht.createElement(Ra,{controller:this.props.controller,model:this.props.model}),ht.createElement(Pd,{predicate:this.bindFn(this.shouldShowFooter)},()=>ht.createElement("div",{class:this.getFooterClass()},wU(()=>this.getFooterType(),{none:()=>{},regression:()=>ht.createElement(tm,{model:this.props.model,controller:this.props.controller}),label:()=>ht.createElement(Vd,{model:this.props.model,controller:this.props.controller}),slider:()=>ht.createElement(nm,{model:this.props.model,controller:this.props.controller}),domain:()=>ht.createElement(em,{model:this.props.model,controller:this.props.controller}),evaluation:()=>ht.createElement(Ad,{id:()=>this.props.model().id,dependent:()=>In(this.model)||"",val:()=>this.controller.getEvaluationValueForItem(this.id),controller:this.props.controller,focusable:this.const(!0)}),distribution:()=>ht.createElement(sm,{model:this.props.model,controller:this.props.controller}),visualization:()=>ht.createElement(lm,{model:this.props.model,controller:this.props.controller}),ttest:()=>ht.createElement(cm,{model:this.props.model,controller:this.props.controller}),stats:()=>ht.createElement(dm,{model:this.props.model,controller:this.props.controller}),unresolved:()=>ht.createElement(Zf,{controller:this.props.controller})}),ht.createElement(Pd,{predicate:this.bindFn(this.shouldShowBrailleError)},()=>ht.createElement("div",{tabindex:ht.const(0),class:ht.const("dcg-expression-braille-error"),role:ht.const("button"),"aria-roledescription":ht.const("error"),"aria-label":()=>this.controller.unpack(this.model.error)},ht.createElement("i",{class:ht.const("dcg-icon-error"),"aria-hidden":ht.const("true")}),()=>this.controller.unpack(this.model.error))),ht.createElement(Pd,{predicate:this.bindFn(this.shouldShowSliderPrompt)},()=>ht.createElement(ws,{model:this.props.model,controller:this.props.controller})),ht.createElement(Pd,{predicate:this.bindFn(this.shouldShowRenamePrompt)},()=>ht.createElement(om,{from:this.bindFn(this.getRenameIdentifierFrom),to:this.bindFn(this.getRenameIdentifierTo),count:this.bindFn(this.getRenameCountOfChanges),handleRename:this.bindFn(this.handleRename)})))),ht.createElement(Pd,{predicate:this.bindFn(this.shouldShowActionInfo)},()=>ht.createElement("div",{class:this.getFooterClass()},ht.createElement(Ld,{model:this.props.model,controller:this.props.controller})))),ht.createElement("span",{class:ht.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),handleevent:ht.const("true"),tapboundary:ht.const("true"),disablescroll:ht.const("true"),style:ht.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},ht.createElement("span",{class:ht.const("dcg-num")},()=>this.model.displayIndex),ht.createElement("div",{class:ht.const("dcg-tab-interior dcg-action-icon-mouse")},ht.createElement(Qf,{model:this.props.model,controller:this.props.controller})),ht.createElement(Up,{model:this.props.model,controller:this.props.controller})),ht.createElement(Fa,{controller:this.props.controller,id:()=>this.model.id}))}getRenameIdentifierFrom(){let e=this.controller.getSuggestedIdentifierRenameInfo(this.id);return e&&e.from||""}getRenameIdentifierTo(){let e=this.controller.getSuggestedIdentifierRenameInfo(this.id);return e&&e.to||""}getRenameCountOfChanges(){let e=this.controller.getSuggestedIdentifierRenameInfo(this.id);return e&&e.countOfChanges||0}handleRename(){this.controller.dispatch({type:"rename-identifier-global",search:this.getRenameIdentifierFrom(),replace:this.getRenameIdentifierTo()})}didUpdate(){this.lastBrailleMode=this.controller.getBrailleMode()}shouldShowFooter(){return this.shouldShowBrailleError()||this.shouldShowSliderPrompt()||this.shouldShowRenamePrompt()?!0:this.getFooterType()!=="none"}getFooterType(){return this.hasRegression()?"regression":this.shouldShowLabelView()?"label":this.hasSlider()?"slider":this.hasDomain()?"domain":this.isTTest()?"ttest":this.isStats()?"stats":this.controller.shouldShowEvaluationForItem(this.id)?"evaluation":this.isToplevelDistribution()?"distribution":this.isVisualization()?"visualization":this.model.unresolved?"unresolved":"none"}getFooterClass(){return this.isFirstRender()?this.const("dcg-expression-bottom dcg-indent-in-folder"):this.const("dcg-expression-bottom dcg-indent-in-folder dcg-fadein-bottom")}onCreateSliders(e){this.controller.dispatch({type:"create-sliders-for-item",id:this.id,variables:e})}shouldShowLabelView(){return vu("labels")&&PV(this.model)}shouldShowSliderPrompt(){return this.controller.areSlidersEnabled()?zb(this.model).length>0:!1}shouldShowRenamePrompt(){return this.getRenameCountOfChanges()>0}shouldShowActionInfo(){return!!(this.controller.areActionsEnabled()&&this.model.clickableInfo&&this.model.clickableInfo.enabled&&this.model.clickableInfo.latex)}shouldShowBrailleError(){return this.controller.getBrailleMode()!=="none"&&this.hasError()}hasRegression(){return!!(this.model.formula&&this.model.formula.is_regression)}hasDomain(){return ux(this.model)}isToplevelDistribution(){return Ic(this.model)}isVisualization(){return hx(this.model)}isTTest(){return dE(this.model)}isStats(){return _V(this.model)}hasSlider(){return!!this.model.sliderExists}getLabelOptions(){return this.controller.getEvaluationLabelOptionsForItem(this.model.id)}getAriaLabel(e){if(this.shouldShowLabelView()){var r;this.model.label&&this.model.label!==""?r=this.model.label:e==="speech"?r=this.controller.s("graphing-calculator-narration-expression-label"):r=this.controller.raw("lbl");var i;return this.model.showLabel?i=r:e==="speech"?i=this.controller.s("graphing-calculator-narration-expression-hidden-label",{label:r}):i=this.controller.raw("h __label__",{label:r}),i}return e==="speech"?this.controller.s("shared-calculator-narration-expression-index",{index:this.model.displayIndex}):this.controller.raw("eq__index__",{index:this.model.displayIndex})}getFormulaAria(){let e=this.model.formula,r="";if(!e||Ia(this.model))return r;if(this.controller.shouldShowEvaluationForItem(this.id)){r="equals ";let i=e.zero_values&&e.zero_values.length?e.zero_values[0].val:e.constant_value;Array.isArray(i)?r+=i.length+" element list.":i!==void 0&&(r+=nn(__dcg_shared_module_exports__['Sa'](+i,this.getLabelOptions())))}else e.error&&!this.shouldShowSliderPrompt()?r=this.controller.unpack(e.error):Ic(this.model)?r=this.controller.s("graphing-calculator-narration-expression-evaluation-is-distribution"):this.isTTest()&&(r=this.controller.s("graphing-calculator-narration-expression-evaluation-is-t-test"));if(this.model.shouldGraph&&(e.is_graphable||e.is_regression)){e.is_graphable&&e.is_regression?r+=" "+this.controller.s("graphing-calculator-narration-expression-evaluation-has-graph-and-regression"):e.is_regression?r+=" "+this.controller.s("graphing-calculator-narration-expression-evaluation-has-regression"):r+=" "+this.controller.s("graphing-calculator-narration-expression-evaluation-has-graph");let i=this.controller.getAudioGraph();i&&i.agNavigator.canTrace(this.model)&&(gi?r+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-mac"):r+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-windows"))}return r}handleBraillePressedKey(e){let r=Le(e);if(r){if(r==="Esc")Ur(),this.hasSlider()&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.model.id}});else if(r==="Up"||r==="Down"||r==="Enter")this.controller.dispatch({type:"on-special-key-pressed",key:r});else if(r==="Del"||r==="Backspace"){let i=ko();Ia(this.model)&&_p(i)&&(this.controller.dispatch({type:"on-special-key-pressed",key:r==="Del"?"Delete":r}),e.preventDefault(),e.stopPropagation())}}}handleReadonlyPressedKey(e){if(this.controller.isInEditListMode())return;let r=Le(e);!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&(r==="Esc"?(e.preventDefault(),e.stopPropagation(),Ur(),this.hasSlider()&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.model.id}})):(r==="Up"||r==="Down"||r==="Enter")&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"on-special-key-pressed",key:r})))}handlePressedKey(e,r){var i=qe.getFocusedMathquill();if(i){if(e==="Esc"){Ur(),this.hasSlider()&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.model.id}});return}else if(e==="Up"||e==="Down"){var n=qe.applyArrowKeyAndReturnIfWasAtBounds(i,e,r);return n?this.controller.dispatch({type:"on-special-key-pressed",key:e}):void 0}else if(e==="Delete"||e==="Backspace"){if(Ia(this.model))return this.controller.dispatch({type:"on-special-key-pressed",key:e})}else if(e==="Enter")return r&&(r.preventDefault(),r.stopPropagation()),this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});i.keystroke(e,r),this.handleLatexChanged(i.latex())}}handleLatexChanged(e){e!==this.model.latex&&this.controller.dispatch({type:"set-item-latex",id:this.id,latex:e})}doesNodeBelongToSliderLimit(e){return!e||!this.rootNode.contains(e)?!1:!!V(e).closest("[data-dcg-label]").length}handleMQFocusedChanged(e,r){e?this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}):!this.doesNodeBelongToSliderLimit(r.relatedTarget)&&this.lastBrailleMode===this.controller.getBrailleMode()&&this.controller.dispatch({type:"blur-focus-location",location:{type:"expression",id:this.id}})}onMouseSelect(e){this.isReadonly()||e.device!=="keyboard"&&(e.type==="dcg-tap"&&e.device==="mouse"||e.type==="dcg-tapstart"&&e.device==="touch"||e.wasHandled()||(e.handle(),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}})))}isReadonly(){return this.controller.isItemReadonly(this.id)}isFocused(){let e=this.controller.getFocusLocation();return!e||e.type!=="expression"?!1:e.id===this.id}isSliderThumbFocused(){let e=this.controller.getFocusLocation();return!e||e.type!=="slider-thumb"?!1:e.id===this.id}hasError(){return!!this.model.error&&!Ia(this.model)}getMQConfig(){return this.controller.getMathquillConfig({})}};function gn(t,e){let r=i=>ht.createElement(ze,{config:()=>({}),latex:()=>i});return{tooltipOptions:()=>__dcg_shared_module_exports__['b']({latexView:r},e||{}),sixKeyInput:()=>t.getSixKeyInput(),mode:()=>t.getBrailleMode(),capExpressionSize:()=>t.getCapExpressionSize()?{exceedsLimit:i=>i.length>kp,onExpressionSizeExceeded:()=>t.dispatch({type:"expression-size-exceeded"})}:void 0}}var vs=__dcg_shared_module_exports__['i'](ne());at();var{Textarea:vU}=vs.Components,jl=class extends vs.Class{template(){return vs.createElement("div",{class:vs.const("dcg-smart-textarea-container")},vs.createElement("div",{class:vs.const("dcg-displayTextarea dcg-fixed-width-element"),didMount:this.bindFn(this.didMountDisplay)}),vs.createElement(vU,{class:()=>({"dcg-do-blur":!0,"dcg-fixed-width-element":!0,"dcg-smart-textarea":!0,"dcg-empty":!this.props.text()}),"aria-label":()=>{var e,r;return(r=(e=this.props).ariaLabel)==null?void 0:r.call(e)},placeholder:this.bindFn(this.getPlaceholder),readonly:()=>this.props.readonly()?!0:void 0,value:this.props.text,onInput:this.props.onInput,didMount:this.bindFn(this.didMountTextarea),onKeydown:this.bindFn(this.onKeydownEvent)}))}getDisplayTextHTML(){let e=this.props.text()||"",r=(o,a)=>e.slice(o,a).replace(/</g,"&lt;").replace(/>/g,"&gt;"),i=0,n="";if(this.props.showLinks()){let o=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,a=null;for(;(a=o.exec(e))!==null;){let[s]=a;n+=r(i,a.index),n+=`<a rel='nofollow ugc' href='${s}' target ='_blank'>${s}</a>`,i=o.lastIndex}}return n+=r(i),n}willUnmount(){this.textareaNode=void 0}didMountDisplay(e){this.displayNode=e,V(e).on("touchend",function(r){r.preventDefault()}),V(e).on("dcg-tap dcg-tapstart","a",function(r){r.handle()}),this.renderDisplayText()}didMountTextarea(e){this.textareaNode=e,V(e).on("dcg-tapstart",r=>{r.handle()}),V(e).on("focusin focusout",()=>this.onFocusEvent()),this.updateFocused()}didUpdate(){this.updateFocused(),this.renderDisplayText()}onFocusEvent(){if(this.textareaNode){var e=document.activeElement===this.textareaNode;this.shouldBeFocused()!==e&&this.props.onFocusChange(e)}}renderDisplayText(){if(!this.displayNode)return;let e=this.getDisplayTextHTML();this.lastDisplayTextHTML!==e&&(this.lastDisplayTextHTML=e,this.displayNode.innerHTML=e)}isFocused(){return document.activeElement===this.textareaNode}shouldBeFocused(){return this.props.shouldFocus()}updateFocused(){if(!this.textareaNode)return;let e=this.isFocused(),r=this.shouldBeFocused();if(e!==r)if(!r)this.textareaNode.blur();else{if(Ja&&El)return;this.textareaNode.focus(),this.textareaNode.selectionStart=this.textareaNode.selectionEnd=this.textareaNode.value.length}}onKeydownEvent(e){var r=this.textareaNode;if(!r)return;var i=Le(e);let n=this.props.readonly(),o=this.props.readonlyAction&&this.props.readonlyAction();if(n&&o!==void 0&&o.predicate()){!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&(i===Ks||i===Qh)&&(e.preventDefault(),o.action());return}i===Ks&&!e.metaKey?(e.preventDefault(),this.props.onSpecialKey("Enter")):i===oo?Ur():i===Rn?(n||r.selectionStart===0&&r.selectionEnd===0)&&!(e.altKey||e.metaKey)&&(e.preventDefault(),this.props.onSpecialKey("Up")):i===zn?(n||r.selectionStart===r.value.length&&r.selectionEnd===r.value.length)&&!(e.altKey||e.metaKey)&&(e.preventDefault(),this.props.onSpecialKey("Down")):i===oa&&!(n&&o!==void 0&&o.predicate())?r.value.length===0&&(e.preventDefault(),this.props.onSpecialKey("Backspace")):i===nd&&!(n&&o!==void 0&&o.predicate())&&r.value.length===0&&(e.preventDefault(),this.props.onSpecialKey("Delete")),this.props.onKeydown&&this.props.onKeydown(e)}getPlaceholder(){var e,r;if(!this.props.text())return(r=(e=this.props).placeholder)==null?void 0:r.call(e)}};var Hi=__dcg_shared_module_exports__['i'](ne());var pm=class extends Io{didMount(){this.onItemViewMounted()}willUnmount(){this.onItemViewUnmounted()}template(){return Hi.createElement("div",{class:()=>({"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-readonly":this.controller.isItemReadonly(this.id),"dcg-expressiontext":!0,"dcg-inFolder":!!this.model.folderId,"dcg-selected":!!this.controller.isItemSelected(this.id),"dcg-dragging":!!this.controller.isItemBeingDragged(this.id)}),"expr-id":()=>this.model.id,onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},Hi.createElement("div",{class:Hi.const("dcg-fade-container")},Hi.createElement("div",{class:Hi.const("dcg-main")},Hi.createElement(jl,{shouldFocus:this.bindFn(this.isFocused),text:()=>this.model.text,showLinks:()=>this.controller.areLinksEnabled(),onInput:this.bindFn(this.onInput),onFocusChange:this.bindFn(this.onFocusChange),onSpecialKey:this.bindFn(this.onSpecialKey),readonly:()=>this.controller.isInEditListMode()||this.controller.isItemReadonly(this.id),readonlyAction:this.const({predicate:()=>this.controller.isInEditListMode(),action:()=>this.exitEditListMode()}),ariaLabel:()=>yi(this.model,"edit_title"),placeholder:()=>this.controller.s("graphing-calculator-text-note-placeholder")})),Hi.createElement(Ra,{controller:this.props.controller,model:this.props.model})),Hi.createElement("span",{class:Hi.const("dcg-tab dcg-action-drag"),handleevent:Hi.const("true"),tapboundary:Hi.const("true"),disablescroll:Hi.const("true"),style:Hi.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},Hi.createElement("span",{class:Hi.const("dcg-num")},()=>this.model.displayIndex),Hi.createElement("div",{class:Hi.const("dcg-tab-interior")}),Hi.createElement("i",{class:Hi.const("dcg-icon-text"),"aria-hidden":Hi.const("true")})),Hi.createElement(Fa,{controller:this.props.controller,id:()=>this.model.id}))}onInput(e){this.controller.dispatch({type:"set-note-text",id:this.id,text:e})}onFocusChange(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"text",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"text",id:this.id}})}onSpecialKey(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})}isFocused(){let e=this.controller.getFocusLocation();return!(!e||e.type!=="text"||e.id!==this.id)}};var Et=__dcg_shared_module_exports__['i'](ne());at();var Gr=__dcg_shared_module_exports__['i'](ne());var mo=__dcg_shared_module_exports__['i'](ne());var{SwitchUnion:CU}=mo.Components,hm=class extends mo.Class{init(){this.model=this.props.model(),this.controller=this.props.controller()}template(){return mo.createElement("div",{class:mo.const("dcg-table-icon-container")},CU(this.bindFn(this.typeOfIcon),{error:()=>mo.createElement(Jn,{error:()=>this.controller.unpack(this.model.error),gravity:this.const("se")}),none:()=>mo.createElement("span",null),icon:()=>mo.createElement("div",{class:mo.const("dcg-circular-icon-container"),role:mo.const("button"),tabindex:mo.const("0"),"aria-label":this.bindFn(this.getIconAriaLabel),handleevent:mo.const("true"),"dcg-open-menu-guid":()=>this.getMenuGUID(),onTap:e=>{if(!e.wasHandled("dragdrop")&&!e.wasLongheld()){if(this.myOptionsOpen())return this.toggleOptions();if(this.controller.isInEditListMode()||e.shiftKey)return this.toggleOptions();this.toggleGraphShown()}},onLongHold:e=>{e.handle("dcg-longhold"),e.handle("dcg-tap"),this.toggleOptions()},manageFocus:this.const(ut({controller:this.controller,location:{type:"table-icon",id:this.model.table.id,columnId:this.model.id}}))},mo.createElement(Li,{iconType:this.bindFn(this.getIcon),backgroundColor:this.bindFn(this.getModelColor)}))}))}getModelColor(){return Ig(this.model)}getMenuGUID(){return this.model.guid}myOptionsOpen(){return this.controller.isItemSettingsMenuOpen(this.getMenuGUID())}toggleOptions(){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"table-column",model:this.model,guid:this.getMenuGUID(),focusFirstOption:!1}})}toggleGraphShown(){this.controller.dispatch({type:"toggle-tablecolumn-hidden",tableId:this.model.table.id,columnId:this.model.id})}hasError(){return!!this.model.error}getIcon(){return this.model.shouldGraph?this.controller.isInEditListMode()?"none":this.model.points&&this.model.lines?"table-points-and-lines":this.model.points&&!this.model.lines?"table-points":!this.model.points&&this.model.lines?"table-lines":"none":"hidden"}typeOfIcon(){return this.model.latex===""||!this.controller.getGraphSettings().config.graphpaper?"none":this.model.error?"error":this.model.index===0?"none":"icon"}getIconAriaLabel(){return this.myOptionsOpen()?this.controller.s("graphing-calculator-narration-hide-options"):this.controller.isInEditListMode()?this.controller.s("graphing-calculator-narration-show-options"):this.model.shouldGraph?this.controller.s("graphing-calculator-narration-hide-table-column"):this.controller.s("graphing-calculator-narration-show-table-column")}};var{If:gm}=Gr.Components,fm=class extends Gr.Class{init(){this.model=this.props.model(),this.controller=this.props.controller(),this.table=this.model.table}isRightSide(){return this.lookupCellPosition().column>=this.table.columnModels.length-1}template(){return Gr.createElement("div",{class:()=>({"dcg-cell":!0,"dcg-table-header":!0,"dcg-do-not-blur":!0,"dcg-left":this.model.index===0,"dcg-right":this.isRightSide(),"dcg-selected":this.shouldFocus()&&!this.table.readonly,"dcg-error":!!this.model.error}),index:()=>this.model.index,onTapStart:this.bindFn(this.focusThisCell)},Gr.createElement("div",{class:Gr.const("dcg-inner-border")}),Gr.createElement(gm,{predicate:()=>!this.isRightSide()},()=>Gr.createElement(hm,{model:this.props.model,controller:this.props.controller})),Gr.createElement("div",{role:Gr.const("columnheader")},Gr.createElement(gm,{predicate:()=>!this.controller.isInEditListMode()&&!this.table.readonly},()=>Gr.createElement(Vi,__dcg_shared_module_exports__['b']({latex:()=>this.model.latex||"",brailleShouldFocus:this.bindFn(this.shouldFocus),ariaLabel:()=>this.getAriaLabel("braille"),onBrailleInput:e=>this.handleLatexChanged(e),onBrailleFocusedChanged:this.bindFn(this.handleMQFocusedChanged),selectOnFocus:this.const(!0),onBrailleKeydown:this.bindFn(this.handleKeydownOnBrailleInput)},gn(this.props.controller(),{gravity:"s"})),Gr.createElement(qe,{latex:()=>this.model.latex||"",isFocused:this.bindFn(this.shouldFocus),capExpressionSize:()=>this.controller.getCapExpressionSize(),config:this.bindFn(this.getMQConfig),getAriaLabel:()=>this.getAriaLabel("speech"),getAriaPostLabel:this.bindFn(this.getAriaPostLabel),hasError:this.const(!1),onUserPressedKey:(e,r)=>this.handlePressedKey(e,r),onUserChangedLatex:e=>this.handleLatexChanged(e),onExpressionSizeExceeded:()=>this.controller.dispatch({type:"expression-size-exceeded"}),onFocusedChanged:this.bindFn(this.handleMQFocusedChanged),selectOnFocus:this.const(!0),needsSystemKeypad:()=>!this.controller.isKeypadEnabled()}))),Gr.createElement(gm,{predicate:()=>this.controller.isInEditListMode()||this.controller.isItemReadonly(this.table.id)},()=>Gr.createElement(Vi,__dcg_shared_module_exports__['b']({latex:()=>this.model.latex||"",ariaLabel:()=>this.getAriaLabel("braille"),onBrailleInput:e=>this.handleLatexChanged(e),tabindex:this.const(-1),isStatic:this.const(!0),brailleShouldFocus:this.bindFn(this.shouldFocusReadonlyCell),onBrailleFocusedChanged:this.bindFn(this.handleMQFocusedChanged)},gn(this.props.controller(),{gravity:"s"})),Gr.createElement(ze,{latex:()=>this.model.latex||"",config:this.bindFn(this.getMQConfig),getAriaLabel:()=>this.getAriaLabel("speech")},Gr.createElement("span",{class:Gr.const("dcg-math-field dcg-cell-math-content"),role:Gr.const("textbox"),"aria-readonly":Gr.const("true"),tabindex:()=>this.controller.isInEditListMode()?-1:0,onKeyDown:this.bindFn(this.handleKeydownOnReadonlyCell),manageFocus:this.const({shouldBeFocused:this.bindFn(this.shouldFocusReadonlyCell),onFocusedChanged:this.bindFn(this.handleFocusedChanged)})})))),Gr.createElement(gm,{predicate:()=>this.model.dragMode!=="NONE"&&!this.model.error},()=>Gr.createElement("span",{class:Gr.const("dcg-drag-icon"),"dcg-drag-mode":()=>this.model.dragMode,style:()=>({color:this.model.color})},Gr.createElement("i",{class:()=>({"dcg-icon-move":this.model.dragMode==="XY","dcg-icon-move-horizontal":this.model.dragMode==="X","dcg-icon-move-vertical":this.model.dragMode==="Y"}),"aria-hidden":Gr.const("true")})))),Gr.createElement("div",{class:Gr.const("dcg-empty-line")}),Gr.createElement(gm,{predicate:()=>this.isRightSide()},()=>Gr.createElement("span",{class:Gr.const("dcg-fade-right")})))}focusThisCell(e){e.wasHandled()||(e.handle(),!this.controller.isItemReadonly(this.table.id)&&(this.shouldFocus()||this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})))}handleFocusedChanged(e,r){e?this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}):this.isNodeWithinTableCell(r.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})}lookupCellPosition(){return{row:0,column:this.model.index}}getAriaLabel(e){var r=this.lookupCellPosition();return e==="speech"?this.controller.s("graphing-calculator-narration-table-column-header",{column:r.column+1}):this.controller.raw("h__column__",{column:r.column+1})}getAriaPostLabel(){let e="",r=this.model;return r.shouldGraph&&(r.points||r.lines)&&!wG(r)&&(e=this.controller.s("graphing-calculator-narration-expression-evaluation-has-graph"),gi?e+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-mac"):e+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-windows")),e}handlePressedKey(e,r){var i=qe.getFocusedMathquill();i&&(qe.handleKeystrokeAndDecideIfSpecialEvent(i,e,r)?this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:e}):this.handleLatexChanged(i.latex()))}handleKeydownOnBrailleInput(e){let r=Le(e);if(!r)return;let i=r==="Enter"||r==="Up"||r==="Down",n=ko(),o=n&&r==="Left"&&n.selectionStart===0||r==="Right"&&n.selectionStart===V(n).val().length,a=this.model.latex.length===0&&_p(n);(i||o||(r==="Del"||r==="Backspace")&&a)&&(this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:r==="Del"?"Delete":r}),e.preventDefault())}handleKeydownOnReadonlyCell(e){let r=Le(e);r!=="Tab"&&(e.preventDefault(),r==="Esc"&&Ur(),r&&this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:r}))}handleLatexChanged(e){var r=this.model.latex;r!==e&&this.controller.dispatch({type:"set-tablecell-latex",tableId:this.table.id,cell:this.lookupCellPosition(),latex:e})}shouldFocus(){return!this.controller.isInEditListMode()&&__dcg_shared_module_exports__['E'](this.lookupCellPosition(),so(this.table))}shouldFocusReadonlyCell(){return __dcg_shared_module_exports__['E'](this.lookupCellPosition(),so(this.table))}isNodeWithinTableCell(e){if(!e||V(e).closest(".dcg-cell").length===0)return!1;var r=this.controller.getItemRootNodeById(this.table.id);return r?V.contains(r,e):!1}handleMQFocusedChanged(e,r){e?this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}):this.isNodeWithinTableCell(r.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})}getMQConfig(){return this.controller.getMathquillConfig({})}};var li=__dcg_shared_module_exports__['i'](ne());at();var{If:sk}=li.Components,mm=class extends li.Class{init(){this.column=this.props.column(),this.controller=this.props.controller(),this.table=this.column.table}template(){return li.createElement("div",{class:()=>({"dcg-cell":!0,"dcg-do-not-blur":!0,"dcg-empty":this.isEmpty(),"dcg-non-editable":!!this.column.disabled,"dcg-error":!!this.hasError(),"dcg-selected":this.shouldFocus()&&!this.controller.isItemReadonly(this.table.id)}),onTapStart:this.bindFn(this.focusThisCell)},li.createElement("div",{class:li.const("dcg-inner-border")}),li.createElement("div",{role:li.const("gridcell")},li.createElement(sk,{predicate:this.bindFn(this.hasError)},()=>li.createElement("span",{class:li.const("dcg-table-icon-error-container")},li.createElement(Jn,{error:this.bindFn(this.getErrorMessage),gravity:this.const("se"),size:this.const("small")}))),li.createElement(sk,{predicate:()=>!this.isColumnEditable()},()=>li.createElement(Vi,__dcg_shared_module_exports__['b']({latex:()=>this.getValue(),brailleShouldFocus:this.bindFn(this.shouldFocusReadonlyCell),ariaLabel:()=>this.getAriaLabel("braille"),tabindex:()=>this.controller.isInEditListMode()?-1:0,isStatic:this.const(!0),onBrailleFocusedChanged:this.bindFn(this.handleFocusedChanged),onBrailleKeydown:e=>(this.handleKeydownOnReadonlyCell(e),!0)},gn(this.props.controller(),{gravity:"s"})),li.createElement(ze,{getAriaLabel:()=>this.getAriaLabel("speech"),latex:()=>this.getValue(),config:this.bindFn(this.getMQConfig)},li.createElement("span",{class:li.const("dcg-math-field dcg-cell-math-content dcg-mathquill-input-span"),role:li.const("textbox"),"aria-roledescription":()=>this.column.disabled?this.controller.s("graphing-calculator-narration-computed-cell-role-description"):void 0,"aria-readonly":li.const("true"),tabindex:()=>!this.controller.isInEditListMode()&&(!this.isEmpty()||!this.column.disabled)?0:-1,onKeyDown:this.bindFn(this.handleKeydownOnReadonlyCell),manageFocus:this.const({shouldBeFocused:this.bindFn(this.shouldFocusReadonlyCell),onFocusedChanged:this.bindFn(this.handleFocusedChanged)})})))),li.createElement(sk,{predicate:this.bindFn(this.isColumnEditable)},()=>li.createElement(Vi,__dcg_shared_module_exports__['b']({latex:()=>this.getValue(),brailleShouldFocus:this.bindFn(this.shouldFocusEditableCell),ariaLabel:()=>this.getAriaLabel("braille"),onBrailleInput:e=>this.handleLatexChanged(e),onBrailleFocusedChanged:this.bindFn(this.handleFocusedChanged),onBrailleKeydown:this.bindFn(this.handleKeydownOnBrailleInput),selectOnFocus:this.const(!0)},gn(this.props.controller(),{gravity:"s"})),li.createElement(qe,{latex:()=>this.getValue(),isFocused:this.bindFn(this.shouldFocusEditableCell),capExpressionSize:()=>this.controller.getCapExpressionSize(),config:this.bindFn(this.getMQConfig),getAriaLabel:()=>this.getAriaLabel("speech"),getAriaPostLabel:this.bindFn(this.getErrorMessage),hasError:this.const(!1),onUserPressedKey:(e,r)=>this.handlePressedKey(e,r),onUserChangedLatex:e=>this.handleLatexChanged(e),onExpressionSizeExceeded:()=>this.controller.dispatch({type:"expression-size-exceeded"}),onFocusedChanged:this.bindFn(this.handleFocusedChanged),selectOnFocus:this.const(!0),needsSystemKeypad:()=>!this.controller.isKeypadEnabled()})))),li.createElement("div",{class:li.const("dcg-empty-line")}))}focusThisCell(e){e.wasHandled()||this.controller.isItemReadonly(this.table.id)||(e.handle(),!this.shouldFocus()&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}))}handlePressedKey(e,r){var i=qe.getFocusedMathquill();if(i){let n=qe.handleKeystrokeAndDecideIfSpecialEvent(i,e,r);e===oo&&Ur(),n?this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:e}):this.handleLatexChanged(i.latex())}}handleKeydownOnBrailleInput(e){let r=Le(e);if(!r)return;r===oo&&Ur();let i=r==="Enter"||r==="Up"||r==="Down",n=ko(),o=n&&r==="Left"&&n.selectionStart===0||r==="Right"&&n.selectionStart===V(n).val().length;(i||o||(r==="Del"||r==="Backspace")&&this.getValue().length===0)&&(this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:r==="Del"?"Delete":r}),e.preventDefault())}handleKeydownOnReadonlyCell(e){let r=Le(e);r!=="Tab"&&(e.preventDefault(),r==="Esc"&&Ur(),r&&this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:r}))}handleLatexChanged(e){var r=this.getValue();r!==e&&this.controller.dispatch({type:"set-tablecell-latex",tableId:this.table.id,cell:this.lookupCellPosition(),latex:e})}shouldFocus(){return __dcg_shared_module_exports__['E'](this.lookupCellPosition(),so(this.table))}shouldFocusReadonlyCell(){return!this.controller.isInEditListMode()&&(this.controller.isItemReadonly(this.table.id)||!!this.column.disabled)&&this.shouldFocus()}shouldFocusEditableCell(){return!this.column.disabled&&this.shouldFocus()}isNodeWithinTableCell(e){if(!e||V(e).closest(".dcg-cell").length===0)return!1;var r=this.controller.getItemRootNodeById(this.table.id);return r?V.contains(r,e):!1}handleFocusedChanged(e,r){e?this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}):this.isNodeWithinTableCell(r.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})}lookupCellPosition(){return{row:this.props.rowIdx(),column:this.column.index}}getPackedError(){return this.column.packedErrors[this.props.rowIdx()-1]}hasError(){return!!this.getPackedError()}getErrorMessage(){let e=this.getPackedError();return e?this.controller.unpack(e):""}getValue(){let e=this.props.rowIdx()-1,r=this.column.index;return Db(this.table,e,r)}isEmpty(){let e=ko();return this.getValue()===""&&_p(e)}getAriaLabel(e){var r=this.lookupCellPosition(),i=r.row,n=r.column+1;return e==="speech"?this.controller.s("graphing-calculator-narration-table-row-column",{row:i.toString(),column:n.toString()}):this.controller.raw("r__row__c__column__",{row:i.toString(),column:n.toString()})}isColumnEditable(){return!this.column.disabled&&!this.controller.isItemReadonly(this.table.id)&&!this.controller.isInEditListMode()}getMQConfig(){return this.controller.getMathquillConfig({})}};at();var{For:lk}=Et.Components,ym=class extends Io{didMount(){this.onItemViewMounted()}willUnmount(){this.onItemViewUnmounted()}template(){return Et.createElement("div",{class:()=>({"dcg-expressionitem":!0,"dcg-expressiontable":!0,"dcg-readonly":this.controller.isItemReadonly(this.id),"dcg-inFolder":!!this.model.folderId,"dcg-selected":!!this.controller.isItemSelected(this.id),"dcg-dragging":!!this.controller.isItemBeingDragged(this.id),"dcg-faded-h":this.shouldFadeLastColumn(),"dcg-faded-v":this.shouldFadeLastRow()}),"expr-id":()=>this.model.id,didMount:this.bindFn(this.didMountContainer),onKeydown:this.bindFn(this.onKeydown)},Et.createElement("div",{class:Et.const("dcg-fade-container dcg-disable-horizontal-scroll-to-cursor")},Et.createElement("div",{class:Et.const("dcg-main")},Et.createElement("div",{class:Et.const("dcg-table-container"),tabindex:()=>this.controller.isInEditListMode()?0:-1,"aria-label":()=>this.controller.getBrailleMode()==="none"?this.controller.s("graphing-calculator-narration-expression-index-table",{index:this.model.displayIndex}):this.controller.s("graphing-calculator-narration-expression-index-table",{index:this.model.displayIndex}),didMount:this.bindFn(this.didMountContainer),manageFocus:this.const({shouldBeFocused:this.shouldBeFocused.bind(this),onFocusedChanged:this.onFocusedChanged.bind(this)})},Et.createElement("div",{class:Et.const("dcg-table-sliding-container"),style:()=>({transform:`translateX(${this.computeScrolledX()}px)`})},Et.createElement(lk,{each:()=>this.getVisibleRows(),key:e=>this.getRowGUID(e)},Et.createElement("div",{role:Et.const("grid"),class:Et.const("dcg-tabledata")},e=>e.type==="show-more"?Et.createElement("tr",{role:Et.const("row"),class:Et.const("dcg-show-more-row")},Et.createElement("td",{colspan:this.bindFn(this.getColSpan)},this.bindFn(this.missingRowMessage),Et.createElement("div",{tabindex:Et.const(0),role:Et.const("button"),class:Et.const("dcg-show-more"),onTap:()=>this.controller.dispatch({type:"table-show-more-rows",id:this.id})},()=>this.controller.s("graphing-calculator-button-show-all-table-rows")))):e.type==="spacer-row"?Et.createElement("tr",{role:Et.const("row"),class:Et.const("dcg-blank-row")},Et.createElement("td",{colspan:this.bindFn(this.getColSpan),style:()=>({height:(e.endIdx-e.startIdx+1)*this.getRowHeight()+"px"})})):e.type==="header"?Et.createElement(lk,{each:()=>this.model.columnModels,key:r=>r.guid},Et.createElement("tr",{role:Et.const("row"),"aria-rowindex":Et.const(0),class:()=>({"dcg-row":e,"dcg-braille-row":this.controller.getBrailleMode()!=="none"})},r=>Et.createElement(fm,{controller:this.props.controller,model:this.const(r)}))):Et.createElement(lk,{each:()=>this.model.columnModels,key:r=>r.guid},Et.createElement("tr",{role:Et.const("row"),"aria-rowindex":()=>e.index,class:()=>({"dcg-row":e,"dcg-braille-row":this.controller.getBrailleMode()!=="none"})},r=>Et.createElement(mm,{controller:this.props.controller,column:this.const(r),rowIdx:()=>e.index})))))))),Et.createElement(Ra,{controller:this.props.controller,model:this.props.model})),Et.createElement("span",{class:Et.const("dcg-tab dcg-action-drag"),handleevent:Et.const("true"),tapboundary:Et.const("true"),disablescroll:Et.const("true"),style:Et.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},Et.createElement("span",{class:Et.const("dcg-num")},()=>this.model.displayIndex),Et.createElement("div",{class:Et.const("dcg-tab-interior")}),Et.createElement(Up,{model:this.props.model,controller:this.props.controller})),Et.createElement(Fa,{controller:this.props.controller,id:()=>this.model.id}))}getRowGUID(e){switch(e.type){case"header":return"header";case"show-more":return"show-more";case"spacer-row":return`spacer-${e.startIdx}-${e.endIdx}`;case"standard-row":return`row-${e.index}`}}getColSpan(){return this.model.columnModels.length-1}getRowHeight(){return this.controller.getGraphSettings().config.projectorMode?38:33}getVisibleRows(){let e=[{type:"header"}],r=Da(this.model)+1;if(r<=25){for(let g=1;g<r;g++)e.push({type:"standard-row",index:g});return e}let i=ld(this.model);if(i!==void 0){for(let g=1;g<i.min;g++)e.push({type:"standard-row",index:g});e.push({type:"show-more"});for(let g=i.max;g<r;g++)e.push({type:"standard-row",index:g});return e}let n=jf(this.controller),o=n?n.height:0,a=V(this.node).offset(),s=(a?a.top:0)-(n?n.top:0),l=V(this.node).find(".dcg-row:eq(0)").height(),c=this.getRowHeight();if(o/c>r){for(let g=1;g<r;g++)e.push({type:"standard-row",index:g});return e}let u=(-s-l)/c,h=(o-s)/c;for(var p=1;p<r;p++){let g=so(this.model);if(p===r-2||g&&g.row===p)e.push({type:"standard-row",index:p});else if(p>h||p<u){let y=e[e.length-1];y&&y.type==="spacer-row"?y.endIdx=p:e.push({type:"spacer-row",startIdx:p,endIdx:p})}else e.push({type:"standard-row",index:p})}return e}missingRowMessage(){let e=ld(this.model);return e===void 0?"":this.controller.s("graphing-calculator-text-table-more-rows",{rowCount:e.max-e.min})}didMountContainer(e){this.node=e,V(e).on("scroll",()=>e.scrollLeft=0)}getSelectedCell(){return so(this.model)}computeScrolledX(){if(!this.getSelectedCell()||!this.node)return 0;let e=this.node.children[0],r=this.node.querySelector(".dcg-selected");if(e===null||r===null)return 0;let i=this.node.getBoundingClientRect(),n=r.getBoundingClientRect(),o=n.left-e.getBoundingClientRect().left,a=i.width-o-n.width-80,s=Math.min(0,i.width-e.scrollWidth-30);return a=Math.max(a,s),Math.min(0,a)}shouldFadeLastRow(){return vG(this.model)&&!this.isBottomFocused()}shouldFadeLastColumn(){return!this.isRightFocused()}isBottomFocused(){let e=this.getSelectedCell();return!!e&&e.row===Da(this.model)}isRightFocused(){let e=this.getSelectedCell();return!!e&&e.column===this.model.columnModels.length-1}isReadonly(){return this.controller.isItemReadonly(this.id)}isFocused(){return!!this.getSelectedCell()}onKeydown(e){this.controller.isInEditListMode()||e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey&&(Le(e)==="Up"?(e.preventDefault(),e.stopPropagation(),this.moveToFirstCellInColumn()):Le(e)==="Down"?(e.preventDefault(),e.stopPropagation(),this.moveToLastCellInColumn()):Le(e)==="Left"?(e.preventDefault(),e.stopPropagation(),this.moveToFirstCellInRow()):Le(e)==="Right"?(e.preventDefault(),e.stopPropagation(),this.moveToLastCellInRow()):vi(e)==="H"&&(e.preventDefault(),e.stopPropagation(),this.speakColumnHeader()))}moveToFirstCellInColumn(){let e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:0,column:e.column}}})}moveToLastCellInColumn(){let e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:Da(this.model),column:e.column}}})}moveToFirstCellInRow(){let e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:e.row,column:0}}})}moveToLastCellInRow(){let e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:e.row,column:Da(this.model)-1}}})}speakColumnHeader(){let e=this.controller.s("graphing-calculator-narration-table-no-column-header"),r=this.getSelectedCell();if(r){let i=this.model.columnModels[r.column].latex;i&&(e=Uo.StaticMath(document.createElement("span")).latex(i).mathspeak())}ge(e)}focusHelperOptions(){return{controller:this.controller,location:{type:"table-container",id:this.model.id}}}shouldBeFocused(){return kd(this.focusHelperOptions())}onFocusedChanged(e){if(this.controller.isInEditListMode())return oD(this.focusHelperOptions(),e)}};var gr=__dcg_shared_module_exports__['i'](ne());var bm=class extends Io{didMount(){this.onItemViewMounted()}willUnmount(){this.onItemViewUnmounted()}template(){return gr.createElement("div",{class:()=>({"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-readonly":this.controller.isItemReadonly(this.id),"dcg-expressionfolder":!0,"dcg-inFolder":!1,"dcg-selected":this.renderAsSelected(),"dcg-dragging":!!this.controller.isItemBeingDragged(this.id),"dcg-collapsed":!!this.model.collapsed,"dcg-hidden":!!this.model.hidden,"dcg-has-items":this.controller.getNumberOfItemsInFolder(this.id)>0,"dcg-secretFolder":this.model.secret&&!this.controller.shouldShowAuthorFeatures()}),"expr-id":()=>this.model.id,onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},gr.createElement("div",{class:gr.const("dcg-fade-container")},gr.createElement("div",{class:gr.const("dcg-main")},gr.createElement("div",{role:gr.const("button"),tabindex:gr.const("0"),"aria-pressed":()=>this.model.collapsed,"aria-label":()=>this.model.collapsed?yi(this.model,"expand"):yi(this.model,"collapse"),class:gr.const("dcg-caret-container dcg-action-toggle-folder-collapsed dcg-do-not-blur"),handleEvent:gr.const("true"),onTap:this.bindFn(this.toggleCollapsed)},gr.createElement("i",{class:gr.const("dcg-icon-caret-down"),"aria-hidden":gr.const("true")})),gr.createElement(jl,{shouldFocus:this.bindFn(this.isFocused),text:()=>this.model.title,showLinks:()=>this.controller.areLinksEnabled(),onInput:this.bindFn(this.onInput),onFocusChange:this.bindFn(this.onFocusChange),onSpecialKey:this.bindFn(this.onSpecialKey),ariaLabel:this.bindFn(this.getAriaLabel),readonly:()=>this.controller.isInEditListMode()||this.controller.isItemReadonly(this.id),readonlyAction:this.const({predicate:()=>this.controller.isInEditListMode(),action:()=>this.exitEditListMode()}),placeholder:()=>this.controller.s("graphing-calculator-text-folder-placeholder")}),gr.createElement(kt,{checked:()=>this.model.secret,class:this.const("dcg-action-toggle-secret-folder dcg-do-not-blur"),style:()=>({display:this.controller.shouldShowAuthorFeatures()?void 0:"none"}),onChange:this.bindFn(this.toggleSecret)},gr.createElement("span",{class:gr.const("dcg-checkbox-label")},()=>this.controller.s("graphing-calculator-button-hide-folder-from-students-2")))),gr.createElement(Ra,{controller:this.props.controller,model:this.props.model})),gr.createElement("span",{class:gr.const("dcg-tab dcg-action-drag"),handleevent:gr.const("true"),tapboundary:gr.const("true"),disablescroll:gr.const("true"),style:gr.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},gr.createElement("span",{class:gr.const("dcg-num")},()=>this.model.displayIndex),gr.createElement("div",{class:gr.const("dcg-tab-interior")},gr.createElement("span",{role:gr.const("button"),tabindex:gr.const("0"),"aria-pressed":()=>!!this.model.hidden,"aria-label":()=>this.model.hidden?yi(this.model,"show"):yi(this.model,"hide"),class:gr.const("dcg-circular-icon-container dcg-expression-icon-container"),onTap:this.bindFn(this.toggleHidden)},gr.createElement(Li,{iconType:()=>this.model.hidden?"hidden":"folder",whiteIcon:()=>this.renderAsSelected()||this.controller.isItemBeingDragged(this.model.id)})))),gr.createElement(Fa,{controller:this.props.controller,id:()=>this.model.id}))}renderAsSelected(){return this.controller.isItemSelected(this.model.id)||this.model.collapsedChildIsSelected}toggleHidden(){this.controller.dispatch({type:"toggle-item-hidden",id:this.id})}toggleSecret(){this.controller.dispatch({type:"set-item-secret",id:this.id,isSecret:!this.model.secret})}toggleCollapsed(){this.controller.dispatch({type:"set-folder-collapsed",id:this.id,isCollapsed:!this.model.collapsed})}onInput(e){this.controller.dispatch({type:"set-folder-title",id:this.id,title:e})}onFocusChange(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"folder",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"folder",id:this.id}})}onSpecialKey(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})}isFocused(){let e=this.controller.getFocusLocation();return!(!e||e.type!=="folder"||e.id!==this.id)}getAriaLabel(){let e="",r="";switch((this.model.hidden?1:0)+(this.model.collapsed?16:0)+(this.model.secret?256:0)+(this.model.readonly?4096:0)){case 0:r=this.controller.s("graphing-calculator-narration-description-folder");break;case 1:r=this.controller.s("graphing-calculator-narration-description-hidden-folder");break;case 16:r=this.controller.s("graphing-calculator-narration-description-collapsed-folder");break;case 256:r=this.controller.s("graphing-calculator-narration-description-secret-folder");break;case 4096:r=this.controller.s("graphing-calculator-narration-description-readonly-folder");break;case 1+16:r=this.controller.s("graphing-calculator-narration-description-hidden-collapsed-folder");break;case 1+256:r=this.controller.s("graphing-calculator-narration-description-hidden-secret-folder");break;case 1+4096:r=this.controller.s("graphing-calculator-narration-description-hidden-readonly-folder");break;case 256+16:r=this.controller.s("graphing-calculator-narration-description-collapsed-secret-folder");break;case 256+4096:r=this.controller.s("graphing-calculator-narration-description-secret-readonly-folder");break;case 16+4096:r=this.controller.s("graphing-calculator-narration-description-collapsed-readonly-folder");break;case 1+256+16:r=this.controller.s("graphing-calculator-narration-description-hidden-collapsed-secret-folder");break;case 1+16+4096:r=this.controller.s("graphing-calculator-narration-description-hidden-collapsed-readonly-folder");break;case 1+256+4096:r=this.controller.s("graphing-calculator-narration-description-hidden-secret-readonly-folder");break;case 16+256+4096:r=this.controller.s("graphing-calculator-narration-description-collapsed-secret-readonly-folder");break;case 1+16+256+4096:r=this.controller.s("graphing-calculator-narration-description-hidden-collapsed-secret-readonly-folder");break}let c=this.controller.getNumberOfItemsInFolder(this.id);return c>0?e=this.controller.s("graphing-calculator-narration-folder-has-items",{folder:r,count:c}):e=r,e}};at();var Ke=__dcg_shared_module_exports__['i'](ne());function jw(t){let e=document.createElement("a");return e.href=t,e.href}var yo=__dcg_shared_module_exports__['i'](ne());var{SwitchUnion:SU}=yo.Components,xm=class extends yo.Class{init(){this.model=this.props.model(),this.controller=this.props.controller()}template(){return yo.createElement("div",{class:yo.const("dcg-expression-icon-container dcg-image-icon-container")},SU(this.bindFn(this.typeOfIcon),{error:()=>yo.createElement(Jn,{error:()=>this.controller.unpack(this.model.error),isWhite:this.bindFn(this.isSelected),gravity:this.const("se")}),failed:()=>yo.createElement("span",null),loading:()=>yo.createElement(Li,{iconType:this.const("loading")}),hidden:()=>this.buildIconView(),image:()=>this.buildIconView()}))}buildIconView(){return yo.createElement("div",{class:yo.const("dcg-circular-icon-container"),role:yo.const("button"),tabindex:yo.const("0"),"dcg-open-menu-guid":()=>this.getMenuGUID(),"aria-label":this.bindFn(this.getIconAriaLabel),onTap:e=>{if(!e.wasHandled("dragdrop")&&!e.wasLongheld()){if(this.myOptionsOpen())return this.toggleOptions(e);if(this.controller.isInEditListMode()||e.shiftKey)return this.toggleOptions(e);this.toggleImageShown()}},onLongHold:e=>{e.handle("dcg-longhold"),e.handle("dcg-tap"),this.toggleOptions(e)},manageFocus:this.const(ut({controller:this.controller,location:{type:"image-icon",id:this.model.id}}))},yo.createElement(Li,{iconType:()=>this.typeOfIcon()==="hidden"?"hidden":"background",backgroundImage:this.bindFn(this.getBackgroundImage),backgroundOpacity:this.const(1),whiteIcon:this.bindFn(this.isSelected)}))}isSelected(){return this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)}typeOfIcon(){return this.model.loadStatus==="loading"?"loading":this.model.loadStatus==="failed"?"failed":this.hasError()?"error":this.model.shouldGraph?"image":"hidden"}getMenuGUID(){return this.model.guid}myOptionsOpen(){return this.controller.isItemSettingsMenuOpen(this.getMenuGUID())}toggleOptions(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"image",model:this.model,guid:this.getMenuGUID(),focusFirstOption:e.device==="keyboard"}})}hasError(){return!!this.model.error&&this.controller.getBrailleMode()==="none"}getBackgroundImage(){return this.model.image_url===this.lastURL?this.lastEncodedURL:(this.lastURL=this.model.image_url,this.lastEncodedURL='url("'+jw(this.model.image_url)+'")',this.lastEncodedURL)}toggleImageShown(){this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id}),this.controller.dispatch({type:"set-focus-location",location:{type:"image-icon",id:this.model.id}})}getIconAriaLabel(){return this.myOptionsOpen()?yi(this.model,"hide-options"):this.controller.isInEditListMode()?yi(this.model,"show-options"):this.model.hidden?yi(this.model,"show"):yi(this.model,"hide")}};var Na=__dcg_shared_module_exports__['i'](ne());at();var Yl=class extends Na.Class{init(){this.controller=this.props.controller()}template(){return Na.createElement("div",{class:Na.const("dcg-do-not-blur"),onTap:this.bindFn(this.newImage),handleEvent:Na.const("true"),role:Na.const("button"),tabindex:()=>this.props.readonly()?-1:0,"aria-label":this.props.ariaLabel,"aria-disabled":()=>this.props.readonly(),manageFocus:this.const(this.props.location?ut({controller:this.controller,location:this.props.location()}):void 0)},this.children,Na.createElement("input",{type:Na.const("file"),accept:Na.const("image/*"),style:Na.const("display: none"),didMount:this.bindFn(this.didMountFileInput)}))}didMountFileInput(e){this.fileInputNode=e,V(e).on("change",()=>{this.props.onFileChange(e.files),V(e).val("")})}newImage(){this.props.readonly()||this.fileInputNode.click()}};var{If:wm,SwitchUnion:EU}=Ke.Components,Od=class extends Ke.Class{init(){this.model=this.props.model(),this.controller=this.props.controller()}template(){return Ke.createElement(Ir,{containerClass:()=>({"dcg-image-input-mathquill":!0,"dcg-suffix-degree":this.props.name()==="angle"&&this.props.controller().getGraphSettings().degreeMode,"dcg-suffix-radian":this.props.name()==="angle"&&!this.props.controller().getGraphSettings().degreeMode}),fontSize:this.const("large"),fullWidth:this.const(!0),readonly:this.props.readonly,latex:()=>this.model[this.props.name()],isFocused:()=>this.props.focusedInput()===this.props.name(),ariaLabel:()=>this.controller.raw(this.props.name()),handleFocusChanged:this.bindFn(this.handleMQFocusedChanged),hasError:()=>$G(this.model,this.props.name()),controller:this.props.controller,handlePressedKey:this.bindFn(this.handlePressedKey),handleLatexChanged:this.bindFn(this.handleLatexChanged),noBorder:()=>!this.props.focusedInput()})}getInputs(){return["center","width","angle","height","opacity"]}handlePressedKey(e,r){let i=this.props.name();var n=qe.getFocusedMathquill();let o=this.getInputs(),a=o.indexOf(i);if(!this.controller.isInEditListMode()){if(e==="Enter")return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});if(e==="Esc"){Ur();return}}let s=-1;e==="Up"&&(s=a===1?4:a-2),e==="Down"&&(s=a===4?1:a+2),e==="Left"&&(s=a-1),e==="Right"&&(s=a+1);let l=e;if(s>=0&&s<o.length){let c=!1;if(n)c=qe.applyArrowKeyAndReturnIfWasAtBounds(n,l,r);else if(e==="Up"||e==="Down")c=!0;else{let u=ko();c=u&&(e==="Left"&&u.selectionStart===0||e==="Right"&&u.selectionStart===V(u).val().length)}c&&(this.focusInput(o[s]),r&&r.preventDefault());return}n&&(n.keystroke(e,r),this.handleLatexChanged(n.latex()))}focusInput(e){this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.model.id,location:e}})}handleLatexChanged(e){let r=this.props.name();this.model.draggingOnGraphpaper||FG(this.model,r)!==e&&this.controller.dispatch({type:"set-image-mq-attribute",id:this.model.id,attribute:r,latex:e})}handleMQFocusedChanged(e){let r=this.props.name();e?this.props.focusedInput()!==r&&this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.model.id,location:r}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"image",id:this.model.id,location:r}})}},vm=class extends Io{didMount(){this.onItemViewMounted()}willUnmount(){this.onItemViewUnmounted()}template(){return Ke.createElement("div",{class:()=>({"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-readonly":this.controller.isItemReadonly(this.id),"dcg-expressionimage":!0,"dcg-inFolder":!!this.model.folderId,"dcg-selected":this.controller.isItemSelected(this.id),"dcg-dragging":!!this.controller.isItemBeingDragged(this.id),"dcg-input-focused":this.getFocusedInput()&&this.getFocusedInput()!=="name"}),"expr-id":()=>this.model.id,onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},Ke.createElement("div",{class:Ke.const("dcg-fade-container")},Ke.createElement("div",{class:Ke.const("dcg-main")},EU(()=>this.model.loadStatus,{failed:()=>Ke.createElement("div",null,Ke.createElement("div",{class:Ke.const("dcg-image-failed")},()=>this.controller.s("graphing-calculator-error-failed-to-load-image")),Ke.createElement("div",{role:Ke.const("button"),tabindex:Ke.const(0),class:Ke.const("dcg-retry-loading-image"),onTap:this.bindFn(this.onRetryLoad)},()=>this.controller.s("graphing-calculator-button-load-image-retry"))),loading:()=>Ke.createElement("div",null,Ke.createElement("div",{class:Ke.const("dcg-image-loading")},()=>this.controller.s("graphing-calculator-text-loading-image")),Ke.createElement("div",{role:Ke.const("button"),tabindex:Ke.const(0),class:Ke.const("dcg-retry-loading-image"),onTap:this.bindFn(this.onRetryLoad)},()=>this.controller.s("graphing-calculator-button-load-image-retry"))),loaded:()=>Ke.createElement("div",{class:Ke.const("dcg-image-loaded")},Ke.createElement("div",{class:Ke.const("dcg-image-title-row")},Ke.createElement(jl,{shouldFocus:()=>this.getFocusedInput()==="name",text:()=>this.model.name,ariaLabel:()=>yi(this.model,"edit_title"),placeholder:()=>this.controller.s("graphing-calculator-text-image-placeholder"),showLinks:()=>this.controller.areLinksEnabled(),onInput:this.bindFn(this.onNameInput),onFocusChange:this.bindFn(this.onNameFocusChange),onSpecialKey:this.bindFn(this.onNameSpecialKey),readonly:()=>this.controller.isInEditListMode()||this.isReadonly()}),Ke.createElement(wm,{predicate:()=>this.controller.areImagesEnabled()},()=>Ke.createElement(Yl,{controller:()=>this.controller,ariaLabel:()=>this.controller.s("graphing-calculator-button-change-image"),onFileChange:e=>this.insertFiles(e),location:this.const({type:"change-image-btn",id:this.id}),readonly:this.bindFn(this.isReadonly)},Ke.createElement(wm,{predicate:()=>!this.isReadonly()},()=>Ke.createElement("div",{class:Ke.const("dcg-action-changeimage")},()=>this.controller.s("graphing-calculator-button-change-image")))))),Ke.createElement("div",{class:()=>({"dcg-do-blur":!0,"dcg-image-input-grid":!0}),handleEvent:Ke.const("true")},Ke.createElement("div",{class:Ke.const("dcg-image-input-name")},()=>this.controller.s("graphing-calculator-label-image-center")),Ke.createElement(Od,{name:this.const("center"),controller:()=>this.controller,model:()=>this.model,focusedInput:this.bindFn(this.getFocusedInput),readonly:this.bindFn(this.isReadonly)}),Ke.createElement("div",{class:Ke.const("dcg-image-input-name")},()=>this.controller.s("graphing-calculator-label-image-width")),Ke.createElement(Od,{name:this.const("width"),controller:()=>this.controller,model:()=>this.model,focusedInput:this.bindFn(this.getFocusedInput),readonly:this.bindFn(this.isReadonly)}),Ke.createElement("div",{class:Ke.const("dcg-image-input-name")},()=>this.controller.s("graphing-calculator-label-image-angle")),Ke.createElement(Od,{name:this.const("angle"),controller:()=>this.controller,model:()=>this.model,focusedInput:this.bindFn(this.getFocusedInput),readonly:this.bindFn(this.isReadonly)}),Ke.createElement("div",{class:Ke.const("dcg-image-input-name")},()=>this.controller.s("graphing-calculator-label-image-height")),Ke.createElement(Od,{name:this.const("height"),controller:()=>this.controller,model:()=>this.model,focusedInput:this.bindFn(this.getFocusedInput),readonly:this.bindFn(this.isReadonly)}),Ke.createElement("div",{class:Ke.const("dcg-image-input-name")},()=>this.controller.s("graphing-calculator-label-image-opacity")),Ke.createElement(Od,{name:this.const("opacity"),controller:()=>this.controller,model:()=>this.model,focusedInput:this.bindFn(this.getFocusedInput),readonly:this.bindFn(this.isReadonly)})))})),Ke.createElement("span",{class:Ke.const("dcg-fadeout")}),Ke.createElement(Ra,{controller:this.props.controller,model:this.props.model}),Ke.createElement(wm,{predicate:this.bindFn(this.shouldShowBrailleError)},()=>Ke.createElement("div",{class:this.getFooterClass()},Ke.createElement("div",{tabindex:Ke.const(0),class:Ke.const("dcg-expression-braille-error"),"aria-roledescription":Ke.const("error"),"aria-label":()=>this.controller.unpack(this.model.error)},Ke.createElement("i",{class:Ke.const("dcg-icon-error"),"aria-hidden":Ke.const("true")}),()=>this.controller.unpack(this.model.error)))),Ke.createElement(wm,{predicate:()=>Gb(this.model).length>0&&this.controller.areSlidersEnabled()},()=>Ke.createElement("div",{class:this.getFooterClass()},Ke.createElement(ws,{model:this.props.model,controller:this.props.controller}))),Ke.createElement(wm,{predicate:this.bindFn(this.shouldShowActionInfo)},()=>Ke.createElement("div",{class:this.getFooterClass()},Ke.createElement(Ld,{model:this.props.model,controller:this.props.controller})))),Ke.createElement("span",{class:Ke.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),handleevent:Ke.const("true"),tapboundary:Ke.const("true"),disablescroll:Ke.const("true"),style:Ke.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},Ke.createElement("span",{class:Ke.const("dcg-num")},()=>this.model.displayIndex),Ke.createElement("div",{class:Ke.const("dcg-tab-interior dcg-action-icon-mouse")},Ke.createElement(xm,{model:this.props.model,controller:this.props.controller}))),Ke.createElement(Fa,{controller:this.props.controller,id:()=>this.model.id}))}isReadonly(){return this.controller.isItemReadonly(this.id)}shouldShowActionInfo(){return!!(this.model.clickableInfo&&this.model.clickableInfo.enabled&&this.model.clickableInfo.latex)}getFooterClass(){return this.isFirstRender()?this.const("dcg-expression-bottom dcg-indent-in-folder"):this.const("dcg-expression-bottom dcg-fadein-bottom dcg-indent-in-folder")}onNameInput(e){this.controller.dispatch({type:"set-image-name",id:this.id,name:e})}onNameFocusChange(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.id,location:"name"}}):this.getFocusedInput()==="name"&&this.controller.dispatch({type:"blur-focus-location",location:{type:"image",id:this.id,location:"name"}})}onNameSpecialKey(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})}getFocusedInput(){let e=this.controller.getFocusLocation();if(e&&e.type==="image"&&e.id===this.model.id)return e.location}onRetryLoad(){this.controller.dispatch({type:"image-retry-loading",id:this.id})}shouldShowBrailleError(){return this.controller.getBrailleMode()!=="none"&&!!this.model.error}insertFiles(e){this.controller.dispatch({type:"change-image",files:e,id:this.id})}onMouseSelect(e){e.type==="dcg-tap"&&e.device==="mouse"||e.type==="dcg-tapstart"&&e.device==="touch"||e.wasHandled()||(e.handle(),this.controller.dispatch({type:"set-selected-id",id:this.id}))}};var Cm=__dcg_shared_module_exports__['i'](ne());var Sm=class extends Io{didMount(){this.onItemViewMounted()}willUnmount(){this.onItemViewUnmounted()}template(){let e="";return this.model.cachedRenderHeight&&(e="height:"+this.model.cachedRenderHeight+"px"),Cm.createElement("div",{class:Cm.const("dcg-do-not-blur dcg-expressionitem dcg-shell"),"expr-id":this.const(this.model.id),onTap:this.bindFn(this.onMouseSelect),style:Cm.const(e)})}};var qp=__dcg_shared_module_exports__['i'](ne()),Em=class extends qp.Class{init(){this.controller=this.props.controller()}template(){return qp.createElement("div",{class:qp.const("dcg-drag-container"),style:()=>({top:this.getTopPx()})},this.children)}getTopPx(){let e=this.controller.getRawDragState();if(e)return e.itemTop+"px"}};at();var cl={delimiter:"",header:!1,dynamicTyping:!1,preview:0,step:void 0,encoding:"",comments:!1,complete:void 0,error:void 0,download:!1,chunk:void 0,keepEmptyRows:!1},ci={};ci.parse=DU;ci.unparse=kU;ci.RECORD_SEP=String.fromCharCode(30);ci.UNIT_SEP=String.fromCharCode(31);ci.BYTE_ORDER_MARK="\uFEFF";ci.BAD_DELIMITERS=["\r",`
`,'"',ci.BYTE_ORDER_MARK];ci.LocalChunkSize=1024*1024*10;ci.RemoteChunkSize=1024*1024*5;ci.DefaultDelimiter=",";ci.Parser=Yw;ci.ParserHandle=Hp;ci.NetworkStreamer=rO;ci.FileStreamer=iO;V.fn.parse=function(t){var e=t.config||{},r=[];return this.each(function(a){var s=V(this).prop("tagName").toUpperCase()=="INPUT"&&V(this).attr("type").toLowerCase()=="file"&&window.FileReader;if(!s||!this.files||this.files.length==0)return!0;for(var l=0;l<this.files.length;l++)r.push({file:this.files[l],inputElem:this,instanceConfig:V.extend({},e)})}),i(),this;function i(){if(r.length!=0){var a=r[0];if(Xo(t.before)){var s=t.before(a.file,a.inputElem);if(typeof s=="object")if(s.action=="abort"){n("AbortError",a.file,a.inputElem,s.reason);return}else if(s.action=="skip"){o();return}else typeof s.config=="object"&&(a.instanceConfig=V.extend(a.instanceConfig,s.config));else if(s=="skip"){o();return}}var l=a.instanceConfig.complete;a.instanceConfig.complete=function(c){Xo(l)&&l(c,a.file,a.inputElem),o()},ci.parse(a.file,a.instanceConfig)}}function n(a,s,l,c){Xo(t.error)&&t.error({name:a},s,l,c)}function o(){r.splice(0,1),i()}};function DU(t,e){var r=IU(e);if(typeof t=="string")if(r.download){var i=new rO(r);i.stream(t)}else{var n=new Hp(r),o=n.parse(t);return o}else if(t instanceof File)if(r.step||r.chunk){var i=new iO(r);i.stream(t)}else{var n=new Hp(r);reader=new FileReader,reader.onload=function(s){var l=new Hp(r),c=l.parse(s.target.result)},reader.onerror=function(){Xo(r.error)&&r.error(reader.error,t)},reader.readAsText(t,r.encoding)}}function kU(t,e){var r="",i=[],n=!1,o=",",a=`\r
`;if(s(),typeof t=="string"&&(t=JSON.parse(t)),t instanceof Array){if(!t.length||t[0]instanceof Array)return c(null,t);if(typeof t[0]=="object")return c(l(t[0]),t)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),t.data instanceof Array&&(t.fields||(t.fields=t.data[0]instanceof Array?t.fields:l(t.data[0])),!(t.data[0]instanceof Array)&&typeof t.data[0]!="object"&&(t.data=[t.data])),c(t.fields||[],t.data||[]);throw"exception: Unable to serialize unrecognized input";function s(){typeof e=="object"&&(typeof e.delimiter=="string"&&e.delimiter.length==1&&ci.BAD_DELIMITERS.indexOf(e.delimiter)==-1&&(o=e.delimiter),(typeof e.quotes=="boolean"||e.quotes instanceof Array)&&(n=e.quotes),typeof e.newline=="string"&&(a=e.newline))}function l(p){if(typeof p!="object")return[];var g=[];for(var y in p)g.push(y);return g}function c(p,g){var y="";typeof p=="string"&&(p=JSON.parse(p)),typeof g=="string"&&(g=JSON.parse(g));var w=p instanceof Array&&p.length>0,b=!(g[0]instanceof Array);if(w){for(var D=0;D<p.length;D++)D>0&&(y+=o),y+=u(p[D],D);g.length>0&&(y+=a)}for(var I=0;I<g.length;I++){for(var E=w?p.length:g[I].length,G=0;G<E;G++){G>0&&(y+=o);var T=w&&b?p[G]:G;y+=u(g[I][T],G)}I<g.length-1&&(y+=a)}return y}function u(p,g){if(typeof p=="undefined"||p===null)return"";p=p.toString().replace(/"/g,'""');var y=typeof n=="boolean"&&n||n instanceof Array&&n[g]||h(p,ci.BAD_DELIMITERS)||p.indexOf(o)>-1||p.charAt(0)==" "||p.charAt(p.length-1)==" ";return y?'"'+p+'"':p}function h(p,g){for(var y=0;y<g.length;y++)if(p.indexOf(g[y])>-1)return!0;return!1}}function rO(t){t=t||{},t.chunkSize||(t.chunkSize=ci.RemoteChunkSize);var e=0,r=0,i="",n="",o,a,s=new Hp(Dm(t));this.stream=function(l){a=function(){c()},a();function c(){if(o=new XMLHttpRequest,o.onload=u,o.onerror=h,o.open("GET",l,!0),t.step){var g=e+t.chunkSize-1;r&&g>r&&(g=r),o.setRequestHeader("Range","bytes="+e+"-"+g)}o.send(),e+=t.chunkSize}function u(){if(o.readyState==4){if(o.status<200||o.status>=400){h();return}i+=n+o.responseText,n="";var g=!t.step||e>p(o);if(!g){var y=i.lastIndexOf(`
`);if(y<0&&(y=i.lastIndexOf("\r")),y>-1)n=i.substring(y+1),i=i.substring(0,y);else{a();return}}var w=s.parse(i);i="",Xo(t.chunk)&&(t.chunk(w),w=void 0),!g&&!w.meta.paused&&a()}}function h(){Xo(t.error)&&t.error(o.statusText)}function p(g){var y=g.getResponseHeader("Content-Range");return parseInt(y.substr(y.lastIndexOf("/")+1))}}}function iO(t){t=t||{},t.chunkSize||(t.chunkSize=ci.LocalChunkSize);var e=0,r="",i="",n,o,a,s=new Hp(Dm(t)),l=typeof FileReader=="function";this.stream=function(c){var u=c.slice||c.webkitSlice||c.mozSlice;l?(n=new FileReader,n.onload=g,n.onerror=y):n=new FileReaderSync,h();function h(){e<c.size&&p()}function p(){var w=Math.min(e+t.chunkSize,c.size),b=n.readAsText(u.call(c,e,w),t.encoding);l||g({target:{result:b}})}function g(w){e+=t.chunkSize,r+=i+w.target.result,i="";var b=e>=c.size;if(!b){var D=r.lastIndexOf(`
`);if(D<0&&(D=r.lastIndexOf("\r")),D>-1)i=r.substring(D+1),r=r.substring(0,D);else{h();return}}var I=s.parse(r);r="",Xo(t.chunk)&&(t.chunk(I,c),I=void 0),!b&&!I.meta.paused&&h()}function y(){Xo(t.error)&&t.error(n.error,c)}}}function Hp(t){var e=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,r=this,i,n,o=!1,a,s=[],l={data:[],errors:[],meta:{}};t=Dm(t),this.parse=function(b){if(a=!1,!t.delimiter){var D=g(b);D.successful?t.delimiter=D.bestDelimiter:(a=!0,t.delimiter=ci.DefaultDelimiter),l.meta.delimiter=t.delimiter}if(Xo(t.step)){var I=t.step;t.step=function(E){l=E,u()?c():I(c(),r)}}return t.preview&&t.header&&t.preview++,i=b,n=new Yw(t),l=n.parse(i),c(),Xo(t.complete)&&!o&&t.complete(l),o?{meta:{paused:!0}}:l},this.pause=function(){o=!0,n.abort(),i=i.substr(n.getCharIndex())},this.resume=function(){o=!1,n=new Yw(t),n.parse(i),Xo(t.complete)&&!o&&t.complete(l)},this.abort=function(){n.abort(),Xo(t.complete)&&t.complete(l),i=""};function c(){return l&&a&&(w("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+ci.DefaultDelimiter+"'"),a=!1),u()&&h(),p()}function u(){return t.header&&s.length==0}function h(){if(l){for(var b=0;u()&&b<l.data.length;b++)for(var D=0;D<l.data[b].length;D++)s.push(l.data[b][D]);l.data.splice(0,1)}}function p(){if(!l||!t.header&&!t.dynamicTyping)return l;for(var b=0;b<l.data.length;b++){for(var D={},I=0;I<l.data[b].length;I++){if(t.dynamicTyping){var E=l.data[b][I];E=="true"?l.data[b][I]=!0:E=="false"?l.data[b][I]=!1:l.data[b][I]=y(E)}t.header&&(I>=s.length?(D.__parsed_extra||(D.__parsed_extra=[]),D.__parsed_extra.push(l.data[b][I])):D[s[I]]=l.data[b][I])}t.header&&(l.data[b]=D,I>s.length?w("FieldMismatch","TooManyFields","Too many fields: expected "+s.length+" fields but parsed "+I,b):I<s.length&&w("FieldMismatch","TooFewFields","Too few fields: expected "+s.length+" fields but parsed "+I,b))}return t.header&&l.meta&&(l.meta.fields=s),l}function g(b){for(var D=[",","	","|",";",ci.RECORD_SEP,ci.UNIT_SEP],I,E,G,T=0;T<D.length;T++){var P=D[T],_=0,x=0;G=void 0;for(var L=new Yw({delimiter:P,preview:10}).parse(b),R=0;R<L.data.length;R++){var q=L.data[R].length;if(x+=q,typeof G=="undefined"){G=q;continue}else q>1&&(_+=Math.abs(q-G),G=q)}x/=L.data.length,(typeof E=="undefined"||_<E)&&x>1.99&&(E=_,I=P)}return t.delimiter=I,{successful:!!I,bestDelimiter:I}}function y(b){var D=e.test(b);return D?parseFloat(b):b}function w(b,D,I,E){l.errors.push({type:b,code:D,message:I,row:E})}}function Yw(t){var e=/^\s*$/,r,i,n,o,a,s,l,c,u,h,p,g,y,w,b,D=!1;t=t||{},i=t.delimiter,n=t.comments,o=t.step,s=t.preview,(typeof i!="string"||i.length!=1||ci.BAD_DELIMITERS.indexOf(i)>-1)&&(i=","),n===!0?n="#":(typeof n!="string"||n.length!=1||ci.BAD_DELIMITERS.indexOf(n)>-1||n==i)&&(n=!1),this.parse=function(ce){if(typeof ce!="string")throw"Input must be a string";return te(ce),I()},this.abort=function(){D=!0},this.getCharIndex=function(){return c};function I(){for(;c<r.length&&!(D||s>0&&b>=s);)l=='"'?T():u?P():_(),E();return G()}function E(){c++,l=r[c]}function G(){if(D&&ue("Abort","ParseAbort","Parsing was aborted by the user's step function"),u&&ue("Quotes","MissingQuotes","Unescaped or mismatched quotes"),Y(),!Xo(o))return Se()}function T(){$()&&!A()?u=!u:(R(),u&&A()?c++:ue("Quotes","UnexpectedQuotes","Unexpected quotes"))}function P(){(j(c)||B(c))&&h++,R()}function _(){l==i?q():j(c)?(K(),E()):B(c)?K():x()?L():R()}function x(){if(!n)return!1;var ce=c==0||B(c-1)||j(c-2);return ce&&r[c]===n}function L(){for(;!j(c)&&!B(c)&&c<r.length;)E()}function R(){p[y][w]+=l}function q(){p[y].push(""),w=p[y].length-1}function K(){Y(),h++,b++,p.push([]),y=p.length-1,q()}function Y(){N(),Xo(o)&&(p[y]&&o(Se()),Ae())}function N(){p[y].length==1&&e.test(p[y][0])&&(t.keepEmptyRows?p[y].splice(0,1):p.splice(y,1),y=p.length-1)}function j(ce){return ce<r.length-1&&(r[ce]=="\r"&&r[ce+1]==`
`||r[ce]==`
`&&r[ce+1]=="\r")}function B(ce){return r[ce]=="\r"||r[ce]==`
`}function A(){return!$()&&c<r.length-1&&r[c+1]=='"'}function $(){return!u&&J(c-1)||J(c+1)}function J(ce){typeof ce!="number"&&(ce=c);var Ee=r[ce];return ce<=-1||ce>=r.length||Ee==i||Ee=="\r"||Ee==`
`}function ue(ce,Ee,H){g.push({type:ce,code:Ee,message:H,line:h,row:y,index:c})}function te(ce){r=ce,u=!1,c=0,b=0,h=1,Ae(),p=[[""]],l=r[c]}function Ae(){p=[],g=[],y=0,w=0}function Se(){return{data:p,errors:g,meta:{lines:h,delimiter:i,aborted:D,truncated:s>0&&c<r.length}}}}function IU(t){typeof t!="object"&&(t={});var e=Dm(t);return(typeof e.delimiter!="string"||e.delimiter.length!=1||ci.BAD_DELIMITERS.indexOf(e.delimiter)>-1)&&(e.delimiter=cl.delimiter),typeof e.header!="boolean"&&(e.header=cl.header),typeof e.dynamicTyping!="boolean"&&(e.dynamicTyping=cl.dynamicTyping),typeof e.preview!="number"&&(e.preview=cl.preview),typeof e.step!="function"&&(e.step=cl.step),typeof e.complete!="function"&&(e.complete=cl.complete),typeof e.error!="function"&&(e.error=cl.error),typeof e.encoding!="string"&&(e.encoding=cl.encoding),typeof e.download!="boolean"&&(e.download=cl.download),typeof e.keepEmptyRows!="boolean"&&(e.keepEmptyRows=cl.keepEmptyRows),e}function Dm(t){if(typeof t!="object")return t;var e=t instanceof Array?[]:{};for(var r in t)e[r]=Dm(t[r]);return e}function Xo(t){return typeof t=="function"}var{parse:nO}=ci;xc();function ck(t){var e;if(typeof t=="number")e=t+"";else if(typeof t=="string")e=t;else return!1;return e.trim().match(/^-?[0-9]*\.?[0-9]*$/)}function oO(t){let e=t.split(/\r?\n/),r=[],i=!1;if(!(e.length<2)){for(let n=0;n<e.length;n++){let o=e[n];if(!o.trim())continue;n>0&&!ck(o.replace(/,(\d{3})/g,"$1"))&&(i=!0);let a={content:o};r.push(a)}if(!i){let n=__dcg_shared_module_exports__['q'](r,"content").map(o=>o.replace(/,(\d{3})/g,"$1"));return ck(n[0])||(n=n.slice(1)),[{content:"\\left["+n.join(",")+"\\right]",numberList:!0}]}return r}}function aO(t){if(/^\s*$/.test(t))return;let e=nO(t,{preview:1e3}),r=e.data,i=[];if(e.errors.length&&!e.data.length){ao("PapaParse.parse returned errors.",{metaData:{input:t,output:e.errors}});return}if(!(!e.data.length||e.data.length<2)){var n=r[0].length;for(let o=0;o<n;o++)i.push([]);for(let o=0;o<e.data.length;o++)if(!(o===0&&isNaN(parseFloat(r[o][0])))){if(r[o].length<2)return;if(!(!r[o][0]&&!r[o][1]))for(let a=0;a<n;a++){let s=(r[o][a]||"").replace(/,(\d{3})/g,"$1");if(s&&isNaN(parseFloat(s)))return;i[a].push(s)}}if(!(i[0].length<2))return i}}var bo=__dcg_shared_module_exports__['i'](ne()),km=class extends bo.Class{template(){return this.controller=this.props.controller(),bo.createElement("div",{class:bo.const("dcg-expressionitem dcg-new-expression dcg-opened")},bo.createElement("div",{class:bo.const("dcg-new-math-div dcg-do-not-blur dcg-action-newmath"),onTap:this.bindFn(this.newMath)},bo.createElement("div",{class:bo.const("dcg-new-expression-fade")})),bo.createElement("span",{class:bo.const("dcg-tab")},bo.createElement("span",{class:bo.const("dcg-num dcg-variable-index")},this.bindFn(this.getIndex)),bo.createElement("div",{class:bo.const("dcg-tab-interior")})))}getIndex(){return this.controller.getNextDisplayIndex()}newMath(){this.controller.dispatch({type:"new-expression-at-end"})}};var We=__dcg_shared_module_exports__['i'](ne());at();var{If:Im}=We.Components,Mm=class extends We.Class{init(){this.controller=this.props.controller()}template(){return We.createElement("div",{class:We.const("dcg-add-expression-container")},We.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-add-item-tooltip"),gravity:()=>this.controller.isNarrow()?"ne":"se"},We.createElement("span",{class:()=>({"dcg-icon-btn":!0,"dcg-add-expression-btn":!0,"dcg-action-add-expression":!0,"dcg-do-blur":!0,"dcg-active":this.controller.isAddExpressionOpen()}),handleEvent:We.const("true"),role:We.const("button"),tabindex:We.const("0"),"aria-haspopup":We.const("true"),"aria-expanded":()=>this.controller.isAddExpressionOpen(),"aria-label":()=>this.controller.s("graphing-calculator-label-add-item-tooltip"),didMount:e=>{this.toggleButtonNode=e},onTap:this.bindFn(this.toggleAddExpression),manageFocus:this.const(ut({controller:this.controller,location:{type:"add-item-btn"}}))},We.createElement("i",{class:We.const("dcg-icon-plus"),"aria-hidden":We.const("true")}))),We.createElement(Im,{predicate:()=>this.controller.isAddExpressionOpen()},()=>We.createElement("div",{class:()=>({"dcg-add-expression-dropdown":!0,"dcg-popover":!0,"dcg-bottom":!this.controller.isNarrow(),"dcg-right":this.controller.isNarrow()}),role:We.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-add-item-menu"),didMount:this.bindFn(this.didMountPopover),didUnmount:this.bindFn(this.didUnmountPopover)},We.createElement("div",{class:We.const("dcg-popover-interior")},We.createElement("div",{class:We.const("dcg-new-item dcg-do-not-blur dcg-action-newexpression"),role:We.const("button"),tabindex:We.const(0),"aria-label":()=>this.controller.s("graphing-calculator-narration-add-expression"),onTap:this.bindFn(this.newExpression),handleEvent:We.const("true"),manageFocus:this.const(ut({controller:this.controller,location:{type:"add-expression-btn"}}))},We.createElement("i",{class:We.const("dcg-icon-new-expression dcg-expression-icon"),"aria-hidden":We.const("true")}),()=>this.controller.s("graphing-calculator-label-expression-lowercase")),We.createElement(Im,{predicate:()=>this.controller.areNotesEnabled()},()=>We.createElement("div",{class:We.const("dcg-new-item dcg-do-not-blur dcg-action-newtext"),role:We.const("button"),tabindex:We.const(0),"aria-label":()=>this.controller.s("graphing-calculator-narration-add-note"),onTap:this.bindFn(this.newText),handleEvent:We.const("true"),manageFocus:this.const(ut({controller:this.controller,location:{type:"add-note-btn"}}))},We.createElement("i",{class:We.const("dcg-icon-new-text dcg-expression-icon"),"aria-hidden":We.const("true")}),()=>this.controller.s("graphing-calculator-label-note-lowercase"))),We.createElement("div",{class:We.const("dcg-new-item dcg-do-not-blur dcg-action-newtable"),role:We.const("button"),tabindex:We.const(0),"aria-label":()=>this.controller.s("graphing-calculator-narration-add-table"),onTap:this.bindFn(this.newTable),handleEvent:We.const("true"),manageFocus:this.const(ut({controller:this.controller,location:{type:"add-table-btn"}}))},We.createElement("i",{class:We.const("dcg-icon-new-table dcg-expression-icon"),"aria-hidden":We.const("true")}),()=>this.controller.s("graphing-calculator-label-table-lowercase")),We.createElement(Im,{predicate:()=>this.controller.areFoldersEnabled()},()=>We.createElement("div",{class:We.const("dcg-new-item dcg-do-not-blur dcg-action-newfolder"),role:We.const("button"),tabindex:We.const(0),"aria-label":()=>this.controller.s("graphing-calculator-narration-add-folder"),onTap:this.bindFn(this.newFolder),handleEvent:We.const("true"),manageFocus:this.const(ut({controller:this.controller,location:{type:"add-folder-btn"}}))},We.createElement("i",{class:We.const("dcg-icon-new-folder dcg-expression-icon"),"aria-hidden":We.const("true")}),()=>this.controller.s("graphing-calculator-label-folder-lowercase"))),We.createElement(Im,{predicate:()=>this.controller.areImagesEnabled()},()=>We.createElement(Yl,{controller:()=>this.controller,ariaLabel:()=>this.controller.s("graphing-calculator-narration-add-image"),onFileChange:e=>this.insertFiles(e),location:this.const({type:"add-image-btn"}),readonly:this.const(!1)},We.createElement("div",{class:We.const("dcg-new-item dcg-action-newimage")},We.createElement("i",{class:We.const("dcg-icon-new-image dcg-expression-icon"),"aria-hidden":We.const("true")}),()=>this.controller.s("graphing-calculator-label-image-lowercase")))),We.createElement(Im,{predicate:this.bindFn(this.showAddTicker)},()=>We.createElement("div",{class:We.const("dcg-new-item dcg-do-not-blur dcg-action-ticker"),role:We.const("button"),tabindex:We.const(0),"aria-label":()=>this.controller.s("graphing-calculator-narration-add-ticker"),onTap:this.bindFn(this.addTicker),handleEvent:We.const("true"),manageFocus:this.const(ut({controller:this.controller,location:{type:"add-ticker-btn"}}))},We.createElement("i",{class:We.const("dcg-icon-metronome dcg-expression-icon"),"aria-hidden":We.const("true")}),()=>this.controller.s("graphing-calculator-label-ticker-lowercase")))),We.createElement("span",{class:We.const("dcg-arrow")}))))}showAddTicker(){return this.controller.areActionsEnabled()&&!this.controller.getTickerOpen()}didMountPopover(e){this.popoverNode=e,V(document).on("dcg-tapstart.add-expression-view wheel.add-expression-view",r=>{this.eventShouldClosePopover(r)&&this.controller.dispatch({type:"close-add-expression",focusIconAfterClose:r.device==="keyboard"})}),V(document).on("keydown.add-expression-view",r=>{if(Le(r)==="Esc"&&this.controller.dispatch({type:"close-add-expression",focusIconAfterClose:!0}),Le(r)==="Tab"&&!r.altKey&&!r.metaKey&&!r.ctrlKey){let i=this.controller.getFocusLocation();if(!i)return;let n;this.showAddTicker()?n={type:"add-ticker-btn"}:this.controller.areImagesEnabled()?n={type:"add-image-btn"}:this.controller.areFoldersEnabled()?n={type:"add-folder-btn"}:n={type:"add-table-btn"},!r.shiftKey&&i.type===n.type?(this.controller.dispatch({type:"set-focus-location",location:{type:"add-item-btn"}}),r.preventDefault(),r.stopPropagation()):r.shiftKey&&i.type==="add-item-btn"&&(this.controller.dispatch({type:"set-focus-location",location:n}),r.preventDefault(),r.stopPropagation())}}),Ja&&El&&V(e).on("dcg-tapstart",r=>r.preventDefault()),V(e).find(".dcg-new-item").on("touchstart",r=>r.preventDefault())}didUnmountPopover(){V(document).off(".add-expression-view")}toggleAddExpression(e){this.controller.dispatch({type:"toggle-add-expression",focusOnOpen:e.device==="keyboard"})}newExpression(){this.controller.dispatch({type:"new-expression"})}newText(){this.controller.dispatch({type:"new-text"})}newFolder(){this.controller.dispatch({type:"new-folder"})}addTicker(){this.controller.dispatch({type:"open-ticker"})}newTable(){this.controller.dispatch({type:"new-table"})}insertFiles(e){this.controller.dispatch({type:"new-images",files:e})}eventShouldClosePopover(e){let r=!!V(e.target).closest(this.popoverNode).length,i=!!V(e.target).closest(this.toggleButtonNode).length;return!(r||i)}};var Ye=__dcg_shared_module_exports__['i'](ne());var Cs=__dcg_shared_module_exports__['i'](ne());var Jw=class extends Cs.Class{init(){this.controller=this.props.controller()}template(){return Cs.createElement("span",{role:Cs.const("button"),class:()=>({"dcg-constructions-count-link":!0,"dcg-is-expanded":this.controller.getShowConstructionsOpen()}),tabindex:Cs.const("0"),"aria-expanded":()=>this.controller.getShowConstructionsOpen(),manageFocus:this.const(ut({controller:this.controller,location:{type:"geo-show-constructions-icon"}})),onTap:this.bindFn(this.showAllConstructions)},Cs.createElement("i",{class:Cs.const("dcg-shared-icon-geometry")}),Cs.createElement("span",{class:Cs.const("dcg-construction-count")},this.bindFn(this.constructionCount)))}constructionCount(){return this.controller.getGeometryConstructionCount()}showAllConstructions(){this.controller.dispatch({type:"set-show-constructions-open",open:!this.controller.getShowConstructionsOpen(),focusIcon:!1})}};var Zn=__dcg_shared_module_exports__['i'](ne());var $p=class extends Zn.Class{init(){this.controller=this.props.controller()}template(){return Zn.createElement("div",null,Zn.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-undo-tooltip"),gravity:this.bindFn(this.getUndoTooltipGravity),disabled:()=>!this.controller.canUndo()},Zn.createElement("span",{class:()=>({"dcg-action-undo":!0,"dcg-icon-btn":!0,"dcg-disabled":!this.controller.canUndo()}),role:Zn.const("button"),tabindex:()=>this.controller.canUndo()?0:-1,"aria-label":()=>this.controller.s("graphing-calculator-narration-undo"),onTap:()=>this.controller.dispatch({type:"undo"}),"aria-disabled":()=>!this.controller.canUndo()},Zn.createElement("i",{class:Zn.const("dcg-icon-undo"),"aria-hidden":Zn.const("true")}))),Zn.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-redo-tooltip"),gravity:this.bindFn(this.getRedoTooltipGravity),disabled:()=>!this.controller.canRedo()},Zn.createElement("span",{class:()=>({"dcg-action-redo":!0,"dcg-icon-btn":!0,"dcg-disabled":!this.controller.canRedo()}),role:Zn.const("button"),tabindex:()=>this.controller.canRedo()?0:-1,"aria-label":()=>this.controller.s("graphing-calculator-narration-redo"),onTap:()=>this.controller.dispatch({type:"redo"}),"aria-disabled":()=>!this.controller.canRedo()},Zn.createElement("i",{class:Zn.const("dcg-icon-redo"),"aria-hidden":Zn.const("true")}))))}getUndoTooltipGravity(){return this.props.undoTooltipGravity?this.props.undoTooltipGravity():this.controller.isNarrow()?"n":"s"}getRedoTooltipGravity(){return this.props.redoTooltipGravity?this.props.redoTooltipGravity():this.controller.isNarrow()?"n":"s"}};var{If:Jl}=Ye.Components,Tm=class extends Ye.Class{init(){this.controller=this.props.controller()}template(){return Ye.createElement("div",{class:()=>({"dcg-expression-top-bar":!0,"dcg-expressions-scrolled":this.showShadow()}),role:Ye.const("toolbar"),"aria-label":()=>this.controller.s("graphing-calculator-narration-expression-bar"),didMount:e=>{this.node=e},onTapStart:this.bindFn(this.clearSelectionOnMobile),style:()=>({background:this.controller.hasBackgroundColor()?this.controller.getPillboxBackgroundColor():void 0})},Ye.createElement("div",{class:Ye.const("dcg-left-buttons")},Ye.createElement(Jl,{predicate:this.bindFn(this.showHamburger)},()=>Ye.createElement("span",{class:Ye.const("dcg-action-opendrawer dcg-tooltip dcg-icon-btn dcg-in-api-action-opendrawer"),handleEvent:Ye.const("true"),tooltip:()=>this.controller.s("graphing-calculator-label-open-graph-tooltip"),role:Ye.const("button"),tabindex:Ye.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-narration-open-graph"),onTap:()=>this.controller.dispatch({type:"open-drawer"})},Ye.createElement("i",{class:Ye.const("dcg-icon-hamburger"),"aria-hidden":Ye.const("true")}))),Ye.createElement(Jl,{predicate:()=>!this.controller.isInEditListMode()},()=>Ye.createElement(Mm,{controller:()=>this.props.controller()})),Ye.createElement(Jl,{predicate:()=>this.controller.isGeoUIActive()},()=>Ye.createElement(Jw,{controller:this.props.controller})),Ye.createElement(Jl,{predicate:this.bindFn(this.showRerandomize)},()=>Ye.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-randomize-tooltip"),gravity:()=>this.controller.isNarrow()?"n":"s"},Ye.createElement("span",{class:Ye.const("dcg-icon-btn"),handleEvent:Ye.const("true"),role:Ye.const("button"),tabindex:Ye.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-label-randomize-tooltip"),onTap:()=>this.controller.dispatch({type:"re-randomize"})},Ye.createElement("i",{class:Ye.const("dcg-icon-randomize"),"aria-hidden":Ye.const("true")})))),Ye.createElement(Jl,{predicate:()=>this.controller.isInEditListMode()&&!this.controller.hasDefaultState()},()=>Ye.createElement("span",{class:Ye.const("dcg-btn-red dcg-action-clearall"),role:Ye.const("button"),tabindex:Ye.const("0"),onTap:()=>this.controller.dispatch({type:"clear-graph"})},()=>this.controller.s("graphing-calculator-button-clear-graph"))),Ye.createElement(Jl,{predicate:()=>this.controller.isInEditListMode()&&this.controller.hasDefaultState()},()=>Ye.createElement("span",{class:Ye.const("dcg-btn-red dcg-action-reset"),role:Ye.const("button"),tabindex:Ye.const("0"),onTap:()=>this.controller.dispatch({type:"reset-graph"})},()=>this.controller.s("graphing-calculator-button-reset-graph")))),Ye.createElement("div",{class:Ye.const("dcg-center-buttons")},Ye.createElement($p,__dcg_shared_module_exports__['b']({},this.props))),Ye.createElement("div",{class:Ye.const("dcg-right-buttons")},Ye.createElement(Jl,{predicate:()=>!this.controller.isInEditListMode()},()=>Ye.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-edit-list-tooltip"),gravity:()=>this.controller.isNarrow()?"n":"s"},Ye.createElement("span",{class:Ye.const("dcg-icon-btn dcg-action-toggle-edit"),handleEvent:Ye.const("true"),role:Ye.const("button"),tabindex:Ye.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-narration-edit-expression-list"),onTap:this.bindFn(this.toggleEditListMode),manageFocus:this.const(ut({controller:this.controller,location:{type:"edit-list-toggle"}}))},Ye.createElement("i",{class:Ye.const("dcg-icon-settings"),"aria-hidden":Ye.const("true")})))),Ye.createElement(Jl,{predicate:()=>this.controller.isInEditListMode()},()=>Ye.createElement("span",{class:Ye.const("dcg-btn-primary dcg-action-toggle-edit dcg-do-not-blur"),handleEvent:Ye.const("true"),role:Ye.const("button"),tabindex:Ye.const("0"),onTap:this.bindFn(this.toggleEditListMode),manageFocus:this.const(ut({controller:this.controller,location:{type:"edit-list-toggle"}}))},()=>this.controller.s("graphing-calculator-button-done"))),Ye.createElement(Jl,{predicate:()=>!this.controller.isInEditListMode()&&this.controller.getGraphSettings().config.graphpaper},()=>Ye.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-hide-expression-list-tooltip"),gravity:()=>this.controller.isNarrow()?"nw":"sw"},Ye.const(" "),Ye.createElement("span",{class:()=>({"dcg-resize-list-btn":!0,"dcg-action-hideexpressions":!0,"dcg-icon-btn":!0,"dcg-rotated":this.controller.isNarrow()}),role:Ye.const("button"),tabindex:Ye.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-label-hide-expression-list-tooltip"),onTap:e=>{this.controller.dispatch({type:"hide-expressions-list",focusShowIcon:e.device==="keyboard"})},manageFocus:this.const(ut({controller:this.controller,location:{type:"hide-expression-list-btn"}}))},Ye.createElement("i",{class:Ye.const("dcg-icon-hide"),"aria-hidden":Ye.const("true")}))))))}showShadow(){return this.controller.getTickerOpen()||this.controller.getExpressionSearchOpen()?!1:this.props.expsScrolled()}showRerandomize(){return this.controller.anyItemDependsOnRandomSeed()}showHamburger(){return!this.controller.getGraphSettings().config.showHamburger||this.controller.isInEditListMode()?!1:!this.controller.isNarrow()}clearSelectionOnMobile(e){e.wasHandled()||this.controller.dispatch({type:"set-none-selected"})}toggleEditListMode(e){this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!this.controller.isInEditListMode(),focusExpressionList:!1}),e.device==="keyboard"&&this.controller.dispatch({type:"set-focus-location",location:{type:"edit-list-toggle"}})}};at();function TU(t){return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t),{version:"0"})}var sO=TU;var GU={centerX:0,centerY:0,size:15},AU={scale:1,unit:"",visible:!1,showLegend:!1};function VU(t){let e=t.objects||{},r=__dcg_shared_module_exports__['M'](e);for(let i in r){let n=r[i];n.label&&(n.showLabel=!0)}return{version:"1",objects:r,viewport:t.viewport||GU,customTools:t.customTools||{},grid:t.grid||AU}}var lO=VU;function LU(t){return(t.type==="point"||t.type==="glider")&&!t.draggable}function PU(t){let e=t.objects||{},r=__dcg_shared_module_exports__['M'](e),i=__dcg_shared_module_exports__['M'](t.grid);for(let n in r){let o=r[n];LU(o)&&(o.draggable=!0),o.type==="angle"&&o.showLabel&&!o.label&&(o.label="{angle}"),o.type==="segment"&&o.showLabel&&!o.label&&(o.label="{length}")}return i.unit="",i.scale=1,{version:"2",objects:r,viewport:t.viewport,customTools:t.customTools||{},grid:i}}var cO=PU;function dk(t){return t&&(t.type==="circle"||t.type==="compass")}function OU(t){let e=__dcg_shared_module_exports__['M'](t.objects||{});for(let r in e){let i=e[r];if(i.type==="point")i.y=-i.y;else if(i.type==="glider"){let n=e[i.parents.host];dk(n)&&(i.t=-i.t)}else if(i.type==="intersection"){let n=e[i.parents.host1],o=e[i.parents.host2];dk(n)&&dk(o)&&(i.negRoot=!i.negRoot)}}return{version:"3",objects:e,viewport:t.viewport,customTools:t.customTools||{},graphSettings:{showGrid:!!(t.grid||{}).visible,showAxes:!1,showAxisNumbers:!1}}}var dO=OU;function _U(t){let e=__dcg_shared_module_exports__['M'](t.objects||{});for(let r in e){let i=e[r];i.draggable===!1&&(i.locked=!0),delete i.draggable}return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t),{version:"4",objects:e})}var uO=_U;var Xw=[sO,lO,cO,dO,uO],FU="4";function uk(t){let e=parseInt(FU,10),r=parseInt(t.version||"0",10);for(r>e&&typeof console!="undefined"&&console.warn&&console.warn(`Loading saved state with version ${r}, but last known version is ${e}. States saved in a newer version of the geometry tool may not load correctly in older versions of the tool.`),Xw[r]||typeof console!="undefined"&&console.warn&&console.warn(`State has invalid version: ${r}. If a version is present, it should be a non-negative integer less than or equal to ${e}.`),r===0&&(t=Xw[0](t));r<e;)r+=1,Xw[r]&&(t=Xw[r](t));return t}var RU=!1;function zp(t,e){var r=e[t];return r.type==="transformed-object"?zp(r.parents.object,e):r.type}function pO(t){switch(t){case"circle":case"compass":case"arc":return!0}return!1}function NU(t,e,r){var i=zp(e,r);return i==="circle"||i==="compass"?t/(2*Math.PI):t}function hO(t){switch(t){case"dilation":case"rotation":case"translation":case"reflection":case"scaled-rotation":return!0}return!1}function BU(t){switch(t){case"point":case"midpoint":case"glider":case"intersection":case"polygon":return"P";case"line":case"segment":case"ray":case"vector":case"parallel":case"perpendicular":return"L";case"circle":case"compass":return"C";case"arc":case"angle":return"A";case"image":return"I";case"dilation":case"rotation":case"translation":case"reflection":case"scaled-rotation":return"T";case"transformed-object":return"T";default:return t}}function gO(t){let e=!RU,r=uk(t),i={},n={},o=I=>{if(n.hasOwnProperty(I))return n[I];let E=zp(I,r.objects);if(e&&!hO(E)){let _=i.token||1;i.token=_+1;let x="\\token{"+_+"}";return n[I]=x,x}let G=BU(E),T=i[G]||1;i[G]=T+1;let P=G+"_{"+T+"}";return n[I]=P,P};function a(I){let E=i[I]||1;return i[I]=E+1,I+"_{"+E+"}"}let s=(I,E,G)=>o(I)+"=\\operatorname{"+E+"}\\left("+G.map(o).join(",")+"\\right)",{centerX:l,centerY:c,size:u}=r.viewport;u*=1.25;let h=1,p=u/(1+h),g=p*h,y={version:10,randomSeed:"",expressions:{list:[]},graph:{product:"geometry-calculator",viewport:{xmin:l-p,xmax:l+p,ymin:c-g,ymax:c+g},showGrid:!1,showXAxis:!1,showYAxis:!1,squareAxes:!0,degreeMode:!0}};r.graphSettings.showGrid&&(y.graph.showGrid=!0,y.graph.xAxisMinorSubdivisions=1,y.graph.yAxisMinorSubdivisions=1,y.graph.xAxisStep=1,y.graph.yAxisStep=1);let w=y.expressions.list,b=[],D=[];for(let I in r.objects){let E=r.objects[I],G=zp(E.id,r.objects),T={id:E.id,type:"expression",color:E.color,hidden:!!E.hidden};if(e&&!hO(G)&&(T.folderId=__dcg_shared_module_exports__['uc']),E.locked&&(T.dragMode="NONE"),!E.hidden&&E.label&&E.showLabel){if(T.label=E.label,T.showLabel=!0,G==="segment"&&E.label.indexOf("{length}")!==-1)if(E.label==="{length}")T.label="";else{let P=a("l"),_=P+"=\\operatorname{round}\\left(\\operatorname{length}\\left("+o(E.id)+"\\right),2\\right)";D.push({id:"len-"+T.id,type:"expression",latex:_}),T.label=T.label.replace(/\{length\}/g,"${"+P+"}")}if(G==="angle"&&E.label.indexOf("{angle}")!==-1)if(E.label==="{angle}")T.label="";else{let P=a("a"),_=P+"=\\operatorname{round}\\left(\\operatorname{measure}\\left("+o(E.id)+"\\right)\\right)";D.push({id:"angle-"+T.id,type:"expression",latex:_}),T.label=T.label.replace(/\{angle}/g,"${"+P+"}\xB0")}if(G==="polygon"&&E.label.indexOf("{area}")!==-1)if(E.label==="{area}")T.label="";else{let P=a("a"),_=P+"=\\operatorname{round}\\left(\\operatorname{area}\\left("+o(E.id)+"\\right),2\\right)";D.push({id:"area-"+T.id,type:"expression",latex:_}),T.label=T.label.replace(/\{area\}/g,"${"+P+"}")}if(G==="polygon"&&E.label.indexOf("{perimeter}")!==-1){let P=a("p"),_=P+"=\\operatorname{round}\\left(\\operatorname{perimeter}\\left("+o(E.id)+"\\right),2\\right)";D.push({id:"perim-"+T.id,type:"expression",latex:_}),T.label=T.label.replace(/\{perimeter\}/g,"${"+P+"}")}}switch(E.type){case"point":T.latex=o(E.id)+"=\\left("+__dcg_shared_module_exports__['Yb'](E.x)+","+__dcg_shared_module_exports__['Yb'](E.y)+"\\right)";break;case"glider":T.latex=o(E.id)+"=\\operatorname{glider}\\left("+o(E.parents.host)+","+__dcg_shared_module_exports__['Yb'](NU(E.t,E.parents.host,r.objects))+"\\right)";break;case"intersection":let P=zp(E.parents.host1,r.objects),_=zp(E.parents.host2,r.objects),x=E.negRoot;(pO(P)&&!pO(_)||_==="arc")&&(x=!x),x?T.latex=s(E.id,E.type,[E.parents.host1,E.parents.host2]):T.latex=s(E.id,E.type,[E.parents.host2,E.parents.host1]);break;case"midpoint":T.latex=s(E.id,E.type,[E.parents.straight]);break;case"circle":T.latex=s(E.id,E.type,[E.parents.point1,E.parents.point2]);break;case"arc":T.latex=s(E.id,E.type,[E.parents.point1,E.parents.point2,E.parents.point3]);break;case"compass":T.latex=s(E.id,"circle",[E.parents.center,E.parents.straight]);break;case"line":case"segment":case"ray":T.latex=s(E.id,E.type,[E.parents.point1,E.parents.point2]);break;case"vector":T.latex=s(E.id,"segment",[E.parents.point1,E.parents.point2]),T.arrowMode="POSITIVE";break;case"parallel":case"perpendicular":T.latex=s(E.id,E.type,[E.parents.straight,E.parents.point]);break;case"polygon":T.latex=s(E.id,E.type,E.parents.points);break;case"angle":T.latex=s(E.id,E.type,[E.parents.point1,E.parents.point2,E.parents.point3]);break;case"transformed-object":T.latex=o(E.id)+"="+o(E.parents.transformation)+"\\left("+o(E.parents.object)+"\\right)";break;case"dilation":T.latex=o(E.id)+"=\\operatorname{dilation}\\left("+o(E.parents.center)+","+E.scaleFactor+"\\right)";break;case"reflection":T.latex=s(E.id,E.type,[E.parents.straight]);break;case"translation":T.latex=s(E.id,"translation",[E.parents.from,E.parents.to]);break;case"rotation":T.latex=o(E.id)+"=\\operatorname{rotation}\\left("+o(E.parents.center)+","+E.angle+"\\right)";break;case"scaled-rotation":T.latex=o(E.id)+"=";break;case"image":break;default:return E}T.latex&&(T.folderId===__dcg_shared_module_exports__['uc']?b.push(T):D.push(T))}return w.push({type:"folder",id:__dcg_shared_module_exports__['uc'],title:"geometry",secret:!0}),w.push.apply(w,b),w.push.apply(w,D),y}function fO(t){let e=__dcg_shared_module_exports__['M'](bs(t));if(e.graph.product="geometry-calculator",!e.expressions.list.some(i=>i.id===__dcg_shared_module_exports__['uc'])){let i={type:"folder",id:__dcg_shared_module_exports__['uc'],title:"geometry",secret:!0};e.expressions.list.unshift(i)}return e}function Qw(t,e,r){let i=!1;t.dispatch({type:"toast/show",toast:{message:t.s("graphing-calculator-text-toast-importing-graph"),hideAfter:0,toastStyle:"cover",onHide:()=>{i=!0}}});let n=()=>{i||t.dispatch({type:"toast/show",toast:{message:t.s("graphing-calculator-text-toast-error-importing-graph"),toastStyle:"error",hideAfter:12e3}})},o=()=>{t.dispatch({type:"toast/show",toast:{message:t.s("graphing-calculator-text-toast-error-no-folders"),toastStyle:"error",hideAfter:12e3}})},a=(l,c)=>{t.dispatch({type:"set-state",state:l}),t.dispatch({type:"toast/show",toast:{message:t.s("graphing-calculator-text-toast-imported-graph"),undoCallback:()=>{t.dispatch({type:"set-state",state:c})}}})},s=(l,c)=>{if(i)return;let u=t.getSelectedItem();if(!u)return;let h=u.type==="folder",p=u.type!=="folder"&&!!u.folderId,g=h||p,y={},w=t.getState(),b=w.expressions.list;if(b.length===1&&!h){a(l,w);return}if(t.isGeometry()){a(l,w);return}let D=l.expressions.list;for(let P=0;P<D.length;P++){let _=t.generateId(),x=D[P];if(x.type==="folder")if(g){o();return}else{y[x.id]=_,x.id=_;continue}x.folderId?x.folderId=y[x.folderId]:h?x.folderId=u.id:p&&(x.folderId=u.folderId),x.id=_}let I=__dcg_shared_module_exports__['M'](w),E=0;for(;E<b.length;){if(b[E].id===u.id){h&&(b[E].title=c);break}E+=1}let G=h?E+1:E,T=h?0:1;b.splice(G,T,...D),a(w,I)};V.getJSON(e,ku).done(l=>{let c=l.state;t.isGeometry()&&(Bw(e)?c=gO(c):Jf(e)&&(c=fO(c))),c=bs(c),r(c,(u,h)=>{u||!h?n():s(h,l.title||"")})}).fail(n)}function mO(t){if(window.clipboardData&&window.clipboardData.getData)return window.clipboardData.getData("Text");if(t&&t.clipboardData&&t.clipboardData.getData)return t.clipboardData.getData("text/plain")}var Xl=__dcg_shared_module_exports__['i'](ne());at();var{If:KU}=Xl.Components,Zw=class extends Xl.Class{init(){this.guid=__dcg_shared_module_exports__['K']("dcg-exp-list-resize")}template(){return Xl.createElement(KU,{predicate:this.bindFn(this.isVisible)},()=>Xl.createElement("div",{class:Xl.const("dcg-exp-list-resizer"),onTapStart:this.bindFn(this.onTapStart)}))}isVisible(){return this.props.controller().expressionsAreFullWidth()?!1:this.props.controller().isListVisible()}onTapStart(e){this.initialWidth=this.props.controller().getExpListWidth(),this.initialLeft=e.changedTouches[0].clientX,V(document).on(`dcg-tapmove.${this.guid}`,r=>{if(this.initialLeft===void 0||this.initialWidth===void 0)return;let i=r.changedTouches[0].clientX-this.initialLeft+this.initialWidth;this.props.controller().dispatch({type:"resize-exp-list",expListWidth:i})}),V(document).on(`dcg-tapend.${this.guid}`,this.bindFn(this.onTapEnd)),V(document).on(`dcg-tapcancel.${this.guid}`,this.bindFn(this.onTapEnd))}onTapEnd(){V(document).off(`.${this.guid}`),this.initialLeft=void 0,this.initialWidth=void 0}};var Bt=__dcg_shared_module_exports__['i'](ne());var{If:Gm}=Bt.Components,ev=class extends Bt.Class{constructor(){super(...arguments),this.justGlobalReplaced=!1}init(){this.controller=this.props.controller()}template(){return Bt.createElement("div",{class:()=>({"dcg-expression-search-bar":!0,"dcg-expressions-scrolled":this.props.expsScrolled()&&!this.controller.getTickerOpen()}),role:Bt.const("search")},Bt.createElement("div",{class:Bt.const("dcg-search-row")},Bt.createElement("div",{class:Bt.const("dcg-search-mathquill-container")},Bt.createElement(qe,{hasError:this.const(!1),getAriaLabel:()=>this.controller.s("graphing-calculator-label-search-expressions"),getAriaPostLabel:()=>this.controller.getExpressionSearchStr().length===0?this.controller.raw(""):this.shouldShowReplaceError()?this.controller.s("graphing-calculator-error-expression-replacement"):this.shouldShowSearchError()?this.controller.s("graphing-calculator-error-expression-search"):this.controller.s("graphing-calculator-narration-expression-search-results",{count:this.controller.getExpressionSearchCount()}),capExpressionSize:this.const(!1),onUserChangedLatex:this.bindFn(this.onSearchChange),latex:()=>this.controller.getRawExpressionSearchStr(),isFocused:this.bindFn(this.isSearchFocused),config:this.bindFn(this.getMQConfig),onFocusedChanged:this.bindFn(this.onSearchFocusChanged),noFadeout:this.const(!0),onUserPressedKey:(e,r)=>{if(e==="Esc")r&&r.preventDefault(),this.closeSearch();else if(e==="Enter")r&&r.preventDefault(),this.onEnter();else{var i=qe.getFocusedMathquill();if(!i)return;i.keystroke(e,r),this.controller.getRawExpressionSearchStr()!==i.latex()&&(this.justGlobalReplaced=!1,this.onSearchChange(i.latex()))}}}),Bt.createElement("i",{class:Bt.const("dcg-icon-search"),"aria-hidden":Bt.const("true")}),Bt.createElement(Gm,{predicate:()=>this.controller.getRawExpressionSearchStr().length===0},()=>Bt.createElement("span",{class:Bt.const("dcg-search-placeholder")},()=>this.controller.s("graphing-calculator-label-search-expressions"))),Bt.createElement(Gm,{predicate:()=>this.shouldShowSearchError()},()=>Bt.createElement("span",{class:Bt.const("dcg-search-replace-icon-container")},Bt.createElement(Jn,{error:()=>this.controller.s("graphing-calculator-error-expression-search"),gravity:this.const("s"),size:this.const("small")}))),Bt.createElement(Gm,{predicate:()=>this.controller.isSearchReplaceValid()&&!this.justGlobalReplaced},()=>Bt.createElement("span",{class:Bt.const("dcg-search-replace-icon-container")},Bt.createElement("i",{class:Bt.const("dcg-icon-replace"),role:Bt.const("button"),tabindex:Bt.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-button-replace"),onTap:this.bindFn(this.onGlobalReplace)}))),Bt.createElement(Gm,{predicate:()=>this.justGlobalReplaced},()=>Bt.createElement("span",{class:Bt.const("dcg-search-replace-icon-container")},Bt.createElement("i",{class:Bt.const("dcg-icon-check"),"aria-hidden":Bt.const("true")}))),Bt.createElement(Gm,{predicate:()=>this.shouldShowReplaceError()},()=>Bt.createElement("span",{class:Bt.const("dcg-search-replace-icon-container")},Bt.createElement(Jn,{error:()=>this.controller.s("graphing-calculator-error-expression-replacement"),gravity:this.const("s"),size:this.const("small")})))),Bt.createElement("i",{onTap:()=>this.closeSearch(),tabindex:Bt.const("0"),"aria-label":()=>this.controller.s("account-shell-button-cancel"),role:Bt.const("button"),class:Bt.const("dcg-icon-remove dcg-do-not-blur")})))}onGlobalReplace(){this.justGlobalReplaced=!0,setTimeout(()=>{this.justGlobalReplaced=!1,this.update()},1500),this.controller.dispatch({type:"rename-identifier-global",search:this.controller.getExpressionSearchStr(),replace:this.controller.getExpressionReplaceStr()})}onEnter(){this.controller.isSearchReplaceValid()?this.onGlobalReplace():this.controller.dispatch({type:"update-expression-search-str",str:this.controller.getRawExpressionSearchStr()})}shouldShowSearchError(){return!this.controller.getIsExpressionSearchStrValidForReplace()&&this.controller.getExpressionReplaceStr().length>0}shouldShowReplaceError(){return!this.shouldShowSearchError()&&!this.controller.getIsExpressionReplaceStrValidForReplace()&&this.controller.getExpressionReplaceStr().length>0}closeSearch(){this.controller.dispatch({type:"close-expression-search"})}onSearchChange(e){this.controller.dispatch({type:"update-expression-search-str",str:e})}onSearchFocusChanged(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"search-expressions"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"search-expressions"}})}isSearchFocused(){let e=this.controller.getFocusLocation();return!!e&&e.type==="search-expressions"}onReplaceChange(e){this.controller.dispatch({type:"update-expression-replace-str",str:e})}onReplaceFocusChanged(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"replace-expressions"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"replace-expressions"}})}isReplaceFocused(){let e=this.controller.getFocusLocation();return!!e&&e.type==="replace-expressions"}getMQConfig(){return this.controller.getMathquillConfig({additionalOperators:["label","rename"]})}};var Rt=__dcg_shared_module_exports__['i'](ne());var{If:yO,IfDefined:UU}=Rt.Components,tv=class extends Rt.Class{init(){this.controller=this.props.controller()}template(){return Rt.createElement("div",{class:()=>({"dcg-ticker":!0,"dcg-expressions-scrolled":this.props.expsScrolled()})},Rt.createElement("div",{class:Rt.const("dcg-ticker-settings-container")},Rt.createElement("div",{class:Rt.const("dcg-ticker-settings-internal")},Rt.createElement("div",{class:Rt.const("dcg-editable-mathquill-container dcg-action-definition")},Rt.createElement("span",{class:Rt.const("dcg-ticker-label")},()=>this.controller.raw("Run")),Rt.createElement(qe,{hasError:()=>!!this.getHandlerErrorString(),getAriaPostLabel:()=>{let e=this.getHandlerErrorString();return e?this.controller.unpack(e):""},capExpressionSize:this.const(!1),onUserChangedLatex:e=>this.dispatchHandlerLatexIfChanged(e),latex:()=>this.getHandlerLatex(),getAriaLabel:()=>this.controller.s("graphing-calculator-narration-tick-action"),isFocused:()=>this.getFocusedInput()==="handler",config:()=>this.getMQConfig(),onFocusedChanged:e=>this.handleFocusedChanged("handler",e),selectOnFocus:this.const(!0),noFadeout:this.const(!0),onUserPressedKey:(e,r)=>{this.handlePressedKey("handler",e,r)}}),UU(()=>this.getHandlerErrorString(),e=>Rt.createElement("span",{class:Rt.const("dcg-clickable-info-error-container")},Rt.createElement(Jn,{error:()=>this.controller.unpack(e()),gravity:this.const("s"),size:this.const("small")})))),Rt.createElement("div",{class:Rt.const("dcg-editable-mathquill-container dcg-action-frequency")},Rt.createElement("span",{class:Rt.const("dcg-ticker-label")},()=>this.controller.raw("every")),Rt.createElement(qe,{hasError:()=>!!this.getMinStepErrorString(),getAriaPostLabel:()=>{let e=this.getMinStepErrorString();return e?this.controller.unpack(e):""},capExpressionSize:this.const(!1),onUserChangedLatex:e=>this.dispatchMinStepLatexIfChanged(e),latex:()=>this.getMinStepLatex(),getAriaLabel:()=>this.controller.s("graphing-calculator-label-ticker-min-step"),isFocused:()=>this.getFocusedInput()==="minstep",config:this.bindFn(this.getMQConfig),onFocusedChanged:e=>this.handleFocusedChanged("minstep",e),selectOnFocus:this.const(!0),placeholder:this.const("0"),noFadeout:this.const(!0),onUserPressedKey:(e,r)=>{this.handlePressedKey("minstep",e,r)}}),()=>this.controller.raw("ms"),Rt.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-ticker-help-tooltip"),gravity:this.const("s")},Rt.createElement("a",{"aria-label":()=>this.controller.s("graphing-calculator-label-ticker-help-tooltip"),class:Rt.const("dcg-ticker-toggle-help"),target:Rt.const("_blank"),href:Rt.const("https://help.desmos.com/hc/en-us/articles/4407725009165")},Rt.createElement("i",{class:Rt.const("dcg-icon-question-sign"),"aria-hidden":Rt.const("true")})))),Rt.createElement(yO,{predicate:this.bindFn(this.shouldShowSliderPrompt)},()=>Rt.createElement(ws,{model:()=>this.props.controller().getTicker(),controller:this.props.controller}))),Rt.createElement("div",{class:()=>({"dcg-circular-icon-container":!0,"dcg-disabled":this.iconDisabled()}),"aria-label":this.bindFn(this.getIconAriaLabel),role:Rt.const("button"),tabindex:()=>this.iconDisabled()?-1:0,"aria-disabled":this.bindFn(this.iconDisabled),"aria-pressed":()=>this.controller.getTickerPlaying()&&!this.iconDisabled(),onTap:this.bindFn(this.toggleTicker),onTapStart:()=>{Ur()}},Rt.createElement(Li,{iconType:this.const("metronome")}),Rt.createElement("div",{class:()=>({"dcg-metronome-bar":!0,"dcg-metronome-playing":this.controller.getTickerPlaying()&&!this.iconDisabled()})}),Rt.createElement(yO,{predicate:()=>!this.iconDisabled()},()=>Rt.createElement("div",{class:Rt.const("dcg-mini-play-pause")},Rt.createElement(Li,{iconType:this.bindFn(this.getPlayIcon)}))))),Rt.createElement("i",{onTap:this.bindFn(this.closeTicker),tabindex:()=>this.controller.isInEditListMode()?0:-1,"aria-label":()=>this.controller.s("graphing-calculator-label-ticker-close"),role:Rt.const("link"),class:Rt.const("dcg-icon-remove dcg-do-not-blur")}))}iconDisabled(){return!!(this.getMinStepErrorString()||this.getHandlerErrorString()||!this.isHandlerMaybeValid())}isHandlerMaybeValid(){var r;return((r=this.controller.getTicker().formula)==null?void 0:r.handler.status)==="maybe-valid"}closeTicker(){this.controller.dispatch({type:"close-ticker"})}toggleTicker(){this.iconDisabled()||this.controller.dispatch({type:"toggle-ticker"})}getPlayIcon(){return this.controller.getTickerPlaying()?"pause":"play"}getIconAriaLabel(){return this.controller.getTickerPlaying()?this.controller.s("graphing-calculator-label-ticker-pause"):this.controller.s("graphing-calculator-label-ticker-play")}getFocusedInput(){let e=this.controller.getFocusLocation();if(!(!e||e.type!=="ticker"))return e.location}handlePressedKey(e,r,i){let n=qe.getFocusedMathquill();if(n){if(r==="Enter"&&this.shouldShowSliderPrompt()&&this.controller.dispatch({type:"create-sliders-for-ticker",variables:lg(this.props.controller().getTicker())}),r==="Right"&&e==="handler"||r==="Left"&&e==="minstep"||r==="Down"){var o=qe.applyArrowKeyAndReturnIfWasAtBounds(n,r,i);if(!o)return;if(r==="Down")return this.controller.dispatch({type:"on-special-key-pressed",key:r});if(r==="Right"){this.handleFocusedChanged("minstep",!0);return}else if(r==="Left"){this.handleFocusedChanged("handler",!0);return}}n.keystroke(r,i),e==="handler"?this.dispatchHandlerLatexIfChanged(n.latex()):e==="minstep"&&this.dispatchMinStepLatexIfChanged(n.latex())}}handleFocusedChanged(e,r){r?this.controller.dispatch({type:"set-focus-location",location:{type:"ticker",location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"ticker",location:e}})}dispatchHandlerLatexIfChanged(e){this.getHandlerLatex()!==e&&this.controller.dispatch({type:"update-ticker-handlerlatex",latex:e})}dispatchMinStepLatexIfChanged(e){this.getMinStepLatex()!==e&&this.controller.dispatch({type:"update-ticker-minsteplatex",latex:e})}getHandlerLatex(){return this.controller.getTickerHandlerLatex()}getMinStepLatex(){return this.controller.getTickerMinStepLatex()}getMQConfig(){return this.controller.getMathquillConfig({additionalOperators:["dt"]})}getHandlerErrorString(){return this.getHandlerLatex()?lA(this.controller.getTicker()):void 0}getMinStepErrorString(){return cA(this.controller.getTicker())}shouldShowSliderPrompt(){return this.controller.areSlidersEnabled()?lg(this.controller.getTicker()).length>0:!1}};var mn=__dcg_shared_module_exports__['i'](ne());var{For:bO,If:qU}=mn.Components,rv=class extends mn.Class{init(){this.controller=this.props.controller(),this.currentlyInspectedDepth=1/0}template(){return mn.createElement("div",{class:mn.const("dcg-geo-show-constructions-pane"),didUnmount:()=>this.lastFocusedToken=void 0,onKeydown:this.bindFn(this.handleKeydown)},mn.createElement(qU,{predicate:()=>this.controller.getGeometryConstructionCount()===0},()=>mn.createElement("div",{class:mn.const("dcg-empty-constructions")},mn.const("No constructed objects yet. Use the tools on the right to get started."))),mn.createElement(bO,{each:this.bindFn(this.getObjectDepths)},mn.createElement("div",{class:mn.const("dcg-displayed-sections-container")},e=>mn.createElement("div",{class:()=>({"dcg-displayed-section-level":!0,"dcg-selected-level":parseInt(e)===this.getCurrentlyInspectedDepth(),"dcg-below-the-line":parseInt(e)>this.getCurrentlyInspectedDepth()})},mn.createElement(bO,{each:()=>this.getTokensForDepth(e),key:(r,i)=>i},mn.createElement("span",{role:mn.const("listbox"),"aria-label":()=>this.controller.raw(`Depth: ${e}`)},(r,i)=>mn.createElement(_c,{showParentChildrenHover:this.const(!0),controller:this.props.controller,tokenId:()=>this.getTokenIdForDepth(e,i),insideMQ:this.const(!1),insideGroup:this.const(!0),focusLocation:()=>({type:"geo-token",token:this.getTokenIdForDepth(e,i)}),putInTabOrder:()=>{if(this.lastFocusedToken===void 0){let n=this.getObjectDepths();this.lastFocusedToken=this.getTokenIdForDepth(n[0],0)}return this.lastFocusedToken===this.getTokenIdForDepth(e,i)}})))))))}getCurrentlyInspectedDepth(){return Math.min(this.currentlyInspectedDepth,this.getObjectDepths().length-1)}getTokenIdForDepth(e,r){var i=this.getTokensForDepth(e)[r];return i?i.token:""}getTokensForType(e){var r=this.controller.cachedGeoTokenGroups,i=r[e];return i||[]}getTokensForDepth(e){var r=this.controller.cachedGeoTokenDepths,i=r[e];return i||[]}getObjectDepths(){let e=Object.keys(this.controller.cachedGeoTokenDepths);return e.sort((r,i)=>{let n=parseInt(r),o=parseInt(i);return isFinite(n)?isFinite(o)?n-o:1:-1}),e}getObjectTypes(){var e=[],r=this.controller.cachedGeoTokenGroups;return r.point&&e.push("point"),r.line&&e.push("line"),r.circle&&e.push("circle"),r.polygon&&e.push("polygon"),r.angle&&e.push("angle"),r.error&&e.push("error"),r.unknown&&e.push("unknown"),e}handleKeydown(e){if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;let r=Le(e);if(r==="Esc"){e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-show-constructions-open",open:!1,focusIcon:!0});return}if(r!=="Up"&&r!=="Down"&&r!=="Left"&&r!=="Right")return;e.preventDefault(),e.stopPropagation();let i=this.getObjectTypes();if(i.length===0)return;let n="",o=this.controller.getFocusLocation();if(o&&o.type==="geo-token")n=o.token;else{let p=this.getTokensForType(i[0])[0];if(!p)return;n=p.token}if(n==="")return;let a=this.controller.getTokenRenderInfoById(n),s=i.indexOf(a.groupType),l=this.getTokensForType(a.groupType);if(!l)return;let c=__dcg_shared_module_exports__['y'](l,{token:n});if(s===-1||c===-1)return;r==="Up"?s=Math.max(s-1,0):r==="Down"?s=Math.min(s+1,i.length-1):r==="Left"?c=Math.max(c-1,0):r==="Right"&&(c=Math.min(c+1,l.length-1));let u=this.getTokensForType(i[s]);if(!u)return;c=Math.min(c,u.length-1);let h=u[c].token;this.lastFocusedToken=h,this.controller.dispatch({type:"set-focus-location",location:{type:"geo-token",token:h}})}};var{If:Nc,For:HU,Switch:$U,SwitchUnion:zU}=mt.Components,Am=class extends mt.Class{constructor(){super(...arguments),this.guid=__dcg_shared_module_exports__['K']("listView")}init(){this.controller=this.props.controller()}template(){return mt.createElement("div",{didMount:this.bindFn(this.didMountContainer)},mt.createElement("div",{class:mt.const("dcg-exppanel-outer"),onDrop:this.bindFn(this.onDrop),style:()=>this.computeExppanelOuterStyle()},mt.createElement(Nc,{predicate:()=>this.controller.isFileDraggedOver()},()=>mt.createElement("div",{class:mt.const("dcg-drop-image")},mt.createElement("span",null,()=>this.controller.s("graphing-calculator-label-drop-image-here")))),mt.createElement("div",{class:()=>({"dcg-exppanel-container":!0,"dcg-add-shadow":this.controller.shouldRenderList()}),style:()=>({transform:this.controller.isListVisible()?void 0:this.controller.isNarrow()?"translate(0, 100%)":"translate(-100%, 0)"})},mt.createElement(Nc,{predicate:()=>this.controller.shouldRenderList()},()=>mt.createElement(Tm,{controller:this.props.controller,expsScrolled:()=>!!this.exppanel&&this.exppanel.scrollTop>0})),mt.createElement(Nc,{predicate:()=>this.controller.getExpressionSearchOpen()},()=>mt.createElement(ev,{controller:this.props.controller,expsScrolled:()=>!!this.exppanel&&this.exppanel.scrollTop>0})),mt.createElement(Nc,{predicate:()=>this.controller.getTickerOpen()&&!this.controller.getTicker().filteredBySearch},()=>mt.createElement(tv,{controller:this.props.controller,expsScrolled:()=>!!this.exppanel&&this.exppanel.scrollTop>0})),mt.createElement(Nc,{predicate:()=>this.controller.shouldRenderList()},()=>mt.createElement("div",{class:()=>({"dcg-exppanel":!0,"dcg-disable-horizontal-scroll-to-cursor":!0,"dcg-isDragging":this.controller.isDragDropActive(),"dcg-has-background-color":this.controller.hasBackgroundColor(),"dcg-edit-list-mode":this.controller.isInEditListMode()}),style:()=>({background:this.controller.getBackgroundColor()}),onPaste:this.bindFn(this.onPaste),onTapStart:this.bindFn(this.onExppanelTapstart),didMount:this.bindFn(this.didMountExppanel)},mt.createElement("div",{class:()=>({"dcg-expressionlist":!0}),role:mt.const("region"),"aria-label":()=>this.controller.s("shared-calculator-narration-expression-list")},mt.createElement(Nc,{predicate:()=>this.controller.getShowConstructionsOpen()},()=>mt.createElement(rv,{controller:this.props.controller})),mt.createElement(HU,{each:()=>this.controller.getAllItemModels(),key:e=>e.guid},mt.createElement("span",{class:mt.const("dcg-template-expressioneach")},e=>zU(()=>zA(e),{shell:()=>this.makeShellViewForModel(e),render:()=>this.makeViewForModel(e),none:()=>{}}))),mt.createElement(km,{controller:()=>this.props.controller()}),mt.createElement($U,{key:()=>this.controller.getDraggedItemId()},e=>{if(e){let r=this.controller.getItemModel(e);return mt.createElement(Em,{controller:this.props.controller},this.makeDragCopyViewForModel(r))}else return}),mt.createElement("div",{class:mt.const("dcg-expressions-branding"),style:()=>({opacity:this.controller.isKeypadOpen()?0:1})},mt.createElement(Nc,{predicate:()=>this.controller.canEditOnWeb()},()=>mt.createElement("span",{role:mt.const("link"),tabindex:mt.const(0),class:mt.const("dcg-edit-branding"),onTap:()=>this.controller.dispatch({type:"open-on-web"})},mt.createElement("div",{class:mt.const("dcg-powered-by"),"aria-label":()=>this.controller.s("graphing-calculator-narration-edit-graph-on-desmos")},()=>this.controller.s("graphing-calculator-button-edit-graph-on-desmos-logo")),mt.createElement("i",{class:mt.const("dcg-icon-desmos"),"aria-hidden":mt.const("true")}))),mt.createElement(Nc,{predicate:()=>!this.controller.canEditOnWeb()},()=>mt.createElement("span",{class:mt.const("dcg-noedit-branding")},mt.createElement("div",{class:mt.const("dcg-powered-by"),"aria-label":()=>this.controller.s("graphing-calculator-narration-powered-by-desmos")},()=>this.controller.s("graphing-calculator-label-powered-by")),mt.createElement("i",{class:mt.const("dcg-icon-desmos"),"aria-hidden":mt.const("true")})))))))),mt.createElement(Zw,{controller:this.props.controller})))}makeShellViewForModel(e){return mt.createElement(Sm,{controller:this.props.controller,model:()=>e,onDragPending:()=>{},isDragCopy:()=>!1})}computeExppanelOuterStyle(){this.getListBottomAndUpdateLastExpressionPadding();let{list:e}=this.controller.computeMajorLayout(),r=0,i=e.top;return e.top>0&&!this.controller.isListVisible()&&(i-=e.height),{position:"absolute",left:r+"px",top:i+"px",width:e.width+"px",height:e.height+"px"}}makeDragCopyViewForModel(e){return this.makeViewForModel(e,!0)}makeViewForModel(e,r=!1){var i;if(e.type==="table")i=mt.createElement(ym,{controller:this.props.controller,model:()=>e,onDragPending:n=>this.onDragPending(n,e.id),isDragCopy:()=>r});else if(e.type==="folder")i=mt.createElement(bm,{controller:this.props.controller,model:()=>e,onDragPending:n=>this.onDragPending(n,e.id),isDragCopy:()=>r});else if(e.type==="text")i=mt.createElement(pm,{controller:this.props.controller,model:()=>e,onDragPending:n=>this.onDragPending(n,e.id),isDragCopy:()=>r});else if(e.type==="image")i=mt.createElement(vm,{controller:this.props.controller,model:()=>e,onDragPending:n=>this.onDragPending(n,e.id),isDragCopy:()=>r});else if(e.type==="expression")i=mt.createElement(um,{controller:this.props.controller,model:()=>e,onDragPending:n=>this.onDragPending(n,e.id),isDragCopy:()=>r});else return;return i}didUnmount(){V(document.documentElement).off("."+this.guid)}didMountContainer(e){this.node=e,V(document.documentElement).on("keydown."+this.guid,this.bindFn(this.handleKeyDown))}didMountExppanel(e){this.exppanel=e,e.onscroll=()=>this.controller.markTickRequiredNextFrame()}getListBottomAndUpdateLastExpressionPadding(){let e=this.controller.getKeypadHeight(),r=this.__listBottom||0;return this.__listBottom=e,e===0&&r!==0&&ET()&&this.padLastExpressionUntilTapEnd(r),e}padLastExpression(e){V(this.node).find(".dcg-expressionitem.dcg-new-expression").css("margin-bottom",e+"px")}unpadLastExpression(){V(this.node).find(".dcg-expressionitem.dcg-new-expression").css("margin-bottom","0")}padLastExpressionUntilTapEnd(e){this.padLastExpression(e),V(document).on("dcg-tap.animating-bottom",()=>{this.unpadLastExpression(),V(document).off("dcg-tap.animating-bottom")})}handleKeyDown(e){if(this.controller.inAudioTraceMode())return;let r=Le(e),i=vi(e),n=this.controller.getSelectedItem();if(!n){(r===oa||r===nd)&&!this.controller.needsFakeKeypad()&&this.controller.hasMultipleItemsSelected()&&this.controller.dispatch({type:"delete-all-selected-items"});return}let o=this.controller.getFocusLocation();if(!(this.controller.getSelectedGeoExpression()&&(o!==void 0||r!==nd&&r!==oa))){if(e.ctrlKey&&e.shiftKey&&!e.metaKey&&!e.altKey&&o!==void 0){if(i==="O"){e.preventDefault(),e.stopPropagation();let a;if(n.type==="expression")!n.sliderExists&&!tp(n)?(a={type:"expression",model:n,guid:n.guid,focusFirstOption:!0,previousFocusLocation:o},this.controller.dispatch({type:"set-focus-location",location:{type:"expression-icon",id:n.id}})):n.sliderExists&&(a={type:"slider",model:n,guid:"slider-"+n.guid,focusFirstOption:!0,previousFocusLocation:o},this.controller.dispatch({type:"set-focus-location",location:{type:"slider-animation-properties-icon",id:n.id}}));else if(n.type==="image")a={type:"image",model:n,guid:n.guid,focusFirstOption:!0,previousFocusLocation:o},this.controller.dispatch({type:"set-focus-location",location:{type:"image-icon",id:n.id}});else if(n.type==="table"&&o.type==="table"){let s=o.location;if(!s)return;let l=n.columnModels[s.column];if(!l||l.latex===""||!this.controller.getGraphSettings().config.graphpaper||l.error||l.index===0)return;a={type:"table-column",model:l,guid:l.guid,focusFirstOption:!0,previousFocusLocation:o},this.controller.dispatch({type:"set-focus-location",location:{type:"table-icon",id:n.id,columnId:l.id}})}if(!a)return;this.controller.dispatch({type:"toggle-item-settings-menu",menu:a});return}else if(i==="D"){if(this.controller.isItemReadonly(n.id)&&!this.controller.isInEditListMode())return;e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"delete-item-and-animate-out",id:n.id,setFocusAfterDelete:!0});return}}if(this.controller.isInEditListMode()&&!e.altKey&&!e.ctrlKey&&!e.metaKey){if(r===Bs&&o!==void 0){let a=this.controller.getItemModelByIndex(0);if(!a)return;let s=(o.type==="readonly-expression"&&a.type==="expression"||o.type==="table-container"&&a.type==="table"||o.type===a.type)&&o.id===a.id,l={type:"edit-list-toggle"},c=this.controller.isFocusLocationFocused(l);e.shiftKey&&s?(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-focus-location",location:l})):!e.shiftKey&&c&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"move-focus-to-item",id:a.id,where:a.type==="table"?"container":void 0}))}else if(r===Rn||r===zn){let a=this.controller.getListModel(),s=r===Rn?cd(a,n.index):dd(a,n.index);if(!s)return;this.controller.dispatch({type:"move-focus-to-item",id:s.id,where:s.type==="table"?"container":"start"})}return}if(!(document.activeElement&&V.contains(document.body,document.activeElement))&&!V(e.target).closest(this.exppanel).length&&V.contains(document.documentElement,e.target))switch(r){case Rn:e.preventDefault(),this.controller.dispatch({type:"select-previous-expression"});break;case zn:e.preventDefault(),this.controller.dispatch({type:"select-next-expression"});break;case oo:e.preventDefault(),this.controller.dispatch({type:"set-none-selected"});break;case fc:e.preventDefault(),n&&(n.type==="expression"&&n.sliderExists?(this.controller.dispatch({type:"adjust-slider-by-keyboard",id:n.id,adjustment:"up"}),this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:n.id}})):this.controller.dispatch({type:"move-focus-to-item",id:n.id,where:"start"}));break;case Bs:e.preventDefault(),n&&this.controller.dispatch({type:"move-focus-to-item",id:n.id,where:"start"});break;case gc:e.preventDefault(),n&&(n.type==="expression"&&n.sliderExists?(this.controller.dispatch({type:"adjust-slider-by-keyboard",id:n.id,adjustment:"down"}),this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:n.id}})):this.controller.dispatch({type:"move-focus-to-item",id:n.id,where:"end"}));break;case oa:e.preventDefault(),n&&!this.controller.isItemReadonly(n.id)&&this.controller.dispatch({type:"upward-delete-selected-expression"});break;case nd:e.preventDefault(),n&&!this.controller.isItemReadonly(n.id)&&this.controller.dispatch({type:"downward-delete-selected-expression"});break;case Ks:e.wasHandled("create-expression-with-keyboard")||(e.preventDefault(),e.handle("create-expression-with-keyboard"),n&&this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"}));break;default:if(e.metaKey||e.ctrlKey||r===Xh||r===Qh)return;n&&(n.type==="table"||this.controller.dispatch({type:"move-focus-to-item",id:n.id,where:"end"}))}}}onDragPending(e,r){e.preventDefault(),Ur();var i=e.touches[0].clientY,n=i,o=setTimeout(()=>{V(document).off(".dragpending"),this.onDragStart(e,r,i,n)},500);V(document).on("dcg-tapmove.dragpending",a=>{n=a.touches[0].clientY,Math.abs(n-i)>3&&(clearTimeout(o),V(document).off(".dragpending"),this.onDragStart(e,r,i,n))}),V(document).on("dcg-tapend.dragpending",function(){clearTimeout(o),V(document).off(".dragpending")})}onDragStart(e,r,i,n){e.touches.length===1&&(e.wasHandled("dcg-longhold")||this.controller.dispatch({type:"start-dragdrop",id:r,grabY:i,mouseY:n}))}onExppanelTapstart(e){e.device!=="mouse"&&V(e.target).closest(".dcg-expressionitem").length===0&&Ur()}onPaste(e){let r=this.controller.getGraphSettings().config;var i=mO(e);if(!i)return;var n=this.controller.getSelectedItem();if(this.controller.canLoadPastedLink(i)&&n&&n.type==="folder"&&n.title===""){e.stopPropagation(),e.preventDefault(),Qw(this.controller,i,(a,s)=>s(null,a));return}if(n&&(n.type==="text"||n.type==="folder"))return;if(this.controller.canLoadPastedLink(i)){e.stopPropagation(),e.preventDefault();let a=r.pasteGraphLinkCallback?r.pasteGraphLinkCallback:(s,l)=>l(null,s);Qw(this.controller,i,a);return}if(r.pasteTableData){let a=aO(i);if(a!==void 0)return e.stopPropagation(),e.preventDefault(),this.controller.dispatch({type:"paste-table",data:a})}let o=oO(i);if(o!==void 0){e.stopPropagation(),e.preventDefault();let a=[];o.length===1&&o[0].numberList?this.controller.dispatch({type:"append-number-list",latex:o[0].content}):(o.forEach(s=>{a.push({type:"expression",id:this.controller.generateId(),latex:s.content})}),this.controller.dispatch({type:"insert-several-expressions",expressions:a}));return}}onDrop(e){if(!this.controller.areImagesEnabled())return;let r=e.dataTransfer&&e.dataTransfer.files;r&&this.controller.dispatch({type:"new-images",files:r})}};var Yr=__dcg_shared_module_exports__['i'](ne());at();var ln=__dcg_shared_module_exports__['i'](ne());at();var xO=__dcg_shared_module_exports__['i'](ne());var yn=class extends xO.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}getFocusedInput(){let e=this.controller.getFocusLocation(),r=this.model.type==="table-column"?this.model.table.id:this.id;if(!(!e||e.type!=="expression-menu"||e.id!==r))return e.location}handleFocusedChanged(e,r){let i=this.model.type==="table-column"?this.model.table.id:this.id;e?this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:i,location:r}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"expression-menu",id:i,location:r}})}onColorSelected(e){this.model.type!=="image"&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-color",id:this.id,color:e}):this.controller.dispatch({type:"set-tablecolumn-color",color:e,tableId:this.model.table.id,columnId:this.id}))}onCustomColorSelected(e){this.model.type!=="image"&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-colorlatex",id:this.id,colorLatex:e}):this.controller.dispatch({type:"set-tablecolumn-colorlatex",tableId:this.model.table.id,columnId:this.model.id,colorLatex:e}))}getModelColor(){return this.model.type==="image"?"":rs(this.model)}};var fr=__dcg_shared_module_exports__['i'](ne());var Ql=__dcg_shared_module_exports__['i'](ne()),bn=class extends Ql.Class{template(){return Ql.createElement("div",{class:()=>({"dcg-toggle-view":!0,"dcg-toggled":this.props.toggled()}),"aria-label":()=>this.props.ariaLabel(),role:Ql.const("checkbox"),tabindex:Ql.const("0"),"aria-checked":()=>this.props.toggled(),toggled:()=>this.props.toggled(),onTap:this.bindFn(this.props.onChange)},Ql.createElement("div",{class:Ql.const("dcg-toggle-switch")}))}};var nr=__dcg_shared_module_exports__['i'](ne());var{For:wO,If:pk}=nr.Components,Qo=class extends nr.Class{init(){this.controller=this.props.controller()}template(){return nr.createElement("div",{class:nr.const("dcg-color-picker-container")},nr.createElement(wO,{each:()=>this.getColorValues()},nr.createElement("span",{class:nr.const("dcg-color-picker-menu dcg-do-not-blur")},e=>nr.createElement("span",{class:nr.const("dcg-color-tile"),handleevent:nr.const("true"),role:nr.const("button"),tabindex:nr.const("0"),"aria-label":()=>wd(this.controller,e),"aria-pressed":()=>this.isSelected(e),onTap:()=>this.props.onColorSelected(e)},nr.createElement("span",{class:nr.const("dcg-color-swatch"),style:()=>({background:e})}),nr.createElement(pk,{predicate:()=>this.isSelected(e)},()=>nr.createElement("i",{class:nr.const("dcg-icon-check"),"aria-hidden":nr.const("true")}))))),nr.createElement(pk,{predicate:()=>this.getUniqueCustomColors().length>0},()=>nr.createElement(wO,{each:this.bindFn(this.getUniqueCustomColors),key:e=>typeof e=="string"?e:e.assignmentLatex},nr.createElement("span",{class:nr.const("dcg-color-picker-menu dcg-do-not-blur")},e=>typeof e=="string"?nr.createElement("span",{class:nr.const("dcg-color-picker-placeholder")}):nr.createElement(Ue,{tooltip:()=>e.assignmentLatex,renderAsLatex:()=>({view:r=>nr.createElement(ze,{config:this.const({}),latex:()=>r})})},nr.createElement("span",{class:nr.const("dcg-color-tile"),handleevent:nr.const("true"),role:nr.const("button"),tabindex:nr.const(0),"aria-label":()=>nn(e.assignmentLatex),"aria-pressed":()=>this.props.colorLatex()===e.assignmentLatex,onTap:()=>this.props.onCustomColorSelected(e.assignmentLatex)},nr.createElement(Np,{color:()=>this.getColorValue(e)}),nr.createElement(pk,{predicate:()=>this.props.colorLatex()===e.assignmentLatex},()=>nr.createElement("i",{class:()=>this.getCheckmarkClass(e),"aria-hidden":nr.const("true")}))))))))}isSelected(e){var r=this.props.colorLatex();return r&&__dcg_shared_module_exports__['q'](this.getUniqueCustomColors(),"assignmentLatex").indexOf(r)>=0?!1:this.props.selectedColor()===e}getColorValues(){return __dcg_shared_module_exports__['C'](this.controller.getColors())}getUniqueCustomColors(){if(this.props.hideCustomColors&&this.props.hideCustomColors())return[];let e=this.controller.getAllColorAssignments(),r=__dcg_shared_module_exports__['v'](e,function(n){return n.assignmentLatex}),i=__dcg_shared_module_exports__['m'](e,n=>r[n.assignmentLatex]===1);for(let n=0;n<i.length%6;n++)i.push("placholder-"+n);return i}getColorValue(e){return this.controller.getColorById(e.id)}getCheckmarkClass(e){return Rx(this.getColorValue(e))?`dcg-icon-check ${I1(this.getColorValue(e))?"dcg-light-color":"dcg-mixed-color"}`:"dcg-icon-check"}};var{If:hk}=fr.Components,Wp=class extends yn{template(){return fr.createElement("div",{class:fr.const("dcg-options-menu-section")},fr.createElement("div",{class:fr.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-heading-lines"),fr.createElement(bn,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-lines-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleLinesVisible)})),fr.createElement(hk,{predicate:()=>this.props.isOpen()},()=>fr.createElement("div",{class:fr.const("dcg-options-menu-content")},fr.createElement("div",{class:fr.const("dcg-options-flex-container")},fr.createElement("div",{class:fr.const("dcg-options-left-side")},fr.createElement("div",{class:fr.const("dcg-iconed-mathquill-row dcg-line-opacity-row")},fr.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-opacity-tooltip"),sticky:this.const(!0),gravity:this.const("se")},fr.createElement("i",{class:fr.const("dcg-icon-opacity"),"aria-hidden":fr.const("true")})),fr.createElement(Ir,{latex:()=>this.model.lineOpacity,placeholder:this.bindFn(this.getLineOpacity),isFocused:()=>this.getFocusedInput()==="lineopacity",ariaPostLabel:()=>this.isLineOpacityValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-line-opacity"),hasError:()=>!this.isLineOpacityValid(),handleLatexChanged:this.bindFn(this.dispatchLineOpacityLatexIfChanged),dataLabelAttributeValue:this.const("line-opacity"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>this.handleFocusedChanged(e,"lineopacity")})),fr.createElement("div",{class:fr.const("dcg-iconed-mathquill-row dcg-line-thickness-row")},fr.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-line-thickness-tooltip"),sticky:this.const(!0),gravity:this.const("se")},fr.createElement("i",{class:fr.const("dcg-icon-line-thickness"),"aria-hidden":fr.const("true")})),fr.createElement(Ir,{latex:()=>this.model.lineWidth,placeholder:this.bindFn(this.getLineWidth),isFocused:()=>this.getFocusedInput()==="linewidth",ariaPostLabel:()=>this.isLineWidthValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-label-line-thickness-tooltip"),hasError:()=>!this.isLineWidthValid(),handleLatexChanged:this.bindFn(this.dispatchLineWidthLatexIfChanged),dataLabelAttributeValue:this.const("line-width"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>this.handleFocusedChanged(e,"linewidth")}))),fr.createElement("div",{class:fr.const("dcg-options-right-side")},fr.createElement(hk,{predicate:this.bindFn(this.shouldShowLineStyles)},()=>fr.createElement(Oi,{staticConfig:this.bindFn(this.getPointStyleOptions),ariaGroupLabel:()=>this.controller.s("graphing-calculator-heading-style"),theme:this.const("mini")})))),fr.createElement(hk,{predicate:this.props.isFirstOpenSection},()=>fr.createElement(Qo,{controller:this.props.controller,colorLatex:()=>this.model.colorLatex,selectedColor:this.bindFn(this.getModelColor),onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected)})))))}getLineWidth(){return this.isGeometryPolygon()?""+2:""+2.5}getLineOpacity(){return this.isGeometryPolygon()?""+.6:""+.9}isGeometryPolygon(){return this.controller.isGeometry()&&this.model.type==="expression"&&Zs(this.model)}getPointStyleOptions(){return["SOLID","DASHED","DOTTED"].map(r=>({key:r,icon:()=>this.getStyleIcon(r),ariaLabel:()=>this.getStyleAria(r),selected:()=>this.model.lineStyle===r,class:()=>"dcg-line-segmented-option",onSelect:()=>{this.onLineStyleSelected(r)}}))}getStyleIcon(e){switch(e){case"SOLID":return"dcg-icon-line-solid";case"DASHED":return"dcg-icon-line-dashed";case"DOTTED":return"dcg-icon-line-dotted"}}getStyleAria(e){let r=this.controller.s;switch(e){case"SOLID":return r("graphing-calculator-narration-line-style-solid");case"DASHED":return r("graphing-calculator-narration-line-style-dashed");case"DOTTED":return r("graphing-calculator-narration-line-style-dotted")}}isLineOpacityValid(){return this.model.type==="expression"?KV(this.model):this.model.type==="table-column"?Y0(this.model):!1}isLineWidthValid(){return this.model.type==="expression"?HV(this.model):this.model.type==="table-column"?J0(this.model):!1}dispatchLineOpacityLatexIfChanged(e){this.model.lineOpacity!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-lineopacity",id:this.id,lineOpacity:e}):this.controller.dispatch({type:"set-tablecolumn-lineopacity",tableId:this.model.table.id,columnId:this.model.id,lineOpacity:e}))}shouldShowLineStyles(){return!(this.model.type==="expression"&&tl(this.model))}onLineStyleSelected(e){this.model.lineStyle!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-linestyle",id:this.id,lineStyle:e}):this.controller.dispatch({type:"set-tablecolumn-linestyle",tableId:this.model.table.id,columnId:this.model.id,lineStyle:e}))}dispatchLineWidthLatexIfChanged(e){this.model.lineWidth!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-linewidth",id:this.id,lineWidth:e}):this.controller.dispatch({type:"set-tablecolumn-linewidth",tableId:this.model.table.id,columnId:this.model.id,lineWidth:e}))}toggleLinesVisible(){this.model.type==="expression"?this.controller.dispatch({type:"set-item-lines",id:this.id,lines:!this.props.isOpen()}):this.controller.dispatch({type:"set-tablecolumn-lines",tableId:this.model.table.id,columnId:this.model.id,bool:!this.props.isOpen()})}};var sn=__dcg_shared_module_exports__['i'](ne());var{If:YU,For:JU}=sn.Components,iv=class extends yn{template(){return sn.createElement("div",{class:sn.const("dcg-options-menu-section dcg-options-menu-section-arrows")},sn.createElement("div",{class:sn.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-heading-arrows"),sn.createElement(bn,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-menu-arrows-enabled"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleArrowsEnabled)})),sn.createElement(YU,{predicate:this.props.isOpen},()=>sn.createElement("div",{class:sn.const("dcg-options-menu-content")},sn.createElement(JU,{each:()=>this.getArrowModeOptions()},sn.createElement("div",{class:sn.const("dcg-style-icons"),role:sn.const("radiogroup")},e=>sn.createElement("div",{class:sn.const("dcg-style-icon-container"),onTap:()=>this.setArrowMode(e),role:sn.const("radio"),tabindex:sn.const(0),"aria-label":()=>this.getAriaLabel(e),"aria-checked":()=>this.getArrowMode()===e},sn.createElement(Li,{backgroundColor:()=>"#000",semiTransparent:()=>this.getArrowMode()!==e,iconType:()=>this.getArrowIconType(e)})))))))}getArrowModeOptions(){return _g(this.model)?["POSITIVE","BOTH"]:[]}getArrowIconType(e){switch(e){case"POSITIVE":return"arrow-right";case"BOTH":return"movable-horizontal"}}getAriaLabel(e){switch(e){case"POSITIVE":return this.controller.s("graphing-calculator-narration-arrow-mode-one");case"BOTH":return this.controller.s("graphing-calculator-narration-arrow-mode-both")}}setArrowMode(e){this.controller.dispatch({type:"set-item-arrow-mode",id:this.id,value:e})}getArrowMode(){return cx(this.model)}toggleArrowsEnabled(){this.model.type==="expression"&&this.setArrowMode(this.props.isOpen()?"NONE":"POSITIVE")}};var Vm=__dcg_shared_module_exports__['i'](ne());var nv=class extends yn{template(){return Vm.createElement("div",{class:Vm.const("dcg-options-menu-section")},Vm.createElement(Qo,{controller:this.props.controller,colorLatex:()=>this.model.colorLatex,selectedColor:this.bindFn(this.getModelColor),onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected),hideCustomColors:()=>this.model.type==="expression"&&px(this.model)}))}};var Ji=__dcg_shared_module_exports__['i'](ne());var{If:gk}=Ji.Components,ov=class extends yn{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return Ji.createElement("div",{class:Ji.const("dcg-options-menu-section")},Ji.createElement("div",{class:Ji.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-heading-fill"),Ji.createElement(gk,{predicate:()=>!this.isInequality()},()=>Ji.createElement(bn,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-fill-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleFillVisible)}))),Ji.createElement(gk,{predicate:this.props.isOpen},()=>Ji.createElement("div",{class:Ji.const("dcg-options-menu-content")},Ji.createElement("div",{class:Ji.const("dcg-iconed-mathquill-row dcg-fill-opacity-row")},Ji.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-opacity-tooltip"),sticky:this.const(!0),gravity:this.const("se")},Ji.createElement("i",{class:Ji.const("dcg-icon-opacity"),"aria-hidden":Ji.const("true")})),Ji.createElement(Ir,{latex:()=>this.model.fillOpacity,placeholder:this.bindFn(this.getFillOpacity),isFocused:()=>this.getFocusedInput()==="opacity",ariaPostLabel:()=>hE(this.model)?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-fill-opacity"),hasError:()=>!hE(this.model),handleLatexChanged:this.bindFn(this.dispatchOpacityLatexIfChanged),dataLabelAttributeValue:this.const("fill-opacity"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>this.handleFocusedChanged(e,"opacity")})),Ji.createElement(gk,{predicate:this.props.isFirstOpenSection},()=>Ji.createElement(Qo,{controller:this.props.controller,colorLatex:()=>this.model.colorLatex,selectedColor:this.bindFn(this.getModelColor),onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected)})))))}getFillOpacity(){return this.controller.isGeometry()&&Zs(this.model)?""+.2:""+.4}isInequality(){return tl(this.model)}toggleFillVisible(){this.controller.dispatch({type:"set-item-fill",id:this.id,fill:!this.props.isOpen()})}dispatchOpacityLatexIfChanged(e){this.model.fillOpacity!==e&&this.controller.dispatch({type:"set-item-fillopacity",id:this.id,fillOpacity:e})}};var mr=__dcg_shared_module_exports__['i'](ne());var Lt=__dcg_shared_module_exports__['i'](ne());var{If:vO,Switch:CO}=Lt.Components,av=class extends Lt.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return Lt.createElement("div",{class:Lt.const("dcg-clickable-image-info-view"),role:Lt.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-clickable-image-options")},Lt.createElement("div",{class:Lt.const("dcg-clickable-image-state-container")},Lt.createElement(Ue,{tooltip:()=>this.tooltip("hovered"),gravity:this.const("s")},Lt.createElement(Yl,{controller:()=>this.controller,ariaLabel:()=>this.tooltip("hovered"),onFileChange:e=>this.updateImage("hovered",e),readonly:()=>this.controller.isItemReadonly(this.id)},Lt.createElement(CO,{key:this.bindFn(this.hoveredStatus)},()=>Lt.createElement("div",{class:Lt.const("dcg-clickable-image-state"),style:()=>this.getStyleForState("hovered")})))),Lt.createElement(vO,{predicate:()=>!!this.model.clickableInfo.hoveredImage},()=>Lt.createElement("div",{class:Lt.const("dcg-clickable-image-state-close"),onTap:()=>this.removeImageState("hovered"),ariaLabel:()=>this.controller.s("graphing-calculator-label-remove-hovered-image"),role:Lt.const("button"),tabIndex:Lt.const(0)},Lt.createElement("i",{class:Lt.const("dcg-icon-remove"),"aria-hidden":Lt.const("true")}))),Lt.createElement("div",{role:Lt.const("heading"),"aria-level":Lt.const("2"),class:Lt.const("dcg-clickable-image-label")},()=>this.controller.s("graphing-calculator-label-hovered"))),Lt.createElement("div",{class:Lt.const("dcg-clickable-image-state-container")},Lt.createElement(Ue,{tooltip:()=>this.tooltip("depressed"),gravity:this.const("s")},Lt.createElement(Yl,{controller:()=>this.controller,ariaLabel:()=>this.tooltip("depressed"),onFileChange:e=>this.updateImage("depressed",e),readonly:()=>this.controller.isItemReadonly(this.id)},Lt.createElement(CO,{key:this.bindFn(this.depressedStatus)},()=>Lt.createElement("div",{class:Lt.const("dcg-clickable-image-state"),style:()=>this.getStyleForState("depressed")})))),Lt.createElement(vO,{predicate:()=>!!this.model.clickableInfo.depressedImage},()=>Lt.createElement("div",{class:Lt.const("dcg-clickable-image-state-close"),onTap:()=>this.removeImageState("depressed"),ariaLabel:()=>this.controller.s("graphing-calculator-label-remove-depressed-image"),role:Lt.const("button"),tabIndex:Lt.const(0)},Lt.createElement("i",{class:Lt.const("dcg-icon-remove"),"aria-hidden":Lt.const("true")}))),Lt.createElement("div",{role:Lt.const("heading"),"aria-level":Lt.const("2"),class:Lt.const("dcg-clickable-image-label")},()=>this.controller.s("graphing-calculator-label-depressed"))))}hoveredStatus(){return this.hoveredUploading?"loading":"background"}depressedStatus(){return this.depressedUploading?"loading":"background"}tooltip(e){return(e==="hovered"?this.model.clickableInfo.hoveredImage:this.model.clickableInfo.depressedImage)?e==="depressed"?this.controller.s("graphing-calculator-label-change-depressed-image-tooltip"):this.controller.s("graphing-calculator-label-change-hovered-image-tooltip"):e==="depressed"?this.controller.s("graphing-calculator-label-add-depressed-image-tooltip"):this.controller.s("graphing-calculator-label-add-hovered-image-tooltip")}getImageURLForState(e){let r;if(e==="hovered"){if(this.hoveredStatus()!=="background")return"";r="hoveredImage"}else{if(this.depressedStatus()!=="background")return"";r="depressedImage"}let i=this.model.clickableInfo[r];return i?`url(${i})`:`url(${this.model.image_url})`}getStyleForState(e){let r={"background-image":this.getImageURLForState(e),opacity:1};return e==="hovered"&&!this.model.clickableInfo.hoveredImage&&(r.opacity=.5),r}removeImageState(e){e==="hovered"?this.controller.dispatch({type:"set-hovered-image",id:this.model.id,url:""}):this.controller.dispatch({type:"set-depressed-image",id:this.model.id,url:""})}updateImage(e,r){if(!r||!r[0])return;let i=r[0];e==="hovered"&&(this.hoveredUploading=!0),e==="depressed"&&(this.depressedUploading=!0),this.controller.getGraphSettings().config.imageUploadCallback(i,(n,o)=>{e==="hovered"&&(this.hoveredUploading=!1),e==="depressed"&&(this.depressedUploading=!1),!n&&o&&(e==="hovered"?this.controller.dispatch({type:"set-hovered-image",id:this.model.id,url:o}):this.controller.dispatch({type:"set-depressed-image",id:this.model.id,url:o}))})}};var Ba=__dcg_shared_module_exports__['i'](ne()),sv=__dcg_shared_module_exports__['i'](LO());var mk=/\{\$([a-zA-Z0-9\-]+([a-zA-Z0-9\-]+_)*[a-zA-Z0-9\-]+)\}/;function PO(t,e){let r=0,i=0,n={},o={},a=s(t);if(!/^<0>/.test(a)||!/<\/0>$/.test(a))throw new Error("Expected template string to start and end with <0> and </0>, but found "+JSON.stringify(a));return a.slice(3,-4).trim();function s(c){if(e.isConst(c))return n8(e.getConstValue(c));if(e.isNamedBinding(c)){let u=l(n,e.getBindingName(c)),h=`{$${u}}`;if(!mk.test(h))throw new Error(`Invalid <Localize> variable: ${h}.`);return e.addBinding&&e.addBinding(u,c),n[u]=!0,h}else if(c!==t&&e.isView(c)){let u=l(o,e.getViewName(c));if(!/[a-zA-Z0-9\-_]/.test(u))throw new Error(`Invalid <Localize> subview identifier: ${u}.`);return e.addView&&e.addView(u,c),o[u]=!0,`<${u}/>`}else if(e.isBinding(c)){let u=l(n,`v${r++}`),h=`{$${u}}`;return e.addBinding&&e.addBinding(u,c),n[u]=!0,h}else{let u=`${i++}`;e.addElement&&e.addElement(u,c);let h=[];return e.forEachChild(c,p=>{h.push(s(p))}),o[u]=!0,h.length>0?`<${u}>${h.join("")}</${u}>`:`<${u}/>`}}function l(c,u){let h=0,p=u;for(;c[p];)p=`${u}-${++h}`;return p}}var i8=!0;function n8(t){return i8?t:t.replace(/\{|\}/g,e=>`{"${e}"}`).replace(/(^|[\s\n]+)(\[|\]|\.)/g,(e,r,i)=>`${r}{"${i}"}`)}function o8(t){return t.__DCGViewLocalizeBindingName}function a8(t){return typeof t=="function"&&t.__DCGViewLocalizeViewName}var jp=class extends Ba.Class{init(){this.viewMap={},this.elementMap={},this.bindingMap={},this.i18n=this.props.i18n(),this.templateString=this.serializeToTemplateString(Ba.createElement("div",null,this.children))}template(){return Ba.createElement(Ba.Components.If,{predicate:()=>this.shouldShow()},()=>Ba.createElement(Ba.Components.Switch,{key:()=>yk(this.translatedString())},e=>this.renderDeserializedTemplateNode(this.parseAndValidate(e))))}shouldShow(){let e=this.props.options&&this.props.options();return e&&e.hideUntranslatedView&&this.i18n.hasTranslation?this.i18n.hasTranslation(this.props.key()):!0}translatedString(){let e={};for(let r in this.bindingMap)e[r]=Aa(`{$${r}}`);return this.i18n.s(this.props.key(),e)}static variable(e,r){let i=()=>r();return i.__DCGViewLocalizeBindingName=e,i}static subview(e,r){let i=()=>r();return i.__DCGViewLocalizeViewName=e,i}parseAndValidate(e){let r=(0,sv.parse)(e),i={},n={};o(r);for(let a in this.elementMap)if(!n[a])return(0,sv.parse)(yk(this.templateString));for(let a in this.bindingMap)if(!i[a])return(0,sv.parse)(yk(this.templateString));return r;function o(a){if(Array.isArray(a)){for(let s of a)o(s);return}a.name==="token"?i[a.attrs.id]=!0:a.type!=="text"&&(n[a.name]=!0,o(a.children))}}renderDeserializedTemplateNode(e){if(Array.isArray(e))return e.map(r=>this.renderDeserializedTemplateNode(r));if(e.type==="text")return Ba.const(e.content||"");if(e.name==="token"){let r=this.bindingMap[e.attrs.id];return r||(()=>"")}else if(this.elementMap[e.name]){let r=this.elementMap[e.name],i=e.children.map(n=>this.renderDeserializedTemplateNode(n));return _O(r.type,r.attrs,i)}else return this.viewMap[e.name]?this.viewMap[e.name]():_O("span",{},[])}serializeToTemplateString(e){return PO(e,{isView:a8,isConst:OO,isBinding:r=>typeof r=="function",isNamedBinding:o8,getConstValue:r=>r(),getBindingName:r=>r.__DCGViewLocalizeBindingName,getViewName:r=>r.__DCGViewLocalizeViewName,addBinding:(r,i)=>{this.bindingMap[r]=i},addElement:(r,i)=>{this.elementMap[r]={type:i.tagName,attrs:i.attrs}},addView:(r,i)=>{if(this.viewMap[r])throw new Error(`Unexpected duplicate view ${r}.`);this.viewMap[r]=i},forEachChild:(r,i)=>{for(let n of r.children){if(!OO(n)&&typeof n!="function"&&n._isDCGView)throw new Error("Bare DCGViews are not allowed inside <Localize>. Use Localize.subview().");i(n)}}})}};function OO(t){return typeof t=="function"&&t.isDCGViewConst}function _O(t,e,r){return Ba.createElement(t,e,r)}function yk(t){return`<0>${t}</0>`.replace(new RegExp(mk.source,"g"),(r,i)=>`<token id="${i}"/>`)}var{If:lv,IfDefined:s8,Textarea:l8}=mr.Components,Yp=class extends yn{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return mr.createElement("div",{class:mr.const("dcg-options-menu-section dcg-clickable-section")},mr.createElement("div",{class:mr.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-heading-clickable"),mr.createElement(bn,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-make-clickable"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleClickable)})),mr.createElement(lv,{predicate:this.props.isOpen},()=>mr.createElement("div",{class:mr.const("dcg-options-menu-content")},mr.createElement("div",{class:mr.const("dcg-clickable-menu-row")},mr.createElement("span",{class:mr.const("dcg-input-label")},()=>this.controller.s("graphing-calculator-label-update-on-click")),mr.createElement(qe,{latex:()=>this.model.clickableInfo.latex,placeholder:this.const(""),isFocused:()=>this.getFocusedInput()==="updaterule",capExpressionSize:()=>!!this.controller.getGraphSettings().config.capExpressionSize,selectOnFocus:this.const(!0),config:this.bindFn(this.getMQConfig),getAriaLabel:()=>this.controller.s("graphing-calculator-narration-click-action"),getAriaPostLabel:this.const(""),hasError:()=>this.hasError(),onUserChangedLatex:e=>this.dispatchUpdateRuleLatexIfChanged(e),onExpressionSizeExceeded:()=>this.controller.dispatch({type:"expression-size-exceeded"}),onFocusedChanged:e=>this.handleFocusedChanged(e,"updaterule"),dataLabelAttributeValue:this.const("click-handler"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled()}),s8(()=>this.packedError(),e=>mr.createElement("span",{class:mr.const("dcg-clickable-info-error-container")},mr.createElement(Jn,{error:()=>this.controller.unpack(e()),gravity:this.const("s"),size:this.const("small")})))),mr.createElement(lv,{predicate:this.bindFn(this.isList)},()=>mr.createElement("div",{class:mr.const("dcg-clickable-list-index-notice")},mr.createElement(jp,{i18n:this.const(this.controller),key:this.const("graphing-calculator-label-list-index")},mr.const("Use"),mr.const(" "),mr.createElement("span",{class:()=>({"dcg-index-variable-marker":!0,"dcg-btn":!0,"dcg-btn-light-gray":!0,"dcg-mathquill-has-focus":this.getFocusedInput()==="updaterule","dcg-do-not-blur":!0}),onTap:this.bindFn(this.insertIndex)},mr.const("index")),mr.const(" "),mr.const("to reference the clicked index in the list.")))),mr.createElement(lv,{predicate:()=>this.model.type!=="image"},()=>mr.createElement(l8,{placeholder:()=>this.controller.s("graphing-calculator-text-add-screen-reader-label-placeholder"),value:()=>this.model.description,onInput:e=>this.controller.dispatch({type:"set-item-description",id:this.model.id,description:e})})),mr.createElement(lv,{predicate:()=>this.model.type==="image"},()=>mr.createElement("div",{class:mr.const("dcg-clickable-menu-row")},mr.createElement(av,{controller:()=>this.controller,model:()=>this.model}))))))}insertIndex(){this.controller.dispatch({type:"keypad/type-text",text:"index"})}isList(){return this.model.formula?!!this.model.formula.is_concrete_list:!1}hasError(){return this.packedError()!==void 0}packedError(){if(this.model.formula.click_handler&&this.model.formula.click_handler.status==="error")return this.model.formula.click_handler.error}toggleClickable(){this.controller.dispatch({type:"set-clickableinfo-prop",id:this.model.id,prop:"enabled",value:!this.model.clickableInfo.enabled}),this.model.clickableInfo.enabled&&this.handleFocusedChanged(!0,"updaterule")}dispatchUpdateRuleLatexIfChanged(e){this.model.clickableInfo.latex!==e&&this.controller.dispatch({type:"set-clickableinfo-rule-latex",id:this.id,latex:e})}getMQConfig(){return this.controller.getMathquillConfig({additionalOperators:["index"]})}};var Pr=__dcg_shared_module_exports__['i'](ne());var Zl=__dcg_shared_module_exports__['i'](ne());var Jp=class extends yn{template(){return Zl.createElement("div",{class:Zl.const("dcg-iconed-mathquill-row dcg-point-opacity-row")},Zl.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-opacity-tooltip"),sticky:this.const(!0),gravity:this.const("se")},Zl.createElement("i",{class:Zl.const("dcg-icon-opacity"),"aria-hidden":Zl.const("true")})),Zl.createElement(Ir,{latex:()=>this.model.pointOpacity,placeholder:this.bindFn(this.getPointOpacityPlaceholder),isFocused:()=>this.getFocusedInput()==="pointopacity",ariaPostLabel:()=>this.isPointOpacityValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-line-opacity"),hasError:()=>!this.isPointOpacityValid(),handleLatexChanged:this.bindFn(this.dispatchPointOpacityLatexIfChanged),dataLabelAttributeValue:this.const("point-opacity"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>this.handleFocusedChanged(e,"pointopacity")}))}isPointOpacityValid(){return this.model.type==="expression"?UV(this.model):this.model.type==="table-column"?Q0(this.model):!1}dispatchPointOpacityLatexIfChanged(e){this.model.pointOpacity!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-pointopacity",id:this.id,pointOpacity:e}):this.controller.dispatch({type:"set-tablecolumn-pointopacity",columnId:this.model.id,tableId:this.model.table.id,pointOpacity:e}))}getPointOpacityPlaceholder(){return this.getDragMode()==="NONE"?`${.9}`:"1"}getDragMode(){return this.model.type==="expression"?this.model.reconciledDragMode||this.model.dragMode:this.model.dragMode}};var{If:cv}=Pr.Components,Xp=class extends yn{template(){return Pr.createElement("div",{class:Pr.const("dcg-options-menu-section")},Pr.createElement("div",{class:Pr.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-heading-points"),Pr.createElement(bn,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-points-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.togglePointsVisible)})),Pr.createElement(cv,{predicate:this.props.isOpen},()=>Pr.createElement("div",{class:Pr.const("dcg-options-menu-content")},Pr.createElement("div",{class:Pr.const("dcg-options-flex-container")},Pr.createElement("div",{class:Pr.const("dcg-options-left-side")},Pr.createElement(Jp,__dcg_shared_module_exports__['b']({},this.props)),Pr.createElement(cv,{predicate:()=>!this.isDraggable()},()=>Pr.createElement("div",{class:Pr.const("dcg-iconed-mathquill-row")},Pr.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-point-size-tooltip"),gravity:this.const("se"),sticky:this.const(!0)},Pr.createElement("i",{class:Pr.const("dcg-icon-line-thickness"),"aria-hidden":Pr.const("true")})),Pr.createElement(Ir,{latex:()=>this.model.pointSize,placeholder:this.bindFn(this.getDefaultPointSize),isFocused:()=>this.getFocusedInput()==="pointsize",ariaPostLabel:()=>this.isPointSizeValid()?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-point-size"),hasError:()=>!this.isPointSizeValid(),handleLatexChanged:e=>this.dispatchPointSizeLatexIfChanged(e),dataLabelAttributeValue:this.const("point-size"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>this.handleFocusedChanged(e,"pointsize")})))),Pr.createElement("div",{class:Pr.const("dcg-options-right-side")},Pr.createElement(cv,{predicate:()=>!this.isDraggable()},()=>Pr.createElement(Oi,{staticConfig:this.bindFn(this.getPointStyleOptions),ariaGroupLabel:()=>this.controller.s("graphing-calculator-heading-style"),theme:this.const("mini")})))),Pr.createElement(cv,{predicate:this.props.isFirstOpenSection},()=>Pr.createElement(Qo,{controller:this.props.controller,colorLatex:()=>this.model.colorLatex,selectedColor:this.bindFn(this.getModelColor),onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected)})))))}getPointStyleOptions(){return["POINT","OPEN","CROSS"].map(r=>({key:r,icon:()=>this.getStyleIcon(r),ariaLabel:()=>this.getStyleAria(r),selected:()=>this.model.pointStyle===r,class:()=>"dcg-point-segmented-option",onSelect:()=>{this.onPointStyleSelected(r)}}))}getStyleIcon(e){switch(e){case"POINT":return"dcg-icon-point";case"OPEN":return"dcg-icon-open";case"CROSS":return"dcg-icon-cross"}}getStyleAria(e){let r=this.controller.s;switch(e){case"POINT":return r("graphing-calculator-narration-point-style-point");case"OPEN":return r("graphing-calculator-narration-point-style-open");case"CROSS":return r("graphing-calculator-narration-point-style-cross")}}isPointSizeValid(){return this.model.type==="expression"?qV(this.model):this.model.type==="table-column"?X0(this.model):!1}onPointStyleSelected(e){this.model.pointStyle!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-pointstyle",id:this.id,pointStyle:e}):this.controller.dispatch({type:"set-tablecolumn-pointstyle",columnId:this.model.id,tableId:this.model.table.id,pointStyle:e}))}dispatchPointSizeLatexIfChanged(e){this.model.pointSize!==e&&(this.model.type==="expression"?this.controller.dispatch({type:"set-item-pointsize",id:this.id,pointSize:e}):this.controller.dispatch({type:"set-tablecolumn-pointsize",columnId:this.model.id,tableId:this.model.table.id,pointSize:e}))}isDraggable(){return this.getDragMode()!=="NONE"}togglePointsVisible(){this.model.type==="expression"&&So(this.model)?this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id}):this.model.type==="expression"?this.controller.dispatch({type:"set-item-points",id:this.id,points:!this.props.isOpen()}):this.controller.dispatch({type:"set-tablecolumn-points",columnId:this.model.id,tableId:this.model.table.id,bool:!this.props.isOpen()})}getDragMode(){return this.model.type==="expression"?this.model.reconciledDragMode||this.model.dragMode:this.model.dragMode}getDefaultPointSize(){return this.model.type==="expression"&&Gl(this.model)?`${14}`:`${9}`}};var Ot=__dcg_shared_module_exports__['i'](ne());var Un=__dcg_shared_module_exports__['i'](ne());var{For:d8}=Un.Components,u8=[{orientation:"default",cssClass:"dcg-label-orientation-center",description:"graphing-calculator-text-label-orientation-default"},{orientation:"above",cssClass:"dcg-label-orientation-above",description:"graphing-calculator-text-label-orientation-above"},{orientation:"above_right",cssClass:"dcg-label-orientation-above-right",description:"graphing-calculator-text-label-orientation-above-right"},{orientation:"right",cssClass:"dcg-label-orientation-right",description:"graphing-calculator-text-label-orientation-right"},{orientation:"below_right",cssClass:"dcg-label-orientation-below-right",description:"graphing-calculator-text-label-orientation-below-right"},{orientation:"below",cssClass:"dcg-label-orientation-below",description:"graphing-calculator-text-label-orientation-below"},{orientation:"below_left",cssClass:"dcg-label-orientation-below-left",description:"graphing-calculator-text-label-orientation-below-left"},{orientation:"left",cssClass:"dcg-label-orientation-left",description:"graphing-calculator-text-label-orientation-left"},{orientation:"above_left",cssClass:"dcg-label-orientation-above-left",description:"graphing-calculator-text-label-orientation-above-left"}],dv=class extends Un.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return Un.createElement("div",{class:Un.const("dcg-label-orientation-view"),style:()=>`transform: rotate(${this.getCSSRotationValue()});`},Un.createElement("span",{class:Un.const("dcg-vertical-orientation-indicator")}),Un.createElement(d8,{each:()=>u8,key:e=>e.orientation},Un.createElement("div",{class:Un.const("dcg-label-orientations"),role:Un.const("radiogroup"),"aria-label":()=>this.controller.s("graphing-calculator-heading-label-orientation")},e=>Un.createElement("div",{class:()=>({[e.cssClass]:!0,"dcg-orientation-option":!0,"dcg-selected":this.isSelected(e.orientation),"dcg-orientation-disabled":this.isDisabled(e.orientation)}),role:Un.const("radio"),tabindex:Un.const("0"),"aria-label":()=>this.controller.s(e.description),"aria-checked":()=>this.getOrientation()===e.orientation,onTap:()=>this.onTapOrientation(e.orientation)},Un.createElement("i",{class:()=>({"dcg-icon-chevron-left":e.orientation!=="default"})})))))}isDisabled(e){return e!=="default"?!1:this.isPointVisible()?!0:this.model.labelOrientation==="default"}isSelected(e){return e==="default"&&e===this.model.labelOrientation?!this.isPointVisible():e===this.model.labelOrientation}isPointVisible(){return this.model.hidden?!1:So(this.model)?!this.model.hidden:this.model.points}getCSSRotationValue(){let e=$V(this.model);return`${Array.isArray(e)?0:e}rad`}getOrientation(){return this.props.model().labelOrientation}onTapOrientation(e){e===this.getOrientation()&&(e="default"),this.controller.dispatch({type:"set-item-label-orientation",id:this.id,labelOrientation:e})}};var{If:Qp}=Ot.Components,uv=class extends yn{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return Ot.createElement("div",{class:Ot.const("dcg-options-menu-section")},Ot.createElement("div",{class:Ot.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-heading-label"),Ot.createElement(bn,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-label-visible"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleLabelVisible)})),Ot.createElement(Qp,{predicate:this.props.isOpen},()=>Ot.createElement("div",{class:Ot.const("dcg-options-menu-content")},Ot.createElement("div",{class:Ot.const("dcg-options-flex-container")},Ot.createElement("div",{class:Ot.const("dcg-options-left-side")},Ot.createElement(Qp,{predicate:this.props.isFirstOpenSection},()=>Ot.createElement(Jp,__dcg_shared_module_exports__['b']({},this.props))),Ot.createElement("div",{class:Ot.const("dcg-iconed-mathquill-row dcg-label-size-row")},Ot.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-label-size-tooltip"),sticky:this.const(!0),gravity:this.const("se")},Ot.createElement("span",{class:Ot.const("dcg-font-size")},Ot.const("A"))),Ot.createElement(Ir,{latex:()=>this.model.labelSize,placeholder:()=>"1",isFocused:()=>this.getFocusedInput()==="labelsize",ariaPostLabel:()=>gE(this.model)?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-label-size"),hasError:()=>!gE(this.model),handleLatexChanged:this.bindFn(this.dispatchLabelSizeIfChanged),dataLabelAttributeValue:this.const("label-size"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>this.handleFocusedChanged(e,"labelsize")})),Ot.createElement("div",{class:()=>({"dcg-iconed-mathquill-row":!0,"dcg-label-angle-row":!0,"dcg-suffix-degree":this.props.controller().getGraphSettings().degreeMode,"dcg-suffix-radian":!this.props.controller().getGraphSettings().degreeMode})},Ot.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-angle-tooltip"),sticky:this.const(!0)},Ot.createElement("i",{class:Ot.const("dcg-icon-angle"),"aria-hidden":Ot.const("true")})),Ot.createElement(Ir,{latex:()=>this.model.labelAngle,placeholder:()=>"0",isFocused:()=>this.getFocusedInput()==="labelangle",ariaPostLabel:()=>fE(this.model)?this.controller.raw(""):this.controller.s("shared-calculator-narration-input-error"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-label-angle"),hasError:()=>!fE(this.model),handleLatexChanged:this.bindFn(this.dispatchLabelAngleIfChanged),dataLabelAttributeValue:this.const("label-angle"),controller:this.props.controller,readonly:()=>this.controller.isItemReadonly(this.model.id),handleFocusChanged:e=>this.handleFocusedChanged(e,"labelangle")}))),Ot.createElement("div",{class:Ot.const("dcg-options-right-side")},Ot.createElement(dv,{controller:()=>this.controller,model:()=>this.model}))),Ot.createElement(Qp,{predicate:this.props.isFirstOpenSection},()=>Ot.createElement(Qo,{controller:this.props.controller,colorLatex:()=>this.model.colorLatex,selectedColor:this.bindFn(this.getModelColor),onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected)})),Ot.createElement(Qp,{predicate:()=>this.controller.canUseAdvancedStyling()},()=>Ot.createElement("div",{class:Ot.const("dcg-label-advanced")},Ot.createElement(kt,{checked:this.bindFn(this.getWhiteTextOutline),onChange:this.bindFn(this.setWhiteTextOutline),disabled:()=>this.getEditable()},()=>this.controller.s("graphing-calculator-button-label-text-outline")),Ot.createElement("div",{role:Ot.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-heading-advanced")},Ot.createElement(Qp,{predicate:()=>this.shouldShowHoverLabelCheckbox()},()=>Ot.createElement(kt,{checked:this.bindFn(this.getInteractiveLabel),onChange:this.bindFn(this.setInteractiveLabel)},()=>this.controller.s("graphing-calculator-button-label-show-on-hover"))),Ot.createElement(Qp,{predicate:this.bindFn(this.shouldShowEditableLabelToggle)},()=>Ot.createElement(kt,{checked:this.bindFn(this.getEditable),onChange:this.bindFn(this.setEditable)},()=>this.controller.s("graphing-calculator-button-label-editable")))))))))}getWhiteTextOutline(){return this.getEditable()?!1:!this.model.suppressTextOutline}setWhiteTextOutline(e){this.controller.dispatch({type:"set-suppress-text-outline",id:this.id,suppressTextOutline:!e})}setInteractiveLabel(e){this.controller.dispatch({type:"set-item-interactive-label",id:this.id,interactiveLabel:e})}getInteractiveLabel(){return!!this.model.interactiveLabel}setEditable(e){if(e){let r=__dcg_shared_module_exports__['Hc'](this.model.label)==="latex"?"MATH":"TEXT";this.controller.dispatch({type:"set-item-editable-label-mode",id:this.id,editableLabelMode:r})}else this.controller.dispatch({type:"set-item-editable-label-mode",id:this.id,editableLabelMode:"NONE"})}getEditable(){return this.model.editableLabelMode!=="NONE"}shouldShowEditableLabelToggle(){return So(this.model)}shouldShowHoverLabelCheckbox(){return this.model.reconciledDragMode==="NONE"}dispatchLabelAngleIfChanged(e){this.model.labelAngle!==e&&this.controller.dispatch({type:"set-item-labelangle",id:this.id,labelAngle:e})}dispatchLabelSizeIfChanged(e){this.model.labelSize!==e&&this.controller.dispatch({type:"set-item-labelSize",id:this.id,labelSize:e})}toggleLabelVisible(){this.controller.dispatch({type:"set-item-showlabel",id:this.id,showLabel:!this.props.isOpen()})}};var Ln=__dcg_shared_module_exports__['i'](ne());var{If:p8,For:h8}=Ln.Components,Zp=class extends yn{template(){return Ln.createElement("div",{class:Ln.const("dcg-options-menu-section")},Ln.createElement("div",{class:Ln.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-heading-drag"),Ln.createElement(bn,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-menu-drag-enabled"),toggled:this.props.isOpen,onChange:this.bindFn(this.toggleDragEnabled)})),Ln.createElement(p8,{predicate:this.props.isOpen},()=>Ln.createElement("div",{class:Ln.const("dcg-options-menu-content")},Ln.createElement(h8,{each:()=>["X","Y","XY"]},Ln.createElement("div",{class:Ln.const("dcg-style-icons"),role:Ln.const("radiogroup")},e=>Ln.createElement("div",{class:()=>({"dcg-style-icon-container":!0,"dcg-disabled":this.isDisabled(e)}),onTap:()=>this.onDragModeSelected(e),role:Ln.const("radio"),tabindex:()=>this.isDisabled(e)?-1:0,"aria-label":()=>e==="X"?this.controller.s("graphing-calculator-narration-drag-mode-x"):e==="Y"?this.controller.s("graphing-calculator-narration-drag-mode-y"):e==="XY"?this.controller.s("graphing-calculator-narration-drag-mode-xy"):this.controller.raw(""),"aria-checked":()=>this.getDragMode()===e},Ln.createElement(Li,{backgroundColor:()=>"#000",semiTransparent:()=>this.getDragMode()!==e,iconType:()=>e==="X"?"movable-horizontal":e==="Y"?"movable-vertical":"movable-both"})))))))}isDisabled(e){let r=this.controller.getEnabledDragModesForItem(this.id);return!__dcg_shared_module_exports__['p'](r,e)}onDragModeSelected(e){if(this.model.type==="expression"){if(this.isDisabled(e))return;this.controller.dispatch({type:"set-item-dragmode",id:this.id,dragMode:e})}else{let r=this.model.id,i=this.model.table.id;this.controller.dispatch({type:"set-tablecolumn-dragmode",tableId:i,columnId:r,dragMode:e})}}getDragMode(){return this.model.type==="expression"?this.model.reconciledDragMode||this.model.dragMode:this.model.dragMode}toggleDragEnabled(){let e=this.getDragMode()!=="NONE"?"NONE":"XY";this.model.type==="expression"?this.controller.dispatch({type:"set-item-dragmode",id:this.id,dragMode:e}):this.onDragModeSelected(e)}};var{For:g8,If:f8}=ln.Components,eh=class extends ln.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,this.props.registerRepositionCb(this.bindFn(this.renderOffset))}template(){return ln.createElement("div",{class:()=>({"dcg-expressions-options-menu":!0,"dcg-options-menu":!0}),role:ln.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-options-menu"),didMount:this.bindFn(this.didMountContainer)},ln.createElement(g8,{each:this.bindFn(this.getSections)},ln.createElement("div",null,e=>{switch(e){case"points":return ln.createElement(Xp,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{isOpen:()=>this.isSectionOpen("points"),isFirstOpenSection:()=>this.isFirstOpenSection("points")}));case"label":return ln.createElement(uv,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{isOpen:()=>this.isSectionOpen("label"),isFirstOpenSection:()=>this.isFirstOpenSection("label")}));case"drag":return ln.createElement(Zp,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{isOpen:()=>this.isSectionOpen("drag"),isFirstOpenSection:()=>this.isFirstOpenSection("drag")}));case"lines":return ln.createElement(Wp,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{isOpen:()=>this.isSectionOpen("lines"),isFirstOpenSection:()=>this.isFirstOpenSection("lines")}));case"arrows":return ln.createElement(iv,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{isOpen:()=>this.isSectionOpen("arrows"),isFirstOpenSection:()=>this.isFirstOpenSection("arrows")}));case"fill":return ln.createElement(ov,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{isOpen:()=>this.isSectionOpen("fill"),isFirstOpenSection:()=>this.isFirstOpenSection("fill")}));case"colors-only":return ln.createElement(nv,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{isOpen:this.const(!0),isFirstOpenSection:this.const(!0)}))}})),ln.createElement(f8,{predicate:this.bindFn(this.isClickable)},()=>ln.createElement(Yp,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{isOpen:()=>!!this.model.clickableInfo.enabled,isFirstOpenSection:this.const(!1)}))),ln.createElement("div",{class:ln.const("dcg-triangle"),didMount:this.bindFn(this.didMountArrow)}))}willUnmount(){ge(this.controller.s("graphing-calculator-narration-options-menu-closed"))}didMountContainer(e){this.$containerElt=V(e),ge(this.controller.s("graphing-calculator-narration-options-menu-open"))}didMountArrow(e){this.$arrowElt=V(e)}renderOffset(e){if(!this.$containerElt||!this.$arrowElt)return;let r=this.$containerElt.outerHeight(),i=0;r>e&&(i=+e-r);let n=-i<r-38;this.$containerElt.css("margin-top",`${i}px`),this.$arrowElt.css("margin-top",`${-i}px`),this.$arrowElt.css("display",n?"":"none")}isClickable(){return this.controller.areActionsEnabled()&&yE(this.model)&&!this.controller.isItemReadonly(this.model.id)}getSections(){return fd(this.model)||kc(this.model)||px(this.model)||FV(this.model)?["colors-only"]:Ic(this.model)?["lines"]:Gl(this.model)?["points"]:OV(this.model)?["points","label","lines"]:So(this.model)?this.model.formula.move_strategy?["points","label","drag"]:["points","label"]:Ec(this.model)||Zs(this.model)?["lines","fill"]:tl(this.model)?Dc(this.model)?["lines"]:["lines","fill"]:_g(this.model)?["lines","arrows"]:["lines"]}isFirstOpenSection(e){let r=this.getSections();for(let i of r){if(i===e)return this.isSectionOpen(e);if(this.isSectionOpen(i))return!1}return!1}isSectionOpen(e){let{points:r,lines:i,fill:n}=this.model,o=__dcg_shared_module_exports__['$b'](this.model.formula.expression_type,{points:r,lines:i,fill:n});switch(e){case"lines":return this.model.hidden?!1:o.lines;case"label":return this.model.showLabel;case"fill":return this.model.hidden?!1:tl(this.model)?!0:o.fill;case"points":return this.model.hidden?!1:So(this.model)?!this.model.hidden:o.points;case"drag":return this.model.reconciledDragMode!=="NONE";case"arrows":return cx(this.model)!=="NONE";case"colors-only":return!0}}};var xr=__dcg_shared_module_exports__['i'](ne());var eo=__dcg_shared_module_exports__['i'](ne());var{Input:m8}=eo.Components,pv=class extends eo.Class{init(){this.controller=this.props.controller(),this.cacheFolderList(),this.newFolderTitle=""}willUpdate(){this.cacheFolderList()}template(){return eo.createElement("div",{class:eo.const("dcg-move-to-folder")},eo.createElement("div",{class:eo.const("dcg-move-to-folder-title")},this.bindFn(this.getMoveMessage)),eo.createElement("div",{class:eo.const("dcg-move-to-folder-flex")},eo.createElement(m8,{value:()=>this.newFolderTitle,onInput:e=>{this.newFolderTitle=e,this.update()},placeholder:()=>"Folder name",didMount:e=>{e.onkeydown=function(r){let i=Le(r);(i==="Backspace"||i==="Del")&&r.stopPropagation()}},onEnterPressed:this.bindFn(this.onEnterPressed)}),eo.createElement("div",{class:()=>({"dcg-btn-blue":!0,"dcg-disabled":!this.newFolderTitle}),role:eo.const("button"),tabindex:eo.const("0"),onTap:this.bindFn(this.createNewFolder)},eo.const("Move"))))}getMoveMessage(){return this.controller.getAllSelectedItems().length===1?"Move to folder:":`Move ${this.controller.getAllSelectedItems().length} objects to folder:`}onEnterPressed(){let e=!1;this.folderList.forEach(r=>{r.title===this.newFolderTitle&&(e=!0,this.chooseFolder(r.id))}),e||this.createNewFolder()}chooseFolder(e){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"folderId",value:e}})}createNewFolder(){this.newFolderTitle&&this.controller.dispatch({type:"update-all-selected-items",update:{prop:"folderId",value:this.newFolderTitle,createFolder:!0}})}cacheFolderList(){this.folderList=[],this.controller.getAllItemModels().forEach(e=>{e.type==="folder"&&!this.controller.isGeoFolder(e)&&this.folderList.push(e)})}};var le=__dcg_shared_module_exports__['i'](ne());var Ek={};__dcg_shared_module_exports__['h'](Ek,{CLCalculator:()=>FO,Label:()=>__dcg_shared_module_exports__['Xa'],applyDiff:()=>UO,applyLocalizationMap:()=>$O,blankGeometryCalculatorState:()=>U8,blankGraphingCalculatorState:()=>K8,builtInFrame:()=>R8,calculateDiff:()=>BO,colorHelpers:()=>__dcg_shared_module_exports__['gc'],context:()=>F8,expressionParser:()=>Sk,extractLocalizationMap:()=>HO,formatLatex:()=>YO,migrateToLatest:()=>bs,numberToDecimalString:()=>__dcg_shared_module_exports__['Yb'],numberToLatex:()=>__dcg_shared_module_exports__['Xb'],parseNodes:()=>JO,parser:()=>O8,policies:()=>B8,replaceIdentifierWithLatex:()=>RS,treeQueries:()=>_8,types:()=>N8});function FO(t){let e=bs(t);var r={},i=e.graph.degreeMode,n=e.randomSeed;let o=e.graph.product==="graphing"?"graphing":"geometry";function a(l){switch(l.type){case void 0:case"expression":{let u=__dcg_shared_module_exports__['Dc'](__dcg_shared_module_exports__['zc'](l));r[u.id]=u}break;case"table":{let u=mb(fb(l));r[u.id]=u}break;case"folder":case"text":case"image":break;default:return l}}for(var s of e.expressions.list)a(s);return{setExpression(l){a(l)},getChangeSet(){return{statements:r,isCompleteState:!0,degreeMode:i,globalRandomSeed:n,evaluationMode:o}}}}function th(t,e){switch(t.type){case"Mul":case"Div":case"Prime":case"Call":case"ImplicitCall":case"Dot":case"Pipes":case"Sqrt":case"Nthroot":case"Frac":case"Derivative":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Piecewise":case"Paren":case"Juxt":case"Superscript":case"Bang":case"Index":case"Equals":case"Inequality":case"Tilde":case"Pos":case"Neg":case"Add":case"Sub":case"List":case"Seq":case"Colon":case"Ellipsis":case"PercentOf":case"RightArrow":case"For":case"With":{let i=0;for(let n of t.args)i+=th(n,e);return i}case"Decimal":return e===void 0||parseFloat(t.val)===e?1:0;case"MixedNumber":{if(e===void 0)return 3;let i=0;return parseFloat(t.whole)===e&&(i+=1),parseFloat(t.num)===e&&(i+=1),parseFloat(t.den)===e&&(i+=1),i}case"Letter":case"EmptyPiecewise":case"Cmd":case"EmptyRangeEnd":return 0;case"Subscript":return th(t.args[0],e);case"InequalityChain":{let i=0;i+=th(t.first,e);for(let n of t.chain)i+=th(n.args[0],e);return i}default:throw`Unexpected surface node ${t.type}.`}}function RO(t){let e=t.length,r=new Array(e),i=new Array(e+1),n=0;for(let s=0;s<e;s++){let l;if(t[i[n]]<t[s])l=n+1;else{let c=1,u=n-1;for(;c<=u;){let h=Math.ceil((c+u)/2);t[i[h]]<t[s]?c=h+1:u=h-1}l=c}r[s]=i[l-1],i[l]=s,l>n&&(n=l)}let o=new Array(n),a=i[n];for(let s=n-1;s>=0;s--)o[s]=t[a],a=r[a];return o}function BO(t,e){return hv(t,e,0)}function hv(t,e,r){let i={};for(let n in t){if(!t.hasOwnProperty(n))continue;if(!e.hasOwnProperty(n)){i[n]={d:1};continue}let o=t[n],a=e[n],s=y8(o,a,r,n);s&&(i[n]=s)}for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(i[n]={s:e[n]});return i}function y8(t,e,r,i){if(__dcg_shared_module_exports__['G'](t)&&__dcg_shared_module_exports__['G'](e)){if(r===1&&i==="list"||r===2&&i==="columns")return x8(t,e);if(!__dcg_shared_module_exports__['E'](t,e))return{s:e}}else if(__dcg_shared_module_exports__['H'](t)&&__dcg_shared_module_exports__['H'](e)){let n=hv(t,e,b8(r,i));if(!__dcg_shared_module_exports__['F'](n))return{e:n}}else if(!__dcg_shared_module_exports__['E'](t,e))return{s:e}}function b8(t,e){return t===0&&e==="expressions"?1:3}function x8(t,e){let r={},i={};for(let s=0;s<t.length;s++){if(i[t[s].id]!==void 0)return{s:e};i[t[s].id]=s}let n={};for(let s=0;s<e.length;s++){if(n[e[s].id]!==void 0)return{s:e};n[e[s].id]=s}let o=w8(t,e,i),a=0;for(let s=0;s<t.length;s++){let l=t[s];if(!o[l.id])r[s]={d:1};else{let c=n[l.id],u=e[c],h={};if(a!==c&&(h.a=e.slice(a,c).map(p=>NO(t,i,p))),!__dcg_shared_module_exports__['E'](l,u)){let p=l.type==="table"&&u.type==="table";h.e=hv(l,u,p?2:3)}__dcg_shared_module_exports__['F'](h)||(r[s]=h),a=c+1}}if(a<e.length&&(r[t.length]={a:e.slice(a,e.length).map(s=>NO(t,i,s))}),!__dcg_shared_module_exports__['F'](r))return{l:r}}function NO(t,e,r){if(e[r.id]){let i=t[e[r.id]],n={f:e[r.id]};return __dcg_shared_module_exports__['E'](i,r)||(n.e=hv(i,r,3)),{m:n}}return{s:r}}function w8(t,e,r){let i={},n=e.filter(a=>r[a.id]!==void 0).map(a=>r[a.id]),o=RO(n);for(let a of o)i[t[a].id]=!0;return i}function UO(t,e){let r=__dcg_shared_module_exports__['M'](t);return gv(r,e)}function gv(t,e){for(let r of __dcg_shared_module_exports__['B'](e)){let i=e[r];C8(i)?t[r]=i.s:S8(i)?delete t[r]:E8(i)?t[r]=v8(t[r],i.l):D8(i)&&(t[r]=gv(t[r],i.e))}return t}function v8(t,e){let r=[];for(let n=0;n<t.length;n++){let o=e[n];o&&o.a&&r.push(...KO(t,o.a)),o&&o.e?r.push(gv(t[n],o.e)):(!o||!o.d)&&r.push(t[n])}let i=e[t.length];return i&&i.a&&r.push(...KO(t,i.a)),r}function KO(t,e){let r=[];for(let i of e)if(k8(i))r.push(i.s);else if(I8(i)){let n=t[i.m.f];i.m.e?r.push(gv(n,i.m.e)):r.push(n)}return r}function C8(t){return t.hasOwnProperty("s")}function S8(t){return t.hasOwnProperty("d")}function E8(t){return t.hasOwnProperty("l")}function D8(t){return t.hasOwnProperty("e")}function k8(t){return t.hasOwnProperty("s")}function I8(t){return t.hasOwnProperty("m")}function qO(t){return t.location==="expression"||t.location==="object"?`${t.location}:${t.id}:${t.path}`:`${t.location}:${t.path}`}function bk(t){let e=()=>new Error(`Invalid key: ${t}`),r=t.split(":"),i=r[0];if(!i||i!="expression"&&i!="settings"&&i!="object")throw e();if(i=="settings"){if(r.length!=2)throw e();return{location:i,path:r[1]}}if(r.length!=3)throw e();return{location:i,id:r[1],path:r[2]}}function fv(t,e,r){if(!t)return;let i=e.split("."),n=t;for(let o=0;o<i.length;o++){let a=i[o];if(!n[a])break;o==i.length-1&&typeof n[a]=="string"?n[a]=r:n=n[a]}}function xk(t,e){return(r,i,n,o)=>{if(r){let a=qO(__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},e),{path:i}));t[a]={value:r,type:n,context:o}}}}function M8(t){var i,n;let e={},r=xk(e,{location:"expression",id:t.id});switch(t.type){case"expression":r(t.label,"label","interpolated-string","expression-list-expression-label"),r(t.description,"description","string","expression-list-expression-clickable-description");break;case"image":r(t.image_url,"image_url","image","expression-list-image-url"),r(t.description,"description","string","expression-list-image-clickable-description"),r((i=t.clickableInfo)==null?void 0:i.hoveredImage,"clickableInfo.hoveredImage","image","expression-list-image-clickable-hovered"),r((n=t.clickableInfo)==null?void 0:n.depressedImage,"clickableInfo.depressedImage","image","expression-list-image-clickable-depressed");break;case"text":r(t.text,"text","string","expression-list-note-text");break;case"folder":r(t.title,"title","string","expression-list-folder-title");break}return e}function T8(t){let e={},r=xk(e,{location:"settings"});return r(t.graph.xAxisLabel,"xAxisLabel","string","settings-xaxis-label"),r(t.graph.yAxisLabel,"yAxisLabel","string","settings-yaxis-label"),e}function G8(t){let e={},r=xk(e,{location:"object",id:t.id});return r(t.label,"label","string","geometry-object-label"),t.type==="image"&&r(t.url,"url","image","geometry-object-image-url"),e}function HO(t){let e={};if(t.type=="graph"){let r=t.graphState.expressions.list;for(let n of r){let o=M8(n);for(let a in o)e[a]=o[a]}let i=T8(t.graphState);for(let n in i)e[n]=i[n]}else{let r=t.geometryState.objects;for(let i in r){let n=G8(r[i]);for(let o in n)e[o]=n[o]}}return e}function $O(t,e,r){var n;let i=__dcg_shared_module_exports__['M'](t);if(r==="graph"){let o={},a=(n=i.expressions)==null?void 0:n.list,s=Array.isArray(a)?a:[];for(let l of s)o[l.id]=l;for(let l in e){let c=bk(l);c.location=="expression"?fv(o[c.id],c.path,e[l].value):fv(i.graph,c.path,e[l].value)}}else if(i.objects)for(let o in e){let a=bk(o);a.location=="object"&&fv(i.objects[a.id],a.path,e[o].value)}return i}function yr(t){switch(t.type){case"Equals":return to(t.args,"=");case"Inequality":return to(t.args,t.symbol);case"InequalityChain":return yr(t.first)+t.chain.map(yr).join("");case"TrailingInequalityPiece":return t.symbol+yr(t.args[0]);case"Tilde":return to(t.args,"~");case"Pos":return"+"+yr(t.args[0]);case"Neg":return"-"+yr(t.args[0]);case"Add":return to(t.args,"+");case"Sub":return to(t.args,"-");case"Mul":return to(t.args,"*");case"Div":return to(t.args,"/");case"Bang":return yr(t.args[0])+"!";case"Call":let e=vk(t.args);return e?e.script+"\\left("+e.arg+"\\right)":yr(t.args[0])+"\\left("+yr(t.args[1])+"\\right)";case"Paren":return"\\left("+yr(t.args[0])+"\\right)";case"List":return"\\left["+t.args.map(yr).join(",")+"\\right]";case"Pipes":return"\\left|"+yr(t.args[0])+"\\right|";case"Index":return yr(t.args[0])+"\\left["+yr(t.args[1])+"\\right]";case"Subscript":return to(t.args,"_",!0);case"Superscript":return to(t.args,"^",!0);case"Prime":if(t.args[0].type==="Call"){let o=vk(t.args[0].args);return o?o.script+wk(t.nprimes)+"\\left("+o.arg+"\\right)":yr(t.args[0].args[0])+wk(t.nprimes)+"\\left("+yr(t.args[0].args[1])+"\\right)"}return yr(t.args[0])+wk(t.nprimes);case"Seq":return t.args.map(yr).join(",");case"Sqrt":return"\\sqrt"+Lm(yr(t.args[0]));case"Nthroot":return"\\sqrt\\left["+yr(t.args[0])+"\\right]"+Lm(yr(t.args[1]));case"Frac":return"\\frac{"+yr(t.args[0])+"}{"+yr(t.args[1])+"}";case"Derivative":return"\\frac{d}{d"+yr(t.args[0])+"}"+yr(t.args[1]);case"Integral":case"EmptyIntegral":if(t.args[0].type!=="Cmd")throw new Error("Expected first argument of an integral to be the variable");let r="d"+t.args[0].val;if(t.args.length===3)return Pm("int",t.args[1],t.args[2])+r;let i=yr(t.args[3]);return Pm("int",t.args[1],t.args[2])+i+r;case"Sum":return zO(t.args,"sum");case"Product":return zO(t.args,"prod");case"Piecewise":return"\\{"+yr(t.args[0])+"\\}";case"EmptyPiecewise":return"\\{\\}";case"Colon":return to(t.args,":");case"Ellipsis":return to(t.args,"...");case"For":return to(t.args,"\\for ");case"With":return to(t.args,"\\with ");case"Dot":return to(t.args,".");case"PercentOf":return to(t.args,"\\% \\of ");case"RightArrow":return to(t.args,"->");case"Juxt":case"ImplicitCall":{let o=vk(t.args);return o?o.script+o.arg:to(t.args,"")}case"MixedNumber":return t.whole+"\\frac{"+t.num+"}{"+t.den+"}";case"Letter":case"Decimal":case"Alphanumeric":return t.val;case"Cmd":return"\\"+t.val;case"EmptyRangeEnd":return"EmptyRangeEnd";case"Err":throw t.error;default:return t}}function Lm(t){return t.length>1?"{"+t+"}":t}function Pm(t,e,r){let i=Lm(yr(e));if(r){let n=Lm(yr(r));return`\\${t}_${i}^${n}`}return`\\${t}_${i}`}function to(t,e,r=!1){let i=yr(t[0]),n=r?Lm(yr(t[1])):yr(t[1]);return i+e+n}function zO(t,e){let r=yr(t[0]);return Pm(e,t[1],t[2])+r}function wk(t){let e="";for(let r=0;r<t;r++)e+="'";return e}function WO(t){return t.type==="Cmd"&&t.val==="logbase"}function vk(t){let e=t[1],r;if(t[1].type==="Seq"&&t[1].args.length===2&&(e=t[1].args[1],r=t[1].args[0]),t[0].type==="Superscript"&&WO(t[0].args[0]))return{script:Pm("log",e,t[0].args[1]),arg:r?yr(r):""};if(WO(t[0]))return{script:Pm("log",e),arg:r?yr(r):""}}function YO(t){let e=Sk.parse(t.latex);if(e.type=="Err")return;let r=xn(e);for(;r.type==="Paren";)r=r.args[0];return ec(r)?{latex:t.latex}:{latex:yr(r)}}function A8(t){return t.isPseudoSurfaceNode}function ec(t){switch(t.type){case"Letter":case"Decimal":case"Cmd":return t.val==="0";default:return!1}}function _d(t){switch(t.type){case"Letter":case"Decimal":case"Cmd":return t.val==="1";default:return!1}}function V8(t){return t.type==="Neg"?_d(t.args[0]):!1}function mv(t){return{isPseudoSurfaceNode:!0,type:"Decimal",span:t,val:"0"}}function Ck(t,e){return{isPseudoSurfaceNode:!0,type:"Neg",span:e,args:[t]}}function jO(t,e){return{isPseudoSurfaceNode:!0,type:"Paren",span:e,args:[t]}}function Zo(t,e){return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t),{span:e})}function xn(t){let e;switch(t.type){case"Add":{let n=xn(t.args[0]),o=xn(t.args[1]);if(ec(n))return Zo(o,t.span);if(ec(o))return Zo(n,t.span);let a;if(o.type==="Neg"?a=xn(o.args[0]):o.type==="Paren"&&o.args[0].type==="Neg"&&(a=xn(o.args[0].args[0])),a!==void 0)return{isPseudoSurfaceNode:!0,type:"Sub",span:t.span,args:[n,a]};e=[n,o];break}case"Sub":{let n=xn(t.args[0]),o=xn(t.args[1]);if(ec(n))return Ck(o,t.span);if(ec(o))return Zo(n,t.span);let a;if(o.type==="Neg"?a=o.args[0]:o.type==="Paren"&&o.args[0].type==="Neg"&&(a=o.args[0].args[0]),a)return{isPseudoSurfaceNode:!0,type:"Add",span:t.span,args:[n,a]};e=[n,o];break}case"Mul":{let n=xn(t.args[0]),o=xn(t.args[1]);if(_d(n))return Zo(o,t.span);if(_d(o))return Zo(n,t.span);if(ec(n)||ec(o))return mv(t.span);e=[n,o];break}case"Juxt":{let n=xn(t.args[0]),o=xn(t.args[1]);if(_d(n))return Zo(o,t.span);if(_d(o))return Zo(n,t.span);if(V8(n))return Ck(o,t.span);if(ec(n)||ec(o))return mv(t.span);if(t.args[0].type==="Paren"&&n.type!=="Paren"&&(n=jO(n,t.span)),t.type==="Juxt"&&t.args[1].type==="Paren"&&o.type!=="Paren"&&(o=jO(o,t.span)),n.type==="Neg"){let a=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t),{type:"Juxt",isPseudoSurfaceNode:!0,args:[n.args[0],o]});return Ck(a,t.span)}e=[n,o];break}case"Frac":case"Div":{let n=xn(t.args[0]),o=xn(t.args[1]);if(_d(o))return Zo(n,t.span);e=[n,o];break}case"Superscript":let r=xn(t.args[0]),i=xn(t.args[1]);if(_d(i))return Zo(r,t.span);e=[r,i];break;case"Paren":{let n=xn(t.args[0]);if(__dcg_shared_module_exports__['Pb'](n))return Zo(n,t.span);let o="args"in n?n.args:void 0;if((!o||o.length<=1)&&n.type!=="Neg")return Zo(n,t.span);e=[n];break}case"Pos":{let n=xn(t.args[0]);return Zo(n,t.span)}case"Neg":{let n=xn(t.args[0]),o="args"in n?n.args[0]:void 0;if(n.type==="Paren"&&o&&o.type==="Neg"&&o.args[0])return Zo(xn(o.args[0]),t.span);if(n.type==="Neg"&&o)return Zo(o,t.span);e=[n];break}case"Cmd":case"Letter":case"Decimal":case"MixedNumber":case"EmptyRangeEnd":case"EmptyPiecewise":case"InequalityChain":return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t),{isPseudoSurfaceNode:!0});default:e=t.args.map(n=>A8(n)?n:n.type==="Alphanumeric"?__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},n),{isPseudoSurfaceNode:!0}):xn(n))}return __dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},t),{isPseudoSurfaceNode:!0,args:e})}function L8(t,e){return t==null&&(t=""),__dcg_shared_module_exports__['Ub'](t,e)}function P8(t){if(t!=null)try{let e=__dcg_shared_module_exports__['Ob'](t);return __dcg_shared_module_exports__['Tb'](e)}catch(e){let r=e instanceof JO.Base?e.getInputSpan():__dcg_shared_module_exports__['Q'](t,0,t.length),i=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},__dcg_shared_module_exports__['Rb']()),{originalError:e});return __dcg_shared_module_exports__['Qb'](r,i)}}var O8={parse:L8},Sk={parse:P8},_8={countNumbers:th},F8=__dcg_shared_module_exports__['Lc'],R8=__dcg_shared_module_exports__['Ka'],N8=__dcg_shared_module_exports__['wa'],JO=__dcg_shared_module_exports__['Za'],B8={graphing:new __dcg_shared_module_exports__['Fc']({enableGeometry:!1,scales:void 0}),scientific:new __dcg_shared_module_exports__['Kc']({singleExpression:!1}),fourFunction:new __dcg_shared_module_exports__['Jc']({singleExpression:!1})},K8=Lp,U8=Rp;var{Switch:XO,For:q8}=le.Components,br=class extends le.Class{template(){return le.createElement(XO,{key:()=>this.getLatex().indexOf("\\token")>=0},e=>e?le.createElement(_c,{tokenId:()=>this.getTokenId(this.getLatex()),insideMQ:()=>!1,controller:()=>this.props.controller(),insideGroup:()=>!1,putInTabOrder:()=>!0}):le.createElement("span",null,le.createElement(ze,{config:this.const({}),latex:()=>this.getLatex()})))}getLatex(){return this.props.latex()||"unknown"}getTokenId(e){return(e.split("{")[1]||"").split("}")[0]||""}},rh=class extends le.Class{init(){this.controller=this.props.controller()}call(){let e=this.getGeometry();return e&&e.call&&e.call.symbol}template(){return le.createElement(XO,{key:this.bindFn(this.getObjectType)},e=>{var r;switch(e){case"copy":return le.createElement("div",null,le.const("Copy of"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>{var i;return __dcg_shared_module_exports__['Xa'].geoParentToLatex((i=this.getGeometry())==null?void 0:i.assignmentRhsReference)}}));case"apply":return le.createElement("div",null,le.const("Transformation of"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[1]}));case __dcg_shared_module_exports__['_']:return le.createElement("div",null,()=>this.getParents().length===3?"Triangle":this.getParents().length===4?"Quadrilateral":"Polygon",le.const(" "),le.const("with vertices"),le.const(" "),le.createElement(q8,{each:()=>this.getParents(),key:(i,n)=>n},le.createElement("span",null,(i,n)=>le.createElement("span",null,()=>n>0?", ":"",()=>n===this.getParents().length-1?"and ":"",le.createElement(br,{controller:this.props.controller,latex:()=>i})))));case __dcg_shared_module_exports__['S']:return this.call()==="intersection"?le.createElement("div",null,le.const("Intersection of"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[0]}),le.const(" "),le.const("and"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[1]})):this.call()==="glider"?le.createElement("div",null,le.const("Glider on"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[0]})):this.call()==="midpoint"?le.createElement("div",null,le.const("Midpoint of"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[0]})):le.createElement("div",null,le.const("Free Point"));case __dcg_shared_module_exports__['aa']:return this.getParents().length===1&&this.getGeometry()&&this.getGeometry().listAccess?le.createElement("div",null,le.const("Segment "),()=>this.getGeometry().listAccess,le.const(" of a"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[0]})):le.createElement("div",null,le.const("Segment between"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[0]}),le.const(" "),le.const("and"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[1]}));case __dcg_shared_module_exports__['ia']:return le.createElement("div",null,le.const("Ray from"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[0]}),le.const(" "),le.const("through"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[1]}));case __dcg_shared_module_exports__['ea']:return le.createElement("div",null,le.const("Arc from"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[0]}),le.const(" "),le.const("to"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[2]}),le.const(" "),le.const("through"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[1]}));case __dcg_shared_module_exports__['ga']:return this.call()==="parallel"?le.createElement("div",null,le.const("Parallel to"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[0]}),le.const(" "),le.const("passing through"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[1]})):this.call()==="perpendicular"?le.createElement("div",null,le.const("Perpendicuar to"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[0]}),le.const(" "),le.const("passing through"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[1]})):le.createElement("div",null,le.const("Line through"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[0]}),le.const(" "),le.const("and"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[1]}));case __dcg_shared_module_exports__['ca']:return le.createElement("div",null,le.const("Circle from"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[0]}),le.const(" "),le.const("through"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[1]}));case __dcg_shared_module_exports__['ka']:case __dcg_shared_module_exports__['ma']:return this.getParents().length===1&&((r=this.getGeometry())!=null&&r.listAccess)?le.createElement("div",null,()=>e===__dcg_shared_module_exports__['ma']?"Directed ":"",le.const("Angle "),()=>{var i;return(i=this.getGeometry())==null?void 0:i.listAccess},le.const(" of"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[0]})):le.createElement("div",null,()=>e===__dcg_shared_module_exports__['ma']?"Directed ":"",le.const("Angle at"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[1]}),le.const(" "),le.const("from"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[0]}),le.const(" "),le.const("to"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[2]}));case __dcg_shared_module_exports__['oa']:case __dcg_shared_module_exports__['pa']:return this.call()==="translation"?le.createElement("div",null,le.const("Translation from"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[0]}),le.const(" "),le.const("to"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[1]})):this.call()==="reflection"?le.createElement("div",null,le.const("Reflection over"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[0]})):this.call()==="dilation"?le.createElement("div",null,le.const("Dilation at"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[0]}),le.const(" by "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getRawParentLatex(1)})):this.call()==="rotation"?le.createElement("div",null,le.const("Rotation around"),le.const(" "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getParents()[0]}),le.const(" by "),le.createElement(br,{controller:this.props.controller,latex:()=>this.getRawParentLatex(1)})):le.createElement("div",null,le.const("Unknown transformation: "),()=>this.call());default:return le.createElement("span",null,le.const("Object Description coming soon!"))}})}getParents(){let e=this.getGeometry();return!e||!e.call?[]:e&&e.call?e.call.parents.map(r=>__dcg_shared_module_exports__['Xa'].geoParentToLatex(r)):[]}getRawParentLatex(e){var a;var r=(a=this.props.model())==null?void 0:a.latex;if(!r)return"";let n=__dcg_shared_module_exports__['Ub'](r)._expression;if(!n)return"";let o=n.args[e];return!o||!o.getInputString?"":o.getInputString()||""}getGeometry(){let e=this.props.model();if(e)return e.formula.geometry}isTransformationApply(e){var o,a;if(!e||!e.call||e.call.symbol!=="apply")return!1;let r=(o=e.call.parents[0])==null?void 0:o[0];if(r===void 0)return!1;let i=this.controller.getItemsByIdentifier(r);return i.length!==1?!1:((a=i[0].formula.typed_constant_value)==null?void 0:a.valueType)===__dcg_shared_module_exports__['oa']}getObjectType(){let e=this.getGeometry();return e!=null&&e.assignmentRhsReference?"copy":this.isTransformationApply(e)?"apply":e&&e.valueType}};var bv=__dcg_shared_module_exports__['i'](ne());var yv=class extends bv.Class{init(){this.controller=this.props.controller(),this.cacheSelectedColor()}template(){return bv.createElement(Qo,{controller:this.props.controller,colorLatex:()=>this.colorLatex,selectedColor:()=>this.selectedColor,onColorSelected:this.bindFn(this.onColorSelected),onCustomColorSelected:this.bindFn(this.onCustomColorSelected),hideCustomColors:this.const(!1)})}onCustomColorSelected(e){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"colorLatex",value:e}})}cacheSelectedColor(){let e=__dcg_shared_module_exports__['m'](this.controller.getAllSelectedItems(),r=>r.type==="expression");if(e.length===0){this.selectedColor="",this.colorLatex="";return}this.selectedColor=rs(e[0]),this.colorLatex=e[0].colorLatex;for(let r=1;r<e.length;r++)if(this.selectedColor!==rs(e[r])||this.colorLatex!==e[r].colorLatex){this.selectedColor="",this.colorLatex="";return}}willUpdate(){this.cacheSelectedColor()}onColorSelected(e){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"color",value:e}})}getFirstSelectedExpression(){var e=this.controller.getAllSelectedItems();for(let r of e)if(r.type==="expression")return r}};var{If:ih}=xr.Components,xv=class extends xr.Class{init(){this.controller=this.props.controller(),this.cacheSectionValues()}willUpdate(){this.cacheSectionValues()}template(){return xr.createElement("div",{class:()=>({"dcg-generic-options-menu":!0,"dcg-options-menu":!0,"dcg-multi-select-options-menu":!0}),role:xr.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-options-menu")},xr.createElement("div",{class:xr.const("dcg-options-menu-section")},xr.createElement(ih,{predicate:()=>this.controller.getAllSelectedItems().length===1},()=>xr.createElement("div",{class:xr.const("dcg-selected-objects-header")},xr.createElement(rh,{controller:this.props.controller,model:()=>{let e=this.controller.getAllSelectedItems();if(e.length!==1)return;let r=e[0];if(!(!r||r.type!=="expression"))return r}}))),xr.createElement("div",{class:xr.const("dcg-multi-select-color-picker")},xr.createElement(yv,{controller:this.props.controller})),xr.createElement(ih,{predicate:()=>this.sectionValues.showPointLabels!==void 0},()=>xr.createElement("div",{class:xr.const("dcg-checkbox-section")},xr.createElement(kt,{checked:()=>!!this.sectionValues.showPointLabels,onChange:this.bindFn(this.onShowPointLabelChanged)},xr.const("Label Points")))),xr.createElement(ih,{predicate:()=>this.sectionValues.singleLabelableExpressionModel!==void 0},()=>xr.createElement("div",{class:xr.const("dcg-checkbox-section")},xr.createElement(Vd,{controller:this.props.controller,model:()=>this.sectionValues.singleLabelableExpressionModel,useSmartPointLabeling:()=>this.sectionValues.draggableFreePoint!==void 0}))),xr.createElement(ih,{predicate:()=>this.sectionValues.draggableFreePoint!==void 0},()=>xr.createElement("div",{class:xr.const("dcg-checkbox-section")},xr.createElement(kt,{checked:()=>!!this.sectionValues.draggableFreePoint,onChange:this.bindFn(this.onDraggableFreePointChanged)},xr.const("Draggable")))),xr.createElement(ih,{predicate:()=>this.sectionValues.arrowMode!==void 0},()=>xr.createElement("div",null,xr.const("arrowMode: "),this.sectionValues.arrowMode)),xr.createElement(ih,{predicate:()=>this.controller.getGraphSettings().config.expressions},()=>xr.createElement(pv,{controller:this.props.controller}))))}onShowPointLabelChanged(){this.controller.dispatch({type:"toggle-label-for-all-selected-points"})}onDraggableFreePointChanged(e){this.controller.dispatch({type:"update-all-selected-items",update:{prop:"dragMode",value:e?"AUTO":"NONE"}})}cacheSectionValues(){this.sectionValues=this.computeSectionValues()}computeSectionValues(){var o;let e={showPointLabels:[],singleLabelableExpressionModel:[],draggableFreePoint:[],arrowMode:[]},r=this.controller.getAllSelectedItems();for(let a of r){if(a.type!=="expression")return{};let s=(o=a.formula.geometry)==null?void 0:o.valueType;if(s===void 0)return{};if(__dcg_shared_module_exports__['sa'](s)&&(s=__dcg_shared_module_exports__['ta'](s)),!__dcg_shared_module_exports__['ua'](s))return{};switch(s){case __dcg_shared_module_exports__['S']:e.showPointLabels.push(a.showLabel),e.singleLabelableExpressionModel.push(a),e.draggableFreePoint.push(a.dragMode!=="NONE");break;case __dcg_shared_module_exports__['_']:break;case __dcg_shared_module_exports__['ea']:e.arrowMode.push(a.arrowMode);break;case __dcg_shared_module_exports__['ca']:break;case __dcg_shared_module_exports__['ga']:break;case __dcg_shared_module_exports__['ia']:break;case __dcg_shared_module_exports__['aa']:e.singleLabelableExpressionModel.push(a),e.arrowMode.push(a.arrowMode);break;case __dcg_shared_module_exports__['ka']:case __dcg_shared_module_exports__['ma']:e.singleLabelableExpressionModel.push(a);break;case __dcg_shared_module_exports__['oa']:break;default:return s}}let i={},n=r.length;for(let a in e){let s=a;switch(s){case"singleLabelableExpressionModel":{let c=e[s];n===1&&c.length===1&&(i[s]=c[0])}break;case"showPointLabels":{let c=e[s];c.length>0&&n>1&&(i[s]=__dcg_shared_module_exports__['n'](c,u=>!!u))}break;case"draggableFreePoint":{let c=e[s];c.length===n&&(i[s]=__dcg_shared_module_exports__['o'](c))}break;case"arrowMode":break;default:return s}}return i}willUnmount(){ge(this.controller.s("graphing-calculator-narration-options-menu-closed"))}didMount(){ge(this.controller.s("graphing-calculator-narration-options-menu-open"))}};var qr=__dcg_shared_module_exports__['i'](ne());var vv=__dcg_shared_module_exports__['i'](ne());function QO(t){return t.uncommitted?"#ccc":!t.selected&&!t.hovered&&ZO(t)===1?__dcg_shared_module_exports__['dc'](t.color,.2):t.color}function ZO(t){let e=.6;return t.hidden?t.selected?e=.4:e=.25:t.selected||t.isPoint?e=1:t.hovered&&(e=.8),t.isTransparentObject&&(e*=.3),e}function H8(t){return t.hidden?t.isPoint?0:t.selected?.3:.2:t.selected||t.isPoint||t.hovered?1:.7}function e_(t,e){if(t=t.replace(/#/,""),t.length===3)var r=parseInt(t.slice(0,1)+t.slice(0,1),16),i=parseInt(t.slice(1,2)+t.slice(1,2),16),n=parseInt(t.slice(2,3)+t.slice(2,3),16);else if(t.length===6)var r=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),n=parseInt(t.slice(4,6),16);else var r=0,i=0,n=0;return`rgba(${r}, ${i}, ${n}, ${e})`}function Om(t){return e_(QO(t),H8(t))}function wv(t){return e_(QO(t),ZO(t))}function r_(t,e,r){t.save();for(let i of r)switch(i.type){case"point":{let n;!i.color||i.color==="dark"?n=wv({isPoint:!0,color:e.point,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1}):i.color==="light"?n=__dcg_shared_module_exports__['dc'](e.point,.7):n=i.color;let o;switch(i.size){case"small":o=5;break;case"large":o=10;break;case"medium":default:o=5;break}i.hollow?(t.lineWidth=2,t.strokeStyle=n,t.beginPath(),t.arc(i.x,i.y,o-1,0,2*Math.PI),t.stroke()):(t.fillStyle=n,t.beginPath(),t.arc(i.x,i.y,o,0,2*Math.PI),t.fill())}break;case"circle":{let n;!i.color||i.color==="dark"?n=Om({isPoint:!1,color:e.circle,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1}):i.color==="light"?n=__dcg_shared_module_exports__['dc'](e.circle,.7):n=i.color;let o;switch(i.lineWidth){case"small":o=2;break;case"large":o=7;break;case"medium":default:o=4;break}t.lineWidth=o,t.strokeStyle=n,t.beginPath(),t.arc(i.x,i.y,i.radius,0,2*Math.PI),t.stroke()}break;case"arc":{let n;!i.color||i.color==="dark"?n=Om({isPoint:!1,color:e.circle,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1}):i.color==="light"?n=__dcg_shared_module_exports__['dc'](e.circle,.7):n=i.color;let o;switch(i.lineWidth){case"small":o=2;break;case"large":o=7;break;case"medium":default:o=4;break}t.lineWidth=o,t.strokeStyle=n,t.beginPath(),t.arc(i.x,i.y,i.radius,i.startAngle,i.endAngle),t.stroke()}break;case"stroked-path":{let n;!i.color||i.color==="dark"?n=Om({isPoint:!1,color:e.line,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1}):i.color==="light"?n=__dcg_shared_module_exports__['dc'](e.line,.7):n=i.color;let o=i.path,a;switch(i.lineWidth){case"small":a=1;break;case"large":a=5;break;case"medium":default:a=3;break}t.lineCap="round",t.lineJoin="round",t.strokeStyle=n,t.lineWidth=a,t.beginPath(),t.moveTo(o[0],o[1]);for(let s=2;s<o.length;s+=2)t.lineTo(o[s],o[s+1]);if(i.arrow){let s=[],l=o.length-1;z8(s,o[l-3],o[l-2],o[l-1],o[l],a/2+9.5);for(let c=0;c<s.length;c+=2)t.lineTo(s[c],s[c+1])}t.stroke()}break;case"filled-polygon":{let n;i.color?n=i.color:n=wv({isPoint:!1,color:e.polygon,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1,isTransparentObject:!0});let o=i.path;t.fillStyle=n,t.beginPath(),t.moveTo(o[0],o[1]);for(let a=2;a<o.length;a+=2)t.lineTo(o[a],o[a+1]);t.fill()}break;case"angle":{let n=Om({isPoint:!1,color:e.angle,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1,isTransparentObject:!0}),o=wv({isPoint:!1,color:e.angle,uncommitted:!1,featured:!1,hidden:!1,hovered:!1,projectorMode:!1,isTransparentObject:!0});$8(t,{type:"angle-indicator",lineWidth:4,strokeStyle:n,fillStyle:o,isRightAngle:!1,x:i.x,y:i.y,isDirected:i.isDirected,radius:i.radius,startAngle:i.startAngle,deltaAngle:i.deltaAngle})}break;default:return i}t.restore()}function $8(t,e){t.beginPath(),t_(t,e),t.lineTo(e.x,e.y),t.lineTo(e.x+e.radius*Math.cos(e.startAngle),e.y+e.radius*Math.sin(e.startAngle)),e.isDirected||(t.fillStyle=e.fillStyle,t.fill()),t.strokeStyle=e.strokeStyle,t.lineWidth=e.lineWidth,t.beginPath(),t_(t,e),t.stroke()}function t_(t,e){let r=e.startAngle+e.deltaAngle;if(e.isRightAngle){let i=e.radius*Math.cos(e.startAngle),n=e.radius*Math.cos(r),o=e.radius*Math.sin(e.startAngle),a=e.radius*Math.sin(r);t.moveTo(e.x+i,e.y+o),t.lineTo(e.x+i+n,e.y+o+a),t.lineTo(e.x+n,e.y+a)}else t.arc(e.x,e.y,e.radius,e.startAngle,r)}function z8(t,e,r,i,n,o=12){let a=Math.atan2(n-r,i-e),s=i-o*Math.cos(a-Math.PI/9),l=n-o*Math.sin(a-Math.PI/9),c=i-o*Math.cos(a+Math.PI/9),u=n-o*Math.sin(a+Math.PI/9),h=i-(o-2)*Math.cos(a-Math.PI/18),p=n-(o-2)*Math.sin(a-Math.PI/18),g=i-(o-2)*Math.cos(a+Math.PI/18),y=n-(o-2)*Math.sin(a+Math.PI/18);t.push(s,l,c,u,i,n,h,p,g,y,i,n)}var Bc=class extends vv.Class{template(){return vv.createElement("canvas",{didMount:this.bindFn(this.didMountCanvas),width:()=>this.props.width(),height:()=>this.props.height(),style:()=>({width:this.props.width()/2+"px",height:this.props.height()/2+"px"})})}didMountCanvas(e){this.canvas=e,this.redraw()}didUpdate(){this.redraw()}redraw(){let e=this.props.instructions()||[],r=this.props.model().getNonObjectsState().ui.colors;if(__dcg_shared_module_exports__['E'](e,this.lastInstructions)&&__dcg_shared_module_exports__['E'](r,this.lastColors))return;this.lastInstructions=e,this.lastColors=r;let i=this.canvas.getContext("2d");i.clearRect(0,0,i.canvas.width,i.canvas.height),r_(i,r,e)}};var{Each:i_,If:W8}=qr.Components,Cv=class extends qr.Class{init(){this.controller=this.props.controller(),this.cacheExistingTransformations(),this.geoModel=this.controller.getGeoModel()}willUpdate(){this.cacheExistingTransformations()}template(){return qr.createElement("div",{class:()=>({"dcg-generic-options-menu":!0,"dcg-options-menu":!0,"dcg-multi-select-transformations-menu":!0}),role:qr.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-transformations-menu")},qr.createElement("div",{class:qr.const("dcg-transformation-header"),role:qr.const("heading"),"aria-level":qr.const("1")},()=>this.controller.s("graphing-calculator-label-new-transformation")),qr.createElement("div",{class:qr.const("dcg-new-transformations-container"),role:qr.const("group"),"aria-label":()=>this.controller.s("graphing-calculator-label-new-transformation")},i_(this.getTransformations,{item:e=>qr.createElement("div",{class:qr.const("dcg-new-transformation"),role:qr.const("button"),tabindex:qr.const("0"),onTap:r=>{this.controller.dispatch({type:"select-geo-tool",tool:e}),r.device==="keyboard"&&this.controller.dispatch({type:"set-focus-location",location:{type:"graph-paper"}})}},qr.createElement(Bc,{model:()=>this.controller.getGeoModel(),width:this.const(80),height:this.const(80),instructions:()=>this.geoModel.getIconInstructionsForTool(e)}),()=>this.getTransformationName(e))})),qr.createElement(W8,{predicate:()=>this.cachedExistingTransformations.length>0},()=>qr.createElement("div",{class:qr.const("dcg-transformation-header")},()=>this.controller.s("graphing-calculator-label-recent-transformations"))),qr.createElement("div",{role:qr.const("group"),"aria-label":()=>this.controller.s("graphing-calculator-label-recent-transformations")},i_(()=>this.cachedExistingTransformations,{item:e=>qr.createElement("div",{class:qr.const("dcg-existing-transformation"),role:qr.const("button"),tabindex:qr.const("0"),onTap:()=>this.applyTransformation(e),onPointerOut:r=>this.onPointerOut(r,e),onPointerOver:r=>this.onPointerOver(r,e),willUnmount:()=>this.onImplicitMouseOut(e)},qr.createElement(rh,{controller:this.props.controller,model:()=>e})),key:e=>e.id})))}willUnmount(){ge(this.controller.s("graphing-calculator-narration-options-menu-closed"))}didMount(){ge(this.controller.s("graphing-calculator-narration-options-menu-open"))}computeExistingTransformations(){var r;let e=[];for(let i of this.controller.getAllItemModels()){if(i.type!=="expression"||!this.controller.isItemInGeoFolder(i.id))continue;let n=(r=i.formula.geometry)==null?void 0:r.call;n&&Fp(n.symbol)&&e.push(i)}return e.reverse()}cacheExistingTransformations(){this.cachedExistingTransformations=this.computeExistingTransformations()}getTransformations(){return["translation","reflection","dilation","rotation"]}getTransformationName(e){switch(e){case"dilation":return this.controller.raw("Dilation");case"reflection":return this.controller.raw("Reflection");case"rotation":return this.controller.raw("Rotation");case"translation":return this.controller.raw("Translation")}}onPointerOver(e,r){if(e.pointerType!=="mouse")return;let i=Xu(r.latex);i&&(this.currentlyActiveTokenId=i,this.controller.dispatch({type:"set-active-token",id:this.currentlyActiveTokenId,style:"hovered"}))}onPointerOut(e,r){if(e.pointerType!=="mouse")return;let i=Xu(r.latex);i&&this.currentlyActiveTokenId&&this.currentlyActiveTokenId===i&&(this.controller.dispatch({type:"unset-active-token",id:this.currentlyActiveTokenId,style:"hovered"}),this.currentlyActiveTokenId=void 0)}onImplicitMouseOut(e){let r=Xu(e.latex);r&&this.currentlyActiveTokenId&&this.currentlyActiveTokenId===r&&this.controller.runAfterDispatch(()=>{let i=this.currentlyActiveTokenId;i&&(this.currentlyActiveTokenId=void 0,this.controller.dispatch({type:"unset-active-token",id:i,style:"hovered"}))})}applyTransformation(e){if(!e.formula.assignment)return;let r=__dcg_shared_module_exports__['Ta'](e.formula.assignment);this.controller.dispatch({type:"apply-transformation-to-selected",assignmentLatex:r})}};var Go=__dcg_shared_module_exports__['i'](ne());var{For:j8}=Go.Components,Sv=class extends Go.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return Go.createElement("div",{class:()=>({"dcg-table-column-menu":!0,"dcg-options-menu":!0}),role:Go.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-options-menu"),didMount:()=>{ge(this.controller.s("graphing-calculator-narration-options-menu-open"))},didUnmount:()=>{ge(this.controller.s("graphing-calculator-narration-options-menu-closed"))}},Go.createElement(j8,{each:this.bindFn(this.getSections)},Go.createElement("div",null,e=>{switch(e){case"points":return Go.createElement(Xp,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{isOpen:()=>this.isSectionOpen("points"),isFirstOpenSection:()=>this.isFirstOpenSection("points")}));case"drag":return Go.createElement(Zp,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{isOpen:()=>this.isSectionOpen("drag"),isFirstOpenSection:()=>this.isFirstOpenSection("drag")}));case"lines":return Go.createElement(Wp,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{isOpen:()=>this.isSectionOpen("lines"),isFirstOpenSection:()=>this.isFirstOpenSection("lines")}))}})),Go.createElement("div",{class:Go.const("dcg-triangle")}))}getSections(){return this.model.draggable?["points","lines","drag"]:["points","lines"]}isFirstOpenSection(e){let r=this.getSections();for(let i of r){if(i===e)return this.isSectionOpen(e);if(this.isSectionOpen(i))return!1}return!1}isSectionOpen(e){switch(e){case"drag":return this.model.dragMode!=="NONE";case"lines":return!!this.model.lines;case"points":return!!this.model.points}}};var $t=__dcg_shared_module_exports__['i'](ne());var{For:Y8,If:Dk,Textarea:J8}=$t.Components,Ev=class extends $t.Class{template(){return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,$t.createElement("div",{class:$t.const("dcg-image-options-menu dcg-options-menu")},$t.createElement("div",{class:$t.const("dcg-triangle")}),$t.createElement("div",{class:$t.const("dcg-opacities-menu dcg-dividing-line-after")},$t.createElement("div",{role:$t.const("heading"),"aria-level":$t.const("2"),class:$t.const("dcg-title")},()=>this.controller.s("graphing-calculator-heading-image-opacity")),$t.createElement(Y8,{each:()=>this.controller.getImageOpacities()},$t.createElement("div",{class:$t.const("dcg-opacities-menu-flex"),role:$t.const("group"),"aria-label":()=>this.controller.s("graphing-calculator-heading-image-opacity")},e=>$t.createElement("span",{class:$t.const("dcg-opacity-option"),role:$t.const("button"),tabindex:$t.const(0),"aria-label":()=>`opacity: ${e}`,"aria-pressed":()=>this.isOpacitySelected(e),handleevent:$t.const("true"),onTap:()=>this.onSelectOpacity(e)},$t.createElement(Li,{backgroundImage:this.bindFn(this.getBackgroundImage),iconType:()=>this.isOpacitySelected(e)?"check":"none",backgroundOpacity:()=>parseFloat(e)}))))),$t.createElement("div",{class:$t.const("dcg-styles-div dcg-options-menu-section")},$t.createElement("div",{class:$t.const("dcg-styles-menu"),role:$t.const("group"),"aria-label":()=>this.controller.s("graphing-calculator-narration-image-styles")},$t.createElement(kt,{checked:()=>!this.model.foreground,onChange:this.bindFn(this.onToggleForeground)},()=>this.controller.s("graphing-calculator-button-place-image-behind-graphs"))),$t.createElement(Dk,{predicate:()=>this.shouldShowDraggableCheckbox()},()=>$t.createElement("div",{class:$t.const("dcg-draggable-checkbox-container")},$t.createElement(kt,{checked:()=>Js(this.model),onChange:this.bindFn(this.onToggleDraggable)},()=>this.controller.s("graphing-calculator-button-draggable")))),$t.createElement(Dk,{predicate:this.bindFn(this.shouldShowClickable)},()=>$t.createElement("div",{class:$t.const("dcg-clickable-image-controls")},$t.createElement(Yp,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{isOpen:()=>!!this.model.clickableInfo.enabled,isFirstOpenSection:this.const(!1)})))),$t.createElement(Dk,{predicate:()=>Js(this.model)||!!this.model.clickableInfo.enabled},()=>$t.createElement(J8,{placeholder:()=>this.controller.s("graphing-calculator-text-add-screen-reader-label-placeholder"),value:()=>this.model.description,onInput:e=>this.controller.dispatch({type:"set-item-description",id:this.model.id,description:e})}))))}onToggleDraggable(){Au(this.model)?this.controller.dispatch({type:"set-image-draggable",id:this.id,draggable:!this.model.draggable}):this.makeDraggable()}onToggleForeground(e){this.controller.dispatch({type:"set-image-in-foreground",id:this.id,foreground:!e})}onSelectOpacity(e){this.controller.dispatch({type:"set-image-opacity",id:this.id,opacity:e})}isOpacitySelected(e){return this.model.opacity===e}getBackgroundImage(){return this.model.image_url===this.lastURL?this.lastEncodedURL:(this.lastURL=this.model.image_url,this.lastEncodedURL='url("'+jw(this.model.image_url)+'")',this.lastEncodedURL)}shouldShowClickable(){return this.controller.areActionsEnabled()}makeDraggable(){this.controller.dispatch({type:"convert-image-to-draggable",id:this.model.id})}shouldShowDraggableCheckbox(){var e=Au(this.model);return e?WV(e):BG(this.model)}};var di=__dcg_shared_module_exports__['i'](ne());var wn=__dcg_shared_module_exports__['i'](ne());var Dv=[.05,.1,.15,.2,.35,.5,.75,1,1.5,2,3.5,5,7.5,10,15,20],X8=__dcg_shared_module_exports__['s'](Dv),Q8=__dcg_shared_module_exports__['r'](Dv),_m=class extends wn.Class{init(){this.controller=this.props.controller(),this.model=this.props.model()}template(){return wn.createElement("div",{class:wn.const("dcg-slider-speed-container dcg-do-not-blur"),handleEvent:wn.const("true")},wn.createElement("span",{class:()=>({"dcg-action-slower":!0,"dcg-disabled":this.isSlowerDisabled()}),onTap:()=>this.animateSlower(),role:wn.const("button"),"aria-label":()=>this.getSlowerAriaLabel(),tabindex:()=>this.isSlowerDisabled()?-1:0,"aria-disabled":()=>this.isSlowerDisabled()},wn.createElement("i",{class:wn.const("dcg-icon-show"),"aria-hidden":wn.const("true")})),wn.createElement("span",{class:wn.const("dcg-variable-speed")},this.bindFn(this.computeSpeed),wn.const("x")),wn.createElement("span",{class:()=>({"dcg-action-faster":!0,"dcg-disabled":this.isFasterDisabled()}),onTap:()=>this.animateFaster(),role:wn.const("button"),"aria-label":()=>this.getFasterAriaLabel(),tabindex:()=>this.isFasterDisabled()?-1:0,"aria-disabled":()=>this.isFasterDisabled()},wn.createElement("i",{class:wn.const("dcg-icon-show"),"aria-hidden":wn.const("true")})))}computeSpeed(){var e=__dcg_shared_module_exports__['vc']/this.model.slider.animationPeriod;return e=Number(e.toFixed(3)),e}isSlowerDisabled(){return X8>=this.computeSpeed()}isFasterDisabled(){return Q8<=this.computeSpeed()}animateSlower(){var e=this.computeSpeed(),r=__dcg_shared_module_exports__['m'](Dv,function(i){return i<e});r.length!==0&&this.setPeriodFromSpeed(__dcg_shared_module_exports__['r'](r))}animateFaster(){var e=this.computeSpeed(),r=__dcg_shared_module_exports__['m'](Dv,function(i){return i>e});r.length!==0&&this.setPeriodFromSpeed(__dcg_shared_module_exports__['s'](r))}setPeriodFromSpeed(e){var r=__dcg_shared_module_exports__['vc']/e;this.controller.dispatch({type:"set-slider-animationperiod",id:this.model.id,animationPeriod:r}),ge(this.controller.s("graphing-calculator-narration-slider-animating-at-speed",{speed:e+""}))}getSlowerAriaLabel(){return this.controller.s("graphing-calculator-narration-slider-animate-slower")}getFasterAriaLabel(){return this.controller.s("graphing-calculator-narration-slider-animate-faster")}};var kv=class extends di.Class{init(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id}template(){return di.createElement("div",{class:di.const("dcg-slider-options-view dcg-options-menu")},di.createElement("div",{class:di.const("dcg-triangle")}),di.createElement("div",{class:di.const("dcg-slider-menu")},di.createElement("div",{role:di.const("group"),"aria-label":()=>this.controller.s("graphing-calculator-heading-slider-animation-mode")},di.createElement("div",{role:di.const("heading"),"aria-level":di.const("2"),class:di.const("dcg-title")},()=>this.controller.s("graphing-calculator-heading-slider-animation-mode")),di.createElement(Oi,{ariaGroupLabel:()=>this.controller.s("graphing-calculator-heading-slider-animation-mode"),staticConfig:this.bindFn(this.getAnimationOptions),theme:this.const("mini")}))),di.createElement("div",{class:di.const("dcg-slider-menu dcg-slider-speed-menu"),role:di.const("group"),"aria-label":()=>this.controller.s("graphing-calculator-heading-slider-speed")},di.createElement("div",{role:di.const("heading"),"aria-level":di.const("2"),class:di.const("dcg-title")},()=>this.controller.s("graphing-calculator-heading-slider-speed")),di.createElement("div",{class:di.const("dcg-slider-speed-container")},di.createElement(_m,__dcg_shared_module_exports__['b']({},this.props)))))}getAnimationOptions(){return["LOOP_FORWARD_REVERSE","LOOP_FORWARD","PLAY_ONCE","PLAY_INDEFINITELY"].map((r,i)=>({key:r,icon:()=>__dcg_shared_module_exports__['P'](r),tooltip:()=>this.getTooltip(r),tooltipGravity:()=>i===0?"se":"s",selected:()=>this.isSelected(r),onSelect:()=>{this.props.controller().dispatch({type:"set-slider-loopmode",id:this.props.model().id,loopMode:r})}}))}getTooltip(e){let r=this.controller.s;switch(e){case"LOOP_FORWARD_REVERSE":return r("graphing-calculator-narration-slider-loop-forwards-and-backwards");case"LOOP_FORWARD":return r("graphing-calculator-narration-slider-repeat-one-direction");case"PLAY_ONCE":return r("graphing-calculator-narration-slider-play-once");case"PLAY_INDEFINITELY":return r("graphing-calculator-narration-slider-play-indefinitely")}}isSelected(e){return this.model.slider.loopMode===e}};var Zt=__dcg_shared_module_exports__['i'](ne());at();var{If:Z8,For:n_}=Zt.Components,Iv=class extends Zt.Class{init(){this.controller=this.props.controller(),this.geoModel=this.controller.getGeoModel()}template(){return Zt.createElement("div",{role:Zt.const("toolbar"),"aria-label":()=>this.controller.s("graphing-calculator-label-geometry-tools"),class:Zt.const("dcg-geo-basic-tools dcg-animate-in-after-initial-load")},Zt.createElement(n_,{each:()=>this.controller.getGeoTools(),key:e=>e.key},Zt.createElement("span",{class:Zt.const("dcg-icon-row")},e=>Zt.createElement("span",{class:()=>({"dcg-icon-container":!0,"dcg-split-btn":!!e.dropdown,"dcg-selected":this.selectedTool()===e.key}),"dcg-geo-tool":this.const(e.key),onKeydown:r=>this.handleToolbarKeydown(r,e)},Zt.createElement("span",{role:Zt.const("button"),tabindex:()=>this.selectedTool()===e.key?0:-1,"aria-label":()=>this.geoModel.getDisplayNameForTool(e.key),"aria-haspopup":()=>!!e.dropdown,"aria-pressed":()=>this.selectedTool()===e.key,class:()=>({"dcg-basic-tool-btn":!0,"dcg-icon":!0}),onTap:r=>this.chooseTool(r,e),onLongHold:r=>this.openMenuFromLongHold(r,e),manageFocus:this.const(ut({controller:this.controller,location:{type:"geo-basic-tool",tool:e.key}}))},Zt.createElement(Bc,{model:()=>this.geoModel,width:this.const(100),height:this.const(100),instructions:()=>this.geoModel.getIconInstructionsForTool(e.key)})),Zt.createElement(Z8,{predicate:()=>!!e.dropdown},()=>Zt.createElement(kk,{geoModel:()=>this.geoModel,spec:()=>e,controller:this.props.controller}))))))}handleToolbarKeydown(e,r){let i=Le(e);if(i!=="Up"&&i!=="Down"&&i!=="Left"&&i!=="Right"&&i!=="Home"&&i!=="End")return;e.preventDefault(),e.stopPropagation();let n=this.controller.getFocusLocation();if(!n)return;let o,a=this.controller.getGeoTools(),s=a.indexOf(r),l=a[s];if(!l)return;let c=l.dropdown||[],u;if(i==="Home")u=a[0],o={type:"geo-basic-tool",tool:u.key},this.controller.dispatch({type:"select-geo-tool",tool:u.key});else if(i==="End")u=a[a.length-1],o={type:"geo-basic-tool",tool:u.key},this.controller.dispatch({type:"select-geo-tool",tool:u.key});else if(i==="Left")n.type==="geo-basic-tool-dropdown"&&c.length>0?o={type:"geo-basic-tool",tool:r.key}:s>0&&(u=a[Math.max(0,s-1)],o={type:"geo-basic-tool",tool:u.key},this.controller.dispatch({type:"select-geo-tool",tool:u.key}));else if(i==="Right"&&s<a.length-1)u=a[Math.min(s+1,a.length-1)],o={type:"geo-basic-tool",tool:u.key},this.controller.dispatch({type:"select-geo-tool",tool:u.key});else if(c.length>0){let h=c.indexOf(l.key);if(h===-1)return;let p="";i==="Up"?p=c[Math.max(0,h-1)]:i==="Down"&&(p=c[Math.min(h+1,c.length-1)]),p!==""&&(this.controller.dispatch({type:"select-geo-tool",tool:p}),o={type:"geo-basic-tool",tool:p})}o&&this.controller.dispatch({type:"set-focus-location",location:o})}selectedTool(){return this.controller.getActiveTool()}openDropdownMenu(e,r){r.dropdown&&this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"geo-tool-dropdown",guid:"geo-dropdown-"+r.dropdown[0],tools:r.dropdown,focusFirstOption:e.device==="keyboard"}})}openMenuFromLongHold(e,r){this.controller.dispatch({type:"select-geo-tool",tool:r.key}),this.openDropdownMenu(e,r)}chooseTool(e,r){e.wasLongheld()||(this.controller.dispatch({type:"select-geo-tool",tool:r.key,focusGraphPaper:e.device==="keyboard"}),e.shiftKey&&this.openDropdownMenu(e,r))}},Mv=class extends Zt.Class{init(){this.controller=this.props.controller(),this.geoModel=this.controller.getGeoModel()}template(){return Zt.createElement("div",{class:()=>({"dcg-options-menu":!0,"dcg-select-tools-dropdown":!0}),role:Zt.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-narration-options-menu"),didMount:this.bindFn(this.didMountContainer)},Zt.createElement("div",{class:Zt.const("dcg-options-menu-section")},Zt.createElement(n_,{each:()=>this.props.tools()},Zt.createElement("div",null,e=>Zt.createElement("div",{role:Zt.const("button"),tabindex:Zt.const("0"),"aria-pressed":()=>this.controller.getActiveTool()===e,onTap:r=>this.chooseTool({tool:e,focusIcon:r.device==="keyboard"}),class:()=>({"dcg-dropdown-tool":!0,"dcg-selected-tool":this.controller.getActiveTool()===e}),manageFocus:this.const(ut({controller:this.controller,location:{type:"geo-basic-tool-menu-item",tool:e}}))},Zt.createElement(Bc,{model:()=>this.geoModel,width:this.const(100),height:this.const(100),instructions:()=>this.geoModel.getIconInstructionsForTool(e)}),Zt.createElement("span",null,()=>this.geoModel.getDisplayNameForTool(e)))))))}chooseTool(e){let r=this.props.controller();r.dispatch({type:"select-geo-tool",tool:e.tool}),e.focusIcon&&r.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool-dropdown",tool:this.props.tools()[0]}})}willUnmount(){ge(this.controller.s("graphing-calculator-narration-options-menu-closed"))}didMountContainer(e){this.$containerElt=V(e),ge(this.controller.s("graphing-calculator-narration-options-menu-open"))}},kk=class extends Zt.Class{init(){this.controller=this.props.controller(),this.geoModel=this.props.geoModel()}template(){return Zt.createElement("span",{style:Zt.const("position:relative;"),class:Zt.const("dcg-tool-dropdown"),role:Zt.const("button"),tabindex:Zt.const("-1"),"aria-label":()=>this.controller.s("graphing-calculator-label-geometry-tool-options",{tool:this.geoModel.getDisplayNameForTool(this.props.spec().key)}),"aria-expanded":this.bindFn(this.getMenuOpen),onTap:this.bindFn(this.handleOnTap),manageFocus:this.const(ut({controller:this.props.controller(),location:{type:"geo-basic-tool-dropdown",tool:this.getPrimaryToolName()}})),"dcg-open-menu-guid":this.bindFn(this.getMenuGUID)},Zt.createElement("span",{class:Zt.const("dcg-dropdown-icon")},Zt.createElement("i",{class:Zt.const("dcg-icon-caret-down")})))}getMenuGUID(){var e=this.props.spec().dropdown||[];return"geo-dropdown-"+e[0]}getMenuOpen(){let e=this.controller.getOpenItemMenu();return e!==void 0&&e.type==="geo-tool-dropdown"&&e.guid===this.getMenuGUID()}handleOnTap(e){let{key:r,dropdown:i=[]}=this.props.spec(),n=e.device==="keyboard";this.controller.getActiveTool()!==r&&this.controller.dispatch({type:"select-geo-tool",tool:r}),this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"geo-tool-dropdown",guid:this.getMenuGUID(),tools:i,focusFirstOption:n}})}getPrimaryToolName(){let e=this.props.spec().dropdown;return e!==void 0?e[0]:""}};var{Switch:e6}=Yr.Components,o_=':input, [role="textbox"], [tabindex="0"]:visible',Tv=class extends Yr.Class{init(){this.controller=this.props.controller()}template(){return Yr.createElement(e6,{key:this.bindFn(this.getActiveGuid)},()=>{let e=this.controller.getOpenItemMenu();return this.registeredChildRepositionCb=void 0,e?e.type==="expression"?Yr.createElement("div",{class:Yr.const("dcg-options-menu-container"),didMount:this.bindFn(this.didMountView),didUnmount:this.bindFn(this.didUnmountView)},Yr.createElement(eh,{controller:this.props.controller,model:()=>e.model,registerRepositionCb:i=>{this.registeredChildRepositionCb=i}})):e.type==="image"?Yr.createElement("div",{class:Yr.const("dcg-options-menu-container"),didMount:this.bindFn(this.didMountView),didUnmount:this.bindFn(this.didUnmountView)},Yr.createElement(Ev,{controller:this.props.controller,model:()=>e.model})):e.type==="table-column"?Yr.createElement("div",{class:Yr.const("dcg-options-menu-container"),didMount:this.bindFn(this.didMountView),didUnmount:this.bindFn(this.didUnmountView)},Yr.createElement(Sv,{controller:this.props.controller,model:()=>e.model})):e.type==="slider"?Yr.createElement("div",{class:Yr.const("dcg-options-menu-container"),didMount:this.bindFn(this.didMountView),didUnmount:this.bindFn(this.didUnmountView)},Yr.createElement(kv,{controller:this.props.controller,model:()=>e.model})):e.type==="multi-select-more"?Yr.createElement("div",{class:Yr.const("dcg-options-menu-container"),didMount:this.bindFn(this.didMountView),didUnmount:this.bindFn(this.didUnmountView)},Yr.createElement(xv,{controller:this.props.controller,registerRepositionCb:i=>{this.registeredChildRepositionCb=i}})):e.type==="multi-select-transformations"?Yr.createElement("div",{class:Yr.const("dcg-options-menu-container"),didMount:this.bindFn(this.didMountView),didUnmount:this.bindFn(this.didUnmountView)},Yr.createElement(Cv,{controller:this.props.controller,registerRepositionCb:i=>{this.registeredChildRepositionCb=i}})):e.type==="geo-tool-dropdown"?Yr.createElement("div",{class:Yr.const("dcg-options-menu-container"),didMount:this.bindFn(this.didMountView),didUnmount:this.bindFn(this.didUnmountView)},Yr.createElement(Mv,{controller:this.props.controller,registerRepositionCb:i=>{this.registeredChildRepositionCb=i},tools:()=>e.tools})):e:Yr.createElement("span",null)})}getActiveGuid(){let e=this.controller.getOpenItemMenu();if(e)return e.guid}didMountView(e){this.guid=__dcg_shared_module_exports__['K']("dcg-item-settings-view"),this.openView=e,this.positionMenu(),this.moveFocusIfAppropriate(),V(document.body).on(`keydown.${this.guid}`,r=>{let i=Le(r);i===oo?(r.preventDefault(),r.stopPropagation(),this.focusMenuIcon(),this.hideOptions()):i==="Tab"&&!r.altKey&&!r.ctrlKey&&!r.metaKey&&(r.shiftKey?r.shiftKey&&(this.isIconModelFocused()?(r.preventDefault(),r.stopPropagation(),this.focusLastOption()):this.isFirstOptionViewFocused()?(r.preventDefault(),r.stopPropagation(),this.focusIcon()):this.focusAnywhere()):this.isIconModelFocused()?(r.preventDefault(),r.stopPropagation(),this.focusFirstOption()):this.isLastOptionViewFocused()?(r.preventDefault(),r.stopPropagation(),this.focusIcon()):this.focusAnywhere())}),requestAnimationFrame(()=>{var r;if(this.openView){let i=this.controller.getExppanelSelector();i&&((r=this.controller.getOpenMenuIcon())!=null&&r.closest(i).length)&&i.on("scroll."+this.guid,()=>{i.off("scroll."+this.guid),this.hideOptions()})}}),V(document.body).on(`dcg-tapstart.${this.guid}`,r=>{if(!this.openView)return;let i=V(r.target),n=this.controller.getOpenMenuIcon();if(!(n&&i.closest(n).length)){if(i.closest(this.openView).length){if(!i.is(o_))return;let{$first:o,$last:a}=this.getDOMTabStops();o!==void 0&&o.is(i)?this.focusFirstOption():a!==void 0&&a.is(i)?this.focusLastOption():!r.target.hasAttribute("dataLabelAttributeValue")&&r.target.getAttribute("dataLabelAttributeValue")!=="fill-opacity"&&this.focusAnywhere();return}i.closest(".dcg-keypad,.dcg-show-keypad-container").length||this.hideOptions()}})}didUnmountView(){V(document.body).off(`.${this.guid}`),this.openView=void 0}didUpdate(){this.positionMenu(),this.moveFocusIfAppropriate()}moveFocusIfAppropriate(){let{$first:e,$last:r}=this.getDOMTabStops();e===void 0||r===void 0||(this.shouldMoveFocusToFirstOption()?e.trigger("focus"):this.shouldMoveFocusToLastOption()&&r.trigger("focus"))}open(){return!!this.controller.getOpenItemMenu()}hideOptions(){if(!this.open())return;let e=this.controller.getFocusLocation(),r=this.controller.getOpenItemMenu();e&&r&&e.type==="expression-menu"&&"model"in r&&e.id===r.model.id&&this.controller.dispatch({type:"blur-focus-location",location:e}),this.controller.dispatch({type:"close-item-settings-menu"})}positionMenu(){let e=this.controller.getOpenMenuIcon();if(!e||!this.openView)return;var r=this.controller.find$(".dcg-container"),i=r[0].getBoundingClientRect();let n=e[0].getBoundingClientRect(),o={top:n.top-i.top,left:n.left-i.left},a=this.controller.computeMajorLayout(),s=a.list.top+a.list.height,l=a.keypad.top,u=Math.min(s,l)+i.top-n.top;V(this.openView).css({top:o.top+"px",left:o.left+"px",display:"block"}),this.registeredChildRepositionCb&&this.registeredChildRepositionCb(u)}focusMenuIcon(){let e=this.controller.getOpenItemMenu();if(e){if(e.type==="geo-tool-dropdown"){this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool-dropdown",tool:e.tools[0]}});return}else if(!("model"in e))return;this.controller.dispatch({type:"set-focus-location",location:{type:"expression-icon",id:e.model.id}})}}isIconModelFocused(){let e=this.controller.getOpenItemMenu();if(e===void 0)return!1;if(e.type==="slider")return this.controller.isFocusLocationFocused({type:"slider-animation-properties-icon",id:e.model.id});if(e.type==="image")return this.controller.isFocusLocationFocused({type:"image-icon",id:e.model.id});if(e.type==="table-column")return this.controller.isFocusLocationFocused({type:"table-icon",id:e.model.table.id,columnId:e.model.id});if(e.type==="geo-tool-dropdown")return this.controller.isFocusLocationFocused({type:"geo-basic-tool-dropdown",tool:e.tools[0]});if(e.type==="multi-select-more")return this.controller.isFocusLocationFocused({type:"multi-select-more-icon"});if(e.type==="multi-select-transformations")return this.controller.isFocusLocationFocused({type:"multi-select-transformations-icon"});var r=this.getModelForOpenMenu();if(r)return this.controller.isFocusLocationFocused({type:"expression-icon",id:r.id})}focusIcon(){this.controller.focusOpenMenuIcon()}isFirstOptionViewFocused(){let{$first:e}=this.getDOMTabStops();return e!==void 0&&e.is(":focus")}shouldMoveFocusToFirstOption(){let e=this.controller.getOpenItemMenu();if(e){if(e.type==="geo-tool-dropdown")return!this.isFirstOptionViewFocused()&&this.controller.isFocusLocationFocused({type:"geo-basic-tool-menu-item",tool:e.tools[0]});if(e.type==="multi-select-more"||e.type==="multi-select-transformations")return!this.isFirstOptionViewFocused()&&this.controller.isFocusLocationFocused({type:"generic-menu",where:"start"});var r=this.getModelForOpenMenu();if(r)return!this.isFirstOptionViewFocused()&&this.controller.isFocusLocationFocused({type:"expression-menu",id:r.id,location:"start"})}}focusFirstOption(){let e=this.controller.getOpenItemMenu();if(e){if(e.type==="geo-tool-dropdown"){this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool-menu-item",tool:e.tools[0]}});return}if(e.type==="multi-select-more"||e.type==="multi-select-transformations"){this.controller.dispatch({type:"set-focus-location",location:{type:"generic-menu",where:"start"}});return}var r=this.getModelForOpenMenu();r&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:r.id,location:"start"}})}}isLastOptionViewFocused(){let{$last:e}=this.getDOMTabStops();return e!==void 0&&e.is(":focus")}getModelForOpenMenu(){let e=this.controller.getOpenItemMenu();if(e&&"model"in e)return e.model}shouldMoveFocusToLastOption(){let e=this.controller.getOpenItemMenu();if(e){if(e.type==="geo-tool-dropdown")return!this.isLastOptionViewFocused()&&this.controller.isFocusLocationFocused({type:"geo-basic-tool-menu-item",tool:e.tools[e.tools.length-1]});if(e.type==="multi-select-more"||e.type==="multi-select-transformations")return!this.isLastOptionViewFocused()&&this.controller.isFocusLocationFocused({type:"generic-menu",where:"end"});var r=this.getModelForOpenMenu();if(r)return!this.isLastOptionViewFocused()&&this.controller.isFocusLocationFocused({type:"expression-menu",id:r.id,location:"end"})}}focusLastOption(){let e=this.controller.getOpenItemMenu();if(e){if(e.type==="geo-tool-dropdown"){this.controller.dispatch({type:"set-focus-location",location:{type:"geo-basic-tool-menu-item",tool:e.tools[e.tools.length-1]}});return}if(e.type==="multi-select-more"||e.type==="multi-select-transformations"){this.controller.dispatch({type:"set-focus-location",location:{type:"generic-menu",where:"end"}});return}var r=this.getModelForOpenMenu();r&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:r.id,location:"end"}})}}focusAnywhere(){let e=this.controller.getOpenItemMenu();if(e){if(e.type==="multi-select-more"||e.type==="multi-select-transformations"){this.controller.dispatch({type:"set-focus-location",location:{type:"generic-menu",where:"anywhere"}});return}var r=this.getModelForOpenMenu();r&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:r.id,location:"anywhere"}})}}getDOMTabStops(){if(this.openView===void 0)return{};let r=V(this.openView).find(o_),i=r.first(),n=r.last();return{$first:i,$last:n}}};var Mt=__dcg_shared_module_exports__['i'](ne());var a_=__dcg_shared_module_exports__['i'](ne());var Fi=class extends a_.Class{init(){this.controller=this.props.controller(),this.dispatch=this.controller.dispatch,this.s=this.controller.s}};Fi.uuid=xp();var sh=__dcg_shared_module_exports__['i'](ne());var tc=__dcg_shared_module_exports__['i'](ne()),er=class extends tc.Class{template(){return tc.createElement("div",{class:()=>({"dcg-keypad-btn-container":!0,"dcg-disabled":this.isDisabled()}),style:()=>({"flex-grow":this.getColSpan()})},tc.createElement("span",{role:tc.const("button"),class:this.bindFn(this.getClasses),"dcg-command":this.props.command,"aria-label":this.bindFn(this.getAriaLabel),"aria-disabled":this.bindFn(this.isDisabled),"aria-controls":this.props.ariaControls?this.props.ariaControls:this.const(void 0),"aria-expanded":this.props.ariaExpanded?this.bindFn(this.getAriaExpanded):this.const(void 0),onTap:()=>{this.isDisabled()||this.props.onTap()}},tc.createElement("span",{class:tc.const("dcg-keypad-btn-content")},this.children)))}getClasses(){let e={"dcg-keypad-btn":!0,"dcg-keypad-btn-active":this.isActive()},r=this.props.style();switch(r){case"default":e["dcg-btn-light-on-gray"]=!0;break;case"highlight":e["dcg-btn-dark-on-gray"]=!0;break;case"popover":e["dcg-btn-light-gray"]=!0;break;case"blue":e["dcg-btn-short-blue"]=!0;break;case"tall-blue":e["dcg-btn-tall-blue"]=!0;break;default:return r}return e}isActive(){return this.props.active?this.props.active():!1}getAriaLabel(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()}getColSpan(){if(this.props.colspan)return this.props.colspan()}isDisabled(){return this.props.disabled&&this.props.disabled()}getAriaExpanded(){return this.props.ariaExpanded?this.props.ariaExpanded():void 0}};var Q=__dcg_shared_module_exports__['i'](ne()),{IfElse:c_,If:s_,Switch:t6}=Q.Components;function or(t,e){return t===void 0?Q.const(e):typeof t=="function"?t:Q.const(t)}function nh(t){return(e,r,i={},n)=>Q.createElement(er,{command:Q.const(t.command||t.typedText||t.keys[0]),ariaLabel:()=>t.ariaLabelKey?n(t.ariaLabelKey):t.typedText||t.keys[0],colspan:or(i.colspan,1),style:()=>i.style||"default",onTap:()=>r({type:"keypad/type-text",text:t.typedText||t.keys[0]})},c_(()=>t.keys[0]==="{"||t.keys[0]==="[",{true:()=>Q.createElement("span",{class:Q.const("dcg-mq-math-mode"),style:Q.const("font-size: 120%")},Q.const(t.keys[0]),Q.const("\xA0"),Q.createElement("span",{style:Q.const("color: #999")},Q.const(t.keys[1]))),false:()=>Q.createElement("span",{class:Q.const("dcg-either-or-btn")},Q.createElement(ze,{config:Q.const({}),latex:Q.const(t.keys[0])}),Q.createElement("span",{style:Q.const("color: #999")},Q.createElement(ze,{config:Q.const({}),latex:Q.const(t.keys[1])})))}))}function oh(t){return(e,r,i={},n)=>Q.createElement(er,{command:Q.const(t.command||t.typedText||t.keys[1]),ariaLabel:()=>t.ariaLabelKey?n(t.ariaLabelKey):t.typedText||t.keys[0],colspan:or(i.colspan,1),style:or(i.style,"default"),onTap:()=>r({type:"keypad/type-text",text:t.typedText||t.keys[1]})},c_(()=>t.keys[1]==="}"||t.keys[1]==="]",{true:()=>Q.createElement("span",{class:Q.const("dcg-mq-math-mode"),style:Q.const("font-size: 120%")},Q.createElement("span",{style:Q.const("color: #999")},Q.const(t.keys[0])),Q.const("\xA0"),Q.const(t.keys[1])),false:()=>Q.createElement("span",null,Q.createElement("span",{style:Q.const("color: #999")},Q.createElement(ze,{config:Q.const({}),latex:Q.const(t.keys[0])})),Q.createElement(ze,{config:Q.const({}),latex:Q.const(t.keys[1])}))}))}function r6(t){return(e,r,i={},n)=>Q.createElement(er,{command:Q.const(t.command),ariaLabel:()=>t.ariaLabelKey?n(t.ariaLabelKey):e,colspan:or(i.colspan,1),style:()=>i.style||"default",onTap:()=>{r({type:"keypad/audio-trace",command:t.command})}},Q.createElement(s_,{predicate:Q.const(t.iconClass!==void 0)},()=>Q.createElement("span",{class:()=>({"dcg-button-icon":!0,"dcg-icon-only":t.contentKey===void 0})},Q.createElement("i",{class:Q.const(t.iconClass),"aria-hidden":Q.const("true")}))),Q.createElement(s_,{predicate:Q.const(t.contentKey!==void 0)},()=>Q.createElement("span",null,()=>n(t.contentKey)||e)))}function ke(t){return(e,r,i={},n)=>Q.createElement(er,{command:Q.const(t.command||e),ariaLabel:()=>t.ariaLabelKey?n(t.ariaLabelKey):e,colspan:or(i.colspan,1),style:()=>i.style||"default",onTap:()=>r({type:"keypad/type-text",text:t.typedText||e})},Q.createElement(ze,{config:Q.const({}),latex:Q.const(t.content||e)}))}function l_(t){return(e,r,i={},n)=>Q.createElement(er,{command:Q.const(t.command||e),ariaLabel:()=>t.ariaLabelKey?n(t.ariaLabelKey):e,colspan:or(i.colspan,1),style:()=>i.style||"default",onTap:()=>r({type:"keypad/type-text",text:t.typedText||e})},Q.createElement("span",{class:Q.const("dcg-mq-math-mode")},Q.const(t.content||e)))}function Qe(t){return(e,r,i={},n)=>Q.createElement(er,{command:Q.const(e),ariaLabel:()=>t.ariaLabelKey?n(t.ariaLabelKey):e,colspan:or(i.colspan,1),style:()=>i.style||"default",onTap:()=>r({type:"keypad/type-text",text:e+"("})},Q.createElement(t6,{key:()=>e.match(/^[a-z]{2,}$/)},o=>o?Q.createElement("span",{class:Q.const("dcg-mq-math-mode dcg-static-mathquill-view")},Q.createElement("span",{class:Q.const("dcg-mq-root-block")},Q.createElement("span",{class:Q.const("dcg-mq-operator-name")},()=>e))):Q.createElement(ze,{config:Q.const({}),latex:Q.const(e)})))}function Pn(t){return(e,r,i={},n)=>Q.createElement(er,{command:Q.const(t.command),ariaLabel:()=>t.ariaLabelKey?n(t.ariaLabelKey):t.command,colspan:or(i.colspan,1),style:()=>i.style||"default",onTap:()=>{r({type:"keypad/custom-command",command:t.command})}},Q.createElement(ze,{config:Q.const({}),latex:Q.const(t.content)}))}var i6={"{":l_({ariaLabelKey:"shared-calculator-narration-keypad-key-left-bracket"}),"}":l_({ariaLabelKey:"shared-calculator-narration-keypad-key-right-bracket"}),"(":ke({ariaLabelKey:"shared-calculator-narration-keypad-key-left-paren"}),")":ke({ariaLabelKey:"shared-calculator-narration-keypad-key-right-paren"}),sqrt:ke({content:"\\sqrt{}",ariaLabelKey:"shared-calculator-narration-keypad-key-sqrt"}),"/":ke({ariaLabelKey:"shared-calculator-narration-keypad-key-divide"}),division:ke({content:"\xF7",typedText:"/",command:"/",ariaLabelKey:"shared-calculator-narration-keypad-key-divide"}),obelus:ke({content:"\xF7",typedText:"\xF7",ariaLabelKey:"shared-calculator-narration-keypad-key-divide"}),"*":ke({ariaLabelKey:"shared-calculator-narration-keypad-key-times"}),multiplication:ke({content:"\xD7",typedText:"*",command:"*",ariaLabelKey:"shared-calculator-narration-keypad-key-times"}),"\xB1":ke({ariaLabelKey:"shared-calculator-narration-keypad-plus-minus"}),"-":ke({ariaLabelKey:"shared-calculator-narration-keypad-key-minus"}),"+":ke({ariaLabelKey:"shared-calculator-narration-keypad-key-plus"}),".":ke({ariaLabelKey:"shared-calculator-narration-keypad-key-decimal"}),ans:(t,e,r={},i)=>Q.createElement(er,{command:Q.const(t),ariaLabel:()=>i("shared-calculator-narration-keypad-key-ans"),colspan:or(r.colspan,1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/type-text",text:t})},Q.const("ans")),enter:(t,e,r={},i)=>Q.createElement(er,{command:Q.const(t),ariaLabel:()=>i("shared-calculator-narration-keypad-key-enter"),colspan:or(r.colspan,1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/press-key",key:"Enter"})},Q.createElement("i",{class:Q.const("dcg-icon-arrow-enter"),"aria-hidden":Q.const("true")})),shift:(t,e,r={},i)=>Q.createElement(er,{command:Q.const(t),ariaLabel:()=>i("shared-calculator-narration-keypad-key-shift"),colspan:or(r.colspan,1),style:()=>r.style||"default",active:or(r.active,!1),onTap:()=>e({type:"keypad/shift"})},Q.createElement("i",{class:Q.const("dcg-icon-shift"),"aria-hidden":Q.const("true")})),left:(t,e,r={},i)=>Q.createElement(er,{command:Q.const(t),ariaLabel:()=>i("shared-calculator-narration-keypad-key-left-arrow"),colspan:or(r.colspan,1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/press-key",key:"Left"})},Q.createElement("i",{class:Q.const("dcg-icon-arrow-left"),"aria-hidden":Q.const("true")})),right:(t,e,r={},i)=>Q.createElement(er,{command:Q.const(t),ariaLabel:()=>i("shared-calculator-narration-keypad-key-right-arrow"),colspan:or(r.colspan,1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/press-key",key:"Right"})},Q.createElement("i",{class:Q.const("dcg-icon-arrow-right"),"aria-hidden":Q.const("true")})),123:(t,e,r={},i)=>Q.createElement(er,{command:Q.const(t),ariaLabel:()=>i("shared-calculator-narration-keypad-key-toggle-numbers"),colspan:or(r.colspan,1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/123"})},Q.const("1 2 3")),ABC:(t,e,r={},i)=>Q.createElement(er,{command:Q.const(t),ariaLabel:()=>i("shared-calculator-narration-keypad-key-toggle-letters"),colspan:or(r.colspan,1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/abc"})},Q.const("A B C")),Audio:(t,e,r={},i)=>Q.createElement(er,{command:Q.const(t),ariaLabel:()=>i("shared-calculator-narration-keypad-key-toggle-audio-trace"),colspan:or(r.colspan,1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"on"})},Q.createElement("i",{class:Q.const("dcg-icon-volume"),"aria-hidden":Q.const("true")})),backspace:(t,e,r={},i)=>Q.createElement(er,{command:Q.const(t),ariaLabel:()=>i("shared-calculator-narration-keypad-key-backspace"),colspan:or(r.colspan,1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/press-key",key:"Backspace"})},Q.createElement("i",{class:Q.const("dcg-icon-delete"),"aria-hidden":Q.const("true")})),pi:ke({content:"\\pi",ariaLabelKey:"shared-calculator-narration-keypad-key-pi"}),alpha:ke({content:"\\alpha",ariaLabelKey:"shared-calculator-narration-keypad-key-alpha"}),beta:ke({content:"\\beta",ariaLabelKey:"shared-calculator-narration-keypad-key-beta"}),theta:ke({content:"\\theta",ariaLabelKey:"shared-calculator-narration-keypad-key-theta"}),tau:ke({content:"\\tau",ariaLabelKey:"shared-calculator-narration-keypad-key-tau"}),"a^2":Pn({command:"a^2",content:"a^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"a^3":Pn({command:"a^3",content:"a^3",ariaLabelKey:"shared-calculator-narration-keypad-key-cubed"}),"x^3":Pn({command:"a^3",content:"x^3",ariaLabelKey:"shared-calculator-narration-keypad-key-cubed"}),"a^b":ke({content:"a^b",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-superscript"}),a_b:ke({content:"a_b",typedText:"_",ariaLabelKey:"shared-calculator-narration-keypad-key-subscript"}),"a/b":Pn({content:"\\frac{a}{b}",command:"a/b",ariaLabelKey:"shared-calculator-narration-keypad-key-fraction"}),"x^2":Pn({command:"a^2",content:"x^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"x^y":ke({content:"x^y",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-superscript"}),"x/y":ke({content:"\\frac{x}{y}",typedText:"/",ariaLabelKey:"shared-calculator-narration-keypad-key-fraction"}),nthroot:Pn({command:"nthroot",content:"\\sqrt[n]{}",ariaLabelKey:"shared-calculator-narration-keypad-key-nthroot"}),ythroot:Pn({command:"nthroot",content:"\\sqrt[y]{}",ariaLabelKey:"shared-calculator-narration-keypad-key-ythroot"}),sin:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-sin"}),cos:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-cos"}),tan:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-tan"}),sec:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-sec"}),csc:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-csc"}),cot:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-cot"}),sinh:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-sinh"}),cosh:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-cosh"}),tanh:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-tanh"}),sech:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-csch"}),csch:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-csch"}),coth:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-coth"}),arcsin:Pn({command:"arcsin",content:"sin^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arcsin"}),arccos:Pn({command:"arccos",content:"cos^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccos"}),arctan:Pn({command:"arctan",content:"tan^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arctan"}),arccsc:Pn({command:"arccsc",content:"csc^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccsc"}),arcsec:Pn({command:"arcsec",content:"sec^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arcsec"}),arccot:Pn({command:"arccot",content:"cot^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccot"}),"|a|":ke({typedText:"|",ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),"|x|":ke({typedText:"|",ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),ln:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-ln"}),log:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-log"}),quantile:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-quantile"}),quartile:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-quartile"}),var:Qe({}),varp:Qe({}),nCr:Qe({}),loga:Pn({command:"loga",content:"log_a",ariaLabelKey:"shared-calculator-narration-keypad-key-loga"}),stdev:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-stdev"}),mad:Qe({}),nPr:Qe({}),total:Qe({}),length:Qe({}),for:Qe({}),min:Qe({}),max:Qe({}),cov:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-cov"}),covp:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-covp"}),corr:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-corr"}),spearman:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-spearman"}),stats:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-stats"}),polygon:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-polygon"}),distance:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-distance"}),midpoint:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-midpoint"}),mean:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-mean"}),stdevp:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-stdevp"}),mod:Qe({}),"e^x":ke({typedText:"e^",ariaLabelKey:"shared-calculator-narration-keypad-key-exp"}),"10^n":ke({content:"\\times10^{n}",typedText:"*10^",ariaLabelKey:"shared-calculator-narration-keypad-key-10-n"}),"a^{-1}":ke({typedText:"^-1",ariaLabelKey:"shared-calculator-narration-keypad-key-reciprocal"}),sum:ke({content:"\\sum",ariaLabelKey:"shared-calculator-narration-keypad-key-sum"}),prod:ke({content:"\\prod",ariaLabelKey:"shared-calculator-narration-keypad-key-product"}),floor:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-floor"}),ceil:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-ceil"}),round:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-round"}),abs:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),"!":ke({ariaLabelKey:"shared-calculator-narration-keypad-key-factorial"}),"n!":ke({typedText:"!",ariaLabelKey:"shared-calculator-narration-keypad-key-factorial"}),median:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-median"}),lcm:Qe({}),gcd:Qe({}),gcf:Qe({}),ddx:Pn({command:"ddx",content:"\\frac{d}{dx}"}),integral:Pn({command:"integral",content:"\\int",ariaLabelKey:"shared-calculator-narration-keypad-key-int"}),"%":ke({content:"\\%",ariaLabelKey:"shared-calculator-narration-keypad-key-percent-of"}),"->":ke({content:"\\to",ariaLabelKey:"shared-calculator-narration-keypad-key-action-to"}),with:ke({typedText:"with",content:"with",ariaLabelKey:"shared-calculator-narration-keypad-key-action-with"}),prime:ke({typedText:"'",content:"f'",ariaLabelKey:"shared-calculator-narration-keypad-key-prime"}),exp:ke({}),sign:Qe({}),normaldist:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-normaldist"}),poissondist:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-poissondist"}),binomialdist:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-binomialdist"}),uniformdist:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-uniformdist"}),erf:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-erf"}),histogram:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-histogram"}),boxplot:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-boxplot"}),dotplot:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-dotplot"}),tscore:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-tscore"}),ittest:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-ittest"}),ttest:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-ttest"}),tdist:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-tdist"}),pdf:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-pdf"}),cdf:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-pdf"}),random:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-random"}),inversecdf:Qe({ariaLabelKey:"shared-calculator-narration-keypad-key-inversecdf"}),hsv:Qe({}),rgb:Qe({}),sort:Qe({}),shuffle:Qe({}),unique:Qe({}),join:Qe({}),"A^-1":Pn({command:"A^-1",content:"A^{-1}",ariaLabelKey:"matrix-calculator-narration-keypad-key-inverse"}),"A^T":Pn({command:"A^T",content:"A^T",ariaLabelKey:"matrix-calculator-narration-keypad-key-transpose"}),"A^2":Pn({command:"A^2",content:"A^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"A^n":ke({content:"A^n",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-exp"}),det:Qe({ariaLabelKey:"matrix-calculator-narration-keypad-key-det"}),trace:Qe({ariaLabelKey:"matrix-calculator-narration-keypad-key-trace"}),rref:Qe({ariaLabelKey:"matrix-calculator-narration-keypad-key-rref"}),a:ke({}),b:ke({}),c:ke({}),d:ke({}),e:ke({}),f:ke({}),g:ke({}),h:ke({}),i:ke({}),j:ke({}),k:ke({}),l:ke({}),m:ke({}),n:ke({}),o:ke({}),p:ke({}),q:ke({}),r:ke({}),s:ke({}),t:ke({}),u:ke({}),v:ke({}),w:ke({}),x:ke({}),boldX:ke({content:"x",typedText:"x"}),y:ke({}),boldY:ke({content:"y",typedText:"y"}),z:ke({}),A:ke({}),B:ke({}),C:ke({}),D:ke({}),E:ke({}),F:ke({}),G:ke({}),H:ke({}),I:ke({}),J:ke({}),K:ke({}),L:ke({}),M:ke({}),N:ke({}),O:ke({}),P:ke({}),Q:ke({}),R:ke({}),S:ke({}),T:ke({}),U:ke({}),V:ke({}),W:ke({}),X:ke({}),Y:ke({}),Z:ke({}),0:ke({}),1:ke({}),2:ke({}),3:ke({}),4:ke({}),5:ke({}),6:ke({}),7:ke({}),8:ke({}),9:ke({}),",":ke({}),"=":ke({}),"[":ke({}),"]":ke({}),"{}_left":nh({keys:["{","}"]}),"{}_right":oh({keys:["{","}"]}),"()_left":nh({keys:["(",")"]}),"()_right":oh({keys:["(",")"]}),"[]_left":nh({keys:["[","]"]}),"[]_right":oh({keys:["[","]"]}),",'_left":nh({keys:[",","\u2032"]}),",'_right":oh({keys:[",","\u2032"],typedText:"'"}),'"':ke({}),"'":ke({}),"~":ke({}),":":ke({}),">":ke({}),"<":ke({}),">=":ke({content:"\\ge"}),"<=":ke({content:"\\le"}),"!%_left":nh({keys:["!","{}^{%}"]}),"!%_right":oh({keys:["!","{}^{%}"],typedText:"%"}),"~:_left":nh({keys:["~","{}^{:}"]}),"~:_right":oh({keys:["~","{}^{:}"],typedText:":"}),"audio-trace-off":r6({contentKey:"graphing-calculator-button-keypad-audio-trace-off",command:"off"}),"hear-graph":(t,e,r={},i)=>Q.createElement(er,{command:Q.const(t),disabled:or(r.disabled,!1),colspan:or(r.colspan,1),style:or(r.style,"blue"),onTap:()=>{e({type:"keypad/audio-trace",command:"hear-graph"})}},Q.createElement("span",{class:Q.const("dcg-play-icon-container")},Q.createElement("i",{class:Q.const("dcg-icon-play"),"aria-hidden":Q.const("true")})),Q.createElement("span",null,()=>i("graphing-calculator-button-audio-trace-hear-graph"))),"stop-graph":(t,e,r={},i)=>Q.createElement(er,{command:Q.const(t),disabled:or(r.disabled,!1),colspan:or(r.colspan,1),style:or(r.style,"blue"),onTap:()=>{e({type:"keypad/audio-trace",command:"stop-graph"})}},Q.createElement("span",{class:Q.const("dcg-stop-icon-container")},Q.createElement("span",{class:Q.const("dcg-stop-icon")})),Q.createElement("span",null,()=>i("graphing-calculator-button-audio-trace-stop-graph"))),"volume-down":(t,e,r={},i)=>Q.createElement(er,{command:Q.const(t),ariaLabel:()=>i("graphing-calculator-narration-keypad-key-volume-down"),disabled:or(r.disabled,!1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"volume-down"})},Q.createElement("span",{class:Q.const("dcg-button-icon dcg-icon-only")},Q.createElement("i",{class:Q.const("dcg-icon-volume-down"),"aria-hidden":Q.const("true")}))),"volume-up":(t,e,r={},i)=>Q.createElement(er,{command:Q.const(t),ariaLabel:()=>i("graphing-calculator-narration-keypad-key-volume-up"),disabled:or(r.disabled,!1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"volume-up"})},Q.createElement("span",{class:Q.const("dcg-button-icon dcg-icon-only")},Q.createElement("i",{class:Q.const("dcg-icon-volume-up"),"aria-hidden":Q.const("true")}))),"speed-down":(t,e,r={},i)=>Q.createElement(er,{command:Q.const(t),ariaLabel:()=>i("graphing-calculator-narration-keypad-key-speed-down"),disabled:or(r.disabled,!1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"speed-down"})},Q.createElement("span",{class:Q.const("dcg-button-icon dcg-icon-only")},Q.createElement("i",{class:Q.const("dcg-icon-hide"),"aria-hidden":Q.const("true")}))),"speed-up":(t,e,r={},i)=>Q.createElement(er,{command:Q.const(t),ariaLabel:()=>i("graphing-calculator-narration-keypad-key-speed-up"),disabled:or(r.disabled,!1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"speed-up"})},Q.createElement("span",{class:Q.const("dcg-button-icon dcg-icon-only")},Q.createElement("i",{class:Q.const("dcg-icon-show"),"aria-hidden":Q.const("true")}))),"previous-point":(t,e,r={},i)=>Q.createElement(er,{ariaLabel:()=>i("graphing-calculator-narration-keypad-key-previous-point"),command:Q.const(t),disabled:or(r.disabled,!1),colspan:or(r.colspan,1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"previous-point"})},Q.createElement("span",{class:Q.const("dcg-button-icon dcg-icon-only")},Q.createElement("i",{class:Q.const("dcg-icon-thin-arrow-left"),"aria-hidden":Q.const("true")}))),"next-point":(t,e,r={},i)=>Q.createElement(er,{ariaLabel:()=>i("graphing-calculator-narration-keypad-key-next-point"),command:Q.const(t),disabled:or(r.disabled,!1),colspan:or(r.colspan,1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"next-point"})},Q.createElement("span",{class:Q.const("dcg-button-icon dcg-icon-only")},Q.createElement("i",{class:Q.const("dcg-icon-thin-arrow-right"),"aria-hidden":Q.const("true")}))),"previous-poi":(t,e,r={},i)=>Q.createElement(er,{ariaLabel:()=>i("graphing-calculator-narration-keypad-key-previous-poi"),command:Q.const(t),disabled:or(r.disabled,!1),colspan:or(r.colspan,1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"previous-poi"})},Q.createElement("span",{class:Q.const("dcg-button-icon dcg-icon-only")},Q.createElement("i",{class:Q.const("dcg-icon-hide"),"aria-hidden":Q.const("true")}))),"next-poi":(t,e,r={},i)=>Q.createElement(er,{ariaLabel:()=>i("graphing-calculator-narration-keypad-key-next-poi"),command:Q.const(t),disabled:or(r.disabled,!1),colspan:or(r.colspan,1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"next-poi"})},Q.createElement("span",{class:Q.const("dcg-button-icon dcg-icon-only")},Q.createElement("i",{class:Q.const("dcg-icon-show"),"aria-hidden":Q.const("true")}))),"previous-curve":(t,e,r={},i)=>Q.createElement(er,{ariaLabel:()=>i("graphing-calculator-narration-keypad-key-previous-curve"),command:Q.const(t),disabled:or(r.disabled,!1),colspan:or(r.colspan,1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"previous-curve"})},Q.createElement("span",{class:Q.const("dcg-button-icon dcg-icon-only")},Q.createElement("i",{class:Q.const("dcg-icon-caret-up"),"aria-hidden":Q.const("true")}))),"next-curve":(t,e,r={},i)=>Q.createElement(er,{ariaLabel:()=>i("graphing-calculator-narration-keypad-key-next-curve"),command:Q.const(t),disabled:or(r.disabled,!1),style:()=>r.style||"default",onTap:()=>e({type:"keypad/audio-trace",command:"next-curve"})},Q.createElement("span",{class:Q.const("dcg-button-icon dcg-icon-only")},Q.createElement("i",{class:Q.const("dcg-icon-caret-down"),"aria-hidden":Q.const("true")})))};function C(t,e,r={}){let i=t.dispatch;return i6[e](e,i,r,t.s)}function Hr(t=1){return Q.createElement("div",{style:Q.const(`flex-grow:${t}`)})}var Gv=__dcg_shared_module_exports__['i'](ne());var d_=__dcg_shared_module_exports__['i'](ne()),rc=class extends d_.Class{init(){this.controller=this.props.controller()}};var qt=class extends rc{template(){return Gv.createElement("div",{class:Gv.const("dcg-basic-keypad dcg-do-not-blur")},this.children)}};var ah=__dcg_shared_module_exports__['i'](ne()),Ge=class extends ah.Class{template(){return ah.createElement("div",{class:ah.const("dcg-keypad-row")},this.children)}};var Av=class extends Fi{template(){return sh.createElement(qt,{controller:this.props.controller},sh.createElement(Ge,null,C(this,"q"),C(this,"w"),C(this,"e"),C(this,"r"),C(this,"t"),C(this,"y"),C(this,"u"),C(this,"i"),C(this,"o"),C(this,"p")),sh.createElement(Ge,null,C(this,"a"),C(this,"s"),C(this,"d"),C(this,"f"),C(this,"g"),C(this,"h"),C(this,"j"),C(this,"k"),C(this,"l"),C(this,"theta")),sh.createElement(Ge,null,C(this,"shift",{colspan:1.364,style:"highlight"}),Hr(.136),C(this,"z"),C(this,"x"),C(this,"c"),C(this,"v"),C(this,"b"),C(this,"n"),C(this,"m"),Hr(.136),C(this,"backspace",{colspan:1.364,style:"highlight"})),sh.createElement(Ge,null,C(this,"123",{colspan:1.818,style:"highlight"}),Hr(.182),C(this,"a_b"),C(this,"!%_left"),C(this,"[]_left"),C(this,"{}_left"),C(this,"~:_left"),C(this,",'_left"),Hr(.182),C(this,"enter",{colspan:1.818,style:"blue"})))}};var lh=__dcg_shared_module_exports__['i'](ne());var Vv=class extends Fi{template(){return lh.createElement(qt,{controller:this.props.controller},lh.createElement(Ge,null,C(this,"Q"),C(this,"W"),C(this,"E"),C(this,"R"),C(this,"T"),C(this,"Y"),C(this,"U"),C(this,"I"),C(this,"O"),C(this,"P")),lh.createElement(Ge,null,C(this,"A"),C(this,"S"),C(this,"D"),C(this,"F"),C(this,"G"),C(this,"H"),C(this,"J"),C(this,"K"),C(this,"L"),C(this,"tau")),lh.createElement(Ge,null,C(this,"shift",{colspan:1.364,active:!0,style:"highlight"}),Hr(.136),C(this,"Z"),C(this,"X"),C(this,"C"),C(this,"V"),C(this,"B"),C(this,"N"),C(this,"M"),Hr(.136),C(this,"backspace",{colspan:1.364,style:"highlight"})),lh.createElement(Ge,null,C(this,"123",{colspan:1.818,style:"highlight"}),Hr(.182),C(this,"a^b"),C(this,"!%_right"),C(this,"[]_right"),C(this,"{}_right"),C(this,"~:_right"),C(this,",'_right"),Hr(.182),C(this,"enter",{colspan:1.818,style:"blue"})))}};var ro=__dcg_shared_module_exports__['i'](ne());var Lv=class extends Fi{template(){return ro.createElement(qt,{controller:this.props.controller},ro.createElement(Ge,null,C(this,"boldX"),C(this,"boldY"),C(this,"a^2"),C(this,"a^b"),Hr(.5),C(this,"7",{style:"highlight"}),C(this,"8",{style:"highlight"}),C(this,"9",{style:"highlight"}),C(this,"division"),Hr(.5),ro.createElement(er,{command:this.const("functions"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-functions"),colspan:this.const(2),style:this.const("highlight"),active:()=>this.controller.isKeypadFunctionsPopoverOpen(),onTap:()=>this.dispatch({type:"keypad/functions"}),ariaControls:this.const(`dcg-functions-popover-${Fi.uuid}`),ariaExpanded:()=>this.controller.isKeypadFunctionsPopoverOpen()},this.bindFn(this.getFuncsBtnText))),ro.createElement(Ge,null,C(this,"("),C(this,")"),C(this,"<"),C(this,">"),Hr(.5),C(this,"4",{style:"highlight"}),C(this,"5",{style:"highlight"}),C(this,"6",{style:"highlight"}),C(this,"multiplication"),Hr(.5),C(this,"left",{style:"highlight"}),C(this,"right",{style:"highlight"})),ro.createElement(Ge,null,C(this,"|a|"),C(this,","),C(this,"<="),C(this,">="),Hr(.5),C(this,"1",{style:"highlight"}),C(this,"2",{style:"highlight"}),C(this,"3",{style:"highlight"}),C(this,"-"),Hr(1),C(this,"backspace",{colspan:1.5,style:"highlight"})),ro.createElement(Ge,null,ro.createElement("div",{class:ro.const("dcg-abc-audio-container")},ro.createElement(er,{command:ro.const("ABC"),colspan:this.const(1),ariaLabel:()=>this.controller.s("graphing-calculator-narration-toggle-letters"),style:this.const("highlight"),onTap:()=>{this.dispatch({type:"keypad/abc"})}},()=>this.controller.getLayoutMeasurements().width<=600?this.controller.raw("ABC"):this.controller.raw("A B C")),ro.createElement(er,{command:ro.const("Audio"),disabled:()=>!this.controller.canAudioTrace(),ariaLabel:()=>this.controller.s("graphing-calculator-narration-toggle-audio-trace"),colspan:this.const(1),style:()=>"highlight",onTap:()=>this.dispatch({type:"keypad/audio-trace",command:"on"})},ro.createElement("i",{class:ro.const("dcg-icon-volume"),"aria-hidden":ro.const("true")}))),C(this,"sqrt"),C(this,"pi"),Hr(.5),C(this,"0",{style:"highlight"}),C(this,".",{style:"highlight"}),C(this,"="),C(this,"+"),Hr(.5),C(this,"enter",{colspan:2,style:"blue"})))}getFuncsBtnText(){return this.controller.isNarrow()?this.controller.s("graphing-calculator-button-funcs"):this.controller.s("graphing-calculator-button-functions")}};var ch=__dcg_shared_module_exports__['i'](ne());var Pv=class extends Fi{template(){return ch.createElement(qt,{controller:this.props.controller},ch.createElement(Ge,null,C(this,"a"),C(this,"b"),C(this,"c"),C(this,"d"),C(this,"e"),C(this,"f"),C(this,"g"),C(this,"h"),C(this,"i"),C(this,"j")),ch.createElement(Ge,null,C(this,"k"),C(this,"l"),C(this,"m"),C(this,"n"),C(this,"o"),C(this,"p"),C(this,"q"),C(this,"r"),C(this,"s"),C(this,"t")),ch.createElement(Ge,null,C(this,"shift",{style:"highlight"}),C(this,"u"),C(this,"v"),C(this,"w"),C(this,"x"),C(this,"y"),C(this,"z"),C(this,"theta"),C(this,"backspace",{colspan:2,style:"highlight"})),ch.createElement(Ge,null,C(this,"123",{colspan:2,style:"highlight"}),C(this,"a_b"),C(this,"!%_left"),C(this,"[]_left"),C(this,"{}_left"),C(this,"~:_left"),C(this,",'_left"),C(this,"enter",{colspan:2,style:"blue"})))}};var dh=__dcg_shared_module_exports__['i'](ne());var Ov=class extends Fi{template(){return dh.createElement(qt,{controller:this.props.controller},dh.createElement(Ge,null,C(this,"A"),C(this,"B"),C(this,"C"),C(this,"D"),C(this,"E"),C(this,"F"),C(this,"G"),C(this,"H"),C(this,"I"),C(this,"J")),dh.createElement(Ge,null,C(this,"K"),C(this,"L"),C(this,"M"),C(this,"N"),C(this,"O"),C(this,"P"),C(this,"Q"),C(this,"R"),C(this,"S"),C(this,"T")),dh.createElement(Ge,null,C(this,"shift",{style:"highlight"}),C(this,"U"),C(this,"V"),C(this,"W"),C(this,"X"),C(this,"Y"),C(this,"Z"),C(this,"tau"),C(this,"backspace",{colspan:2,style:"highlight"})),dh.createElement(Ge,null,C(this,"123",{colspan:2,style:"highlight"}),C(this,"a^b"),C(this,"!%_right"),C(this,"[]_right"),C(this,"{}_right"),C(this,"~:_right"),C(this,",'_right"),C(this,"enter",{colspan:2,style:"blue"})))}};var Fe=__dcg_shared_module_exports__['i'](ne());var{IfElse:n6}=Fe.Components,_v=460,Fv=class extends Fi{template(){return Fe.createElement(qt,{controller:this.props.controller},Fe.createElement("div",{class:Fe.const("dcg-audio-keypad-container")},Fe.createElement("div",{class:Fe.const("dcg-audio-keypad-column dcg-playback-column")},Fe.createElement(Ue,{tooltip:this.bindFn(this.getDisabledTooltipText),gravity:this.const("s"),sticky:this.const(!1)},Fe.createElement("div",{class:Fe.const("dcg-btn-playback")},n6(()=>this.controller.isAudioTracing(),{true:()=>C(this,"stop-graph",{disabled:this.bindFn(this.isAudioDisabled)}),false:()=>C(this,"hear-graph",{disabled:this.bindFn(this.isAudioDisabled)})}))),Fe.createElement("div",{class:Fe.const("dcg-key-nav-section-container")},Fe.createElement(Ue,{tooltip:this.bindFn(this.getDisabledTooltipText),class:this.const("dcg-volume-button-container"),gravity:this.const("s"),sticky:this.const(!1)},Fe.createElement("div",{class:Fe.const("dcg-key-nav-section")},C(this,"volume-down",{disabled:this.bindFn(this.isVolumeDownDisabled)}),Fe.createElement("div",{role:Fe.const("heading"),"aria-level":Fe.const("2"),class:()=>({"dcg-key-nav-section-title-container":!0,"dcg-disabled":this.isAudioDisabled()})},Fe.createElement("span",{class:Fe.const("dcg-key-nav-section-title")},()=>this.controller.s("graphing-calculator-label-audio-trace-volume")),Fe.createElement("span",{class:Fe.const("dcg-keypad-volume-value dcg-key-nav-section-value")},()=>this.getAudioTraceVolume())),C(this,"volume-up",{disabled:this.bindFn(this.isVolumeUpDisabled)})))),Fe.createElement("div",{class:Fe.const("dcg-key-nav-section-container")},Fe.createElement(Ue,{tooltip:this.bindFn(this.getDisabledTooltipText),gravity:this.const("s"),sticky:this.const(!1)},Fe.createElement("div",{class:Fe.const("dcg-key-nav-section")},C(this,"speed-down",{disabled:this.bindFn(this.isSpeedDownDisabled)}),Fe.createElement("div",{class:()=>({"dcg-key-nav-section-title-container":!0,"dcg-disabled":this.isAudioDisabled()}),role:Fe.const("heading"),"aria-level":Fe.const("2")},Fe.createElement("span",{class:Fe.const("dcg-key-nav-section-title")},()=>this.controller.s("graphing-calculator-label-audio-trace-speed")),Fe.createElement("span",{class:Fe.const("dcg-keypad-speed-value dcg-key-nav-section-value")},()=>this.getAudioTraceSpeed())),C(this,"speed-up",{disabled:this.bindFn(this.isSpeedUpDisabled)})))),C(this,"audio-trace-off",{style:"highlight"})),Fe.createElement("div",{class:Fe.const("dcg-audio-keypad-spacer")}),Fe.createElement("div",{class:Fe.const("dcg-audio-keypad-column dcg-navigation-column")},Fe.createElement("span",{class:Fe.const("dcg-key-section-title dcg-center-col"),role:Fe.const("heading"),"aria-level":Fe.const("2")},()=>this.controller.s("graphing-calculator-heading-audio-trace-navigation")),Fe.createElement("div",{class:Fe.const("dcg-key-nav-section dcg-center-col")},C(this,"previous-point",{disabled:this.bindFn(this.isPrevPointDisabled)}),Fe.createElement("div",{class:Fe.const("dcg-key-nav-section-title-container"),role:Fe.const("heading"),"aria-level":Fe.const("2")},()=>this.controller.s("graphing-calculator-label-audio-trace-point")),C(this,"next-point",{disabled:this.bindFn(this.isNextPointDisabled)})),Fe.createElement("div",{class:Fe.const("dcg-key-nav-section")},C(this,"previous-poi",{disabled:this.bindFn(this.isPrevPOIDisabled)}),Fe.createElement("div",{class:Fe.const("dcg-key-nav-section-title-container dcg-poi-section-container"),role:Fe.const("heading"),"aria-level":Fe.const("2")},Fe.createElement(jp,{i18n:this.const(this.controller),key:this.const("graphing-calculator-heading-keypad-audio-trace-point-of-interest")},Fe.createElement("span",{class:Fe.const("dcg-key-nav-section-value")},Fe.const("Point")),Fe.createElement("span",{class:Fe.const("dcg-key-nav-section-title")},Fe.const("of Interest")))),C(this,"next-poi",{disabled:this.bindFn(this.isNextPOIDisabled)})),Fe.createElement("div",{class:Fe.const("dcg-key-nav-section dcg-center-col")},C(this,"previous-curve",{disabled:this.bindFn(this.isPrevCurveDisabled)}),Fe.createElement("div",{class:Fe.const("dcg-key-nav-section-title-container"),role:Fe.const("heading"),"aria-level":Fe.const("2")},()=>this.controller.s("graphing-calculator-label-audio-trace-curve")),C(this,"next-curve",{disabled:this.bindFn(this.isNextCurveDisabled)}))),Fe.createElement("div",{class:Fe.const("dcg-audio-keypad-spacer")}),Fe.createElement("div",{class:Fe.const("dcg-audio-keypad-column dcg-screenreader-options")},Fe.createElement("span",{class:Fe.const("dcg-key-section-title"),role:Fe.const("heading"),"aria-level":Fe.const("2")},()=>this.layoutWidth()<=_v?this.controller.s("graphing-calculator-heading-audio-trace-describe"):this.controller.s("graphing-calculator-heading-audio-trace-screen-reader"),Fe.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-audio-trace-need-screen-reader"),gravity:this.const("s"),sticky:this.const(!0)},Fe.createElement("i",{class:Fe.const("dcg-icon-question-sign"),"aria-hidden":Fe.const("true")}))),Fe.createElement(er,{command:Fe.const("describe-point"),colspan:this.const(1),style:this.const("default"),onTap:()=>{this.dispatch({type:"keypad/audio-trace",command:"describe-point"})}},Fe.createElement("span",null,()=>this.layoutWidth()<=_v?this.controller.s("graphing-calculator-button-keypad-describe-point-short"):this.controller.s("graphing-calculator-button-keypad-describe-point"))),Fe.createElement(er,{command:Fe.const("describe-curve"),colspan:this.const(1),style:this.const("default"),onTap:()=>{this.dispatch({type:"keypad/audio-trace",command:"describe-curve"})}},Fe.createElement("span",null,()=>this.layoutWidth()<=_v?this.controller.s("graphing-calculator-button-keypad-describe-curve-short"):this.controller.s("graphing-calculator-button-keypad-describe-curve"))),Fe.createElement(er,{command:Fe.const("describe-axes"),colspan:this.const(1),style:this.const("default"),onTap:()=>{this.dispatch({type:"keypad/audio-trace",command:"describe-axes"})}},Fe.createElement("span",null,()=>this.layoutWidth()<=_v?this.controller.s("graphing-calculator-label-axes"):this.controller.s("graphing-calculator-button-keypad-describe-axes"))))))}layoutWidth(){return this.controller.getLayoutMeasurements().width}isPrevPointDisabled(){let t=this.controller.getAudioGraph();return t?!t.agNavigator.canMoveToPrevPoint():!0}isNextPointDisabled(){let t=this.controller.getAudioGraph();return t?!t.agNavigator.canMoveToNextPoint():!0}isPrevPOIDisabled(){let t=this.controller.getAudioGraph();return t?!t.agNavigator.canMoveToPrevPOI():!0}isNextPOIDisabled(){let t=this.controller.getAudioGraph();return t?!t.agNavigator.canMoveToNextPOI():!0}isPrevCurveDisabled(){let t=this.controller.getAudioGraph();return t?!t.agNavigator.canMoveToPrevCurve():!0}isNextCurveDisabled(){let t=this.controller.getAudioGraph();return t?!t.agNavigator.canMoveToNextCurve():!0}isAudioDisabled(){return!this.controller.getAudio()}getAudioTraceVolume(){let t=this.controller.getAudioGraph();return!t||this.isAudioDisabled()?"0%":`${t.tonegen.getAudioVolume()*100}%`}isVolumeDownDisabled(){let t=this.controller.getAudioGraph();return!t||this.isAudioDisabled()?!0:t.tonegen.getAudioVolume()<=0}isVolumeUpDisabled(){let t=this.controller.getAudioGraph();return!t||this.isAudioDisabled()?!0:t.tonegen.getAudioVolume()>=1}getAudioTraceSpeed(){let t=this.controller.getAudioGraph();return!t||this.isAudioDisabled()?"0":lf[t.getAudioSpeedIndex()].displayedSpeed}isSpeedDownDisabled(){let t=this.controller.getAudioGraph();return!t||this.isAudioDisabled()?!0:t.getAudioSpeedIndex()<=0}isSpeedUpDisabled(){let t=this.controller.getAudioGraph();return!t||this.isAudioDisabled()?!0:t.getAudioSpeedIndex()===lf.length-1}getDisabledTooltipText(){return this.isAudioDisabled()?this.controller.s("graphing-calculator-narration-audio-trace-sound-effects-disabled"):""}};var wr=__dcg_shared_module_exports__['i'](ne());var{If:Ik,For:u_}=wr.Components,Rv=class extends Fi{template(){return wr.createElement("div",{class:wr.const("dcg-functions-popover dcg-popover dcg-top"),id:this.const(`dcg-functions-popover-${Fi.uuid}`),role:wr.const("group"),"aria-label":()=>this.controller.s("graphing-calculator-button-functions")},wr.createElement("div",{class:wr.const("dcg-popover-interior")},wr.createElement("div",{class:wr.const("dcg-interior-buttons")},wr.createElement(u_,{each:this.bindFn(this.getKeypadKeys),key:t=>t.id},wr.createElement("div",{class:wr.const("dcg-basic-keypad dcg-do-not-blur")},t=>wr.createElement("div",{class:wr.const("dcg-keypad-keys-section")},wr.createElement(Ik,{predicate:()=>t.title!==void 0},()=>wr.createElement("div",{class:wr.const("dcg-section-heading"),role:wr.const("heading"),"aria-level":wr.const("2")},()=>t.title,wr.createElement(Ik,{predicate:()=>!!t.helpLink},()=>wr.createElement("a",{href:()=>t.helpLink.url,target:wr.const("_blank"),"aria-label":()=>t.helpLink.tooltip},wr.createElement("i",{class:wr.const("dcg-icon-question-sign"),"aria-hidden":wr.const("true")}))))),wr.createElement(Ik,{predicate:()=>t.title===void 0},()=>wr.createElement("div",{class:wr.const("dcg-popover-section-separator"),role:wr.const("separator")})),wr.createElement(u_,{each:()=>t.keys},wr.createElement("div",{class:wr.const("dcg-keypad-keys-buttons")},e=>this.b(e)))))))),wr.createElement("div",{class:wr.const("dcg-arrow")}))}getInverseTrigSection(){let t=this.controller.areFunctionsRestricted()?["arcsin","arccos","arctan"]:["arcsin","arccos","arctan","arccsc","arcsec","arccot"];return{id:"inversetrig",title:this.controller.s("graphing-calculator-heading-inverse-trig"),keys:t}}getGeometryMethods(){let e=!this.controller.areFunctionsRestricted()||this.controller.areGeometryFunctionsForceEnabled()?["polygon","distance","midpoint"]:["polygon"];return{id:"geometry",title:this.controller.s("graphing-calculator-heading-geometry"),keys:e}}getTrigSection(){let t=this.controller.areFunctionsRestricted()?["sin","cos","tan"]:["sin","cos","tan","csc","sec","cot"];return{id:"trig",title:this.controller.s("graphing-calculator-heading-trig"),keys:t}}getHyperbolicTrigSection(){let t=this.controller.areFunctionsRestricted()?["sinh","cosh","tanh"]:["sinh","cosh","tanh","csch","sech","coth"];return{id:"hyperbtrig",title:this.controller.s("graphing-calculator-heading-hyperbolic-trig"),keys:t}}getListFunctions(){return{id:"lists",title:this.controller.s("graphing-calculator-heading-lists"),keys:["join","sort","shuffle","unique","for"]}}getStatTests(){return{id:"stat-tests",title:this.controller.s("graphing-calculator-heading-stat-tests"),keys:["ttest","tscore","ittest"]}}getStatsSection(){let t=["mean","median","min","max","quartile","quantile","stdev","stdevp","var"];return this.controller.areFunctionsRestricted()||(t=t.concat(["mad","cov","covp"])),t=t.concat(["corr","spearman","stats","length","total"]),{id:"stats",title:this.controller.s("graphing-calculator-heading-stats"),keys:t}}getMiscSection(){return{title:this.controller.s("graphing-calculator-button-functions-menu-number-theory"),id:"misc",keys:["lcm","gcd","mod","ceil","floor","round","sign","nthroot","nPr","nCr"]}}getVisualizationsSection(){return{title:this.controller.s("graphing-calculator-heading-dist-tab-visualizations"),id:"visualizations",keys:["histogram","dotplot","boxplot"],helpLink:{url:"https://help.desmos.com/hc/en-us/articles/360022405991-Data-Visualizations",tooltip:this.controller.s("graphing-calculator-narration-dist-tab-visualizations")}}}getCalculusSection(){return{title:this.controller.s("graphing-calculator-heading-calculus"),id:"calculus",keys:["exp","ln","log","loga","ddx","prime","integral","sum","prod"]}}getDistributionsSection(){return{title:this.controller.s("graphing-calculator-heading-dist-tab-distributions"),id:"distributions",keys:["normaldist","tdist","poissondist","binomialdist","uniformdist","pdf","cdf","inversecdf","random"],helpLink:{url:"https://help.desmos.com/hc/en-us/articles/360022401451-Distributions",tooltip:this.controller.s("graphing-calculator-narration-dist-tab-distributions")}}}getColorsSection(){return{title:this.controller.s("graphing-calculator-button-functions-menu-custom-colors"),id:"colors",keys:["rgb","hsv"],helpLink:{url:"https://help.desmos.com/hc/en-us/articles/4406795899533-Custom-Colors",tooltip:this.controller.s("graphing-calculator-button-functions-menu-custom-colors")}}}getAdvancedSection(){return{title:this.controller.s("graphing-calculator-heading-functions-menu-advanced"),id:"advanced",keys:["->","with"],helpLink:{url:"https://help.desmos.com/hc/en-us/sections/4406370087053-Advanced-Features",tooltip:this.controller.s("graphing-calculator-heading-functions-menu-advanced")}}}getKeypadKeys(){let t=[this.getTrigSection(),this.getInverseTrigSection(),this.getStatsSection(),this.getListFunctions()];return this.controller.areDistributionsEnabled()&&(t.push(this.getVisualizationsSection()),t.push(this.getDistributionsSection()),t.push(this.getStatTests())),t.push(this.getCalculusSection()),t.push(this.getHyperbolicTrigSection()),t.push(this.getGeometryMethods()),t.push(this.getColorsSection()),t.push(this.getMiscSection()),this.controller.areActionsEnabled()&&t.push(this.getAdvancedSection()),t}b(t){return C(this,t,{style:"popover"})}};at();var{SwitchUnion:o6,If:Mk}=Mt.Components,Nv=class extends Fi{template(){return Mt.createElement("div",{class:Mt.const("dcg-keypad"),role:Mt.const("region"),"aria-label":()=>this.controller.s("shared-calculator-narration-keypad")},Mt.createElement("div",{class:()=>({"dcg-keys-container":!0,"dcg-smaller-functions-text":this.controller.getLayoutMeasurements().width<650,"dcg-small-ABC":this.controller.getLayoutMeasurements().width<490,"dcg-smaller-ABC":this.controller.getLayoutMeasurements().width<420,"dcg-smallest-ABC":this.controller.getLayoutMeasurements().width<380}),style:this.bindFn(this.computeStyles),didMount:this.bindFn(this.didMountContainer),"aria-hidden":()=>!this.controller.isKeypadOpen()},Mt.createElement("div",{class:Mt.const("dcg-keys-background dcg-do-not-blur"),style:()=>({background:this.controller.getPillboxBackgroundColor()})},Mt.createElement("div",{class:Mt.const("dcg-keys")},o6(()=>this.controller.getKeypadLayout(),{letters:()=>Mt.createElement(Av,{controller:this.props.controller}),capitalLetters:()=>Mt.createElement(Vv,{controller:this.props.controller}),mainNumbers:()=>Mt.createElement(Lv,{controller:this.props.controller}),noQwertyLetters:()=>Mt.createElement(Pv,{controller:this.props.controller}),noQwertyCapitalLetters:()=>Mt.createElement(Ov,{controller:this.props.controller}),audio:()=>Mt.createElement(Fv,{controller:this.props.controller})}),Mt.createElement(Mk,{predicate:()=>this.controller.isKeypadFunctionsPopoverOpen()},()=>Mt.createElement(Rv,{controller:this.props.controller}))),Mt.createElement(Mk,{predicate:()=>this.controller.isHideKeypadButtonVisible()},()=>Mt.createElement("div",{class:Mt.const("dcg-minimize-keypad-container")},Mt.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-hide-keypad"),gravity:this.const("ne"),offset:this.const({left:6})},Mt.createElement("div",{role:Mt.const("button"),"aria-expanded":Mt.const("true"),"aria-controls":this.const(Fi.uuid),"aria-label":()=>this.controller.s("graphing-calculator-label-hide-keypad"),class:Mt.const("dcg-minimize-keypad"),style:()=>({"border-bottom-color":this.controller.getPillboxBackgroundColor(),background:this.controller.getPillboxBackgroundColor()}),onTap:()=>{this.controller.dispatch({type:"keypad/set-minimized",minimized:!0})}},Mt.createElement("i",{class:Mt.const("dcg-icon-keyboard"),"aria-hidden":Mt.const("true")}),Mt.createElement("i",{class:Mt.const("dcg-icon-caret-down"),"aria-hidden":Mt.const("true")}))))))),Mt.createElement(Mk,{predicate:this.bindFn(this.isShowKeypadButtonVisible)},()=>Mt.createElement("div",{class:Mt.const("dcg-show-keypad-container")},Mt.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-show-keypad"),gravity:this.const("ne")},Mt.createElement("div",{role:Mt.const("button"),"aria-expanded":Mt.const("false"),"aria-controls":this.const(Fi.uuid),"aria-label":()=>this.controller.s("graphing-calculator-label-show-keypad"),class:Mt.const("dcg-btn-flat-gray dcg-show-keypad dcg-do-not-blur"),style:()=>({background:this.controller.getPillboxBackgroundColor()}),onTap:()=>{this.controller.dispatch({type:"keypad/set-minimized",minimized:!1})}},Mt.createElement("i",{class:Mt.const("dcg-icon-keyboard"),"aria-hidden":Mt.const("true")}),Mt.createElement("i",{class:Mt.const("dcg-icon-caret-up dcg-do-not-blur"),"aria-hidden":Mt.const("true")}))))))}didMountContainer(t){this.containerElt=t}isShowKeypadButtonVisible(){return this.controller.getBrailleMode()!=="none"?!1:!this.controller.isKeypadOpen()&&!this.controller.isNarrow()&&!this.controller.isInEditListMode()&&(this.controller.isListVisible()||this.controller.inAudioTraceMode())}didMount(){this.updatePopoverPosition()}didUpdate(){this.updatePopoverPosition()}computeStyles(){let t={};return this.controller.isNarrow()||(t.transition="transform .3s, opacity .3s"),this.controller.isKeypadOpen()||(t.opacity="0",t.transform="translate3d(0, 255px, 0)"),t}updatePopoverPosition(){if(!this.controller.isKeypadFunctionsPopoverOpen()){this.__popoverCache=void 0;return}let t=this.controller.computeMajorLayout(),e={keypadTop:t.keypad.top,keypadWidth:t.keypad.width,keypadHeight:t.keypad.height,showToLeft:t.grapher.height<525};if(__dcg_shared_module_exports__['E'](e,this.__popoverCache))return;this.__popoverCache=e;let r=V(this.containerElt),i=r.find("[dcg-command=functions]"),n=r.find(".dcg-functions-popover"),o=r.find(".dcg-arrow");if(e.showToLeft){n.removeClass("dcg-top").addClass("dcg-left");var a=e.keypadHeight-(i.offset().top-r.offset().top),s=a-i.outerHeight()/2-2-10;o.css({left:"auto",bottom:s})}else n.removeClass("dcg-left").addClass("dcg-top"),o.css({left:n.width()-i.width()/2,bottom:"auto"})}};var vn=__dcg_shared_module_exports__['i'](ne());var Or=__dcg_shared_module_exports__['i'](ne()),{SwitchUnion:a6}=Or.Components,Fm=class extends Or.Class{template(){return this.controller=this.props.controller(),a6(()=>this.controller.getBrandingMode(),{"static-edit-link":()=>Or.createElement("div",{class:Or.const("dcg-graphpaper-branding")},Or.createElement("a",{href:()=>this.controller.getEditLink(),target:Or.const("_blank")},Or.createElement("span",{class:Or.const("dcg-powered-by"),"aria-label":()=>this.controller.s("graphing-calculator-narration-edit-on-desmos")},()=>this.controller.s("graphing-calculator-link-edit-on-desmos")),Or.createElement("i",{class:Or.const("dcg-icon-desmos"),"aria-hidden":Or.const("true")}))),"edit-link":()=>Or.createElement("div",{class:Or.const("dcg-graphpaper-branding")},Or.createElement("span",{class:Or.const("dcg-edit-branding"),onTap:()=>this.controller.dispatch({type:"open-on-web"})},Or.createElement("span",{class:Or.const("dcg-powered-by"),"aria-label":()=>this.controller.s("graphing-calculator-narration-edit-on-desmos")},()=>this.controller.s("graphing-calculator-link-edit-on-desmos")),Or.createElement("i",{class:Or.const("dcg-icon-desmos"),"aria-hidden":Or.const("true")}))),"powered-by":()=>Or.createElement("div",{class:Or.const("dcg-graphpaper-branding dcg-unclickable")},Or.createElement("span",{class:Or.const("dcg-powered-by"),"aria-label":()=>this.controller.s("graphing-calculator-narration-powered-by-desmos")},()=>this.controller.s("graphing-calculator-label-powered-by")),Or.createElement("i",{class:Or.const("dcg-icon-desmos"),"aria-hidden":Or.const("true")}))})}};var oe=__dcg_shared_module_exports__['i'](ne());at();var Ss=__dcg_shared_module_exports__['i'](ne());var Fd=class extends Ss.Class{template(){return Ss.createElement(Ue,{tooltip:()=>this.props.controller().s("shared-calculator-label-toast-learn-more")},Ss.createElement("a",{"aria-label":()=>this.props.controller().s("shared-calculator-label-toast-learn-more"),class:Ss.const("dcg-learn-more-link"),href:this.props.href,target:Ss.const("_blank")},Ss.createElement("i",{class:Ss.const("dcg-icon-question-sign"),"aria-hidden":Ss.const("true")})))}};var qn=__dcg_shared_module_exports__['i'](ne());var{If:s6}=qn.Components,ic=class extends qn.Class{init(){this.controller=this.props.controller()}template(){return qn.createElement(Ue,{tooltip:this.bindFn(this.getTooltip),gravity:this.const("w")},qn.createElement("div",{class:()=>({"dcg-action-settings":!0,"dcg-icon-btn":!0,"dcg-btn-flat-gray":this.isPillbox(),"dcg-settings-pillbox":this.isPillbox()}),style:()=>({background:this.isPillbox()?this.controller.getPillboxBackgroundColor():void 0}),role:qn.const("button"),tabindex:qn.const("0"),"aria-haspopup":qn.const("true"),"aria-expanded":()=>this.controller.isGraphSettingsOpen(),"aria-label":this.bindFn(this.getTooltip),onTap:this.bindFn(this.onTapSettingsButton),manageFocus:this.const(ut({controller:this.controller,location:{type:"settings",location:"icon"}}))},qn.createElement("i",{class:qn.const("dcg-icon-wrench"),"aria-hidden":qn.const("true")}),qn.createElement(s6,{predicate:()=>this.controller.getLockViewportUserSetting()},()=>qn.createElement("i",{class:qn.const("dcg-icon-lock"),"aria-hidden":qn.const("true")}))))}getTooltip(){return this.controller.isGeometry()?this.controller.s("graphing-calculator-label-tooltip-geometry-settings"):this.controller.s("graphing-calculator-label-tooltip-graph-settings")}isPillbox(){return this.props.isPillbox&&this.props.isPillbox()}onTapSettingsButton(e){this.controller.dispatch({type:"toggle-graph-settings",focusOnOpen:e.device==="keyboard"})}};var{Input:p_,If:Ao,IfElse:h_}=oe.Components,Kc=class extends oe.Class{template(){return oe.createElement(Ir,{isFocused:()=>this.props.parent().getFocusedLimit()===this.props.limit(),latex:()=>this.props.parent().getLimitLatex(this.props.limit()),ariaLabel:this.props.ariaLabel,handleLatexChanged:e=>this.props.parent().setLimitLatex(this.props.limit(),e),handleFocusChanged:e=>this.props.parent().onFocusedChanged(this.props.limit(),e),hasError:()=>this.props.parent().isLimitInvalid(this.props.limit()),dataLabelAttributeValue:this.props.limit,controller:this.props.controller,readonly:this.const(!1),containerClass:()=>({"dcg-log-scale":this.props.axisScale()==="logarithmic"})})}},Rm=class extends oe.Class{init(){this.controller=this.props.controller(),this.uuid=xp()}template(){return oe.createElement("div",{class:oe.const("dcg-settings-view-container")},oe.createElement(ic,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{isPillbox:this.const(!0)})),oe.createElement(Ao,{predicate:()=>this.controller.isGraphSettingsOpen()},()=>oe.createElement("div",{class:oe.const("dcg-settings-container dcg-left dcg-popover dcg-constrained-height-popover"),style:this.bindFn(this.getContainerStyle),didMount:this.bindFn(this.didMountContainer),didUnmount:this.bindFn(this.didUnmountContainer)},oe.createElement("div",{class:oe.const("dcg-popover-interior"),role:oe.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-graph-settings")},oe.createElement("div",{class:oe.const("dcg-visual-settings")},oe.createElement("div",{class:oe.const("dcg-displaysizegroup")},oe.createElement(Oi,{ariaGroupLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size"),staticConfig:this.bindFn(this.getProjectorModeOptions)})),oe.createElement(kt,{onChange:this.bindFn(this.toggleInvertedColors),checked:()=>this.controller.getInvertedColors(),manageFocus:this.const(ut({controller:this.controller,location:{type:"settings",location:"reverse-contrast"}}))},()=>this.controller.s("graphing-calculator-label-settings-reverse-contrast")),oe.createElement(Ao,{predicate:()=>this.controller.getBrailleControls()},()=>oe.createElement("div",{class:oe.const("dcg-braille-container dcg-braille-mode")},oe.createElement(kt,{onChange:this.bindFn(this.toggleBrailleMode),checked:()=>this.controller.getBrailleMode()!=="none"},()=>this.controller.s("shared-calculator-narration-braille-mode")),oe.createElement(Ao,{predicate:()=>this.controller.getBrailleMode()!=="none"},()=>oe.createElement("div",{class:oe.const("dcg-braille-options-container")},oe.createElement("div",{class:oe.const("dcg-braille-options-buttons")},oe.createElement(Oi,{ariaGroupLabel:()=>this.controller.s("shared-calculator-narration-braille-mode"),staticConfig:this.bindFn(this.getBrailleOptions)})),oe.createElement("div",{class:oe.const("dcg-checkbox-title dcg-six-key-checkbox")},oe.createElement(kt,{onChange:e=>this.controller.dispatch({type:"set-six-key-input",useSixKeyInput:e}),checked:()=>this.controller.getSixKeyInput()},()=>this.controller.s("graphing-calculator-label-settings-six-key-braille")),oe.createElement("a",{href:oe.const("https://www.desmos.com/accessibility#braille"),"aria-label":()=>this.controller.s("graphing-calculator-link-learn-more"),class:oe.const("dcg-six-key-info"),target:oe.const("_blank")},oe.createElement("i",{class:oe.const("dcg-icon-question-sign"),"aria-hidden":oe.const("true")}))),oe.createElement("div",{class:oe.const("dcg-refreshable-braille-note")},()=>this.controller.s("graphing-calculator-text-refreshable-braille-display-note")+" ",oe.createElement("a",{href:()=>"https://www.desmos.com/braille-examples?"+this.controller.getBrailleMode(),target:oe.const("_blank")},()=>this.controller.s("graphing-calculator-link-view-braille-examples")))))))),oe.createElement("div",{class:oe.const("dcg-top-section-flex dcg-grid-settings-container")},oe.createElement("div",{class:oe.const("dcg-grid-settings")},oe.createElement(kt,{class:this.const("dcg-settings-grid-toggle"),onChange:this.bindFn(this.toggleGrid),checked:this.bindFn(this.getShowGrid)},()=>this.controller.s("graphing-calculator-label-settings-grid")),oe.createElement(Ao,{predicate:this.bindFn(this.getShowGrid)},()=>oe.createElement("div",{class:oe.const("dcg-circle-icon-group dcg-grid-group")},oe.createElement("div",{class:()=>({"dcg-circle-icon":!0,"dcg-action-cartesian":!0,"dcg-selected":!this.getPolarMode()}),role:oe.const("button"),tabindex:oe.const("0"),"aria-pressed":()=>!this.getPolarMode(),"aria-label":()=>this.controller.s("graphing-calculator-narration-settings-cartesian-grid"),onTap:this.bindFn(this.setCartesianMode)}),oe.const("\xA0"),oe.createElement("div",{class:()=>({"dcg-circle-icon":!0,"dcg-action-polar":!0,"dcg-selected":this.getPolarMode()}),role:oe.const("button"),tabindex:oe.const("0"),"aria-pressed":()=>this.getPolarMode(),"aria-label":()=>this.controller.s("graphing-calculator-narration-settings-polar-grid"),onTap:this.bindFn(this.setPolarMode)}))),oe.createElement(kt,{onChange:this.bindFn(this.toggleArrows),checked:()=>this.getAxisArrowMode()!=="NONE"},()=>this.controller.s("graphing-calculator-label-settings-arrows")),oe.createElement(Ao,{predicate:()=>this.getAxisArrowMode()!=="NONE"},()=>oe.createElement("div",{class:oe.const("dcg-circle-icon-group dcg-arrow-group")},oe.createElement("div",{role:oe.const("button"),tabindex:oe.const("0"),class:()=>({"dcg-circle-icon":!0,"dcg-arrows":!0,"dcg-selected":this.getAxisArrowMode()==="BOTH"}),"dcg-arrows":oe.const("BOTH"),"aria-label":()=>this.controller.s("graphing-calculator-narration-settings-show-both"),"aria-pressed":()=>this.getAxisArrowMode()==="BOTH",onTap:()=>this.setAxisArrowMode("BOTH")},oe.createElement("i",{class:oe.const("dcg-icon-arrows-two"),"aria-hidden":oe.const("true")})),oe.const("\xA0"),oe.createElement("div",{role:oe.const("button"),tabindex:oe.const("0"),class:()=>({"dcg-circle-icon":!0,"dcg-arrows":!0,"dcg-selected":this.getAxisArrowMode()==="POSITIVE"}),"dcg-arrows":oe.const("POSITIVE"),"aria-label":()=>this.controller.s("graphing-calculator-narration-settings-show-positive"),"aria-pressed":()=>this.getAxisArrowMode()==="POSITIVE",onTap:()=>this.setAxisArrowMode("POSITIVE")},oe.createElement("i",{class:oe.const("dcg-icon-arrows-one"),"aria-hidden":oe.const("true")}))))),oe.createElement("div",{class:oe.const("dcg-top-checkboxes-container")},oe.createElement(kt,{onChange:this.bindFn(this.toggleAxisNumbers),checked:this.bindFn(this.getAxisNumbers),small:this.const(!0)},()=>this.controller.s("graphing-calculator-label-settings-axis-numbers")),oe.createElement(Ao,{predicate:()=>this.getShowGrid()&&!this.getPolarMode()},()=>oe.createElement(kt,{onChange:this.bindFn(this.toggleMinorGridlines),checked:this.bindFn(this.getMinorGridlines),small:this.const(!0)},()=>this.controller.s("graphing-calculator-label-settings-minor-gridlines"))),oe.createElement(Ao,{predicate:()=>this.controller.canUseAdvancedStyling()&&!this.getPolarMode()},()=>oe.createElement(kt,{checked:()=>this.controller.getGraphSettings().restrictGridToFirstQuadrant,ariaLabel:this.const("One Quadrant"),onChange:e=>this.controller.dispatch({type:"set-graph-settings",restrictGridToFirstQuadrant:e}),small:this.const(!0)},()=>this.controller.s("graphing-calculator-label-settings-one-quadrant"))),oe.createElement(Ao,{predicate:this.bindFn(this.showZoomSquareButton)},()=>oe.createElement("div",{role:oe.const("button"),tabindex:oe.const("0"),class:oe.const("dcg-action-zoom-square dcg-btn-light-gray"),onTap:this.bindFn(this.zoomSquare)},()=>this.controller.s("graphing-calculator-button-settings-zoom-square"))))),oe.createElement("div",{class:oe.const("dcg-axes-settings-container")},oe.createElement("div",{class:oe.const("dcg-checkbox-title dcg-x-axis-title")},oe.createElement(kt,{onChange:this.bindFn(this.toggleXAxis),checked:this.bindFn(this.getShowXAxis)},oe.createElement("span",{id:this.const(`x-axis-description-${this.uuid}`)},()=>this.controller.s("graphing-calculator-label-settings-x-axis"))),oe.createElement(Ao,{predicate:this.bindFn(this.getShowXAxis)},()=>oe.createElement("div",{class:oe.const("dcg-axis-label")},oe.createElement("label",{for:this.const(`x-axis-label-${this.uuid}`)},()=>this.controller.s("graphing-calculator-button-label")),oe.createElement(p_,{class:this.const("dcg-x-axis-label"),disabled:()=>this.getShowXAxis()?void 0:!0,"aria-describedby":this.const(`x-axis-description-${this.uuid}`),onInput:this.bindFn(this.onXAxisLabelInput),value:this.bindFn(this.getXAxisLabel),id:this.const(`x-axis-label-${this.uuid}`),placeholder:()=>this.controller.s("graphing-calculator-narration-settings-x-axis-label-placeholder")})))),oe.createElement("div",{class:oe.const("dcg-editable-mathquill-container dcg-x-axis-options")},oe.createElement(Kc,{limit:this.const("xmin"),axisScale:()=>this.getAxisScale("x"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-x-axis-min"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller}),oe.createElement(ze,{config:this.const({}),latex:this.const("\\le x\\le")},oe.createElement("span",{class:oe.const("dcg-interval-interior")})),oe.createElement(Kc,{limit:this.const("xmax"),axisScale:()=>this.getAxisScale("x"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-x-axis-max"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller}),oe.createElement(Ao,{predicate:()=>!this.getPolarMode()},()=>h_(()=>this.getAxisScale("x")==="linear",{true:()=>oe.createElement("span",{class:oe.const("dcg-step-container")},oe.createElement("span",{class:oe.const("dcg-step-label"),"aria-hidden":oe.const("true")},()=>this.controller.s("graphing-calculator-label-settings-step")),oe.createElement(Kc,{limit:this.const("xstep"),axisScale:this.const("linear"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-x-axis-step"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller})),false:()=>oe.createElement("span",{style:oe.const("display: none")})})),oe.createElement(Ao,{predicate:()=>this.shouldShowLogScalesOption()},()=>oe.createElement("div",{class:oe.const("dcg-logarithmic-scale-checkbox")},oe.createElement(kt,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-x-axis-logarithmic-scale"),onChange:()=>{this.setAxisScale({axis:"x",scale:this.getAxisScale("x")==="linear"?"logarithmic":"linear"})},checked:()=>this.getAxisScale("x")==="logarithmic",small:this.const(!0)},()=>this.controller.s("graphing-calculator-label-settings-logarithmic-scale"))))),oe.createElement("div",{class:oe.const("dcg-checkbox-title dcg-y-axis-title")},oe.createElement(kt,{onChange:this.bindFn(this.toggleYAxis),checked:this.bindFn(this.getShowYAxis)},oe.createElement("span",{id:this.const(`y-axis-description-${this.uuid}`)},()=>this.controller.s("graphing-calculator-label-settings-y-axis"))),oe.createElement(Ao,{predicate:this.bindFn(this.getShowYAxis)},()=>oe.createElement("div",{class:oe.const("dcg-axis-label")},oe.createElement("label",{for:this.const(`y-axis-label-${this.uuid}`)},()=>this.controller.s("graphing-calculator-button-label")),oe.createElement(p_,{class:this.const("dcg-y-axis-label"),onInput:this.bindFn(this.onYAxisLabelInput),value:this.bindFn(this.getYAxisLabel),"aria-describedby":this.const(`y-axis-description-${this.uuid}`),id:this.const(`y-axis-label-${this.uuid}`),placeholder:()=>this.controller.s("graphing-calculator-narration-settings-y-axis-label-placeholder")})))),oe.createElement("div",{class:oe.const("dcg-editable-mathquill-container dcg-y-axis-options")},oe.createElement(Kc,{limit:this.const("ymin"),axisScale:()=>this.getAxisScale("y"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-y-axis-min"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller}),oe.createElement(ze,{config:this.const({}),latex:this.const("\\le y\\le")},oe.createElement("span",{class:oe.const("dcg-interval-interior")})),oe.createElement(Kc,{limit:this.const("ymax"),axisScale:()=>this.getAxisScale("y"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-y-axis-max"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller}),oe.createElement(Ao,{predicate:()=>!this.getPolarMode()},()=>h_(()=>this.getAxisScale("y")==="linear",{true:()=>oe.createElement("span",{class:oe.const("dcg-step-container")},oe.createElement("span",{class:oe.const("dcg-step-label"),"aria-hidden":oe.const("true")},()=>this.controller.s("graphing-calculator-label-settings-step")),oe.createElement(Kc,{limit:this.const("ystep"),axisScale:this.const("linear"),ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-y-axis-step"),needsSystemKeypad:()=>!this.controller.isKeypadEnabled(),parent:this.const(this),controller:this.props.controller})),false:()=>oe.createElement("span",{style:oe.const("display: none")})})),oe.createElement(Ao,{predicate:()=>this.shouldShowLogScalesOption()},()=>oe.createElement("div",{class:oe.const("dcg-logarithmic-scale-checkbox")},oe.createElement(kt,{ariaLabel:()=>this.controller.s("graphing-calculator-narration-settings-y-axis-logarithmic-scale"),onChange:()=>{this.setAxisScale({axis:"y",scale:this.getAxisScale("y")==="linear"?"logarithmic":"linear"})},checked:()=>this.getAxisScale("y")==="logarithmic",small:this.const(!0)},()=>this.controller.s("graphing-calculator-label-settings-logarithmic-scale"))))),oe.createElement(Ao,{predicate:()=>!this.controller.getLockViewportConfigSetting()},()=>oe.createElement("div",{class:oe.const("dcg-checkbox-title dcg-lock-viewport-option")},oe.createElement(kt,{ariaLabel:()=>this.controller.s("graphing-calculator-label-settings-lock-viewport"),onChange:()=>{this.controller.dispatch({type:"toggle-lock-viewport"})},checked:()=>this.controller.getLockViewportUserSetting()},()=>this.controller.s("graphing-calculator-label-settings-lock-viewport")),oe.createElement(Fd,{href:this.const("https://help.desmos.com/hc/en-us/articles/4405296853517#h_01FZX4DBWKD83TZVMH615XF3QA"),controller:this.props.controller})))),oe.createElement("div",{class:oe.const("dcg-radiangroup")},oe.createElement(Oi,{ariaGroupLabel:()=>this.controller.s("graphing-calculator-narration-settings-angle"),staticConfig:this.bindFn(this.getAngleModeOptions)})),oe.createElement("div",{class:oe.const("dcg-arrow")})))))}getAngleModeOptions(){return[{key:"radians",label:()=>this.controller.s("graphing-calculator-button-settings-radians"),selected:()=>!this.getDegreeMode(),onSelect:()=>this.setDegreeMode(!1),focusHelperOptions:{controller:this.controller,location:{type:"settings",location:"radian-mode"}}},{key:"degrees",label:()=>this.controller.s("graphing-calculator-button-settings-degrees"),selected:()=>this.getDegreeMode(),onSelect:()=>this.setDegreeMode(!0),focusHelperOptions:{controller:this.controller,location:{type:"settings",location:"degree-mode"}}}]}getDegreeMode(){return!!this.controller.getGraphSettings().degreeMode}setDegreeMode(e){this.controller.dispatch({type:"set-graph-settings",degreeMode:e})}toggleBrailleMode(){this.controller.dispatch({type:"set-braille-mode",mode:this.controller.getBrailleMode()==="none"?"nemeth":"none"})}getBrailleOptions(){return[{key:"nemeth",label:()=>this.controller.s("shared-calculator-button-braille-mode-nemeth"),selected:()=>this.controller.getBrailleMode()==="nemeth",onSelect:()=>this.setBrailleMode("nemeth")},{key:"ueb",label:()=>this.controller.s("shared-calculator-button-braille-mode-ueb"),selected:()=>this.controller.getBrailleMode()==="ueb",onSelect:()=>this.setBrailleMode("ueb")}]}setBrailleMode(e){this.controller.dispatch({type:"set-braille-mode",mode:e})}getProjectorModeOptions(){return[{key:"default",label:()=>"A",ariaLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size-default"),class:()=>"dcg-displaysize-default",selected:()=>!this.getProjectorMode(),onSelect:()=>this.onSelectProjectorModeOption(!1),focusHelperOptions:{controller:this.controller,location:{type:"settings",location:"default-size"}}},{key:"large",label:()=>"A",ariaLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size-large"),class:()=>"dcg-displaysize-large",selected:()=>this.getProjectorMode(),onSelect:()=>this.onSelectProjectorModeOption(!0),focusHelperOptions:{controller:this.controller,location:{type:"settings",location:"large-size"}}}]}onSelectProjectorModeOption(e){this.controller.dispatch({type:"set-projector-mode",value:e})}didMountContainer(e){this.node=e,V(document).on("dcg-tapstart.settings-view wheel.settings-view",r=>{this.eventShouldClosePopover(r)&&this.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:r.device==="keyboard"})}),V(document).on("keydown.settings-view",r=>{let i=Le(r);if(i==="Esc"&&this.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:!0}),this.controller.isGraphSettingsOpen()&&i==="Tab"&&!r.altKey&&!r.metaKey&&!r.ctrlKey){let n=this.controller.getFocusLocation();if(!n||n.type!=="settings")return;r.shiftKey?r.shiftKey&&(n.location==="default-size"?(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),r.preventDefault(),r.stopPropagation()):n.location==="icon"&&(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"degree-mode"}}),r.preventDefault(),r.stopPropagation())):n.location==="icon"?(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"default-size"}}),r.preventDefault(),r.stopPropagation()):n.location==="degree-mode"&&(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),r.preventDefault(),r.stopPropagation())}})}didUnmountContainer(){V(document).off(".settings-view")}didUpdate(){if(!this.controller.isGraphSettingsOpen())return;let e=this.controller.getKeypadHeight();e!==this.cachedKeypadHeight&&document.activeElement&&V(document.activeElement).closest(this.node).length&&ss(V(document.activeElement),V(this.node).find(".dcg-popover-interior"),50),this.cachedKeypadHeight=e}eventShouldClosePopover(e){let r=V(e.target),i=!!r.closest(this.node).length,n=!!r.closest(".dcg-action-settings").length,o=this.isMathquillFocused()&&r.closest(".dcg-keypad").length,a=!!r.closest(".dcg-action-undo").length||!!r.closest(".dcg-action-redo").length;return!(i||n||o||a)}isMathquillFocused(){return this.getFocusedLimit()!==void 0}getLimitLatex(e){return this.controller.getSettingsViewModel().limitLatex[e]}setLimitLatex(e,r){r!==this.controller.getSettingsViewModel().limitLatex[e]&&this.controller.dispatch({type:"set-axis-limit-latex",limit:e,latex:r})}getFocusedLimit(){let e=this.controller.getFocusLocation();if(e&&e.type==="settings")return e.location}getInvalidLimits(){let e=!!this.controller.getGraphSettings().degreeMode,r=ai(this.getLimitLatex("xmin"),e),i=ai(this.getLimitLatex("xmax"),e),n=ai(this.getLimitLatex("ymin"),e),o=ai(this.getLimitLatex("ymax"),e),a=this.getLimitLatex("xstep")===""?0:ai(this.getLimitLatex("xstep"),e),s=this.getLimitLatex("ystep")===""?0:ai(this.getLimitLatex("ystep"),e),l={},c=new Si(r,i,n,o);return isFinite(r)&&isFinite(i)?(l.xmin=!c.isXValid(this.controller.getGraphSettings().xAxisScale),l.xmax=l.xmin):(l.xmin=!isFinite(r),l.xmax=!isFinite(i)),isFinite(n)&&isFinite(o)?(l.ymin=!c.isYValid(this.controller.getGraphSettings().yAxisScale),l.ymax=l.ymin):(l.ymin=!isFinite(n),l.ymax=!isFinite(o)),l.xstep=!up(a),l.ystep=!up(s),l}isLimitInvalid(e){return this.getInvalidLimits()[e]}onFocusedChanged(e,r){r?this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"settings",location:e}})}onXAxisLabelInput(e){this.controller.dispatch({type:"set-graph-settings",xAxisLabel:e})}onYAxisLabelInput(e){this.controller.dispatch({type:"set-graph-settings",yAxisLabel:e})}getXAxisLabel(){return this.controller.getGraphSettings().xAxisLabel}getYAxisLabel(){return this.controller.getGraphSettings().yAxisLabel}getShowXAxis(){return!!this.controller.getGraphSettings().showXAxis}toggleXAxis(){this.controller.dispatch({type:"set-graph-settings",showXAxis:!this.getShowXAxis()})}getShowYAxis(){return!!this.controller.getGraphSettings().showYAxis}toggleYAxis(){this.controller.dispatch({type:"set-graph-settings",showYAxis:!this.getShowYAxis()})}getAxisNumbers(){return!!this.controller.getGraphSettings().xAxisNumbers}toggleAxisNumbers(){let e=this.getAxisNumbers();this.controller.dispatch({type:"set-graph-settings",xAxisNumbers:!e,yAxisNumbers:!e,polarNumbers:!e})}getMinorGridlines(){return this.controller.getGraphSettings().xAxisMinorSubdivisions===0}toggleMinorGridlines(){let e=this.getMinorGridlines()?1:0;this.controller.dispatch({type:"set-graph-settings",yAxisMinorSubdivisions:e,xAxisMinorSubdivisions:e})}getPolarMode(){return!!this.controller.getGraphSettings().polarMode}shouldShowLogScalesOption(){return this.controller.getGraphSettings().config.logScales&&!this.getPolarMode()}setPolarMode(){this.controller.dispatch({type:"set-polar-mode",polarMode:!0})}setCartesianMode(){this.controller.dispatch({type:"set-polar-mode",polarMode:!1})}getAxisScale(e){return this.controller.getGraphSettings()[e==="x"?"xAxisScale":"yAxisScale"]}setAxisScale({axis:e,scale:r}){let i=this.getLimitLatex(e==="x"?"xmin":"ymin"),n=this.getLimitLatex(e==="x"?"xmax":"ymax");if(r==="linear")return this.controller.dispatch({type:"set-axis-scale",settings:{axis:e,scale:r,limitLatex:{min:i,max:n}}});let o=this.controller.getGraphSettings(),a=ai(i,!!o.degreeMode),s=ai(n,!!o.degreeMode),l=os(o[e==="x"?"xAxisBase":"yAxisBase"]),c=s>0?n:`${l}`,u=a>0?i:`${l}^{${Math.floor(__dcg_shared_module_exports__['Oa'](Math.log(s>0?s:l)/Math.log(l)))-5}}`;return this.controller.dispatch({type:"set-axis-scale",settings:{axis:e,scale:r,limitLatex:{min:u,max:c}}})}getProjectorMode(){return!!this.controller.getGraphSettings().config.projectorMode}toggleInvertedColors(){this.controller.dispatch({type:"set-inverted-colors",value:!this.controller.getInvertedColors()})}getAxisArrowMode(){return this.controller.getGraphSettings().xAxisArrowMode}setAxisArrowMode(e){this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:e,yAxisArrowMode:e})}getShowGrid(){return this.controller.getGraphSettings().showGrid}toggleGrid(){this.controller.dispatch({type:"set-graph-settings",showGrid:!this.getShowGrid()})}toggleArrows(){let e=this.getAxisArrowMode()==="NONE"?"BOTH":"NONE";this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:e,yAxisArrowMode:e})}showZoomSquareButton(){let e=this.controller.getAxisScaleSettings();return e.xAxisScale===e.yAxisScale&&!this.controller.getGraphSettings().squareAxes}getContainerStyle(){return this.controller.getKeypadHeight()?"bottom: 0":""}zoomSquare(){this.controller.dispatch({type:"zoom",direction:"square"})}};var $r=__dcg_shared_module_exports__['i'](ne());var Nm=class extends $r.Class{init(){this.controller=this.props.controller()}template(){return $r.createElement("div",{class:$r.const("dcg-zoom-container")},$r.createElement("div",{class:$r.const("dcg-zoominout-pillbox dcg-btn-flat-gray dcg-btn-flat-gray-group"),style:()=>({background:this.controller.getPillboxBackgroundColor()})},$r.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-tooltip-zoom-in"),gravity:this.const("w")},$r.createElement("div",{class:$r.const("dcg-action-zoomin"),role:$r.const("button"),tabindex:$r.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-zoom-in"),onTap:this.bindFn(this.zoomIn)},$r.createElement("i",{class:$r.const("dcg-icon dcg-icon-plus"),"aria-hidden":$r.const("true")}))),$r.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-tooltip-zoom-out"),gravity:this.const("w")},$r.createElement("div",{class:$r.const("dcg-option dcg-action-zoomout dcg-tooltip-e"),tooltip:()=>this.controller.s("graphing-calculator-label-tooltip-zoom-out"),role:$r.const("button"),tabindex:$r.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-zoom-out"),onTap:this.bindFn(this.zoomOut)},$r.createElement("i",{class:$r.const("dcg-icon dcg-icon-minus"),"aria-hidden":$r.const("true")})))),$r.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-tooltip-viewport-default"),gravity:this.const("w")},$r.createElement("div",{class:()=>({"dcg-btn-flat-gray":!0,"dcg-option":!0,"dcg-action-zoomrestore":!0,"dcg-disabled":this.isDefaultViewportRestored()}),"aria-disabled":this.bindFn(this.isDefaultViewportRestored),role:$r.const("button"),tabindex:()=>this.isDefaultViewportRestored()?-1:0,"aria-label":()=>this.controller.s("graphing-calculator-narration-viewport-restore-default"),onTap:this.bindFn(this.setDefaultViewport),style:()=>({background:this.controller.getPillboxBackgroundColor()}),manageFocus:this.const(ut({controller:this.controller,location:{type:"zoom-restore-btn"}}))},$r.createElement("i",{class:$r.const("dcg-icon dcg-icon-home"),"aria-hidden":$r.const("true")}))))}zoomIn(){this.controller.dispatch({type:"zoom",direction:"in"})}zoomOut(){this.controller.dispatch({type:"zoom",direction:"out"})}setDefaultViewport(){this.controller.dispatch({type:"set-default-viewport"})}isDefaultViewportRestored(){let e=this.controller.getGrapher();return!!e&&e.viewportController.isDefaultViewportRestored()}};var ea=__dcg_shared_module_exports__['i'](ne());var Bm=class extends ea.Class{init(){this.controller=this.props.controller()}template(){return ea.createElement("div",{class:ea.const("dcg-reset-container")},ea.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-tooltip-reset"),gravity:this.const("w")},ea.createElement("div",{class:ea.const("dcg-reset-pillbox dcg-action-reset dcg-btn-flat-gray"),role:ea.const("button"),tabindex:ea.const("0"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-reset"),onTap:this.bindFn(this.reset),style:()=>({background:this.controller.getPillboxBackgroundColor()})},ea.createElement("i",{class:ea.const("dcg-icon dcg-icon-reset"),"aria-hidden":ea.const("true")}))))}reset(){this.controller.dispatch({type:"reset-graph"})}};var{If:Km}=vn.Components,Um=class extends vn.Class{init(){this.controller=this.props.controller()}template(){return vn.createElement("div",null,vn.createElement(Km,{predicate:this.bindFn(this.shouldShowContainer)},()=>vn.createElement("div",{class:()=>({"dcg-pillbox-container":!0,"dcg-geometry-toolbar-present":this.controller.isGeoUIActive()}),role:()=>this.controller.isGeoUIActive()?void 0:"region","aria-label":()=>this.controller.isGeoUIActive()?void 0:this.controller.s("graphing-calculator-narration-graph-settings-controls")},vn.createElement("div",{class:vn.const("dcg-overgraph-pillbox-elements"),style:this.bindFn(this.getContainerStyle)},vn.createElement(Km,{predicate:this.bindFn(this.shouldShowGraphSettings)},()=>vn.createElement(Rm,{controller:this.props.controller})),vn.createElement(Km,{predicate:this.bindFn(this.shouldShowGeometrySettings)},()=>vn.createElement(ic,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{isPillbox:this.const(!0)}))),vn.createElement(Km,{predicate:this.bindFn(this.shouldShowResetButton)},()=>vn.createElement(Bm,{controller:this.props.controller})),vn.createElement(Km,{predicate:this.bindFn(this.shouldShowZoomButtons)},()=>vn.createElement(Nm,{controller:this.props.controller}))))),vn.createElement(Fm,{controller:()=>this.props.controller()}))}getContainerStyle(){let e=this.controller.isKeypadOpen()?this.controller.getKeypadHeight():0;return this.controller.isGraphSettingsOpen()?`bottom: ${e}px;`:"bottom: auto"}shouldShowContainer(){return this.shouldShowGeometrySettings()||this.shouldShowGraphSettings()||this.shouldShowZoomButtons()||this.shouldShowResetButton()}shouldShowGraphSettings(){return this.controller.getGraphSettings().config.settingsMenu&&!this.controller.isGeometry()}shouldShowGeometrySettings(){return this.controller.getGraphSettings().config.settingsMenu&&this.controller.isGeometry()&&this.controller.isNarrowGeometryHeader()}shouldShowZoomButtons(){return this.controller.getGraphSettings().config.zoomButtons&&!this.isViewportLocked()}isViewportLocked(){return this.controller.getGraphSettings().config.lockViewport||this.controller.getGraphSettings().userLockedViewport}shouldShowResetButton(){return this.controller.getGraphSettings().config.showResetButtonOnGraphpaper&&this.controller.hasDefaultState()}};var tr=__dcg_shared_module_exports__['i'](ne());var zr=__dcg_shared_module_exports__['i'](ne());var{Each:l6,SwitchUnion:c6,If:d6}=zr.Components,Bv=class extends zr.Class{init(){this.controller=this.props.controller()}template(){return zr.createElement("div",{role:zr.const("toolbar"),"aria-label":()=>this.controller.s("graphing-calculator-label-geometry-tools"),class:zr.const("dcg-geo-basic-tools dcg-animate-in-after-initial-load dcg-create-transformation-view")},zr.createElement(wp,{ariaLabel:()=>this.controller.s("account-shell-button-mygraphs-cancel"),controller:this.props.controller,message:this.bindFn(this.getMessage),onBack:this.bindFn(this.onCancel)}),l6(()=>this.getInputIndexes(),{item:e=>zr.createElement(Tk,{activeStep:this.bindFn(this.getInputIndex),controller:this.props.controller,toolSpec:()=>this.getToolSpec(),stepIdx:()=>e})}))}onCancel(){this.controller.dispatch({type:"select-geo-tool",tool:"selection"}),this.controller.dispatch({type:"set-focus-location",location:{type:"graph-paper"}})}getMessage(){return this.controller.raw("New "+this.controller.getActiveTool())}getInputIndex(){return this.controller.getGeoModel().getNonObjectsState().ui.currentTool.inputIndex}getInputIndexes(){return this.getToolSpec().inputs.map((e,r)=>r)}getToolSpec(){return this.controller.getGeoModel().getCurrentTool().getSpec()}},Tk=class extends zr.Class{init(){this.controller=this.props.controller()}template(){return c6(()=>this.getInputType(),{completed:()=>zr.createElement("span",{class:zr.const("dcg-step-completed")},zr.createElement("i",{class:zr.const("dcg-icon-check")})),upcoming:()=>zr.createElement("span",{class:zr.const("dcg-step-upcoming")},zr.createElement("span",null)),active:()=>zr.createElement("span",{class:zr.const("dcg-active-step")},zr.createElement("span",{class:zr.const("dcg-step-active-icon")},zr.createElement("span",null,()=>this.props.stepIdx()+1)),this.bindFn(this.getActiveString),zr.createElement(d6,{predicate:this.bindFn(this.isNumberInputStep)},()=>zr.createElement("span",{class:zr.const("dcg-input-flex-container"),didMount:this.bindFn(this.didMountNumberInput)},zr.createElement(Ir,{containerClass:()=>({"dcg-suffix-degree":this.getNumberUnits()==="\xB0","dcg-suffix-radian":this.getNumberUnits()==="rad"}),readonly:()=>!1,latex:()=>this.getNumberInputLatex(),ariaLabel:this.bindFn(this.getActiveString),isFocused:()=>this.isNumberInputFocused(),handleFocusChanged:(e,r)=>this.handleFocusedChanged(e,r),hasError:this.bindFn(this.doesNumberInputHaveError),controller:this.props.controller,handlePressedKey:(e,r)=>{this.handlePressedKey(e,r)},handleLatexChanged:e=>{this.handleLatexChanged(e)},dataLabelAttributeValue:this.const("transformation-number")}),zr.createElement("span",{class:()=>({"dcg-action-submit":!0,"dcg-disabled":this.isSubmitNumberDisabled(),"dcg-btn-blue":!0}),role:zr.const("button"),tabindex:()=>this.isSubmitNumberDisabled()?-1:0,"aria-disabled":this.bindFn(this.isSubmitNumberDisabled),onTap:e=>this.submitNumberInput({device:e.device})},()=>this.controller.raw("Go")))))})}getNumberUnits(){return this.controller.getActiveTool()==="rotation"?this.controller.isDegreeMode()?"\xB0":"rad":""}didMountNumberInput(){this.controller.dispatch({type:"set-focus-location",location:{type:"new-transformation-number"}});let e=this.getStep();if(e&&e.type==="number"){let r="",i=this.controller.getActiveTool();i==="rotation"?r=this.controller.isDegreeMode()?"90":"\\frac{\\pi}{2}":i==="dilation"&&(r="2"),r&&this.controller.runAfterDispatch(()=>{this.handleLatexChanged(r)})}}isNumberInputFocused(){let e=this.controller.getFocusLocation();return!!(e&&e.type==="new-transformation-number")}doesNumberInputHaveError(){if(!this.getNumberInputLatex())return!1;let r=this.props.toolSpec().outputs[0].id,{idMap:i}=this.controller.getGeoModel().getNonObjectsState().ui.currentTool,n=i[r];if(!n)return!0;let o=n+"=",a=Bu(this.controller.getListModel()).filter(c=>{if(c.type==="expression"){var u=c.latex.trim();return u.indexOf(o)===0}}),s=a[0];if(!s||a.length===0||a.length>1||s.error)return!0;let l=s.formula.typed_constant_value;return!l||!__dcg_shared_module_exports__['va'](l.valueType,__dcg_shared_module_exports__['oa'])}handlePressedKey(e,r){let i=qe.getFocusedMathquill();if(e==="Enter"){this.submitNumberInput({device:"keyboard"});return}i&&(i.keystroke(e,r),this.handleLatexChanged(i.latex()))}getNumberInputLatex(){return this.controller.getGeoModel().getCurrentTool().getNumberInputLatex()}isSubmitNumberDisabled(){return!!(this.doesNumberInputHaveError()||!this.getNumberInputLatex())}submitNumberInput(e){var s,l,c;if(this.isSubmitNumberDisabled())return;let r=this.controller.getGeoModel(),i=this.controller.getActiveTool(),n=r.getCurrentTool(),o=(s=n.getSpec)==null?void 0:s.call(n),{committed:a}=n.tryCommitResults();a&&(this.controller.dispatch({type:"commit-geo-objects",objects:a}),(c=(l=this.controller.getGrapher())==null?void 0:l.poiController)==null||c.speakReleaseAndUpdate(i,o,a),e.device==="keyboard"&&this.controller.dispatch({type:"set-focus-location",location:{type:"graph-paper"}}))}handleLatexChanged(e){this.getNumberInputLatex()!==e&&(this.controller.getGeoModel().getCurrentTool().onNumberInput(e),this.controller.getGeoModel().onPreviewChange())}handleFocusedChanged(e,r){e&&!this.isNumberInputFocused()?this.controller.dispatch({type:"set-focus-location",location:{type:"new-transformation-number"}}):this.isNumberInputFocused()&&this.controller.dispatch({type:"blur-focus-location",location:{type:"new-transformation-number"}})}getActiveString(){let e=this.getStep().hint;return e?this.props.controller().s(e):this.props.controller().raw("unknown instruction")}isNumberInputStep(){return this.getStep().type==="number"}getStep(){return this.props.toolSpec().inputs[this.props.stepIdx()]}getInputType(){let e=this.props.activeStep(),r=this.props.stepIdx();return r<e?"completed":r>e?"upcoming":"active"}};var{SwitchUnion:u6,If:Kv}=tr.Components,Uv=class extends tr.Class{constructor(){super(...arguments),this.afterInitialLoad=!1}init(){this.controller=this.props.controller()}template(){return tr.createElement("div",{class:()=>({"dcg-geometry-toolbar-view":!0,"dcg-after-initial-load":this.afterInitialLoad}),style:()=>({left:`${this.controller.computeMajorLayout().grapher.left}px`}),onTapStart:this.bindFn(this.onTapStart)},tr.createElement("div",{class:tr.const("dcg-header-left dcg-do-blur")},tr.createElement(Kv,{predicate:this.bindFn(this.showHamburger)},()=>tr.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-tooltip-open-graph"),gravity:this.const("se")},tr.createElement("div",{role:tr.const("button"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-open-graph"),tabindex:tr.const("0"),class:tr.const("dcg-action-opendrawer dcg-icon-btn dcg-in-api-action-opendrawer"),onTap:()=>this.controller.dispatch({type:"open-drawer"})},tr.createElement("i",{class:tr.const("dcg-icon-hamburger"),"aria-hidden":tr.const("true")})))),tr.createElement(Kv,{predicate:this.bindFn(this.showOpenExpressionsButton)},()=>tr.createElement("div",{class:tr.const("dcg-show-expressions-tab dcg-icon-btn"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-show-list"),role:tr.const("button"),tabindex:tr.const("0"),onTap:e=>{this.controller.dispatch({type:"show-expressions-list",focusHideIcon:e.device==="keyboard"})},manageFocus:this.const(ut({controller:this.controller,location:{type:"show-expression-list-btn"}}))},tr.createElement("i",{class:tr.const("dcg-icon-show"),"aria-hidden":tr.const("true")}))),tr.createElement(Kv,{predicate:this.bindFn(this.showUndoRedo)},()=>tr.createElement("div",{class:()=>({"dcg-geo-undo-redo-container":!0,"dcg-overgraph-undo-redo":this.undoRedoOverGraph()})},tr.createElement($p,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},this.props),{undoTooltipGravity:this.const("se"),redoTooltipGravity:this.const("s")}))))),tr.createElement("div",{class:tr.const("dcg-flex-spacer")}),u6(this.bindFn(this.getViewToShow),{tools:()=>tr.createElement(Iv,{controller:this.props.controller}),selectedItems:()=>tr.createElement(cw,{controller:this.props.controller}),createTransformation:()=>tr.createElement(Bv,{controller:this.props.controller})}),tr.createElement("div",{class:tr.const("dcg-flex-spacer")}),tr.createElement("div",{class:tr.const("dcg-header-right dcg-do-blur")},tr.createElement(Kv,{predicate:()=>this.controller.getGraphSettings().config.settingsMenu&&!this.controller.isNarrowGeometryHeader()},()=>tr.createElement(ic,__dcg_shared_module_exports__['b']({},this.props)))))}undoRedoOverGraph(){return this.controller.isNarrowGeometryHeader()}showUndoRedo(){return!this.controller.isListEnabled()}showHamburger(){return this.controller.getGraphSettings().config.showHamburger?!this.controller.isListEnabled()||!this.controller.isListVisible()||this.controller.isNarrow():!1}showOpenExpressionsButton(){return this.controller.isListEnabled()&&!this.controller.isListVisible()&&!this.controller.isNarrow()}willUpdate(){this.afterInitialLoad||this.getViewToShow()==="selectedItems"&&(this.afterInitialLoad=!0)}onTapStart(e){e.target.classList.contains("dcg-do-blur")&&this.controller.dispatch({type:"set-none-selected"})}getViewToShow(){return Fp(this.controller.getActiveTool())?"createTransformation":this.controller.getSelectedGeoExpression()||this.controller.hasMultipleItemsSelected()?"selectedItems":"tools"}};var Jt=__dcg_shared_module_exports__['i'](ne());var{If:qm}=Jt.Components,Gk=class extends Jt.Class{template(){return Jt.createElement("span",{class:Jt.const("dcg-toast")},Jt.createElement("i",{class:Jt.const("dcg-icon-error"),"aria-hidden":Jt.const("true")}),Jt.createElement(qm,{predicate:()=>!this.props.showUndo()&&(!this.props.showClose||this.props.showClose())},()=>Jt.createElement("i",{class:Jt.const("dcg-icon-remove"),onTap:()=>this.props.onClose&&this.props.onClose(),role:Jt.const("link"),tabindex:Jt.const(0),"aria-label":Jt.const("Dismiss Notice")})),Jt.createElement("span",{class:Jt.const("dcg-msg"),"aria-atomic":()=>!this.props.noAria(),"aria-live":()=>this.props.noAria()?"":"assertive"},()=>this.props.message()),Jt.createElement(qm,{predicate:this.props.showUndo},()=>Jt.createElement("a",{role:Jt.const("link"),tabindex:Jt.const(0),class:Jt.const("dcg-undo"),onTap:()=>this.props.onUndo&&this.props.onUndo()},()=>this.props.s("shared-calculator-label-toast-undo"))),Jt.createElement(qm,{predicate:this.props.showLearnMore},()=>Jt.createElement("a",{role:Jt.const("link"),tabindex:Jt.const(0),target:Jt.const("_blank"),onTap:()=>this.props.onLearnMore&&this.props.onLearnMore()},()=>this.props.s("shared-calculator-label-toast-learn-more"))),Jt.createElement(qm,{predicate:()=>!!this.props.link&&!!this.props.link()},()=>Jt.createElement("a",{role:Jt.const("link"),tabindex:Jt.const(0),target:()=>{var e;return(e=this.props.link().target)!=null?e:"_blank"},href:()=>this.props.link().url},()=>this.props.link().text)))}shouldUpdate(){return!!this.props.message()}},qv=class extends Jt.Class{template(){return Jt.createElement("div",{class:()=>({"dcg-toast-view":!0,"dcg-visible":!!this.props.message()}),"toast-style":()=>this.props.toastStyle&&this.props.toastStyle()},Jt.createElement(qm,{predicate:()=>!!this.props.message()},()=>Jt.createElement("div",{class:Jt.const("dcg-toast-wrapper")},Jt.createElement("div",{class:Jt.const("dcg-toast-cover")}),Jt.createElement(Gk,__dcg_shared_module_exports__['b']({},this.props)))))}};function Ak(t){let e="drag dragend dragenter dragover dragleave drop";t.on(e,r=>{r.preventDefault(),r.stopPropagation()})}var yt=__dcg_shared_module_exports__['i'](ne());at();var{If:Hm}=yt.Components,$m=class extends yt.Class{init(){this.controller=this.props.controller()}template(){return yt.createElement("div",{class:()=>({"dcg-geometry-settings-container":!0,"dcg-popover":!0,"dcg-constrained-height-popover":!0,"dcg-generic-options-menu":!0,"dcg-narrow-geometry-header":this.controller.isNarrowGeometryHeader()}),style:this.bindFn(this.getContainerStyle),didMount:this.bindFn(this.didMountContainer),didUnmount:this.bindFn(this.didUnmountContainer)},yt.createElement("div",{class:yt.const("dcg-popover-interior"),role:yt.const("region"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-geometry-settings")},yt.createElement("div",{class:yt.const("dcg-options-menu-section")},yt.createElement(kt,{onChange:this.bindFn(this.toggleInvertedColors),checked:()=>this.controller.getInvertedColors(),manageFocus:this.const(ut({controller:this.controller,location:{type:"settings",location:"reverse-contrast"}}))},()=>this.controller.s("graphing-calculator-label-settings-reverse-contrast")),yt.createElement(Hm,{predicate:()=>!this.controller.getLockViewportConfigSetting()},()=>yt.createElement("div",{class:yt.const("dcg-checkbox-title dcg-lock-viewport-option")},yt.createElement(kt,{onChange:()=>{this.controller.dispatch({type:"toggle-lock-viewport"})},checked:()=>this.controller.getLockViewportUserSetting()},()=>this.controller.s("graphing-calculator-label-settings-lock-viewport")),yt.createElement(Fd,{href:this.const("https://help.desmos.com/hc/en-us/articles/4405296853517#h_01FZX4DBWKD83TZVMH615XF3QA"),controller:this.props.controller})))),yt.createElement("div",{class:yt.const("dcg-options-menu-section")},yt.createElement("div",{class:yt.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-label-settings-grid"),yt.createElement(bn,{ariaLabel:()=>this.controller.s("graphing-calculator-label-settings-grid"),toggled:this.bindFn(this.getShowGrid),onChange:this.bindFn(this.toggleGrid)})),yt.createElement(Hm,{predicate:this.bindFn(this.getShowGrid)},()=>yt.createElement(kt,{onChange:this.bindFn(this.toggleMinorGridlines),checked:this.bindFn(this.getMinorGridlines)},()=>this.controller.s("graphing-calculator-label-settings-minor-gridlines")))),yt.createElement("div",{class:yt.const("dcg-options-menu-section")},yt.createElement("div",{class:yt.const("dcg-options-menu-section-title")},()=>this.controller.s("graphing-calculator-label-axes"),yt.createElement(bn,{ariaLabel:()=>this.controller.s("graphing-calculator-label-axes"),toggled:this.bindFn(this.getShowAxes),onChange:this.bindFn(this.toggleAxes)})),yt.createElement(Hm,{predicate:this.bindFn(this.getShowAxes)},()=>yt.createElement("div",null,yt.createElement(kt,{onChange:this.bindFn(this.toggleAxisNumbers),checked:this.bindFn(this.getAxisNumbers)},()=>this.controller.s("graphing-calculator-label-settings-axis-numbers")),yt.createElement("div",null,yt.createElement(kt,{onChange:this.bindFn(this.toggleArrows),checked:()=>this.getAxisArrowMode()!=="NONE"},()=>this.controller.s("graphing-calculator-label-settings-arrows")))))),yt.createElement(Hm,{predicate:this.bindFn(this.shouldShowBrailleSection)},()=>yt.createElement("div",{class:yt.const("dcg-options-menu-section")},yt.createElement("div",{class:yt.const("dcg-options-menu-section-title")},()=>this.controller.s("shared-calculator-narration-braille-mode"),yt.createElement(bn,{ariaLabel:()=>this.controller.s("shared-calculator-narration-braille-mode"),onChange:this.bindFn(this.toggleBrailleMode),toggled:()=>this.controller.getBrailleMode()!=="none"})),yt.createElement(Hm,{predicate:()=>this.controller.getBrailleMode()!=="none"},()=>yt.createElement("div",{class:yt.const("dcg-braille-options-container")},yt.createElement("div",{class:yt.const("dcg-braille-options-buttons")},yt.createElement(Oi,{ariaGroupLabel:()=>this.controller.s("shared-calculator-narration-braille-mode"),staticConfig:this.bindFn(this.getBrailleOptions)})),yt.createElement("div",{class:yt.const("dcg-checkbox-title dcg-six-key-checkbox")},yt.createElement(kt,{onChange:e=>this.controller.dispatch({type:"set-six-key-input",useSixKeyInput:e}),checked:()=>this.controller.getSixKeyInput()},()=>this.controller.s("graphing-calculator-label-settings-six-key-braille")),yt.createElement(Fd,{href:this.const("https://www.desmos.com/accessibility#braille"),controller:this.props.controller})),yt.createElement("div",{class:yt.const("dcg-refreshable-braille-note")},()=>this.controller.s("graphing-calculator-text-refreshable-braille-display-note")+" ",yt.createElement("a",{href:()=>"https://www.desmos.com/braille-examples?"+this.controller.getBrailleMode(),class:yt.const("dcg-shared-blue-link"),target:yt.const("_blank")},()=>this.controller.s("graphing-calculator-link-view-braille-examples"))))))),yt.createElement("div",{class:yt.const("dcg-options-menu-section dcg-radiangroup")},yt.createElement(Oi,{ariaGroupLabel:()=>this.controller.s("graphing-calculator-narration-settings-angle"),staticConfig:this.bindFn(this.getAngleModeOptions)}))))}shouldShowBrailleSection(){return this.controller.getBrailleControls()&&this.controller.getGraphSettings().config.expressions}getAngleModeOptions(){return[{key:"radians",label:()=>this.controller.s("graphing-calculator-button-settings-radians"),selected:()=>!this.getDegreeMode(),onSelect:()=>this.setDegreeMode(!1),focusHelperOptions:{controller:this.controller,location:{type:"settings",location:"radian-mode"}}},{key:"degrees",label:()=>this.controller.s("graphing-calculator-button-settings-degrees"),selected:()=>this.getDegreeMode(),onSelect:()=>this.setDegreeMode(!0),focusHelperOptions:{controller:this.controller,location:{type:"settings",location:"degree-mode"}}}]}getDegreeMode(){return!!this.controller.getGraphSettings().degreeMode}setDegreeMode(e){this.controller.dispatch({type:"set-graph-settings",degreeMode:e})}toggleBrailleMode(){this.controller.dispatch({type:"set-braille-mode",mode:this.controller.getBrailleMode()==="none"?"nemeth":"none"})}getBrailleOptions(){return[{key:"nemeth",label:()=>this.controller.s("shared-calculator-button-braille-mode-nemeth"),selected:()=>this.controller.getBrailleMode()==="nemeth",onSelect:()=>this.setBrailleMode("nemeth")},{key:"ueb",label:()=>this.controller.s("shared-calculator-button-braille-mode-ueb"),selected:()=>this.controller.getBrailleMode()==="ueb",onSelect:()=>this.setBrailleMode("ueb")}]}setBrailleMode(e){this.controller.dispatch({type:"set-braille-mode",mode:e})}didMountContainer(e){this.node=e,V(document).on("dcg-tapstart.geometry-settings-view wheel.geometry-settings-view",r=>{this.eventShouldClosePopover(r)&&this.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:r.device==="keyboard"})}),V(document).on("keydown.geometry-settings-view",r=>{let i=Le(r);if(i==="Esc"&&this.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:!0}),this.controller.isGraphSettingsOpen()&&i==="Tab"&&!r.altKey&&!r.metaKey&&!r.ctrlKey){let n=this.controller.getFocusLocation();if(!n||n.type!=="settings")return;r.shiftKey?r.shiftKey&&(n.location==="reverse-contrast"?(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),r.preventDefault(),r.stopPropagation()):n.location==="icon"&&(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"degree-mode"}}),r.preventDefault(),r.stopPropagation())):n.location==="icon"?(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"reverse-contrast"}}),r.preventDefault(),r.stopPropagation()):n.location==="degree-mode"&&(this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),r.preventDefault(),r.stopPropagation())}})}didUnmountContainer(){V(document).off(".geometry-settings-view")}didUpdate(){if(!this.controller.isGraphSettingsOpen())return;let e=this.controller.getKeypadHeight();e!==this.cachedKeypadHeight&&document.activeElement&&V(document.activeElement).closest(this.node).length&&ss(V(document.activeElement),V(this.node).find(".dcg-popover-interior"),50),this.cachedKeypadHeight=e}eventShouldClosePopover(e){let r=V(e.target),i=!!r.closest(this.node).length,n=!!r.closest(".dcg-action-settings").length,o=this.isMathquillFocused()&&r.closest(".dcg-keypad").length,a=!!r.closest(".dcg-action-undo").length||!!r.closest(".dcg-action-redo").length;return!(i||n||o||a)}isMathquillFocused(){return this.getFocusedLimit()!==void 0}getFocusedLimit(){let e=this.controller.getFocusLocation();if(e&&e.type==="settings")return e.location}getShowXAxis(){return!!this.controller.getGraphSettings().showXAxis}toggleAxes(){this.controller.dispatch({type:"set-graph-settings",showXAxis:!this.getShowXAxis(),showYAxis:!this.getShowXAxis()})}getShowAxes(){return!!this.controller.getGraphSettings().showXAxis}getAxisNumbers(){return!!this.controller.getGraphSettings().xAxisNumbers}toggleAxisNumbers(){let e=this.getAxisNumbers();this.controller.dispatch({type:"set-graph-settings",xAxisNumbers:!e,yAxisNumbers:!e,polarNumbers:!e})}getMinorGridlines(){return this.controller.getGraphSettings().xAxisMinorSubdivisions===0}toggleMinorGridlines(){let e=this.getMinorGridlines()?1:0;this.controller.dispatch({type:"set-graph-settings",yAxisMinorSubdivisions:e,xAxisMinorSubdivisions:e})}toggleInvertedColors(){this.controller.dispatch({type:"set-inverted-colors",value:!this.controller.getInvertedColors()})}getAxisArrowMode(){return this.controller.getGraphSettings().xAxisArrowMode}getShowGrid(){return this.controller.getGraphSettings().showGrid}toggleGrid(){this.controller.dispatch({type:"set-graph-settings",showGrid:!this.getShowGrid()})}toggleArrows(){let e=this.getAxisArrowMode()==="NONE"?"BOTH":"NONE";this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:e,yAxisArrowMode:e})}getContainerStyle(){return this.controller.getKeypadHeight()?"bottom: 0":""}};var{If:uh}=Kt.Components,zm=class extends Kt.Class{init(){this.controller=this.props.controller()}settings(){return this.controller.getGraphSettings()}template(){return Kt.createElement("div",{class:Kt.const("dcg-calculator-api-container"),style:Kt.const("width: 100%; height: 100%; position: relative;")},Kt.createElement("div",{class:()=>({"dcg-container":!0,"dcg-fullscreen":!this.controller.isListVisible(),"dcg-narrow":this.controller.isNarrow(),"dcg-PROJECTOR-MODE":this.settings().config.projectorMode,"dcg-inverted-colors":!!this.settings().config.invertedColors,"dcg-EDIT-LIST-MODE":this.controller.isInEditListMode(),"dcg-no-graphpaper":!this.settings().config.graphpaper,"dcg-no-branding":!this.settings().config.branding,"dcg-no-expression-topbar":!this.settings().config.expressionsTopbar,"dcg-default-border":!!this.settings().config.border,"dcg-no-hyperlinks":!this.settings().config.links,"dcg-has-background-color":this.controller.hasBackgroundColor(),"dcg-is-interactive":this.settings().config.expressions||!(this.settings().config.lockViewport||this.settings().userLockedViewport)}),style:()=>({"font-size":this.settings().config.fontSize+"px",background:this.getContainerBackgroundColor(),color:this.controller.getTextColor()}),role:Kt.const("application"),"aria-label":()=>this.controller.isGeometry()?this.controller.s("graphing-calculator-narration-main-desmos-geometry"):this.controller.s("graphing-calculator-narration-main-desmos-graphing-calculator"),"x-ms-format-detection":Kt.const("none"),didMount:this.bindFn(this.didMountRoot)},Kt.createElement(uh,{predicate:()=>this.controller.getGraphSettings().config.expressions},()=>Kt.createElement(Am,{controller:this.props.controller})),Kt.createElement(Tv,{controller:this.props.controller}),Kt.createElement(uh,{predicate:()=>this.controller.isListEnabled()&&!this.controller.isListVisible()&&(!this.controller.isGeometry()||this.controller.isNarrow())},()=>Kt.createElement("div",{class:()=>({"dcg-overgraph-icon-container":!0,"dcg-bottom-right":this.controller.isNarrow()})},Kt.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-tooltip-show-list"),gravity:()=>this.controller.isNarrow()?"nw":"se"},Kt.createElement("div",{class:()=>({"dcg-show-expressions-tab":!0,"dcg-overgraph-icon":!0,"dcg-rotated":this.controller.isNarrow()}),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-show-list"),role:Kt.const("button"),tabindex:Kt.const("0"),onTap:e=>{this.controller.dispatch({type:"show-expressions-list",focusHideIcon:e.device==="keyboard"})},manageFocus:this.const(ut({controller:this.controller,location:{type:"show-expression-list-btn"}}))},Kt.createElement("i",{class:Kt.const("dcg-icon-show"),"aria-hidden":Kt.const("true")}))))),Kt.createElement(uh,{predicate:this.bindFn(this.showHamburger)},()=>Kt.createElement("div",{class:Kt.const("dcg-overgraph-icon-container")},Kt.createElement(Ue,{tooltip:()=>this.controller.s("graphing-calculator-label-tooltip-open-graph"),gravity:this.const("se")},Kt.createElement("div",{role:Kt.const("button"),"aria-label":()=>this.controller.s("graphing-calculator-label-tooltip-open-graph"),class:Kt.const("dcg-action-opendrawer dcg-in-api-action-opendrawer dcg-overgraph-icon"),onTap:()=>this.controller.dispatch({type:"open-drawer"})},Kt.createElement("i",{class:Kt.const("dcg-icon-hamburger"),"aria-hidden":Kt.const("true")}))))),Kt.createElement(Um,{controller:this.props.controller}),Kt.createElement(uh,{predicate:()=>this.controller.isGeoUIActive()&&this.controller.getGraphSettings().config.settingsMenu&&this.controller.isGraphSettingsOpen()},()=>Kt.createElement($m,{controller:this.props.controller})),Kt.createElement(uh,{predicate:()=>this.controller.isGeoUIActive()},()=>Kt.createElement(Uv,{controller:this.props.controller})),Kt.createElement(qv,{message:()=>{let e=this.controller.getToastData().message;return this.controller.raw(e||"")},link:()=>this.controller.getToastData().link||void 0,showUndo:()=>!!this.controller.getToastData().undoCallback,showLearnMore:()=>!!this.controller.getToastData().learnMoreCallback,noAria:()=>!!this.controller.getToastData().noAria,toastStyle:()=>this.controller.getToastData().toastStyle,s:this.controller.s,onUndo:()=>this.controller.dispatch({type:"toast/undo"}),onLearnMore:()=>this.controller.dispatch({type:"toast/learn-more"}),onClose:()=>this.controller.dispatch({type:"toast/close"})}),Kt.createElement("div",{class:Kt.const("dcg-grapher")}),Kt.createElement(uh,{predicate:()=>this.controller.getGraphSettings().config.keypad},()=>Kt.createElement(Nv,{controller:this.props.controller}))))}showHamburger(){return!this.controller.getGraphSettings().config.showHamburger||this.controller.isGeometry()?!1:this.controller.isNarrow()}getContainerBackgroundColor(){return this.controller.hasTransparentBackground()?"none":this.controller.getBackgroundColor()}didMountRoot(e){yc(e),this.controller.getGraphSettings().config.disableScrollFix||Kw(e),this.setupFileDragDrop(e)}setupFileDragDrop(e){let r=V(e);Ak(r);let i=V(),n=this;function o(){i=V(),r.off(".filedraggedover"),n.controller.dispatch({type:"file-is-not-dragged-over"})}r.on("dragenter",a=>{this.controller.areImagesEnabled()&&(i.length===0&&r.on("dcg-tapstart.filedraggedover",o),i=i.add(a.target),this.controller.dispatch({type:"file-is-dragged-over"}))}).on("dragleave",a=>{i=i.not(a.target),i.length===0&&o()}).on("drop",o)}};var Hv=class extends ga{constructor(r){super();this.workerPool=r,this.guid=__dcg_shared_module_exports__['K']("worker-pool-connection"),this.worker=r.allocateWorker(),this.worker.__connections[this.guid]=this}destroy(){this.sendMessage({type:"destroy"}),delete this.worker.__connections[this.guid]}killWorker(){this.worker.__isFake||this.workerPool.killWorker(this.worker)}onWorkerKilled(){}onResponse(r){}sendMessage(r){this.worker.__isFake?this.worker.postMessage(r):this.worker.postMessage({connectionId:this.guid,originalMessage:r})}};function g_(t){var e={},r=new __dcg_shared_module_exports__['Mc'](i);function i(n,o){t({type:n,payload:o})}return e.postMessage=function(n){setTimeout(function(){r.processChangeSet(n)},0)},e}lb();var Wm="";try{Wm=ng(window.location.search,"workerThrottle"),Wm==null&&(Wm=ng(window.top.location.search,"workerThrottle"))}catch(t){}var f_=parseInt(Wm,10),Vk=0;function m_(t){return f_?function(e){Vk=Math.max(Date.now(),Vk)+f_,setTimeout(t,Vk-Date.now(),e)}:t}var ph=class extends ga{constructor(r=1/0){super();this.workers=[],this.maxWorkers=r}allowedToSpawnWorker(){return!!__dcg_worker_source_exports__['createWorker']&&this.workers.length<this.maxWorkers}killWorker(r){var i=__dcg_shared_module_exports__['z'](this.workers,r);i!==-1&&(r.terminate(),this.workers=__dcg_shared_module_exports__['x'](this.workers,r),__dcg_shared_module_exports__['t'](__dcg_shared_module_exports__['C'](r.__connections)).forEach(function(n){n&&n.onWorkerKilled&&n.onWorkerKilled()}))}spawnWorker(){if(!__dcg_worker_source_exports__['createWorker'])return null;try{var r=__dcg_worker_source_exports__['createWorker']();return r.__connections={},r.__isFake=!1,r.onerror=function(i){__dcg_shared_module_exports__['Gc'].log(i)},r.addEventListener("message",m_(function(i){var n=i.data;if(!(n&&n.log)&&n&&n.connectionId){var o=r.__connections[n.connectionId];o&&o.onResponse(n.originalMessage)}})),this.workers.push(r),r}catch(i){return null}}spawnFakeWorker(){var r=g_(m_(function(i){var n=__dcg_shared_module_exports__['C'](r.__connections)[0];n&&n.onResponse(i)}));return r.__isFake=!0,r.__connections={},r}findLeastUsedWorker(){var r=function(n){return __dcg_shared_module_exports__['w'](n.__connections)},i=__dcg_shared_module_exports__['u'](this.workers,r)[0];return i}allocateWorker(){var r=null;return this.allowedToSpawnWorker()&&(r=this.spawnWorker()),r||(r=this.findLeastUsedWorker()),r||(r=this.spawnFakeWorker()),r}};var p6=4e3,Uc=class{constructor(e){this.__ticksEnabled=!0;this.listeners={processChangeSet(e){var r={},i={};for(var n in e.graphChanges){var o=e.graphChanges[n];o===void 0?i[n]=!0:(__dcg_shared_module_exports__['Jb'](o),r[n]=o)}var a={};for(var n in e.intersectionChanges)i[n]||(a[n]=e.intersectionChanges[n]);var s=!!this.changeSet;this.onEvaluatorResults({evaluationStates:e.statusChanges,graphData:{addedGraphs:r,removedGraphs:i,intersections:a},renderSlowly:!!e.isCompleteState,timingData:e.timingData,eventUpdates:e.eventUpdates});let l=e.syncId;for(;this.syncRequests.length&&l!==void 0&&this.syncRequests[0].id<=l;)this.syncRequests.shift().callback();this.markJobFinished(),s&&this._processChangeSet()}};this.__state={},this.changeSet=null,this.cumulativeChangeSet={},this.syncId=1,this.syncRequests=[],e||(e=new ph),this.workerPool=e,this.createWorkerPoolConnection()}privateGetWorkerPool(){return this.workerPool}privateGetWorkerPoolConnection(){return this.workerPoolConnection}createWorkerPoolConnection(){this.workerPoolConnection&&(this.workerPoolConnection.onResponse=function(){},this.workerPoolConnection.onWorkerKilled=function(){}),this.workerPoolConnection=new Hv(this.workerPool),this.markJobFinished(),this.workerPoolConnection.onResponse=e=>{this.shouldIgnoreWorkerMessage(e)?e.type==="processChangeSet"&&(this.markJobFinished(),this._processChangeSet()):this.listeners[e.type].call(this,e.payload)},this.workerPoolConnection.onWorkerKilled=()=>{var e=this.hasJobInWorker();this.createWorkerPoolConnection(),e?(this.changeSet=__dcg_shared_module_exports__['M'](this.cumulativeChangeSet),this.__state.changed=!0,this.__state.droppedMessage=!0):(this.changeSet=__dcg_shared_module_exports__['M'](this.cumulativeChangeSet),this.__state.changed=!1),this.processChangeSet()}}destroy(){this.workerPoolConnection&&(this.workerPoolConnection.onResponse=function(){},this.workerPoolConnection.onWorkerKilled=function(){},this.workerPoolConnection.destroy())}shouldIgnoreWorkerMessage(e){return this.__suspendUntilSyncId?!e||!e.payload?!0:!(e.payload.syncId>=this.__suspendUntilSyncId):!1}suspend(){(!this.changeSet||!this.changeSet.syncId)&&(this.syncId++,this.applyToChangeSets(e=>{e.syncId=this.syncId})),this.__suspendUntilSyncId=this.changeSet.syncId}markJobFinished(){this.__state.droppedMessage=!1,this.__jobStartTime=-1,this.__suspendUntilSyncId=void 0}startJobTimer(){this.__jobStartTime=new Date().getTime()}hasJobInWorker(){return this.__jobStartTime!==-1}getJobElapsedTime(){return this.hasJobInWorker()?new Date().getTime()-this.__jobStartTime:NaN}setTicksEnabled(e){this.__ticksEnabled=e}tick(){this.__ticksEnabled&&this._processChangeSet()}processChangeSet(){this.__processChangeSetRequested=!0}_processChangeSet(){if(this._syncEvaluatorConfig(),!this.__processChangeSetRequested)return;let e=this.getJobElapsedTime()>=p6;if(this.__state.droppedMessage&&e){this.workerPoolConnection.killWorker();return}if(this.__state.changed&&this.changeSet)if(this.changeSet.syncId||(this.syncId++,this.changeSet.syncId=this.syncId),this.hasJobInWorker())this.changeSet.isCompleteState&&e&&this.workerPoolConnection.killWorker();else{let r=this.changeSet;this.changeSet=null,this.__state.changed=!1,this.startJobTimer(),this.workerPoolConnection.sendMessage(r),this.__processChangeSetRequested=!1}}notifyWhenSynced(e){if(this._syncEvaluatorConfig(),!this.hasJobInWorker()&&!this.changeSet){setTimeout(e,0);return}this.syncId++,this.syncRequests.push({id:this.syncId,callback:e}),this.applyToChangeSets(r=>{r.syncId=this.syncId})}applyToChangeSets(e){this.__state.changed=!0,this.changeSet||(this.changeSet={}),this.cumulativeChangeSet||(this.cumulativeChangeSet={}),e(this.changeSet),e(this.cumulativeChangeSet),this.processChangeSet()}clearStatementsAndStartCompleteState(){this.hasJobInWorker()&&this.suspend(),this.applyToChangeSets(function(e){e.isCompleteState=!0,delete e.statements})}markUndoRedoState(){this.applyToChangeSets(function(e){e.isUndoRedoState=!0})}addStatement(e){this.applyToChangeSets(function(r){r.statements||(r.statements={}),r.statements[e.id]=__dcg_shared_module_exports__['M'](e)})}removeStatement(e){this.applyToChangeSets(function(r){r.statements||(r.statements={}),r.removes||(r.removes={}),delete r.statements[e],r.removes[e]=!0})}addActionStepEvent(e){this.applyToChangeSets(function(r){r.events||(r.events=[]),r.events.push({type:"step",expressionId:e})})}addClockTickEvent(e,r){this.applyToChangeSets(function(i){i.events||(i.events=[]),i.events.push({type:"clock-tick",id:e,isFirstTick:r})})}addClickEvent(e,r){this.applyToChangeSets(function(i){i.events||(i.events=[]),r===void 0&&(r=0),i.events.push({type:"click",expressionId:e,indexVar:r})})}_syncEvaluatorConfig(){if(this.readEvaluatorConfig){var e=this.readEvaluatorConfig();for(let r in e)this._applyIfChanged(e,r)}}_applyIfChanged(e,r){let i=this.cumulativeChangeSet&&this.cumulativeChangeSet[r],n=e[r];__dcg_shared_module_exports__['E'](i,n)||this.applyToChangeSets(function(o){o[r]=n})}};function dl(t){return t==="es-ES"?(__dcg_shared_module_exports__['Gc'].warn("{language: 'es-ES'} has been deprecated. Proceeding with {language: 'es'}"),"es"):t}Us();var h6=0,jm=class{constructor(e,r,i,n){e||(e=document.createElement("div"));let o=document.createElement("div");o.className="dcg-wrapper",o.style.width="100%",o.style.height="100%",e.appendChild(o),this.__id=h6++;let a=new as;this.graphSettings=a;for(let w in i)a.config.setProperty(w,i[w]);let s=new Gd(a);this.controller=s,n&&s.dispatch({type:"ui/container-resized",size:n}),this.rootElt=o,this.view=hh.mountToNode(zm,this.rootElt,{controller:hh.const(s)});let l=new Uc(r);this.controller.setEvaluator(l),this.controller.setRootElt(this.rootElt);let c=s.find$(".dcg-grapher"),u=new Hl(c,a,this.controller,l);this.controller.setGrapher(u),a.registerCallbacks(u,l),this.controller.initStateStack(),l.readEvaluatorConfig=()=>({evaluationMode:s.isGeometry()?"geometry":"graphing",globalRandomSeed:a.randomSeed,degreeMode:a.degreeMode,viewState:s.getViewState(),selectedIds:s.getPropagatedSelectedIds(),restrictedFunctions:a.config.restrictedFunctions,forceEnableGeometryFunctions:a.config.forceEnableGeometryFunctions,distributions:a.config.distributions,pointsOfInterest:a.config.pointsOfInterest,plotSingleVariableImplicitEquations:a.config.plotSingleVariableImplicitEquations,plotImplicits:a.config.plotImplicits,plotInequalities:a.config.plotInequalities,sliders:a.config.sliders,actions:!!a.config.actions,substitutions:!!a.config.substitutions,dimensions:s.getGrapherDimensions()}),l.onEvaluatorResults=w=>{this.controller.dispatch({type:"on-evaluator-changes",changes:w.evaluationStates,timingData:w.timingData,graphData:w.graphData,eventUpdates:w.eventUpdates}),u.redrawAllLayers()},this.unsubFunc=this.controller.subToChanges(()=>{this.controller.doesDOMHaveSize()&&(this.view.update(),u.update());var w=!1;p()&&(w=!0),w&&this.controller.doesDOMHaveSize()&&(this.view.update(),u.update())});let h=new Tn;h.setProperties({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0}}),this.graphpaperBounds=h;function p(){var w=!1,b=s.computeMajorLayout(),D={left:b.grapher.left,right:b.grapher.left+b.grapher.width,width:b.grapher.width,top:b.grapher.top,bottom:b.grapher.top+b.grapher.height,height:b.grapher.height},I=u.getCurrentViewport(),E={top:I.ymax,bottom:I.ymin,left:I.xmin,right:I.xmax,width:I.xmax-I.xmin,height:I.ymax-I.ymin};__dcg_shared_module_exports__['E'](E,h.mathCoordinates)||(h.setProperty("mathCoordinates",E),w=!0);var G=D.height>0&&D.width>0;return G&&!__dcg_shared_module_exports__['E'](D,h.pixelCoordinates)&&(h.setProperty("pixelCoordinates",D),w=!0),w}V(this.rootElt).on("keydown.calculator-"+this.__id,w=>{this.grapher&&this.grapher.audioGraph.handleKeydown(w),this.instanceHotkeys.handleKeydown(w)}),V(window).on("dcg-tapstart.calculator-"+this.__id,w=>{let b=V(w.target),D=!!b.closest(this.rootElt).length,I=w.wasHandled("create-expression-with-keyboard"),E=!!b.closest(".dcg-api-shared-keypad-root").length,G=!!b.hasClass("dcg-shell");if(!D&&!E&&!G&&!I&&s.dispatch({type:"set-none-selected"}),w.wasHandled("do-not-clear-poi-labels")||(u.traceLayer.clearOpenedPOI(),u.redrawAllLayers()),s.isInEditListMode()){let T=b.closest(".dcg-exppanel").length===0&&b.closest(".dcg-options-menu").length===0&&b.closest(".dcg-expression-top-bar").length===0&&b.closest(".dcg-keypad").length===0;(!D||T)&&s.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!1})}}),this.grapher=u,this.evaluator=l,this.tourManager=new zx,this.controller.dispatch({type:"set-blank"});let g=["degreeMode"],y={};g.forEach(function(w){i[w]!==void 0&&(y[w]=i[w])}),a.setGraphSettings(y),a.config.expressionsCollapsed&&this.setOptions({expressionsCollapsed:!0}),a.config.capExpressionSize&&this.setOptions({capExpressionSize:!0}),a.config.hasOwnProperty("pointsOfInterest")&&this.setOptions({pointsOfInterest:a.config.pointsOfInterest}),a.config.hasOwnProperty("backgroundColor")&&this.setOptions({backgroundColor:a.config.backgroundColor}),a.config.hasOwnProperty("textColor")&&this.setOptions({textColor:a.config.textColor}),a.config.observe("language",()=>{let w=this.controller.getState();this.controller.dispatch({type:"set-state",state:w}),this.tourManager&&(this.tourManager.closingMsg=(b,D)=>"<b>"+b+"</b><br>"+this.controller.s("graphing-tours-label-self-destruct",{seconds:D}))}),a.config.observe("forceLogModeRegressions",()=>{a.config.forceLogModeRegressions&&this.controller.setAllRegressionsToLogMode()}),this.instanceHotkeys=new Xf(s)}setOption(e,r){this.controller.getGraphSettings().config.setProperty(e,r)}setOptions(e){let r,i=this.controller.getGraphSettings().config,n=__dcg_shared_module_exports__['b']({},e);e.hasOwnProperty("backgroundColor")&&(__dcg_shared_module_exports__['cc'](e.backgroundColor)||(__dcg_shared_module_exports__['Gc'].warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)"),delete n.backgroundColor)),e.hasOwnProperty("textColor")&&(__dcg_shared_module_exports__['cc'](e.textColor)||(__dcg_shared_module_exports__['Gc'].warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"),delete n.textColor)),e.hasOwnProperty("menus")&&(__dcg_shared_module_exports__['Gc'].warn("Deprecated option: menus. Setting settingsMenu and expressionsTopbar instead."),e.hasOwnProperty("settingsMenu")||(n.settingsMenu=!!e.menus),e.hasOwnProperty("expressionsTopbar")||(n.expressionsTopbar=!!e.menus),delete n.menus),e.hasOwnProperty("solutions")&&(__dcg_shared_module_exports__['Gc'].warn("Deprecated option: solutions. Setting pointsOfInterest instead."),e.hasOwnProperty("pointsOfInterest")||(n.pointsOfInterest=!!e.solutions),delete n.solutions),e.hasOwnProperty("administerSecretFolders")&&(__dcg_shared_module_exports__['Gc'].warn("Deprecated option: administerSecretFolders. Setting authorFeatures instead."),e.hasOwnProperty("authorFeatures")||(n.authorFeatures=!!e.administerSecretFolders),delete n.administerSecretFolders),e.hasOwnProperty("singleVariableSolutions")&&(__dcg_shared_module_exports__['Gc'].warn("Deprecated option: singleVariableSolutions has been removed."),delete n.singleVariableSolutions),e.graphpaper===!1&&(e.expressionsCollapsed&&(n.expressionsCollapsed=!1,__dcg_shared_module_exports__['Gc'].warn("Cannot set graphpaper: false with expressionsCollapsed: true. Proceeding with expressionsCollapsed: false.")),i.expressionsCollapsed&&(n.expressionsCollapsed=!1,__dcg_shared_module_exports__['Gc'].warn("Disabling the graphpaper with the expressions list collapsed is not supported.Setting expressionsCollapsed: false.")),e.zoomButtons&&(n.zoomButtons=!1,__dcg_shared_module_exports__['Gc'].warn("Cannot set graphpaper: false with zoomButtons: true. Proceeding with zoomButtons: false.")),e.showResetButtonOnGraphpaper&&(n.showResetButtonOnGraphpaper=!1,__dcg_shared_module_exports__['Gc'].warn("Cannot set graphpaper: false with showResetButtonOnGraphpaper: true. Proceeding with showResetButtonOnGraphpaper: false.")),i.zoomButtons&&(n.zoomButtons=!1,__dcg_shared_module_exports__['Gc'].warn("Disabling the graphpaper with the zoomButtons visible is not supported. Setting zoomButtons: false.")),i.showResetButtonOnGraphpaper&&(n.showResetButtonOnGraphpaper=!1,__dcg_shared_module_exports__['Gc'].warn("Disabling the graphpaper with the reset button visible is not supported. Setting showResetButtonOnGraphpaper: false."))),i.graphpaper===!1&&(e.expressionsCollapsed||e.zoomButtons||e.showResetButtonOnGraphpaper)&&(n.graphpaper=!0,__dcg_shared_module_exports__['Gc'].warn("Must have visible graphpaper to proceed. Setting graphpaper: true.")),e.lockViewport&&e.zoomButtons&&(n.zoomButtons=!1,__dcg_shared_module_exports__['Gc'].warn("Cannot set zoomButtons: true and lockViewport: true. Proceeding with zoomButtons: false.")),i.lockViewport&&e.zoomButtons&&(n.lockViewport=!1,__dcg_shared_module_exports__['Gc'].warn("Cannot set zoomButtons: true while the viewport is locked. Setting lockViewport: false.")),i.zoomButtons&&e.lockViewport&&(n.zoomButtons=!1,__dcg_shared_module_exports__['Gc'].warn("Cannot lock the viewport without hiding the zoom buttons. Setting zoomButtons: false."));function o(u){let{notes:h,folders:p,images:g}=u;return h===!1||p===!1||g===!1}let a=o(e),s=o(__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},i),e)),l=i.pasteGraphLink,c=e.pasteGraphLink;a?(c||l)&&(n.pasteGraphLink=!1,__dcg_shared_module_exports__['Gc'].warn("Cannot disable creating note, folder, or image expressions without disabling graph link pasting. Setting pasteGraphLink: false.")):c&&s&&(n.notes=!0,n.folders=!0,n.images=!0,__dcg_shared_module_exports__['Gc'].warn("Cannot enable graph link pasting while the creation of notes, folders, or images is disable. Setting notes: true, folders: true, images: true.")),e.language&&(n.language=dl(e.language)),e.logScales&&this.controller.isGeometry()&&(__dcg_shared_module_exports__['Gc'].warn("Cannot set logScales: true in the geometry calculator"),delete n.logScales);for(r in n)if(n.hasOwnProperty(r))switch(r){case"expressionsCollapsed":this.setOption("expressionsCollapsed",!!n.expressionsCollapsed),n.expressionsCollapsed?this.controller.dispatch({type:"hide-expressions-list",focusShowIcon:!1}):this.controller.dispatch({type:"show-expressions-list",focusHideIcon:!1});break;case"qwertyKeyboard":this.setOption("qwertyKeyboard",!!n.qwertyKeyboard),this.controller.isLetterKeypadOpen()&&this.controller.dispatch({type:"keypad/abc"});break;case"degreeMode":this.setOption("degreeMode",!!n.degreeMode),this.controller.getGraphSettings().setGraphSettings({degreeMode:!!n.degreeMode});break;case"actions":{let h=n[r];if(h===void 0||h===this.controller.getGraphSettings().config.actions)break;this.setOption(r,h),this.setState(this.getState(),{allowUndo:!0});break}case"substitutions":{let h=n[r];if(h===void 0||h===this.controller.getGraphSettings().config.substitutions)break;this.setOption(r,h),this.setState(this.getState(),{allowUndo:!0});break}case"product":{__dcg_shared_module_exports__['Gc'].warn("Cannot update 'product' setting.");break}case"keypad":case"graphpaper":case"expressions":case"settingsMenu":case"zoomButtons":case"showResetButtonOnGraphpaper":case"expressionsTopbar":case"pointsOfInterest":case"trace":case"border":case"lockViewport":case"authorFeatures":case"advancedStyling":case"images":case"imageUploadCallback":case"folders":case"notes":case"sliders":case"links":case"restrictedFunctions":case"forceEnableGeometryFunctions":case"distributions":case"pasteGraphLink":case"pasteTableData":case"clearIntoDegreeMode":case"autosize":case"plotSingleVariableImplicitEquations":case"plotImplicits":case"plotInequalities":case"colors":case"branding":case"disableScrollFix":case"invertedColors":case"fontSize":case"projectorMode":case"language":case"onlyTraceSelected":case"disableMouseInteractions":case"nativeOnscreenKeypad":case"functionDefinition":case"plaidMode":case"pasteGraphLinkCallback":case"editOnWeb":case"crossOriginSaveTest":case"backgroundColor":case"textColor":case"enableTabindex":case"audioTraceReverseExpressions":case"showHamburger":case"decimalToFraction":case"capExpressionSize":case"transparentBackground":case"pauseWhenOffscreen":case"hideGeoUI":case"brailleMode":case"sixKeyInput":case"brailleControls":case"zoomFit":case"forceLogModeRegressions":case"audio":case"logScales":{let h=n[r];h!==void 0&&this.setOption(r,h);break}default:return r}}setViewport(e){let r=new Si(e[0],e[1],e[2],e[3]);this.grapher.viewportController.setViewport(r),this.controller.dispatch({type:"commit-user-requested-viewport",viewport:r})}resize(e){e&&this.controller.dispatch({type:"ui/container-resized",size:e})}interceptTouch(){let e=V(this.rootElt),r=e.find(".dcg-expression-top-bar");r.add(e.find(".dcg-keypad")),r.length&&(r.on("touchstart",i=>{V(i.target).is("input, textarea")||i.preventDefault()}),r.on("touchend",i=>{V(i.target).closest(".dcg-do-not-blur").length>0||ok()}))}destroy(){V(window).off(".calculator-"+this.__id);let e=V(this.rootElt);e.off(".calculator-"+this.__id),this.unsubFunc(),this.graphSettings.unobserveAll(),this.evaluator&&this.evaluator.destroy(),this.grapher&&this.grapher.remove(),hh.unmountFromNode(this.rootElt),e.remove()}tick(e,r){r||(this.controller.handleTick(e),this.controller.updateRenderShellsAfterDispatch()),this.evaluator.tick(),this.grapher&&this.grapher.tick(e)}getState(e){return this.controller.getState(e)}setBlank(e){this.controller.dispatch({type:"set-blank",opts:e||{}})}setState(e,r){this.controller.dispatch({type:"set-state",state:e,opts:r||{}})}};function g6(){var t=V('<div style="z-index:99999; position: absolute; left: 0; top: 0;background:#FFF">waiting...</div>').appendTo("body"),e=window,r=[];e.Calc.controller.onEvaluatorChangesSpy=function(){r.push(Date.now())},setInterval(function(){for(var i=Date.now();i-r[0]>1e3;)r.shift();t.text(r.length+" fps")},100)}function f6(){var t=V('<div style="z-index:99999; position: absolute; left: 0; top: 0;background:#FFF">waiting...</div>').appendTo("body"),e=window,r=[],i=0;e.Calc.controller.onEvaluatorChangesSpy=function(s,l){let{timeInWorker:c}=l;r[i%100]=c,i+=1};function n(){let s=0;for(let c of r)s+=c;let l=s/r.length;t.text(l.toFixed(1)+" ms")}let o;function a(){cancelAnimationFrame(o),o=requestAnimationFrame(a),n()}a()}var m6=!!En().simulationFPS;m6&&(Ym=setInterval(function(){var t=window.Calc;t&&(clearInterval(Ym),setTimeout(g6,1e3))},1));var Ym,y6=!!En().timeInWorker;y6&&(Ym=setInterval(function(){var e=window.Calc;e&&(clearInterval(Ym),setTimeout(f6,1e3))},1));var Ym;at();var y_=1,gh={},Jm=!1;function x_(){Jm=!0,requestAnimationFrame(b6)}var b_={};function b6(){b_.rafSPY&&b_.rafSPY(),Jm=!1;for(let t in gh)gh[t].detectAndEnqueueEvent(),Jm=!0;if(Jm){x_();for(let t in gh)gh[t].dispatchQueuedEvent()}}var Rd=class{constructor(e,r){this.elt=e;this.cb=r;this.destroyed=!1;this.lastOffscreen=!1;this.id=y_.toString(),this.appliedScale={x:1,y:1},y_++}stopWatching(){delete gh[this.id]}startWatching(){this.checkForChanges(),gh[this.id]=this,Jm||x_()}resetAppliedScalingAndGetBoundingClientRect(){var e=this.elt.getBoundingClientRect(),r={x:e.width/this.elt.offsetWidth,y:e.height/this.elt.offsetHeight};if(r.x===this.appliedScale.x&&r.y===this.appliedScale.y)return e;let i=V(this.elt).children(".dcg-wrapper")[0];return i&&(this.appliedScale=r,V(i).css({transform:"scale("+1/this.appliedScale.x+","+1/this.appliedScale.y+")",width:100*this.appliedScale.x+"%",height:100*this.appliedScale.y+"%","transform-origin":"0 0"})),e}detectAndEnqueueEvent(){if(this.destroyed)return;let e=!0;if(!(document.body&&document.body.contains(this.elt)))this.lastSize&&(this.lastSize=void 0,this.queuedEvent={type:"removed",target:this.elt,isOffscreen:!0});else{let i=this.resetAppliedScalingAndGetBoundingClientRect();e=i.top>window.innerHeight||i.bottom<0||i.left>window.innerWidth||i.right<0,this.lastSize?(i.width!==this.lastSize.width||i.height!==this.lastSize.height)&&(this.lastSize.width=i.width,this.lastSize.height=i.height,this.queuedEvent={type:"resized",target:this.elt,size:__dcg_shared_module_exports__['b']({},this.lastSize),isOffscreen:e}):(this.lastSize={width:i.width,height:i.height},this.queuedEvent={type:"added",target:this.elt,size:__dcg_shared_module_exports__['b']({},this.lastSize),isOffscreen:e})}e!==this.lastOffscreen&&(this.lastOffscreen=e,this.queuedEvent||(this.queuedEvent={type:"offscreen-noop",target:this.elt,isOffscreen:e}))}dispatchQueuedEvent(){let e=this.queuedEvent;e&&(this.queuedEvent=void 0,this.cb(e))}checkForChanges(){this.detectAndEnqueueEvent(),this.dispatchQueuedEvent()}destroy(){this.stopWatching();for(var e in this)this.hasOwnProperty(e)&&delete this[e];this.destroyed=!0}};function w_(t){var e=t.mode,r=t.width,i=t.height,n=t.currentBounds,o=t.graphpaperAspectRatio,a=t.mathAspectRatio,s=t.mathBounds,l=r/i,c={x:n.left+n.width/2,y:n.bottom+n.height/2};if(s.left===void 0!=(s.right===void 0)||s.bottom===void 0!=(s.top===void 0))return __dcg_shared_module_exports__['Gc'].warn('asyncScreenshot: cannot specify "left" bound without "right" or "bottom" bound without "top". Got: '+s),n;var u=s.left!==void 0&&s.right!==void 0,h=s.bottom!==void 0&&s.top!==void 0,p=u&&h,g,y,w,b,D,I,E,G,T,P;switch(e){case"stretch":return p?s:u?{left:s.left,right:s.right,bottom:n.bottom,top:n.top}:h?{left:n.left,right:n.right,bottom:s.bottom,top:s.top}:n;case"contain":return p?(b=s.right-s.left,D=s.top-s.bottom,I={x:s.left+b/2,y:s.bottom+D/2},w=b/D,l>w?(y=D/i,g=y*a,{left:I.x-g*r/2,right:I.x+g*r/2,bottom:s.bottom,top:s.top}):(g=b/r,y=g/a,{left:s.left,right:s.right,bottom:I.y-y*i/2,top:I.y+y*i/2})):u?(E=s.right-s.left,G=s.left+E/2,w=E/n.height,l>w?(y=n.height/i,g=y*a,{left:G-g*r/2,right:G+g*r/2,bottom:n.bottom,top:n.top}):(g=E/r,y=g/a,{left:s.left,right:s.right,bottom:c.y-y*i/2,top:c.y+y*i/2})):h?(T=s.top-s.bottom,P=s.bottom+T/2,w=n.width/T,l>w?(y=T/i,g=y*a,{left:c.x-g*r/2,right:c.x+g*r/2,bottom:s.bottom,top:s.top}):(g=n.width/r,y=g/a,{left:n.left,right:n.right,bottom:P-y*i/2,top:P+y*i/2})):l>o?(y=n.height/i,g=y*a,{left:c.x-g*r/2,right:c.x+g*r/2,bottom:n.bottom,top:n.top}):(g=n.width/r,y=g/a,{left:n.left,right:n.right,bottom:c.y-y*i/2,top:c.y+y*i/2});case"preserveX":return p?(b=s.right-s.left,D=s.top-s.bottom,I={x:s.left+b/2,y:s.bottom+D/2},w=b/D,g=b/r,y=g/a,{left:s.left,right:s.right,bottom:I.y-y*i/2,top:I.y+y*i/2}):h?(T=s.top-s.bottom,P=s.bottom+T/2,w=n.width/T,g=n.width/r,y=g/a,{left:n.left,right:n.right,bottom:P-y*i/2,top:P+y*i/2}):u?(E=s.right-s.left,g=E/r,y=g/a,{left:s.left,right:s.right,bottom:c.y-y*i/2,top:c.y+y*i/2}):(E=n.right-n.left,g=E/r,y=g/a,{left:n.left,right:n.right,bottom:c.y-y*i/2,top:c.y+y*i/2});case"preserveY":return p?(b=s.right-s.left,D=s.top-s.bottom,I={x:s.left+b/2,y:s.bottom+D/2},w=b/D,y=D/i,g=y*a,{left:I.x-g*r/2,right:I.x+g*r/2,bottom:s.bottom,top:s.top}):u?(E=s.right-s.left,G=s.left+E/2,w=E/n.height,y=n.height/i,g=y*a,{left:G-g*r/2,right:G+g*r/2,bottom:n.bottom,top:n.top}):h?(T=s.top-s.bottom,y=T/i,g=y*a,{left:c.x-g*r/2,right:c.x+g*r/2,bottom:s.bottom,top:s.top}):(T=n.top-n.bottom,y=T/i,g=y*a,{left:c.x-g*r/2,right:c.x+g*r/2,bottom:n.bottom,top:n.top});default:return n}}var zv=class{constructor(e){this.mq=e,this.id=e.id,this.data=e.data}simulateUserChangedLatex(){qe.simulateUserChangedLatex(this.mq)}simulateKeypress(e){qe.simulateKeypress(this.mq,e)}latex(e){return e===void 0?this.mq.latex():(this.mq.latex(e),this.simulateUserChangedLatex(),this)}reflow(){this.mq.reflow()}el(){return this.mq.el()}getAriaLabel(){return this.mq.getAriaLabel()}setAriaLabel(e){return this.mq.setAriaLabel(e)}html(){return this.mq.html()}mathspeak(){return this.mq.mathspeak()}text(){return this.mq.text()}selection(){return this.mq.selection()}select(){return this.mq.select(),this}moveToRightEnd(){return this.mq.moveToRightEnd(),this}moveToLeftEnd(){return this.mq.moveToLeftEnd(),this}cmd(e){return this.mq.cmd(e),this.simulateUserChangedLatex(),this}write(e){return this.mq.write(e),this.simulateUserChangedLatex(),this}keystroke(e){return this.simulateKeypress(e),this}typedText(e){return this.mq.typedText(e),this.simulateUserChangedLatex(),this}clearSelection(){return this.mq.clearSelection(),this}getAriaPostLabel(){return this.mq.getAriaPostLabel()}setAriaPostLabel(e,r){return this.mq.setAriaPostLabel(e,r),this}blur(){return this.mq.blur(),this}focus(){return this.mq.focus(),this}revert(){return this.mq.revert()}ignoreNextMousedown(e){return this.mq.ignoreNextMousedown(e),this}clickAt(e,r,i){return this.mq.clickAt(e,r,i),this}};lb();var v_=ng(location.search,"nworkers"),C_=4;v_&&(C_=parseInt(v_,10));var fh=new ph(C_);var Lk={keypad:!0,graphpaper:!0,expressions:!0,settingsMenu:!0,zoomButtons:!0,showResetButtonOnGraphpaper:!1,expressionsTopbar:!0,capExpressionSize:!1,pointsOfInterest:!0,trace:!0,border:!0,lockViewport:!1,expressionsCollapsed:!1,authorFeatures:!1,advancedStyling:!1,images:!0,imageUploadCallback:Hx,folders:!0,notes:!0,sliders:!0,links:!0,qwertyKeyboard:!0,restrictedFunctions:!1,forceEnableGeometryFunctions:!1,pasteGraphLink:!1,pasteTableData:!0,degreeMode:!1,clearIntoDegreeMode:!1,autosize:!0,plotSingleVariableImplicitEquations:!0,plotImplicits:!0,plotInequalities:!0,colors:{RED:Vx,BLUE:Lx,GREEN:Px,ORANGE:_x,PURPLE:Ox,BLACK:Fx},invertedColors:!1,functionDefinition:!0,projectorMode:!1,decimalToFraction:!0,fontSize:16,language:"en",backgroundColor:"#fff",textColor:"#000",distributions:!0,brailleMode:"none",sixKeyInput:!1,brailleControls:!0,zoomFit:!0,forceLogModeRegressions:!1,actions:"auto",audio:!0},S_=Object.keys(Lk),E_={product:"graphing",showHamburger:!1,disableScrollFix:!1,branding:!0,onlyTraceSelected:!1,disableMouseInteractions:!1,nativeOnscreenKeypad:!1,plaidMode:!1,pasteGraphLinkCallback:void 0,editOnWeb:!1,crossOriginSaveTest:!1,enableTabindex:!0,audioTraceReverseExpressions:!1,transparentBackground:!1,pauseWhenOffscreen:!1,hideGeoUI:!1,substitutions:!0,logScales:!1},x6={solutions:!0,menus:!0,singleVariableSolutions:!0,clickableObjects:!1,administerSecretFolders:!1},Wv=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},Lk),E_);function D_(t){return!!(Lk.hasOwnProperty(t)||E_.hasOwnProperty(t)||x6.hasOwnProperty(t))}function jv(t){var e=__dcg_shared_module_exports__['M'](Wv);for(var r in t)e.hasOwnProperty(r)&&(e[r]=t[r]);return __dcg_shared_module_exports__['cc'](e.backgroundColor)||(e.backgroundColor=Wv.backgroundColor,__dcg_shared_module_exports__['Gc'].warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)")),__dcg_shared_module_exports__['cc'](e.textColor)||(e.textColor=Wv.textColor,__dcg_shared_module_exports__['Gc'].warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)")),e.actions!==!0&&e.actions!==!1&&e.actions!=="auto"&&(e.actions=Wv.actions,__dcg_shared_module_exports__['Gc'].warn("Invalid actions setting. Must be true, false, or 'auto'.")),t.zoomButtons===void 0&&(!e.graphpaper||e.lockViewport)&&(e.zoomButtons=!1),t.images===void 0&&(e.graphpaper||(e.images=!1)),t.hasOwnProperty("menus")&&(__dcg_shared_module_exports__['Gc'].warn("As of API version 0.4, the 'menus' option is deprecated and has been split into 'settingsMenu' (boolean) and 'expressionsTopbar' (boolean)."),t.hasOwnProperty("settingsMenu")||(e.settingsMenu=!!t.menus),t.hasOwnProperty("expressionsTopbar")||(e.expressionsTopbar=!!t.menus)),t.hasOwnProperty("solutions")&&(__dcg_shared_module_exports__['Gc'].warn("As of API v1.0, the 'solutions' option is deprecated and has been replaced with 'pointsOfInterest' (boolean)."),t.hasOwnProperty("pointsOfInterest")||(e.pointsOfInterest=!!t.solutions)),t.hasOwnProperty("singleVariableSolutions")&&__dcg_shared_module_exports__['Gc'].warn("As of API v1.0, the 'singleVariableSolutions' has been removed. The calculator no longer displays solutions to single variable equations."),t.hasOwnProperty("clickableObjects")&&(__dcg_shared_module_exports__['Gc'].warn("As of API v1.7, the 'clickableObjects' option is deprecated and has been replaced with 'actions'."),t.clickableObjects===!0&&!t.hasOwnProperty("actions")&&(e.actions=!0)),t.hasOwnProperty("administerSecretFolders")&&(__dcg_shared_module_exports__['Gc'].warn("As of API v1.8, the 'administerSecretFolders' option is deprecated and has been subsumed under 'authorFeatures'."),t.administerSecretFolders===!0&&!t.hasOwnProperty("authorFeatures")&&(e.authorFeatures=!0)),e.graphpaper||(e.expressionsCollapsed&&(e.expressionsCollapsed=!1,__dcg_shared_module_exports__['Gc'].warn("Desmos API initialized with bad options. graphpaper: false and expressionsCollapsed: true are incompatible. Proceeding with expressionsCollapsed: false.")),e.zoomButtons&&(e.zoomButtons=!1,__dcg_shared_module_exports__['Gc'].warn("Desmos API initialized with bad options. graphpaper: false and zoomButtons: true are incompatible. Proceeding with zoomButtons: false.")),e.showResetButtonOnGraphpaper&&(e.showResetButtonOnGraphpaper=!1,__dcg_shared_module_exports__['Gc'].warn("Desmos API initialized with bad options. graphpaper: false and showResetButtonOnGraphpaper: true are incompatible. Proceeding with showResetButtonOnGraphpaper: false."))),e.lockViewport&&e.zoomButtons&&(e.zoomButtons=!1,__dcg_shared_module_exports__['Gc'].warn("Desmos API initialized with bad options. lockViewport: true and zoomButtons: true are incompatible. Proceeding with zoomButtons: false.")),(e.notes===!1||e.folders===!1||e.images===!1)&&e.pasteGraphLink===!0&&(e.pasteGraphLink=!1,__dcg_shared_module_exports__['Gc'].warn("Desmos API initialized with bad options. pasteGraphLink: true is incompatible with disabling the creation of note, folder, or image expressions. Proceeding with pasteGraphLink: false.")),e.language&&(e.language=dl(e.language)),e}function k_(t,e){var r={},i={};for(var n in t)D_(n)?r[n]=t[n]:L1(n)?i[n]=t[n]:e||__dcg_shared_module_exports__['Gc'].warn("Unrecognized setting: "+n+". Ignoring.");return{configOptions:r,settingsOptions:i}}function I_(t,e){var r={};return e.hasOwnProperty("x")&&(r.x=t.mapX(e.x)),e.hasOwnProperty("y")&&(r.y=t.mapY(e.y)),r}var T_=[],Pk=!1,M_=new Map;function w6(t){let e=M_.get(t);return e||(e=new t,M_.set(t,e)),e}function G_(t){if(!t||Pk)return;let e;for(;(e=T_.shift())&&e.api._destroyed;);if(!e)return;let r=e;Pk=!0;let{options:i,mathBounds:n,state:o,callback:a}=r;var s=w6(t);s.setState(o),s.setMathBounds(n),["majorAxisOpacity","minorAxisOpacity","axisLineOffset","axisLineWidth","labelSize","graphLineWidth","pointLineWidth"].forEach(g=>{g==="axisLineWidth"?s._calc.grapher.settings.setProperty(g,r.api._calc.grapher.settings[g]):s._calc.grapher.settings[g]=r.api._calc.grapher.settings[g]});var c=s._calc.evaluator,u=()=>{s._calc.grapher.asyncScreenshot(i,g=>{Pk=!1,G_(t),a(g)})},h=r.api._calc.controller,p=Vl(function(){h.areAnyImagesLoading()||(bd(p),c.notifyWhenSynced(u))})}var Nd=class extends ga{constructor(r,i,n){super();this._destroyed=!1;this.isOffscreen=!1;var o=k_(i||{},!0),a=jv(o.configOptions),s=o.settingsOptions;this._calc=new jm(r,fh,a),this._calc.interceptTouch(),this.controller=this._calc.controller,this.controller.onEventsEmitted=l=>{let c=this.controller.getSelectedItem();this.setProperty("isAnyExpressionSelected",!!c),this.setProperty("selectedExpressionId",c?c.id:void 0),this.setProperty("expressionAnalysis",this.controller.getExpressionAnalysis());var u=qe.getFocusedMathquill();this.setProperty("focusedMathQuill",u?new zv(u):void 0);for(var h in l){if(!l.hasOwnProperty(h))continue;let p=l[h];p&&this.triggerEvent(h,p)}},this._calc.graphpaperBounds.observeAndSync("mathCoordinates",this._syncGraphpaperBounds.bind(this)),this._calc.graphpaperBounds.observeAndSync("pixelCoordinates",this._syncGraphpaperBounds.bind(this)),this.colors=this.controller.getColors(),this._initGraphSettings(),this.updateSettings(s),this._sharedClockBusToken=Vl(l=>this.withControllerInAPIMode(()=>{var c=this._calc.grapher.settings.config.pauseWhenOffscreen&&this.isOffscreen;this._calc.tick(l,c)})),this.domChangeDetector=new Rd(r,l=>this.withControllerInAPIMode(()=>{switch(this.isOffscreen=l.isOffscreen,l.type){case"offscreen-noop":break;case"added":this._calc.resize(l.size);break;case"removed":break;case"resized":this._calc.resize(l.size);break}})),a.autosize?this.domChangeDetector.startWatching():this.domChangeDetector.checkForChanges(),typeof n=="function"&&n(this)}destroy(){this.controller.onEventsEmitted=function(){},this._calc.destroy(),bd(this._sharedClockBusToken),this.domChangeDetector.destroy();function r(a){__dcg_shared_module_exports__['Gc'].warn("You've destroyed this API instance. You can no longer call ."+a+"()")}for(var i={},n=this;n;)Object.getOwnPropertyNames(n).forEach(s=>i[s]=!0),n=Object.getPrototypeOf(n);for(var o in i)typeof this[o]=="function"?this[o]=r.bind(this,o):this.hasOwnProperty(o)&&delete this[o];this.destroy=function(){},this._destroyed=!0}withControllerInAPIMode(r){try{return this.controller.pushAPIMethodCall(),r()}finally{this.controller.popAPIMethodCall()}}_syncGraphpaperBounds(){return this.withControllerInAPIMode(()=>{this.controller.runAfterDispatch(()=>{this.setProperty("graphpaperBounds",{mathCoordinates:this._calc.graphpaperBounds.mathCoordinates,pixelCoordinates:this._calc.graphpaperBounds.pixelCoordinates})})})}_initGraphSettings(){return this.withControllerInAPIMode(()=>{var r=new Tn;this.settings=this.graphSettings=r,V1.forEach(i=>{this._calc.grapher.settings.observeAndSync(i,()=>{this.controller.runAfterDispatch(()=>{r.setProperty(i,this._calc.grapher.settings[i])})})}),S_.forEach(i=>{this._calc.grapher.settings.config.observeAndSync(i,()=>{this.controller.runAfterDispatch(()=>{r.setProperty(i,this._calc.grapher.settings.config[i])})})})})}updateSettings(r){return this.withControllerInAPIMode(()=>{var i=k_(r,!1),n=i.configOptions,o=i.settingsOptions;__dcg_shared_module_exports__['F'](n)||this._calc.setOptions(n),__dcg_shared_module_exports__['F'](o)||this._calc.grapher.settings.setGraphSettings(o),this.notifyControllerOfAPICall()})}setGraphSettings(r){return this.withControllerInAPIMode(()=>{__dcg_shared_module_exports__['Gc'].warn("As of API v0.8 the 'setGraphSettings' method is deprecated and has been renamed 'updateSettings.'"),this.updateSettings(r),this.setGraphSettings=this.updateSettings,this.notifyControllerOfAPICall()})}fetchLanguage(r){return this.withControllerInAPIMode(()=>Ax(r))}setDefaultState(r){return this.withControllerInAPIMode(()=>{this._calc.grapher.settings.setProperty("defaultState",r),this.notifyControllerOfAPICall()})}mathToPixels(r){return this.withControllerInAPIMode(()=>{var i=po.fromRects(this.graphpaperBounds.mathCoordinates,this.graphpaperBounds.pixelCoordinates);return I_(i,r)})}pixelsToMath(r){return this.withControllerInAPIMode(()=>{var i=po.fromRects(this.graphpaperBounds.pixelCoordinates,this.graphpaperBounds.mathCoordinates);return I_(i,r)})}notifyControllerOfAPICall(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"render"})})}setExpression(r){return this.withControllerInAPIMode(()=>{var i=this.controller,n=i.getItemModel(r.id),o=n&&n.type,a=Kx(r,o,this.controller);if(a)if(o)this.controller.dispatch({type:"set-expression-properties-from-api",id:a.id,properties:a});else{if(a.type==="image")return;this.controller.dispatch({type:"add-item-to-end-from-api",state:a})}})}setExpressions(r){return this.withControllerInAPIMode(()=>{r.forEach(this.setExpression.bind(this))})}removeExpression(r){return this.withControllerInAPIMode(()=>{var i=r.id.toString();this.controller.dispatch({type:"remove-item-by-id",id:i})})}removeExpressions(r){return this.withControllerInAPIMode(()=>{r.forEach(this.removeExpression.bind(this))})}removeSelected(){return this.withControllerInAPIMode(()=>{var r=this.controller.getSelectedItem();if(!r)return;let{id:i}=r;return this.controller.dispatch({type:"remove-item-by-id",id:i}),i})}setMathBounds(r){return this.withControllerInAPIMode(()=>{r&&r.left<r.right&&r.bottom<r.top?(this._calc.setViewport([r.left,r.right,r.bottom,r.top]),this._calc.controller.markSquareAxesAfterUserEditedViewport()):__dcg_shared_module_exports__['Gc'].warn("Invalid bounds argument. Expected a bounds object with bounds.bottom < bounds.top, and bounds.left < bounds.right. Got "+JSON.stringify(r)),this.notifyControllerOfAPICall()})}setViewport(r){return this.withControllerInAPIMode(()=>{r.length==4&&r[1]>r[0]&&r[3]>r[2]?(this._calc.setViewport(r),this._calc.controller.markSquareAxesAfterUserEditedViewport()):__dcg_shared_module_exports__['Gc'].warn("Invalid viewport.  Expected [xmin, xmax, ymin, ymax].  Got "+r),this.notifyControllerOfAPICall()})}resize(){return this.withControllerInAPIMode(()=>{this.domChangeDetector.checkForChanges()})}getState(r){return this.withControllerInAPIMode(()=>this.controller.getState(r))}getExpressions(){return this.withControllerInAPIMode(()=>{var r=this.getState({stripDefaults:!1}).expressions.list;return r.map(Bx)})}setBlank(r){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"set-blank",opts:r||{}})})}setState(r,i){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"set-state",state:r,opts:i||{}})})}undo(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"undo"})})}redo(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"redo"})})}clearHistory(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"clear-undoredo-history"})})}newRandomSeed(){return this.withControllerInAPIMode(()=>{this.updateSettings({randomSeed:al()})})}screenshot(r){return this.withControllerInAPIMode(()=>(r||(r={}),r=this._validateBrailleScreenshotOptions(r),this._calc.grapher.screenshot(r)))}_getMathAspectRatio(){return this.withControllerInAPIMode(()=>{var r=this.graphpaperBounds.mathCoordinates,i=this._calc.grapher.getProjection().pixelCoordinates,n=i.right-i.left,o=i.bottom-i.top,a=r.width/n,s=r.height/o;return a/s})}isProjectionUniform(){return this.withControllerInAPIMode(()=>!!this._calc.grapher.getProjection().settings.squareAxes)}_validateBrailleScreenshotOptions(r){return this.withControllerInAPIMode(()=>{r=__dcg_shared_module_exports__['M'](r);var i=r.braille;if(i){let n=i.embosserModel;if(!n)return __dcg_shared_module_exports__['Gc'].warn("Screenshot braille options requires an embosser model to be specified. "),__dcg_shared_module_exports__['Gc'].warn("Continuing with non-braille screenshot."),delete r.braille,r;if(n==="etc"&&(i.embosserModel="etc11"),n==="vpmax"&&(i.embosserModel="vpmax11"),i.embosserModel!=="etc8"&&i.embosserModel!=="etc11"&&i.embosserModel!=="vpmax8"&&i.embosserModel!=="vpmax11")return __dcg_shared_module_exports__['Gc'].warn('Unknown screenshot braille embosser model. Valid models are "etc" and "vpmax".'),__dcg_shared_module_exports__['Gc'].warn("Continuing with non-braille screenshot."),delete r.braille,r;i.brailleMode!=="nemeth"&&i.brailleMode!=="ueb"&&(__dcg_shared_module_exports__['Gc'].warn("Screenshot options braille.brailleMode must be nemeth or ueb. Proceeding with nemeth."),i.brailleMode="nemeth"),r.width&&(__dcg_shared_module_exports__['Gc'].warn("Screenshot width option is ignored when exporting Braille."),delete r.width),r.height&&(__dcg_shared_module_exports__['Gc'].warn("Screenshot height option is ignored when exporting Braille."),delete r.height),r.targetPixelRatio&&(__dcg_shared_module_exports__['Gc'].warn("Screenshot targetPixelRatio option is ignored when exporting Braille."),delete r.targetPixelRatio),r.preserveAxisNumbers&&(__dcg_shared_module_exports__['Gc'].warn("Screenshot preserveAxisNumbers option is ignored when exporting Braille."),delete r.preserveAxisNumbers)}return r})}_validateAsyncScreenshotOpts(r){return this.withControllerInAPIMode(()=>{r=__dcg_shared_module_exports__['M'](r);let i=r.mode||"contain",n=r.width||r.height||this.graphpaperBounds.pixelCoordinates.width,o=r.height||r.width||this.graphpaperBounds.pixelCoordinates.height,a=r.targetPixelRatio||1;a<1&&(a=1);let s=r.preserveAxisNumbers;r.hasOwnProperty("format")||(r.svg?(r.format="svg",delete r.svg):r.format="png");let l=r.mathBounds||{},c=this._getMathAspectRatio(),u=this.graphpaperBounds.pixelCoordinates.width/this.graphpaperBounds.pixelCoordinates.height,h=w_({mode:i,width:n,height:o,currentBounds:this.graphpaperBounds.mathCoordinates,graphpaperAspectRatio:u,mathAspectRatio:c,mathBounds:l});return{opts:__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},r),{width:n,height:o,targetPixelRatio:a,preserveAxisNumbers:s}),mathBounds:h}})}asyncScreenshot(r,i){if(!arguments.length){__dcg_shared_module_exports__['Gc'].warn("asyncScreenshot expects a callback");return}if(arguments.length===1)if(typeof r!="function"){__dcg_shared_module_exports__['Gc'].warn("asyncScreenshot expects a callback");return}else i=r,r={};return this.withControllerInAPIMode(()=>{r||(r={}),r=this._validateBrailleScreenshotOptions(r);let{opts:n,mathBounds:o}=this._validateAsyncScreenshotOpts(r);T_.push({api:this,options:n,mathBounds:o,state:this.getState(),callback:i}),G_(this.constructor)})}setOptions(r){return this.withControllerInAPIMode(()=>{var i=this._calc.setOptions(r);return this.notifyControllerOfAPICall(),i})}focusFirstExpression(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"focus-first-expression"})})}openKeypad(){return this.withControllerInAPIMode(()=>{this.controller.dispatch({type:"keypad/set-minimized",minimized:!1})})}HelperExpression(r){return this.withControllerInAPIMode(()=>{var i=r&&r.latex||"",n=new Tn;return n.latex=i,this.controller.dispatch({type:"add-helper-expression",state:{type:"helper-expression",id:this.controller.generateId(),latex:i,proxy:n}}),n})}};var mh=class extends Nd{constructor(e,r,i){super(e,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},r),{product:"graphing"}),i)}};var Yv=class{constructor(e,r){var i=new as;for(var n in r)i.config.setProperty(n,r[n]);this.controller=new Gd(i);var o=new Uc(e);this.controller.setEvaluator(o),o.readEvaluatorConfig=()=>({evaluationMode:this.controller.isGeometry()?"geometry":"graphing",globalRandomSeed:i.randomSeed,degreeMode:i.degreeMode,restrictedFunctions:i.config.restrictedFunctions,distributions:i.config.distributions,pointsOfInterest:i.config.pointsOfInterest,plotSingleVariableImplicitEquations:i.config.plotSingleVariableImplicitEquations,plotImplicits:i.config.plotImplicits,plotInequalities:i.config.plotInequalities,sliders:i.config.sliders,actions:i.config.actions}),o.onEvaluatorResults=s=>{this.controller.dispatch({type:"on-evaluator-changes",changes:s.evaluationStates,timingData:s.timingData,eventUpdates:s.eventUpdates})};var a=new Tn;a.setProperties({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0}}),this.graphpaperBounds=a,this.evaluator=o,this.setBlank()}setBlank(e){this.controller.dispatch({type:"set-blank",opts:e})}tick(){this.evaluator.tick()}destroy(){this.evaluator.destroy()}};var yh=class{constructor(e){this._calc=new Yv(fh,jv(__dcg_shared_module_exports__['b']({},e))),this.controller=this._calc.controller,this._sharedClockBusToken=Vl(()=>{this._calc.tick()})}destroy(){this._calc.destroy(),bd(this._sharedClockBusToken);function e(o){__dcg_shared_module_exports__['Gc'].warn("You've destroyed this API instance. You can no longer call ."+o+"()")}for(var r={},i=this;i;)Object.getOwnPropertyNames(i).forEach(a=>r[a]=!0),i=Object.getPrototypeOf(i);for(var n in r)typeof this[n]=="function"?this[n]=e.bind(this,n):this.hasOwnProperty(n)&&delete this[n];this.destroy=function(){}}setExpression(e){var r=this.controller,i=r.getItemModel(e.id),n=i&&i.type,o=Kx(e,n,this.controller);if(o)if(n)this.controller.dispatch({type:"set-expression-properties-from-api",id:o.id,properties:o});else{if(o.type==="image")return;this.controller.dispatch({type:"add-item-to-end-from-api",state:o})}}setExpressions(e){e.forEach(this.setExpression.bind(this))}removeExpression(e){var r=e.id.toString();this.controller.dispatch({type:"remove-item-by-id",id:r})}removeExpressions(e){e.forEach(this.removeExpression.bind(this))}getState(e){return this.controller.getState(e)}getExpressions(){var e=this.getState({stripDefaults:!1}).expressions.list;return e.map(Bx)}setBlank(e){this.controller.dispatch({type:"set-blank",opts:e||{}})}setState(e,r){this.controller.dispatch({type:"set-state",state:e,opts:r||{}})}HelperExpression(e){var r=e&&e.latex||"",i=new Tn;return i.latex=r,this.controller.dispatch({type:"add-helper-expression",state:{type:"helper-expression",id:this.controller.generateId(),latex:r,proxy:i}}),i}resize(){}};var kh=__dcg_shared_module_exports__['i'](ne());var Bd=class{constructor(e){if(this.rootElt=e,this.eventModel=new Tn,!e)throw new Error("must pass an HTMLElement to the API")}setupDomChangeDetector(e){this.autoSize=e,Kw(this.rootElt),this.domChangeDetector=new Rd(this.rootElt,r=>{switch(r.type){case"added":this.view=this.onCreateView(),this.onResizeView(r.size);break;case"removed":this.onDestroyView(),this.view=void 0;break;case"resized":this.onResizeView(r.size);break}}),this.autoSize!==!1?this.domChangeDetector.startWatching():this.domChangeDetector.checkForChanges()}detach(){__dcg_shared_module_exports__['Gc'].warn(".detach() is deprecated. It should no longer be necessary")}destroy(){this.view&&this.onDestroyView(),this.domChangeDetector.destroy();function e(o){__dcg_shared_module_exports__['Gc'].warn("You've destroyed this API instance. You can no longer call ."+o+"()")}for(var r={},i=this;i;)Object.getOwnPropertyNames(i).forEach(a=>r[a]=!0),i=Object.getPrototypeOf(i);for(var n in r)typeof this[n]=="function"?this[n]=e.bind(this,n):this.hasOwnProperty(n)&&delete this[n];this.destroy=function(){}}resize(){this.domChangeDetector.checkForChanges()}updateView(){this.view&&document.body&&document.body.contains(this.rootElt)&&this.view.update()}triggerEvent(e,r){this.eventModel.triggerEvent(e,r)}observeEvent(e,r){this.eventModel.observeEvent(e,r)}unobserveEvent(e){this.eventModel.unobserveEvent(e)}};var Xm=class{constructor({evaluationMode:e,additionalFunctions:r,functionDefinition:i,replaceRoundWithReciprocal:n,workerPool:o}){this._evaluations={};this._nextObjectId=0;this.store=new ys({expressions:{1:{id:"1",latex:"",braille:"",type:"latex",displayAsFraction:!1}},order:["1"],settings:{degreeMode:!1},ui:{focus:void 0}});this.evaluationMode=e,this.additionalFunctions=r,this.functionDefinition=i,this.replaceRoundWithReciprocal=n,this.workerPool=o,this._setupEvaluator(),this.clear(),this._sharedClockBusToken=Vl(()=>{this._evaluator.tick()})}isSingleExpression(){return this.evaluationMode==="singleExpressionScientific"||this.evaluationMode==="singleExpressionFourFunction"}destroy(){bd(this._sharedClockBusToken)}generateObjectId(){return(this._nextObjectId++).toString()}updateNextObjectId(){let e=this.store.getState().order;this._nextObjectId=0;let r=/^[0-9]+$/;for(let i of e)if(r.test(i)){let n=parseInt(i,10);n>=this._nextObjectId&&(this._nextObjectId=n+1)}}clearShouldDebounceUndoRedo(){this._shouldDebounceUndoRedo=!1}markShouldDebounceUndoRedo(){this._shouldDebounceUndoRedo=!0}getShouldDebounceUndoRedo(){return this._shouldDebounceUndoRedo}clearCachedBrailleValues(){for(let e of this.getExpressionOrder())this.store.set(["expressions",e,"braille"],"")}getState(){return this.store.getState()}getPersistedState(){let{expressions:e,order:r,settings:i}=this.getState();return{expressions:{list:r.map(n=>{var o=e[n];return{id:o.id,latex:o.latex,displayAsFraction:o.displayAsFraction}})},settings:i}}setState(e){this.store.set(e),this._updateIndexes(),this.updateNextObjectId()}setStateFromAPI(e){let r=[],i={};e.expressions.list.forEach(n=>{r.push(n.id),i[n.id]={id:n.id,latex:n.latex,braille:"",type:"latex",displayAsFraction:!!n.displayAsFraction}}),this.setState({expressions:i,order:r,settings:e.settings,ui:{focus:void 0}})}canClear(){if(this.getNumberOfExpressions()>1)return!0;let e=this.getExpressionOrder()[0];return this.getExpressionLatex(e)!==""}clear(){this.setState({expressions:{1:{id:"1",type:"latex",latex:"",braille:"",displayAsFraction:!1}},ui:{focus:void 0},order:["1"],settings:this.getState().settings})}getExpressionOrder(){return this.store.getState().order}getNumberOfExpressions(){return this.getExpressionOrder().length}getExpressionById(e){return this.getState().expressions[e]}getExpressionIndex(e){return this._indexes[e]}_getExpressionByIndex(e){let r=this.getExpressionOrder()[e];return this.getExpressionById(r)}_updateIndexes(){this._indexes={};let e=0;for(let r of this.getExpressionOrder())this._indexes[r]=e,e+=1;this._evaluate()}_usesAnsById(e){return this.getExpressionById(e).latex.indexOf("\\operatorname{ans}")!==-1}_getPreviousExpById(e){let r=this.getExpressionIndex(e);return this._getExpressionByIndex(r-1)}createBlankAfterId(e){if(this.isSingleExpression()||!this.getExpressionById(e).latex)return;let r=this.getExpressionIndex(e),i=this.generateObjectId();this.store.shallowMutate("order",n=>{n.splice(r+1,0,i)}),this.store.shallowMutate("expressions",n=>{n[i]={id:i,latex:"",braille:"",type:"latex",displayAsFraction:!1}}),this._updateIndexes(),this.setFocusedById(i,!0)}conditionallyCopyPrevious(e){let r=this._getPreviousExpById(e),i=this.getExpressionById(e);r!=null&&i.latex===""&&this._usesAnsById(r.id)&&this.setLatexById(e,r.latex)}backspaceAtFrontOfId(e){if(this.getExpressionById(e).latex!==""||this.getNumberOfExpressions()===1)return;let i=this.getExpressionIndex(e);this.store.shallowMutate("order",n=>{n.splice(i,1)}),this.store.shallowMutate("expressions",n=>{delete n[e]}),this._updateIndexes(),this._setFocusedByIndex(Math.max(i-1,0),!0)}setLatexById(e,r){this.store.set(["expressions",e,"latex"],r),this.store.set(["expressions",e,"braille"],""),r===""&&this.setFractionEvaluation(e,!1),this._evaluate()}setLatexAndBrailleById(e,r,i){this.store.set(["expressions",e,"latex"],r),this.store.set(["expressions",e,"braille"],i),r===""&&this.setFractionEvaluation(e,!1),this._evaluate()}setFractionEvaluation(e,r){this.store.set(["expressions",e,"displayAsFraction"],r)}setLatexOfFocusedExpression(e){let r=this.getFocusedExpressionId();r&&this.setLatexById(r,e)}isExpressionFocused(e){return this.getFocusedExpressionId()===e}getExpressionLatex(e){return this.getExpressionById(e).latex}getExpressionError(e){let r=this._evaluations[e];return r?r.error:""}getExpressionValue(e){let r=this._evaluations[e];if(r)return r.value}getExpressionAns(e){let r=this._evaluations[e];if(r)return r.ans}getExpressionAnsId(e){let r=this._evaluations[e];if(r)return r.ansId}shouldShowEvaluationForExpression(e){let r=this._evaluations[e];return r?r.showEvaluation:!1}isRationalizableConstant(e){let r=this._evaluations[e];return r?r.isRationalizableConstant:!1}canDisplayEvaluationAsFraction(e){let r=this.getExpressionValue(e);return r?__dcg_shared_module_exports__['Pa'](r):!1}_setFocusedByIndex(e,r){let i=this._getExpressionByIndex(e),n=this.store.getState().ui.focus,o=r?{type:"latex-expression",id:i.id}:void 0;if(!__dcg_shared_module_exports__['E'](n,o)){if(n){let a=n.id;this.store.deepMutate("expressions",s=>{var l=s[a];l&&(l.braille="")})}!r&&this.getFocusedExpressionId()!==i.id||this.store.shallowMutate("ui",a=>{a.focus=o})}}setFocusedById(e,r){let i=this.getExpressionIndex(e);this._setFocusedByIndex(i,r)}focusPrevById(e){let r=this.getExpressionIndex(e)-1;r>=0&&this._setFocusedByIndex(r,!0)}focusNextById(e){let r=this.getExpressionIndex(e)+1;r<this.getNumberOfExpressions()?this._setFocusedByIndex(r,!0):this.createAtEnd()}getFocusedExpression(){let e=this.getFocusedExpressionId();if(e)return this.getExpressionById(e)}getFocusedExpressionId(){let e=this.getState().ui.focus;return e&&e.id}clearFocusedExpression(){let e=this.getFocusedExpression();e&&this.setLatexById(e.id,"")}shouldShowClear(){if(this.getNumberOfExpressions()===1)return!1;let e=this.getFocusedExpression();return!!e&&!!e.latex}getLastExpression(){return this._getExpressionByIndex(this.getNumberOfExpressions()-1)}isLastExpressionEmpty(){return!!this.getLastExpression().latex}createAtEnd(){this.createBlankAfterId(this.getLastExpression().id)}focusLastExpression(){this._setFocusedByIndex(this.getNumberOfExpressions()-1,!0)}focusFirstExpression(){this._setFocusedByIndex(0,!0)}getDegreeMode(){return this.getState().settings.degreeMode}setDegreeMode(e){this.store.set(["settings","degreeMode"],!!e),this._evaluate()}_cleanupLatex(e){return e=__dcg_shared_module_exports__['Wa'](e),e.substr(e.length-1)==="="&&(e=e.substr(0,e.length-1)),e}_evaluate(){this._evaluator.clearStatementsAndStartCompleteState(),this.getExpressionOrder().forEach(e=>this._evaluator.addStatement({id:e,index:this.getExpressionIndex(e),latex:this._cleanupLatex(this.getExpressionLatex(e)),shouldGraph:!1,type:"statement"}))}_setupEvaluator(){this._evaluator=new Uc(this.workerPool),this._evaluator.readEvaluatorConfig=()=>({degreeMode:this.getDegreeMode(),evaluationMode:this.evaluationMode,additionalFunctions:this.additionalFunctions,functionDefinition:this.functionDefinition,replaceRoundWithReciprocal:this.replaceRoundWithReciprocal,actions:!1}),this._evaluator.onEvaluatorResults=e=>{let r=e.evaluationStates;this._evaluations={};for(let o in r){let a=r[o];if(!this.getExpressionById(o))continue;let l=a.constant_value;l===void 0&&a.zero_values&&a.zero_values.length&&(l=a.zero_values[0].val);let c=a.hasOwnProperty("constant_value")&&__dcg_shared_module_exports__['Pa'](a.constant_value),u=!a.is_evaluable&&c,h=!!a.is_evaluable||u||Array.isArray(l);this._evaluations[o]={error:a.error,ans:void 0,ansId:void 0,value:l,showEvaluation:h,isRationalizableConstant:u}}let i,n;for(let o of this.getExpressionOrder()){let a=this._evaluations[o];if(i&&a){let s=i.value;typeof s=="number"?(a.ans=s,a.ansId=n):Array.isArray(s)&&(a.ans="[...]")}i=a,n=o}typeof this.onEvaluationUpdate=="function"&&this.onEvaluationUpdate()}}reloadState(){this.setState(this.getState())}getFunctionDefinition(){return!!this.functionDefinition}enableFunctionDefinition(){this.functionDefinition=!0,this.reloadState()}disableFunctionDefinition(){this.functionDefinition=!1,this.reloadState()}getReplaceRoundWithReciprocal(){return!!this.replaceRoundWithReciprocal}enableReplaceRoundWithReciprocal(){this.replaceRoundWithReciprocal=!0,this.reloadState()}disableReplaceRoundWithReciprocal(){this.replaceRoundWithReciprocal=!1,this.reloadState()}};xc();Us();var Qm=class{constructor(e,r){this.keyboardMode="main";this.fontSize=16;this.invertedColors=!1;this.backgroundColor="";this.textColor="";this.projectorMode=!1;this.capExpressionSize=!1;this.decimalToFraction=!0;this.settingsMenu=!0;this.settingsMenuOpen=!1;this.language="en";this.brailleMode="none";this.sixKeyInput=!1;this.brailleControls=!0;this.brailleExpressionDownload=!0;this.replaceCommaWith10Exp=!1;this.typingAsteriskWritesTimesSymbol=!1;this.stateStack=new $l;this.dispatcher=new Rc;this.s=Pl(()=>this.language);this.dispatch=e=>{ig("dispatch",{type:e.type}),this.dispatcher.dispatch(e);let r;for(;r=this._queuedCallbacks.shift();)r()};this._queuedCallbacks=[];this.stateStack=new $l,this.dispatcher=new Rc,this.options=e,this.model=new Xm({evaluationMode:this.options.evaluationMode,additionalFunctions:this.options.additionalFunctions,functionDefinition:this.options.functionDefinition,replaceRoundWithReciprocal:this.options.replaceRoundWithReciprocal,workerPool:r.workerPool}),this.model=this.model,this.model.setDegreeMode(e.degreeMode),this.setLanguage(e.language),this.setBrailleMode(e.brailleMode),this.setSixKeyInput(e.sixKeyInput),this.setBrailleControls(e.brailleControls),this.setBrailleExpressionDownload(e.brailleExpressionDownload),this.setReplaceCommaWith10Exp(e.replaceCommaWith10Exp),this.setReplaceRoundWithReciprocal(e.replaceRoundWithReciprocal),this.setTypingAsteriskWritesTimesSymbol(e.typingAsteriskWritesTimesSymbol),this.setProjectorMode(e.projectorMode),this.setCapExpressionSize(e.capExpressionSize),this.setDecimalToFraction(e.decimalToFraction),this.invertedColors=e.invertedColors,this.backgroundColor=e.backgroundColor,this.textColor=e.textColor,this.settingsMenu=e.settingsMenu,this.model.onEvaluationUpdate=()=>this.dispatch({type:"render"}),this.settingsProxy=r.settingsProxy,this.syncPublicSettings(),this.hookUpDispatcher(),this.containerSize={width:0,height:0}}runAfterDispatch(e){this._queuedCallbacks.push(e)}enqueueEvent(e){this.runAfterDispatch(()=>{this.onEventEmitted&&this.onEventEmitted(e)})}getFunctionDefinition(){return this.options.functionDefinition}getSettingsMenu(){return this.settingsMenu}getBrailleMode(){return this.brailleMode}renderAsBraille(){return this.brailleMode!=="none"}setBrailleMode(e){this.brailleMode=e}getSixKeyInput(){return this.sixKeyInput}setSixKeyInput(e){this.sixKeyInput=e}getBrailleControls(){return this.brailleControls}setBrailleControls(e){this.brailleControls=e}getBrailleExpressionDownload(){return this.brailleExpressionDownload}setBrailleExpressionDownload(e){this.brailleExpressionDownload=e}getRestrictedEditing(){return this.options.restrictedEditing}getKeyboardMode(){return this.keyboardMode}getFontSize(){return this.fontSize}getInvertedColors(){return this.invertedColors}hasBackgroundColor(){return this.getBackgroundColor()!=="#ffffff"}getBackgroundColor(){let e=__dcg_shared_module_exports__['bc'](this.backgroundColor||"#fff");return this.getInvertedColors()&&e!=="#ffffff"?__dcg_shared_module_exports__['ec'](e):e}getTextColor(){let e=__dcg_shared_module_exports__['bc'](this.textColor||"#000");return this.getInvertedColors()&&e!=="#000000"?__dcg_shared_module_exports__['ec'](e):e}getAdditionalFunctions(){return this.options.additionalFunctions}getTypingSlashWritesDivisionSymbol(){return this.options.typingSlashWritesDivisionSymbol}setTypingAsteriskWritesTimesSymbol(e){this.typingAsteriskWritesTimesSymbol=e}getTypingAsteriskWritesTimesSymbol(){return this.typingAsteriskWritesTimesSymbol}setProjectorMode(e){this.projectorMode=e}isProjectorMode(){return this.projectorMode}getReplaceCommaWith10Exp(){return this.replaceCommaWith10Exp}setReplaceCommaWith10Exp(e){this.replaceCommaWith10Exp=e}getReplaceRoundWithReciprocal(){return this.model.getReplaceRoundWithReciprocal()}setReplaceRoundWithReciprocal(e){e?this.model.enableReplaceRoundWithReciprocal():this.model.disableReplaceRoundWithReciprocal()}setCapExpressionSize(e){this.capExpressionSize=e}getCapExpressionSize(){return this.capExpressionSize}setDecimalToFraction(e){this.decimalToFraction=e}setLanguage(e){e!=="en"&&Desmos.supportedLanguages.indexOf(e)===-1?__dcg_shared_module_exports__['Gc'].warn(`Translation for '${e}' isn't currently available. Using '${this.language}' instead.`):this.language=e}getLanguage(){return this.language}getDecimalToFraction(){return this.decimalToFraction}isScientificCalc(){let e=this.options.evaluationMode;return e==="scientific"||e==="singleExpressionScientific"}isFourFunctionCalc(){return this.options.evaluationMode==="fourFunction"||this.options.evaluationMode==="singleExpressionFourFunction"}getAllowLinks(){return this.options.links}canUndo(){return this.stateStack.canUndo()}canRedo(){return this.stateStack.canRedo()}undo(e){if(!this.canUndo())return;this.stateStack.undo();let r=this.stateStack.getState();if(!e.restoreFocus){let i={focus:void 0};r=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},r),{ui:i})}this.model.setState(r),this.enqueueEvent("change")}redo(e){if(!this.canRedo())return;this.stateStack.redo();let r=this.stateStack.getState();if(!e.restoreFocus){let i={focus:void 0};r=__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},r),{ui:i})}this.model.setState(r),this.enqueueEvent("change")}clearHistory(){this.stateStack.clear()}canBackspace(){let e=this.model.getFocusedExpression();return e&&(e.latex.length>0||this.model.getNumberOfExpressions()>1)}focusLastExpression(){this.model.focusLastExpression()}shouldRender(){return this.containerSize.width>0&&this.containerSize.height>0}canClear(){return this.model.canClear()}shouldShowClear(){return this.model.shouldShowClear()}enableSettingsMenu(){this.settingsMenu=!0}disableSettingsMenu(){this.closeSettingsMenu(),this.settingsMenu=!1}closeSettingsMenu(){this.settingsMenuOpen=!1}toggleSettingsMenu(){this.settingsMenuOpen=!this.settingsMenuOpen}isSettingsMenuOpen(){return this.settingsMenuOpen}isLastExpressionEmpty(){return this.model.isLastExpressionEmpty()}createAtEnd(){this.model.createAtEnd()}clearFocusedExpression(){this.model.clearFocusedExpression()}setLatexById(e,r){this.model.setLatexById(e,r)}setLatexAndBrailleById(e,r,i){this.model.setLatexAndBrailleById(e,r,i)}setLatexOfFocusedExpression(e){this.model.setLatexOfFocusedExpression(e)}toggleFractionEvaluationById(e){this.model.setFractionEvaluation(e,!this.model.getExpressionById(e).displayAsFraction)}conditionallyCopyPrevious(e){this.model.conditionallyCopyPrevious(e)}createBlankAfterId(e){this.model.createBlankAfterId(e)}backspaceAtFrontOfId(e){this.model.backspaceAtFrontOfId(e)}areStatesDifferentEnoughForUndoRedo(e,r){let i={focus:void 0};return __dcg_shared_module_exports__['E'](__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},e),{ui:i}),__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},r),{ui:i}))}commitUndoRedoDebounced(){let e=this.model.getState(),r=this.stateStack.getState();if(this.areStatesDifferentEnoughForUndoRedo(e,r))return;let i=new Date().getTime();i-this._lastDebouncedTime<1e3?this.stateStack.replaceState(e):this.stateStack.addState(e),this._lastDebouncedTime=i,this.enqueueEvent("change")}commitUndoRedoSynchronously(){let e=this.model.getState(),r=this.stateStack.getState();this.areStatesDifferentEnoughForUndoRedo(e,r)||(this._lastDebouncedTime=0,this.stateStack.addState(e),this.enqueueEvent("change"))}updateKeyboardMode(e){this.keyboardMode=e}getFocusedMathquill(){if(this.model.getFocusedExpressionId())return qe.getFocusedMathquill()}ensureMathquillIsFocusedAndReturnFocusedMathquill(){let e=this.getFocusedMathquill();return e||(this.isLastExpressionEmpty()&&!this.model.isSingleExpression()?this.createAtEnd():this.focusLastExpression(),this.onEventEmitted&&this.onEventEmitted("render"),this.getFocusedMathquill())}typeIntoFocusedMathquill(e){e=e.replace(/\r|\n/g,"");let r=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();r&&qe.canAcceptText(r,this.getCapExpressionSize(),e)&&(r.typedText(e),this.setLatexOfFocusedExpression(r.latex()),this.model.markShouldDebounceUndoRedo())}pressKeyInFocusedMathquill(e,r){if(this.getBrailleMode()!=="none")return;let i=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();i&&(e==="Up"||e==="Down"||e==="Left"||e==="Right"?qe.applyArrowKeyAndReturnIfWasAtBounds(i,e,r)&&this.moveFocusInDirection(e):e==="Enter"?(r&&(r.preventDefault(),r.stopPropagation()),this.handleEnter()):e==="Backspace"?this.attemptToMoveFocusWithBackspace()||(i.keystroke(e,r),this.setLatexOfFocusedExpression(i.latex())):e==="Delete"?(i.keystroke(e,r),this.setLatexOfFocusedExpression(i.latex())):(i.keystroke(e,r),this.setLatexOfFocusedExpression(i.latex())))}moveFocusInDirection(e){let r=this.model.getFocusedExpressionId();r&&(e==="Up"?this.model.focusPrevById(r):e==="Down"&&this.model.focusNextById(r))}handleEnter(){if(this.model.isSingleExpression())return;let e=this.model.getFocusedExpressionId();e&&(this.conditionallyCopyPrevious(e),this.createBlankAfterId(e))}attemptToMoveFocusWithBackspace(){let e=this.model.getFocusedExpression();if(!e)return!1;let{latex:r,id:i}=e;return r===""?(this.backspaceAtFrontOfId(i),!0):!1}executeCommandInFocusedMathquill(e){let r=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();r&&(Pp(r,e),this.setLatexOfFocusedExpression(r.latex()))}syncPublicSettings(){this.settingsProxy.setProperty("language",this.language),this.settingsProxy.setProperty("fontSize",this.fontSize),this.settingsProxy.setProperty("degreeMode",this.model.getDegreeMode()),this.settingsProxy.setProperty("invertedColors",this.invertedColors),this.settingsProxy.setProperty("backgroundColor",this.backgroundColor),this.settingsProxy.setProperty("textColor",this.textColor),this.settingsProxy.setProperty("brailleMode",this.brailleMode),this.settingsProxy.setProperty("sixKeyInput",this.sixKeyInput),this.settingsProxy.setProperty("brailleControls",this.brailleControls),this.settingsProxy.setProperty("brailleExpressionDownload",this.brailleExpressionDownload),this.settingsProxy.setProperty("projectorMode",this.projectorMode),this.settingsProxy.setProperty("capExpressionSize",this.capExpressionSize),this.settingsProxy.setProperty("decimalToFraction",this.decimalToFraction),this.settingsProxy.setProperty("qwertyKeyboard",this.options.qwertyKeyboard),this.settingsProxy.setProperty("links",this.options.links),this.settingsProxy.setProperty("settingsMenu",this.settingsMenu),this.settingsProxy.setProperty("functionDefinition",this.model.getFunctionDefinition()),this.settingsProxy.setProperty("replaceCommaWith10Exp",this.replaceCommaWith10Exp),this.settingsProxy.setProperty("replaceRoundWithReciprocal",this.model.getReplaceRoundWithReciprocal()),this.settingsProxy.setProperty("typingAsteriskWritesTimesSymbol",this.typingAsteriskWritesTimesSymbol)}hookUpDispatcher(){this.dispatcher.register(e=>{this.enqueueEvent("render");let r=!1,i=this.getRestrictedEditing();switch(e.type){case"update-options":{this.options=__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},this.options),e.options);break}case"keypad/shift":{let s;switch(this.keyboardMode){case"qwerty":s="capitalQwerty";break;case"capitalQwerty":s="qwerty";break;case"letters":s="capitalLetters";break;case"capitalLetters":s="letters";break;default:s="qwerty"}this.updateKeyboardMode(s)}break;case"undo":i||(this.undo({restoreFocus:e.source==="keyboard-shortcut"}),r=!0);break;case"redo":i||(this.redo({restoreFocus:e.source==="keyboard-shortcut"}),r=!0);break;case"clear-history":this.clearHistory();break;case"set-state-from-api":e.opts.allowUndo||this.clearHistory(),this.model.setStateFromAPI(e.state);break;case"main":this.updateKeyboardMode("main");break;case"ABC":this.options.qwertyKeyboard?this.updateKeyboardMode("qwerty"):this.updateKeyboardMode("letters");break;case"functions":this.updateKeyboardMode("functions");break;case"degrees":this.model.setDegreeMode(!this.model.getDegreeMode());break;case"update-degree-mode":this.model.setDegreeMode(!!e.mode);break;case"update-font-size":var n=e.size;if(typeof n!="number"&&(n=parseInt(n,10)),isNaN(n))return;this.fontSize=n;break;case"update-inverted-colors":this.invertedColors=!!e.mode;break;case"update-background-color":this.backgroundColor=e.color;break;case"update-text-color":this.textColor=e.color;break;case"update-projector-mode":this.setProjectorMode(!!e.mode);break;case"update-cap-expression-size":this.setCapExpressionSize(!!e.mode);break;case"update-decimal-to-fraction":this.setDecimalToFraction(!!e.mode);break;case"update-language":this.setLanguage(e.language);break;case"set-blank":e.opts.allowUndo||this.clearHistory(),this.model.clear(),this.focusLastExpression();break;case"clear":this.model.clearFocusedExpression();break;case"set-braille-mode":let o=e.mode;o!=="nemeth"&&o!=="ueb"&&o!=="none"?__dcg_shared_module_exports__['Gc'].warn(`Valid Braille modes are 'nemeth', 'none', and 'ueb'. You passed '${o}'.`):(this.model.clearCachedBrailleValues(),this.setBrailleMode(e.mode));break;case"set-six-key-input":this.setSixKeyInput(!!e.mode);break;case"set-braille-controls":this.setBrailleControls(!!e.value);break;case"set-braille-expression-download":this.setBrailleExpressionDownload(!!e.mode);break;case"set-replace-comma-with-10-exp":this.setReplaceCommaWith10Exp(!!e.replace);break;case"set-replace-round-with-reciprocal":this.setReplaceRoundWithReciprocal(!!e.replace);break;case"set-typing-asterisk-writes-times-symbol":this.setTypingAsteriskWritesTimesSymbol(!!e.mode);break;case"update-latex":this.model.markShouldDebounceUndoRedo(),this.setLatexById(e.id,e.latex);break;case"update-latex-from-braille":this.model.markShouldDebounceUndoRedo(),this.setLatexAndBrailleById(e.id,e.latex,e.braille);break;case"focusin":this.model.setFocusedById(e.id,!0);break;case"focusout":this.model.setFocusedById(e.id,!1);break;case"focus-first-expression":this.model.focusFirstExpression();break;case"focus-prev-expression":this.moveFocusInDirection("Up");break;case"focus-next-expression":this.moveFocusInDirection("Down");break;case"focus-last-expression":this.model.focusLastExpression();break;case"insert-blank-expression":this.handleEnter();break;case"backspace-from-braille":this.attemptToMoveFocusWithBackspace();break;case"keypad/type-text":this.typeIntoFocusedMathquill(e.text);break;case"keypad/press-key":this.pressKeyInFocusedMathquill(e.key,e.evt);break;case"keypad/custom-command":this.executeCommandInFocusedMathquill(e.command);break;case"keypad/123":case"keypad/abc":case"keypad/audio-trace":break;case"enable-settings-menu":this.enableSettingsMenu();break;case"disable-settings-menu":this.disableSettingsMenu();break;case"toggle-settings-menu":this.toggleSettingsMenu();break;case"close-settings-menu":this.closeSettingsMenu();break;case"render":break;case"ui/container-resized":this.containerSize=e.size;break;case"toggle-fraction-evaluation":this.toggleFractionEvaluationById(e.id);break;default:return e}this.runAfterDispatch(()=>this.syncPublicSettings()),r||(this.model.getShouldDebounceUndoRedo()?(this.commitUndoRedoDebounced(),this.model.clearShouldDebounceUndoRedo()):this.commitUndoRedoSynchronously())})}getMathquillConfig(){let e=this.getAdditionalFunctions(),r=this.isFourFunctionCalc()&&(!e||e.indexOf("fraction")===-1);return{typingAsteriskWritesTimesSymbol:this.getTypingAsteriskWritesTimesSymbol(),typingSlashWritesDivisionSymbol:this.getTypingSlashWritesDivisionSymbol(),disableCopyPaste:this.getRestrictedEditing(),autoCommands:qs({disallowFrac:r}),autoOperatorNames:Ko(),logAriaAlerts:!!En().logAria}}};var Xt=__dcg_shared_module_exports__['i'](ne());var A_=__dcg_shared_module_exports__['i'](ne()),zt=class extends A_.Class{init(){this.controller=this.props.controller(),this.model=this.controller.model,this.dispatch=this.controller.dispatch,this.s=this.controller.s}};at();var ui=__dcg_shared_module_exports__['i'](ne());var Kd=__dcg_shared_module_exports__['i'](ne());var xa=class extends rc{template(){return Kd.createElement("div",{class:Kd.const("dcg-keypad-control-bar dcg-do-not-blur"),role:Kd.const("group"),"aria-label":()=>this.controller.s("shared-calculator-narration-keypad-controlbar")},Kd.createElement("div",{class:Kd.const("dcg-keypad-control-bar-contents")},this.children))}};var bh=__dcg_shared_module_exports__['i'](ne()),Ar=class extends bh.Class{template(){return bh.createElement("div",{class:()=>({"dcg-keypad-control-btn":!0,"dcg-disabled":this.isDisabled(),"dcg-selected":!this.isDisabled()&&this.isSelected(),"dcg-selectable-btn":!this.isDisabled()&&this.isSelectable(),"dcg-narrow-control-btn":this.props.narrowButton&&this.props.narrowButton()}),didMount:this.bindFn(this.didMount),role:bh.const("button"),"aria-disabled":()=>this.isDisabled()||void 0,"aria-label":()=>this.getAriaLabel(),"dcg-command":this.props.command,onTap:this.bindFn(this.handleTap),"aria-pressed":()=>!this.hasPopup()&&!this.isDisabled()&&this.isSelectable()?this.isSelected():void 0,"aria-expanded":()=>this.hasPopup()&&!this.isDisabled()?this.isSelected():void 0,tabindex:this.bindFn(this.getTabIndex)},this.children)}getTabIndex(){if(!this.isDisabled())return this.props.ignoreInTabOrder&&this.props.ignoreInTabOrder()?-1:0}handleTap(e){this.isDisabled()||this.props.onTap(e)}getAriaLabel(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()}hasPopup(){return this.props.ariaPopup?this.props.ariaPopup():!1}isDisabled(){return this.props.disabled?this.props.disabled():!1}isSelected(){return this.props.selected?this.props.selected():!1}isSelectable(){return this.props.selectable?this.props.selectable():!1}didMount(e){this.props.didMount&&this.props.didMount(e)}};var Ka=__dcg_shared_module_exports__['i'](ne());var rr=__dcg_shared_module_exports__['i'](ne());at();var ul=__dcg_shared_module_exports__['i'](ne());function v6(){if(!bT)return!1;let t=navigator.userAgent.match(/Version\/(\d+)/);return!t||!t[1]?!1:parseFloat(t[1])<11}function V_(){return!xT&&!v6()&&typeof document.createElement("a").download!="undefined"}function L_(){return V_()||navigator.msSaveBlob!==void 0}var Zm=class extends ul.Class{init(){this.supportsDirectDownload=V_()}template(){return ul.createElement("a",{role:ul.const("button"),tabindex:()=>this.props.enabled()?0:-1,"aria-disabled":()=>!this.props.enabled(),class:()=>({"dcg-download-button":!0,"dcg-disabled":!this.props.enabled(),"dcg-braille-equations":this.props.isBraille,"dcg-svg-button":this.props.isSvg}),didMount:this.bindFn(this.didMountDownload),didUnmount:this.bindFn(this.didUnmountDownload),didUpdate:this.bindFn(this.didUpdate),download:()=>this.supportsDirectDownload?this.props.filename():void 0,onTap:e=>{if(this.supportsDirectDownload||!navigator.msSaveOrOpenBlob)return;let r=this.props.data();r&&(navigator.msSaveOrOpenBlob(r,this.props.filename()),e.preventDefault())}},ul.createElement("i",{class:ul.const("dcg-icon-download"),"aria-hidden":ul.const("true")}),ul.createElement("span",null,()=>this.props.text()))}didMountDownload(e){this.downloadLink=e,this.didUpdate()}didUnmountDownload(){this.revokeBlobURL()}didUpdate(){this.updateDownloadURL(),this.cachedObjectURL&&(this.downloadLink.href=this.cachedObjectURL)}updateDownloadURL(){if(this.revokeBlobURL(),!this.supportsDirectDownload)return;let e=this.props.data();e&&(this.cachedObjectURL=URL.createObjectURL(e))}revokeBlobURL(){this.cachedObjectURL&&URL.revokeObjectURL(this.cachedObjectURL)}};var xh=__dcg_shared_module_exports__['i'](Lc());function Jv(t,e,r=!1){if(r&&(t=t.replace(/ /g,"\\ ")),e==="none")return t;let i=e==="nemeth"?xh.latexToNemeth(t):xh.latexToUeb(t);return i.isError?"":xh.UnicodeBraille.toBrailleAscii(i.value)}function P_(t,e){if(e==="none")return"";let r=[];r.push(Jv("Expression List",e,!0)),r.push(""),r.push("");for(let i of t.getExpressionOrder()){let n=C6(t.getExpressionIndex(i)+1,e),o=t.getExpressionLatex(i),a=t.getExpressionValue(i);a!==void 0&&(o+=`=${a}`),r.push(`${n}  ${Jv(o,e,!1)}`)}return r.join(`
`)}function C6(t,e){let r=""+t;return e==="nemeth"?`${Jv(r,e,!1)}_4`:e==="ueb"?Jv(`${r}.`,e,!1):""}var{If:Xv}=rr.Components,Qv=class extends zt{template(){return rr.createElement("div",{class:()=>({"dcg-settings-dropdown":!0,"dcg-popover":!0,"dcg-has-background-color":this.controller.hasBackgroundColor(),"dcg-point-left":this.controller.containerSize.height<=420}),role:rr.const("region"),"aria-label":rr.const("Settings Menu"),didMount:this.bindFn(this.didMountSettingsDropdown),didUnmount:this.bindFn(this.didUnmountSettingsDropdown)},rr.createElement("div",{class:rr.const("dcg-popover-interior"),style:()=>({background:this.controller.getBackgroundColor()})},rr.createElement("div",{class:()=>({"dcg-settings-menu-option":!0,"dcg-displaysize-container":!0})},rr.createElement(Oi,{ariaGroupLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size"),staticConfig:this.bindFn(this.getProjectorModeOptions)})),rr.createElement(kt,{onChange:this.bindFn(this.onToggleInvertedColors),checked:()=>this.controller.getInvertedColors(),class:this.const("dcg-settings-menu-option dcg-do-not-blur dcg-reverse-contrast")},rr.createElement("span",{class:rr.const("dcg-checkbox-label")},()=>this.controller.s("basic-calculator-label-reverse-contrast"))),rr.createElement(Xv,{predicate:()=>this.controller.getBrailleControls()},()=>rr.createElement("div",null,rr.createElement(kt,{onChange:this.bindFn(this.onToggleBrailleMode),checked:()=>this.controller.renderAsBraille(),class:this.const("dcg-settings-menu-option dcg-do-not-blur dcg-braille-mode")},rr.createElement("span",{class:rr.const("dcg-checkbox-label")},()=>this.controller.s("shared-calculator-narration-braille-mode"))),rr.createElement(Xv,{predicate:()=>this.controller.renderAsBraille()},()=>rr.createElement("div",{class:()=>({"dcg-settings-menu-option":!0,"dcg-braille-container":!0})},rr.createElement(Oi,{ariaGroupLabel:()=>this.controller.s("shared-calculator-narration-braille-mode"),staticConfig:this.bindFn(this.getBrailleOptions)}),rr.createElement("div",{class:rr.const("dcg-braille-options-container")},rr.createElement(kt,{onChange:()=>this.onToggleSixKeyInput(),checked:()=>this.controller.getSixKeyInput(),class:this.const("dcg-settings-menu-option dcg-do-not-blur dcg-six-key-checkbox")},rr.createElement("span",{class:rr.const("dcg-checkbox-label")},()=>this.controller.s("basic-calculator-label-six-key-input"))),rr.createElement("a",{href:rr.const("https://www.desmos.com/accessibility#braille"),class:rr.const("dcg-six-key-info"),target:rr.const("_blank")},rr.createElement("i",{class:rr.const("dcg-icon-question-sign"),"aria-hidden":rr.const("true")})),rr.createElement(Xv,{predicate:()=>!Xy&&L_()&&this.controller.getBrailleExpressionDownload()},()=>rr.createElement(Zm,{data:()=>{let e=P_(this.model,this.controller.getBrailleMode());return new Blob([e],{type:"text/plain"})},enabled:this.const(!0),filename:this.const("desmos-equations.brl"),text:()=>this.controller.s("basic-calculator-link-download-braille-equations"),isBraille:this.const(!0)}))))))),rr.createElement(Xv,{predicate:()=>!!this.getVersionNumber()},()=>rr.createElement("div",{class:rr.const("dcg-version-number")},rr.const("Version: "),()=>this.getVersionNumber()))))}getBrailleOptions(){return[{key:"nemeth",label:()=>this.controller.s("shared-calculator-button-braille-mode-nemeth"),selected:()=>this.isNemeth(),onSelect:()=>this.setBrailleMode("nemeth")},{key:"ueb",label:()=>this.controller.s("shared-calculator-button-braille-mode-ueb"),selected:()=>!this.isNemeth(),onSelect:()=>this.setBrailleMode("ueb")}]}setBrailleMode(e){this.controller.dispatch({type:"set-braille-mode",mode:e})}getProjectorModeOptions(){return[{key:"default",label:()=>"A",ariaLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size-default"),class:()=>"dcg-displaysize-default",selected:()=>!this.getProjectorMode(),onSelect:()=>this.onSelectProjectorModeOption(!1)},{key:"large",label:()=>"A",ariaLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size-large"),class:()=>"dcg-displaysize-large",selected:()=>this.getProjectorMode(),onSelect:()=>this.onSelectProjectorModeOption(!0)}]}onSelectProjectorModeOption(e){this.controller.dispatch({type:"update-projector-mode",mode:e})}getVersionNumber(){let e=window;if(e&&e.AppBridge)return e.AppBridge.versionNumber}didUnmountSettingsDropdown(){V(document).off(".dcg-settings-view")}didMountSettingsDropdown(e){this.settingsGroupNode=e,V(document).on("dcg-tapstart.dcg-settings-view",r=>{V(r.target).closest(".dcg-basic-settings-container").length===0&&this.controller.dispatch({type:"close-settings-menu"})}),V(document).on("keydown.dcg-settings-view",r=>{if(Le(r)==="Esc"&&(this.controller.dispatch({type:"close-settings-menu"}),this.controller.dispatch({type:"focus-last-expression"})),Le(r)==="Tab"&&!r.altKey&&!r.metaKey&&!r.ctrlKey){let i=document.activeElement,n=V(this.props.settingsButtonNode()),o=V(this.settingsGroupNode).find(".dcg-settings-menu-option:last");!r.shiftKey&&i===o[0]?(n.trigger("focus"),r.preventDefault(),r.stopPropagation()):r.shiftKey&&i===n[0]&&(o.trigger("focus"),r.preventDefault(),r.stopPropagation())}})}onToggleBrailleMode(){this.controller.dispatch({type:"set-braille-mode",mode:this.controller.renderAsBraille()?"none":"nemeth"})}isNemeth(){return this.controller.getBrailleMode()==="nemeth"}isUEB(){return this.controller.getBrailleMode()==="ueb"}isLatex(){return this.controller.getBrailleMode()==="none"}onToggleSixKeyInput(){let e=!this.controller.getSixKeyInput();this.controller.dispatch({type:"set-six-key-input",mode:e})}onToggleInvertedColors(){let e=!this.controller.getInvertedColors();this.controller.dispatch({type:"update-inverted-colors",mode:e})}getProjectorMode(){return this.controller.isProjectorMode()}};var{If:E6}=Ka.Components,wh=class extends zt{template(){let t=this.props.controller();return Ka.createElement("div",{class:Ka.const("dcg-basic-settings-container")},Ka.createElement(Ar,{didMount:e=>this.settingsButtonNode=e,command:this.const("settings"),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-settings"),onTap:this.bindFn(this.onToggleSettingsMenu),selected:()=>this.controller.isSettingsMenuOpen(),ariaPopup:this.const(!0)},Ka.createElement("i",{class:Ka.const("dcg-icon-wrench"),"aria-hidden":Ka.const("true")})),Ka.createElement(E6,{predicate:()=>this.controller.isSettingsMenuOpen()},()=>Ka.createElement(Qv,{controller:this.props.controller,settingsButtonNode:()=>this.settingsButtonNode})))}onToggleSettingsMenu(){this.controller.dispatch({type:"toggle-settings-menu"})}};var{If:ey,IfElse:D6}=ui.Components,Zv=class extends zt{template(){let t=this.props.controller();return ui.createElement(xa,{controller:this.props.controller},ui.createElement(ey,{predicate:()=>!this.controller.getRestrictedEditing()},()=>ui.createElement(Ar,{command:this.const("undo"),disabled:()=>!t.canUndo(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-undo"),onTap:e=>t.dispatch({type:"undo",source:e.device==="keyboard"?"button-keyboard":"button-tap"})},ui.createElement("i",{class:ui.const("dcg-icon-undo"),"aria-hidden":ui.const("true")}))),ui.createElement(ey,{predicate:()=>!this.controller.getRestrictedEditing()},()=>ui.createElement(Ar,{command:this.const("redo"),disabled:()=>!t.canRedo(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-redo"),onTap:e=>t.dispatch({type:"redo",source:e.device==="keyboard"?"button-keyboard":"button-tap"})},ui.createElement("i",{class:ui.const("dcg-icon-redo"),"aria-hidden":ui.const("true")}))),D6(()=>t.shouldShowClear(),{true:()=>ui.createElement(Ar,{command:this.const("clear"),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-clear"),onTap:()=>t.dispatch({type:"clear"})},()=>t.s("basic-calculator-button-controlbar-clear")),false:()=>ui.createElement(Ar,{command:this.const("clearall"),disabled:()=>!t.canClear(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-clear-all"),onTap:()=>t.dispatch({type:"set-blank",opts:{allowUndo:!0}})},()=>t.s("basic-calculator-button-controlbar-clear-all"))}),ui.createElement(ey,{predicate:()=>this.controller.getRestrictedEditing()},()=>ui.createElement("div",{class:ui.const("dcg-spacer-2")})),ui.createElement(ey,{predicate:()=>t.getBrailleMode()==="none"},()=>ui.createElement(Ar,{command:this.const("backspace"),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-backspace"),disabled:()=>!t.canBackspace(),onTap:()=>t.dispatch({type:"keypad/press-key",key:"Backspace"})},ui.createElement("i",{class:ui.const("dcg-icon-delete"),"aria-hidden":ui.const("true")}))),ui.createElement(ey,{predicate:()=>this.props.controller().getSettingsMenu()},()=>ui.createElement(wh,{controller:this.props.controller})))}onToggleSettingsMenu(){this.controller.dispatch({type:"toggle-settings-menu"})}};var Ri=__dcg_shared_module_exports__['i'](ne());var{If:eC}=Ri.Components,tC=class extends zt{template(){let t=this.props.controller();return Ri.createElement(xa,{controller:this.props.controller},Ri.createElement(eC,{predicate:()=>!this.controller.getRestrictedEditing()},()=>Ri.createElement(Ar,{command:this.const("undo"),disabled:()=>!t.canUndo(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-undo"),onTap:e=>t.dispatch({type:"undo",source:e.device==="keyboard"?"button-keyboard":"button-tap"})},Ri.createElement("i",{class:Ri.const("dcg-icon-undo"),"aria-hidden":Ri.const("true")}))),Ri.createElement(eC,{predicate:()=>!this.controller.getRestrictedEditing()},()=>Ri.createElement(Ar,{command:this.const("redo"),disabled:()=>!t.canRedo(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-redo"),onTap:e=>t.dispatch({type:"redo",source:e.device==="keyboard"?"button-keyboard":"button-tap"})},Ri.createElement("i",{class:Ri.const("dcg-icon-redo"),"aria-hidden":Ri.const("true")}))),Ri.createElement(Ar,{command:this.const("clear"),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-clear"),onTap:()=>t.dispatch({type:"clear"})},()=>t.s("basic-calculator-button-controlbar-clear")),Ri.createElement(eC,{predicate:()=>this.controller.getRestrictedEditing()},()=>Ri.createElement("div",{class:Ri.const("dcg-spacer-2")})),Ri.createElement(eC,{predicate:()=>t.getBrailleMode()==="none"},()=>Ri.createElement(Ar,{command:this.const("backspace"),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-backspace"),disabled:()=>!t.canBackspace(),onTap:()=>t.dispatch({type:"keypad/press-key",key:"Backspace"})},Ri.createElement("i",{class:Ri.const("dcg-icon-delete"),"aria-hidden":Ri.const("true")}))))}};var $i=__dcg_shared_module_exports__['i'](ne());var Es=__dcg_shared_module_exports__['i'](ne());var Ud=class extends rc{template(){return Es.createElement("div",{class:()=>({"dcg-keypad-control-toggle":!0,"dcg-toggled":this.props.toggled()}),role:Es.const("button"),tabindex:Es.const("0"),"aria-label":this.bindFn(this.getAriaLabel),onTap:this.bindFn(this.handleTap)},Es.createElement("div",{class:Es.const("dcg-ctrl-toggle-option")},this.props.defaultOption),Es.createElement("div",{class:Es.const("dcg-ctrl-toggle-option")},this.props.toggledOption),Es.createElement("div",{class:Es.const("dcg-ctrl-toggle-cover"),style:()=>({background:__dcg_shared_module_exports__['dc'](this.controller.getBackgroundColor(),-.1)})}))}getAriaLabel(){let e={toggled:this.props.toggledAriaLabel(),default:this.props.defaultAriaLabel()};return this.props.toggled()?this.controller.s("shared-calculator-narration-control-toggle-switch-to-default",e):this.controller.s("shared-calculator-narration-control-toggle-switch-to-toggled",e)}handleTap(){this.props.toggled()?ge(this.props.defaultAriaLabel()):ge(this.props.toggledAriaLabel()),this.props.onTap(this.props.command())}};var{If:Ok,IfElse:k6}=$i.Components,rC=class extends zt{template(){let t=this.props.controller();return $i.createElement(xa,{controller:this.props.controller},$i.createElement(Ar,{command:this.const("main"),selected:()=>t.getKeyboardMode()==="main",disabled:()=>this.controller.renderAsBraille(),ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:()=>t.dispatch({type:"main"}),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-main")},()=>t.s("basic-calculator-button-controlbar-main")),$i.createElement(Ar,{command:this.const("ABC"),selected:()=>["qwerty","capitalQwerty","letters"].indexOf(t.getKeyboardMode())!==-1,disabled:()=>this.controller.renderAsBraille(),ignoreInTabOrder:this.const(!0),selectable:this.const(!0),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-abc"),onTap:()=>t.dispatch({type:"ABC"})},()=>t.s("basic-calculator-button-controlbar-abc")),$i.createElement(Ar,{command:this.const("functions"),selected:()=>["functions","restrictedFunctions"].indexOf(t.getKeyboardMode())!==-1,ariaLabel:()=>t.s("basic-calculator-narration-controlbar-functions"),disabled:()=>this.controller.renderAsBraille(),ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:()=>t.dispatch({type:"functions"})},()=>t.s("basic-calculator-button-controlbar-func")),$i.createElement(Ud,{command:this.const("degrees"),toggled:()=>this.model.getDegreeMode(),defaultOption:()=>t.s("basic-calculator-label-controlbar-rad"),toggledOption:()=>t.s("basic-calculator-label-controlbar-deg"),defaultAriaLabel:()=>t.s("basic-calculator-narration-controlbar-radians"),toggledAriaLabel:()=>t.s("basic-calculator-narration-controlbar-degrees"),onTap:()=>t.dispatch({type:"degrees"}),controller:this.props.controller}),$i.createElement(Ok,{predicate:()=>!this.controller.getRestrictedEditing()},()=>$i.createElement(Ar,{command:this.const("undo"),disabled:()=>!t.canUndo(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-undo"),onTap:e=>t.dispatch({type:"undo",source:e.device==="keyboard"?"button-keyboard":"button-tap"})},$i.createElement("i",{class:$i.const("dcg-icon-undo"),"aria-hidden":$i.const("true")}))),$i.createElement(Ok,{predicate:()=>!this.controller.getRestrictedEditing()},()=>$i.createElement(Ar,{command:this.const("redo"),disabled:()=>!t.canRedo(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-redo"),onTap:e=>t.dispatch({type:"redo",source:e.device==="keyboard"?"button-keyboard":"button-tap"})},$i.createElement("i",{class:$i.const("dcg-icon-redo"),"aria-hidden":$i.const("true")}))),k6(()=>t.shouldShowClear(),{true:()=>$i.createElement(Ar,{command:this.const("clear"),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-clear"),onTap:()=>t.dispatch({type:"clear"})},()=>t.s("basic-calculator-button-controlbar-clear")),false:()=>$i.createElement(Ar,{command:this.const("clearall"),disabled:()=>!t.canClear(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-clear-all"),onTap:()=>t.dispatch({type:"set-blank",opts:{allowUndo:!0}})},()=>t.s("basic-calculator-button-controlbar-clear-all"))}),$i.createElement(Ok,{predicate:()=>this.props.controller().getSettingsMenu()},()=>$i.createElement(wh,{controller:this.props.controller})))}};var ki=__dcg_shared_module_exports__['i'](ne());var{If:O_}=ki.Components,iC=class extends zt{template(){let t=this.props.controller();return ki.createElement(xa,{controller:this.props.controller},ki.createElement(Ud,{command:this.const("degrees"),toggled:()=>this.model.getDegreeMode(),defaultOption:()=>t.s("basic-calculator-label-controlbar-rad"),toggledOption:()=>t.s("basic-calculator-label-controlbar-deg"),defaultAriaLabel:()=>t.s("basic-calculator-narration-controlbar-radians"),toggledAriaLabel:()=>t.s("basic-calculator-narration-controlbar-degrees"),onTap:()=>t.dispatch({type:"degrees"}),controller:this.props.controller}),ki.createElement("div",{class:ki.const("dcg-spacer")}),ki.createElement(O_,{predicate:()=>!this.controller.getRestrictedEditing()},()=>ki.createElement(Ar,{command:this.const("undo"),disabled:()=>!t.canUndo(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-undo"),onTap:e=>t.dispatch({type:"undo",source:e.device==="keyboard"?"button-keyboard":"button-tap"})},ki.createElement("i",{class:ki.const("dcg-icon-undo"),"aria-hidden":ki.const("true")}))),ki.createElement(O_,{predicate:()=>!this.controller.getRestrictedEditing()},()=>ki.createElement(Ar,{command:this.const("redo"),disabled:()=>!t.canRedo(),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-redo"),onTap:e=>t.dispatch({type:"redo",source:e.device==="keyboard"?"button-keyboard":"button-tap"})},ki.createElement("i",{class:ki.const("dcg-icon-redo"),"aria-hidden":ki.const("true")}))),ki.createElement("div",{class:ki.const("dcg-spacer")}),ki.createElement(Ar,{narrowButton:this.const(!0),command:this.const("clear"),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-clear"),onTap:()=>t.dispatch({type:"clear"})},()=>t.s("basic-calculator-button-controlbar-clear")),ki.createElement(Ar,{narrowButton:this.const(!0),command:this.const("backspace"),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-backspace"),onTap:()=>t.dispatch({type:"keypad/press-key",key:"Backspace"})},ki.createElement("i",{class:ki.const("dcg-icon-delete"),"aria-hidden":ki.const("true")})))}};var pl=__dcg_shared_module_exports__['i'](ne());var ty=class extends zt{template(){return pl.createElement("div",{role:pl.const("region"),"aria-label":()=>this.s("shared-calculator-narration-keypad")},pl.createElement(qt,{controller:this.props.controller},pl.createElement(Ge,null,C(this,"(",{colspan:this.parenColspan()}),C(this,")",{colspan:this.parenColspan()}),this.makeAdditionalFunctionKey(0),this.makeAdditionalFunctionKey(1),C(this,"division")),pl.createElement(Ge,null,C(this,"7",{style:"highlight"}),C(this,"8",{style:"highlight"}),C(this,"9",{style:"highlight"}),C(this,"multiplication")),pl.createElement(Ge,null,C(this,"4",{style:"highlight"}),C(this,"5",{style:"highlight"}),C(this,"6",{style:"highlight"}),C(this,"-")),pl.createElement(Ge,null,C(this,"1",{style:"highlight"}),C(this,"2",{style:"highlight"}),C(this,"3",{style:"highlight"}),C(this,"+")),pl.createElement(Ge,null,C(this,"0",{style:"highlight"}),C(this,".",{style:"highlight"}),C(this,"ans"),C(this,"enter",{style:"blue"}))))}parenColspan(){return this.controller.getAdditionalFunctions().length>1?.5:1}makeAdditionalFunctionKey(e){let r=this.controller.getAdditionalFunctions()[e];return r==="exponent"?C(this,"a^b"):r==="percent"?C(this,"%"):r==="sqrt"?C(this,"sqrt"):r==="fraction"?C(this,"a/b"):void 0}};var hl=__dcg_shared_module_exports__['i'](ne());var ry=class extends zt{template(){return hl.createElement("div",{role:hl.const("region"),"aria-label":()=>this.s("shared-calculator-narration-keypad")},hl.createElement(qt,{controller:this.props.controller},hl.createElement(Ge,null,C(this,"(",{colspan:this.parenColspan()}),C(this,")",{colspan:this.parenColspan()}),this.makeAdditionalFunctionKey(1)),hl.createElement(Ge,null,C(this,"7",{style:"highlight"}),C(this,"8",{style:"highlight"}),C(this,"9",{style:"highlight"}),C(this,"division")),hl.createElement(Ge,null,C(this,"4",{style:"highlight"}),C(this,"5",{style:"highlight"}),C(this,"6",{style:"highlight"}),C(this,"multiplication")),hl.createElement(Ge,null,C(this,"1",{style:"highlight"}),C(this,"2",{style:"highlight"}),C(this,"3",{style:"highlight"}),C(this,"-")),hl.createElement(Ge,null,C(this,"0",{style:"highlight"}),C(this,".",{style:"highlight",colspan:this.dotColspan()}),this.makeAdditionalFunctionKey(0),C(this,"+"))))}parenColspan(){return this.controller.getAdditionalFunctions().length===2?1.5:2}dotColspan(){return this.controller.getAdditionalFunctions().length?1:2}makeAdditionalFunctionKey(e){let r=this.controller.getAdditionalFunctions()[e];return r==="exponent"?C(this,"a^b"):r==="percent"?C(this,"%"):r==="sqrt"?C(this,"sqrt"):void 0}};var Hn=__dcg_shared_module_exports__['i'](ne());var iy=class extends zt{template(){return Hn.createElement(qt,{controller:this.props.controller},Hn.createElement(Ge,null,C(this,"("),C(this,")"),C(this,"x^2"),C(this,"sqrt"),Hn.createElement("div",{class:Hn.const("dcg-partition-placeholder")}),C(this,"x^3"),C(this,"x^y"),C(this,"ythroot")),Hn.createElement(Ge,null,C(this,"7",{style:"highlight"}),C(this,"8",{style:"highlight"}),C(this,"9",{style:"highlight"}),C(this,"division"),Hn.createElement("div",{class:Hn.const("dcg-partition-placeholder")}),C(this,"pi"),C(this,"e^x"),C(this,"!")),Hn.createElement(Ge,null,C(this,"4",{style:"highlight"}),C(this,"5",{style:"highlight"}),C(this,"6",{style:"highlight"}),C(this,"multiplication"),Hn.createElement("div",{class:Hn.const("dcg-partition-placeholder")}),C(this,"log"),C(this,"ln"),C(this,"|x|")),Hn.createElement(Ge,null,C(this,"1",{style:"highlight"}),C(this,"2",{style:"highlight"}),C(this,"3",{style:"highlight"}),C(this,"-"),Hn.createElement("div",{class:Hn.const("dcg-partition-placeholder")}),C(this,"sin"),C(this,"cos"),C(this,"tan")),Hn.createElement(Ge,null,C(this,"0",{style:"highlight"}),C(this,".",{style:"highlight"}),C(this,"x/y"),C(this,"+"),Hn.createElement("div",{class:Hn.const("dcg-partition-placeholder")}),C(this,"arcsin"),C(this,"arccos"),C(this,"arctan")))}};var Ua=__dcg_shared_module_exports__['i'](ne());var Ii=__dcg_shared_module_exports__['i'](ne());var{IfElse:I6}=Ii.Components,ny=class extends zt{template(){return Ii.createElement(qt,{controller:this.props.controller},Ii.createElement(Ge,null,C(this,"a^2"),C(this,"a^b"),C(this,"|a|"),Ii.createElement("div",{class:Ii.const("dcg-partition-placeholder")}),C(this,"7",{style:"highlight"}),C(this,"8",{style:"highlight"}),C(this,"9",{style:"highlight"}),C(this,"division"),Ii.createElement("div",{class:Ii.const("dcg-partition-placeholder")}),C(this,"%"),C(this,"a/b")),Ii.createElement(Ge,null,C(this,"sqrt"),C(this,"nthroot"),C(this,"pi"),Ii.createElement("div",{class:Ii.const("dcg-partition-placeholder")}),C(this,"4",{style:"highlight"}),C(this,"5",{style:"highlight"}),C(this,"6",{style:"highlight"}),C(this,"multiplication"),Ii.createElement("div",{class:Ii.const("dcg-partition-placeholder")}),C(this,"left",{style:"highlight"}),C(this,"right",{style:"highlight"})),Ii.createElement(Ge,null,C(this,"sin"),C(this,"cos"),C(this,"tan"),Ii.createElement("div",{class:Ii.const("dcg-partition-placeholder")}),C(this,"1",{style:"highlight"}),C(this,"2",{style:"highlight"}),C(this,"3",{style:"highlight"}),C(this,"-"),Ii.createElement("div",{class:Ii.const("dcg-partition-placeholder")}),Hr(.5),C(this,"backspace",{style:"highlight",colspan:1.5})),Ii.createElement(Ge,null,C(this,"("),C(this,")"),I6(()=>this.controller.getReplaceCommaWith10Exp(),{true:()=>C(this,"10^n"),false:()=>C(this,",")}),Ii.createElement("div",{class:Ii.const("dcg-partition-placeholder")}),C(this,"0",{style:"highlight"}),C(this,".",{style:"highlight"}),C(this,"ans"),C(this,"+"),Ii.createElement("div",{class:Ii.const("dcg-partition-placeholder")}),C(this,"enter",{style:"blue",colspan:2})))}};var Ds=__dcg_shared_module_exports__['i'](ne());var oy=class extends zt{template(){return Ds.createElement(qt,{controller:this.props.controller},Ds.createElement(Ge,null,C(this,"q"),C(this,"w"),C(this,"e"),C(this,"r"),C(this,"t"),C(this,"y"),C(this,"u"),C(this,"i"),C(this,"o"),C(this,"p")),Ds.createElement(Ge,null,Ds.createElement("div",{class:Ds.const("dcg-half-width-placeholder")}),C(this,"a"),C(this,"s"),C(this,"d"),C(this,"f"),C(this,"g"),C(this,"h"),C(this,"j"),C(this,"k"),C(this,"l"),Ds.createElement("div",{class:Ds.const("dcg-half-width-placeholder")})),Ds.createElement(Ge,null,C(this,"=",{style:"highlight"}),C(this,"z"),C(this,"x"),C(this,"c"),C(this,"v"),C(this,"b"),C(this,"n"),C(this,"m"),C(this,","),C(this,"backspace",{style:"highlight"})),Ds.createElement(Ge,null,C(this,"shift",{style:"highlight",colspan:1.5}),C(this,"("),C(this,")"),C(this,"["),C(this,"]"),C(this,"!"),C(this,"'"),C(this,"pi"),C(this,"enter",{style:"blue",colspan:1.5})))}};var vh=__dcg_shared_module_exports__['i'](ne());var ay=class extends zt{template(){return vh.createElement(qt,{controller:this.props.controller},vh.createElement(Ge,null,C(this,"a"),C(this,"b"),C(this,"c"),C(this,"d"),C(this,"e"),C(this,"f"),C(this,"g"),C(this,"h"),C(this,"i"),C(this,"j")),vh.createElement(Ge,null,C(this,"k"),C(this,"l"),C(this,"m"),C(this,"n"),C(this,"o"),C(this,"p"),C(this,"q"),C(this,"r"),C(this,"s"),C(this,"t")),vh.createElement(Ge,null,C(this,"=",{style:"highlight"}),C(this,","),C(this,"u"),C(this,"v"),C(this,"w"),C(this,"x"),C(this,"y"),C(this,"z"),C(this,"pi"),C(this,"backspace",{style:"highlight"})),vh.createElement(Ge,null,C(this,"shift",{style:"highlight",colspan:2}),C(this,"("),C(this,")"),C(this,"["),C(this,"]"),C(this,"!"),C(this,"'"),C(this,"enter",{style:"blue",colspan:2})))}};var ks=__dcg_shared_module_exports__['i'](ne());var sy=class extends zt{template(){return ks.createElement(qt,{controller:this.props.controller},ks.createElement(Ge,null,C(this,"Q"),C(this,"W"),C(this,"E"),C(this,"R"),C(this,"T"),C(this,"Y"),C(this,"U"),C(this,"I"),C(this,"O"),C(this,"P")),ks.createElement(Ge,null,ks.createElement("div",{class:ks.const("dcg-half-width-placeholder")}),C(this,"A"),C(this,"S"),C(this,"D"),C(this,"F"),C(this,"G"),C(this,"H"),C(this,"J"),C(this,"K"),C(this,"L"),ks.createElement("div",{class:ks.const("dcg-half-width-placeholder")})),ks.createElement(Ge,null,C(this,"=",{style:"highlight"}),C(this,"Z"),C(this,"X"),C(this,"C"),C(this,"V"),C(this,"B"),C(this,"N"),C(this,"M"),C(this,","),C(this,"backspace",{style:"highlight"})),ks.createElement(Ge,null,C(this,"shift",{style:"highlight",colspan:1.5}),C(this,"("),C(this,")"),C(this,"["),C(this,"]"),C(this,"!"),C(this,"'"),C(this,"pi"),C(this,"enter",{style:"blue",colspan:1.5})))}};var Ch=__dcg_shared_module_exports__['i'](ne());var ly=class extends zt{template(){return Ch.createElement(qt,{controller:this.props.controller},Ch.createElement(Ge,null,C(this,"A"),C(this,"B"),C(this,"C"),C(this,"D"),C(this,"E"),C(this,"F"),C(this,"G"),C(this,"H"),C(this,"I"),C(this,"J")),Ch.createElement(Ge,null,C(this,"K"),C(this,"L"),C(this,"M"),C(this,"N"),C(this,"O"),C(this,"P"),C(this,"Q"),C(this,"R"),C(this,"S"),C(this,"T")),Ch.createElement(Ge,null,C(this,"=",{style:"highlight"}),C(this,","),C(this,"U"),C(this,"V"),C(this,"W"),C(this,"X"),C(this,"Y"),C(this,"Z"),C(this,"pi"),C(this,"backspace",{style:"highlight"})),Ch.createElement(Ge,null,C(this,"shift",{style:"highlight",colspan:2}),C(this,"("),C(this,")"),C(this,"["),C(this,"]"),C(this,"!"),C(this,"'"),C(this,"enter",{style:"blue",colspan:2})))}};var On=__dcg_shared_module_exports__['i'](ne());var{IfElse:M6}=On.Components,cy=class extends zt{template(){return On.createElement("div",{class:On.const("dcg-sci-func-keypad")},On.createElement(qt,{controller:this.props.controller},On.createElement(Ge,null,C(this,"sin"),C(this,"cos"),C(this,"tan"),On.createElement("div",{class:On.const("dcg-partition-placeholder")}),C(this,"a^b"),C(this,"sqrt"),C(this,"nthroot")),On.createElement(Ge,null,C(this,"arcsin"),C(this,"arccos"),C(this,"arctan"),On.createElement("div",{class:On.const("dcg-partition-placeholder")}),C(this,"e^x"),C(this,"abs"),M6(()=>this.controller.getReplaceRoundWithReciprocal(),{true:()=>C(this,"a^{-1}"),false:()=>C(this,"round")})),On.createElement(Ge,null,C(this,"mean"),C(this,"stdev"),C(this,"stdevp"),On.createElement("div",{class:On.const("dcg-partition-placeholder")}),C(this,"ln"),C(this,"log"),C(this,"backspace",{style:"highlight"})),On.createElement(Ge,null,C(this,"nPr"),C(this,"nCr"),C(this,"!"),On.createElement("div",{class:On.const("dcg-partition-placeholder")}),C(this,"e"),C(this,"pi"),C(this,"enter",{style:"blue"}))))}};var{SwitchUnion:T6}=Ua.Components,dy=class extends zt{template(){return Ua.createElement("div",{role:Ua.const("region"),"aria-label":()=>this.s("shared-calculator-narration-keypad")},T6(()=>this.controller.getKeyboardMode(),{qwerty:()=>Ua.createElement(oy,{controller:this.props.controller}),letters:()=>Ua.createElement(ay,{controller:this.props.controller}),capitalQwerty:()=>Ua.createElement(sy,{controller:this.props.controller}),capitalLetters:()=>Ua.createElement(ly,{controller:this.props.controller}),functions:()=>Ua.createElement(cy,{controller:this.props.controller}),main:()=>Ua.createElement(ny,{controller:this.props.controller})}))}};var Wr=__dcg_shared_module_exports__['i'](ne());var Vo=__dcg_shared_module_exports__['i'](ne());var Eh=__dcg_shared_module_exports__['i'](Lc()),{For:G6}=Vo.Components,Sh=class extends Vo.Class{template(){return Vo.createElement("tr",null,Vo.createElement(G6,{each:()=>this.getBrailleAscii(this.props.latex()),key:e=>e.key},Vo.createElement("td",null,e=>Vo.createElement("span",{class:Vo.const("dcg-key-press")},()=>e.char))),Vo.createElement("td",{class:Vo.const("dcg-braille-font")},()=>this.getBrailleUnicode(this.props.latex())),Vo.createElement("td",null,Vo.createElement(ze,{config:this.const({}),latex:()=>this.props.latex()})))}getBrailleAscii(e){let r=Eh.UnicodeBraille.toExpandedBrailleAscii(this.getBrailleUnicode(e)),i=[];for(let n=0;n<r.length;n++)i.push({char:r[n],key:n+")"+r[n]});return i}getBrailleUnicode(e){let r;return this.props.brailleMode()==="nemeth"?r=Eh.latexToNemeth(e):this.props.brailleMode()==="ueb"&&(r=Eh.latexToUeb(e)),r&&r.value?r.value:""}};var qd=class extends zt{template(){return Wr.createElement("div",{class:()=>({"dcg-braille-io-keypad-container":!0,"dcg-has-background-color":this.controller.hasBackgroundColor()})},Wr.createElement("div",{class:Wr.const("dcg-braille-io-keypad")},Wr.createElement("div",{class:Wr.const("dcg-braille-description")},Wr.createElement("div",{class:Wr.const("dcg-braille-title")},()=>this.controller.s("basic-calculator-text-braille-mode-is-on",{mode:this.brailleType()})),Wr.createElement("div",{class:Wr.const("dcg-braille-info-text")},()=>this.controller.s("basic-calculator-text-how-to-type-braille")),Wr.createElement("div",{class:Wr.const("dcg-btn-primary"),role:Wr.const("button"),tabindex:Wr.const(0),onTap:()=>this.controller.dispatch({type:"set-braille-mode",mode:"none"})},()=>this.controller.s("basic-calculator-button-turn-braille-mode-off",{mode:this.brailleType()}))),Wr.createElement("div",{class:Wr.const("dcg-braille-examples-table-container")},Wr.createElement("table",{class:Wr.const("dcg-braille-examples-table")},Wr.createElement("tr",null,Wr.createElement("th",null,()=>this.controller.s("basic-calculator-heading-braille-table-type-this")),Wr.createElement("th",null,()=>this.brailleType()),Wr.createElement("th",null,()=>this.controller.s("basic-calculator-heading-braille-table-typeset"))),Wr.createElement(Sh,{brailleMode:()=>this.controller.getBrailleMode(),latex:this.const("2+2")}),Wr.createElement(Sh,{brailleMode:()=>this.controller.getBrailleMode(),latex:this.const("\\frac{1}{2}")}),Wr.createElement(Sh,{brailleMode:()=>this.controller.getBrailleMode(),latex:this.const("\\sqrt{4}")})),Wr.createElement("div",{class:Wr.const("dcg-more-examples-link")},Wr.createElement("a",{href:()=>"https://www.desmos.com/braille-examples?"+this.controller.getBrailleMode(),target:Wr.const("_blank")},()=>this.controller.s("basic-calculator-link-view-braille-examples"))))))}brailleType(){return this.controller.getBrailleMode()==="nemeth"?"Nemeth":this.controller.getBrailleMode()==="ueb"?"UEB":""}};var Lo=__dcg_shared_module_exports__['i'](ne());var St=__dcg_shared_module_exports__['i'](ne());at();var uy=__dcg_shared_module_exports__['i'](Lc());var qc=__dcg_shared_module_exports__['i'](Lc());function nC(t,e){return e==="nemeth"?qc.latexToNemeth(t):e==="ueb"?qc.latexToUeb(t):{isError:!0,error:"Braille mode should be 'nemeth' or 'ueb'"}}function __(t,e){return e==="nemeth"?qc.nemethToLatex(t):e==="ueb"?qc.uebToLatex(t):{isError:!0,error:"Braille mode should be 'nemeth' or 'ueb'"}}var{If:nc,Input:A6,Textarea:V6}=St.Components,py=class extends zt{constructor(){super(...arguments),this.lastBrailleModeDuringFocusChange="none"}getAriaLabel(){let e=this.getIndex()+1+"";return this.s("shared-calculator-narration-expression-index",{index:e})}didUpdate(){this.renderAnsValue()}didMountMQ(e){this.$mq=V(e)}getExp(){return this.model.getExpressionById(this.props.id())}getAns(){return this.model.getExpressionAns(this.props.id())}getAnsId(){return this.model.getExpressionAnsId(this.props.id())}getLatex(){return this.getExp().latex}getValue(){return this.model.getExpressionValue(this.props.id())}getBraille(){let e=this.getExp().braille;if(e!=="")return e;{let r=nC(this.getLatex(),this.controller.getBrailleMode());return r.isError?"":uy.UnicodeBraille.toExpandedBrailleAscii(r.value)}}getIndex(){return this.model.getExpressionIndex(this.props.id())}getShowEvaluation(){return this.model.shouldShowEvaluationForExpression(this.props.id())}isFractionEvaluation(){return this.getExp().displayAsFraction}canDisplayEvaluationAsFraction(){return this.controller.getDecimalToFraction()&&this.model.canDisplayEvaluationAsFraction(this.props.id())}shouldDisplayEvaluationAsFraction(){return this.canDisplayEvaluationAsFraction()&&this.getExp().displayAsFraction}toggleFractionEvaluation(){this.dispatch({type:"toggle-fraction-evaluation",id:this.props.id()})}getFractionDisplayAriaLabel(){return this.shouldDisplayEvaluationAsFraction()?this.controller.s("basic-calculator-narration-convert-to-decimal"):this.controller.s("basic-calculator-narration-convert-to-fraction")}getError(){let e=this.model.getExpressionError(this.props.id());return e&&this.getLatex().length>0?cp(e,this.controller.getLanguage()):""}showError(){return!!this.getError()}getFractionMessage(){return this.shouldDisplayEvaluationAsFraction()?this.s("basic-calculator-label-convert-to-decimal"):this.s("basic-calculator-label-convert-to-fraction")}getIsFocused(){return!this.controller.isSettingsMenuOpen()&&this.model.isExpressionFocused(this.props.id())}onFocusedChanged(e){let r=this.controller.getBrailleMode(),i=r!==this.lastBrailleModeDuringFocusChange;this.lastBrailleModeDuringFocusChange=r,!(!this.getExp()||i)&&(e?this.dispatch({type:"focusin",id:this.props.id()}):this.dispatch({type:"focusout",id:this.props.id()}))}onMQReflow(){this.renderedAnsData=void 0,this.renderAnsValue()}renderAnsValue(){if(!this.$mq)return;let e=this.getAns(),r=!1,i=this.getAnsId();if(i){let n=this.model.getExpressionById(i);r=n&&n.displayAsFraction}this.renderedAnsData&&this.renderedAnsData.value==e&&this.renderedAnsData.displayAsFraction===r||(this.renderedAnsData={value:e,displayAsFraction:r},this.$mq.find(".dcg-mq-ans").each((n,o)=>{let a=V(o),s;typeof e=="number"?s=__dcg_shared_module_exports__['Ra'](e,{digits:this.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:r}):typeof e=="string"&&(s=e),s?a.removeClass("dcg-invalid").html(s):a.addClass("dcg-invalid").html('<i class="dcg-icon-error" aria-hidden="true"></i>')}))}getEvaluationLatex(){let e=this.getValue();if(e===void 0&&(e=NaN),this.model.isRationalizableConstant(this.props.id())&&!this.shouldDisplayEvaluationAsFraction())return"";let r;if(Array.isArray(e))r=`\\mathrm{${e.length}\\ element\\ list}`;else{var i=__dcg_shared_module_exports__['Sa'](e,{digits:this.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:this.shouldDisplayEvaluationAsFraction()});return i==="undefined"?"=\\mathrm{undefined}":"="+i}return r}getEvaluationBraille(){let e=this.getEvaluationLatex(),r=nC(e,this.controller.getBrailleMode());return r.isError?"":uy.UnicodeBraille.toExpandedBrailleAscii(r.value)}didMountBrailleInput(e){this.brailleInputNode=e}didUnmountBrailleInput(){this.brailleInputNode=void 0}handleBrailleFocus(e){let r=e.target;r&&setTimeout(()=>{r.setSelectionRange(0,0)})}handleBrailleKeydown(e){!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&(Le(e)===Rn?(this.forceModelFocus(),this.dispatch({type:"focus-prev-expression"}),e.preventDefault()):Le(e)===zn?(this.forceModelFocus(),this.dispatch({type:"focus-next-expression"}),e.preventDefault()):Le(e)===Ks?(this.forceModelFocus(),this.dispatch({type:"insert-blank-expression"}),e.preventDefault()):Le(e)===oa&&document.activeElement===this.brailleInputNode&&this.getBraille()===""&&(this.dispatch({type:"backspace-from-braille"}),e.preventDefault()))}forceModelFocus(){document.activeElement!==this.brailleInputNode&&this.onFocusedChanged(!0)}focusBrailleInput(){this.brailleInputNode&&document.activeElement!==this.brailleInputNode&&this.brailleInputNode.focus()}getPostLabel(){if(this.showError())return this.getError();if(this.getShowEvaluation()){let e=this.getValue();return e===void 0&&(e=NaN),Array.isArray(e)?`${e.length} element list`:"equals "+nn(__dcg_shared_module_exports__['Sa'](e,{digits:this.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:this.shouldDisplayEvaluationAsFraction()}))}return""}onBrailleInput(e){this.controller.isSettingsMenuOpen()&&this.controller.dispatch({type:"close-settings-menu"});let r=__(uy.UnicodeBraille.coerceToSixDotCells(e),this.controller.getBrailleMode()),i=r.isError?"":r.value;(!this.controller.getCapExpressionSize()||Dp(i)<=kp)&&this.controller.dispatch({type:"update-latex-from-braille",latex:i,braille:e,id:this.props.id()})}getIndexSubscript(){return`_{${this.getIndex()+1}}`}getEvaluationDigits(){return this.controller.isScientificCalc()?10:7}onMountContainer(e){this.containerNode=e}onTapContainer(e){e.target===this.containerNode&&!this.getShowEvaluation()&&!this.showError()&&this.forceModelFocus()}template(){return St.createElement("div",{class:()=>({"dcg-basic-expression":!0,"dcg-focused":this.getIsFocused(),"dcg-braille-io":this.controller.renderAsBraille()}),onTap:this.bindFn(this.onTapContainer),onMount:this.bindFn(this.onMountContainer)},St.createElement(nc,{predicate:()=>this.controller.renderAsBraille()},()=>St.createElement("div",{class:St.const("dcg-braille-input")},St.createElement(Td,{ariaLabel:()=>{let e=nC(`eq${this.getIndexSubscript()}`,this.controller.getBrailleMode());return e.isError?"":uy.UnicodeBraille.toExpandedBrailleAscii(e.value)},didMount:this.bindFn(this.didMountBrailleInput),didUnmount:this.bindFn(this.didUnmountBrailleInput),onFocusedChanged:this.bindFn(this.onFocusedChanged),shouldFocus:this.bindFn(this.getIsFocused),onKeydown:this.bindFn(this.handleBrailleKeydown),onInput:this.bindFn(this.onBrailleInput),sixKeyInput:()=>this.controller.getSixKeyInput(),value:()=>this.getBraille(),isStatic:this.const(!1)}))),St.createElement(nc,{predicate:()=>this.controller.renderAsBraille()},()=>St.createElement("div",{class:St.const("dcg-braille-evaluation-container")},St.createElement(nc,{predicate:()=>this.getShowEvaluation()},()=>St.createElement("div",{class:St.const("dcg-braille-evaluation")},St.createElement(A6,{readonly:this.const("true"),class:this.const("dcg-braille-evaluation-inner"),value:()=>this.getEvaluationBraille(),onFocus:this.bindFn(this.handleBrailleFocus),onKeydown:this.bindFn(this.handleBrailleKeydown),onInput:()=>{}}))),St.createElement(nc,{predicate:()=>this.showError()},()=>St.createElement("div",{class:St.const("dcg-braille-error")},St.createElement("div",{class:St.const("dcg-basic-expression-error")},St.createElement("i",{class:St.const("dcg-icon-error"),"aria-hidden":St.const("true")})),St.createElement(V6,{readonly:this.const("true"),class:this.const("dcg-braille-error-inner"),value:()=>this.getError(),onFocus:this.bindFn(this.handleBrailleFocus),onKeydown:this.bindFn(this.handleBrailleKeydown),onInput:()=>{}}))))),St.createElement(nc,{predicate:()=>this.controller.renderAsBraille()},()=>St.createElement("div",{class:St.const("dcg-exp-mathquill-container"),didMount:this.bindFn(this.didMountMQ),onTap:this.bindFn(this.forceModelFocus)},St.createElement(ze,{latex:()=>this.getLatex(),config:this.const({}),onReflow:this.bindFn(this.onMQReflow)}))),St.createElement(nc,{predicate:()=>!this.controller.renderAsBraille()},()=>St.createElement("div",{class:St.const("dcg-exp-mathquill-container"),didMount:this.bindFn(this.didMountMQ)},St.createElement(qe,{latex:()=>this.getLatex(),onReflow:this.bindFn(this.onMQReflow),isFocused:this.bindFn(this.getIsFocused),capExpressionSize:()=>this.controller.getCapExpressionSize(),config:this.bindFn(this.getMQConfig),getAriaLabel:()=>this.getAriaLabel(),getAriaPostLabel:()=>this.getPostLabel(),hasError:()=>!1,onUserPressedKey:(e,r)=>{this.controller.isSettingsMenuOpen()&&this.controller.dispatch({type:"close-settings-menu"}),this.dispatch({type:"keypad/press-key",key:e,evt:r})},onUserTypedText:e=>this.dispatch({type:"keypad/type-text",text:e}),onUserChangedLatex:e=>{this.dispatch({type:"update-latex",id:this.props.id(),latex:e})},onFocusedChanged:this.bindFn(this.onFocusedChanged),disableSpace:()=>this.controller.getRestrictedEditing()}))),St.createElement("div",{class:St.const("dcg-exp-output-container")},St.createElement(nc,{predicate:()=>this.showError()&&!this.controller.renderAsBraille()},()=>St.createElement(Ue,{tooltip:this.bindFn(this.getError),gravity:this.const("w"),sticky:this.const(!0)},St.createElement("div",{class:St.const("dcg-basic-expression-error")},St.createElement("i",{class:St.const("dcg-icon-error"),"aria-hidden":St.const("true")})))),St.createElement(nc,{predicate:()=>this.getShowEvaluation()},()=>St.createElement("div",{class:()=>({"dcg-basic-expression-value":!0,"dcg-basic-evaluation-gray":Array.isArray(this.getValue())})},St.createElement(ze,{config:this.const({}),latex:()=>this.getEvaluationLatex()}),St.createElement(nc,{predicate:this.bindFn(this.canDisplayEvaluationAsFraction)},()=>St.createElement(Ue,{tooltip:this.bindFn(this.getFractionMessage),gravity:this.const("sw")},St.createElement("span",{role:St.const("button"),tabindex:St.const("0"),"aria-label":this.bindFn(this.getFractionDisplayAriaLabel),class:()=>({"dcg-basic-fraction-toggle":!0,"dcg-selected":this.isFractionEvaluation()}),onTap:this.bindFn(this.toggleFractionEvaluation)},St.createElement("i",{class:St.const("dcg-icon-fraction"),"aria-hidden":St.const("true")}))))))))}getMQConfig(){return this.controller.getMathquillConfig()}};at();var{For:L6,If:P6}=Lo.Components,hy=class extends zt{constructor(){super(...arguments),this.didShowAnswerHint=!1,this.didHideAnswerHint=!1}template(){return Lo.createElement("div",{class:Lo.const("dcg-basic-list-container"),role:Lo.const("region"),"aria-label":()=>this.controller.s("shared-calculator-narration-expression-list"),didMount:this.bindFn(this.didMountContainer)},Lo.createElement("div",{class:Lo.const("dcg-basic-list-placeholder"),didMount:this.bindFn(this.didMountPlaceholder)},Lo.createElement(P6,{predicate:this.bindFn(this.showAnswerHint)},()=>Lo.createElement("div",{class:Lo.const("dcg-answer-hint")},()=>this.controller.s("basic-calculator-label-answer-hint")))),Lo.createElement(L6,{each:()=>this.model.getExpressionOrder()},Lo.createElement("div",{class:()=>({"dcg-basic-list":!0,"dcg-projector-mode":this.controller.isProjectorMode()})},e=>Lo.createElement(py,{controller:this.props.controller,id:this.const(e)}))))}didMountPlaceholder(e){V(e).on("dcg-tap",Ur)}showAnswerHint(){if(this.didHideAnswerHint)return!1;let e=this.model.getExpressionOrder()[0];return this.model.shouldShowEvaluationForExpression(e)||this.didShowAnswerHint?(this.didShowAnswerHint=!0,this.model.getNumberOfExpressions()>1||this.model.getExpressionLatex(e)===""?(this.didHideAnswerHint=!0,!1):!0):!1}didUpdate(){if(!this.$container)return;let e=this.$container.find(".dcg-focused");e.length>0&&ss(e,this.$container,50)}didMountContainer(e){this.$container=V(e)}};var{If:gy,IfElse:oC}=Xt.Components,fy=class extends zt{template(){return Xt.createElement(gy,{predicate:()=>this.controller.shouldRender()},()=>Xt.createElement("div",{class:Xt.const("dcg-calculator-api-container"),style:Xt.const("width: 100%; height: 100%; position: relative;")},Xt.createElement("div",{class:()=>({"dcg-calc-basic-main-wrapper":!0,"dcg-narrow":this.controller.containerSize.width<570,"dcg-short":this.controller.containerSize.height<=540,"dcg-scientific-calculator":this.controller.isScientificCalc(),"dcg-four-function-calculator":this.controller.isFourFunctionCalc(),"dcg-container":!0}),onKeydown:this.bindFn(this.handleRootKeydown),didMount:this.bindFn(this.didMountRoot),"x-ms-format-detection":Xt.const("none")},Xt.createElement("div",{role:Xt.const("application"),"aria-label":()=>this.controller.isScientificCalc()?this.controller.s("basic-calculator-narration-calc-description-scientific"):this.controller.isFourFunctionCalc()?this.controller.s("basic-calculator-narration-calc-description-fourfunction"):"",class:()=>({"dcg-calc-basic-main":!0,"dcg-inverted-colors":this.controller.getInvertedColors(),"dcg-projector-mode":this.controller.isProjectorMode(),"dcg-ipad":Ja,"dcg-has-background-color":this.controller.hasBackgroundColor(),"dcg-no-hyperlinks":!this.controller.getAllowLinks()}),style:()=>({"font-size":`${this.controller.getFontSize()}px`,background:this.controller.getBackgroundColor(),color:this.controller.getTextColor(),filter:this.controller.getInvertedColors()?"invert(100%)":"none"})},Xt.createElement(hy,{controller:this.props.controller}),Xt.createElement(gy,{predicate:()=>this.controller.isScientificCalc()&&this.model.isSingleExpression()},()=>Xt.createElement("div",null,Xt.createElement(iC,{controller:this.props.controller}),Xt.createElement("div",{class:Xt.const("dcg-basic-keypad-container")},oC(()=>this.controller.renderAsBraille(),{true:()=>Xt.createElement(qd,{controller:this.props.controller}),false:()=>Xt.createElement(iy,{controller:this.props.controller})})))),Xt.createElement(gy,{predicate:()=>this.controller.isScientificCalc()&&!this.model.isSingleExpression()},()=>Xt.createElement("div",null,Xt.createElement(rC,{controller:this.props.controller}),Xt.createElement("div",{class:Xt.const("dcg-basic-keypad-container")},oC(()=>this.controller.renderAsBraille(),{true:()=>Xt.createElement(qd,{controller:this.props.controller}),false:()=>Xt.createElement(dy,{controller:this.props.controller})})))),Xt.createElement(gy,{predicate:()=>this.controller.isFourFunctionCalc()&&this.model.isSingleExpression()},()=>Xt.createElement("div",null,Xt.createElement(tC,{controller:this.props.controller}),Xt.createElement("div",{class:Xt.const("dcg-basic-keypad-container")},oC(()=>this.controller.renderAsBraille(),{true:()=>Xt.createElement(qd,{controller:this.props.controller}),false:()=>Xt.createElement(ry,{controller:this.props.controller})})))),Xt.createElement(gy,{predicate:()=>this.controller.isFourFunctionCalc()&&!this.model.isSingleExpression()},()=>Xt.createElement("div",null,Xt.createElement(Zv,{controller:this.props.controller}),Xt.createElement("div",{class:Xt.const("dcg-basic-keypad-container")},oC(()=>this.controller.renderAsBraille(),{true:()=>Xt.createElement(qd,{controller:this.props.controller}),false:()=>Xt.createElement(ty,{controller:this.props.controller})}))))))))}didMountRoot(e){yc(e)}handleRootKeydown(e){let r=vi(e),i=this.controller.model;if(Yh(e))return this.dispatch({type:"undo",source:"keyboard-shortcut"}),!1;if(Jh(e))return this.dispatch({type:"redo",source:"keyboard-shortcut"}),!1;if(e.altKey!==gi&&e.metaKey===gi&&!e.ctrlKey&&e.shiftKey&&r==="A"&&this.controller.getDecimalToFraction()){let n=i.getFocusedExpression();n&&i.canDisplayEvaluationAsFraction(n.id)&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"toggle-fraction-evaluation",id:n.id}),this.controller.runAfterDispatch(()=>{i.getFocusedExpression().displayAsFraction?ge(this.controller.s("shared-calculator-narration-show-as-fraction")):ge(this.controller.s("shared-calculator-narration-show-as-decimal"))}))}else if(!e.metaKey&&!e.shiftKey){if(!e.ctrlKey&&!e.altKey&&Le(e)===oa){if(!document.activeElement||mc(V(document.activeElement)))return!1}else if(e.ctrlKey===gi&&e.altKey===!gi){if(r==="N")return this.controller.getBrailleControls()?(this.dispatch({type:"set-braille-mode",mode:"nemeth"}),ge(this.controller.s("shared-calculator-narration-hotkey-braille-mode-nemeth")),!1):void 0;if(r==="U")return this.controller.getBrailleControls()?(this.dispatch({type:"set-braille-mode",mode:"ueb"}),ge(this.controller.s("shared-calculator-narration-hotkey-braille-mode-ueb")),!1):void 0;if(r==="Q"||r==="X")return this.controller.getBrailleControls()?(this.dispatch({type:"set-braille-mode",mode:"none"}),ge(this.controller.s("shared-calculator-narration-hotkey-braille-mode-off")),!1):void 0;if(r==="6"){if(!this.controller.getBrailleControls())return;let n=!this.controller.getSixKeyInput();return this.dispatch({type:"set-six-key-input",mode:n}),ge(n?this.controller.s("basic-calculator-narration-hotkey-six-key-input-on"):this.controller.s("basic-calculator-narration-hotkey-six-key-input-off")),!1}else if(r==="D")return this.controller.isScientificCalc()?(e.preventDefault(),this.controller.dispatch({type:"degrees"}),ge(i.getDegreeMode()?this.controller.s("basic-calculator-narration-controlbar-degrees"):this.controller.s("basic-calculator-narration-controlbar-radians")),!1):void 0}}return!0}};var Dh=class extends Bd{constructor(r){super(r)}init(r){r=__dcg_shared_module_exports__['M'](r),r.backgroundColor&&!__dcg_shared_module_exports__['cc'](r.backgroundColor)&&(__dcg_shared_module_exports__['Gc'].warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)"),delete r.backgroundColor),r.textColor&&!__dcg_shared_module_exports__['cc'](r.textColor)&&(__dcg_shared_module_exports__['Gc'].warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"),delete r.textColor);let i=__dcg_shared_module_exports__['b']({language:"en",qwertyKeyboard:!0,links:!0,degreeMode:!1,settingsMenu:!0,invertedColors:!1,backgroundColor:"#fff",textColor:"#000",brailleMode:"none",sixKeyInput:!1,brailleControls:!0,brailleExpressionDownload:!0,projectorMode:!1,capExpressionSize:!1,functionDefinition:!0,autosize:!0,evaluationMode:"scientific",restrictedEditing:!1,additionalFunctions:["sqrt"],typingSlashWritesDivisionSymbol:!1,typingAsteriskWritesTimesSymbol:!1,decimalToFraction:!0,replaceCommaWith10Exp:!1,replaceRoundWithReciprocal:!1},r);this.settings=new Tn;let n={workerPool:fh,settingsProxy:this.settings};this.controller=new Qm(i,n),this.controller.onEventEmitted=o=>{o==="render"&&this.updateView(),this.triggerEvent(o,void 0)},this.setupDomChangeDetector(i.autosize)}onCreateView(){return kh.mountToNode(fy,this.rootElt,{controller:kh.const(this.controller)})}setState(r,i){i||(i={}),this.controller.dispatch({type:"set-state-from-api",state:r,opts:{allowUndo:!!i.allowUndo}})}getState(){return __dcg_shared_module_exports__['M'](this.controller.model.getPersistedState())}undo(){this.controller.dispatch({type:"undo",source:"api"})}redo(){this.controller.dispatch({type:"redo",source:"api"})}clearHistory(){this.controller.dispatch({type:"clear-history"})}setBlank(r){r||(r={}),this.controller.dispatch({type:"set-blank",opts:{allowUndo:!!r.allowUndo}})}updateSettings(r){if(r!=null)for(let i in r)switch(i){case"fontSize":let n=r[i];if(n===void 0)continue;this.controller.dispatch({type:"update-font-size",size:n});break;case"invertedColors":let o=r[i];if(o===void 0)continue;this.controller.dispatch({type:"update-inverted-colors",mode:o});break;case"backgroundColor":let a=r[i];if(a===void 0||!__dcg_shared_module_exports__['cc'](a)){__dcg_shared_module_exports__['Gc'].warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)");continue}this.controller.dispatch({type:"update-background-color",color:a});break;case"textColor":let s=r[i];if(s===void 0||!__dcg_shared_module_exports__['cc'](s)){__dcg_shared_module_exports__['Gc'].warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)");continue}this.controller.dispatch({type:"update-text-color",color:s});break;case"degreeMode":let l=r[i];if(l===void 0)continue;this.controller.dispatch({type:"update-degree-mode",mode:l});break;case"brailleMode":let c=r[i];this.controller.dispatch({type:"set-braille-mode",mode:c});break;case"sixKeyInput":let u=r[i];if(u===void 0)continue;this.controller.dispatch({type:"set-six-key-input",mode:u});break;case"brailleControls":{let E=r[i];if(E===void 0)continue;this.controller.dispatch({type:"set-braille-controls",value:E});break}case"brailleExpressionDownload":let h=r[i];if(h===void 0)continue;this.controller.dispatch({type:"set-braille-expression-download",mode:h});break;case"projectorMode":let p=r[i];if(p===void 0)continue;this.controller.dispatch({type:"update-projector-mode",mode:p});break;case"capExpressionSize":let g=r[i];if(g===void 0)continue;this.controller.dispatch({type:"update-cap-expression-size",mode:g});break;case"language":let y=r[i];if(y===void 0)continue;this.controller.dispatch({type:"update-language",language:dl(y)});break;case"settingsMenu":r.settingsMenu?this.controller.dispatch({type:"enable-settings-menu"}):this.controller.dispatch({type:"disable-settings-menu"});break;case"qwertyKeyboard":{this.controller.dispatch({type:"update-options",options:{qwertyKeyboard:!!r.qwertyKeyboard}});let E=this.controller.getKeyboardMode();(E==="qwerty"||E==="letters")&&this.controller.dispatch({type:"ABC"})}break;case"functionDefinition":r.functionDefinition?this.controller.model.enableFunctionDefinition():this.controller.model.disableFunctionDefinition();break;case"links":this.controller.dispatch({type:"update-options",options:{links:!!r.links}});break;case"decimalToFraction":let w=r[i];if(w===void 0)continue;this.controller.dispatch({type:"update-decimal-to-fraction",mode:w});break;case"replaceCommaWith10Exp":let b=r[i];if(b===void 0)continue;this.controller.dispatch({type:"set-replace-comma-with-10-exp",replace:b});break;case"replaceRoundWithReciprocal":let D=r[i];if(D===void 0)continue;this.controller.dispatch({type:"set-replace-round-with-reciprocal",replace:D});break;case"restrictedEditing":{this.controller.dispatch({type:"update-options",options:{restrictedEditing:!!r.restrictedEditing}});break}case"typingAsteriskWritesTimesSymbol":let I=r[i];if(I===void 0)continue;this.controller.dispatch({type:"set-typing-asterisk-writes-times-symbol",mode:I});break}}focusFirstExpression(){this.controller.dispatch({type:"focus-first-expression"})}onResizeView(r){this.controller.dispatch({type:"ui/container-resized",size:r})}onDestroyView(){kh.unmountFromNode(this.rootElt)}destroy(){this.controller.model.destroy(),super.destroy()}};var Ih=class extends Dh{constructor(e,r){super(e),this.init(O6(r||{}))}};function O6(t){if(t=__dcg_shared_module_exports__['M'](t),t.hasOwnProperty("typingSlashWritesDivisionSymbol")||(t.typingSlashWritesDivisionSymbol=!0),t.hasOwnProperty("typingAsteriskWritesTimesSymbol")||(t.typingAsteriskWritesTimesSymbol=!0),t.exponentButtonForSquareRoot&&(__dcg_shared_module_exports__['Gc'].warn(`As of API version 1.0, the 'exponentButtonForSquareRoot' option is deprecated.Use 'additionalFunctions: "exponent"' instead.`),t.additionalFunctions=["exponent"]),t.additionalFunctions){var e=t.additionalFunctions;typeof e=="string"&&(e=[e]),e.length>2&&(__dcg_shared_module_exports__['Gc'].warn("additionalFunctions can only take up to 2 new functions. Using the first two."),e=e.slice(0,2));let i=!0;for(var r=0;r<e.length;r++)["sqrt","exponent","percent","fraction"].indexOf(e[r])===-1&&(__dcg_shared_module_exports__['Gc'].warn("Unrecognized value: '"+e[r]+`' for 'additionalFunction'. Valid values are 'sqrt', 'percent', 'exponent', or 'fraction'. Using default ("sqrt")`),i=!1);t.additionalFunctions=i?e:["sqrt"]}return(!t.additionalFunctions||!t.additionalFunctions.length)&&(t.additionalFunctions=["sqrt"]),t.singleExpression?t.evaluationMode="singleExpressionFourFunction":t.evaluationMode="fourFunction",delete t.singleExpression,t.hasOwnProperty("decimalToFraction")||(t.decimalToFraction=!1),t.language&&(t.language=dl(t.language)),t}var Mh=class extends Dh{constructor(e,r){super(e),this.init(_6(r||{}))}};function _6(t){return t=__dcg_shared_module_exports__['M'](t),t.singleExpression?t.evaluationMode="singleExpressionScientific":t.evaluationMode="scientific",delete t.singleExpression,t.language&&(t.language=dl(t.language)),t}var Gh=__dcg_shared_module_exports__['i'](ne());var my=class{constructor(e){this.keypadType="scientific";this.projectorMode="none";this.scientificKeyboardMode="main";this.dispatcher=new Rc;this.s=Pl(()=>"en");this.dispatch=e=>{this.dispatcher.dispatch(e);let r;for(;r=this._queuedCallbacks.shift();)r()};this._queuedCallbacks=[];var r,i;this.keypadType=(r=e==null?void 0:e.keypadType)!=null?r:"scientific",this.projectorMode=(i=e==null?void 0:e.projectorMode)!=null?i:"none",this.dispatcher=new Rc,this.hookUpDispatcher()}getBackgroundColor(){return"does-not-matter"}runAfterDispatch(e){this._queuedCallbacks.push(e)}enqueueEvent(e){this.runAfterDispatch(()=>{this.onEventEmitted&&this.onEventEmitted(e)})}getKeypadType(){return this.keypadType}getProjectorMode(){return this.projectorMode}getScientificKeyboardMode(){return this.scientificKeyboardMode}updateKeyboardMode(e){this.scientificKeyboardMode=e}typeIntoFocusedMathquill(e){e=e.replace(/\r|\n/g,"");let r=this.activeMQ;r&&(r.typedText(e),qe.simulateUserChangedLatex(r))}pressKeyInFocusedMathquill(e,r){let i=this.activeMQ;if(i){if(e==="Enter"){r&&(r.preventDefault(),r.stopPropagation()),this.enqueueEvent("enter");return}i.keystroke(e,r)}}executeCommandInFocusedMathquill(e){let r=this.activeMQ;r&&Pp(r,e)}hookUpDispatcher(){this.dispatcher.register(e=>{switch(this.enqueueEvent("render"),e.type){case"hide-keypad":this.enqueueEvent("hide-keypad");break;case"set-active-mq":this.activeMQ=e.mq;break;case"set-keypad-type":this.keypadType=e.keypadType;break;case"keypad/shift":this.updateKeyboardMode(this.scientificKeyboardMode==="capitalQwerty"?"qwerty":"capitalQwerty");break;case"main":this.updateKeyboardMode("main");break;case"ABC":this.updateKeyboardMode("qwerty");break;case"functions":this.updateKeyboardMode("functions");break;case"keypad/type-text":this.typeIntoFocusedMathquill(e.text);break;case"keypad/press-key":this.pressKeyInFocusedMathquill(e.key,e.evt);break;case"keypad/custom-command":this.executeCommandInFocusedMathquill(e.command);break;case"keypad/123":case"keypad/abc":case"keypad/audio-trace":break;default:return e}})}};var Ni=__dcg_shared_module_exports__['i'](ne());var F_=__dcg_shared_module_exports__['i'](ne()),_n=class extends F_.Class{init(){this.controller=this.props.controller(),this.dispatch=this.controller.dispatch,this.s=this.controller.s}};var zi=__dcg_shared_module_exports__['i'](ne());var aC=class extends _n{template(){return zi.createElement(qt,{controller:this.props.controller},zi.createElement(Ge,null,C(this,"a^2"),C(this,"a^b"),C(this,"|a|"),C(this,"a/b"),zi.createElement("div",{class:zi.const("dcg-partition-placeholder")}),C(this,"7",{style:"highlight"}),C(this,"8",{style:"highlight"}),C(this,"9",{style:"highlight"}),C(this,"/"),zi.createElement("div",{class:zi.const("dcg-partition-placeholder")}),C(this,"x"),C(this,"y")),zi.createElement(Ge,null,C(this,"("),C(this,")"),C(this,"<"),C(this,">"),zi.createElement("div",{class:zi.const("dcg-partition-placeholder")}),C(this,"4",{style:"highlight"}),C(this,"5",{style:"highlight"}),C(this,"6",{style:"highlight"}),C(this,"*"),zi.createElement("div",{class:zi.const("dcg-partition-placeholder")}),C(this,"left",{style:"highlight"}),C(this,"right",{style:"highlight"})),zi.createElement(Ge,null,C(this,"sqrt"),C(this,","),C(this,"<="),C(this,">="),zi.createElement("div",{class:zi.const("dcg-partition-placeholder")}),C(this,"1",{style:"highlight"}),C(this,"2",{style:"highlight"}),C(this,"3",{style:"highlight"}),C(this,"-"),zi.createElement("div",{class:zi.const("dcg-partition-placeholder")}),Hr(.5),C(this,"backspace",{style:"highlight",colspan:1.5})),zi.createElement(Ge,null,C(this,"nthroot"),C(this,"pi"),C(this,"%"),C(this,"a_b"),zi.createElement("div",{class:zi.const("dcg-partition-placeholder")}),C(this,"0",{style:"highlight"}),C(this,".",{style:"highlight"}),C(this,"="),C(this,"+"),zi.createElement("div",{class:zi.const("dcg-partition-placeholder")}),C(this,"enter",{colspan:2,style:"blue"})))}};var Is=__dcg_shared_module_exports__['i'](ne());var sC=class extends _n{template(){return Is.createElement(qt,{controller:this.props.controller},Is.createElement(Ge,null,C(this,"q"),C(this,"w"),C(this,"e"),C(this,"r"),C(this,"t"),C(this,"y"),C(this,"u"),C(this,"i"),C(this,"o"),C(this,"p")),Is.createElement(Ge,null,Is.createElement("div",{class:Is.const("dcg-half-width-placeholder")}),C(this,"a"),C(this,"s"),C(this,"d"),C(this,"f"),C(this,"g"),C(this,"h"),C(this,"j"),C(this,"k"),C(this,"l"),Is.createElement("div",{class:Is.const("dcg-half-width-placeholder")})),Is.createElement(Ge,null,C(this,"shift",{style:"highlight"}),C(this,"z"),C(this,"x"),C(this,"c"),C(this,"v"),C(this,"b"),C(this,"n"),C(this,"m"),C(this,":"),C(this,"backspace",{style:"highlight"})),Is.createElement(Ge,null,C(this,"~"),C(this,"{"),C(this,"}"),C(this,"["),C(this,"]"),C(this,"\xB1"),C(this,"'"),C(this,"obelus"),C(this,"enter",{style:"blue"})))}};var Ms=__dcg_shared_module_exports__['i'](ne());var lC=class extends _n{template(){return Ms.createElement(qt,{controller:this.props.controller},Ms.createElement(Ge,null,C(this,"Q"),C(this,"W"),C(this,"E"),C(this,"R"),C(this,"T"),C(this,"Y"),C(this,"U"),C(this,"I"),C(this,"O"),C(this,"P")),Ms.createElement(Ge,null,Ms.createElement("div",{class:Ms.const("dcg-half-width-placeholder")}),C(this,"A"),C(this,"S"),C(this,"D"),C(this,"F"),C(this,"G"),C(this,"H"),C(this,"J"),C(this,"K"),C(this,"L"),Ms.createElement("div",{class:Ms.const("dcg-half-width-placeholder")})),Ms.createElement(Ge,null,C(this,"shift",{style:"highlight"}),C(this,"Z"),C(this,"X"),C(this,"C"),C(this,"V"),C(this,"B"),C(this,"N"),C(this,"M"),C(this,","),C(this,"backspace",{style:"highlight"})),Ms.createElement(Ge,null,C(this,"="),C(this,"("),C(this,")"),C(this,"["),C(this,"]"),C(this,"\xB1"),C(this,"'"),C(this,"obelus"),C(this,"enter",{style:"blue"})))}};var Po=__dcg_shared_module_exports__['i'](ne());var cC=class extends _n{template(){return Po.createElement(qt,{controller:this.props.controller},Po.createElement(Ge,null,C(this,"sin"),C(this,"cos"),C(this,"tan"),Po.createElement("div",{class:Po.const("dcg-partition-placeholder")}),C(this,"ln"),C(this,"log"),C(this,"backspace",{style:"highlight"})),Po.createElement(Ge,null,C(this,"arcsin"),C(this,"arccos"),C(this,"arctan"),Po.createElement("div",{class:Po.const("dcg-partition-placeholder")}),C(this,"e^x"),C(this,"abs"),C(this,"round")),Po.createElement(Ge,null,C(this,"mean"),C(this,"stdev"),C(this,"stdevp"),Po.createElement("div",{class:Po.const("dcg-partition-placeholder")}),C(this,"a^b"),C(this,"sqrt"),C(this,"nthroot")),Po.createElement(Ge,null,C(this,"nPr"),C(this,"nCr"),C(this,"!"),Po.createElement("div",{class:Po.const("dcg-partition-placeholder")}),C(this,"e"),C(this,"%"),C(this,"enter",{style:"blue"})))}};var xo=__dcg_shared_module_exports__['i'](ne());var dC=class extends _n{template(){return xo.createElement(qt,{controller:this.props.controller},xo.createElement(Ge,null,C(this,"1",{style:"highlight"}),C(this,"2",{style:"highlight"}),C(this,"3",{style:"highlight"}),C(this,"4",{style:"highlight"}),C(this,"5",{style:"highlight"}),C(this,"6",{style:"highlight"}),C(this,"7",{style:"highlight"}),C(this,"8",{style:"highlight"}),C(this,"9",{style:"highlight"}),C(this,"0",{style:"highlight"}),xo.createElement("div",{class:xo.const("dcg-partition-placeholder")}),C(this,"left",{style:"highlight"}),C(this,"right",{style:"highlight"}),xo.createElement("div",{class:xo.const("dcg-inline-hide-keypad-button"),"dcg-command":xo.const("hide-keypad"),onTap:()=>this.props.controller().dispatch({type:"hide-keypad"})},xo.createElement("div",{class:xo.const("dcg-inline-hide-keypad-button-inner")},xo.createElement("i",{class:xo.const("dcg-icon-hide"),"aria-hidden":xo.const("true")})))),xo.createElement(Ge,null,Hr(2),C(this,"."),C(this,"="),C(this,"+"),C(this,"-"),C(this,"multiplication"),C(this,"obelus"),Hr(3),C(this,"backspace",{style:"highlight",colspan:1.5}),Hr(1)),xo.createElement(Ge,null,Hr(2),C(this,"a/b"),C(this,","),C(this,"("),C(this,")"),C(this,"<"),C(this,">"),Hr(2.5),C(this,"enter",{colspan:2,style:"blue"}),Hr(1)))}};var qa=__dcg_shared_module_exports__['i'](ne());var uC=class extends _n{template(){let t=this.props.controller();return qa.createElement(xa,{controller:this.props.controller},qa.createElement(Ar,{command:this.const("main"),selected:()=>t.getScientificKeyboardMode()==="main",ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:()=>t.dispatch({type:"main"})},()=>t.s("basic-calculator-button-controlbar-main")),qa.createElement(Ar,{command:this.const("ABC"),selected:()=>["qwerty","capitalQwerty"].indexOf(t.getScientificKeyboardMode())!==-1,ignoreInTabOrder:this.const(!0),selectable:this.const(!0),ariaLabel:()=>t.s("basic-calculator-narration-controlbar-abc"),onTap:()=>t.dispatch({type:"ABC"})},()=>t.s("basic-calculator-button-controlbar-abc")),qa.createElement(Ar,{command:this.const("functions"),selected:()=>["functions","restrictedFunctions"].indexOf(t.getScientificKeyboardMode())!==-1,ariaLabel:()=>t.s("basic-calculator-narration-controlbar-functions"),ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:()=>t.dispatch({type:"functions"})},()=>t.s("shared-calculator-button-controlbar-functions")),qa.createElement("div",{class:qa.const("dcg-hide-keypad-button"),"dcg-command":qa.const("hide-keypad"),onTap:()=>t.dispatch({type:"hide-keypad"})},qa.createElement("i",{class:qa.const("dcg-icon-hide"),"aria-hidden":qa.const("true")})))}};var{Switch:F6,SwitchUnion:R6}=Ni.Components,pC=class extends _n{template(){return Ni.createElement("div",{class:Ni.const("dcg-calculator-api-container"),style:()=>"width: 100%; height: 100%; position: relative;"},Ni.createElement("div",{class:Ni.const("dcg-do-not-blur dcg-container dcg-api-shared-keypad-root"),didMount:this.bindFn(this.didMountRoot)},this.children))}didMountRoot(e){yc(e)}},_k=class extends _n{template(){return Ni.createElement(pC,__dcg_shared_module_exports__['b']({},this.props),Ni.createElement("div",{class:()=>({"dcg-fourfunction-keypad-container":!0,"dcg-projector-mode":this.props.controller().getProjectorMode()!=="none","dcg-classroom-large-projector-mode":this.props.controller().getProjectorMode()==="large"}),role:Ni.const("region"),"aria-label":()=>this.s("shared-calculator-narration-keypad")},Ni.createElement(dC,{controller:this.props.controller})))}},Fk=class extends _n{template(){return Ni.createElement(pC,__dcg_shared_module_exports__['b']({},this.props),Ni.createElement("div",{class:()=>({"dcg-scientific-keypad-container":!0,"dcg-projector-mode":this.props.controller().getProjectorMode()!=="none","dcg-classroom-large-projector-mode":this.props.controller().getProjectorMode()==="large"})},Ni.createElement(uC,{controller:this.props.controller}),Ni.createElement("div",{role:Ni.const("group"),"aria-label":()=>this.s("shared-calculator-narration-keypad")},Ni.createElement(F6,{key:()=>this.controller.getScientificKeyboardMode()},e=>{switch(e){case"qwerty":return Ni.createElement(sC,{controller:this.props.controller});case"capitalQwerty":return Ni.createElement(lC,{controller:this.props.controller});case"functions":return Ni.createElement(cC,{controller:this.props.controller});default:return Ni.createElement(aC,{controller:this.props.controller})}}))))}},hC=class extends _n{template(){return R6(()=>this.controller.getKeypadType(),{fourfunction:()=>Ni.createElement(_k,__dcg_shared_module_exports__['b']({},this.props)),scientific:()=>Ni.createElement(Fk,__dcg_shared_module_exports__['b']({},this.props))})}};var Th=class extends Bd{constructor(r,i){super(r);this.init(i)}init(r){this.controller=new my(r),this.controller.onEventEmitted=i=>{i==="render"&&this.updateView(),this.triggerEvent(i,void 0)},this.setupDomChangeDetector(!0)}setActiveMathquill(r){this.controller.dispatch({type:"set-active-mq",mq:r})}setKeypadType(r){this.controller.dispatch({type:"set-keypad-type",keypadType:r})}onCreateView(){return Gh.mountToNode(hC,this.rootElt,{controller:Gh.const(this.controller)})}onResizeView(r){}onDestroyView(){Gh.unmountFromNode(this.rootElt)}destroy(){super.destroy()}};var Ah=class extends Nd{constructor(e,r,i){super(e,__dcg_shared_module_exports__['c'](__dcg_shared_module_exports__['b']({},r),{product:"geometry-calculator"}),i),this.setState(Rp),this.clearHistory()}};var R_=__dcg_shared_module_exports__['i'](Lc());var N6=__dcg_shared_module_exports__['i'](ne());Us();var oc;typeof Desmos!="undefined"?oc=Desmos:(oc={},window.Desmos=oc);var B6={SMALL:"0.85",MEDIUM:"1",LARGE:"1.35"};function yy(...t){return new mh(...t)}yy.prototype=mh.prototype;function N_(...t){return new Ah(...t)}N_.prototype=Ah.prototype;function Rk(...t){return new yh(...t)}Rk.prototype=yh.prototype;function B_(...t){return new Ih(...t)}B_.prototype=Ih.prototype;function K_(...t){return new Mh(...t)}K_.prototype=Mh.prototype;function U_(...t){return new Th(...t)}U_.prototype=Th.prototype;var fC={version:l1,Colors:{RED:Vx,BLUE:Lx,GREEN:Px,ORANGE:_x,PURPLE:Ox,BLACK:Fx},imageFileToDataURL:Hx,supportedLanguages:["en"].concat(oc.localeData?Object.keys(oc.localeData):oc.locales?Object.keys(oc.locales):[]),Styles:__dcg_shared_module_exports__['b'](__dcg_shared_module_exports__['b']({},OE),PE),ColumnModes:qg,DragModes:_E,AxisArrowModes:__dcg_shared_module_exports__['rc'],FontSizes:Ux,LabelSizes:B6,LabelOrientations:FE,GraphingCalculator:yy,Calculator:yy,FourFunctionCalculator:B_,ScientificCalculator:K_,Abraham:R_,Private:{Abraham:R_,Mathtools:Ek,Graphtools:{ScalePair:__dcg_shared_module_exports__['jc'],getClippingGraphType:Ng,mapSegmentToCanvas:ip,computeDrawingCommandsForDOMLabel:Cx,drawCommandsToCtx:Sx},MathquillConfig:{getAutoCommands:qs,getAutoOperators:Ko},Parser:__dcg_shared_module_exports__['Ec'],extractSliderValueFromLatex:Mg,__compareBranches:{getSliderMin:da,getSliderMax:is},GeometryBeta:N_,HeadlessGraphingCalculator:Rk,Fragile:{DCGView:N6,PromptSliderView:ws,Checkbox:kt,SegmentedControl:Oi,MathquillView:qe,InlineMathInputView:Ir,StaticMathquillView:ze,Tooltip:Ue,ExpressionOptionsMenuView:eh,evaluateLatex:ai,Keys:Vr,jQuery,getQueryParams:En,getReconciledExpressionProps:__dcg_shared_module_exports__['$b'],List:{moveItemsTo:$u,removeItemById:Wu},currentLanguage:TE}},TestInternal:{subscribeToSharedClockBus:t=>Vl(t),getCalcConfigAll:()=>kT(),fetchLanguage:t=>Ax(t),asyncLoadStateAtStartup:I0},MathQuill:Uo,PillowKeypad:U_,HeadlessGraphingCalculator:Rk};function Nk(t){var e=oc.enabledFeatures;return!e||e[t]}function mC(t){fC[t]=function(){throw new Error("The Desmos "+t+" is not enabled for this API key.")}}Nk("GraphingCalculator")||(mC("GraphingCalculator"),mC("Calculator"));Nk("FourFunctionCalculator")||mC("FourFunctionCalculator");Nk("ScientificCalculator")||mC("ScientificCalculator");for(gC in fC)fC.hasOwnProperty(gC)&&(oc[gC]=fC[gC]);var gC;V(".mathquill-embedded-latex").each(function(){Uo.StaticMath(this)});V("div.note").addClass("alert").addClass("alert-info");V("div.warning").addClass("alert");V("tt.docutils").replaceWith(function(){return V("<code />").text(V(this).text())});var K6=V(".navbar .sticky-nav ul");V("h2").each(function(){let t=V("<li>").addClass("toctree-l1");V("<a>").addClass("reference").addClass("internal").attr("href","#"+V(this).attr("id")).html(V(this).html()).appendTo(t),t.appendTo(K6)});var $_=function(){let t=V(document).scrollTop();V(".nav").toggleClass("fixed",t>40);var e=__dcg_shared_module_exports__['m'](V(".sticky-nav a.reference"),function(i){var n=V(V(i).attr("href"));let o=n&&n.offset();return!!o&&o.top-65<=t}),r=e.pop()||V(".sticky-nav a")[0];V(".sticky-nav li.active").removeClass("active"),V(r).parent().addClass("active")};V(document).scroll($_);$_();var q_=document.getElementById("quickstart-geometry");q_&&window.Desmos.Geometry(q_);var H_=document.getElementById("quickstart-grapher");H_&&yy(H_);V('td:contains("#")').each(function(){var t=V(this).html();t.match(/#.{6}$/g)&&V(this).append(V("<div>").addClass("color-swatch").css("background",t))});yc(document.body);EM();
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */
/*!!
 *  Canvas 2 Svg v1.0.19
 *  A low level canvas to SVG converter. Uses a mock canvas context to build an SVG document.
 *
 *  Licensed under the MIT license:
 *  http://www.opensource.org/licenses/mit-license.php
 *
 *  Author:
 *  Kerry Liu
 *
 *  Copyright (c) 2014 Gliffy Inc.
 *
 *  Modifications by Desmos:
 *  - wrapped in AMD pattern
 *  - added ctx.ellipse() method
 *  - fixed image opacity bug
 *  - added ability to add classNames to exported svg elements
 *  - added ability to add named groups
 *  - removed dominant-basline attribute. Editors appear to ignore it. Must solve baseline issues using transformations
 */
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */
})()