(()=>{var Hk=Object.create;var jc=Object.defineProperty,jk=Object.defineProperties,Yk=Object.getOwnPropertyDescriptor,Jk=Object.getOwnPropertyDescriptors,Qk=Object.getOwnPropertyNames,wh=Object.getOwnPropertySymbols,Xk=Object.getPrototypeOf,kh=Object.prototype.hasOwnProperty,Zk=Object.prototype.propertyIsEnumerable;var vh=(e,t,r)=>t in e?jc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ye=(e,t)=>{for(var r in t||(t={}))kh.call(t,r)&&vh(e,r,t[r]);if(wh)for(var r of wh(t))Zk.call(t,r)&&vh(e,r,t[r]);return e},Dt=(e,t)=>jk(e,Jk(t));var Eh=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var Te=(e,t)=>()=>(e&&(t=e(e=0)),t);var La=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),eE=(e,t)=>{for(var r in t)jc(e,r,{get:t[r],enumerable:!0})},tE=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Qk(t))!kh.call(e,a)&&a!==r&&jc(e,a,{get:()=>t[a],enumerable:!(n=Yk(t,a))||n.enumerable});return e};var he=(e,t,r)=>(r=e!=null?Hk(Xk(e)):{},tE(t||!e||!e.__esModule?jc(r,"default",{value:e,enumerable:!0}):r,e));var Sh=La(bs=>{var ie=bs&&bs.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yc=bs&&bs.__assign||function(){return Yc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Yc.apply(this,arguments)};(function(){var e=-1,t=1,r=Math.min,n=Math.max;function a(){}function c(u,s){if(!s)throw new Error("prayer failed: "+u)}function l(u){c("a direction was passed",u===e||u===t)}function g(u){var s=document.implementation.createHTMLDocument("");if(s.body.innerHTML=u,s.body.children.length===1)return s.body.children[0];for(var i=document.createDocumentFragment();s.body.firstChild;)i.appendChild(s.body.firstChild);return i}var p=function(s,i,o){var d;switch(s){case"svg":case"path":d=document.createElementNS("http://www.w3.org/2000/svg",s);break;default:d=document.createElement(s)}for(var h in i){var b=i[h];b!==void 0&&d.setAttribute(h,typeof b=="string"?b:String(b))}if(o)for(var v=0;v<o.length;v++)d.appendChild(o[v]);return d};p.text=function(u){return document.createTextNode(u)},p.block=function(u,s,i){var o=p(u,s,[i.html()]);return i.setDOM(o),Ht.linkElementByBlockNode(o,i),o},p.entityText=function(u){var s=g(u);return c("entity parses to a single text node",s instanceof DocumentFragment&&s.childNodes.length===1&&s.childNodes[0]instanceof Text),s.childNodes[0]};function f(u,s){var i,o,d;if(typeof((i=u)===null||i===void 0?void 0:i.closest)=="function")return u.closest(s);if(!(u instanceof HTMLElement))return null;var h=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,b=u;do{if(h.call(b,s))return b;b=(d=(o=b==null?void 0:b.parentElement)!==null&&o!==void 0?o:b==null?void 0:b.parentNode)!==null&&d!==void 0?d:null}while(b!==null&&b.nodeType===1);return null}var w="\xA0",M="\u200B",G="\u02D9",R="\u2211",ue="\u220F",pe="\u2210",_e="\u222B";function $e(u){return u.getClientRects().length?u.getBoundingClientRect():{top:0,left:0,height:0,width:0,x:0,y:0,bottom:0,right:0}}function Le(){return window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}function Re(){return window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}var Je=function(){var u,s;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(u=requestAnimationFrame,s=cancelAnimationFrame):(u=function(i){return setTimeout(i,13)},s=clearTimeout),function(i,o){var d=Date.now(),h,b=0;function v(){var K=(Date.now()-d)/i;K<=b?L():b=K,o(b,L,E)}function E(){h!==void 0&&s(h),h=void 0}function L(){E(),h=u(v)}o(i<=0?1:0,L,E)}}(),It=function(){function u(s){this.span=p("span",{class:"dcg-mq-aria-alert","aria-live":"assertive","aria-atomic":"true"}),this.msg="",this.items=[],this.controller=s}return u.prototype.attach=function(){var s=this.controller.container;this.span.parentNode!==s&&ge(s).prepend(ge(this.span))},u.prototype.queue=function(s,i){i===void 0&&(i=!1);var o="";if(s instanceof mr){var d=s.mathspeak({ignoreShorthand:!0});i&&(s.parent&&s.parent.ariaLabel&&s.ariaLabel==="block"?o=s.parent.ariaLabel+" "+d:s.ariaLabel&&(o=s.ariaLabel+" "+d)),o===""&&(o=d)}else o=s||"";return this.items.push(o),this},u.prototype.queueDirOf=function(s){return l(s),this.queue(s===e?"before":"after")},u.prototype.queueDirEndOf=function(s){return l(s),this.queue(s===e?"beginning of":"end of")},u.prototype.alert=function(s){return this.attach(),s&&this.queue(s),this.items.length&&(this.msg=this.items.join(" ").replace(/ +(?= )/g,"").trim(),this.controller.containerHasFocus()&&(this.controller.options.logAriaAlerts&&this.msg&&console.log(this.msg),this.span.textContent=this.msg)),this.clear()},u.prototype.clear=function(){return this.items.length=0,this},u}(),it=function(){function u(s,i){var o;arguments.length===1&&(i=s),!(!s||!i)&&(this.ends=(o={},o[e]=s,o[t]=i,o))}return u.create=function(s,i){arguments.length===1&&(i=s),c("No half-empty DOMFragments",!!s==!!i);var o=new u(s,i);return c("last is a forward sibling of first",o.isValid()),o},u.prototype.isEmpty=function(){return this.ends===void 0},u.prototype.isOneNode=function(){return!!(this.ends&&this.ends[e]===this.ends[t])},u.prototype.isValid=function(){if(!this.ends||this.ends[e]===this.ends[t])return!0;var s;return this.eachNode(function(i){return s=i}),s===this.ends[t]},u.prototype.firstNode=function(){return c("Fragment is not empty",this.ends),this.ends[e]},u.prototype.lastNode=function(){return c("Fragment is not empty",this.ends),this.ends[t]},u.prototype.children=function(){var s=this.oneNode(),i=s.firstChild,o=s.lastChild;return i&&o?new u(i,o):new u},u.prototype.join=function(s){if(!this.ends)return s;if(!s.ends)return this;for(var i=!1,o=this.ends[t].nextSibling;o;){if(o===s.ends[e]){i=!0;break}o=o.nextSibling}return c("sibling must be a forward DOM sibling of this fragment",i),new u(this.ends[e],s.ends[t])},u.prototype.oneNode=function(){return c("Fragment has a single node",this.ends&&this.ends[e]===this.ends[t]),this.ends[e]},u.prototype.oneElement=function(){var s=this.oneNode();return c("Node is an Element",s.nodeType===Node.ELEMENT_NODE),s},u.prototype.oneText=function(){var s=this.oneNode();return c("Node is Text",s.nodeType===Node.TEXT_NODE),s},u.prototype.eachNode=function(s){if(!this.ends)return this;for(var i=this.ends[t],o=this.ends[e],d=void 0;o&&(d=o.nextSibling,s(o),o!==i);o=d);return this},u.prototype.eachElement=function(s){return this.eachNode(function(i){i.nodeType===Node.ELEMENT_NODE&&s(i)}),this},u.prototype.text=function(){var s="";return this.eachNode(function(i){s+=i.textContent||""}),s},u.prototype.toNodeArray=function(){var s=[];return this.eachNode(function(i){return s.push(i)}),s},u.prototype.toElementArray=function(){var s=[];return this.eachElement(function(i){return s.push(i)}),s},u.prototype.toDocumentFragment=function(){var s=document.createDocumentFragment();return this.eachNode(function(i){return s.appendChild(i)}),s},u.prototype.insertBefore=function(s){return this.insDirOf(e,s)},u.prototype.insertAfter=function(s){return this.insDirOf(t,s)},u.prototype.append=function(s){return s.appendTo(this.oneElement()),this},u.prototype.prepend=function(s){return s.prependTo(this.oneElement()),this},u.prototype.appendTo=function(s){return this.insAtDirEnd(t,s)},u.prototype.prependTo=function(s){return this.insAtDirEnd(e,s)},u.prototype.parent=function(){if(!this.ends)return this;var s=this.ends[e].parentNode;return s?new u(s):new u},u.prototype.wrapAll=function(s){if(s.textContent="",!this.ends)return this;var i=this.ends[e].parentNode,o=this.ends[t].nextSibling;return this.appendTo(s),i&&i.insertBefore(s,o),this},u.prototype.replaceWith=function(s){var i,o=(i=this.ends)===null||i===void 0?void 0:i[t],d=o==null?void 0:o.parentNode,h=o==null?void 0:o.nextSibling;this.detach();var b=s.toDocumentFragment();return!o||!d?this:(d.insertBefore(b,h||null),this)},u.prototype.nthElement=function(s){if(this.ends&&!(s<0||s!==Math.floor(s)))for(var i=this.ends[e];i;){if(i.nodeType===Node.ELEMENT_NODE){if(s<=0)return i;s-=1}if(i===this.ends[t])return;i=i.nextSibling}},u.prototype.firstElement=function(){return this.nthElement(0)},u.prototype.lastElement=function(){if(this.ends)for(var s=this.ends[t];s;){if(s.nodeType===Node.ELEMENT_NODE)return s;if(s===this.ends[e])return;s=s.previousSibling}},u.prototype.first=function(){return new u(this.firstElement())},u.prototype.last=function(){return new u(this.lastElement())},u.prototype.eq=function(s){return new u(this.nthElement(s))},u.prototype.slice=function(s){if(!this.ends)return this;var i=this.nthElement(s);return i?new u(i,this.ends[t]):new u},u.prototype.next=function(){for(var s=this.oneNode();s;)if(s=s.nextSibling,s&&s.nodeType===Node.ELEMENT_NODE)return new u(s);return new u},u.prototype.prev=function(){for(var s=this.oneNode();s;)if(s=s.previousSibling,s&&s.nodeType===Node.ELEMENT_NODE)return new u(s);return new u},u.prototype.empty=function(){return this.eachElement(function(s){s.textContent=""}),this},u.prototype.remove=function(){return this.toDocumentFragment(),this},u.prototype.detach=function(){return this.remove()},u.prototype.insDirOf=function(s,i){var o;if(!this.ends)return this;var d=(o=i.ends)===null||o===void 0?void 0:o[s];return!d||!d.parentNode?this.detach():(ta(s,d.parentNode,this.toDocumentFragment(),d),this)},u.prototype.insAtDirEnd=function(s,i){return this.ends?(Q(s,this.toDocumentFragment(),i),this):this},u.prototype.hasClass=function(s){var i=!1;return this.eachElement(function(o){o.classList.contains(s)&&(i=!0)}),i},u.prototype.addClass=function(s){for(var i=function(v){if(!v)return"continue";o.eachElement(function(E){E.classList.add(v)})},o=this,d=0,h=s.split(/\s+/);d<h.length;d++){var b=h[d];i(b)}return this},u.prototype.removeClass=function(s){for(var i=function(v){if(!v)return"continue";o.eachElement(function(E){E.classList.remove(v)})},o=this,d=0,h=s.split(/\s+/);d<h.length;d++){var b=h[d];i(b)}return this},u.prototype.toggleClass=function(s,i){if(i===!0)return this.addClass(s);if(i===!1)return this.removeClass(s);for(var o=function(E){if(!E)return"continue";d.eachElement(function(L){L.classList.toggle(E)})},d=this,h=0,b=s.split(/\s+/);h<b.length;h++){var v=b[h];o(v)}return this},u}(),ge=it.create;function ta(u,s,i,o){s.insertBefore(i,u===e?o:o.nextSibling)}function Q(u,s,i){u===e?i.insertBefore(s,i.firstChild):i.appendChild(s)}var ce=function(){function u(s,i,o){this.init(s,i,o)}return u.prototype.init=function(s,i,o){this.parent=s,this[e]=i,this[t]=o},u.copy=function(s){return new u(s.parent,s[e],s[t])},u}();function Ze(u,s){var i=u[e];if(i){var o=u[t];if(o)for(o=o[t];i!==o;i=i[t]){var d=s(i);if(d===!1)break}}}function nn(u,s,i){var o=u[e];if(!o)return s;var d=u[t];if(!d)return s;for(d=d[t];o!==d;o=o[t])s=i(s,o);return s}var Ht=function(){function u(){var o;this[s]=0,this[i]=0,this.parent=0,this.ends=(o={},o[e]=0,o[t]=0,o),this.id=u.uniqueNodeId()}u.uniqueNodeId=function(){return u.idCounter+=1},u.getNodeOfElement=function(o){if(o){if(!o.nodeType)throw new Error("must pass an Element to NodeBase.getNodeOfElement");var d=o;return d.mqBlockNode||d.mqCmdNode}},u.linkElementByBlockNode=function(o,d){o.mqBlockNode=d},u.linkElementByCmdNode=function(o,d){o.mqCmdNode=d},u.prototype.setEnds=function(o){this.ends=o,c("No half-empty node ends",!!this.ends[e]==!!this.ends[t])},u.prototype.getEnd=function(o){return this.ends[o]},u.prototype.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},u.prototype.setDOM=function(o){return o&&c("DOM is an element or a text node",o.nodeType===Node.ELEMENT_NODE||o.nodeType===Node.TEXT_NODE),this._el=o,this},u.prototype.domFrag=function(){return ge(this._el)},u.prototype.createDir=function(o,d){l(o);var h=this;return h.html(),h.domFrag().insDirOf(o,d.domFrag()),d[o]=h.adopt(d.parent,d[e],d[t]),h},u.prototype.createLeftOf=function(o){this.createDir(e,o)},u.prototype.selectChildren=function(o,d){return new Tc(o,d)},u.prototype.bubble=function(o){for(var d=this.getSelfNode(),h=d;h;h=h.parent){var b=o(h);if(b===!1)break}return this},u.prototype.postOrder=function(o){var d=this.getSelfNode();return function h(b){return b?(b.eachChild(h),o(b),!0):!1}(d),d},u.prototype.isEmpty=function(){return this.ends[e]===0&&this.ends[t]===0},u.prototype.isQuietEmptyDelimiter=function(o){if(!this.isEmpty()||!o||!this.parent||this.parent.ctrlSeq===void 0)return!1;var d=this.parent.ctrlSeq.replace(/^\\(left|right)?/,"");return o.hasOwnProperty(d)},u.prototype.isStyleBlock=function(){return!1},u.prototype.isTextBlock=function(){return!1},u.prototype.children=function(){return new jt(this.getEnd(e),this.getEnd(t))},u.prototype.eachChild=function(o){return Ze(this.ends,o),this},u.prototype.foldChildren=function(o,d){return nn(this.ends,o,d)},u.prototype.withDirAdopt=function(o,d,h,b){var v=this.getSelfNode();return new jt(v,v).withDirAdopt(o,d,h,b),this},u.prototype.adopt=function(o,d,h){var b=this.getSelfNode();return new jt(b,b).adopt(o,d,h),this.getSelfNode()},u.prototype.disown=function(){var o=this.getSelfNode();return new jt(o,o).disown(),this},u.prototype.remove=function(){return this.domFrag().remove(),this.disown()},u.prototype.shouldIgnoreSubstitutionInSimpleSubscript=function(o){return!(!o.disableAutoSubstitutionInSubscripts||!this.parent||!(this.parent.parent instanceof Br)||!this.parent.domFrag().hasClass("dcg-mq-sub"))},u.prototype.getSelfNode=function(){return this},u.prototype.parser=function(){c("Abstract parser() method is never called",!1)},u.prototype.html=function(){throw new Error("html() unimplemented in NodeBase")},u.prototype.text=function(){return""},u.prototype.latex=function(){var o={latex:"",startIndex:-1,endIndex:-1};return this.latexRecursive(o),o.latex},u.prototype.latexRecursive=function(o){},u.prototype.checkCursorContextOpen=function(o){o.startSelectionBefore===this&&(o.startIndex=o.latex.length),o.endSelectionBefore===this&&(o.endIndex=o.latex.length)},u.prototype.checkCursorContextClose=function(o){o.startSelectionAfter===this&&(o.startIndex=o.latex.length),o.endSelectionAfter===this&&(o.endIndex=o.latex.length)},u.prototype.finalizeTree=function(o,d){},u.prototype.contactWeld=function(o,d){},u.prototype.blur=function(o){},u.prototype.focus=function(){},u.prototype.intentionalBlur=function(){},u.prototype.reflow=function(){},u.prototype.registerInnerField=function(o,d){},u.prototype.chToCmd=function(o,d){c("Abstract chToCmd() method is never called",!1)},u.prototype.mathspeak=function(o){return""},u.prototype.seek=function(o,d){},u.prototype.siblingDeleted=function(o,d){},u.prototype.siblingCreated=function(o,d){},u.prototype.finalizeInsert=function(o,d){},u.prototype.fixDigitGrouping=function(o){},u.prototype.writeLatex=function(o,d){},u.prototype.write=function(o,d){};var s,i;return s=e,i=t,u.idCounter=0,u}();function gr(u,s,i){c("a parent is always present",u),c("leftward is properly set up",function(){return s?s[t]===i&&s.parent===u:u.getEnd(e)===i}()),c("rightward is properly set up",function(){return i?i[e]===s&&i.parent===u:u.getEnd(t)===s}())}var jt=function(){function u(s,i,o){var d,h;if(this.disowned=!1,o===void 0&&(o=e),l(o),c("no half-empty fragments",!s==!i),!s||!i){this.setEnds((d={},d[e]=0,d[t]=0,d));return}c("withDir is passed to Fragment",s instanceof mr),c("oppDir is passed to Fragment",i instanceof mr),c("withDir and oppDir have the same parent",s.parent===i.parent);var b=(h={},h[o]=s,h[-o]=i,h);this.setEnds(b);var v=0;this.each(function(E){v=E}),c("following direction siblings from start reaches end",v===b[t])}return u.prototype.getDOMFragFromEnds=function(){var s=this.ends[e],i=this.ends[t];return s===0||i===0?ge():s===i?s.domFrag():s.domFrag().join(i.domFrag())},u.prototype.setEnds=function(s){this.ends=s},u.prototype.getEnd=function(s){return this.ends?this.ends[s]:0},u.prototype.domFrag=function(){return this.getDOMFragFromEnds()},u.prototype.withDirAdopt=function(s,i,o,d){return s===e?this.adopt(i,o,d):this.adopt(i,d,o)},u.prototype.adopt=function(s,i,o){var d;gr(s,i,o);var h=this;this.disowned=!1;var b=h.ends[e];if(!b)return this;var v=h.ends[t];if(!v)return this;var E=(d={},d[e]=s.getEnd(e),d[t]=s.getEnd(t),d);return i||(E[e]=b),o?o[e]=v:E[t]=v,s.setEnds(E),v[t]=o,h.each(function(L){return L[e]=i,L.parent=s,i&&(i[t]=L),i=L,!0}),h},u.prototype.disown=function(){var s,i=this,o=i.ends[e];if(!o||i.disowned)return i;this.disowned=!0;var d=i.ends[t];if(!d)return i;var h=o.parent;gr(h,o[e],o),gr(h,d,d[t]);var b=(s={},s[e]=h.getEnd(e),s[t]=h.getEnd(t),s);if(o[e]){var v=o[e];v[t]=d[t]}else b[e]=d[t];if(d[t]){var E=d[t];E[e]=o[e]}else b[t]=o[e];return b[e]&&b[t]?h.setEnds(b):h.ends=b,i},u.prototype.remove=function(){return this.domFrag().remove(),this.disown()},u.prototype.each=function(s){return Ze(this.ends,s),this},u.prototype.fold=function(s,i){return nn(this.ends,s,i)},u}(),C={},an={};function Eu(u){return u&&u.prototype instanceof mr}var Cu=function(u){ie(s,u);function s(i,o,d){var h=u.call(this,i,o,d)||this;return h.ancestors={},h}return s.fromCursor=function(i){return new s(i.parent,i[e],i[t])},s}(ce),Cc=function(u){ie(s,u);function s(i,o,d){var h=u.call(this,i,0,0)||this;return h.upDownCache={},h.cursorElement=p("span",{class:"dcg-mq-cursor"},[p.text(M)]),h._domFrag=ge(),h.controller=d,h.options=o,h.setDOMFrag(ge(h.cursorElement)),h.blink=function(){ge(h.cursorElement).toggleClass("dcg-mq-blink")},h}return s.prototype.setDOMFrag=function(i){return this._domFrag=i,this},s.prototype.domFrag=function(){return this._domFrag},s.prototype.show=function(){if(ge(this.cursorElement).removeClass("dcg-mq-blink"),this.setDOMFrag(ge(this.cursorElement)),this.intervalId)clearInterval(this.intervalId);else{var i=this[t];if(i){var o=this.selection;o&&o.getEnd(e)[e]===this[e]?this.domFrag().insertBefore(o.domFrag()):this.domFrag().insertBefore(i.domFrag())}else this.domFrag().appendTo(this.parent.domFrag().oneElement());this.parent.focus()}return this.intervalId=setInterval(this.blink,500),this},s.prototype.hide=function(){return this.intervalId&&clearInterval(this.intervalId),this.intervalId=0,this.domFrag().detach(),this.setDOMFrag(ge()),this},s.prototype.withDirInsertAt=function(i,o,d,h){var b=this.parent;this.parent=o,this[i]=d,this[-i]=h,b!==o&&b.blur&&b.blur(this)},s.prototype.insDirOf=function(i,o){return l(i),this.domFrag().insDirOf(i,o.domFrag()),this.withDirInsertAt(i,o.parent,o[i],o),this.parent.domFrag().addClass("dcg-mq-hasCursor"),this},s.prototype.insLeftOf=function(i){return this.insDirOf(e,i)},s.prototype.insRightOf=function(i){return this.insDirOf(t,i)},s.prototype.insAtDirEnd=function(i,o){return l(i),this.domFrag().insAtDirEnd(i,o.domFrag().oneElement()),this.withDirInsertAt(i,o,0,o.getEnd(i)),o.focus(),this},s.prototype.insAtLeftEnd=function(i){return this.insAtDirEnd(e,i)},s.prototype.insAtRightEnd=function(i){return this.insAtDirEnd(t,i)},s.prototype.jumpUpDown=function(i,o){var d=this;d.upDownCache[i.id]=ce.copy(d);var h=d.upDownCache[o.id];if(h){var b=h[t];b?d.insLeftOf(b):d.insAtRightEnd(h.parent)}else{var v=d.getBoundingClientRectWithoutMargin().left;o.seek(v,d)}d.controller.aria.queue(o,!0)},s.prototype.getBoundingClientRectWithoutMargin=function(){var i=this.domFrag();i.removeClass("dcg-mq-cursor");var o=$e(i.oneElement()),d=o.left,h=o.right;return i.addClass("dcg-mq-cursor"),{left:d,right:h}},s.prototype.unwrapGramp=function(){var i=this.parent.parent,o=i.parent,d=i[t],h=this,b=i[e];if(i.disown().eachChild(function(F){return F.isEmpty()||(F.children().adopt(o,b,d).each(function(H){return H.domFrag().insertBefore(i.domFrag()),!0}),b=F.getEnd(t)),!0}),!this[t]){var v=this[e];if(v)this[t]=v[t];else for(;!this[t];){var E=this.parent[t];if(E)this.parent=E,this[t]=E.getEnd(e);else{this[t]=i[t],this.parent=o;break}}}var L=this[t];L?this.insLeftOf(L):this.insAtRightEnd(o),i.domFrag().remove();var K=i[e],B=i[t];K&&K.siblingDeleted(h.options,t),B&&B.siblingDeleted(h.options,e)},s.prototype.startSelection=function(){for(var i=this.anticursor=Cu.fromCursor(this),o=i.ancestors,d=i;d.parent;d=d.parent)o[d.parent.id]=d},s.prototype.endSelection=function(){delete this.anticursor},s.prototype.select=function(){var i,o=this.anticursor;if(this[e]===o[e]&&this.parent===o.parent)return!1;for(var d=this;d.parent;d=d.parent)if(d.parent.id in o.ancestors){i=d.parent;break}c("cursor and anticursor in the same tree",i);var h=i,b=o.ancestors[h.id],v,E,L=t;if(d[e]!==b){for(var K=d;K;K=K[t])if(K[t]===b[t]){L=e,v=d,E=b;break}}L===t&&(v=b,E=d),v instanceof ce&&(v=v[t]),E instanceof ce&&(E=E[e]),this.hide().selection=h.selectChildren(v,E);var B=this.selection.getEnd(L);return this.insDirOf(L,B),this.selectionChanged(),!0},s.prototype.resetToEnd=function(i){this.clearSelection();var o=i.root;this[t]=0,this[e]=o.getEnd(t),this.parent=o},s.prototype.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},s.prototype.deleteSelection=function(){var i=this.selection;i&&(this[e]=i.getEnd(e)[e],this[t]=i.getEnd(t)[t],i.remove(),this.selectionChanged(),delete this.selection)},s.prototype.replaceSelection=function(){var i=this.selection;return i&&(this[e]=i.getEnd(e)[e],this[t]=i.getEnd(t)[t],delete this.selection),i},s.prototype.depth=function(){for(var i=this,o=0;i=i.parent;)o+=i instanceof Tr?1:0;return o},s.prototype.isTooDeep=function(i){return this.options.maxDepth!==void 0?this.depth()+(i||0)>this.options.maxDepth:!1},s.prototype.selectionChanged=function(){},s}(ce),Tc=function(u){ie(s,u);function s(i,o,d){var h=u.call(this,i,o,d)||this;return h._el=p("span",{class:"dcg-mq-selection"}),h.getDOMFragFromEnds().wrapAll(h._el),h}return s.prototype.isCleared=function(){return this._el===void 0},s.prototype.domFrag=function(){return this.isCleared()?this.getDOMFragFromEnds():ge(this._el)},s.prototype.setEnds=function(i){c("Selection ends are never empty",i[e]&&i[t]),this.ends=i},s.prototype.getEnd=function(i){return this.ends[i]},s.prototype.adopt=function(i,o,d){return this.clear(),u.prototype.adopt.call(this,i,o,d)},s.prototype.clear=function(){var i=this.getDOMFragFromEnds();return this.domFrag().replaceWith(i),this._el=void 0,this},s.prototype.join=function(i,o){return o===void 0&&(o=""),this.fold("",function(d,h){return d+o+h[i]()})},s}(jt),wn=function(){function u(s,i,o){this.textareaEventListeners={},this.id=s.id,this.data={},this.root=s,this.container=i,this.options=o,this.aria=new It(this.getControllerSelf()),this.ariaLabel="Math Input",this.ariaPostLabel="",s.controller=this.getControllerSelf(),this.cursor=s.cursor=new Cc(s,o,this.getControllerSelf())}return u.prototype.getControllerSelf=function(){return this},u.prototype.handle=function(s,i){var o,d=this.options.handlers,h=(o=this.options.handlers)===null||o===void 0?void 0:o.fns[s];if(h){var b=d==null?void 0:d.APIClasses[this.KIND_OF_MQ];c("APIClass is defined",b);var v=new b(this);i===e||i===t?h(i,v):h(v)}},u.onNotify=function(s){u.notifyees.push(s)},u.prototype.notify=function(s){for(var i=0;i<u.notifyees.length;i+=1)u.notifyees[i](this.cursor,s);return this},u.prototype.setAriaLabel=function(s){var i=this.getAriaLabel();return s&&typeof s=="string"&&s!==""?this.ariaLabel=s:this.editable?this.ariaLabel="Math Input":this.ariaLabel="",this.ariaLabel!==i&&!this.containerHasFocus()&&this.updateMathspeak(),this},u.prototype.getAriaLabel=function(){return this.ariaLabel!=="Math Input"?this.ariaLabel:this.editable?"Math Input":""},u.prototype.setAriaPostLabel=function(s,i){var o=this;return s&&typeof s=="string"&&s!==""?(s!==this.ariaPostLabel&&typeof i=="number"&&(this._ariaAlertTimeout&&clearTimeout(this._ariaAlertTimeout),this._ariaAlertTimeout=setTimeout(function(){o.containerHasFocus()?o.aria.alert(o.root.mathspeak().trim()+" "+s.trim()):o.updateMathspeak()},i)),this.ariaPostLabel=s):(this._ariaAlertTimeout&&clearTimeout(this._ariaAlertTimeout),this.ariaPostLabel=""),this},u.prototype.getAriaPostLabel=function(){return this.ariaPostLabel||""},u.prototype.containerHasFocus=function(){return document.activeElement&&this.container.contains(document.activeElement)},u.prototype.getTextareaOrThrow=function(){var s=this.textarea;if(!s)throw new Error("expected a textarea");return s},u.prototype.getTextareaSpanOrThrow=function(){var s=this.textareaSpan;if(!s)throw new Error("expected a textareaSpan");return s},u.prototype.addTextareaEventListeners=function(s){if(this.textarea)for(var i in s){var o=i;this.removeTextareaEventListener(o),this.textarea.addEventListener(o,s[o])}},u.prototype.removeTextareaEventListener=function(s){if(this.textarea){var i=this.textareaEventListeners[s];i&&this.textarea.removeEventListener(s,i)}},u.prototype.exportMathSpeak=function(){return this.root.mathspeak()},u.prototype.updateMathspeak=function(){},u.prototype.scrollHoriz=function(){},u.prototype.selectionChanged=function(){},u.prototype.setOverflowClasses=function(){},u.notifyees=[],u}(),hr={},zi={},Tu={handlers:!0,autoCommands:!0,quietEmptyDelimiters:!0,autoParenthesizedFunctions:!0,autoOperatorNames:!0,leftRightIntoCmdGoes:!0,maxDepth:!0,interpretTildeAsSim:!0},vn={},er=function(){function u(s){this.version=s}return u.prototype.assertJquery=function(){return c("Interface versions > 2 do not depend on JQuery",this.version<=2),c("JQuery is set for interface v < 3",this.jQuery),this.jQuery},u}(),Ki=function(){function u(){}return u}(),Wi=function(){window.console&&console.warn(`You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:

    MathQuill = MathQuill.getInterface(1);
    // now MathQuill.MathField() works like it used to

See also the "\`dev\` branch (2014\u20132015) \u2192 v0.10.0 Migration Guide" at
  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide`)},Sa;function tr(u){return Wi(),Sa||(Sa=Xa(1)),Sa(u)}tr.prototype=Ki.prototype,tr.VERSION="v0.10.1",tr.interfaceVersion=function(u){if(u!==1)throw"Only interface version 1 supported. You specified: "+u;return Wi=function(){window.console&&console.warn(`You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:

    MathQuill = MathQuill.getInterface(1);
    // now MathQuill.MathField() works like it used to

See also the "\`dev\` branch (2014\u20132015) \u2192 v0.10.0 Migration Guide" at
  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide`)},Wi(),tr},tr.getInterface=Xa;var Su=Xa.MIN=1,Du=Xa.MAX=3;function Xa(u){if(u!==1&&u!==2&&u!==3)throw"Only interface versions between "+Su+" and "+Du+" supported. You specified: "+u;var s=u;if(s<3){var i=window.jQuery;if(!i)throw"MathQuill interface version ".concat(s," requires jQuery 1.5.2+ to be loaded first");er.prototype.jQuery=i}var o=Yc(Yc({},vn),{handlers:function(B){return{fns:B||{},APIClasses:E}}});function d(B,F){for(var H in F)if(F.hasOwnProperty(H)){if(H==="substituteKeyboardEvents"&&s>=3)throw new Error(["As of interface version 3, the 'substituteKeyboardEvents'","option is no longer supported. Use 'overrideTypedText' and","'overrideKeystroke' instead."].join(" "));var X=F[H],re=o[H];B[H]=re?re(X):X}}var h=s<3?er:function(B){ie(F,B);function F(){return B!==null&&B.apply(this,arguments)||this}return F}(er),b=function(B){ie(F,B);function F(H){var X=B.call(this)||this;return X.__controller=H,X.__options=H.options,X.id=H.id,X.data=H.data,X}return F.prototype.mathquillify=function(H){var X=this.__controller,re=X.root,ne=X.container;X.createTextarea();var le=ge(ne).addClass(H).children().detach();re.setDOM(ge(p("span",{class:"dcg-mq-root-block","aria-hidden":!0})).appendTo(ne).oneElement()),Ht.linkElementByBlockNode(re.domFrag().oneElement(),re),this.latex(le.text()),this.revert=function(){return X.removeMouseEventListener(),ge(ne).removeClass("dcg-mq-editable-field dcg-mq-math-mode dcg-mq-text-mode").empty().append(le),s<3?this.__options.assertJquery()(ne):ne}},F.prototype.setAriaLabel=function(H){return this.__controller.setAriaLabel(H),this},F.prototype.getAriaLabel=function(){return this.__controller.getAriaLabel()},F.prototype.config=function(H){return d(this.__options,H),this},F.prototype.el=function(){return this.__controller.container},F.prototype.text=function(){return this.__controller.exportText()},F.prototype.mathspeak=function(){return this.__controller.exportMathSpeak()},F.prototype.latex=function(H){if(arguments.length>0){this.__controller.renderLatexMath(H);var X=this.__controller.cursor;return this.__controller.blurred&&X.hide().parent.blur(X),this}return this.__controller.exportLatex()},F.prototype.selection=function(){return this.__controller.exportLatexSelection()},F.prototype.html=function(){return this.__controller.root.domFrag().oneElement().innerHTML.replace(/ jQuery\d+="(?:\d+|null)"/g,"").replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?dcg-mq-cursor( dcg-mq-blink)?"?>.?<\/span>/i,"").replace(/ dcg-mq-hasCursor|dcg-mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},F.prototype.reflow=function(){return this.__controller.root.postOrder(function(H){H.reflow()}),this},F}(Ki),v=function(B){ie(F,B);function F(){return B!==null&&B.apply(this,arguments)||this}return F.prototype.mathquillify=function(H){return B.prototype.mathquillify.call(this,H),this.__controller.editable=!0,this.__controller.addMouseEventListener(),this.__controller.editablesTextareaEvents(),this},F.prototype.focus=function(){return this.__controller.getTextareaOrThrow().focus(),this.__controller.scrollHoriz(),this},F.prototype.blur=function(){return this.__controller.getTextareaOrThrow().blur(),this},F.prototype.write=function(H){this.__controller.writeLatex(H),this.__controller.scrollHoriz();var X=this.__controller.cursor;return this.__controller.blurred&&X.hide().parent.blur(X),this},F.prototype.empty=function(){var H,X=this.__controller.root,re=this.__controller.cursor;return X.setEnds((H={},H[e]=0,H[t]=0,H)),X.domFrag().empty(),delete re.selection,re.insAtRightEnd(X),this},F.prototype.cmd=function(H){var X=this.__controller.notify(void 0),re=X.cursor;if(/^\\[a-z]+$/i.test(H)&&!re.isTooDeep()){H=H.slice(1);var ne=C[H],le;ne&&(ne.constructor?le=new ne(H):le=ne(H),re.selection&&le.replaces(re.replaceSelection()),le.createLeftOf(re.show()))}else re.parent.write(re,H);return X.scrollHoriz(),X.blurred&&re.hide().parent.blur(re),this},F.prototype.select=function(){return this.__controller.selectAll(),this},F.prototype.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},F.prototype.moveToDirEnd=function(H){return this.__controller.notify("move").cursor.insAtDirEnd(H,this.__controller.root),this},F.prototype.moveToLeftEnd=function(){return this.moveToDirEnd(e)},F.prototype.moveToRightEnd=function(){return this.moveToDirEnd(t)},F.prototype.keystroke=function(H,X){for(var re=H.replace(/^\s+|\s+$/g,"").split(/\s+/),ne=0;ne<re.length;ne+=1)this.__controller.keystroke(re[ne],X);return this},F.prototype.typedText=function(H){for(var X=0;X<H.length;X+=1)this.__controller.typedText(H.charAt(X));return this},F.prototype.dropEmbedded=function(H,X,re){var ne=H-Le(),le=X-Re(),Ie=document.elementFromPoint(ne,le);this.__controller.seek(Ie,ne,le);var ct=new hs().setOptions(re);ct.createLeftOf(this.__controller.cursor)},F.prototype.setAriaPostLabel=function(H,X){return this.__controller.setAriaPostLabel(H,X),this},F.prototype.getAriaPostLabel=function(){return this.__controller.getAriaPostLabel()},F.prototype.clickAt=function(H,X,re){re=re||document.elementFromPoint(H,X);var ne=this.__controller,le=ne.root,Ie=le.domFrag().oneElement();return Ie.contains(re)||(re=Ie),ne.seek(re,H,X),ne.blurred&&this.focus(),this},F.prototype.ignoreNextMousedown=function(H){return this.__controller.cursor.options.ignoreNextMousedown=H,this},F}(b),E={AbstractMathQuill:b,EditableField:v};c("API.StaticMath defined",hr.StaticMath),E.StaticMath=hr.StaticMath(E),c("API.MathField defined",hr.MathField),E.MathField=hr.MathField(E),c("API.InnerMathField defined",hr.InnerMathField),E.InnerMathField=hr.InnerMathField(E),hr.TextField&&(E.TextField=hr.TextField(E));var L=function(B){if(!B||!B.nodeType)return null;for(var F,H=ge(B).children().toElementArray(),X=0,re=H;X<re.length;X++){var ne=re[X];if(ne.classList.contains("dcg-mq-root-block")){F=ne;break}}var le=Ht.getNodeOfElement(F),Ie=le&&le.controller,ct=Ie&&E[Ie.KIND_OF_MQ];return Ie&&ct?new ct(Ie):null};L.L=e,L.R=t,L.config=function(B){return d(h.prototype,B),this},L.registerEmbed=function(B,F){if(!/^[a-z][a-z0-9]*$/i.test(B))throw"Embed name must start with letter and be only letters and digits";zi[B]=F},L.StaticMath=K("StaticMath",E.StaticMath),L.MathField=K("MathField",E.MathField),L.InnerMathField=K("InnerMathField",E.InnerMathField),E.TextField&&(L.TextField=K("TextField",E.TextField)),L.prototype=b.prototype,L.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},L.EditableField.prototype=v.prototype,s<3&&(L.saneKeyboardEvents=Gc);function K(B,F){c(B+" is defined",F);function H(X,re){if(!X||!X.nodeType)return null;var ne=L(X);if(ne instanceof F)return ne;var le=new is(new F.RootBlock,X,new h(s));return le.KIND_OF_MQ=B,new F(le).__mathquillify(re||{},s)}return H.prototype=F.prototype,H}return L}tr.noConflict=function(){return window.MathQuill=Sc,tr};var Sc=window.MathQuill;window.MathQuill=tr;function Hi(u){u.moveOutOf=function(s){c("controller is defined",this.controller),this.controller.handle("moveOutOf",s)},u.deleteOutOf=function(s){c("controller is defined",this.controller),this.controller.handle("deleteOutOf",s)},u.selectOutOf=function(s){c("controller is defined",this.controller),this.controller.handle("selectOutOf",s)},u.upOutOf=function(){c("controller is defined",this.controller),this.controller.handle("upOutOf")},u.downOutOf=function(){c("controller is defined",this.controller),this.controller.handle("downOutOf")},u.reflow=function(){c("controller is defined",this.controller),this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}function rs(u,s){throw u?u="'"+u+"'":u="EOF","Parse Error: "+s+" at "+u}var Ee=function(){function u(s){this._=s}return u.prototype.parse=function(s){return this.skip(u.eof)._(""+s,i,rs);function i(o,d){return d}},u.prototype.or=function(s){c("or is passed a parser",s instanceof u);var i=this;return new u(function(o,d,h){return i._(o,d,b);function b(v){return s._(o,d,h)}})},u.prototype.then=function(s){var i=this;return new u(function(o,d,h){return i._(o,b,h);function b(v,E){var L=s instanceof u?s:s(E);return c("a parser is returned",L instanceof u),L._(v,d,h)}})},u.prototype.many=function(){var s=this;return new u(function(i,o,d){for(var h=[];s._(i,b,v););return o(i,h);function b(E,L){return i=E,h.push(L),!0}function v(){return!1}})},u.prototype.times=function(s,i){arguments.length<2&&(i=s);var o=this;return new u(function(d,h,b){for(var v=[],E=!0,L,K=0;K<s;K+=1)if(E=!!o._(d,B,F),!E)return b(d,L);for(;K<i&&E;K+=1)o._(d,B,H);return h(d,v);function B(X,re){return v.push(re),d=X,!0}function F(X,re){return L=re,d=X,!1}function H(X,re){return!1}})},u.prototype.result=function(s){return this.then(u.succeed(s))},u.prototype.atMost=function(s){return this.times(0,s)},u.prototype.atLeast=function(s){var i=this;return i.times(s).then(function(o){return i.many().map(function(d){return o.concat(d)})})},u.prototype.map=function(s){return this.then(function(i){return u.succeed(s(i))})},u.prototype.skip=function(s){return this.then(function(i){return s.result(i)})},u.string=function(s){var i=s.length,o="expected '"+s+"'";return new u(function(d,h,b){var v=d.slice(0,i);return v===s?h(d.slice(i),v):b(d,o)})},u.regex=function(s){c("regexp parser is anchored",s.toString().charAt(1)==="^");var i="expected "+s;return new u(function(o,d,h){var b=s.exec(o);if(b){var v=b[0];return d(o.slice(v.length),v)}else return h(o,i)})},u.succeed=function(s){return new u(function(i,o){return o(i,s)})},u.fail=function(s){return new u(function(i,o,d){return d(i,s)})},u.letter=u.regex(/^[a-z]/i),u.letters=u.regex(/^[a-z]*/i),u.digit=u.regex(/^[0-9]/),u.digits=u.regex(/^[0-9]*/),u.whitespace=u.regex(/^\s+/),u.optWhitespace=u.regex(/^\s*/),u.any=new u(function(s,i,o){return s?i(s.slice(1),s.charAt(0)):o(s,"expected any character")}),u.all=new u(function(s,i,o){return i("",s)}),u.eof=new u(function(s,i,o){return s?o(s,"expected EOF"):i(s,s)}),u}(),Dc=function(){function u(){this.fn=a}return u.prototype.listen=function(s){this.fn=s,clearTimeout(this.timeoutId),this.timeoutId=setTimeout(this.fn)},u.prototype.listenOnce=function(s){var i=this;this.listen(function(){for(var o=[],d=0;d<arguments.length;d++)o[d]=arguments[d];i.clearListener(),s.apply(void 0,o)})},u.prototype.clearListener=function(){this.fn=a,clearTimeout(this.timeoutId)},u.prototype.trigger=function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];this.fn.apply(this,s)},u}(),Mc=function(){var u={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"},s={ArrowRight:"Right",ArrowLeft:"Left",ArrowDown:"Down",ArrowUp:"Up",Delete:"Del",Escape:"Esc"," ":"Spacebar"};function i(b){switch(d(b)){case"Right":case"Left":case"Down":case"Up":return!0}return!1}function o(b){return b.length===1&&b>="a"&&b<="z"}function d(b){var v;if(b.key===void 0){var E=b.which||b.keyCode;return u[E]||String.fromCharCode(E)}return o(b.key)?b.key.toUpperCase():(v=s[b.key])!==null&&v!==void 0?v:b.key}function h(b){var v=d(b),E=[];return b.ctrlKey&&E.push("Ctrl"),b.metaKey&&E.push("Meta"),b.altKey&&E.push("Alt"),b.shiftKey&&E.push("Shift"),E.length?(v!=="Alt"&&v!=="Control"&&v!=="Meta"&&v!=="Shift"&&E.push(v),E.join("-")):v}return function(v,E){var L=null,K=null,B=new Dc;function F(){try{v instanceof HTMLTextAreaElement&&v.select()}catch(Oe){}}function H(Oe){B.trigger(),B.clearListener(),v instanceof HTMLTextAreaElement&&(v.value=Oe),Oe&&F(),X=!!Oe}var X=!1;function re(){return!("selectionStart"in v)||!(v instanceof HTMLTextAreaElement)?!1:v.selectionStart!==v.selectionEnd}function ne(){E.options&&E.options.overrideKeystroke?E.options.overrideKeystroke(h(L),L):E.keystroke(h(L),L)}function le(Oe){B.trigger(Oe),Oe.target===v&&(L=Oe,K=null,X&&B.listenOnce(function(_n){_n&&_n.type==="focusout"||F()}),ne())}function Ie(Oe){B.trigger(Oe),Oe.target===v&&(L&&K&&ne(),K=Oe,i(Oe)?B.listenOnce(lt):B.listen(Pe))}function ct(Oe){B.trigger(Oe),Oe.target===v&&L&&!K&&(i(Oe)?B.listenOnce(lt):B.listen(Pe))}function Pe(){if(!re()&&v instanceof HTMLTextAreaElement){var Oe=v.value;L&&!L.altKey&&L.ctrlKey&&!L.metaKey&&L.shiftKey&&(L.key==="U"||L.key==="Unidentified"||L.key==="Process")||(Oe.length===1?(v.value="",E.options&&E.options.overrideTypedText?E.options.overrideTypedText(Oe):E.typedText(Oe)):lt())}}function lt(){v instanceof HTMLTextAreaElement&&v.value.length>1&&F()}function Dr(){L=null,K=null,B.clearListener(),v instanceof HTMLTextAreaElement&&(v.value="")}function xr(Oe){B.trigger(),Oe.target===v&&(document.activeElement!==v&&v.focus(),B.listen(function(){if(v instanceof HTMLTextAreaElement){var cn=v.value;v.value="",cn&&E.paste(cn)}}))}function En(Oe){B.trigger(Oe)}return E.options&&E.options.disableCopyPaste?E.addTextareaEventListeners({keydown:le,keypress:Ie,keyup:ct,focusout:Dr,copy:function(Oe){Oe.preventDefault()},cut:function(Oe){Oe.preventDefault()},paste:function(Oe){B.trigger(),Oe.preventDefault()},input:En}):E.addTextareaEventListeners({keydown:le,keypress:Ie,keyup:ct,focusout:Dr,cut:function(){B.listenOnce(function(){E.cut()})},copy:function(){B.listenOnce(function(){E.copy()})},paste:xr,input:En}),{select:H}}}(),Mu=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.exportText=function(){return this.root.foldChildren("",function(i,o){return i+o.text()})},s}(wn);wn.onNotify(function(u,s){if(s==="edit"||s==="replace"||s===void 0){var i=u.controller;if(!i||!i.options.enableDigitGrouping||i.blurred!==!1)return;i.disableGroupingForSeconds(1)}});var Au=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.handleTextareaFocusEditable=function(){var o=i.cursor;i.updateMathspeak(),i.blurred=!1,clearTimeout(i.blurTimeout),ge(i.container).addClass("dcg-mq-focused"),o.parent||o.insAtRightEnd(i.root),o.selection?(o.selection.domFrag().removeClass("dcg-mq-blur"),i.selectionChanged()):o.show(),i.setOverflowClasses()},i.handleTextareaBlurEditable=function(){i.textareaSelectionTimeout&&(clearTimeout(i.textareaSelectionTimeout),i.textareaSelectionTimeout=0),i.disableGroupingForSeconds(0),i.blurred=!0,i.blurTimeout=setTimeout(function(){i.root.postOrder(function(o){o.intentionalBlur()}),i.cursor.clearSelection().endSelection(),i.blur(),i.updateMathspeak(),i.scrollHoriz()}),window.addEventListener("blur",i.handleWindowBlur)},i.handleTextareaFocusStatic=function(){i.blurred=!1},i.handleTextareaBlurStatic=function(){i.cursor.selection&&i.cursor.selection.clear(),setTimeout(function(){ge(i.getTextareaSpanOrThrow()).detach(),i.blurred=!0})},i.handleWindowBlur=function(){clearTimeout(i.blurTimeout),i.cursor.selection&&i.cursor.selection.domFrag().addClass("dcg-mq-blur"),i.blur(),i.updateMathspeak()},i}return s.prototype.disableGroupingForSeconds=function(i){var o=this;clearTimeout(this.__disableGroupingTimeout),i===0?this.root.domFrag().removeClass("dcg-mq-suppress-grouping"):(this.root.domFrag().addClass("dcg-mq-suppress-grouping"),this.__disableGroupingTimeout=setTimeout(function(){o.root.domFrag().removeClass("dcg-mq-suppress-grouping")},i*1e3))},s.prototype.blur=function(){this.cursor.hide().parent.blur(this.cursor),ge(this.container).removeClass("dcg-mq-focused"),window.removeEventListener("blur",this.handleWindowBlur),this.options&&this.options.resetCursorOnBlur&&this.cursor.resetToEnd(this)},s.prototype.addEditableFocusBlurListeners=function(){var i=this,o=i.cursor;this.addTextareaEventListeners({focus:this.handleTextareaFocusEditable,blur:this.handleTextareaBlurEditable}),i.blurred=!0,o.hide().parent.blur(o)},s.prototype.addStaticFocusBlurListeners=function(){this.addTextareaEventListeners({focus:this.handleTextareaFocusStatic,blur:this.handleTextareaBlurStatic})},s}(Mu),On=!1,mr=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.keystroke=function(i,o,d){var h=d.cursor;switch(i){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":d.ctrlDeleteDir(e);break;case"Shift-Backspace":case"Backspace":d.backspace();break;case"Esc":case"Tab":d.escapeDir(t,i,o);return;case"Shift-Tab":case"Shift-Esc":d.escapeDir(e,i,o);return;case"End":d.notify("move").cursor.insAtRightEnd(h.parent),d.aria.queue("end of").queue(h.parent,!0);break;case"Ctrl-End":d.notify("move").cursor.insAtRightEnd(d.root),d.aria.queue("end of").queue(d.ariaLabel).queue(d.root).queue(d.ariaPostLabel);break;case"Shift-End":d.selectToBlockEndInDir(t);break;case"Ctrl-Shift-End":d.selectToRootEndInDir(t);break;case"Home":d.notify("move").cursor.insAtLeftEnd(h.parent),d.aria.queue("beginning of").queue(h.parent,!0);break;case"Ctrl-Home":d.notify("move").cursor.insAtLeftEnd(d.root),d.aria.queue("beginning of").queue(d.ariaLabel).queue(d.root).queue(d.ariaPostLabel);break;case"Shift-Home":d.selectToBlockEndInDir(e);break;case"Ctrl-Shift-Home":d.selectToRootEndInDir(e);break;case"Left":d.moveLeft();break;case"Shift-Left":d.selectLeft();break;case"Ctrl-Left":break;case"Right":d.moveRight();break;case"Shift-Right":d.selectRight();break;case"Ctrl-Right":break;case"Up":d.moveUp();break;case"Down":d.moveDown();break;case"Shift-Up":d.withIncrementalSelection(function(b){if(h[e])for(;h[e];)b(e);else b(e)});break;case"Shift-Down":d.withIncrementalSelection(function(b){if(h[t])for(;h[t];)b(t);else b(t)});break;case"Ctrl-Up":break;case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":d.ctrlDeleteDir(t);break;case"Shift-Del":case"Del":d.deleteForward();break;case"Meta-A":case"Ctrl-A":d.selectAll();break;case"Ctrl-Alt-Up":h.parent.parent&&h.parent.parent instanceof s?d.aria.queue(h.parent.parent):d.aria.queue("nothing above");break;case"Ctrl-Alt-Down":h.parent&&h.parent instanceof s?d.aria.queue(h.parent):d.aria.queue("block is empty");break;case"Ctrl-Alt-Left":h.parent.parent&&h.parent.parent.getEnd(e)?d.aria.queue(h.parent.parent.getEnd(e)):d.aria.queue("nothing to the left");break;case"Ctrl-Alt-Right":h.parent.parent&&h.parent.parent.getEnd(t)?d.aria.queue(h.parent.parent.getEnd(t)):d.aria.queue("nothing to the right");break;case"Ctrl-Alt-Shift-Down":h.selection?d.aria.queue(h.selection.join("mathspeak"," ").trim()+" selected"):d.aria.queue("nothing selected");break;case"Ctrl-Alt-=":case"Ctrl-Alt-Shift-Right":d.ariaPostLabel.length?d.aria.queue(d.ariaPostLabel):d.aria.queue("no answer");break;default:return}d.aria.alert(),o==null||o.preventDefault(),d.scrollHoriz()},s.prototype.moveOutOf=function(i,o,d){c("overridden or never called on this node",!1)},s.prototype.moveTowards=function(i,o,d){c("overridden or never called on this node",!1)},s.prototype.deleteOutOf=function(i,o){c("overridden or never called on this node",!1)},s.prototype.deleteTowards=function(i,o){c("overridden or never called on this node",!1)},s.prototype.unselectInto=function(i,o){c("overridden or never called on this node",!1)},s.prototype.selectOutOf=function(i,o){c("overridden or never called on this node",!1)},s.prototype.selectTowards=function(i,o){c("overridden or never called on this node",!1)},s}(Ht);wn.onNotify(function(u,s){(s==="move"||s==="upDown")&&u.show().clearSelection()}),vn.leftRightIntoCmdGoes=function(u){if(u&&u!=="up"&&u!=="down")throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+u+'"';return u},wn.onNotify(function(u,s){s!=="upDown"&&(u.upDownCache={})}),wn.onNotify(function(u,s){s==="edit"&&u.show().deleteSelection()}),wn.onNotify(function(u,s){s!=="select"&&u.endSelection()});var ns=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.keystroke=function(i,o){this.cursor.parent.keystroke(i,o,this.getControllerSelf())},s.prototype.escapeDir=function(i,o,d){l(i);var h=this.cursor;if(h.parent!==this.root&&(d==null||d.preventDefault()),h.parent!==this.root)return h.clearSelection(),h.parent.moveOutOf(i,h),h.controller.aria.alert(),this.notify("move")},s.prototype.moveDir=function(i){l(i);var o=this.cursor,d=o.options.leftRightIntoCmdGoes,h=o[i];return o.selection?o.insDirOf(i,o.selection.getEnd(i)):h?h.moveTowards(i,o,d):o.parent.moveOutOf(i,o,d),this.notify("move")},s.prototype.moveLeft=function(){return this.moveDir(e)},s.prototype.moveRight=function(){return this.moveDir(t)},s.prototype.moveUp=function(){return this.moveUpDown("up")},s.prototype.moveDown=function(){return this.moveUpDown("down")},s.prototype.moveUpDown=function(i){var o=this,d=o.notify("upDown").cursor,h,b;i==="up"?(h="upInto",b="upOutOf"):(h="downInto",b="downOutOf");var v=d[e],E=d[t],L=E&&E[h],K=v&&v[h];return L?d.insAtLeftEnd(L):K?d.insAtRightEnd(K):d.parent.bubble(function(B){var F=B[b];if(F&&(typeof F=="function"&&(F=F.call(B,d)),F instanceof mr&&d.jumpUpDown(B,F),F!==!0))return!1}),o},s.prototype.deleteDir=function(i){l(i);var o=this.cursor,d=o[i],h=o.parent.parent,b=o.controller;if(d&&d instanceof mr)d.sides?b.aria.queue(d.parent.chToCmd(d.sides[-i].ch).mathspeak({createdLeftOf:o})):!d.blocks&&d.parent.ctrlSeq!=="\\text"&&b.aria.queue(d);else if(h&&h instanceof mr)if(h.sides)b.aria.queue(h.parent.chToCmd(h.sides[i].ch).mathspeak({createdLeftOf:o}));else if(h.blocks&&h.mathspeakTemplate)if(h.upInto&&h.downInto)b.aria.queue(h.mathspeakTemplate[1]);else{var v=h.mathspeakTemplate,E=i===e?v[0]:v[v.length-1];b.aria.queue(E)}else b.aria.queue(h);var L=o.selection;if(this.notify("edit"),!L){var K=o[i];K?K.deleteTowards(i,o):o.parent.deleteOutOf(i,o)}var B=o[e],F=o[t];return B.siblingDeleted&&B.siblingDeleted(o.options,t),F.siblingDeleted&&F.siblingDeleted(o.options,e),o.parent.bubble(function(H){H.reflow()}),this},s.prototype.ctrlDeleteDir=function(i){l(i);var o=this.cursor;if(!o[i]||o.selection)return this.deleteDir(i);this.notify("edit");var d;i===e?d=new jt(o.parent.getEnd(e),o[e]):d=new jt(o[t],o.parent.getEnd(t)),o.controller.aria.queue(d),d.remove(),o.insAtDirEnd(i,o.parent);var h=o[e],b=o[t];return h&&h.siblingDeleted(o.options,t),b&&b.siblingDeleted(o.options,e),o.parent.bubble(function(v){v.reflow()}),this},s.prototype.backspace=function(){return this.deleteDir(e)},s.prototype.deleteForward=function(){return this.deleteDir(t)},s.prototype.startIncrementalSelection=function(){c("Multiple selections can't be simultaneously open",!On),On=!0,this.notify("select");var i=this.cursor;i.anticursor||i.startSelection()},s.prototype.selectDirIncremental=function(i){c("A selection is open",On),On=!0;var o=this.cursor,d=o.selection;l(i);var h=o[i];h?d&&d.getEnd(i)===h&&o.anticursor[-i]!==h?h.unselectInto(i,o):h.selectTowards(i,o):o.parent.selectOutOf(i,o)},s.prototype.finishIncrementalSelection=function(){c("A selection is open",On);var i=this.cursor;i.clearSelection(),i.select()||i.show();var o=i.selection;o&&i.controller.aria.clear().queue(o.join("mathspeak"," ").trim()+" selected"),On=!1},s.prototype.withIncrementalSelection=function(i){var o=this;try{this.startIncrementalSelection();try{i(function(d){return o.selectDirIncremental(d)})}finally{this.finishIncrementalSelection()}}finally{On=!1}},s.prototype.selectDir=function(i){this.withIncrementalSelection(function(o){return o(i)})},s.prototype.selectLeft=function(){return this.selectDir(e)},s.prototype.selectRight=function(){return this.selectDir(t)},s.prototype.selectAll=function(){this.notify("move");var i=this.cursor;i.insAtRightEnd(this.root),this.withIncrementalSelection(function(o){for(;i[e];)o(e)})},s.prototype.selectToBlockEndInDir=function(i){var o=this.cursor;this.withIncrementalSelection(function(d){for(;o[i];)d(i)})},s.prototype.selectToRootEndInDir=function(i){var o=this,d=this.cursor;this.withIncrementalSelection(function(h){for(;d[i]||d.parent!==o.root;)h(i)})},s}(Au),as=function(u){ie(s,u);function s(i){return u.call(this)||this}return s}(mr),fr=function(){function u(Pe){var lt=new Tr;return Pe.adopt(lt,0,0),lt}function s(Pe){for(var lt=Pe[0]||new Tr,Dr=1;Dr<Pe.length;Dr+=1)Pe[Dr].children().adopt(lt,lt.getEnd(t),0);return lt}var i=Ee.string,o=Ee.regex,d=Ee.letter,h=Ee.digit,b=Ee.any,v=Ee.optWhitespace,E=Ee.succeed,L=Ee.fail,K=d.map(function(Pe){return new ra(Pe)}),B=h.map(function(Pe){return new Yi(Pe)}),F=o(/^[^${}\\_^]/).map(function(Pe){return new Za(Pe)}),H=o(/^[^\\a-eg-zA-Z]/).or(i("\\").then(o(/^[a-z]+/i).or(o(/^\s+/).result(" ")).or(b))).then(function(Pe){var lt=C[Pe];if(lt)if(lt.constructor){var Dr=lt;return new Dr(Pe).parser()}else{var xr=lt;return xr(Pe).parser()}else return L("unknown command: \\"+Pe)}),X=H.or(K).or(B).or(F),re=i("{").then(function(){return le}).skip(i("}")),ne=v.then(re.or(X.map(u))),le=ne.many().map(s).skip(v),Ie=i("[").then(ne.then(function(Pe){return Pe.join("latex")!=="]"?E(Pe):L("")}).many().map(s).skip(v)).skip(i("]")),ct=le;return ct.block=ne,ct.optBlock=Ie,ct}();vn.maxDepth=function(u){return typeof u=="number"?u:void 0};var Ac=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.cleanLatex=function(i){return i.replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},s.prototype.exportLatex=function(){return this.cleanLatex(this.root.latex())},s.prototype.writeLatex=function(i){var o=this.notify("edit").cursor;return o.parent.writeLatex(o,i),this},s.prototype.exportLatexSelection=function(){var i={latex:"",startIndex:-1,endIndex:-1},o=this.cursor.selection;if(o)i.startSelectionBefore=o.getEnd(e),i.endSelectionAfter=o.getEnd(t);else{var d=this.cursor[e];d?i.startSelectionAfter=d:i.startSelectionBefore=this.cursor.parent;var h=this.cursor[t];h?i.endSelectionBefore=h:i.endSelectionAfter=this.cursor.parent}this.root.latexRecursive(i);for(var b=i.latex,v=this.cleanLatex(b),E=i.startIndex,L=i.endIndex,K=0,B=0;B<i.endIndex;B++)b[B]!==v[K]?(B<i.startIndex&&(E-=1),L-=1):K+=1;return{latex:v,startIndex:E,endIndex:L}},s.prototype.classifyLatexForEfficientUpdate=function(i){if(typeof i=="string"){var o=i.match(/-?[0-9.]+$/g);if(o&&o.length===1)return{latex:i,prefix:i.substr(0,i.length-o[0].length),digits:o[0]}}},s.prototype.updateLatexMathEfficiently=function(i,o){var d,h,b,v,E=this.root,L,K=this.classifyLatexForEfficientUpdate(i);if(K){if(L=this.classifyLatexForEfficientUpdate(o),!L||L.prefix!==K.prefix)return!1}else return!1;var B=L.digits,F=K.digits,H=!1,X=!1;B[0]==="-"&&(H=!0,B=B.substr(1)),F[0]==="-"&&(X=!0,F=F.substr(1));for(var re=this.root.getEnd(t),ne=[],le=B.length-1;le>=0;le--){if(!re||re.ctrlSeq!==B[le]||re.parent!==E)return!1;ne.unshift(re),re=re[e]}if(H&&!X){var Ie=re;if(!Ie||Ie.ctrlSeq!=="-"||Ie[t]!==ne[0]||Ie.parent!==E)return!1;var ct=Ie[e];if(ct&&ct.parent!==E)return!1;ne[0][e]=Ie[e],E.getEnd(e)===Ie&&E.setEnds((d={},d[e]=ne[0],d[t]=E.getEnd(t),d)),ct&&(ct[t]=ne[0]),Ie.domFrag().remove()}if(!H&&X){var Pe=new ti("-"),lt=document.createElement("span");lt.textContent="-",Pe.setDOM(lt);var Dr=ne[0][e];Dr&&(Dr[t]=Pe),E.getEnd(e)===ne[0]&&E.setEnds((h={},h[e]=Pe,h[t]=E.getEnd(t),h)),Pe.parent=E,Pe[e]=ne[0][e],Pe[t]=ne[0],ne[0][e]=Pe,Pe.contactWeld(this.cursor),Pe.domFrag().insertBefore(ne[0].domFrag())}var xr=Math.min(B.length,F.length);for(le=0;le<xr;le++){var En=F[le];re=ne[le],re.ctrlSeq!==En&&(re.ctrlSeq=En,re.domFrag().oneElement().textContent=En,re.mathspeakName=En)}if(B.length>F.length)for(re=ne[F.length-1],E.setEnds((b={},b[e]=E.getEnd(e),b[t]=re,b)),re[t]=0,le=B.length-1;le>=xr;le--)ne[le].domFrag().remove();if(F.length>B.length){var Oe=document.createDocumentFragment();for(le=xr;le<F.length;le++){var _n=document.createElement("span");_n.className="dcg-mq-digit",_n.textContent=F[le];var cn=new Yi(F[le]);cn.parent=E,cn.setDOM(_n),Oe.appendChild(_n),cn[e]=E.getEnd(t),cn[t]=0;var ms=cn[e];ms[t]=cn,E.setEnds((v={},v[e]=E.getEnd(e),v[t]=cn,v))}E.domFrag().oneElement().appendChild(Oe)}var to=this.exportLatex();if(to!==i)return console.warn("tried updating latex efficiently but did not work. Attempted: "+i+" but wrote: "+to),!1;var fs=E.getEnd(t);return fs&&fs.fixDigitGrouping(this.cursor.options),!0},s.prototype.renderLatexMathFromScratch=function(i){var o,d=this.root,h=this.cursor,b=Ee.all,v=Ee.eof,E=fr.skip(v).or(b.result(!1)).parse(i);if(d.setEnds((o={},o[e]=0,o[t]=0,o)),E&&E.children().adopt(d,0,0),E){var L=d.domFrag();L.children().remove(),L.oneElement().appendChild(E.html()),d.finalizeInsert(h.options,h)}else d.domFrag().empty()},s.prototype.renderLatexMath=function(i){var o=this.cursor,d=this.root;this.notify("replace"),o.clearSelection();var h=this.exportLatex();(!d.getEnd(e)||!d.getEnd(t)||h!==i)&&(this.updateLatexMathEfficiently(i,h)||this.renderLatexMathFromScratch(i),this.updateMathspeak()),o.insAtRightEnd(d)},s.prototype.renderLatexText=function(i){var o,d=this.root,h=this.cursor;d.domFrag().children().slice(1).remove(),d.setEnds((o={},o[e]=0,o[t]=0,o)),delete h.selection,h.show().insAtRightEnd(d);var b=Ee.regex,v=Ee.string,E=Ee.eof,L=Ee.all,K=v("$").then(fr).skip(v("$").or(E)).map(function(ne){var le=new RootMathCommand(h);le.createBlocks();var Ie=le.getEnd(e);return ne.children().adopt(Ie,0,0),le}),B=v("\\$").result("$"),F=B.or(b(/^[^$]/)).map(function(ne){return new Za(ne)}),H=K.or(F).many(),X=H.skip(E).or(L.result(!1)).parse(i);if(X){for(var re=0;re<X.length;re+=1)X[re].adopt(d,d.getEnd(t),0);ge(d.html()).appendTo(d.domFrag().oneElement()),d.finalizeInsert(h.options,h)}},s}(ns),Lc=function(u){return!1};er.prototype.ignoreNextMousedown=Lc;var Da;(function(){wn.onNotify(function(u,s){(s==="edit"||s==="replace")&&Da&&Da.cursor===u&&Da.cb()})})();var Lu=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.handleMouseDown=function(o){var d=f(o.target,".dcg-mq-root-block"),h=d&&Ht.getNodeOfElement(d)||Ht.getNodeOfElement(i.root.domFrag().oneElement()),b=h.domFrag().firstNode().ownerDocument,v=h.controller,E=v.cursor,L=E.blink,K=v.getTextareaSpanOrThrow(),B=v.getTextareaOrThrow();if(o.preventDefault(),o.target.unselectable=!0,E.options.ignoreNextMousedown(o)||(E.options.ignoreNextMousedown=Lc,f(o.target,".dcg-mq-ignore-mousedown")))return;var F=null;function H(ct){F=ct.target}function X(ct){E.anticursor||E.startSelection(),v.seek(F,ct.clientX,ct.clientY).cursor.select(),E.selection&&E.controller.aria.clear().queue(E.selection.join("mathspeak")+" selected").alert(),F=null}function re(){d==null||d.removeEventListener("mousemove",H),b==null||b.removeEventListener("mousemove",X),b==null||b.removeEventListener("mouseup",le),Da=void 0}function ne(){v.editable?(E.show(),E.controller.aria.queue(E.parent).alert()):ge(K).detach()}function le(){E.blink=L,E.selection||ne(),re()}var Ie;Da={cursor:E,cb:function(){Ie=!0,E.blink=L,E.clearSelection(),ne(),re()}},!(v.blurred&&(d&&!v.editable&&ge(d).prepend(ge(K)),B.focus(),Ie))&&(E.blink=a,v.seek(o.target,o.clientX,o.clientY).cursor.startSelection(),d==null||d.addEventListener("mousemove",H),b==null||b.addEventListener("mousemove",X),b==null||b.addEventListener("mouseup",le))},i}return s.prototype.addMouseEventListener=function(){this.container.addEventListener("mousedown",this.handleMouseDown)},s.prototype.removeMouseEventListener=function(){this.container.removeEventListener("mousedown",this.handleMouseDown)},s.prototype.seek=function(i,o,d){for(var h=this.notify("select").cursor,b;i&&(b=Ht.getNodeOfElement(i),!b);)i=i.parentElement;return b||(b=this.root),h.clearSelection().show(),b.seek(o,h),this.scrollHoriz(),this},s}(Ac),Gu=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.setOverflowClasses=function(){var i=this.root.domFrag().oneElement(),o=!1,d=!1;if(!this.blurred){var h=$e(i).width,b=i.scrollWidth,v=i.scrollLeft;o=b>h+v,d=v>0}i.classList.contains("dcg-mq-editing-overflow-right")!==o&&i.classList.toggle("dcg-mq-editing-overflow-right"),i.classList.contains("dcg-mq-editing-overflow-left")!==d&&i.classList.toggle("dcg-mq-editing-overflow-left")},s.prototype.scrollHoriz=function(){var i=this,o=this.cursor,d=o.selection,h=$e(this.root.domFrag().oneElement());if(o.domFrag().isEmpty()&&!d){this.cancelScrollHoriz&&(this.cancelScrollHoriz(),this.cancelScrollHoriz=void 0);var b=this.root.domFrag().oneElement(),v=b.scrollLeft;Je(this.getScrollAnimationDuration(),function(ne,le,Ie){ne>=1?(i.cancelScrollHoriz=void 0,b.scrollLeft=0,i.setOverflowClasses()):(i.cancelScrollHoriz=Ie,le(),b.scrollLeft=Math.round((1-ne)*v))});return}else if(d){var K=$e(d.domFrag().oneElement()),B=K.left-(h.left+20),F=K.right-(h.right-20);if(d.getEnd(e)===o[t])if(B<0)var L=B;else if(F>0)if(K.left-F<h.left+20)var L=B;else var L=F;else return;else if(F>0)var L=F;else if(B<0)if(K.right-B>h.right-20)var L=F;else var L=B;else return}else{var E=$e(o.domFrag().oneElement()).left;if(E>h.right-20)var L=E-(h.right-20);else if(E<h.left+20)var L=E-(h.left+20);else return}var H=this.root.domFrag().oneElement();if(!(L<0&&H.scrollLeft===0)&&!(L>0&&H.scrollWidth<=H.scrollLeft+h.width)){this.cancelScrollHoriz&&(this.cancelScrollHoriz(),this.cancelScrollHoriz=void 0);var X=this.root.domFrag().oneElement(),re=X.scrollLeft;Je(this.getScrollAnimationDuration(),function(ne,le,Ie){ne>=1?(i.cancelScrollHoriz=void 0,X.scrollLeft=Math.round(re+L),i.setOverflowClasses()):(i.cancelScrollHoriz=Ie,le(),X.scrollLeft=Math.round(re+ne*L))})}},s.prototype.getScrollAnimationDuration=function(){var i;return(i=this.options.scrollAnimationDuration)!==null&&i!==void 0?i:100},s}(Lu);er.prototype.substituteTextarea=function(){return p("textarea",{autocapitalize:"off",autocomplete:"off",autocorrect:"off",spellcheck:!1,"x-palm-disable-ste-all":!0})};function Gc(u,s){return Mc(u[0],s)}er.prototype.substituteKeyboardEvents=Gc;var is=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.selectFn=a,i}return s.prototype.createTextarea=function(){this.textareaSpan=p("span",{class:"dcg-mq-textarea"});var i=this.options.substituteTextarea();if(!i.nodeType)throw"substituteTextarea() must return a DOM element, got "+i;this.textarea=ge(i).appendTo(this.textareaSpan).oneElement();var o=this;o.cursor.selectionChanged=function(){o.selectionChanged()}},s.prototype.selectionChanged=function(){var i=this;i.textareaSelectionTimeout||(i.textareaSelectionTimeout=setTimeout(function(){i.setTextareaSelection()}))},s.prototype.setTextareaSelection=function(){this.textareaSelectionTimeout=0;var i="";this.cursor.selection&&(i=this.cleanLatex(this.cursor.selection.join("latex")),this.options.statelessClipboard&&(i="$"+i+"$")),this.selectFn(i)},s.prototype.staticMathTextareaEvents=function(){var i=this;this.removeTextareaEventListener("cut"),this.removeTextareaEventListener("paste"),i.options.disableCopyPaste?this.removeTextareaEventListener("copy"):this.addTextareaEventListeners({copy:function(){i.setTextareaSelection()}}),this.addStaticFocusBlurListeners(),i.selectFn=function(o){var d=i.getTextareaOrThrow();d instanceof HTMLTextAreaElement&&(d.value=o,o&&d.select())}},s.prototype.editablesTextareaEvents=function(){var i=this,o=i.getTextareaOrThrow(),d=i.getTextareaSpanOrThrow();if(this.options.version<3){var h=this.options.assertJquery(),b=this.options.substituteKeyboardEvents(h(o),this);this.selectFn=function(E){b.select(E)}}else{var v=Mc(o,this).select;this.selectFn=v}ge(this.container).prepend(ge(d)),this.addEditableFocusBlurListeners(),this.updateMathspeak()},s.prototype.unbindEditablesEvents=function(){var i=this,o=i.getTextareaOrThrow(),d=i.getTextareaSpanOrThrow();this.selectFn=function(h){o instanceof HTMLTextAreaElement&&(o.value=h,h&&o.select())},ge(d).remove(),this.removeTextareaEventListener("focus"),this.removeTextareaEventListener("blur"),i.blurred=!0,this.removeTextareaEventListener("cut"),this.removeTextareaEventListener("paste")},s.prototype.typedText=function(i){if(i===`
`)return this.handle("enter");var o=this.notify(void 0).cursor;o.parent.write(o,i),this.scrollHoriz()},s.prototype.cut=function(){var i=this,o=i.cursor;o.selection&&setTimeout(function(){i.notify("edit"),o.parent.bubble(function(d){d.reflow()}),i.options&&i.options.onCut&&i.options.onCut()})},s.prototype.copy=function(){this.setTextareaSelection()},s.prototype.paste=function(i){this.options.statelessClipboard&&(i.slice(0,1)==="$"&&i.slice(-1)==="$"?i=i.slice(1,-1):i="\\text{"+i+"}"),this.writeLatex(i).cursor.show(),this.scrollHoriz(),this.options&&this.options.onPaste&&this.options.onPaste()},s.prototype.setupStaticField=function(){this.mathspeakSpan=p("span",{class:"dcg-mq-mathspeak"}),ge(this.container).prepend(ge(this.mathspeakSpan)),this.updateMathspeak(),this.blurred=!0,this.cursor.hide().parent.blur(this.cursor)},s.prototype.updateMathspeak=function(){var i=this,o=i.getAriaLabel(),d=/[A-Za-z0-9]$/.test(o)?o+":":o,h=i.root.mathspeak().trim();this.aria.clear();var b=i.getTextareaOrThrow();i.mathspeakSpan?(b.setAttribute("aria-label",""),i.mathspeakSpan.textContent=(d+" "+h).trim()):b.setAttribute("aria-label",(d+" "+h+" "+i.ariaPostLabel).trim())},s}(Gu),on=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.finalizeInsert=function(i,o){var d=this;d.postOrder(function(v){v.finalizeTree(i)}),d.postOrder(function(v){v.contactWeld(o)}),d.postOrder(function(v){v.blur(o)}),d.postOrder(function(v){v.reflow()});var h=d[t],b=d[e];h&&h.siblingCreated(i,e),b&&b.siblingCreated(i,t),d.bubble(function(v){v.reflow()})},s.prototype.prepareInsertionAt=function(i){var o=i.options.maxDepth;if(o!==void 0){var d=i.depth();if(d>o)return!1;this.removeNodesDeeperThan(o-d)}return!0},s.prototype.removeNodesDeeperThan=function(i){for(var o=0,d=[[this,o]],h;h=d.shift();){var b=h;b[0].children().each(function(v){var E=v instanceof Tr?1:0;o=b[1]+E,o<=i?d.push([v,o]):(E?v.children():v).remove()})}},s}(mr),St=function(){function u(s,i){this.childCount=s,this.render=i}return u}(),Pt=function(u){ie(s,u);function s(i,o,d){var h=u.call(this)||this;return h.textTemplate=[""],h.mathspeakTemplate=[""],h.setCtrlSeqHtmlAndText(i,o,d),h}return s.prototype.setEnds=function(i){c("MathCommand ends are never empty",i[e]&&i[t]),this.ends=i},s.prototype.getEnd=function(i){return this.ends[i]},s.prototype.setCtrlSeqHtmlAndText=function(i,o,d){this.ctrlSeq||(this.ctrlSeq=i),o&&(this.domView=o),d&&(this.textTemplate=d)},s.prototype.replaces=function(i){i.disown(),this.replacedFragment=i},s.prototype.isEmpty=function(){return this.foldChildren(!0,function(i,o){return i&&o.isEmpty()})},s.prototype.parser=function(){var i=this,o=fr.block;return o.times(this.numBlocks()).map(function(d){i.blocks=d;for(var h=0;h<d.length;h+=1)d[h].adopt(i,i.getEnd(t),0);return i})},s.prototype.createLeftOf=function(i){var o=this,d=o.replacedFragment;if(o.createBlocks(),u.prototype.createLeftOf.call(this,i),d){var h=o.getEnd(e);d.adopt(h,0,0),d.domFrag().appendTo(h.domFrag().oneElement()),o.placeCursor(i),o.prepareInsertionAt(i)}o.finalizeInsert(i.options,i),o.placeCursor(i)},s.prototype.createBlocks=function(){for(var i=this,o=i.numBlocks(),d=i.blocks=Array(o),h=0;h<o;h+=1){var b=d[h]=new Tr;b.adopt(i,i.getEnd(t),0)}},s.prototype.placeCursor=function(i){i.insAtRightEnd(this.foldChildren(this.getEnd(e),function(o,d){return o.isEmpty()?o:d}))},s.prototype.moveTowards=function(i,o,d){var h;d==="up"?h=this.upInto:d==="down"&&(h=this.downInto);var b=h||this.getEnd(-i);o.insAtDirEnd(-i,b),o.controller.aria.queueDirEndOf(-i).queue(o.parent,!0)},s.prototype.deleteTowards=function(i,o){this.isEmpty()?o[i]=this.remove()[i]:this.moveTowards(i,o)},s.prototype.selectTowards=function(i,o){o[-i]=this,o[i]=this[i]},s.prototype.selectChildren=function(){return new Tc(this,this)},s.prototype.unselectInto=function(i,o){var d=o.anticursor,h=d.ancestors[this.id];o.insAtDirEnd(-i,h)},s.prototype.seek=function(i,o){function d(E){var L,K=E.domFrag().oneElement(),B=$e(K).left,F=B+K.offsetWidth;return L={},L[e]=B,L[t]=F,L}var h=this,b=d(h);if(i<b[e])return o.insLeftOf(h);if(i>b[t])return o.insRightOf(h);var v=b[e];h.eachChild(function(E){var L=d(E);if(i<L[e])return i-v<L[e]-i?E[e]?o.insAtRightEnd(E[e]):o.insLeftOf(h):o.insAtLeftEnd(E),!1;if(i>L[t]){E[t]?v=L[t]:b[t]-i<i-L[t]?o.insRightOf(h):o.insAtRightEnd(E);return}else return E.seek(i,o),!1})},s.prototype.numBlocks=function(){return this.domView.childCount},s.prototype.html=function(){var i=this.blocks;c("domView is defined",this.domView);var o=this.domView,d=o.render(i||[]);return this.setDOM(d),Ht.linkElementByCmdNode(d,this),d},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),i.latex+=this.ctrlSeq||"",this.eachChild(function(o){i.latex+="{";var d=i.latex.length;o.latexRecursive(i);var h=i.latex.length;d===h&&(i.latex+=" "),i.latex+="}"}),this.checkCursorContextClose(i)},s.prototype.text=function(){var i=this,o=0;return i.foldChildren(i.textTemplate[o],function(d,h){o+=1;var b=h.text();return d&&i.textTemplate[o]==="("&&b[0]==="("&&b.slice(-1)===")"?d+b.slice(1,-1)+i.textTemplate[o]:d+b+(i.textTemplate[o]||"")})},s.prototype.mathspeak=function(){var i=this,o=0;return i.foldChildren(i.mathspeakTemplate[o]||"Start"+i.ctrlSeq+" ",function(d,h){return o+=1,d+" "+h.mathspeak()+" "+(i.mathspeakTemplate[o]+" "||"End"+i.ctrlSeq+" ")})},s}(on),yr=function(u){ie(s,u);function s(i,o,d,h){var b=u.call(this)||this;return b.setCtrlSeqHtmlTextAndMathspeak(i,o?new St(0,function(){return o.cloneNode(!0)}):void 0,d,h),b}return s.prototype.setCtrlSeqHtmlTextAndMathspeak=function(i,o,d,h){!d&&i&&(d=i.replace(/^\\/,"")),this.mathspeakName=h||d,u.prototype.setCtrlSeqHtmlAndText.call(this,i,o,[d||""])},s.prototype.parser=function(){return Ee.succeed(this)},s.prototype.numBlocks=function(){return 0},s.prototype.replaces=function(i){i.remove()},s.prototype.createBlocks=function(){},s.prototype.moveTowards=function(i,o){o.domFrag().insDirOf(i,this.domFrag()),o[-i]=this,o[i]=this[i],o.controller.aria.queue(this)},s.prototype.deleteTowards=function(i,o){o[i]=this.remove()[i]},s.prototype.seek=function(i,o){var d=this.domFrag().oneElement(),h=$e(d).left;return i-h<d.offsetWidth/2?o.insLeftOf(this):o.insRightOf(this),o},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),i.latex+=this.ctrlSeq||"",this.checkCursorContextClose(i)},s.prototype.text=function(){return this.textTemplate.join("")},s.prototype.mathspeak=function(i){return this.mathspeakName||""},s.prototype.placeCursor=function(){},s.prototype.isEmpty=function(){return!0},s}(Pt),Za=function(u){ie(s,u);function s(i,o,d){return u.call(this,i,p("span",{},[o||p.text(i)]),void 0,d)||this}return s}(yr);function Rr(u,s,i){return function(){return new Za(u,s?p.entityText(s):void 0,i)}}var Cr=function(u){ie(s,u);function s(i,o,d,h,b){var v=this;return b?v=u.call(this,i,p("span",{},[o||p.text(i||"")]),void 0,h)||this:v=u.call(this,i,p("span",{class:"dcg-mq-binary-operator"},o?[o]:[]),d,h)||this,v}return s}(yr);function ji(u,s,i,o){return function(){return new Cr(u,s?p.entityText(s):void 0,i,o)}}var Tr=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.ariaLabel="block",i}return s.prototype.join=function(i){return this.foldChildren("",function(o,d){return o+d[i]()})},s.prototype.html=function(){var i=document.createDocumentFragment();return this.eachChild(function(o){var d=o.html();i.appendChild(d)}),i},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),this.eachChild(function(o){return o.latexRecursive(i)}),this.checkCursorContextClose(i)},s.prototype.text=function(){var i=this.getEnd(e),o=this.getEnd(t);return i===o&&i!==0?i.text():this.join("text")},s.prototype.mathspeak=function(){var i="",o={};return this.controller&&(o=this.controller.options.autoOperatorNames),this.foldChildren([],function(d,h){if(h.isPartOfOperator)i+=h.mathspeak();else{if(i!==""){if(o._maxLength>0){var b=o[i.toLowerCase()];typeof b=="string"&&(i=b)}d.push(i+" "),i=""}var v=h.mathspeak(),E=h.ctrlSeq;isNaN(E)&&E!=="."&&(!h.parent||!h.parent.parent||!h.parent.parent.isTextBlock())&&(v=" "+v+" "),d.push(v)}return d}).join("").replace(/ +(?= )/g,"").replace(/(\.)([0-9]+)/g,function(d,h,b){return h+b.split("").join(" ").trim()})},s.prototype.keystroke=function(i,o,d){if(d.options.spaceBehavesLikeTab&&(i==="Spacebar"||i==="Shift-Spacebar")){o==null||o.preventDefault(),d.escapeDir(i==="Shift-Spacebar"?e:t,i,o);return}return u.prototype.keystroke.call(this,i,o,d)},s.prototype.moveOutOf=function(i,o,d){var h;if(d==="up"?h=this.parent.upInto:d==="down"&&(h=this.parent.downInto),!h&&this[i]){var b=-i;o.insAtDirEnd(b,this[i]),o.controller.aria.queueDirEndOf(b).queue(o.parent,!0)}else o.insDirOf(i,this.parent),o.controller.aria.queueDirOf(i).queue(this.parent)},s.prototype.selectOutOf=function(i,o){o.insDirOf(i,this.parent)},s.prototype.deleteOutOf=function(i,o){o.unwrapGramp()},s.prototype.seek=function(i,o){var d=this.getEnd(t);if(!d)return o.insAtRightEnd(this);var h=d.domFrag().oneElement(),b=$e(h).left;if(b+h.offsetWidth<i)return o.insAtRightEnd(this);var v=this.getEnd(e);if(i<$e(v.domFrag().oneElement()).left)return o.insAtLeftEnd(this);for(;i<$e(d.domFrag().oneElement()).left;)d=d[e];return d.seek(i,o)},s.prototype.chToCmd=function(i,o){var d;return i.match(/^[a-eg-zA-Z]$/)?new ra(i):/^\d$/.test(i)?new Yi(i):o&&o.typingSlashWritesDivisionSymbol&&i==="/"?C["\xF7"](i):o&&o.typingAsteriskWritesTimesSymbol&&i==="*"?C["\xD7"](i):o&&o.typingPercentWritesPercentOf&&i==="%"?C.percentof(i):(d=an[i]||C[i])?d.constructor?new d(i):d(i):new Za(i)},s.prototype.write=function(i,o){var d=this.chToCmd(o,i.options);i.selection&&d.replaces(i.replaceSelection()),i.isTooDeep()||(d.createLeftOf(i.show()),o==="/"?i.controller.aria.alert("over"):i.controller.aria.alert(d.mathspeak({createdLeftOf:i})))},s.prototype.writeLatex=function(i,o){var d=Ee.all,h=Ee.eof,b=fr.skip(h).or(d.result(!1)).parse(o);if(b&&!b.isEmpty()&&b.prepareInsertionAt(i)){b.children().adopt(i.parent,i[e],i[t]),ge(b.html()).insertBefore(i.domFrag()),i[e]=b.getEnd(t),b.finalizeInsert(i.options,i);var v=b.getEnd(t),E=b.getEnd(e),L=v[t],K=E[e];L&&L.siblingCreated(i.options,e),K&&K.siblingCreated(i.options,t),i.parent.bubble(function(B){B.reflow()})}},s.prototype.focus=function(){return this.domFrag().addClass("dcg-mq-hasCursor"),this.domFrag().removeClass("dcg-mq-empty"),this},s.prototype.blur=function(i){return this.domFrag().removeClass("dcg-mq-hasCursor"),this.isEmpty()&&(this.domFrag().addClass("dcg-mq-empty"),i&&this.isQuietEmptyDelimiter(i.options.quietEmptyDelimiters)&&this.domFrag().addClass("dcg-mq-quiet-delimiter")),this},s}(on);er.prototype.mouseEvents=!0,hr.StaticMath=function(u){var s;return s=function(i){ie(o,i);function o(d){var h=i.call(this,d)||this,b=h.innerFields=[];return h.__controller.root.postOrder(function(v){v.registerInnerField(b,u.InnerMathField)}),h}return o.prototype.__mathquillify=function(d,h){return this.config(d),i.prototype.mathquillify.call(this,"dcg-mq-math-mode"),this.__controller.setupStaticField(),this.__options.mouseEvents&&(this.__controller.addMouseEventListener(),this.__controller.staticMathTextareaEvents()),this},o.prototype.latex=function(d){var h=i.prototype.latex.apply(this,arguments);if(arguments.length>0){var b=this.innerFields=[];this.__controller.root.postOrder(function(v){v.registerInnerField(b,u.InnerMathField)}),this.__controller.updateMathspeak()}return h},o.prototype.setAriaLabel=function(d){return this.__controller.setAriaLabel(d),this},o.prototype.getAriaLabel=function(){return this.__controller.getAriaLabel()},o}(u.AbstractMathQuill),s.RootBlock=Tr,s};var Vc=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s}(Tr);Hi(Vc.prototype),hr.MathField=function(u){var s;return s=function(i){ie(o,i);function o(){return i!==null&&i.apply(this,arguments)||this}return o.prototype.__mathquillify=function(d,h){return this.config(d),h>1&&(this.__controller.root.reflow=a),i.prototype.mathquillify.call(this,"dcg-mq-editable-field dcg-mq-math-mode"),delete this.__controller.root.reflow,this},o}(u.EditableField),s.RootBlock=Vc,s},hr.InnerMathField=function(u){return c("MathField class is defined",u.MathField),function(s){ie(i,s);function i(){return s!==null&&s.apply(this,arguments)||this}return i.prototype.makeStatic=function(){this.__controller.editable=!1,this.__controller.root.blur(),this.__controller.unbindEditablesEvents(),ge(this.__controller.container).removeClass("dcg-mq-editable-field")},i.prototype.makeEditable=function(){this.__controller.editable=!0,this.__controller.editablesTextareaEvents(),this.__controller.cursor.insAtRightEnd(this.__controller.root),ge(this.__controller.container).addClass("dcg-mq-editable-field")},i}(u.MathField)};var os=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.finalizeTree=function(i,o){this.sharedSiblingMethod(i,o)},s.prototype.siblingDeleted=function(i,o){this.sharedSiblingMethod(i,o)},s.prototype.siblingCreated=function(i,o){this.sharedSiblingMethod(i,o)},s.prototype.sharedSiblingMethod=function(i,o){o!==e&&this[t]instanceof s||this.fixDigitGrouping(i)},s.prototype.fixDigitGrouping=function(i){if(i.enableDigitGrouping){var o=this,d=this,h=0,b=[],v="\\ ",E=".",L=o;do if(/^[0-9]$/.test(L.ctrlSeq))o=L;else if(L.ctrlSeq===v)o=L,h+=1;else if(L.ctrlSeq===E)o=L,b.push(L);else break;while(L=o[e]);for(;L=d[t];)if(/^[0-9]$/.test(L.ctrlSeq))d=L;else if(L.ctrlSeq===v)d=L,h+=1;else if(L.ctrlSeq===E)d=L,b.push(L);else break;for(;d!==o&&o&&o.ctrlSeq===v;)o=o[t],h-=1;for(;d!==o&&d&&d.ctrlSeq===v;)d=d[e],h-=1;if(!(o===d&&o&&o.ctrlSeq===v)){var K=h>0||b.length>1;K?this.removeGroupingBetween(o,d):b[0]?(b[0]!==o&&this.addGroupingBetween(b[0][e],o),b[0]!==d&&this.removeGroupingBetween(b[0][t],d)):this.addGroupingBetween(d,o)}}},s.prototype.removeGroupingBetween=function(i,o){var d=i;do if(d instanceof s&&d.setGroupingClass(void 0),!d||d===o)break;while(d=d[t])},s.prototype.addGroupingBetween=function(i,o){for(var v=i,d=0,h=0,v=i;v&&(h+=1,v!==o);)v=v[e];var b=h%3;b===0&&(b=3);for(var v=i;v;){d+=1;var E=void 0;if(h>=4&&(d===h?E="dcg-mq-group-leading-"+b:d%3===0&&d!==h&&(E="dcg-mq-group-start"),E||(E="dcg-mq-group-other")),v instanceof s&&v.setGroupingClass(E),v===o)break;v=v[e]}},s.prototype.setGroupingClass=function(i){this._groupingClass!==i&&(this._groupingClass&&this.domFrag().removeClass(this._groupingClass),i&&this.domFrag().addClass(i),this._groupingClass=i)},s}(yr),Yi=function(u){ie(s,u);function s(i,o){return u.call(this,i,p("span",{class:"dcg-mq-digit"},[p.text(i)]),void 0,o)||this}return s.prototype.createLeftOf=function(i){var o=i[e],d=o&&o[e],h=i.parent.parent instanceof Br?i.parent.parent.sub:void 0;i.options.autoSubscriptNumerals&&i.parent!==h&&(o instanceof Fn&&o.isItalic!==!1||o instanceof Br&&d instanceof Fn&&d.isItalic!==!1)?(new Rc().createLeftOf(i),u.prototype.createLeftOf.call(this,i),i.insRightOf(i.parent.parent)):u.prototype.createLeftOf.call(this,i)},s.prototype.mathspeak=function(i){if(i&&i.createdLeftOf){var o=i.createdLeftOf,d=o[e],h=d&&d[e],b=o.parent.parent instanceof Br?o.parent.parent.sub:void 0;if(o.options.autoSubscriptNumerals&&o.parent!==b&&(d instanceof Fn&&d.isItalic!==!1||o[e]instanceof Br&&h instanceof Fn&&h.isItalic!==!1))return"Subscript "+u.prototype.mathspeak.call(this)+" Baseline"}return u.prototype.mathspeak.call(this)},s}(os),Fn=function(u){ie(s,u);function s(i,o){return u.call(this,i,p("var",{},[o||p.text(i)]))||this}return s.prototype.text=function(){var i=this.ctrlSeq||"";return this.isPartOfOperator?i[0]=="\\"?i=i.slice(1,i.length):i[i.length-1]==" "&&(i=i.slice(0,-1)):(this[e]&&!(this[e]instanceof s)&&!(this[e]instanceof Cr)&&this[e].ctrlSeq!=="\\ "&&(i="*"+i),this[t]&&!(this[t]instanceof Cr)&&!(this[t]instanceof Br)&&(i+="*")),i},s.prototype.mathspeak=function(){var i=this.ctrlSeq||"";return this.isPartOfOperator||i.length>1||this.parent&&this.parent.parent&&this.parent.parent.isTextBlock()?u.prototype.mathspeak.call(this):'"'+i+'"'},s}(yr);function Sr(u,s,i){return function(){return new Fn(u,p.entityText(s))}}er.prototype.autoCommands={_maxLength:0},vn.autoCommands=function(u){if(typeof u!="string"||!/^[a-z]+(?: [a-z]+)*$/i.test(u))throw'"'+u+'" not a space-delimited list of only letters';for(var s=u.split(" "),i={},o=0,d=0;d<s.length;d+=1){var h=s[d];if(h.length<2)throw'autocommand "'+h+'" not minimum length of 2';if(C[h]===Nc)throw'"'+h+'" is a built-in operator name';i[h]=1,o=n(o,h.length)}return i._maxLength=o,i},er.prototype.quietEmptyDelimiters={},vn.quietEmptyDelimiters=function(u){u===void 0&&(u="");for(var s=u.split(" "),i={},o=0;o<s.length;o+=1){var d=s[o];i[d]=1}return i},er.prototype.autoParenthesizedFunctions={_maxLength:0},vn.autoParenthesizedFunctions=function(u){if(typeof u!="string"||!/^[a-z]+(?: [a-z]+)*$/i.test(u))throw'"'+u+'" not a space-delimited list of only letters';for(var s=u.split(" "),i={},o=0,d=0;d<s.length;d+=1){var h=s[d];if(h.length<2)throw'autocommand "'+h+'" not minimum length of 2';i[h]=1,o=n(o,h.length)}return i._maxLength=o,i};var ra=function(u){ie(s,u);function s(i){var o=u.call(this,i)||this;return o.letter=i,o}return s.prototype.checkAutoCmds=function(i){if(!this.shouldIgnoreSubstitutionInSimpleSubscript(i.options)){var o=i.options.autoCommands,d=o._maxLength||0;if(d>0){for(var h="",b=this,v=0;b instanceof s&&b.ctrlSeq===b.letter&&v<d;)h=b.letter+h,b=b[e],v+=1;for(;h.length;){if(o.hasOwnProperty(h)){for(b=this,v=1;b&&v<h.length;v+=1,b=b[e]);new jt(b,this).remove(),i[e]=b[e];var E=C[h],L;return Eu(E)?L=new E(h):L=E(h),L.createLeftOf(i)}h=h.slice(1)}}}},s.prototype.autoParenthesize=function(i){var o=i.parent.getEnd(t);if(!(o&&o instanceof Ur&&o.ctrlSeq==="\\left(")&&!this.shouldIgnoreSubstitutionInSimpleSubscript(i.options)){for(var d="",h=this,b=0,v=i.options.autoParenthesizedFunctions,E=v._maxLength||0,L=i.options.autoOperatorNames;h instanceof s&&b<E;)d=h.letter+d,h=h[e],b+=1;for(;d.length;){if(v.hasOwnProperty(d)&&L.hasOwnProperty(d))return i.parent.write(i,"(");d=d.slice(1)}}},s.prototype.createLeftOf=function(i){u.prototype.createLeftOf.call(this,i),this.checkAutoCmds(i),this.autoParenthesize(i)},s.prototype.italicize=function(i){return this.isItalic=i,this.isPartOfOperator=!i,this.domFrag().toggleClass("dcg-mq-operator-name",!i),this},s.prototype.finalizeTree=function(i,o){this.sharedSiblingMethod(i,o)},s.prototype.siblingDeleted=function(i,o){this.sharedSiblingMethod(i,o)},s.prototype.siblingCreated=function(i,o){this.sharedSiblingMethod(i,o)},s.prototype.sharedSiblingMethod=function(i,o){o!==e&&this[t]instanceof s||this.autoUnItalicize(i)},s.prototype.autoUnItalicize=function(i){var o=i.autoOperatorNames;if(o._maxLength!==0&&!this.shouldIgnoreSubstitutionInSimpleSubscript(i)){for(var d=this.letter,h=this[e];h instanceof s;h=h[e])d=h.letter+d;for(var b=this[t];b instanceof s;b=b[t])d+=b.letter;var v=h&&h[t],E=b&&b[e];new jt(v||this.parent.getEnd(e),E||this.parent.getEnd(t)).each(function(xr){xr instanceof s&&(xr.italicize(!0).domFrag().removeClass("dcg-mq-first dcg-mq-last dcg-mq-followed-by-supsub"),xr.ctrlSeq=xr.letter)});var L=o._maxLength||0;e:for(var K=0,B=h[t]||this.parent.getEnd(e);B&&K<d.length;K+=1,B=B[t])for(var F=r(L,d.length-K);F>0;F-=1){var H=d.slice(K,K+F),X=void 0;if(o.hasOwnProperty(H)){for(var re=0,ne=B;re<F;re+=1,ne=ne[t])ne instanceof s&&(ne.italicize(!1),X=ne);var le=ss.hasOwnProperty(H);if(B.ctrlSeq=(le?"\\":"\\operatorname{")+B.ctrlSeq,X.ctrlSeq+=le?" ":"}",Vu.hasOwnProperty(H)){var Ie=X[e],ct=Ie&&Ie[e],Pe=ct&&ct[e];Pe.domFrag().addClass("dcg-mq-last")}if(this.shouldOmitPadding(B[e])||B.domFrag().addClass("dcg-mq-first"),!this.shouldOmitPadding(X[t]))if(X[t]instanceof Br){var lt=X[t],Dr=lt.siblingCreated=lt.siblingDeleted=function(){lt.domFrag().toggleClass("dcg-mq-after-operator-name",!(lt[t]instanceof Ur))};Dr()}else X.domFrag().toggleClass("dcg-mq-last",!(X[t]instanceof Ur));K+=F-1,B=X;continue e}}}},s.prototype.shouldOmitPadding=function(i){return!i||i.ctrlSeq==="."||i instanceof Cr||i instanceof kn},s}(Fn),ss={};er.prototype.autoOperatorNames=Ji();var Vu={limsup:1,liminf:1,projlim:1,injlim:1};function Ji(){for(var u={_maxLength:9},s="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "),i=0;i<s.length;i+=1)ss[s[i]]=u[s[i]]=1;for(var o="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "),i=0;i<o.length;i+=1)ss[o[i]]=1;for(var d="sin cos tan sec cosec csc cotan cot ctg".split(" "),i=0;i<d.length;i+=1)u[d[i]]=u["arc"+d[i]]=u[d[i]+"h"]=u["ar"+d[i]+"h"]=u["arc"+d[i]+"h"]=1;for(var h="gcf hcf lcm proj span".split(" "),i=0;i<h.length;i+=1)u[h[i]]=1;return u}vn.autoOperatorNames=function(u){if(typeof u!="string")throw'"'+u+'" not a space-delimited list';if(!/^[a-z\|\-]+(?: [a-z\|\-]+)*$/i.test(u))throw'"'+u+'" not a space-delimited list of letters or "|"';for(var s=u.split(" "),i={},o=0,d=0;d<s.length;d+=1){var h=s[d];if(h.length<2)throw'"'+h+'" not minimum length of 2';if(h.indexOf("|")<0)i[h]=h,o=n(o,h.length);else{var b=h.split("|");if(b.length>2)throw'"'+h+'" has more than 1 mathspeak delimiter';if(b[0].length<2)throw'"'+h[0]+'" not minimum length of 2';i[b[0]]=b[1].replace(/-/g," "),o=n(o,b[0].length)}}return i._maxLength=o,i};var Nc=function(u){ie(s,u);function s(i){return u.call(this,i||"")||this}return s.prototype.createLeftOf=function(i){for(var o=this.ctrlSeq,d=0;d<o.length;d+=1)new ra(o.charAt(d)).createLeftOf(i)},s.prototype.parser=function(){for(var i=this.ctrlSeq,o=new Tr,d=0;d<i.length;d+=1)new ra(i.charAt(d)).adopt(o,o.getEnd(t),0);return Ee.succeed(o.children())},s}(yr);for(var cs in er.prototype.autoOperatorNames)er.prototype.autoOperatorNames.hasOwnProperty(cs)&&(C[cs]=Nc);C.operatorname=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.createLeftOf=function(){},s.prototype.numBlocks=function(){return 1},s.prototype.parser=function(){return fr.block.map(function(i){var o=!0,d="",h=i.children();return h.each(function(b){b instanceof ra?d+=b.letter:o=!1}),o&&d==="ans"?qc():h})},s}(Pt),C.f=function(u){ie(s,u);function s(){var i=this,o="f";return i=u.call(this,o)||this,i.letter=o,i.domView=new St(0,function(){return p("var",{class:"dcg-mq-f"},[p.text("f")])}),i}return s.prototype.italicize=function(i){return this.domFrag().eachElement(function(o){return o.textContent="f"}),this.domFrag().toggleClass("dcg-mq-f",i),u.prototype.italicize.call(this,i)},s}(ra),C[" "]=C.space=function(){return new os("\\ ",p("span",{},[p.text(w)])," ")},C["."]=function(){return new os(".",p("span",{class:"dcg-mq-digit"},[p.text(".")]),".")},C["'"]=C.prime=Rr("'","&prime;","prime"),C["\u2033"]=C.dprime=Rr("\u2033","&Prime;","double prime"),C.backslash=Rr("\\backslash ","\\","backslash"),an["\\"]||(an["\\"]=C.backslash),C.$=Rr("\\$","$","dollar"),C.square=Rr("\\square ","\u25A1","square"),C.mid=Rr("\\mid ","\u2223","mid");var ei=function(u){ie(s,u);function s(i,o,d){return u.call(this,i,p("span",{class:"dcg-mq-nonSymbola"},[o||p.text(i)]))||this}return s}(yr);C["@"]=function(){return new ei("@")},C["&"]=function(){return new ei("\\&",p.entityText("&amp;"),"and")},C["%"]=function(u){ie(s,u);function s(){return u.call(this,"\\%",p.text("%"),"percent")||this}return s.prototype.parser=function(){var i=Ee.optWhitespace,o=Ee.string;return i.then(o("\\operatorname{of}").map(function(){return Bc()})).or(u.prototype.parser.call(this))},s}(ei),C["\u2225"]=C.parallel=Rr("\\parallel ","&#x2225;","parallel"),C["\u2226"]=C.nparallel=Rr("\\nparallel ","&#x2226;","not parallel"),C["\u27C2"]=C.perp=Rr("\\perp ","&#x27C2;","perpendicular"),C.alpha=C.beta=C.gamma=C.delta=C.zeta=C.eta=C.theta=C.iota=C.kappa=C.mu=C.nu=C.xi=C.rho=C.sigma=C.tau=C.chi=C.psi=C.omega=function(u){return new Fn("\\"+u+" ",p.entityText("&"+u+";"))},C.phi=Sr("\\phi ","&#981;","phi"),C.phiv=C.varphi=Sr("\\varphi ","&phi;","phi"),C.epsilon=Sr("\\epsilon ","&#1013;","epsilon"),C.epsiv=C.varepsilon=Sr("\\varepsilon ","&epsilon;","epsilon"),C.piv=C.varpi=Sr("\\varpi ","&piv;","piv"),C.sigmaf=C.sigmav=C.varsigma=Sr("\\varsigma ","&sigmaf;","sigma"),C.thetav=C.vartheta=C.thetasym=Sr("\\vartheta ","&thetasym;","theta"),C.upsilon=C.upsi=Sr("\\upsilon ","&upsilon;","upsilon"),C.gammad=C.Gammad=C.digamma=Sr("\\digamma ","&#989;","gamma"),C.kappav=C.varkappa=Sr("\\varkappa ","&#1008;","kappa"),C.rhov=C.varrho=Sr("\\varrho ","&#1009;","rho"),C.pi=C.\u03C0=function(){return new ei("\\pi ",p.entityText("&pi;"),"pi")},C.lambda=function(){return new ei("\\lambda ",p.entityText("&lambda;"),"lambda")},C.Upsilon=C.Upsi=C.upsih=C.Upsih=function(){return new yr("\\Upsilon ",p("var",{style:"font-family: serif"},[p.entityText("&upsih;")]),"capital upsilon")},C.Gamma=C.Delta=C.Theta=C.Lambda=C.Xi=C.Pi=C.Sigma=C.Phi=C.Psi=C.Omega=C.forall=function(u){return new Za("\\"+u+" ",p.entityText("&"+u+";"))};var br=function(u){ie(s,u);function s(i){var o=u.call(this)||this;return o.latexStr=i,o}return s.prototype.createLeftOf=function(i){var o=fr.parse(this.latexStr);o.children().adopt(i.parent,i[e],i[t]),i[e]=o.getEnd(t),ge(o.html()).insertBefore(i.domFrag()),o.finalizeInsert(i.options,i);var d=o.getEnd(t),h=d&&d[t];h&&h.siblingCreated(i.options,e);var b=o.getEnd(e),v=b&&b[e];v&&v.siblingCreated(i.options,t),i.parent.bubble(function(E){E.reflow()})},s.prototype.mathspeak=function(){return fr.parse(this.latexStr).mathspeak()},s.prototype.parser=function(){var i=fr.parse(this.latexStr).children();return Ee.succeed(i)},s}(Pt);C["\u2070"]=function(){return new br("^0")},C["\xB9"]=function(){return new br("^1")},C["\xB2"]=function(){return new br("^2")},C["\xB3"]=function(){return new br("^3")},C["\u2074"]=function(){return new br("^4")},C["\u2075"]=function(){return new br("^5")},C["\u2076"]=function(){return new br("^6")},C["\u2077"]=function(){return new br("^7")},C["\u2078"]=function(){return new br("^8")},C["\u2079"]=function(){return new br("^9")},C["\xBC"]=function(){return new br("\\frac14")},C["\xBD"]=function(){return new br("\\frac12")},C["\xBE"]=function(){return new br("\\frac34")},C["\u221A"]=function(){return new br("\\sqrt{}")};function Qi(u){if(!u)return!1;var s=u[e];if(s){if(s instanceof Cr||/^(\\ )|[,;:\(\[]$/.test(s.ctrlSeq))return!1}else return u.parent&&u.parent.parent&&u.parent.parent.isStyleBlock()?Qi(u.parent.parent):!1;return!0}var ti=function(u){ie(s,u);function s(i,o,d){return u.call(this,i,o,void 0,d,!0)||this}return s.prototype.contactWeld=function(i,o){this.sharedSiblingMethod(i.options,o)},s.prototype.siblingCreated=function(i,o){this.sharedSiblingMethod(i,o)},s.prototype.siblingDeleted=function(i,o){this.sharedSiblingMethod(i,o)},s.prototype.sharedSiblingMethod=function(i,o){if(o!==t)return this.domFrag().oneElement().className=Qi(this)?"dcg-mq-binary-operator":"",this},s}(Cr);C["+"]=function(u){ie(s,u);function s(){return u.call(this,"+",p.text("+"))||this}return s.prototype.mathspeak=function(){return Qi(this)?"plus":"positive"},s}(ti);var Ic=function(u){ie(s,u);function s(){return u.call(this,"-",p.entityText("&minus;"))||this}return s.prototype.mathspeak=function(){return Qi(this)?"minus":"negative"},s}(ti);C["\u2212"]=C["\u2014"]=C["\u2013"]=C["-"]=Ic,C["\xB1"]=C.pm=C.plusmn=C.plusminus=function(){return new ti("\\pm ",p.entityText("&plusmn;"),"plus-or-minus")},C.mp=C.mnplus=C.minusplus=function(){return new ti("\\mp ",p.entityText("&#8723;"),"minus-or-plus")},an["*"]=C.sdot=C.cdot=ji("\\cdot ","&middot;","*","times");var Pc=function(u){ie(s,u);function s(){return u.call(this,"\\to ",p.entityText("&rarr;"),"to")||this}return s.prototype.deleteTowards=function(i,o){if(i===e){var d=o[e];new jt(d,this).remove(),o[e]=d[e],new Ic().createLeftOf(o),o[e].bubble(function(h){h.reflow()});return}u.prototype.deleteTowards.call(this,i,o)},s}(Cr);C["\u2192"]=C.to=Pc;var sn=function(u){ie(s,u);function s(i,o){var d=this,h=o?"Strict":"";return d=u.call(this,i["ctrlSeq".concat(h)],p.entityText(i["htmlEntity".concat(h)]),i["text".concat(h)],i["mathspeak".concat(h)])||this,d.data=i,d.strict=o,d}return s.prototype.swap=function(i){this.strict=i;var o=i?"Strict":"";this.ctrlSeq=this.data["ctrlSeq".concat(o)],this.domFrag().children().replaceWith(ge(p.entityText(this.data["htmlEntity".concat(o)]))),this.textTemplate=[this.data["text".concat(o)]],this.mathspeakName=this.data["mathspeak".concat(o)]},s.prototype.deleteTowards=function(i,o){if(i===e&&!this.strict){this.swap(!0),this.bubble(function(d){d.reflow()});return}u.prototype.deleteTowards.call(this,i,o)},s}(Cr),ls={ctrlSeq:"\\le ",htmlEntity:"&le;",text:"\u2264",mathspeak:"less than or equal to",ctrlSeqStrict:"<",htmlEntityStrict:"&lt;",textStrict:"<",mathspeakStrict:"less than"},Oc={ctrlSeq:"\\ge ",htmlEntity:"&ge;",text:"\u2265",mathspeak:"greater than or equal to",ctrlSeqStrict:">",htmlEntityStrict:"&gt;",textStrict:">",mathspeakStrict:"greater than"},ds=function(u){ie(s,u);function s(){return u.call(this,Oc,!0)||this}return s.prototype.createLeftOf=function(i){var o=i[e];if(o instanceof Cr&&o.ctrlSeq==="-"){var d=o;i[e]=d[e],d.remove(),new Pc().createLeftOf(i),i[e].bubble(function(h){h.reflow()});return}u.prototype.createLeftOf.call(this,i)},s}(sn);C["<"]=C.lt=function(){return new sn(ls,!0)},C[">"]=C.gt=ds,C["\u2264"]=C.le=C.leq=function(){return new sn(ls,!1)},C["\u2265"]=C.ge=C.geq=function(){return new sn(Oc,!1)},C.infty=C.infin=C.infinity=Rr("\\infty ","&infin;","infinity"),C["\u2260"]=C.ne=C.neq=ji("\\ne ","&ne;","not equal");var Fc=function(u){ie(s,u);function s(){return u.call(this,"=",p.text("="),"=","equals")||this}return s.prototype.createLeftOf=function(i){var o=i[e];if(o instanceof sn&&o.strict){o.swap(!1),o.bubble(function(d){d.reflow()});return}u.prototype.createLeftOf.call(this,i)},s}(Cr);C["="]=Fc,C["\xD7"]=C.times=C.cross=ji("\\times ","&times;","[x]","times"),C["\xF7"]=C.div=C.divide=C.divides=ji("\\div ","&divide;","[/]","over");var us=function(u){ie(s,u);function s(){return u.call(this,"\\sim ",p.text("~"),"~","tilde")||this}return s.prototype.createLeftOf=function(i){if(i[e]instanceof s){var o=i[e];i[e]=o[e],o.remove(),new _c().createLeftOf(i),i[e].bubble(function(d){d.reflow()});return}u.prototype.createLeftOf.call(this,i)},s}(Cr),_c=function(u){ie(s,u);function s(){return u.call(this,"\\approx ",p.entityText("&approx;"),"\u2248","approximately equal")||this}return s.prototype.deleteTowards=function(i,o){if(i===e){var d=o[e];new jt(d,this).remove(),o[e]=d[e],new us().createLeftOf(o),o[e].bubble(function(h){h.reflow()});return}u.prototype.deleteTowards.call(this,i,o)},s}(Cr);C.tildeNbsp=Rr("~",w," "),C.sim=us,C["\u2248"]=C.approx=_c,an["~"]=C.sim,C["~"]=C.tildeNbsp,vn.interpretTildeAsSim=function(u){var s=!!u;return s?C["~"]=C.sim:C["~"]=C.tildeNbsp,s};var Ma={sqrt:{width:"",html:function(){return p("svg",{preserveAspectRatio:"none",viewBox:"0 0 32 54"},[p("path",{d:"M0 33 L7 27 L12.5 47 L13 47 L30 0 L32 0 L13 54 L11 54 L4.5 31 L0 33"})])}},"|":{width:".4em",html:function(){return p("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[p("path",{d:"M4.4 0 L4.4 54 L5.6 54 L5.6 0"})])}},"[":{width:".55em",html:function(){return p("svg",{preserveAspectRatio:"none",viewBox:"0 0 11 24"},[p("path",{d:"M8 0 L3 0 L3 24 L8 24 L8 23 L4 23 L4 1 L8 1"})])}},"]":{width:".55em",html:function(){return p("svg",{preserveAspectRatio:"none",viewBox:"0 0 11 24"},[p("path",{d:"M3 0 L8 0 L8 24 L3 24 L3 23 L7 23 L7 1 L3 1"})])}},"(":{width:".55em",html:function(){return p("svg",{preserveAspectRatio:"none",viewBox:"3 0 106 186"},[p("path",{d:"M85 0 A61 101 0 0 0 85 186 L75 186 A75 101 0 0 1 75 0"})])}},")":{width:".55em",html:function(){return p("svg",{preserveAspectRatio:"none",viewBox:"3 0 106 186"},[p("path",{d:"M24 0 A61 101 0 0 1 24 186 L34 186 A75 101 0 0 0 34 0"})])}},"{":{width:".7em",html:function(){return p("svg",{preserveAspectRatio:"none",viewBox:"10 0 210 350"},[p("path",{d:"M170 0 L170 6 A47 52 0 0 0 123 60 L123 127 A35 48 0 0 1 88 175 A35 48 0 0 1 123 223 L123 290 A47 52 0 0 0 170 344 L170 350 L160 350 A58 49 0 0 1 102 301 L103 220 A45 40 0 0 0 58 180 L58 170 A45 40 0 0 0 103 130 L103 49 A58 49 0 0 1 161 0"})])}},"}":{width:".7em",html:function(){return p("svg",{preserveAspectRatio:"none",viewBox:"10 0 210 350"},[p("path",{d:"M60 0 L60 6 A47 52 0 0 1 107 60 L107 127 A35 48 0 0 0 142 175 A35 48 0 0 0 107 223 L107 290 A47 52 0 0 1 60 344 L60 350 L70 350 A58 49 0 0 0 128 301 L127 220 A45 40 0 0 1 172 180 L172 170 A45 40 0 0 1 127 130 L127 49 A58 49 0 0 0 70 0"})])}},"&#8741;":{width:".7em",html:function(){return p("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[p("path",{d:"M3.2 0 L3.2 54 L4 54 L4 0 M6.8 0 L6.8 54 L6 54 L6 0"})])}},"&lang;":{width:".55em",html:function(){return p("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[p("path",{d:"M6.8 0 L3.2 27 L6.8 54 L7.8 54 L4.2 27 L7.8 0"})])}},"&rang;":{width:".55em",html:function(){return p("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[p("path",{d:"M3.2 0 L6.8 27 L3.2 54 L2.2 54 L5.8 27 L2.2 0"})])}}},qr=function(u){ie(s,u);function s(i,o,d,h,b){var v=u.call(this,i,new St(1,function(E){return p.block(o,d,E[0])}))||this;return v.ariaLabel=h||i.replace(/^\\/,""),v.mathspeakTemplate=["Start"+v.ariaLabel+",","End"+v.ariaLabel],v.shouldNotSpeakDelimiters=b&&b.shouldNotSpeakDelimiters,v}return s.prototype.mathspeak=function(i){return!this.shouldNotSpeakDelimiters||i&&i.ignoreShorthand?u.prototype.mathspeak.call(this):this.foldChildren("",function(o,d){return o+" "+d.mathspeak(i)}).trim()},s}(Pt);C.mathrm=function(u){ie(s,u);function s(){return u.call(this,"\\mathrm","span",{class:"dcg-mq-roman dcg-mq-font"},"Roman Font",{shouldNotSpeakDelimiters:!0})||this}return s.prototype.isTextBlock=function(){return!0},s}(qr),C.mathit=function(){return new qr("\\mathit","i",{class:"dcg-mq-font"},"Italic Font")},C.mathbf=function(){return new qr("\\mathbf","b",{class:"dcg-mq-font"},"Bold Font")},C.mathsf=function(){return new qr("\\mathsf","span",{class:"dcg-mq-sans-serif dcg-mq-font"},"Serif Font")},C.mathtt=function(){return new qr("\\mathtt","span",{class:"dcg-mq-monospace dcg-mq-font"},"Math Text")},C.underline=function(){return new qr("\\underline","span",{class:"dcg-mq-non-leaf dcg-mq-underline"},"Underline")},C.overline=C.bar=function(){return new qr("\\overline","span",{class:"dcg-mq-non-leaf dcg-mq-overline"},"Overline")},C.overrightarrow=function(){return new qr("\\overrightarrow","span",{class:"dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-right"},"Over Right Arrow")},C.overleftarrow=function(){return new qr("\\overleftarrow","span",{class:"dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-left"},"Over Left Arrow")},C.overleftrightarrow=function(){return new qr("\\overleftrightarrow ","span",{class:"dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-leftright"},"Over Left and Right Arrow")},C.overarc=function(){return new qr("\\overarc","span",{class:"dcg-mq-non-leaf dcg-mq-overarc"},"Over Arc")},C.dot=function(){return new Pt("\\dot",new St(1,function(u){return p("span",{class:"dcg-mq-non-leaf"},[p("span",{class:"dcg-mq-dot-recurring-inner"},[p("span",{class:"dcg-mq-dot-recurring"},[p.text(G)]),p.block("span",{class:"dcg-mq-empty-box"},u[0])])])}))},C.textcolor=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.setColor=function(i){this.color=i,this.domView=new St(1,function(o){return p.block("span",{class:"dcg-mq-textcolor",style:"color:"+i},o[0])}),this.ariaLabel=i.replace(/^\\/,""),this.mathspeakTemplate=["Start "+this.ariaLabel+",","End "+this.ariaLabel]},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i);var o=this.blocks[0];i.latex+="\\textcolor{"+this.color+"}{",o.latexRecursive(i),i.latex+="}",this.checkCursorContextClose(i)},s.prototype.parser=function(){var i=this,o=Ee.optWhitespace,d=Ee.string,h=Ee.regex;return o.then(d("{")).then(h(/^[#\w\s.,()%-]*/)).skip(d("}")).then(function(b){return i.setColor(b),u.prototype.parser.call(i)})},s.prototype.isStyleBlock=function(){return!0},s}(Pt);var xh=C.class=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.parser=function(){var i=this,o=Ee.string,d=Ee.regex;return Ee.optWhitespace.then(o("{")).then(d(/^[-\w\s\\\xA0-\xFF]*/)).skip(o("}")).then(function(h){return i.cls=h||"",i.domView=new St(1,function(b){return p.block("span",{class:"dcg-mq-class ".concat(h)},b[0])}),i.ariaLabel=h+" class",i.mathspeakTemplate=["Start "+i.ariaLabel+",","End "+i.ariaLabel],u.prototype.parser.call(i)})},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i);var o=this.blocks[0];i.latex+="\\class{"+this.cls+"}{",o.latexRecursive(i),i.latex+="}",this.checkCursorContextClose(i)},s.prototype.isStyleBlock=function(){return!0},s}(Pt),na=/^[\+\-]?[\d]+$/;function ps(u){if(!u)return"";var s="";return u.eachChild(function(i){i.ctrlSeq!==void 0&&(s+=i.ctrlSeq)}),s}er.prototype.charsThatBreakOutOfSupSub="";var Br=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.ctrlSeq="_{...}^{...}",i}return s.prototype.setEnds=function(i){c("SupSub ends must be MathBlocks",i[e]instanceof Tr&&i[t]instanceof Tr),this.ends=i},s.prototype.getEnd=function(i){return this.ends[i]},s.prototype.createLeftOf=function(i){if(!(!this.replacedFragment&&!i[e]&&i.options.supSubsRequireOperand))return u.prototype.createLeftOf.call(this,i)},s.prototype.contactWeld=function(i){for(var o=e;o;o=o===e?t:!1){var d=this[o],h=void 0;if(d instanceof s){for(var b="sub";b;b=b==="sub"?"sup":!1){var v=this[b],E=d[b];if(v){if(!E)d.addBlock(v.disown());else if(v.isEmpty())h=new ce(E,0,E.getEnd(e));else{v.domFrag().children().insAtDirEnd(-o,E.domFrag().oneElement());var L=v.children().disown();h=new ce(E,L.getEnd(t),E.getEnd(e)),o===e?L.adopt(E,E.getEnd(t),0):L.adopt(E,0,E.getEnd(e))}this.placeCursor=function(K,B){return function(F){F.insAtDirEnd(-o,K||B)}}(E,v)}}this.remove(),i&&i[e]===this&&(o===t&&h?h[e]?i.insRightOf(h[e]):i.insAtLeftEnd(h.parent):i.insRightOf(d));break}}},s.prototype.finalizeTree=function(){var i=this.getEnd(e);i.write=function(o,d){if(o.options.autoSubscriptNumerals&&this===this.parent.sub&&"0123456789".indexOf(d)>=0){var h=this.chToCmd(d,o.options);h instanceof yr?o.deleteSelection():o.clearSelection().insRightOf(this.parent),h.createLeftOf(o.show()),o.controller.aria.queue("Baseline").alert(h.mathspeak({createdLeftOf:o}));return}o[e]&&!o[t]&&!o.selection&&o.options.charsThatBreakOutOfSupSub.indexOf(d)>-1&&(o.insRightOf(this.parent),o.controller.aria.queue("Baseline")),Tr.prototype.write.call(this,o,d)}},s.prototype.moveTowards=function(i,o,d){o.options.autoSubscriptNumerals&&!this.sup?o.insDirOf(i,this):u.prototype.moveTowards.call(this,i,o,d)},s.prototype.deleteTowards=function(i,o){if(o.options.autoSubscriptNumerals&&this.sub){var d=this.sub.getEnd(-i);d instanceof yr?d.remove():d&&d.deleteTowards(i,o.insAtDirEnd(-i,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(e,o.insAtLeftEnd(this.sub)),this.sup&&o.insDirOf(-i,this))}else u.prototype.deleteTowards.call(this,i,o)},s.prototype.latexRecursive=function(i){if(this.checkCursorContextOpen(i),this.sub){i.latex+="_{";var o=i.latex.length;this.sub.latexRecursive(i);var d=i.latex.length;o===d&&(i.latex+=" "),i.latex+="}"}if(this.sup){i.latex+="^{";var o=i.latex.length;this.sup.latexRecursive(i);var d=i.latex.length;o===d&&(i.latex+=" "),i.latex+="}"}this.checkCursorContextClose(i)},s.prototype.text=function(){function i(o,d){var h=d&&d.text()||"";return d?o+(h.length===1?h:"("+(h||" ")+")"):""}return i("_",this.sub)+i("^",this.sup)},s.prototype.addBlock=function(i){this.supsub==="sub"?(this.sup=this.upInto=this.sub.upOutOf=i,i.adopt(this,this.sub,0).downOutOf=this.sub,i.setDOM(ge(p("span",{class:"dcg-mq-sup"})).append(i.domFrag().children()).prependTo(this.domFrag().oneElement()).oneElement()),Ht.linkElementByBlockNode(i.domFrag().oneElement(),i)):(this.sub=this.downInto=this.sup.downOutOf=i,i.adopt(this,0,this.sup).upOutOf=this.sup,this.domFrag().removeClass("dcg-mq-sup-only"),i.setDOM(ge(p("span",{class:"dcg-mq-sub"})).append(i.domFrag().children()).appendTo(this.domFrag().oneElement()).oneElement()),Ht.linkElementByBlockNode(i.domFrag().oneElement(),i),this.domFrag().append(ge(p("span",{style:"display:inline-block;width:0"},[p.text(M)]))));for(var o=0;o<2;o+=1)(function(d,h,b,v){var E=d[h];E.deleteOutOf=function(L,K){if(K.insDirOf(this[L]?-L:L,this.parent),!this.isEmpty()){var B=this.getEnd(L);this.children().disown().withDirAdopt(L,K.parent,K[L],K[-L]).domFrag().insDirOf(-L,K.domFrag()),K[-L]=B}d.supsub=b,delete d[h],delete d["".concat(v,"Into")];var F=d[b];F["".concat(v,"OutOf")]=ri,delete F.deleteOutOf,h==="sub"&&d.domFrag().addClass("dcg-mq-sup-only").children().last().remove(),this.remove()}})(this,"sub sup".split(" ")[o],"sup sub".split(" ")[o],"down up".split(" ")[o])},s}(Pt);function ri(u){var s=this.parent,i=u;do{if(i[t])return u.insLeftOf(s);i=i.parent.parent}while(i!==s);u.insRightOf(s)}var Rc=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.supsub="sub",i.domView=new St(1,function(o){return p("span",{class:"dcg-mq-supsub dcg-mq-non-leaf"},[p.block("span",{class:"dcg-mq-sub"},o[0]),p("span",{style:"display:inline-block;width:0"},[p.text(M)])])}),i.textTemplate=["_"],i.mathspeakTemplate=["Subscript,",", Baseline"],i.ariaLabel="subscript",i}return s.prototype.finalizeTree=function(){this.downInto=this.sub=this.getEnd(e),this.sub.upOutOf=ri,u.prototype.finalizeTree.call(this)},s}(Br);C.subscript=C._=Rc,C.superscript=C.supscript=C["^"]=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.supsub="sup",i.domView=new St(1,function(o){return p("span",{class:"dcg-mq-supsub dcg-mq-non-leaf dcg-mq-sup-only"},[p.block("span",{class:"dcg-mq-sup"},o[0])])}),i.textTemplate=["^(",")"],i.ariaLabel="superscript",i.mathspeakTemplate=["Superscript,",", Baseline"],i}return s.prototype.mathspeak=function(i){var o=this.upInto;if(o!==void 0){var d=ps(o);if((!i||!i.ignoreShorthand)&&na.test(d)){if(d==="0")return"to the 0 power";if(d==="2")return"squared";if(d==="3")return"cubed";var h="";/^[+-]?\d{1,3}$/.test(d)&&(/(11|12|13|4|5|6|7|8|9|0)$/.test(d)?h="th":/1$/.test(d)?h="st":/2$/.test(d)?h="nd":/3$/.test(d)&&(h="rd"));var b=typeof o=="object"?o.mathspeak():d;return"to the "+b+h+" power"}}return u.prototype.mathspeak.call(this)},s.prototype.finalizeTree=function(){this.upInto=this.sup=this.getEnd(t),this.sup.downOutOf=ri,u.prototype.finalizeTree.call(this)},s}(Br);var kn=function(u){ie(s,u);function s(i,o,d){var h=u.call(this)||this;h.ariaLabel=d||i.replace(/^\\/,"");var b=new St(2,function(v){return p("span",{class:"dcg-mq-large-operator dcg-mq-non-leaf"},[p("span",{class:"dcg-mq-to"},[p.block("span",{},v[1])]),p("big",{},[p.text(o)]),p("span",{class:"dcg-mq-from"},[p.block("span",{},v[0])])])});return yr.prototype.setCtrlSeqHtmlTextAndMathspeak.call(h,i,b),h}return s.prototype.createLeftOf=function(i){u.prototype.createLeftOf.call(this,i),i.options.sumStartsWithNEquals&&(new ra("n").createLeftOf(i),new Fc().createLeftOf(i))},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),i.latex+=this.ctrlSeq+"_{";var o=i.latex.length;this.getEnd(e).latexRecursive(i);var d=i.latex.length;d===o&&(i.latex+=" "),i.latex+="}^{",o=i.latex.length,this.getEnd(t).latexRecursive(i),d=i.latex.length,o===d&&(i.latex+=" "),i.latex+="}",this.checkCursorContextClose(i)},s.prototype.mathspeak=function(){return"Start "+this.ariaLabel+" from "+this.getEnd(e).mathspeak()+" to "+this.getEnd(t).mathspeak()+", end "+this.ariaLabel+", "},s.prototype.parser=function(){for(var i=Ee.string,o=Ee.optWhitespace,d=Ee.succeed,h=fr.block,b=this,v=b.blocks=[new Tr,new Tr],E=0;E<v.length;E+=1)v[E].adopt(b,b.getEnd(t),0);return o.then(i("_").or(i("^"))).then(function(L){var K=v[L==="_"?0:1];return h.then(function(B){return B.children().adopt(K,K.getEnd(t),0),d(b)})}).many().result(b)},s.prototype.finalizeTree=function(){var i=this.getEnd(e),o=this.getEnd(t);i.ariaLabel="lower bound",o.ariaLabel="upper bound",this.downInto=i,this.upInto=o,i.upOutOf=o,o.downOutOf=i},s}(Pt);C["\u2211"]=C.sum=C.summation=function(){return new kn("\\sum ",R,"sum")},C["\u220F"]=C.prod=C.product=function(){return new kn("\\prod ",ue,"product")},C.coprod=C.coproduct=function(){return new kn("\\coprod ",pe,"co product")},C["\u222B"]=C.int=C.integral=function(u){ie(s,u);function s(){var i=u.call(this,"\\int ","","integral")||this;return i.ariaLabel="integral",i.domView=new St(2,function(o){return p("span",{class:"dcg-mq-int dcg-mq-non-leaf"},[p("big",{},[p.text(_e)]),p("span",{class:"dcg-mq-supsub dcg-mq-non-leaf"},[p("span",{class:"dcg-mq-sup"},[p.block("span",{class:"dcg-mq-sup-inner"},o[1])]),p.block("span",{class:"dcg-mq-sub"},o[0]),p("span",{style:"display:inline-block;width:0"},[p.text(M)])])])}),i}return s.prototype.createLeftOf=function(i){Pt.prototype.createLeftOf.call(this,i)},s}(kn);var Nu=C.frac=C.dfrac=C.cfrac=C.fraction=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.ctrlSeq="\\frac",i.domView=new St(2,function(o){return p("span",{class:"dcg-mq-fraction dcg-mq-non-leaf"},[p.block("span",{class:"dcg-mq-numerator"},o[0]),p.block("span",{class:"dcg-mq-denominator"},o[1]),p("span",{style:"display:inline-block;width:0"},[p.text(M)])])}),i.textTemplate=["(",")/(",")"],i}return s.prototype.finalizeTree=function(){var i=this.getEnd(e),o=this.getEnd(t);this.upInto=o.upOutOf=i,this.downInto=i.downOutOf=o,i.ariaLabel="numerator",o.ariaLabel="denominator",this.getFracDepth()>1?this.mathspeakTemplate=["StartNestedFraction,","NestedOver",", EndNestedFraction"]:this.mathspeakTemplate=["StartFraction,","Over",", EndFraction"]},s.prototype.mathspeak=function(i){if(i&&i.createdLeftOf){var o=i.createdLeftOf;return o.parent.mathspeak()}var d=ps(this.getEnd(e)),h=ps(this.getEnd(t));if((!i||!i.ignoreShorthand)&&na.test(d)&&na.test(h)){var b=d==="1"||d==="-1",v="";if(h==="2"?v=b?"half":"halves":h==="3"?v=b?"third":"thirds":h==="4"?v=b?"quarter":"quarters":h==="5"?v=b?"fifth":"fifths":h==="6"?v=b?"sixth":"sixths":h==="7"?v=b?"seventh":"sevenths":h==="8"?v=b?"eighth":"eighths":h==="9"&&(v=b?"ninth":"ninths"),v!==""){for(var E="",L=!1,K=this[e];K&&K[e]!==void 0;K=K[e])if(K.ctrlSeq!=="\\ ")if(na.test(K.ctrlSeq||""))L=!0;else{L=!1;break}return L&&(E+="and "),E+=this.getEnd(e).mathspeak()+" "+v,E}}return u.prototype.mathspeak.call(this)},s.prototype.getFracDepth=function(){var i=0,o=function(d,h){return d instanceof mr&&d.ctrlSeq&&d.ctrlSeq.toLowerCase().search("frac")>=0&&(h+=1),d&&d.parent?o(d.parent,h):h};return o(this,i)},s}(Pt),Iu=C.over=an["/"]=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.createLeftOf=function(i){if(!this.replacedFragment){var o=i[e];if(!i.options.typingSlashCreatesNewFraction)for(;o&&!(o instanceof Cr||o instanceof(C.text||a)||o instanceof kn||o.ctrlSeq==="\\ "||/^[,;:]$/.test(o.ctrlSeq));)o=o[e];if(o instanceof kn&&o[t]instanceof Br){o=o[t];var d=o[t];d instanceof Br&&d.ctrlSeq!=o.ctrlSeq&&(o=o[t])}if(o!==i[e]&&!i.isTooDeep(1)){var d=o[t],h=i[e];this.replaces(new jt(d||i.parent.getEnd(e),h)),i[e]=o}}u.prototype.createLeftOf.call(this,i)},s}(Nu),qc=function(){return new yr("\\operatorname{ans}",p("span",{class:"dcg-mq-ans"},[p.text("ans")]),"ans")};C.ans=qc;var Bc=function(){return new yr("\\%\\operatorname{of}",p("span",{class:"dcg-mq-nonSymbola dcg-mq-operator-name"},[p.text("% of ")]),"percent of")};C.percent=C.percentof=Bc;var Xi=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.tokenId="",i.ctrlSeq="\\token",i.textTemplate=["token(",")"],i.mathspeakTemplate=["StartToken,",", EndToken"],i.ariaLabel="token",i}return s.prototype.html=function(){var i=p("span",{class:"dcg-mq-token dcg-mq-ignore-mousedown","data-dcg-mq-token":this.tokenId});return this.setDOM(i),Ht.linkElementByCmdNode(i,this),i},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),i.latex+="\\token{"+this.tokenId+"}",this.checkCursorContextClose(i)},s.prototype.mathspeak=function(){var i=[];return this.domFrag().children().eachElement(function(o){var d=o.getAttribute("aria-label");typeof d=="string"&&d!==""&&i.push(d)}),i.length>0?i.join(" ").trim():"token "+this.tokenId},s.prototype.parser=function(){var i=this;return fr.block.map(function(o){var d=o.getEnd(e);if(d)for(i.tokenId+=d.ctrlSeq;d=d[t];)i.tokenId+=d.ctrlSeq;return i})},s}(yr);C.token=Xi;var Uc=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.ctrlSeq="\\sqrt",i.domView=new St(1,function(o){return p("span",{class:"dcg-mq-non-leaf dcg-mq-sqrt-container"},[p("span",{class:"dcg-mq-scaled dcg-mq-sqrt-prefix"},[Ma.sqrt.html()]),p.block("span",{class:"dcg-mq-non-leaf dcg-mq-sqrt-stem"},o[0])])}),i.textTemplate=["sqrt(",")"],i.mathspeakTemplate=["StartRoot,",", EndRoot"],i.ariaLabel="root",i}return s.prototype.parser=function(){return fr.optBlock.then(function(i){return fr.block.map(function(o){var d=new ni;return d.blocks=[i,o],i.adopt(d,0,0),o.adopt(d,i,0),d})}).or(u.prototype.parser.call(this))},s}(Pt);C.sqrt=Uc,C.hat=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.ctrlSeq="\\hat",i.domView=new St(1,function(o){return p("span",{class:"dcg-mq-non-leaf"},[p("span",{class:"dcg-mq-hat-prefix"},[p.text("^")]),p.block("span",{class:"dcg-mq-hat-stem"},o[0])])}),i.textTemplate=["hat(",")"],i}return s}(Pt);var ni=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.domView=new St(2,function(o){return p("span",{class:"dcg-mq-nthroot-container dcg-mq-non-leaf"},[p.block("sup",{class:"dcg-mq-nthroot dcg-mq-non-leaf"},o[0]),p("span",{class:"dcg-mq-scaled dcg-mq-sqrt-container"},[p("span",{class:"dcg-mq-sqrt-prefix dcg-mq-scaled"},[Ma.sqrt.html()]),p.block("span",{class:"dcg-mq-sqrt-stem dcg-mq-non-leaf"},o[1])])])}),i.textTemplate=["sqrt[","](",")"],i}return s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),i.latex+="\\sqrt[",this.getEnd(e).latexRecursive(i),i.latex+="]{",this.getEnd(t).latexRecursive(i),i.latex+="}",this.checkCursorContextClose(i)},s.prototype.mathspeak=function(){var i=this.getEnd(e).mathspeak(),o=this.getEnd(t).mathspeak();return this.getEnd(e).ariaLabel="Index",this.getEnd(t).ariaLabel="Radicand",i==="3"?"Start Cube Root, "+o+", End Cube Root":"Root Index "+i+", Start Root, "+o+", End Root"},s}(Uc);C.nthroot=ni,C.cbrt=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.createLeftOf=function(i){u.prototype.createLeftOf.call(this,i),new Yi("3").createLeftOf(i),i.controller.moveRight()},s}(ni);var $c=function(u){ie(s,u);function s(i,o,d){var h=this,b=new St(1,function(v){return p("span",{class:"dcg-mq-non-leaf"},[p("span",{class:"dcg-mq-diacritic-above"},[o]),p.block("span",{class:"dcg-mq-diacritic-stem"},v[0])])});return h=u.call(this,i,b,d)||this,h}return s}(Pt);C.vec=function(){return new $c("\\vec",p.entityText("&rarr;"),["vec(",")"])},C.tilde=function(){return new $c("\\tilde",p.text("~"),["tilde(",")"])};var zc=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.setDOM=function(i){var o;u.prototype.setDOM.call(this,i);var d=this.domFrag().children();return d.isEmpty()||(this.delimFrags=(o={},o[e]=d.first(),o[t]=d.last(),o)),this},s}(Pt),Ur=function(u){ie(s,u);function s(i,o,d,h,b){var v,E=u.call(this,"\\left"+h,void 0,[o,d])||this;return E.side=i,E.sides=(v={},v[e]={ch:o,ctrlSeq:h},v[t]={ch:d,ctrlSeq:b},v),E}return s.prototype.numBlocks=function(){return 1},s.prototype.html=function(){var i=this,o=this.getSymbol(e),d=this.getSymbol(t);return this.domView=new St(1,function(h){return p("span",{class:"dcg-mq-non-leaf dcg-mq-bracket-container"},[p("span",{style:"width:"+o.width,class:"dcg-mq-scaled dcg-mq-bracket-l dcg-mq-paren"+(i.side===t?" dcg-mq-ghost":"")},[o.html()]),p.block("span",{style:"margin-left:"+o.width+";margin-right:"+d.width,class:"dcg-mq-bracket-middle dcg-mq-non-leaf"},h[0]),p("span",{style:"width:"+d.width,class:"dcg-mq-scaled dcg-mq-bracket-r dcg-mq-paren"+(i.side===e?" dcg-mq-ghost":"")},[d.html()])])}),u.prototype.html.call(this)},s.prototype.getSymbol=function(i){var o=this.sides[i||t].ch;return Ma[o]||{width:"0",html:""}},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),i.latex+="\\left"+this.sides[e].ctrlSeq,this.getEnd(e).latexRecursive(i),i.latex+="\\right"+this.sides[t].ctrlSeq,this.checkCursorContextClose(i)},s.prototype.mathspeak=function(i){var o=this.sides[e].ch,d=this.sides[t].ch;if(o==="|"&&d==="|")this.mathspeakTemplate=["StartAbsoluteValue,",", EndAbsoluteValue"],this.ariaLabel="absolute value";else if(i&&i.createdLeftOf&&this.side){var h="";return this.side===e?h=this.textTemplate[0]:this.side===t&&(h=this.textTemplate[1]),(this.side===e?"left ":"right ")+Aa[h]}else this.mathspeakTemplate=["left "+Aa[o]+",",", right "+Aa[d]],this.ariaLabel=Aa[o]+" block";return u.prototype.mathspeak.call(this)},s.prototype.matchBrack=function(i,o,d){return d instanceof s&&d.side&&d.side!==-o&&(!i.restrictMismatchedBrackets||aa[this.sides[this.side].ch]===d.sides[d.side].ch||{"(":"]","[":")"}[this.sides[e].ch]===d.sides[t].ch)&&d},s.prototype.closeOpposing=function(i){i.side=0,i.sides[this.side]=this.sides[this.side];var o=i.delimFrags[this.side===e?e:t].removeClass("dcg-mq-ghost");this.replaceBracket(o,this.side)},s.prototype.createLeftOf=function(i){var o;if(!this.replacedFragment){var d=i.options;this.sides[e].ch==="|"?o=this.matchBrack(d,t,i[t])||this.matchBrack(d,e,i[e])||this.matchBrack(d,0,i.parent.parent):o=this.matchBrack(d,-this.side,i[-this.side])||this.matchBrack(d,-this.side,i.parent.parent)}if(o){var h=this.side=-o.side;this.closeOpposing(o),o===i.parent.parent&&i[h]&&new jt(i[h],i.parent.getEnd(h),-h).disown().withDirAdopt(-h,o.parent,o,o[h]).domFrag().insDirOf(h,o.domFrag()),o.bubble(function(b){b.reflow()})}else o=this,h=o.side,o.replacedFragment?o.side=0:i[-h]&&(o.replaces(new jt(i[-h],i.parent.getEnd(-h),h)),i[-h]=0),u.prototype.createLeftOf.call(this,i);h===e?i.insAtLeftEnd(o.getEnd(e)):i.insRightOf(o)},s.prototype.placeCursor=function(){},s.prototype.unwrap=function(){this.getEnd(e).children().disown().adopt(this.parent,this,this[t]).domFrag().insertAfter(this.domFrag()),this.remove()},s.prototype.deleteSide=function(i,o,d){var h=this.parent,b=this[i],v=h.getEnd(i);if(i===this.side){this.unwrap(),b?d.insDirOf(-i,b):d.insAtDirEnd(i,h);return}var E=d.options,L=!this.side;if(this.side=-i,this.matchBrack(E,i,this.getEnd(e).getEnd(this.side))){this.closeOpposing(this.getEnd(e).getEnd(this.side));var K=this.getEnd(e).getEnd(i);this.unwrap(),K&&K.siblingCreated(d.options,i),b?d.insDirOf(-i,b):d.insAtDirEnd(i,h)}else{if(this.matchBrack(E,i,this.parent.parent))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else if(o&&L){this.unwrap(),b?d.insDirOf(-i,b):d.insAtDirEnd(i,h);return}else{this.sides[i]=Pu(this),this.delimFrags[e].removeClass("dcg-mq-ghost"),this.delimFrags[t].removeClass("dcg-mq-ghost");var B=this.delimFrags[i].addClass("dcg-mq-ghost");this.replaceBracket(B,i)}if(b){var F=this.getEnd(e),K=F.getEnd(i);F.domFrag().removeClass("dcg-mq-empty"),new jt(b,v,-i).disown().withDirAdopt(-i,F,K,0).domFrag().insAtDirEnd(i,F.domFrag().oneElement()),K&&K.siblingCreated(d.options,i),d.insDirOf(-i,b)}else o?d.insDirOf(i,this):d.insAtDirEnd(i,this.getEnd(e))}},s.prototype.replaceBracket=function(i,o){var d=this.getSymbol(o);if(i.children().replaceWith(ge(d.html())),i.oneElement().style.width=d.width,o===e){var h=i.next();h.isEmpty()||(h.oneElement().style.marginLeft=d.width)}else{var b=i.prev();b.isEmpty()||(b.oneElement().style.marginRight=d.width)}},s.prototype.deleteTowards=function(i,o){this.deleteSide(-i,!1,o)},s.prototype.finalizeTree=function(){this.getEnd(e).deleteOutOf=function(i,o){this.parent.deleteSide(i,!0,o)},this.finalizeTree=this.intentionalBlur=function(){this.delimFrags[this.side===e?t:e].removeClass("dcg-mq-ghost"),this.side=0}},s.prototype.siblingCreated=function(i,o){o===-this.side&&this.finalizeTree()},s}(zc);function Pu(u){var s=u.side,i=u.sides[s];return{ch:aa[i.ch],ctrlSeq:aa[i.ctrlSeq]}}var aa={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|","\\lVert ":"\\rVert ","\\rVert ":"\\lVert "},Aa={"&lang;":"angle-bracket","&rang;":"angle-bracket","|":"pipe"};function Zi(u,o,i){var o=o||u,d=aa[u],h=aa[o];an[u]=function(){return new Ur(e,u,d,o,h)},an[d]=function(){return new Ur(t,u,d,o,h)},Aa[u]=Aa[d]=i}Zi("(","","parenthesis"),Zi("[","","bracket"),Zi("{","\\{","brace"),C.langle=function(){return new Ur(e,"&lang;","&rang;","\\langle ","\\rangle ")},C.rangle=function(){return new Ur(t,"&lang;","&rang;","\\langle ","\\rangle ")},an["|"]=function(){return new Ur(e,"|","|","|","|")},C.lVert=function(){return new Ur(e,"&#8741;","&#8741;","\\lVert ","\\rVert ")},C.rVert=function(){return new Ur(t,"&#8741;","&#8741;","\\lVert ","\\rVert ")},C.left=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.parser=function(){var i=Ee.regex,o=Ee.string,d=Ee.optWhitespace;return d.then(i(/^(?:[([|]|\\\{|\\langle(?![a-zA-Z])|\\lVert(?![a-zA-Z]))/)).then(function(h){var b=h.replace(/^\\/,"");return h=="\\langle"&&(b="&lang;",h=h+" "),h=="\\lVert"&&(b="&#8741;",h=h+" "),fr.then(function(v){return o("\\right").skip(d).then(i(/^(?:[\])|]|\\\}|\\rangle(?![a-zA-Z])|\\rVert(?![a-zA-Z]))/)).map(function(E){var L=E.replace(/^\\/,"");E=="\\rangle"&&(L="&rang;",E=E+" "),E=="\\rVert"&&(L="&#8741;",E=E+" ");var K=new Ur(0,b,L,h,E);return K.blocks=[v],v.adopt(K,0,0),K})})})},s}(Pt),C.right=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.parser=function(){return Ee.fail("unmatched \\right")},s}(Pt);var eo=Ma["("],gs=Ma[")"],Kc=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.ctrlSeq="\\binom",i.domView=new St(2,function(o){return p("span",{class:"dcg-mq-non-leaf dcg-mq-bracket-container"},[p("span",{style:"width:"+eo.width,class:"dcg-mq-paren dcg-mq-bracket-l dcg-mq-scaled"},[eo.html()]),p("span",{style:"margin-left:"+eo.width+"; margin-right:"+gs.width,class:"dcg-mq-non-leaf dcg-mq-bracket-middle"},[p("span",{class:"dcg-mq-array dcg-mq-non-leaf"},[p.block("span",{},o[0]),p.block("span",{},o[1])])]),p("span",{style:"width:"+gs.width,class:"dcg-mq-paren dcg-mq-bracket-r dcg-mq-scaled"},[gs.html()])])}),i.textTemplate=["choose(",",",")"],i.mathspeakTemplate=["StartBinomial,","Choose",", EndBinomial"],i.ariaLabel="binomial",i}return s}(zc);C.binom=C.binomial=Kc,C.choose=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.createLeftOf=function(i){Iu.prototype.createLeftOf(i)},s}(Kc);var Ou=function(u){ie(s,u);function s(){var i=u!==null&&u.apply(this,arguments)||this;return i.ctrlSeq="\\MathQuillMathField",i.domView=new St(1,function(o){return p("span",{class:"dcg-mq-editable-field"},[p.block("span",{class:"dcg-mq-root-block","aria-hidden":"true"},o[0])])}),i}return s.prototype.parser=function(){var i=this,o=Ee.string,d=Ee.regex,h=Ee.succeed;return o("[").then(d(/^[a-z][a-z0-9]*/i)).skip(o("]")).map(function(b){i.name=b}).or(h(void 0)).then(u.prototype.parser.call(this))},s.prototype.finalizeTree=function(i){var o=new is(this.getEnd(e),this.domFrag().oneElement(),i);o.KIND_OF_MQ="MathField",o.editable=!0,o.createTextarea(),o.editablesTextareaEvents(),o.cursor.insAtRightEnd(o.root),Hi(o.root);function d(h){if(h.parentNode&&!ge(h).hasClass("dcg-mq-root-block")&&d(h.parentNode),h.nodeType===Node.ELEMENT_NODE){var b=h;b.getAttribute("aria-hidden")==="true"&&(b.removeAttribute("aria-hidden"),ge(h).children().eachElement(function(v){v.setAttribute("aria-hidden","true")}))}}d(this.domFrag().parent().oneElement()),this.domFrag().oneElement().removeAttribute("aria-hidden")},s.prototype.registerInnerField=function(i,o){var d=this.getEnd(e).controller,h=new o(d);i[this.name]=h,i.push(h)},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),this.getEnd(e).latexRecursive(i),this.checkCursorContextClose(i)},s.prototype.text=function(){return this.getEnd(e).text()},s}(Pt);C.editable=C.MathQuillMathField=Ou;var hs=function(u){ie(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.setOptions=function(i){function o(){return""}return this.text=i.text||o,this.domView=new St(0,function(){return p("span",{},[g(i.htmlString||"")])}),this.latex=i.latex||o,this},s.prototype.latexRecursive=function(i){this.checkCursorContextOpen(i),i.latex+=this.latex(),this.checkCursorContextClose(i)},s.prototype.parser=function(){var i=this,o=Ee.string,d=Ee.regex,h=Ee.succeed;return o("{").then(d(/^[a-z][a-z0-9]*/i)).skip(o("}")).then(function(b){return o("[").then(d(/^[-\w\s]*/)).skip(o("]")).or(h(void 0)).map(function(v){return i.setOptions(zi[b](v))})})},s}(yr);if(C.embed=hs,window.jQuery){Sa=Xa(1);for(var Wc in Sa)(function(u,s){typeof s=="function"?(tr[u]=function(){return Wi(),s.apply(this,arguments)},tr[u].prototype=s.prototype):tr[u]=s})(Wc,Sa[Wc])}})()});function al(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?nl[zh.call(e)]||"object":typeof e}function _u(e){var t=!!e&&"length"in e&&e.length,r=al(e);return ca(e)||so(e)?!1:r==="array"||t===0||typeof t=="number"&&t>0&&t-1 in e}function no(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function pE(e,t){return t.toUpperCase()}function ia(e){return e.replace(dE,"ms-").replace(uE,pE)}function vs(){this.expando=A.expando+vs.uid++}function mE(e){return e==="true"?!0:e==="false"?!1:e==="null"?null:e===+e+""?+e:gE.test(e)?JSON.parse(e):e}function Nh(e,t,r){var n;if(r===void 0&&e.nodeType===1)if(n="data-"+t.replace(hE,"-$&").toLowerCase(),r=e.getAttribute(n),typeof r=="string"){try{r=mE(r)}catch(a){}oa.set(e,t,r)}else r=void 0;return r}function yE(e,t,r,n){var a,c,l=20,g=n?function(){return n.cur()}:function(){return A.css(e,t,"")},p=g(),f=r&&r[3]||(A.cssNumber[t]?"":"px"),w=e.nodeType&&(A.cssNumber[t]||f!=="px"&&+p)&&il.exec(A.css(e,t));if(w&&w[3]!==f){for(p=p/2,f=f||w[3],w=+p||1;l--;)A.style(e,t,w+f),(1-c)*(1-(c=g()/p||.5))<=0&&(l=0),w=w/c;w=w*2,A.style(e,t,w+f),r=r||[]}return r&&(w=+w||+p||0,a=r[1]?w+(r[1]+1)*r[2]:+r[2],n&&(n.unit=f,n.start=w,n.end=a)),a}function io(){return!0}function oo(){return!1}function bE(e,t){return e===xE()==(t==="focus")}function xE(){try{return Yt.activeElement}catch(e){}}function Bu(e,t,r,n,a,c){var l,g;if(typeof t=="object"){typeof r!="string"&&(n=n||r,r=void 0);for(g in t)Bu(e,g,r,n,t[g],c);return e}if(n==null&&a==null?(a=r,n=r=void 0):a==null&&(typeof r=="string"?(a=n,n=void 0):(a=n,n=r,r=void 0)),a===!1)a=oo;else if(!a)return e;return c===1&&(l=a,a=function(p){return A().off(p),l.apply(this,arguments)},a.guid=l.guid||(l.guid=A.guid++)),e.each(function(){A.event.add(this,t,a,n,r)})}function rl(e,t,r){if(!r){dt.get(e,t)===void 0&&A.event.add(e,t,io);return}dt.set(e,t,!1),A.event.add(e,t,{namespace:!1,handler:function(n){var a,c,l=dt.get(this,t);if(n.isTrigger&1&&this[t]){if(l.length)(A.event.special[t]||{}).delegateType&&n.stopPropagation();else if(l=Zc.call(arguments),dt.set(this,t,l),a=r(this,t),this[t](),c=dt.get(this,t),l!==c||a?dt.set(this,t,!1):c={},l!==c)return n.stopImmediatePropagation(),n.preventDefault(),c&&c.value}else l.length&&(dt.set(this,t,{value:A.event.trigger(A.extend(l[0],A.Event.prototype),l.slice(1),this)}),n.stopImmediatePropagation())}})}function xs(e,t,r){var n,a,c,l,g=e.style;return r=r||ol(e),r&&(l=r.getPropertyValue(t)||r[t],l===""&&!Yh(e)&&(l=A.style(e,t)),!Jt.pixelBoxStyles()&&zu.test(l)&&wE.test(t)&&(n=g.width,a=g.minWidth,c=g.maxWidth,g.minWidth=g.maxWidth=g.width=l,l=r.width,g.width=n,g.minWidth=a,g.maxWidth=c)),l!==void 0?l+"":l}function Qh(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}function vE(e){for(var t=e[0].toUpperCase()+e.slice(1),r=Ph.length;r--;)if(e=Ph[r]+t,e in Xh)return e}function Fh(e){var t=A.cssProps[e]||Oh[e];return t||(e in Xh?e:Oh[e]=vE(e)||e)}function Zh(e,t,r){var n=il.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function Uu(e,t,r,n,a,c){var l=t==="width"?1:0,g=0,p=0;if(r===(n?"border":"content"))return 0;for(;l<4;l+=2)r==="margin"&&(p+=A.css(e,r+Va[l],!0,a)),n?(r==="content"&&(p-=A.css(e,"padding"+Va[l],!0,a)),r!=="margin"&&(p-=A.css(e,"border"+Va[l]+"Width",!0,a))):(p+=A.css(e,"padding"+Va[l],!0,a),r!=="padding"?p+=A.css(e,"border"+Va[l]+"Width",!0,a):g+=A.css(e,"border"+Va[l]+"Width",!0,a));return!n&&c>=0&&(p+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-c-p-g-.5))||0),p}function qh(e,t,r){var n=ol(e),a=!Jt.boxSizingReliable()||r,c=a&&A.css(e,"boxSizing",!1,n)==="border-box",l=c,g=xs(e,t,n),p="offset"+t[0].toUpperCase()+t.slice(1);if(zu.test(g)){if(!r)return g;g="auto"}return(!Jt.boxSizingReliable()&&c||!Jt.reliableTrDimensions()&&no(e,"tr")||g==="auto"||!parseFloat(g)&&A.css(e,"display",!1,n)==="inline")&&e.getClientRects().length&&(c=A.css(e,"boxSizing",!1,n)==="border-box",l=p in e,l&&(g=e[p])),g=parseFloat(g)||0,g+Uu(e,t,r||(c?"border":"content"),l,n,g)+"px"}function $u(e,t,r,n){var a;if(Array.isArray(t))A.each(t,function(c,l){r||CE.test(e)?n(e,l):$u(e+"["+(typeof l=="object"&&l!=null?c:"")+"]",l,r,n)});else if(!r&&al(t)==="object")for(a in t)$u(e+"["+a+"]",t[a],r,n);else n(e,t)}var sa,aE,Zc,iE,$h,oE,nl,zh,el,Kh,sE,Jt,ca,so,Yt,Wh,A,cE,Hh,lE,qu,ws,dE,uE,tl,dt,oa,gE,hE,jh,il,Va,ao,Yh,fE,Ru,Ih,zu,ol,Jh,wE,Ph,Xh,Oh,kE,_h,EE,Rh,Bh,Uh,CE,TE,SE,DE,ee,lr=Te(()=>{"use strict";sa=[],aE=Object.getPrototypeOf,Zc=sa.slice,iE=sa.flat?function(e){return sa.flat.call(e)}:function(e){return sa.concat.apply([],e)},$h=sa.push,oE=sa.indexOf,nl={},zh=nl.toString,el=nl.hasOwnProperty,Kh=el.toString,sE=Kh.call(Object),Jt={},ca=function(t){return typeof t=="function"&&typeof t.nodeType!="number"&&typeof t.item!="function"},so=function(t){return t!=null&&t===t.window},Yt=window.document;Wh="3.6.0",A=function(e,t){return new A.fn.init(e,t)};A.fn=A.prototype={jquery:Wh,constructor:A,length:0,toArray:function(){return Zc.call(this)},get:function(e){return e==null?Zc.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=A.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return A.each(this,e)},map:function(e){return this.pushStack(A.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack(Zc.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(A.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(A.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:$h,sort:sa.sort,splice:sa.splice};A.extend=A.fn.extend=function(){var e,t,r,n,a,c,l=arguments[0]||{},g=1,p=arguments.length,f=!1;for(typeof l=="boolean"&&(f=l,l=arguments[g]||{},g++),typeof l!="object"&&!ca(l)&&(l={}),g===p&&(l=this,g--);g<p;g++)if((e=arguments[g])!=null)for(t in e)n=e[t],!(t==="__proto__"||l===n)&&(f&&n&&(A.isPlainObject(n)||(a=Array.isArray(n)))?(r=l[t],a&&!Array.isArray(r)?c=[]:!a&&!A.isPlainObject(r)?c={}:c=r,a=!1,l[t]=A.extend(f,c,n)):n!==void 0&&(l[t]=n));return l};A.extend({expando:"jQuery"+(Wh+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;return!e||zh.call(e)!=="[object Object]"?!1:(t=aE(e),t?(r=el.call(t,"constructor")&&t.constructor,typeof r=="function"&&Kh.call(r)===sE):!0)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},each:function(e,t){var r,n=0;if(_u(e))for(r=e.length;n<r&&t.call(e[n],n,e[n])!==!1;n++);else for(n in e)if(t.call(e[n],n,e[n])===!1)break;return e},makeArray:function(e,t){var r=t||[];return e!=null&&(_u(Object(e))?A.merge(r,typeof e=="string"?[e]:e):$h.call(r,e)),r},inArray:function(e,t,r){return t==null?-1:oE.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,a=e.length;n<r;n++)e[a++]=t[n];return e.length=a,e},grep:function(e,t,r){for(var n,a=[],c=0,l=e.length,g=!r;c<l;c++)n=!t(e[c],c),n!==g&&a.push(e[c]);return a},map:function(e,t,r){var n,a,c=0,l=[];if(_u(e))for(n=e.length;c<n;c++)a=t(e[c],c,r),a!=null&&l.push(a);else for(c in e)a=t(e[c],c,r),a!=null&&l.push(a);return iE(l)},guid:1,support:Jt});typeof Symbol=="function"&&(A.fn[Symbol.iterator]=sa[Symbol.iterator]);A.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){nl["[object "+t+"]"]=t.toLowerCase()});cE=function(e){var t,r,n,a,c,l,g,p=e.document,f=[],w=f.push,M=f.push,G=f.slice,R=/HTML$/i,ue=/^[^{]+\{\s*\[native \w/,pe=function(){n()};try{M.apply(f=G.call(p.childNodes),p.childNodes),f[p.childNodes.length].nodeType}catch(Le){M={apply:f.length?function(Re,Je){w.apply(Re,G.call(Je))}:function(Re,Je){for(var It=Re.length,it=0;Re[It++]=Je[it++];);Re.length=It-1}}}function _e(){}function $e(Le){var Re=a.createElement("fieldset");try{return!!Le(Re)}catch(Je){return!1}finally{Re.parentNode&&Re.parentNode.removeChild(Re),Re=null}}return t=_e.support={},r=_e.isXML=function(Le){var Re=Le&&Le.namespaceURI,Je=Le&&(Le.ownerDocument||Le).documentElement;return!R.test(Re||Je&&Je.nodeName||"HTML")},n=_e.setDocument=function(Le){var Re,Je,It=Le?Le.ownerDocument||Le:p;return It==a||It.nodeType!==9||!It.documentElement||(a=It,c=a.documentElement,l=!r(a),p!=a&&(Je=a.defaultView)&&Je.top!==Je&&(Je.addEventListener?Je.addEventListener("unload",pe,!1):Je.attachEvent&&Je.attachEvent("onunload",pe)),t.attributes=$e(function(it){return it.className="i",!it.getAttribute("className")}),t.getElementsByTagName=$e(function(it){return it.appendChild(a.createComment("")),!it.getElementsByTagName("*").length}),Re=ue.test(c.compareDocumentPosition),g=Re||ue.test(c.contains)?function(it,ge){var ta=it.nodeType===9?it.documentElement:it,Q=ge&&ge.parentNode;return it===Q||!!(Q&&Q.nodeType===1&&(ta.contains?ta.contains(Q):it.compareDocumentPosition&&it.compareDocumentPosition(Q)&16))}:function(it,ge){if(ge){for(;ge=ge.parentNode;)if(ge===it)return!0}return!1}),a},_e.contains=function(Le,Re){return(Le.ownerDocument||Le)!=a&&n(Le),g(Le,Re)},n(),t.sortDetached=$e(function(Le){return Le.compareDocumentPosition(a.createElement("fieldset"))&1}),_e}(window);A.contains=cE.contains;lE=A.fn.init=function(e,t,r){if(!e)return this;if(r=r||Hh,typeof e=="string")throw new Error("$(string) implementation has been removed");if(e.nodeType)return this[0]=e,this.length=1,this;if(ca(e))throw new Error("$(function) implementation has been removed");return A.makeArray(e,this)};lE.prototype=A.fn;Hh=A(Yt);qu=/[^\x20\t\r\n\f]+/g,ws=function(e,t,r,n,a,c,l){var g=0,p=e.length,f=r==null;if(al(r)==="object"){a=!0;for(g in r)ws(e,t,g,r[g],!0,c,l)}else if(n!==void 0&&(a=!0,ca(n)||(l=!0),f&&(l?(t.call(e,n),t=null):(f=t,t=function(w,M,G){return f.call(A(w),G)})),t))for(;g<p;g++)t(e[g],r,l?n:n.call(e[g],g,t(e[g],r)));return a?e:f?t.call(e):p?t(e[0],r):c},dE=/^-ms-/,uE=/-([a-z])/g;tl=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};vs.uid=1;vs.prototype={cache:function(e){var t=e[this.expando];return t||(t={},tl(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var n,a=this.cache(e);if(typeof t=="string")a[ia(t)]=r;else for(n in t)a[ia(n)]=t[n];return a},get:function(e,t){return t===void 0?this.cache(e):e[this.expando]&&e[this.expando][ia(t)]},access:function(e,t,r){return t===void 0||t&&typeof t=="string"&&r===void 0?this.get(e,t):(this.set(e,t,r),r!==void 0?r:t)},remove:function(e,t){var r,n=e[this.expando];if(n!==void 0){if(t!==void 0)for(Array.isArray(t)?t=t.map(ia):(t=ia(t),t=t in n?[t]:t.match(qu)||[]),r=t.length;r--;)delete n[t[r]];(t===void 0||A.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return t!==void 0&&!A.isEmptyObject(t)}};dt=new vs,oa=new vs,gE=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,hE=/[A-Z]/g;A.extend({hasData:function(e){return oa.hasData(e)||dt.hasData(e)},data:function(e,t,r){return oa.access(e,t,r)},removeData:function(e,t){oa.remove(e,t)},_data:function(e,t,r){return dt.access(e,t,r)},_removeData:function(e,t){dt.remove(e,t)}});A.fn.extend({data:function(e,t){var r,n,a,c=this[0],l=c&&c.attributes;if(e===void 0){if(this.length&&(a=oa.get(c),c.nodeType===1&&!dt.get(c,"hasDataAttrs"))){for(r=l.length;r--;)l[r]&&(n=l[r].name,n.indexOf("data-")===0&&(n=ia(n.slice(5)),Nh(c,n,a[n])));dt.set(c,"hasDataAttrs",!0)}return a}return typeof e=="object"?this.each(function(){oa.set(this,e)}):ws(this,function(g){var p;if(c&&g===void 0)return p=oa.get(c,e),p!==void 0||(p=Nh(c,e),p!==void 0)?p:void 0;this.each(function(){oa.set(this,e,g)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){oa.remove(this,e)})}});jh=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,il=new RegExp("^(?:([+-])=|)("+jh+")([a-z%]*)$","i"),Va=["Top","Right","Bottom","Left"],ao=Yt.documentElement,Yh=function(e){return A.contains(e.ownerDocument,e)},fE={composed:!0};ao.getRootNode&&(Yh=function(e){return A.contains(e.ownerDocument,e)||e.getRootNode(fE)===e.ownerDocument});Ru=/^(?:checkbox|radio)$/i;(function(){var e=Yt.createDocumentFragment(),t=e.appendChild(Yt.createElement("div")),r=Yt.createElement("input");r.setAttribute("type","radio"),r.setAttribute("checked","checked"),r.setAttribute("name","t"),t.appendChild(r),Jt.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Jt.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,t.innerHTML="<option></option>",Jt.option=!!t.lastChild})();Ih=/^([^.]*)(?:\.(.+)|)/;A.event={global:{},add:function(e,t,r,n,a){var c,l,g,p,f,w,M,G,R,ue,pe,_e=dt.get(e);if(tl(e)){if(r.handler&&(c=r,r=c.handler,a=c.selector),a)throw new Error("Support for event delegation has been removed");for(r.guid||(r.guid=A.guid++),(p=_e.events)||(p=_e.events=Object.create(null)),(l=_e.handle)||(l=_e.handle=function($e){return typeof A!="undefined"&&A.event.triggered!==$e.type?A.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(qu)||[""],f=t.length;f--;)if(g=Ih.exec(t[f])||[],R=pe=g[1],ue=(g[2]||"").split(".").sort(),!!R){if(M=A.event.special[R]||{},R=(a?M.delegateType:M.bindType)||R,M=A.event.special[R]||{},w=A.extend({type:R,origType:pe,data:n,handler:r,guid:r.guid,selector:a,namespace:ue.join(".")},c),(G=p[R])||(G=p[R]=[],G.delegateCount=0,(!M.setup||M.setup.call(e,n,ue,l)===!1)&&e.addEventListener&&e.addEventListener(R,l)),M.add&&(M.add.call(e,w),w.handler.guid||(w.handler.guid=r.guid)),a)throw new Error("Support for event delegation has been removed");G.push(w),A.event.global[R]=!0}}},remove:function(e,t,r,n,a){var c,l,g,p,f,w,M,G,R,ue,pe,_e=dt.hasData(e)&&dt.get(e);if(!(!_e||!(p=_e.events))){for(t=(t||"").match(qu)||[""],f=t.length;f--;){if(g=Ih.exec(t[f])||[],R=pe=g[1],ue=(g[2]||"").split(".").sort(),!R){for(R in p)A.event.remove(e,R+t[f],r,n,!0);continue}for(M=A.event.special[R]||{},R=(n?M.delegateType:M.bindType)||R,G=p[R]||[],g=g[2]&&new RegExp("(^|\\.)"+ue.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=c=G.length;c--;)w=G[c],(a||pe===w.origType)&&(!r||r.guid===w.guid)&&(!g||g.test(w.namespace))&&(!n||n===w.selector||n==="**"&&w.selector)&&(G.splice(c,1),w.selector&&G.delegateCount--,M.remove&&M.remove.call(e,w));l&&!G.length&&((!M.teardown||M.teardown.call(e,ue,_e.handle)===!1)&&A.removeEvent(e,R,_e.handle),delete p[R])}A.isEmptyObject(p)&&dt.remove(e,"handle events")}},dispatch:function(e){var t,r,n,a,c,l,g=new Array(arguments.length),p=A.event.fix(e),f=(dt.get(this,"events")||Object.create(null))[p.type]||[],w=A.event.special[p.type]||{};for(g[0]=p,t=1;t<arguments.length;t++)g[t]=arguments[t];if(p.delegateTarget=this,!(w.preDispatch&&w.preDispatch.call(this,p)===!1)){for(l=A.event.handlers.call(this,p,f),t=0;(a=l[t++])&&!p.isPropagationStopped();)for(p.currentTarget=a.elem,r=0;(c=a.handlers[r++])&&!p.isImmediatePropagationStopped();)(!p.rnamespace||c.namespace===!1||p.rnamespace.test(c.namespace))&&(p.handleObj=c,p.data=c.data,n=((A.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,g),n!==void 0&&(p.result=n)===!1&&(p.preventDefault(),p.stopPropagation()));return w.postDispatch&&w.postDispatch.call(this,p),p.result}},handlers:function(e,t){var r=[],n=t.delegateCount,a=e.target;if(n)throw new Error("Support for event delegtaion has been removed");return a=this,n<t.length&&r.push({elem:a,handlers:t.slice(n)}),r},addProp:function(e,t){Object.defineProperty(A.Event.prototype,e,{enumerable:!0,configurable:!0,get:ca(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(r){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:r})}})},fix:function(e){return e[A.expando]?e:new A.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Ru.test(t.type)&&t.click&&no(t,"input")&&rl(t,"click",io),!1},trigger:function(e){var t=this||e;return Ru.test(t.type)&&t.click&&no(t,"input")&&rl(t,"click"),!0},_default:function(e){var t=e.target;return Ru.test(t.type)&&t.click&&no(t,"input")&&dt.get(t,"click")||no(t,"a")}},beforeunload:{postDispatch:function(e){e.result!==void 0&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}};A.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)};A.Event=function(e,t){if(!(this instanceof A.Event))return new A.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===void 0&&e.returnValue===!1?io:oo,this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&A.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[A.expando]=!0};A.Event.prototype={constructor:A.Event,isDefaultPrevented:oo,isPropagationStopped:oo,isImmediatePropagationStopped:oo,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=io,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=io,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=io,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}};A.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},A.event.addProp);A.each({focus:"focusin",blur:"focusout"},function(e,t){A.event.special[e]={setup:function(){return rl(this,e,bE),!1},trigger:function(){return rl(this,e),!0},_default:function(){return!0},delegateType:t}});A.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){A.event.special[e]={delegateType:t,bindType:t,handle:function(r){var n,a=this,c=r.relatedTarget,l=r.handleObj;return(!c||c!==a&&!A.contains(a,c))&&(r.type=l.origType,n=l.handler.apply(this,arguments),r.type=t),n}}});A.fn.extend({on:function(e,t,r,n){return Bu(this,e,t,r,n)},one:function(e,t,r,n){return Bu(this,e,t,r,n,1)},off:function(e,t,r){var n,a;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,A(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if(typeof e=="object"){for(a in e)this.off(a,t,e[a]);return this}return(t===!1||typeof t=="function")&&(r=t,t=void 0),r===!1&&(r=oo),this.each(function(){A.event.remove(this,e,r,t)})}});zu=new RegExp("^("+jh+")(?!px)[a-z%]+$","i"),ol=function(e){var t=e.ownerDocument.defaultView;return(!t||!t.opener)&&(t=window),t.getComputedStyle(e)},Jh=function(e,t,r){var n,a,c={};for(a in t)c[a]=e.style[a],e.style[a]=t[a];n=r.call(e);for(a in t)e.style[a]=c[a];return n},wE=new RegExp(Va.join("|"),"i");(function(){function e(){if(f){p.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",f.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ao.appendChild(p).appendChild(f);var w=window.getComputedStyle(f);r=w.top!=="1%",g=t(w.marginLeft)===12,f.style.right="60%",c=t(w.right)===36,n=t(w.width)===36,f.style.position="absolute",a=t(f.offsetWidth/3)===12,ao.removeChild(p),f=null}}function t(w){return Math.round(parseFloat(w))}var r,n,a,c,l,g,p=Yt.createElement("div"),f=Yt.createElement("div");f.style&&(f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",Jt.clearCloneStyle=f.style.backgroundClip==="content-box",A.extend(Jt,{boxSizingReliable:function(){return e(),n},pixelBoxStyles:function(){return e(),c},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),g},scrollboxSize:function(){return e(),a},reliableTrDimensions:function(){var w,M,G,R;return l==null&&(w=Yt.createElement("table"),M=Yt.createElement("tr"),G=Yt.createElement("div"),w.style.cssText="position:absolute;left:-11111px;border-collapse:separate",M.style.cssText="border:1px solid",M.style.height="1px",G.style.height="9px",G.style.display="block",ao.appendChild(w).appendChild(M).appendChild(G),R=window.getComputedStyle(M),l=parseInt(R.height,10)+parseInt(R.borderTopWidth,10)+parseInt(R.borderBottomWidth,10)===M.offsetHeight,ao.removeChild(w)),l}}))})();Ph=["Webkit","Moz","ms"],Xh=Yt.createElement("div").style,Oh={};kE=/^(none|table(?!-c[ea]).+)/,_h=/^--/,EE={position:"absolute",visibility:"hidden",display:"block"},Rh={letterSpacing:"0",fontWeight:"400"};A.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=xs(e,"opacity");return r===""?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,r,n){if(!(!e||e.nodeType===3||e.nodeType===8||!e.style)){var a,c,l,g=ia(t),p=_h.test(t),f=e.style;if(p||(t=Fh(g)),l=A.cssHooks[t]||A.cssHooks[g],r!==void 0){if(c=typeof r,c==="string"&&(a=il.exec(r))&&a[1]&&(r=yE(e,t,a),c="number"),r==null||r!==r)return;c==="number"&&!p&&(r+=a&&a[3]||(A.cssNumber[g]?"":"px")),!Jt.clearCloneStyle&&r===""&&t.indexOf("background")===0&&(f[t]="inherit"),(!l||!("set"in l)||(r=l.set(e,r,n))!==void 0)&&(p?f.setProperty(t,r):f[t]=r)}else return l&&"get"in l&&(a=l.get(e,!1,n))!==void 0?a:f[t]}},css:function(e,t,r,n){var a,c,l,g=ia(t),p=_h.test(t);return p||(t=Fh(g)),l=A.cssHooks[t]||A.cssHooks[g],l&&"get"in l&&(a=l.get(e,!0,r)),a===void 0&&(a=xs(e,t,n)),a==="normal"&&t in Rh&&(a=Rh[t]),r===""||r?(c=parseFloat(a),r===!0||isFinite(c)?c||0:a):a}});A.each(["height","width"],function(e,t){A.cssHooks[t]={get:function(r,n,a){if(n)return kE.test(A.css(r,"display"))&&(!r.getClientRects().length||!r.getBoundingClientRect().width)?Jh(r,EE,function(){return qh(r,t,a)}):qh(r,t,a)},set:function(r,n,a){var c,l=ol(r),g=!Jt.scrollboxSize()&&l.position==="absolute",p=g||a,f=p&&A.css(r,"boxSizing",!1,l)==="border-box",w=a?Uu(r,t,a,f,l):0;return f&&g&&(w-=Math.ceil(r["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(l[t])-Uu(r,t,"border",!1,l)-.5)),w&&(c=il.exec(n))&&(c[3]||"px")!=="px"&&(r.style[t]=n,n=A.css(r,t)),Zh(r,n,w)}}});A.cssHooks.marginLeft=Qh(Jt.reliableMarginLeft,function(e,t){if(t)return(parseFloat(xs(e,"marginLeft"))||e.getBoundingClientRect().left-Jh(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"});A.each({margin:"",padding:"",border:"Width"},function(e,t){A.cssHooks[e+t]={expand:function(r){for(var n=0,a={},c=typeof r=="string"?r.split(" "):[r];n<4;n++)a[e+Va[n]+t]=c[n]||c[n-2]||c[0];return a}},e!=="margin"&&(A.cssHooks[e+t].set=Zh)});A.fn.extend({css:function(e,t){return ws(this,function(r,n,a){var c,l,g={},p=0;if(Array.isArray(n)){for(c=ol(r),l=n.length;p<l;p++)g[n[p]]=A.css(r,n[p],!1,c);return g}return a!==void 0?A.style(r,n,a):A.css(r,n)},e,t,arguments.length>1)}});(function(){var e=Yt.createElement("input"),t=Yt.createElement("select"),r=t.appendChild(Yt.createElement("option"));e.type="checkbox",Jt.checkOn=e.value!=="",Jt.optSelected=r.selected,e=Yt.createElement("input"),e.value="t",e.type="radio",Jt.radioValue=e.value==="t"})();Jt.focusin="onfocusin"in window;Bh=/^(?:focusinfocus|focusoutblur)$/,Uh=function(e){e.stopPropagation()};A.extend(A.event,{trigger:function(e,t,r,n){var a,c,l,g,p,f,w,M,G=[r||Yt],R=el.call(e,"type")?e.type:e,ue=el.call(e,"namespace")?e.namespace.split("."):[];if(c=M=l=r=r||Yt,!(r.nodeType===3||r.nodeType===8)&&!Bh.test(R+A.event.triggered)&&(R.indexOf(".")>-1&&(ue=R.split("."),R=ue.shift(),ue.sort()),p=R.indexOf(":")<0&&"on"+R,e=e[A.expando]?e:new A.Event(R,typeof e=="object"&&e),e.isTrigger=n?2:3,e.namespace=ue.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+ue.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=t==null?[e]:A.makeArray(t,[e]),w=A.event.special[R]||{},!(!n&&w.trigger&&w.trigger.apply(r,t)===!1))){if(!n&&!w.noBubble&&!so(r)){for(g=w.delegateType||R,Bh.test(g+R)||(c=c.parentNode);c;c=c.parentNode)G.push(c),l=c;l===(r.ownerDocument||Yt)&&G.push(l.defaultView||l.parentWindow||window)}for(a=0;(c=G[a++])&&!e.isPropagationStopped();)M=c,e.type=a>1?g:w.bindType||R,f=(dt.get(c,"events")||Object.create(null))[e.type]&&dt.get(c,"handle"),f&&f.apply(c,t),f=p&&c[p],f&&f.apply&&tl(c)&&(e.result=f.apply(c,t),e.result===!1&&e.preventDefault());return e.type=R,!n&&!e.isDefaultPrevented()&&(!w._default||w._default.apply(G.pop(),t)===!1)&&tl(r)&&p&&ca(r[R])&&!so(r)&&(l=r[p],l&&(r[p]=null),A.event.triggered=R,e.isPropagationStopped()&&M.addEventListener(R,Uh),r[R](),e.isPropagationStopped()&&M.removeEventListener(R,Uh),A.event.triggered=void 0,l&&(r[p]=l)),e.result}},simulate:function(e,t,r){var n=A.extend(new A.Event,r,{type:e,isSimulated:!0});A.event.trigger(n,null,t)}});A.fn.extend({trigger:function(e,t){return this.each(function(){A.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r)return A.event.trigger(e,t,r,!0)}});Jt.focusin||A.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(n){A.event.simulate(t,n.target,A.event.fix(n))};A.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,a=dt.access(n,t);a||n.addEventListener(e,r,!0),dt.access(n,t,(a||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,a=dt.access(n,t)-1;a?dt.access(n,t,a):(n.removeEventListener(e,r,!0),dt.remove(n,t))}}});CE=/\[\]$/;A.param=function(e,t){var r,n=[],a=function(c,l){var g=ca(l)?l():l;n[n.length]=encodeURIComponent(c)+"="+encodeURIComponent(g==null?"":g)};if(e==null)return"";if(Array.isArray(e)||e.jquery&&!A.isPlainObject(e))A.each(e,function(){a(this.name,this.value)});else for(r in e)$u(r,e[r],t,a);return n.join("&")};A.offset={setOffset:function(e,t,r){var n,a,c,l,g,p,f,w=A.css(e,"position"),M=A(e),G={};w==="static"&&(e.style.position="relative"),g=M.offset(),c=A.css(e,"top"),p=A.css(e,"left"),f=(w==="absolute"||w==="fixed")&&(c+p).indexOf("auto")>-1,f?(n=M.position(),l=n.top,a=n.left):(l=parseFloat(c)||0,a=parseFloat(p)||0),ca(t)&&(t=t.call(e,r,A.extend({},g))),t.top!=null&&(G.top=t.top-g.top+l),t.left!=null&&(G.left=t.left-g.left+a),"using"in t?t.using.call(e,G):M.css(G)}};A.fn.extend({offset:function(e){if(arguments.length)return e===void 0?this:this.each(function(a){A.offset.setOffset(this,e,a)});var t,r,n=this[0];if(n)return n.getClientRects().length?(t=n.getBoundingClientRect(),r=n.ownerDocument.defaultView,{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,r,n=this[0],a={top:0,left:0};if(A.css(n,"position")==="fixed")t=n.getBoundingClientRect();else{for(t=this.offset(),r=n.ownerDocument,e=n.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&A.css(e,"position")==="static";)e=e.parentNode;e&&e!==n&&e.nodeType===1&&(a=A(e).offset(),a.top+=A.css(e,"borderTopWidth",!0),a.left+=A.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-A.css(n,"marginTop",!0),left:t.left-a.left-A.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&A.css(e,"position")==="static";)e=e.offsetParent;return e||ao})}});A.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r=t==="pageYOffset";A.fn[e]=function(n){return ws(this,function(a,c,l){var g;if(so(a)?g=a:a.nodeType===9&&(g=a.defaultView),l===void 0)return g?g[t]:a[c];g?g.scrollTo(r?g.pageXOffset:l,r?l:g.pageYOffset):a[c]=l},e,n,arguments.length)}});A.each(["top","left"],function(e,t){A.cssHooks[t]=Qh(Jt.pixelPosition,function(r,n){if(n)return n=xs(r,t),zu.test(n)?A(r).position()[t]+"px":n})});A.each({Height:"height",Width:"width"},function(e,t){A.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,n){A.fn[n]=function(a,c){var l=arguments.length&&(r||typeof a!="boolean"),g=r||(a===!0||c===!0?"margin":"border");return ws(this,function(p,f,w){var M;return so(p)?n.indexOf("outer")===0?p["inner"+e]:p.document.documentElement["client"+e]:p.nodeType===9?(M=p.documentElement,Math.max(p.body["scroll"+e],M["scroll"+e],p.body["offset"+e],M["offset"+e],M["client"+e])):w===void 0?A.css(p,f,g):A.style(p,f,w,g)},t,l?a:void 0,l)}})});A.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});A.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){A.fn[t]=function(r,n){return arguments.length>0?this.on(t,null,r,n):this.trigger(t)}});TE=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;A.isArray=Array.isArray;A.parseJSON=JSON.parse;A.nodeName=no;A.isFunction=ca;A.isWindow=so;A.camelCase=ia;A.type=al;A.now=Date.now;A.isNumeric=function(e){var t=A.type(e);return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))};A.trim=function(e){return e==null?"":(e+"").replace(TE,"")};SE=window.jQuery,DE=window.$;A.noConflict=function(e){return window.$===A&&(window.$=DE),e&&window.jQuery===A&&(window.jQuery=SE),A};typeof noGlobal=="undefined"&&(window.jQuery=window.$=A);ee=A});var co,ll=Te(()=>{co=()=>{let e="";try{e=location.search,e[0]=="?"&&(e=e.slice(1))}catch(n){}let t=e.split("&"),r={};for(let n of t){let a=n.split("=");a.length==2?r[a[0]]=decodeURIComponent(a[1]):r[a[0]]=!0}return r}});function VE(e,t){if(t!=null){if(typeof e!="string")throw new Error("Must pass a string for an EventHandler name");if(typeof t!="function")throw new Error("Must pass a function for an EventHandler callback");return{bindings:{onMount:function(r){r[e.toLowerCase()]=function(n){n&&t.apply(this,arguments)}}}}}}var dm,um=Te(()=>{dm=VE});function NE(e){var t=function(){return e};return t.isDCGViewConst=!0,t}function IE(e){return!!(typeof e=="function"&&e.isDCGViewConst)}var Mt,Dn=Te(()=>{Mt={isConst:IE,makeConst:NE}});function PE(e,t,r){r===void 0?e.removeAttribute(t):e.setAttribute(t,r+"")}var ul,Wu=Te(()=>{ul={update:PE}});function OE(e,t){var r=t(),n;return Mt.isConst(t)||(n={onUpdate:function(a){var c=t();c!==r&&(r=c,ul.update(a,e,c))}}),{value:r,bindings:n}}var pm,gm=Te(()=>{Dn();Wu();pm=OE});function FE(e){return e[0]==="o"&&e[1]==="n"&&e[2].toUpperCase()===e[2]}var hm,mm=Te(()=>{hm=FE});function _E(e,t){Hu[e]=t}function RE(e){return Hu.hasOwnProperty(e)}function qE(e,t){var r=Hu[e];return r(t)}var Hu,ks,ju=Te(()=>{Hu={};ks={isCustomAttribute:RE,add:_E,parse:qE}});function BE(e,t,r){var n=e._bindings[t];n?n.push(r):e._bindings[t]=[r]}function UE(e,t){var r=e._bindings[t];if(r)for(var n=r.length,a=0;a<n;a++)r[a]()}var Mr,Es=Te(()=>{Mr={add:BE,invoke:UE}});function $E(e){lo.push(e)}function zE(e){var t=lo;lo=[];for(var r=0;r<t.length;r++){var n=t[r];n!==e&&lo.push(n)}}function KE(e,t){try{if(t&&t._isDCGView){e+=" ["+t._viewName+"]";var r=t.traceViewHierarchy();r.ancestors.length>0&&(e+=`
View Hierarchy:
`+r.formatted)}throw new Error(e)}catch(a){console.warn(a);for(var n=0;n<lo.length;n++)lo[n](a)}}var lo,qn,Cs=Te(()=>{lo=[];qn={warn:KE,addWarningHandler:$E,removeWarningHandler:zE}});function jE(e,t,r){var n=!1;return function(){if(n){qn.warn(e+" is a one-time binding but was called multiple times",r);return}n=!0,t.apply(this,arguments)}}function YE(e,t,r){var n=r.bindings;if(n)for(var a in n){var c=n[a];a in WE&&(c=c.bind(null,t)),a in HE&&(c=jE(a,c,e)),Mr.add(e,a,c)}}function JE(e,t){if(typeof t!="function")throw new Error('The "'+e+'" attr must be a function. It is: '+JSON.stringify(t));return ks.isCustomAttribute(e)?ks.parse(e,t):hm(e)?dm(e,t):pm(e,t)}function QE(e,t,r){if(t)for(var n in t){var a=JE(n,t[n]);if(a){var c=a.value;c!==void 0&&r.setAttribute(n,c),a.bindings&&YE(e,r,a)}}}var WE,HE,fm,ym=Te(()=>{um();gm();mm();ju();Es();Cs();WE={onMount:!0,didMount:!0,willUnmount:!0,willUpdate:!0,onUpdate:!0,didUpdate:!0},HE={willMount:!0,onMount:!0,didMount:!0,willUnmount:!0,onUnmount:!0,didUnmount:!0};fm=QE});function XE(){bm=!0}function ZE(e,t,r){if(typeof r!="function")throw new Error("bindText expects a function");var n=r();n==null&&(n="");var a=document.createTextNode(n);if(bm){var c=document.createElement("span");c.appendChild(a),t.appendChild(c)}else t.appendChild(a);Mr.add(e,"onUpdate",function(){var l=r();l==null&&(l=""),n!==l&&(a.nodeValue=l,n=l)})}var bm,pl,Yu=Te(()=>{Es();bm=!1;pl={bindText:ZE,enableSpanWrapping:XE}});function xm(e,t){var r=document.createTextNode(t);e.appendChild(r)}function Ju(e,t,r){if(this.tagName=e,this.attrs=t,this.children=r,Array.isArray(this.children))for(var n=0;n<this.children.length;n++){var a=typeof this.children[n];a!=="object"&&a!=="function"||(this.children[n]._parentElement=this)}}var eC,wm,vm=Te(()=>{ym();Yu();Dn();Cs();eC=pl.bindText;Ju.prototype._isDCGElement=!0;Ju.prototype.renderToDocFrag=function(e,t){if(this._domNode)throw new Error("Cannot remount a DCGElement");var r=this.children,n=document.createElement(this.tagName);this._domNode=n,fm(t,this.attrs,n),e.appendChild(n);for(var a=r.length,c=0;c<a;c++){var l=r[c];l._isDCGElement?l.renderToDocFrag(n,t):Mt.isConst(l)?xm(n,l()):typeof l=="function"?eC(t,n,l):(qn.warn("Text should be a const or a getter: "+JSON.stringify(l),t),xm(n,l))}};wm=Ju});function km(e,t){if(e!=null)if(Array.isArray(e))for(var r=0;r<e.length;r++)km(e[r],t);else t.push(e)}function tC(e,t){for(var r=[],n=arguments.length-1,a=2;a<=n;a++)km(arguments[a],r);if(typeof e=="string")return new wm(e,t,r);if(e&&e._isDCGViewClass)return new e(t,r);throw new Error("createElement expects a String or DCGViewClass")}var Bn,uo=Te(()=>{vm();Bn=tC});function rC(){for(var e=this._element;e._isDCGView;)e=e._element;return e._domNode}function nC(e,t){if(t&&t._childViews.push(this),this.__generatedHTMLBefore)throw new Error("Cannot remount a DCGView");if(this.__generatedHTMLBefore=!0,this._element.renderToDocFrag(e,this),Array.isArray(this._siblingElements))for(var r=0;r<this._siblingElements.length;r++)this._siblingElements[r].renderToDocFrag(e,this)}function aC(e,t,r){if(!e||!e._isDCGViewClass)throw new Error("Must pass a DCGView class to be mounted");if(!t||t.nodeType!==1)throw new Error("Must pass an HTMLElement for the node");if(t._mountedDCGView)throw new Error("This node is already mounted by a view");var n=new e(r),a=document.createDocumentFragment();return n.renderToDocFrag(a),t.innerHTML="",Qu(n),t._mountedDCGView=n,t.appendChild(a),Xu(n),Zu(n),n}function iC(e){var t=e._mountedDCGView;if(!t)throw new Error("This node is not mounted by a DCGView");ep(t),e.innerHTML="",delete e._mountedDCGView,tp(t),rp(t)}function Qu(e){e.willMount&&e.willMount(),Mr.invoke(e,"willMount"),e._childViews.forEach(Qu)}function Xu(e){e._isMounted=!0,e.onMount&&e.onMount(),Mr.invoke(e,"onMount"),e._childViews.forEach(Xu)}function Zu(e){e.didMount&&e.didMount(),Mr.invoke(e,"didMount"),e._childViews.forEach(Zu)}function ep(e){e.willUnmount&&e.willUnmount(),Mr.invoke(e,"willUnmount"),e._childViews.forEach(ep)}function tp(e){e._isMounted=!1,e._childViews.forEach(tp),Mr.invoke(e,"onUnmount"),e.onUnmount&&e.onUnmount()}function rp(e){e._childViews.forEach(rp),Mr.invoke(e,"didUnmount"),e.didUnmount&&e.didUnmount()}function oC(e,t){var r=document.createDocumentFragment();return e.renderToDocFrag(r,t),r.firstChild}var we,Ia=Te(()=>{Es();we={renderToDocFrag:nC,findRootNode:rC,createNodeForView:oC,willMount:Qu,onMount:Xu,didMount:Zu,willUnmount:ep,onUnmount:tp,didUnmount:rp,mountToNode:aC,unmountFromNode:iC}});function sC(){if(!this._isMounted)return qn.warn("Trying to update view that is not mounted. Ignoring update.",this);if(!(this.shouldUpdate&&!this.shouldUpdate())){if(this.willUpdate&&this.willUpdate(),Mr.invoke(this,"willUpdate"),Mr.invoke(this,"onUpdate"),this.onUpdate&&this.onUpdate(),this.overrideChildUpdates)this.overrideChildUpdates();else for(var e=this._childViews,t=e.length,r=0;r<t;r++)e[r].update();Mr.invoke(this,"didUpdate"),this.didUpdate&&this.didUpdate()}}var Em,Cm=Te(()=>{Es();Cs();Em={update:sC}});function cC(e){var t=arguments.length;if(t<2)return e;for(var r=1;r<t;r++)for(var n=arguments[r],a=Object.keys(n),c=a.length,l=0;l<c;l++){var g=a[l];e[g]=n[g]}return e}var Un,po=Te(()=>{Un=cC});function lC(e){if(!e)throw new Error("must pass a spec to DCGView.createClass");if(typeof e.template!="function")throw new Error("must pass a template function to DCGView.createClass");var t=function(n,a){this._viewName=e.viewName||(this.constructor?this.constructor.name:"Anonymous DCGView"),this._setupProps(n,a),this.init&&this.init(),this._callTemplate()};t.prototype._setupProps=function(n,a){if(n){for(var c in n){var l=n[c];if(typeof l!="function"&&l!==void 0)throw new Error('The "'+c+'" prop must be a function. It is: '+JSON.stringify(l))}this.props=n}else this.props={};this.children=a,this._childViews=[],this._bindings={}},t.prototype._callTemplate=function(){if(this._element=this.template(),!this._element||!this._element._isDCGElement)throw new Error("template() must return a DCGElement");this._element._parentElement=this},t.prototype.bindFn=function(n){return n.bind(this)},t.prototype.findRootNode=we.findRootNode,t.prototype.renderToDocFrag=we.renderToDocFrag,t.prototype.const=Mt.makeConst,t.prototype.spread=Un,t.prototype.createElement=Bn,t.prototype.update=Em.update,t.prototype.traceViewHierarchy=function(){for(var n=[],a=this._parentElement;a;a=a._parentElement)n.unshift(a);var c=n.concat([this]).filter(function(l){return!(!l._isDCGView||l._isDCGSwitch&&l._parentElement&&l._parentElement._isDCGIf||l._isDCGIfDefinedWrapper||l._isDCGSwitchWrapper||l._isDCGSwitchUnionWrapper)}).map(function(l,g){for(var p="";g-- >0;)p+="  ";return p+"<"+l._viewName+">"}).join(`
`);return{ancestors:n,formatted:c}};for(var r in e)if(e.hasOwnProperty(r))if(!t.prototype.hasOwnProperty(r))t.prototype[r]=e[r];else throw new Error("Cannot override the "+r+"() method");return t._isDCGViewClass=!0,t.prototype._isDCGView=!0,t.prototype._isDCGElement=!0,t}var rt,dn=Te(()=>{uo();Ia();Cm();Dn();po();rt=lC});function Tm(e){var t=e(),r=typeof t;if(r==="string")return t;if(!r||r!=="object")throw new Error("Unsupported type returned from style getter: "+r);var n="";for(var a in t){var c=t[a];t.hasOwnProperty(a)&&c!=null&&(n?n+=";"+a+":"+c:n=a+":"+c)}return n}function dC(e){var t,r=Tm(e);return Mt.isConst(e)||(t={onUpdate:function(n){var a=Tm(e);r!==a&&(ul.update(n,"style",a),r=a)}}),{value:r,bindings:t}}var Sm,Dm=Te(()=>{Dn();Wu();Sm=dC});function Mm(e){var t=e(),r=typeof t;if(r==="string")return t;if(!r||r!=="object")throw new Error("Unsupported type returned from class getter: "+r);var n="";for(var a in t)if(t.hasOwnProperty(a)){var c=t[a];c&&(n?n+=" "+a:n=a)}return n}function uC(e,t,r){for(var n=[],a=e.className.replace(Am,"").split(Lm),c=t.replace(Am,"").split(Lm),l={},g=c.length-1;g>=0;g--)l[c[g]]=!0;var p=a.length;for(g=0;g<p;g++){var f=a[g];l.hasOwnProperty(f)||n.push(f)}return r?n.length?r+" "+n.join(" "):r:n.join(" ")}function pC(e){var t,r=Mm(e);return Mt.isConst(e)||(t={onUpdate:function(n){var a=Mm(e);r!==a&&(n.className===r?(n.className=a,r=a):(n.className=uC(n,r,a),r=a))}}),{value:r,bindings:t}}var Am,Lm,Gm,Vm=Te(()=>{Dn();Am=/^\s+|\s+$/g,Lm=/\s+/;Gm=pC});function gC(e){return function(t){if(typeof t!="function")throw new Error("The "+e+" attribute expects a function for the value");if(Mt.isConst(t))throw new Error("The "+e+" attribute does not expect a const for the value");var r={bindings:{}};return r.bindings[e]=t,r}}var $n,Nm=Te(()=>{Dn();$n=gC});function Im(e){var t=e.length,r=new Array(t),n=new Array(t+1),a=0,c,l;for(l=0;l<t;l++){if(e[n[a]]<e[l])c=a+1;else{for(var g=1,p=a-1;g<=p;){var f=Math.ceil((g+p)/2);e[n[f]]<e[l]?g=f+1:p=f-1}c=g}r[l]=n[c-1],n[c]=l,c>a&&(a=c)}var w=new Array(a),M=n[a];for(l=a-1;l>=0;l--)w[l]=e[M],M=r[M];return w}var Pm=Te(()=>{});function hC(e,t){var r={},n,a,c=[],l=[];for(n=0;n<t.length;n++)a=t[n],r[a]=n;for(n=0;n<e.length;n++)a=e[n],r[a]===void 0&&c.push(a);var g=[];for(n=0;n<e.length;n++){a=e[n];var p=r[a];p!==void 0&&g.push(p)}var f=Im(g),w={};for(n=0;n<f.length;n++)a=t[f[n]],w[a]=!0;for(n=t.length-1;n>=0;n--)a=t[n],!w[a]&&l.push({key:a,beforeKey:t[n+1]});return{removes:c,inserts:l}}var gl,np=Te(()=>{Pm();gl=hC});function bC(e,t){return Bn(yC,{items:e,keyFunction:t.key,viewFunction:t.item})}var mC,fC,yC,Om,Fm=Te(()=>{dn();np();uo();Ia();mC=rt({viewName:"EachPlaceholder",_isDCGEachPlaceholder:!0,template:function(){return this.createElement("div",{style:this.const("display: none")})}}),fC=rt({viewName:"EachWrapper",_isDCGEachWrapper:!0,template:function(){return this.children[0]}}),yC=rt({viewName:"Each",_isDCGEach:!0,getKeys:function(){this._keyToItem={};var e=this.props.items(),t=this.props.keyFunction?e.map(this.props.keyFunction):e.slice(0);if(!this._chosenKeyType&&t.length&&(this._chosenKeyType=typeof t[0],this._chosenKeyType!=="string"&&this._chosenKeyType!=="number"))throw new Error("The key: "+JSON.stringify(t[0])+" is not a string or number");for(var r=0;r<t.length;r++){var n=t[r];if(typeof n!==this._chosenKeyType)throw new Error("Keys must be the same type. "+JSON.stringify(n)+" is not a "+this._chosenKeyType);if(n in this._keyToItem)throw new Error("The key: "+JSON.stringify(n)+" is not unique");this._keyToItem[n]=e[r]}return t},createViewForKey:function(e){var t=this._keyToItem[e],r=this.props.viewFunction.call(this,t,e),n=r;return n._isDCGView||(n=this.createElement(fC,null,r)),this._keyToView[e]=n,n},template:function(){this._keyToView={},this._keys=this.getKeys(),this._element=this.createElement(mC,null),this._siblingElements=[];for(var e=0;e<this._keys.length;e++){var t=this._keys[e],r=this.createViewForKey(t);r._parentElement=this._element._parentElement,this._siblingElements.push(r)}return this._element},detachAllRemovedViews:function(){for(var e=this._childViews,t=0,r=e.length,n,a=0;a<r;a++)n=e[a],n._will_be_unmounted_?t++:e[a-t]=n;e.splice(r-t,t)},overrideChildUpdates:function(){var e=this._keys,t=this.getKeys();this._keys=t;var r=this._element.findRootNode().parentNode,n,a,c,l,g,p,f=gl(e,t),w=[];for(n=f.removes.length-1;n>=0;n--)p=f.removes[n],w.push(this._keyToView[p]);for(w.forEach(we.willUnmount),n=0;n<f.removes.length;n++)p=f.removes[n],a=this._keyToView[p],delete this._keyToView[p],a._will_be_unmounted_=!0,r.removeChild(a.findRootNode());w.length>0&&this.detachAllRemovedViews(),w.forEach(we.onUnmount),w.forEach(we.didUnmount);var M=[];for(n=f.inserts.length-1;n>=0;n--)p=f.inserts[n].key,p in this._keyToView||(a=this.createViewForKey(p),M.push(a),we.createNodeForView(a,this));for(M.forEach(we.willMount),n=0;n<f.inserts.length;n++)g=f.inserts[n],c=this._keyToView[g.key].findRootNode(),g.beforeKey!==void 0?l=this._keyToView[g.beforeKey].findRootNode():l=null,r.insertBefore(c,l);M.forEach(we.onMount),M.forEach(we.didMount);var G=this._childViews,R=G.length-M.length;for(n=0;n<R;n++)G[n].update()}});Om=bC});var xC,wC,_m,Rm=Te(()=>{dn();np();Dn();Ia();xC=rt({viewName:"ForWrapper",template:function(){return this.children[0]}}),wC=rt({viewName:"For",_isDCGFor:!0,getKeys:function(){this._keyToItem={};var e=this.props.each();if(!Array.isArray(e))throw new Error("<For each={}> must return an array");var t=this.props.key?e.map(this.props.key):e.slice(0);if(!this._chosenKeyType&&t.length&&(this._chosenKeyType=typeof t[0],this._chosenKeyType!=="string"&&this._chosenKeyType!=="number"))throw new Error("The key: "+JSON.stringify(t[0])+" is not a string or number");for(var r=0;r<t.length;r++){var n=t[r];if(typeof n!==this._chosenKeyType)throw new Error("Keys must be the same type. "+JSON.stringify(n)+" is not a "+this._chosenKeyType);if(n in this._keyToItem)throw new Error("The key: "+JSON.stringify(n)+" is not unique");this._keyToItem[n]=e[r]}return t},createViewForKey:function(e){var t=this._keyToItem[e],r=this._viewFunction.call(this,t,e),n=r;return n._isDCGView||(n=this.createElement(xC,null,r)),this._keyToView[e]=n,n},template:function(){if(this._keyToView={},typeof this.props.each!="function")throw new Error("<For each={}> must be a function");if(this.children.length!==1)throw new Error("<For> expects a single child. You passed "+this.children.length);var e=this.children[0];if(!e||!e._isDCGElement)throw new Error("<For> expects the root node to be a DCGElement. You passed "+JSON.stringify(e));if(e._isDCGView)throw new Error("<For> expects the root node to not be a DCGView. Pass in something like <div> or <span>");if(e.children.length!==1)throw new Error("<For> expects a root node with a single child. You passed "+e.children.length);if(this._viewFunction=e.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<For> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof this._viewFunction!="function"){var t=JSON.stringify(this._viewFunction);throw new Error("<For> expects a function that constructs a DCGElement. You passed "+t)}if(Mt.isConst(this._viewFunction))throw new Error("<For> expects a function that constructs a DCGElement. You passed a constant");this._keys=this.getKeys();for(var r=[],n=0;n<this._keys.length;n++){var a=this._keys[n],c=this.createViewForKey(a);c._parentElement=this,r.push(c)}return e.children=r,e},detachAllRemovedViews:function(){for(var e=this._childViews,t=0,r=e.length,n,a=0;a<r;a++)n=e[a],n._will_be_unmounted_?t++:e[a-t]=n;e.splice(r-t,t)},overrideChildUpdates:function(){var e=this._keys,t=this.getKeys();this._keys=t;var r=this.findRootNode(),n,a,c,l,g,p,f=gl(e,t),w=[];for(n=f.removes.length-1;n>=0;n--)p=f.removes[n],w.push(this._keyToView[p]);for(w.forEach(we.willUnmount),n=0;n<f.removes.length;n++)p=f.removes[n],a=this._keyToView[p],delete this._keyToView[p],a._will_be_unmounted_=!0,r.removeChild(a.findRootNode());w.length>0&&this.detachAllRemovedViews(),w.forEach(we.onUnmount),w.forEach(we.didUnmount);var M=[];for(n=f.inserts.length-1;n>=0;n--)p=f.inserts[n].key,p in this._keyToView||(a=this.createViewForKey(p),M.push(a),we.createNodeForView(a,this));for(M.forEach(we.willMount),n=0;n<f.inserts.length;n++)g=f.inserts[n],c=this._keyToView[g.key].findRootNode(),g.beforeKey!==void 0?l=this._keyToView[g.beforeKey].findRootNode():l=null,r.insertBefore(c,l);M.forEach(we.onMount),M.forEach(we.didMount);var G=this._childViews,R=G.length-M.length;for(n=0;n<R;n++)G[n].update()}}),_m=wC});var vC,kC,hl,ap=Te(()=>{dn();Dn();Ia();vC=rt({viewName:"SwitchWrapper",_isDCGSwitchWrapper:!0,template:function(){return this.children[0]}}),kC=rt({viewName:"Switch",_isDCGSwitch:!0,updateKey:function(){this._key=this.props.key()},createView:function(){var e=this._viewFunction(this._key);e==null&&(e=this.createElement("div",{style:this.const("display: none")}));var t=this.createElement(vC,null,e);return t._parentElement=this,t},template:function(){if(this._key=void 0,typeof this.props.key!="function")throw new Error("<Switch key={}> must be a function");if(this.children.length!==1)throw new Error("<Switch> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof this._viewFunction!="function"){var e=JSON.stringify(this._viewFunction);throw new Error("<Switch> expects a function that constructs a DCGElement. You passed "+e)}if(Mt.isConst(this._viewFunction))throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a constant");return this.updateKey(),this.createView()},overrideChildUpdates:function(){var e=this._key;this.updateKey();var t=this._key;if(e===t)this._element.update();else{var r=this.findRootNode(),n=document.createTextNode("");r.parentNode.insertBefore(n,r),we.willUnmount(this._element),this._childViews=[],r.parentNode.removeChild(r),we.onUnmount(this._element),we.didUnmount(this._element),this._element=this.createView();var a=we.createNodeForView(this._element,this);we.willMount(this._element),n.parentNode.insertBefore(a,n),n.parentNode.removeChild(n),we.onMount(this._element),we.didMount(this._element)}}}),hl=kC});function qm(e,t,r){return Bn(CC,{getCase:function(){var n=t();return e?n&&n[e]:n},buildChildView:function(n){var a=r[n];if(a)return a(t)}})}function TC(e,t){return typeof e=="string"?qm.bind(this,e,t):qm(void 0,e,t)}var EC,CC,ml,ip=Te(()=>{dn();Ia();uo();EC=rt({viewName:"SwitchUnionWrapper",_isDCGSwitchUnionWrapper:!0,template:function(){return this.children[0]}}),CC=rt({viewName:"SwitchUnion",_isDCGSwitchUnion:!0,updateCase:function(){this._case=this.props.getCase()},createView:function(){var e=this.props.buildChildView(this._case);e==null&&(e=this.createElement("div",{style:this.const("display: none")}));var t=this.createElement(EC,null,e);return t._parentElement=this,t},template:function(){return this._case=void 0,this.updateCase(),this.createView()},overrideChildUpdates:function(){var e=this._case;this.updateCase();var t=this._case;if(e===t)this._element.update();else{var r=this.findRootNode(),n=document.createTextNode("");r.parentNode.insertBefore(n,r),we.willUnmount(this._element),this._childViews=[],r.parentNode.removeChild(r),we.onUnmount(this._element),we.didUnmount(this._element),this._element=this.createView();var a=we.createNodeForView(this._element,this);we.willMount(this._element),n.parentNode.insertBefore(a,n),n.parentNode.removeChild(n),we.onMount(this._element),we.didMount(this._element)}}});ml=TC});var SC,Bm,Um=Te(()=>{dn();Dn();ap();SC=rt({viewName:"If",_isDCGIf:!0,template:function(){if(typeof this.props.predicate!="function")throw new Error("<If predicate={}> must be a function");if(this.children.length!==1)throw new Error("<If> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<If> expects a function that constructs a DCGElement. You passed a DCGElement directly");if(typeof this._viewFunction!="function"){var e=JSON.stringify(this._viewFunction);throw new Error("<If> expects a function that constructs a DCGElement. You passed "+e)}if(Mt.isConst(this._viewFunction))throw new Error("<If> expects a function that constructs a DCGElement. You passed a constant");var t=(function(){return!!this.props.predicate()}).bind(this),r=(function(n){if(n)return this._viewFunction()}).bind(this);return this.createElement(hl,{key:t},r)}}),Bm=SC});function AC(e,t){return Bn(MC,{isDefined:function(){var r=e();return r!=null},buildChildView:function(){return t(e)}})}var DC,MC,$m,zm=Te(()=>{dn();Ia();uo();DC=rt({viewName:"IfDefinedWrapper",_isDCGIfDefinedWrapper:!0,template:function(){return this.children[0]}}),MC=rt({viewName:"IfDefined",_isDCGIfDefined:!0,updateIsDefined:function(){this._isDefined=this.props.isDefined()},createView:function(){var e;this._isDefined&&(e=this.props.buildChildView()),e==null&&(e=this.createElement("div",{style:this.const("display: none")}));var t=this.createElement(DC,null,e);return t._parentElement=this,t},template:function(){return this._isDefined=void 0,this.updateIsDefined(),this.createView()},overrideChildUpdates:function(){var e=this._isDefined;this.updateIsDefined();var t=this._isDefined;if(e===t)this._element.update();else{var r=this.findRootNode(),n=document.createTextNode("");r.parentNode.insertBefore(n,r),we.willUnmount(this._element),this._childViews=[],r.parentNode.removeChild(r),we.onUnmount(this._element),we.didUnmount(this._element),this._element=this.createView();var a=we.createNodeForView(this._element,this);we.willMount(this._element),n.parentNode.insertBefore(a,n),n.parentNode.removeChild(n),we.onMount(this._element),we.didMount(this._element)}}});$m=AC});function LC(e,t){var r=ml(function(){return e()?"true":"false"},t);return r._viewName="IfElse",r}var Km,Wm=Te(()=>{ip();Km=LC});var Hm,jm=Te(()=>{dn();po();Hm=rt({viewName:"Textarea",computeValue:function(){var e=this.props.value();return e==null?"":e+""},template:function(){if(!this.props.value)throw new Error('<Textarea> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Textarea> expects an "onInput={}" prop');var e=Un({},this.props,{onInput:(function(t){this.props.onInput(t.target.value),this._isMounted&&this.update()}).bind(this)});return this.props.disabled&&(e.disabled=(function(){if(this.props.disabled())return!0}).bind(this)),delete e.value,this.createElement("textarea",e,this.const(this.computeValue()))},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeValue();this.rootDOM.value!==e&&(this.rootDOM.value=e)}})});var Ym,Jm=Te(()=>{dn();po();Ym=rt({viewName:"Input",computeValue:function(){var e=this.props.value();return e==null?"":e+""},template:function(){if(!this.props.value)throw new Error('<Input> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Input> expects an "onInput={}" prop');var e=Un({},this.props,{value:this.const(this.computeValue()),onInput:(function(t){this.props.onInput(t.target.value),this._isMounted&&this.update()}).bind(this)});return this.props.onEnterPressed&&(e.onKeypress=(function(t){t.which===13&&this.props.onEnterPressed()}).bind(this)),this.props.disabled&&(e.disabled=(function(){if(this.props.disabled())return!0}).bind(this)),e.hasOwnProperty("tabindex")||(e.tabindex=(function(){return this.props.disabled&&this.props.disabled()?"-1":"0"}).bind(this)),this.createElement("input",e)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeValue();this.rootDOM.value!==e&&(this.rootDOM.value=e)}})});var Qm,Xm=Te(()=>{dn();po();Qm=rt({viewName:"Checkbox",computeChecked:function(){return!!this.props.checked()},template:function(){if(!this.props.checked)throw new Error('<Checkbox> expects a "checked={}" prop');if(!this.props.onChange)throw new Error('<Checkbox> expects an "onChange={}" prop');var e=Un({},this.props,{type:this.const("checkbox"),checked:this.const(this.computeChecked()?"checked":void 0),onChange:(function(t){this.props.onChange(t.target.checked),this._isMounted&&this.update()}).bind(this)});return this.createElement("input",e)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeChecked();this.rootDOM.checked!==e&&(this.rootDOM.checked=e)}})});var Zm,ef=Te(()=>{Fm();Rm();ap();ip();Um();zm();Wm();jm();Jm();Xm();Zm={Each:Om,For:_m,Switch:hl,SwitchUnion:ml,If:Bm,IfDefined:$m,IfElse:Km,Textarea:Hm,Input:Ym,Checkbox:Qm}});var tf,rf=Te(()=>{dn();tf=rt({template:function(){}})});var GC,un,Mn,nf=Te(()=>{uo();dn();Ia();po();Dn();ju();Dm();Vm();Nm();ef();Cs();Yu();rf();GC=pl.enableSpanWrapping,un={createElement:Bn,createClass:rt,mountToNode:we.mountToNode,unmountFromNode:we.unmountFromNode,spread:Un,const:Mt.makeConst,isConst:Mt.isConst,addCustomAttribute:ks.add,Components:Zm,addWarningHandler:qn.addWarningHandler,removeWarningHandler:qn.removeWarningHandler,_warn:qn.warn,enableSpanWrapping:GC,Class:tf};un.addCustomAttribute("style",Sm);un.addCustomAttribute("class",Gm);un.addCustomAttribute("willMount",$n("willMount"));un.addCustomAttribute("onMount",$n("onMount"));un.addCustomAttribute("didMount",$n("didMount"));un.addCustomAttribute("willUnmount",$n("willUnmount"));un.addCustomAttribute("onUnmount",$n("onUnmount"));un.addCustomAttribute("didUnmount",$n("didUnmount"));un.addCustomAttribute("willUpdate",$n("willUpdate"));un.addCustomAttribute("onUpdate",$n("onUpdate"));un.addCustomAttribute("didUpdate",$n("didUpdate"));Mn=un});function VC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}function NC(){var e=window.Desmos&&window.Desmos.commit;return e}function IC(){var e="production";if(location&&location.hostname){var t=location.hostname,r=t.split("."),n=r.slice(0,r.length-2).join("."),a=r.slice(r.length-2).join(".");a==="desmos.com"&&(!n||n==="www"?e="production":e=n)}return e}function of(e){if(!go){var t=0,r=VC();go=e({apiKey:"7f7807097671acbc4557e64bbf5eb529",maxBreadcrumbs:40,appVersion:NC(),releaseStage:IC(),consoleBreadcrumbsEnabled:!1,beforeSend:function(n){if(n.errorClass){for(let a of af)if(n.errorClass.indexOf(a)!==-1){n.ignore();return}}if(n.errorMessage){for(let a of af)if(n.errorMessage.indexOf(a)!==-1){n.ignore();return}}op&&op(n),n.isIgnored()||(t+=1,n.metaData.errorNumber=t,n.metaData.pageLoadId=r)}})}}function sf(e,t){go&&go.notify(e,t)}function fl(e,t,r,n){if(t){t=ye({},t);for(var a in t)try{t[a]=JSON.stringify(t[a],null,2)}catch(c){t[a]="[[could not stringify]]"}}go&&go.leaveBreadcrumb(e,t,r,n)}function cf(e){op=e}var go,op,af,ho=Te(()=>{af=["UnhandledRejection","lnrAppboy","socratic","MyAppGet","SymBrowser_","mobincube_","_avast_submit","Cannot redefine property: googletag","jcarousel","SyntaxError: Unexpected identifier 'script'","__gCrWeb.autofill.extractForms","BrowseITEXT","Can't find variable: removeAllHighlights","aAttribruteValue.parentNode.getAttribute","vid_mate_check","GetImageTagSrcFromPoint","Can't find variable: didEnterViewPort","tinyMCE is not defined"]});function lf(e,t){let n=new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(e);return n?decodeURIComponent(n[1].replace(/\+/g,"%20")):null}function PC(e,t){return new RegExp("[?|&]"+t+"(=|&|;|$)").test(e)}function OC(e,t,r){if(t!==encodeURIComponent(t))throw new Error("Programming error: parameter name should be URL-safe without encoding.");let n=encodeURIComponent(r);if(e.length){let a=e.split("#"),c=/\?/.test(e)?`${a[0]}&${t}=${n}`:`${a[0]}?${t}=${n}`;return a[1]!==void 0?`${c}#${a[1]}`:c}else return`?${t}=${n}`}function FC(e,t,r){let a=new RegExp("([?|&])"+t+"=([^&;]+?)(&|#|;|$)").exec(e);if(!a)return e;let c=a[1],l=a[2],g=`${c}${t}=${l}`,p=encodeURIComponent(r),f=`${c}${t}=${p}`;return e.replace(g,f)}function yl(e,t,r){return PC(e,t)?FC(e,t,r):OC(e,t,r)}var bl=Te(()=>{});function $C(e){let t=BC.exec(e);if(t){let r=t[1];return!UC.test(r)}return!1}function xl(e,t){let r=co(),n="";return t!==void 0?n=t:n=r.lang?""+r.lang:"",e===""||n===""||RC.test(e)||qC.test(e)||$C(e)?e:yl(e,"lang",n)}var RC,qC,BC,UC,df=Te(()=>{ll();bl();RC=/lang=[A-Za-z]+/,qC=/(cl|learn|help).desmos.com/,BC=/^(?:https?:)?(?:\/\/)?([^\s\/\?]+)/i,UC=/(^desmos\.com$)|(\.desmos.com$)/});var uf=Te(()=>{});var me=La((AL,pf)=>{nf();lr();ho();df();uf();Mn.addWarningHandler(e=>sf(e));Mn.addCustomAttribute("href",function(e){let t=xl(e()),r={value:`${xl(e())}`,bindings:{onMount(n){if(!n.matches("a")&&!n.matches("use"))throw new Error("Cannot have an href on a non-link element.")}}};return r.bindings.onUpdate=function(n){let a=xl(e());t!==a&&(t=a,n.setAttribute("href",a))},r});Mn.addCustomAttribute("onTap",e=>({value:"",bindings:{onMount(t){ee(t).on("dcg-tap",e)}}}));Mn.addCustomAttribute("ignoreRealClick",e=>({bindings:{onMount(t){ee(t).on("click",function(r){e()&&r.preventDefault()})}}}));Mn.addCustomAttribute("onTapStart",e=>({bindings:{onMount(t){ee(t).on("dcg-tapstart",e)}}}));Mn.addCustomAttribute("onTapMove",e=>({bindings:{onMount(t){ee(t).on("dcg-tapmove",e)}}}));Mn.addCustomAttribute("onTapEnd",e=>({bindings:{onMount(t){ee(t).on("dcg-tapend",e)}}}));Mn.addCustomAttribute("onLongHold",e=>({bindings:{onMount(t){ee(t).on("dcg-longhold",e)}}}));Mn.addCustomAttribute("manageFocus",function(e){return e()===void 0?{}:{bindings:{onMount(t){e().shouldBeFocused()&&t.focus(),t.onfocus=function(r){e().shouldBeFocused()||e().onFocusedChanged(!0,r)},t.onblur=function(r){e().shouldBeFocused()&&e().onFocusedChanged(!1,r)}},onUpdate(t){let r=e().shouldBeFocused(),n=document.activeElement===t;r&&!n?t.focus():n&&!r&&t.blur()},willUnmount(t){t.onfocus=null,t.onblur=null}}}});pf.exports=Mn});var Pv=La((Iv,Yg)=>{(function(e){if(typeof Iv=="object"&&typeof Yg!="undefined")Yg.exports=e();else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.bugsnag=e()}})(function(){var e,t,r,n=function(m,y,x){for(var k=x,S=0,I=m.length;S<I;S++)k=y(k,m[S],S,m);return k},a=function(m,y){return n(m,function(x,k,S,I){return y(k,S,I)?x.concat(k):x},[])},c=function(m,y){return n(m,function(x,k,S,I){return x.concat(y(k,S,I))},[])},l=function(m,y){return n(m,function(x,k,S,I){return x===!0||k===y},!1)},g=!{toString:null}.propertyIsEnumerable("toString"),p=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(m){var y=[],x;for(x in m)Object.prototype.hasOwnProperty.call(m,x)&&y.push(x);if(!g)return y;for(var k=0,S=p.length;k<S;k++)Object.prototype.hasOwnProperty.call(m,p[k])&&y.push(p[k]);return y},w=function(m){return Object.prototype.toString.call(m)==="[object Array]"},M=function(m){return m<10?"0"+m:m},G=function(){var m=new Date;return m.getUTCFullYear()+"-"+M(m.getUTCMonth()+1)+"-"+M(m.getUTCDate())+"T"+M(m.getUTCHours())+":"+M(m.getUTCMinutes())+":"+M(m.getUTCSeconds())+"."+(m.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},R={map:c,reduce:n,filter:a,includes:l,keys:f,isArray:w,isoDate:G},ue={};ue.intRange=function(m,y){return m===void 0&&(m=1),y===void 0&&(y=1/0),function(x){return typeof x=="number"&&parseInt(""+x,10)===x&&x>=m&&x<=y}},ue.stringWithLength=function(m){return typeof m=="string"&&!!m.length};var pe={},_e=R.filter,$e=R.reduce,Le=R.keys,Re=R.isArray,Je=R.includes,It=ue.intRange,it=ue.stringWithLength;pe.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:it},appVersion:{defaultValue:function(){return null},message:"should be a string",validate:function(m){return m===null||it(m)}},appType:{defaultValue:function(){return null},message:"should be a string",validate:function(m){return m===null||it(m)}},autoNotify:{defaultValue:function(){return!0},message:"should be true|false",validate:function(m){return m===!0||m===!1}},beforeSend:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:function(m){return typeof m=="function"||Re(m)&&_e(m,function(y){return typeof y=="function"}).length===m.length}},endpoints:{defaultValue:function(){return{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}},message:"should be an object containing endpoint URLs { notify, sessions }. sessions is optional if autoCaptureSessions=false",validate:function(m,y){return m&&typeof m=="object"&&it(m.notify)&&(y.autoCaptureSessions===!1||it(m.sessions))&&_e(Le(m),function(x){return!Je(["notify","sessions"],x)}).length===0}},autoCaptureSessions:{defaultValue:function(m,y){return y.endpoints===void 0||!!y.endpoints&&!!y.endpoints.sessions},message:"should be true|false",validate:function(m){return m===!0||m===!1}},notifyReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(m){return m===null||Re(m)&&_e(m,function(y){return typeof y=="string"}).length===m.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(m){return typeof m=="string"&&m.length}},maxBreadcrumbs:{defaultValue:function(){return 20},message:"should be a number \u226440",validate:function(m){return It(0,40)(m)}},autoBreadcrumbs:{defaultValue:function(){return!0},message:"should be true|false",validate:function(m){return typeof m=="boolean"}},user:{defaultValue:function(){return null},message:"(object) user should be an object",validate:function(m){return typeof m=="object"}},metaData:{defaultValue:function(){return null},message:"should be an object",validate:function(m){return typeof m=="object"}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(m){return!m||m&&$e(["debug","info","warn","error"],function(y,x){return y&&typeof m[x]=="function"},!0)}},filters:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(m){return Re(m)&&m.length===_e(m,function(y){return typeof y=="string"||y&&typeof y.test=="function"}).length}}},pe.mergeDefaults=function(m,y){if(!m||!y)throw new Error("opts and schema objects are required");return $e(Le(y),function(x,k){return x[k]=m[k]!==void 0?m[k]:y[k].defaultValue(m[k],m),x},{})},pe.validate=function(m,y){if(!m||!y)throw new Error("opts and schema objects are required");var x=$e(Le(y),function(k,S){return y[S].validate(m[S],m)?k:k.concat({key:S,message:y[S].message,value:m[S]})},[]);return{valid:!x.length,errors:x}};function ge(){return ge=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},ge.apply(this,arguments)}var ta=pe.schema,Q=R.map,ce=ue.stringWithLength,Ze={releaseStage:{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"},message:"should be set",validate:ce},logger:ge({},ta.logger,{defaultValue:function(){return typeof console!="undefined"&&typeof console.debug=="function"?nn():void 0}})},nn=function(){var m={},y=console.log;return Q(["debug","info","warn","error"],function(x){var k=console[x];m[x]=typeof k=="function"?k.bind(console,"[bugsnag]"):y.bind(console,"[bugsnag]")}),m},Ht=R.isoDate,gr=function(){function m(x,k,S,I){x===void 0&&(x="[anonymous]"),k===void 0&&(k={}),S===void 0&&(S="manual"),I===void 0&&(I=Ht()),this.type=S,this.name=x,this.metaData=k,this.timestamp=I}var y=m.prototype;return y.toJSON=function(){return{type:this.type,name:this.name,timestamp:this.timestamp,metaData:this.metaData}},m}(),jt=gr,C=function(m,y,x){var k=m.length,S=0,I=function(){if(S>=k)return x(null,!1);y(m[S],function(N,te){if(N)return x(N,!1);if(te===!0)return x(null,!0);S++,I()})};I()},an=function(m){return m.app&&typeof m.app.releaseStage=="string"?m.app.releaseStage:m.config.releaseStage},Eu=Cu;function Cu(m){switch(Object.prototype.toString.call(m)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return m instanceof Error}}var Cc=Eu,Tc=function(m,y){return function(x,k){if(typeof x!="function")return k(null,!1);try{if(x.length!==2){var S=x(m);return S&&typeof S.then=="function"?S.then(function(I){return setTimeout(function(){return k(null,wn(m,I))},0)},function(I){setTimeout(function(){return y(I),k(null,!1)})}):k(null,wn(m,S))}x(m,function(I,N){if(I)return y(I),k(null,!1);k(null,wn(m,N))})}catch(I){y(I),k(null,!1)}}},wn=function(m,y){return m.isIgnored()||y===!1},hr={};(function(m,y){"use strict";typeof e=="function"&&e.amd?e("stackframe",[],y):typeof hr=="object"?hr=y():m.StackFrame=y()})(this,function(){"use strict";function m(Y){return!isNaN(parseFloat(Y))&&isFinite(Y)}function y(Y){return Y.charAt(0).toUpperCase()+Y.substring(1)}function x(Y){return function(){return this[Y]}}var k=["isConstructor","isEval","isNative","isToplevel"],S=["columnNumber","lineNumber"],I=["fileName","functionName","source"],N=["args"],te=k.concat(S,I,N);function Z(Y){if(Y instanceof Object)for(var He=0;He<te.length;He++)Y.hasOwnProperty(te[He])&&Y[te[He]]!==void 0&&this["set"+y(te[He])](Y[te[He]])}Z.prototype={getArgs:function(){return this.args},setArgs:function(Y){if(Object.prototype.toString.call(Y)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=Y},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(Y){if(Y instanceof Z)this.evalOrigin=Y;else if(Y instanceof Object)this.evalOrigin=new Z(Y);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var Y=this.getFunctionName()||"{anonymous}",He="("+(this.getArgs()||[]).join(",")+")",Rn=this.getFileName()?"@"+this.getFileName():"",Cn=m(this.getLineNumber())?":"+this.getLineNumber():"",rr=m(this.getColumnNumber())?":"+this.getColumnNumber():"";return Y+He+Rn+Cn+rr}};for(var ke=0;ke<k.length;ke++)Z.prototype["get"+y(k[ke])]=x(k[ke]),Z.prototype["set"+y(k[ke])]=function(Y){return function(He){this[Y]=!!He}}(k[ke]);for(var se=0;se<S.length;se++)Z.prototype["get"+y(S[se])]=x(S[se]),Z.prototype["set"+y(S[se])]=function(Y){return function(He){if(!m(He))throw new TypeError(Y+" must be a Number");this[Y]=Number(He)}}(S[se]);for(var et=0;et<I.length;et++)Z.prototype["get"+y(I[et])]=x(I[et]),Z.prototype["set"+y(I[et])]=function(Y){return function(He){this[Y]=String(He)}}(I[et]);return Z});var zi={};(function(m,y){"use strict";typeof e=="function"&&e.amd?e("error-stack-parser",["stackframe"],y):typeof zi=="object"?zi=y(hr):m.ErrorStackParser=y(m.StackFrame)})(this,function(y){"use strict";var x=/(^|@)\S+\:\d+/,k=/^\s*at .*(\S+\:\d+|\(native\))/m,S=/^(eval@)?(\[native code\])?$/;return{parse:function(N){if(typeof N.stacktrace!="undefined"||typeof N["opera#sourceloc"]!="undefined")return this.parseOpera(N);if(N.stack&&N.stack.match(k))return this.parseV8OrIE(N);if(N.stack)return this.parseFFOrSafari(N);throw new Error("Cannot parse given Error object")},extractLocation:function(N){if(N.indexOf(":")===-1)return[N];var te=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,Z=te.exec(N.replace(/[\(\)]/g,""));return[Z[1],Z[2]||void 0,Z[3]||void 0]},parseV8OrIE:function(N){var te=N.stack.split(`
`).filter(function(Z){return!!Z.match(k)},this);return te.map(function(Z){Z.indexOf("(eval ")>-1&&(Z=Z.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var ke=Z.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),se=this.extractLocation(ke.pop()),et=ke.join(" ")||void 0,Y=["eval","<anonymous>"].indexOf(se[0])>-1?void 0:se[0];return new y({functionName:et,fileName:Y,lineNumber:se[1],columnNumber:se[2],source:Z})},this)},parseFFOrSafari:function(N){var te=N.stack.split(`
`).filter(function(Z){return!Z.match(S)},this);return te.map(function(Z){if(Z.indexOf(" > eval")>-1&&(Z=Z.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),Z.indexOf("@")===-1&&Z.indexOf(":")===-1)return new y({functionName:Z});var ke=/((.*".+"[^@]*)?[^@]*)(?:@)/,se=Z.match(ke),et=se&&se[1]?se[1]:void 0,Y=this.extractLocation(Z.replace(ke,""));return new y({functionName:et,fileName:Y[0],lineNumber:Y[1],columnNumber:Y[2],source:Z})},this)},parseOpera:function(N){return!N.stacktrace||N.message.indexOf(`
`)>-1&&N.message.split(`
`).length>N.stacktrace.split(`
`).length?this.parseOpera9(N):N.stack?this.parseOpera11(N):this.parseOpera10(N)},parseOpera9:function(N){for(var te=/Line (\d+).*script (?:in )?(\S+)/i,Z=N.message.split(`
`),ke=[],se=2,et=Z.length;se<et;se+=2){var Y=te.exec(Z[se]);Y&&ke.push(new y({fileName:Y[2],lineNumber:Y[1],source:Z[se]}))}return ke},parseOpera10:function(N){for(var te=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,Z=N.stacktrace.split(`
`),ke=[],se=0,et=Z.length;se<et;se+=2){var Y=te.exec(Z[se]);Y&&ke.push(new y({functionName:Y[3]||void 0,fileName:Y[2],lineNumber:Y[1],source:Z[se]}))}return ke},parseOpera11:function(N){var te=N.stack.split(`
`).filter(function(Z){return!!Z.match(x)&&!Z.match(/^Error created at/)},this);return te.map(function(Z){var ke=Z.split("@"),se=this.extractLocation(ke.pop()),et=ke.shift()||"",Y=et.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0,He;et.match(/\(([^\)]*)\)/)&&(He=et.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var Rn=He===void 0||He==="[arguments not available]"?void 0:He.split(",");return new y({functionName:Y,args:Rn,fileName:se[0],lineNumber:se[1],columnNumber:se[2],source:Z})},this)}}});var Tu=zi,vn=function(m){return!!m&&(!!m.stack||!!m.stacktrace||!!m["opera#sourceloc"])&&typeof(m.stack||m.stacktrace||m["opera#sourceloc"])=="string"&&m.stack!==m.name+": "+m.message},er={};(function(m,y){"use strict";typeof e=="function"&&e.amd?e("stack-generator",["stackframe"],y):typeof er=="object"?er=y(hr):m.StackGenerator=y(m.StackFrame)})(this,function(m){return{backtrace:function(x){var k=[],S=10;typeof x=="object"&&typeof x.maxStackSize=="number"&&(S=x.maxStackSize);for(var I=arguments.callee;I&&k.length<S&&I.arguments;){for(var N=new Array(I.arguments.length),te=0;te<N.length;++te)N[te]=I.arguments[te];/function(?:\s+([\w$]+))+\s*\(/.test(I.toString())?k.push(new m({functionName:RegExp.$1||void 0,args:N})):k.push(new m({args:N}));try{I=I.caller}catch(Z){break}}return k}}});function Ki(){return Ki=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},Ki.apply(this,arguments)}var Wi=R.reduce,Sa=R.filter,tr=function(){function m(x,k,S,I,N){S===void 0&&(S=[]),I===void 0&&(I=Xa()),this.__isBugsnagReport=!0,this._ignored=!1,this._handledState=I,this.app=void 0,this.apiKey=void 0,this.breadcrumbs=[],this.context=void 0,this.device=void 0,this.errorClass=Sc(x,"[no error class]"),this.errorMessage=Sc(k,"[no error message]"),this.groupingHash=void 0,this.metaData={},this.request=void 0,this.severity=this._handledState.severity,this.stacktrace=Wi(S,function(te,Z){var ke=Su(Z);try{return JSON.stringify(ke)==="{}"?te:te.concat(ke)}catch(se){return te}},[]),this.user=void 0,this.session=void 0,this.originalError=N}var y=m.prototype;return y.ignore=function(){this._ignored=!0},y.isIgnored=function(){return this._ignored},y.updateMetaData=function(k){var S;if(!k)return this;var I;return(arguments.length<=1?void 0:arguments[1])===null?this.removeMetaData(k):(arguments.length<=2?void 0:arguments[2])===null?this.removeMetaData(k,arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]):(typeof(arguments.length<=1?void 0:arguments[1])=="object"&&(I=arguments.length<=1?void 0:arguments[1]),typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(I=(S={},S[arguments.length<=1?void 0:arguments[1]]=arguments.length<=2?void 0:arguments[2],S)),I?(this.metaData[k]||(this.metaData[k]={}),this.metaData[k]=Ki({},this.metaData[k],I),this):this)},y.removeMetaData=function(k,S){return typeof k!="string"?this:S?this.metaData[k]?(delete this.metaData[k][S],this):this:(delete this.metaData[k],this)},y.toJSON=function(){return{payloadVersion:"4",exceptions:[{errorClass:this.errorClass,message:this.errorMessage,stacktrace:this.stacktrace,type:"browserjs"}],severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,breadcrumbs:this.breadcrumbs,context:this.context,user:this.user,metaData:this.metaData,groupingHash:this.groupingHash,request:this.request,session:this.session}},m}(),Su=function(m){var y={file:m.fileName,method:Du(m.functionName),lineNumber:m.lineNumber,columnNumber:m.columnNumber,code:void 0,inProject:void 0};return y.lineNumber>-1&&!y.file&&!y.method&&(y.file="global code"),y},Du=function(m){return/^global code$/i.test(m)?"global code":m},Xa=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},Sc=function(m,y){return typeof m=="string"&&m?m:y};tr.getStacktrace=function(m,y,x){return y===void 0&&(y=0),x===void 0&&(x=0),vn(m)?Tu.parse(m).slice(y):Sa(er.backtrace(),function(k){return(k.functionName||"").indexOf("StackGenerator$$")===-1}).slice(1+x)},tr.ensureReport=function(m,y,x){if(y===void 0&&(y=0),x===void 0&&(x=0),m.__isBugsnagReport)return m;try{var k=tr.getStacktrace(m,y,1+x);return new tr(m.name,m.message,k,void 0,m)}catch(S){return new tr(m.name,m.message,[],void 0,m)}};var Hi=tr,rs=function(y,x){var k="000000000"+y;return k.substr(k.length-x)},Ee=typeof window=="object"?window:self,Dc=0;for(var Mc in Ee)Object.hasOwnProperty.call(Ee,Mc)&&Dc++;var Mu=navigator.mimeTypes?navigator.mimeTypes.length:0,Au=rs((Mu+navigator.userAgent.length).toString(36)+Dc.toString(36),4),On=function(){return Au},mr=0,ns=4,as=36,fr=Math.pow(as,ns);function Ac(){return rs((Math.random()*fr<<0).toString(as),ns)}function Lc(){return mr=mr<fr?mr:0,mr++,mr-1}function Da(){var m="c",y=new Date().getTime().toString(as),x=rs(Lc().toString(as),ns),k=On(),S=Ac()+Ac();return m+y+x+k+S}Da.fingerprint=On;var Lu=Da,Gu=R.isoDate,Gc=function(){function m(){this.id=Lu(),this.startedAt=Gu(),this._handled=0,this._unhandled=0}var y=m.prototype;return y.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},y.trackError=function(k){this[k._handledState.unhandled?"_unhandled":"_handled"]+=1},m}(),is=Gc;function on(){return on=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},on.apply(this,arguments)}var St=R.map,Pt=R.includes,yr=R.isArray,Za="Usage error.",Rr="Bugsnag usage error.",Cr=function(){function m(x){if(!x||!x.name||!x.version||!x.url)throw new Error("`notifier` argument is required");this.notifier=x,this._configured=!1,this._opts={},this.config={},this._delivery={sendSession:function(){},sendReport:function(){}},this._logger={debug:function(){},info:function(){},warn:function(){},error:function(){}},this._plugins={},this._session=null,this.breadcrumbs=[],this.app={},this.context=void 0,this.device=void 0,this.metaData=void 0,this.request=void 0,this.user={},this.BugsnagClient=m,this.BugsnagReport=Hi,this.BugsnagBreadcrumb=jt,this.BugsnagSession=is;var k=this,S=this.notify;this.notify=function(){return S.apply(k,arguments)}}var y=m.prototype;return y.setOptions=function(k){this._opts=on({},this._opts,k)},y.configure=function(k){k===void 0&&(k=pe.schema);var S=pe.mergeDefaults(this._opts,k),I=pe.validate(S,k);if(!I.valid)throw new Error(Vc(I.errors));return typeof S.beforeSend=="function"&&(S.beforeSend=[S.beforeSend]),S.appVersion&&(this.app.version=S.appVersion),S.appType&&(this.app.type=S.appType),S.metaData&&(this.metaData=S.metaData),S.user&&(this.user=S.user),S.logger&&this.logger(S.logger),this.config=on({},this.config,S),this._configured=!0,this},y.use=function(k){if(!this._configured)throw new Error("client not configured");k.configSchema&&this.configure(k.configSchema);for(var S=arguments.length,I=new Array(S>1?S-1:0),N=1;N<S;N++)I[N-1]=arguments[N];var te=k.init.apply(k,[this].concat(I));return k.name&&(this._plugins["~"+k.name+"~"]=te),this},y.getPlugin=function(k){return this._plugins["~"+k+"~"]},y.delivery=function(k){return this._delivery=k,this},y.logger=function(k,S){return this._logger=k,this},y.sessionDelegate=function(k){return this._sessionDelegate=k,this},y.startSession=function(){return this._sessionDelegate?this._sessionDelegate.startSession(this):(this._logger.warn("No session implementation is installed"),this)},y.leaveBreadcrumb=function(k,S,I,N){if(!this._configured)throw new Error("client not configured");if(k=k||void 0,I=typeof I=="string"?I:void 0,N=typeof N=="string"?N:void 0,S=typeof S=="object"&&S!==null?S:void 0,!(typeof k!="string"&&!S)){var te=new jt(k,S,I,N);return this.breadcrumbs.push(te),this.breadcrumbs.length>this.config.maxBreadcrumbs&&(this.breadcrumbs=this.breadcrumbs.slice(this.breadcrumbs.length-this.config.maxBreadcrumbs)),this}},y.notify=function(k,S,I){var N=this;if(S===void 0&&(S={}),I===void 0&&(I=function(){}),!this._configured)throw new Error("client not configured");var te=an(this),Z=ji(k,S,this._logger),ke=Z.err,se=Z.errorFramesToSkip,et=Z._opts;et&&(S=et),(typeof S!="object"||S===null)&&(S={});var Y=Hi.ensureReport(ke,se,2);if(Y.app=on({},{releaseStage:te},Y.app,this.app),Y.context=Y.context||S.context||this.context||void 0,Y.device=on({},Y.device,this.device,S.device),Y.request=on({},Y.request,this.request,S.request),Y.user=on({},Y.user,this.user,S.user),Y.metaData=on({},Y.metaData,this.metaData,S.metaData),Y.breadcrumbs=this.breadcrumbs.slice(0),this._session&&(this._session.trackError(Y),Y.session=this._session),S.severity!==void 0&&(Y.severity=S.severity,Y._handledState.severityReason={type:"userSpecifiedSeverity"}),yr(this.config.notifyReleaseStages)&&!Pt(this.config.notifyReleaseStages,te))return this._logger.warn("Report not sent due to releaseStage/notifyReleaseStages configuration"),I(null,Y);var He=Y.severity,Rn=[].concat(S.beforeSend).concat(this.config.beforeSend),Cn=function(rr){N._logger.error("Error occurred in beforeSend callback, continuing anyway\u2026"),N._logger.error(rr)};C(Rn,Tc(Y,Cn),function(rr,ro){if(rr&&Cn(rr),ro)return N._logger.debug("Report not sent due to beforeSend callback"),I(null,Y);N.config.autoBreadcrumbs&&N.leaveBreadcrumb(Y.errorClass,{errorClass:Y.errorClass,errorMessage:Y.errorMessage,severity:Y.severity},"error"),He!==Y.severity&&(Y._handledState.severityReason={type:"userCallbackSetSeverity"}),N._delivery.sendReport(N._logger,N.config,{apiKey:Y.apiKey||N.config.apiKey,notifier:N.notifier,events:[Y]},function(Hc){return I(Hc,Y)})})},m}(),ji=function(m,y,x){var k=3,S=function(Z){var ke=os(Z);return x.warn(Za+" "+ke),new Error(Rr+" "+ke)},I,N=0,te;switch(typeof m){case"string":typeof y=="string"?(I=S("string/string"),te={metaData:{notifier:{notifyArgs:[m,y]}}}):(I=new Error(String(m)),N=k);break;case"number":case"boolean":I=new Error(String(m));break;case"function":I=S("function");break;case"object":m!==null&&(Cc(m)||m.__isBugsnagReport)?I=m:m!==null&&Tr(m)?(I=new Error(m.message||m.errorMessage),I.name=m.name||m.errorClass,N=k):I=S(m===null?"null":"unsupported object");break;default:I=S("nothing")}return{err:I,errorFramesToSkip:N,_opts:te}},Tr=function(m){return(typeof m.name=="string"||typeof m.errorClass=="string")&&(typeof m.message=="string"||typeof m.errorMessage=="string")},Vc=function(m){return`Bugsnag configuration error
`+St(m,function(y){return'"'+y.key+'" '+y.message+` 
    got `+Yi(y.value)}).join(`

`)},os=function(m){return"notify() expected error/opts parameters, got "+m},Yi=function(m){return typeof m=="object"?JSON.stringify(m):String(m)},Fn=Cr,Sr=function(m,y,x,k){var S=k&&k.filterKeys?k.filterKeys:[],I=k&&k.filterPaths?k.filterPaths:[];return JSON.stringify(Pc(m,S,I),y,x)},ra=20,ss=25e3,Vu=8,Ji="...";function Nc(m){return m instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(m))}function cs(m){return"[Throws: "+(m?m.message:"?")+"]"}function ei(m,y){for(var x=0,k=m.length;x<k;x++)if(m[x]===y)return!0;return!1}function br(m,y){for(var x=0,k=m.length;x<k;x++)if(y.indexOf(m[x])===0)return!0;return!1}function Qi(m,y){for(var x=0,k=m.length;x<k;x++)if(typeof m[x]=="string"&&m[x]===y||m[x]&&typeof m[x].test=="function"&&m[x].test(y))return!0;return!1}function ti(m){return Object.prototype.toString.call(m)==="[object Array]"}function Ic(m,y){try{return m[y]}catch(x){return cs(x)}}function Pc(m,y,x){var k=[],S=0;function I(N,te){function Z(){return te.length>Vu&&S>ss}if(S++,te.length>ra||Z())return Ji;if(N===null||typeof N!="object")return N;if(ei(k,N))return"[Circular]";if(k.push(N),typeof N.toJSON=="function")try{S--;var ke=I(N.toJSON(),te);return k.pop(),ke}catch(ro){return cs(ro)}var se=Nc(N);if(se){S--;var et=I({name:N.name,message:N.message},te);return k.pop(),et}if(ti(N)){for(var Y=[],He=0,Rn=N.length;He<Rn;He++){if(Z()){Y.push(Ji);break}Y.push(I(N[He],te.concat("[]")))}return k.pop(),Y}var Cn={};try{for(var rr in N)if(Object.prototype.hasOwnProperty.call(N,rr)){if(br(x,te.join("."))&&Qi(y,rr)){Cn[rr]="[Filtered]";continue}if(Z()){Cn[rr]=Ji;break}Cn[rr]=I(Ic(N,rr),te.concat(rr))}}catch(ro){}return k.pop(),Cn}return I(m,[])}var sn={},ls=["events.[].app","events.[].metaData","events.[].user","events.[].breadcrumbs","events.[].request","events.[].device"],Oc=["device","app","user"];sn.report=function(m,y){var x=Sr(m,null,null,{filterPaths:ls,filterKeys:y});if(x.length>1e6&&(delete m.events[0].metaData,m.events[0].metaData={notifier:`WARNING!
Serialized payload was `+x.length/1e6+`MB (limit = 1MB)
metaData was removed`},x=Sr(m,null,null,{filterPaths:ls,filterKeys:y}),x.length>1e6))throw new Error("payload exceeded 1MB limit");return x},sn.session=function(m,y){var x=Sr(m,null,null,{filterPaths:Oc,filterKeys:y});if(x.length>1e6)throw new Error("payload exceeded 1MB limit");return x};var ds={},Fc=R.isoDate;ds=function(m){return m===void 0&&(m=window),{sendReport:function(y,x,k,S){S===void 0&&(S=function(){});var I=us(x,"notify","4",m),N=new m.XDomainRequest;N.onload=function(){S(null)},N.open("POST",I),setTimeout(function(){try{N.send(sn.report(k,x.filters))}catch(te){y.error(te),S(te)}},0)},sendSession:function(y,x,k,S){S===void 0&&(S=function(){});var I=us(x,"sessions","1",m),N=new m.XDomainRequest;N.onload=function(){S(null)},N.open("POST",I),setTimeout(function(){try{N.send(sn.session(k,x.filters))}catch(te){y.error(te),S(te)}},0)}}};var us=function(m,y,x,k){return _c(m.endpoints[y],k.location.protocol)+"?apiKey="+encodeURIComponent(m.apiKey)+"&payloadVersion="+x+"&sentAt="+encodeURIComponent(Fc())},_c=ds._matchPageProtocol=function(m,y){return y==="http:"?m.replace(/^https:/,"http:"):m},Ma=R.isoDate,qr=function(m){return m===void 0&&(m=window),{sendReport:function(y,x,k,S){S===void 0&&(S=function(){});try{var I=x.endpoints.notify,N=new m.XMLHttpRequest;N.onreadystatechange=function(){N.readyState===m.XMLHttpRequest.DONE&&S(null)},N.open("POST",I),N.setRequestHeader("Content-Type","application/json"),N.setRequestHeader("Bugsnag-Api-Key",k.apiKey||x.apiKey),N.setRequestHeader("Bugsnag-Payload-Version","4"),N.setRequestHeader("Bugsnag-Sent-At",Ma()),N.send(sn.report(k,x.filters))}catch(te){y.error(te)}},sendSession:function(y,x,k,S){S===void 0&&(S=function(){});try{var I=x.endpoints.sessions,N=new m.XMLHttpRequest;N.onreadystatechange=function(){N.readyState===m.XMLHttpRequest.DONE&&S(null)},N.open("POST",I),N.setRequestHeader("Content-Type","application/json"),N.setRequestHeader("Bugsnag-Api-Key",x.apiKey),N.setRequestHeader("Bugsnag-Payload-Version","1"),N.setRequestHeader("Bugsnag-Sent-At",Ma()),N.send(sn.session(k,x.filters))}catch(te){y.error(te)}}}},xh={init:function(m,y){y===void 0&&(y=window),m.config.beforeSend.unshift(function(x){x.context||(x.context=y.location.pathname)})}};function na(){return na=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},na.apply(this,arguments)}var ps=R.isoDate,Br={init:function(m,y){y===void 0&&(y=navigator);var x={locale:y.browserLanguage||y.systemLanguage||y.userLanguage||y.language,userAgent:y.userAgent};m.device=na({},x,m.device),m.config.beforeSend.unshift(function(k){k.device=na({},k.device,{time:ps()})})}};function ri(){return ri=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},ri.apply(this,arguments)}var Rc={init:function(m,y){y===void 0&&(y=window),m.config.beforeSend.unshift(function(x){x.request&&x.request.url||(x.request=ri({},x.request,{url:y.location.href}))})}};function kn(){return kn=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},kn.apply(this,arguments)}var Nu=R.isArray,Iu=R.includes,qc={init:function(m){return m.sessionDelegate(Bc)}},Bc={startSession:function(m){var y=m;y._session=new m.BugsnagSession;var x=an(y);return Nu(y.config.notifyReleaseStages)&&!Iu(y.config.notifyReleaseStages,x)?(y._logger.warn("Session not sent due to releaseStage/notifyReleaseStages configuration"),y):y.config.endpoints.sessions?(y._delivery.sendSession(y._logger,y.config,{notifier:y.notifier,device:y.device,app:kn({},{releaseStage:x},y.app),sessions:[{id:y._session.id,startedAt:y._session.startedAt,user:y.user}]}),y):(y._logger.warn("Session not sent due to missing endpoints.sessions configuration"),y)}};function Xi(){return Xi=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},Xi.apply(this,arguments)}var Uc={init:function(m){m.config.collectUserIp||m.config.beforeSend.push(function(y){y.user&&typeof y.user.id=="undefined"&&delete y.user.id,y.user=Xi({id:"[NOT COLLECTED]"},y.user),y.request=Xi({clientIp:"[NOT COLLECTED]"},y.request)})},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(m){return m===!0||m===!1}}}},ni={},$c=R.map,zc=R.reduce,Ur=R.filter;ni.init=function(m){var y=/^dev(elopment)?$/.test(m.config.releaseStage),x=m.config.consoleBreadcrumbsEnabled===!1,k=(m.config.autoBreadcrumbs===!1||y)&&m.config.consoleBreadcrumbsEnabled!==!0;x||k||$c(Pu,function(S){var I=console[S];console[S]=function(){for(var N=arguments.length,te=new Array(N),Z=0;Z<N;Z++)te[Z]=arguments[Z];m.leaveBreadcrumb("Console output",zc(te,function(ke,se,et){var Y="[Unknown value]";try{Y=String(se)}catch(He){}if(Y==="[object Object]")try{Y=JSON.stringify(se)}catch(He){}return ke["["+et+"]"]=Y,ke},{severity:S.indexOf("group")===0?"log":S}),"log"),I.apply(console,te)},console[S]._restore=function(){console[S]=I}})},ni.configSchema={consoleBreadcrumbsEnabled:{defaultValue:function(){},validate:function(m){return m===!0||m===!1||m===void 0},message:"should be true|false"}};var Pu=Ur(["log","debug","info","warn","error"],function(m){return typeof console!="undefined"&&typeof console[m]=="function"}),aa={},Aa=R.reduce;aa={init:function(m,y,x){y===void 0&&(y=document),x===void 0&&(x=window);var k="",S=!1,I=function(){return y.documentElement.outerHTML},N=x.location.href,te=function(ke){var se=ke.stacktrace[0];if(!se||!se.file||!se.lineNumber||se.file.replace(/#.*$/,"")!==N.replace(/#.*$/,""))return se;(!S||!k)&&(k=I());var et=["<!-- DOC START -->"].concat(k.split(`
`)),Y=gs(et,se.lineNumber-1),He=Y.script,Rn=Y.start,Cn=Aa(He,function(rr,ro,Hc){return Math.abs(Rn+Hc+1-se.lineNumber)>10||(rr[""+(Rn+Hc+1)]=ro),rr},{});se.code=Cn,ke.updateMetaData("script",{content:He.join(`
`)})};k=I();var Z=y.onreadystatechange;y.onreadystatechange=function(){y.readyState==="interactive"&&(k=I(),S=!0),typeof Z=="function"&&Z.apply(this,arguments)},m.config.beforeSend.unshift(te)}};var Zi=/^.*<script.*?>/,eo=/<\/script>.*$/,gs=aa.extractScriptContent=function(m,y){for(var x=y;x<m.length&&!eo.test(m[x]);)x++;for(var k=x;x>0&&!Zi.test(m[x]);)x--;var S=x,I=m.slice(S,k+1);return I[0]=I[0].replace(Zi,""),I[I.length-1]=I[I.length-1].replace(eo,""),{script:I,start:S}},Kc={init:function(m,y){if(y===void 0&&(y=window),"addEventListener"in y){var x=m.config.interactionBreadcrumbsEnabled===!1,k=m.config.autoBreadcrumbs===!1&&m.config.interactionBreadcrumbsEnabled!==!0;x||k||y.addEventListener("click",function(S){var I,N;try{I=Ou(S.target),N=hs(S.target,y)}catch(te){I="[hidden]",N="[hidden]",m._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/y94fq5zm")}m.leaveBreadcrumb("UI click",{targetText:I,targetSelector:N},"user")},!0)}},configSchema:{interactionBreadcrumbsEnabled:{defaultValue:function(){},validate:function(m){return m===!0||m===!1||m===void 0},message:"should be true|false"}}},Ou=function(m){var y=m.textContent||m.innerText||"";return!y&&(m.type==="submit"||m.type==="button")&&(y=m.value),y=y.replace(/^\s+|\s+$/g,""),Wc(y,140)};function hs(m,y){var x=[m.tagName];if(m.id&&x.push("#"+m.id),m.className&&m.className.length&&x.push("."+m.className.split(" ").join(".")),!y.document.querySelectorAll||!Array.prototype.indexOf)return x.join("");try{if(y.document.querySelectorAll(x.join("")).length===1)return x.join("")}catch(S){return x.join("")}if(m.parentNode.childNodes.length>1){var k=Array.prototype.indexOf.call(m.parentNode.childNodes,m)+1;x.push(":nth-child("+k+")")}return y.document.querySelectorAll(x.join("")).length===1?x.join(""):m.parentNode?hs(m.parentNode,y)+" > "+x.join(""):x.join("")}function Wc(m,y){var x="(...)";return m&&m.length<=y?m:m.slice(0,y-x.length)+x}var u={};u.init=function(m,y){if(y===void 0&&(y=window),"addEventListener"in y){var x=m.config.navigationBreadcrumbsEnabled===!1,k=m.config.autoBreadcrumbs===!1&&m.config.navigationBreadcrumbsEnabled!==!0;if(!(x||k)){var S=function(I){return function(){return m.leaveBreadcrumb(I,{},"navigation")}};y.addEventListener("pagehide",S("Page hidden"),!0),y.addEventListener("pageshow",S("Page shown"),!0),y.addEventListener("load",S("Page loaded"),!0),y.document.addEventListener("DOMContentLoaded",S("DOMContentLoaded"),!0),y.addEventListener("load",function(){return y.addEventListener("popstate",S("Navigated back"),!0)}),y.addEventListener("hashchange",function(I){var N=I.oldURL?{from:s(I.oldURL,y),to:s(I.newURL,y),state:d(y)}:{to:s(y.location.href,y)};m.leaveBreadcrumb("Hash changed",N,"navigation")},!0),y.history.replaceState&&o(m,y.history,"replaceState",y),y.history.pushState&&o(m,y.history,"pushState",y),m.leaveBreadcrumb("Bugsnag loaded",{},"navigation")}}},u.configSchema={navigationBreadcrumbsEnabled:{defaultValue:function(){},validate:function(m){return m===!0||m===!1||m===void 0},message:"should be true|false"}};var s=function(m,y){var x=y.document.createElement("A");return x.href=m,""+x.pathname+x.search+x.hash},i=function(m,y,x,k){var S=s(m.location.href,m);return{title:x,state:y,prevState:d(m),to:k||S,from:S}},o=function(m,y,x,k){var S=y[x];y[x]=function(I,N,te){m.leaveBreadcrumb("History "+x,i(k,I,N,te),"navigation"),typeof m.refresh=="function"&&m.refresh(),m.config.autoCaptureSessions&&m.startSession(),S.apply(y,[I,N].concat(te!==void 0?te:[]))},y[x]._restore=function(){y[x]=S}},d=function(m){try{return m.history.state}catch(y){}},h={},b="request",v="BS~~S",E="BS~~U",L="BS~~M",K=R.includes,B=[],F,H,X=function(){return[F.config.endpoints.notify,F.config.endpoints.sessions]};h.init=function(m,y){y===void 0&&(y=window);var x=m.config.networkBreadcrumbsEnabled===!1,k=m.config.autoBreadcrumbs===!1&&m.config.networkBreadcrumbsEnabled!==!0;x||k||(F=m,H=y,re(),Ie())},h.configSchema={networkBreadcrumbsEnabled:{defaultValue:function(){},validate:function(m){return m===!0||m===!1||m===void 0},message:"should be true|false"}};var re=function(){if("addEventListener"in H.XMLHttpRequest.prototype){var m=H.XMLHttpRequest.prototype.open;H.XMLHttpRequest.prototype.open=function(x,k){this[E]=k,this[L]=x,this[v]&&(this.removeEventListener("load",ne),this.removeEventListener("error",le)),this.addEventListener("load",ne),this.addEventListener("error",le),this[v]=!0,m.apply(this,arguments)}}};function ne(){if(!K(X(),this[E])){var m={status:this.status,request:this[L]+" "+this[E]};this.status>=400?F.leaveBreadcrumb("XMLHttpRequest failed",m,b):F.leaveBreadcrumb("XMLHttpRequest succeeded",m,b)}}function le(){K(X(),this[E])||F.leaveBreadcrumb("XMLHttpRequest error",{request:this[L]+" "+this[E]},b)}var Ie=function(){if("fetch"in H){var m=H.fetch;H.fetch=function(){for(var x=arguments.length,k=new Array(x),S=0;S<x;S++)k[S]=arguments[S];var I=k[0],N=k[1],te="GET";return N&&N.method&&(te=N.method),new Promise(function(Z,ke){m.apply(void 0,k).then(function(se){ct(se,te,I),Z(se)}).catch(function(se){Pe(te,I),ke(se)})})}}},ct=function(m,y,x){var k={status:m.status,request:y+" "+x};m.status>=400?F.leaveBreadcrumb("fetch() failed",k,b):F.leaveBreadcrumb("fetch() succeeded",k,b)},Pe=function(m,y){F.leaveBreadcrumb("fetch() error",{request:m+" "+y},b)},lt=ue.intRange,Dr={init:function(m){var y=0;m.config.beforeSend.push(function(x){if(y>=m.config.maxEvents)return x.ignore();y++}),m.refresh=function(){y=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer \u2264100",validate:function(m){return lt(1,100)(m)}}}},xr={};function En(){return En=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},En.apply(this,arguments)}var Oe=R.map;xr={init:function(m){m.config.beforeSend.push(function(y){y.stacktrace=Oe(y.stacktrace,function(x){return En({},x,{file:_n(x.file)})})})}};var _n=xr._strip=function(m){return typeof m=="string"?m.replace(/\?.*$/,"").replace(/#.*$/,""):m},cn={init:function(m,y){y===void 0&&(y=window);function x(S,I,N,te,Z){if(N===0&&/Script error\.?/.test(S))m._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/y94fq5zm");else{var ke={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},se;if(Z)Z.name&&Z.message?se=new m.BugsnagReport(Z.name,Z.message,ms(m.BugsnagReport.getStacktrace(Z),I,N,te),ke,Z):(se=new m.BugsnagReport("window.onerror",String(Z),ms(m.BugsnagReport.getStacktrace(Z,1),I,N,te),ke,Z),se.updateMetaData("window onerror",{error:Z}));else if(typeof S=="object"&&S!==null&&(!I||typeof I!="string")&&!N&&!te&&!Z){var et=S.type?"Event: "+S.type:"window.onerror",Y=S.message||S.detail||"";se=new m.BugsnagReport(et,Y,m.BugsnagReport.getStacktrace(new Error,1).slice(1),ke,S),se.updateMetaData("window onerror",{event:S,extraParameters:I})}else se=new m.BugsnagReport("window.onerror",String(S),ms(m.BugsnagReport.getStacktrace(Z,1),I,N,te),ke,S),se.updateMetaData("window onerror",{event:S});m.notify(se)}typeof k=="function"&&k.apply(this,arguments)}var k=y.onerror;y.onerror=x}},ms=function(m,y,x,k){var S=m[0];return S&&(!S.fileName&&typeof y=="string"&&S.setFileName(y),!S.lineNumber&&to(x)&&S.setLineNumber(x),S.columnNumber||(to(k)?S.setColumnNumber(k):window.event&&to(window.event.errorCharacter)&&S.setColumnNumber(window.event.errorCharacter))),m},to=function(m){return typeof m=="number"&&String.call(m)!=="NaN"},fs={},_k=R.reduce,Rk;fs.init=function(m,y){y===void 0&&(y=window);var x=function(k){var S=k.reason,I=!1;try{k.detail&&k.detail.reason&&(S=k.detail.reason,I=!0)}catch(ke){}var N={severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}},te;if(S&&vn(S))te=new m.BugsnagReport(S.name,S.message,Tu.parse(S),N,S),I&&(te.stacktrace=_k(te.stacktrace,Bk(S),[]));else{var Z='Rejection reason was not an Error. See "Promise" tab for more detail.';te=new m.BugsnagReport(S&&S.name?S.name:"UnhandledRejection",S&&S.message?S.message:Z,[],N,S),te.updateMetaData("promise","rejection reason",qk(S))}m.notify(te)};"addEventListener"in y?y.addEventListener("unhandledrejection",x):y.onunhandledrejection=function(k,S){x({detail:{reason:k,promise:S}})},Rk=x};var qk=function(m){if(m==null)return"undefined (or null)";if(Cc(m)){var y;return y={},y[Object.prototype.toString.call(m)]={name:m.name,message:m.message,code:m.code,stack:m.stack},y}else return m},Bk=function(m){return function(y,x){return x.file===m.toString()?y:(x.method&&(x.method=x.method.replace(/^\s+/,"")),y.concat(x))}},ys={};function Fu(){return Fu=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(m[k]=x[k])}return m},Fu.apply(this,arguments)}var Uk="Bugsnag JavaScript",$k="6.1.0",zk="https://github.com/bugsnag/bugsnag-js",Kk=R.map,Wk=Fu({},pe.schema,Ze);return ys=function(m){typeof m=="string"&&(m={apiKey:m});var y=[];m.sessionTrackingEnabled&&(y.push("deprecated option sessionTrackingEnabled is now called autoCaptureSessions"),m.autoCaptureSessions=m.sessionTrackingEnabled),(m.endpoint||m.sessionEndpoint)&&!m.endpoints&&(y.push("deprecated options endpoint/sessionEndpoint are now configured in the endpoints object"),m.endpoints={notify:m.endpoint,sessions:m.sessionEndpoint}),m.endpoints&&m.endpoints.notify&&!m.endpoints.sessions&&y.push("notify endpoint is set but sessions endpoint is not. No sessions will be sent.");var x=new Fn({name:Uk,version:$k,url:zk});return x.setOptions(m),x.delivery(window.XDomainRequest?ds():qr()),x.configure(Wk),Kk(y,function(k){return x._logger.warn(k)}),x.use(Br),x.use(xh),x.use(Rc),x.use(aa),x.use(Dr),x.use(qc),x.use(Uc),x.use(xr),x.config.autoNotify!==!1&&(x.use(cn),x.use(fs)),x.use(u),x.use(Kc),x.use(h),x.use(ni),x.config.autoCaptureSessions?x.startSession():x},ys.Bugsnag={Client:Fn,Report:Hi,Session:is,Breadcrumb:jt},ys.default=ys,ys})});var qv=La((M_,Rv)=>{Rv.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}});var Uv=La((A_,Bv)=>{var MD=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,AD=qv();Bv.exports=function(e){var t=0,r,n=!0,a={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return e.replace(MD,function(c){if(c==="="){n=!0,t++;return}n?t===0?((AD[c]||e.charAt(e.length-2)==="/")&&(a.voidElement=!0),a.name=c):(a.attrs[r]=c.replace(/^['"]|['"]$/g,""),r=void 0):(r&&(a.attrs[r]=r),r=c),t++,n=!1}),a}});var zv=La((L_,$v)=>{var LD=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,GD=Uv(),VD=Object.create?Object.create(null):{};function Jg(e,t,r,n,a){var c=t.indexOf("<",n),l=t.slice(n,c===-1?void 0:c);/^\s*$/.test(l)&&(l=" "),(!a&&c>-1&&r+e.length>=0||l!==" ")&&e.push({type:"text",content:l})}$v.exports=function(t,r){r||(r={}),r.components||(r.components=VD);var n=[],a,c=-1,l=[],g={},p=!1;return t.replace(LD,function(f,w){if(p){if(f!=="</"+a.name+">")return;p=!1}var M=f.charAt(1)!=="/",G=f.indexOf("<!--")===0,R=w+f.length,ue=t.charAt(R),pe;M&&!G&&(c++,a=GD(f),a.type==="tag"&&r.components[a.name]&&(a.type="component",p=!0),!a.voidElement&&!p&&ue&&ue!=="<"&&Jg(a.children,t,c,R,r.ignoreWhitespace),g[a.tagName]=a,c===0&&n.push(a),pe=l[c-1],pe&&pe.children.push(a),l[c]=a),(G||!M||a.voidElement)&&(G||c--,!p&&ue!=="<"&&ue&&(pe=c===-1?n:l[c].children,Jg(pe,t,c,R,r.ignoreWhitespace)))}),!n.length&&t.length&&Jg(n,t,0,0,r.ignoreWhitespace),n}});var Hv=La((G_,Wv)=>{function ND(e){var t=[];for(var r in e)t.push(r+'="'+e[r]+'"');return t.length?" "+t.join(" "):""}function Kv(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?ND(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(Kv,"")+"</"+t.name+">"}}Wv.exports=function(e){return e.reduce(function(t,r){return t+Kv("",r)},"")}});var Yv=La((V_,jv)=>{jv.exports={parse:zv(),stringify:Hv()}});var Ch;function rE(e){Ch=e(Eh)}rE(function(e){function t(){window.consoleOverride=!0;var n=window.console.log;window.console.log=function(){for(var a=[],c=0;c<arguments.length;c++)a.push(arguments[c]);n.apply(window.console,[].concat([a.join(" ")],a))}}var r={ready:function(){try{window.TestBridge=r,parent.USING_SELENIUM&&t()}catch(n){}}};return r});var{ready:Th}=Ch;var K1=he(Sh());var Dh=function(){{var e={IS_IE8:navigator.userAgent.match(/MSIE 8.0/i)!==null,IS_IE9:navigator.userAgent.match(/MSIE 9.0/i)!==null,IS_IE:navigator.userAgent.match(/MSIE/i)!==null||navigator.userAgent.match(/Trident/i)!==null&&navigator.userAgent.match(/rv:11/i)!==null,IS_EDGE:navigator.userAgent.match(/Edge/i)!==null,IS_IPAD:navigator.userAgent.match(/iPad/i)!==null,IS_MOBILE:navigator.userAgent.match(/Mobile|Android/i)!==null,IS_ANDROID:navigator.userAgent.match(/Android/i)!==null,IS_IOS:navigator.userAgent.match(/(iPad|iPhone|iPod)/i)!==null||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,IS_CHROME:navigator.userAgent.match(/Chrome/i)!==null,IS_FIREFOX:navigator.userAgent.match(/Firefox/i)!==null,IS_SAFARI:navigator.userAgent.match(/^((?!chrome|android).)*safari/i)!==null,IS_APPLE:navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)!==null,IS_WINDOWS:navigator.platform.match(/(Win32)/i)!==null,IS_TOUCH:navigator.userAgent.match(/Touch/i)!==null,IS_KINDLE:navigator.userAgent.match(/Kindle/i)!==null||navigator.userAgent.match(/Silk/i)!==null,IS_BRAILLENOTE:navigator.userAgent.match(/KeyWeb/i)!==null,IS_IN_IFRAME:window.parent!==window};return e.IS_TABLET=e.IS_IPAD||e.IS_ANDROID||e.IS_KINDLE,e.IS_TOUCH_DEVICE=e.SHOULD_NOT_AUTOFOCUS=e.IS_IOS||e.IS_ANDROID||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i),e.IOS_VERSION=function(){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return t?[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]:null}(),e.MAC_VERSION=function(){var t=navigator.appVersion.match(/OS X (\d+)_(\d+)_?(\d+)?/);return t?[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]:null}(),e.CHROME_VERSION=function(){var t=navigator.appVersion.match(/Chrom(e|ium)\/([0-9]+)\.([0-9]+)\.?([0-9]+)?/);return t?[parseInt(t[2],10),parseInt(t[3],10),parseInt(t[4]||0,10)]:null}(),e.SUPPORTS_INPUTMODE=function(){var t="inputMode"in document.createElement("textarea");return!(!t||e.IS_IOS&&e.IOS_VERSION&&e.IOS_VERSION[0]<15)}(),e.SUPPORTS_CANVAS=function(){var t=document.createElement("canvas"),r=!!(t.getContext&&t.getContext("2d"));return r}(),e}}(),Mh=Dh,{SHOULD_NOT_AUTOFOCUS:Tn,IS_TOUCH_DEVICE:T1,IS_SAFARI:S1,IS_APPLE:Ah,IS_IOS:Jc,IS_ANDROID:Qc,IS_IPAD:D1,IS_IN_IFRAME:M1,IOS_VERSION:A1,MAC_VERSION:L1,CHROME_VERSION:G1,IS_IE:V1,IS_EDGE:N1,IS_CHROME:I1,IS_FIREFOX:Lh,IS_MOBILE:P1,IS_WINDOWS:Gh,IS_TOUCH:Vh,SUPPORTS_INPUTMODE:Xc,SUPPORTS_CANVAS:O1,translateRule:F1}=Dh;lr();var em={segment:!0,line:!0,ray:!0,circle:!0,arc:!0,vector:!0,glider:!0,parallel:!0,perpendicular:!0,center:!0,radius:!0,area:!0,perimeter:!0,start:!0,end:!0,angles:!0,angle:!0,directedangles:!0,directedangle:!0,coterminal:!0,supplement:!0,vertices:!0,segments:!0,intersection:!0,translate:!0,dilate:!0,rotate:!0,reflect:!0,construction:!0,points:!0,lines:!0,circles:!0,arcs:!0,polygons:!0,rays:!0};var tm={segment:!0,triangle:!0,vector:!0,start:!0,end:!0,sphere:!0};var rm=["exp|exponent ln|natural-log log","total length count mean median quantile quartile nCr nPr stats","stdev|standard-deviation stddev|standard-deviation","stdDev|standard-deviation stdevp|standard-deviation-population","stddevp|standard-deviation-population stdDevP|standard-deviation-population mad var|variance","varp|variance-population variance cov|co-variance covp|co-variance-population corr|correlation spearman","lcm mcm gcd mcd gcf mod ceil|ceiling floor round abs|absolute-value min max sign|signum signum sgn","sin|sine cos|cosine tan|tangent csc|co-secant sec|secant cot|co-tangent","sinh|hyperbolic-sine cosh|hyperbolic-cosine tanh|hyperbolic-tangent csch|hyperbolic-co-secant","sech|hyperbolic-secant coth|hyperbolic-co-tangent","arcsin|arc-sine arccos|arc-cosine arctan|arc-tangent arccsc|arc-co-secant arcsec|arc-secant","arccot|arc-co-tangent","arcsinh|hyperbolic-arc-sine arccosh|hyperbolic-arc-cosine arctanh|hyperbolic-arc-co-tangent","arccsch|hyperbolic-arc-co-secant arcsech|hyperbolic-arc-secant","arccoth|hyperbolic-arc-co-tangent","arsinh|hyperbolic-ar-sine arcosh|hyperbolic-ar-cosine artanh|hyperbolic-ar-co-tangent","arcsch|hyperbolic-ar-co-secant arsech|hyperbolic-ar-secant","arcoth|hyperbolic-ar-co-tangent","polygon","distance midpoint","sort shuffle join unique","erf|error-function","TTest|t-test ttest|t-test TScore|t-score tscore|t-score","iTTest|independent-t-test ittest|independent-t-test IndependentTTest","TScore|t-score Tscore|t-score tscore|t-score","normaldist|normal-distribution tdist|t-distribution poissondist|poisson-distribution","binomialdist|binomial-distribution","uniformdist|uniform-distribution","pdf cdf random inverseCdf inversecdf","histogram dotplot boxplot","pdf cdf","rgb hsv","for","width height","with"].join(" "),ME=["det|determinant","inv|inverse","transpose","rref|reduced-row-echelon-form","trace"].join(" ");rm+=" "+ME;var AE="alpha beta sqrt theta phi pi tau nthroot cbrt sum prod integral percent infinity infty cross";function sl(e){e||(e={});let t=[AE];return e.disallowAns||t.push("ans"),e.disallowFrac||t.push("frac"),e.additionalCommands&&(t=t.concat(e.additionalCommands)),t.join(" ")}function cl(e){e||(e={});let t=rm;return e.additionalOperators&&e.additionalOperators.length&&(t=`${t} ${e.additionalOperators.join(" ")}`),e.includeGeometryFunctions&&(t+=" "+Object.keys(em).join(" ")),e.include3DFunctions&&(t+=" "+Object.keys(tm).join(" ")),t}var Ku=function(e){if(!e)return;let t=e.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX}},la=function(e,t){Object.assign(e.style,t)};function nm(e){return!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length))}function am(e){if(document.readyState!=="loading")e();else{var t=function(){document.removeEventListener("DOMContentLoaded",t),e()};document.addEventListener("DOMContentLoaded",t)}}var im=window.MathQuill.noConflict().getInterface(3);im.config({leftRightIntoCmdGoes:"up",sumStartsWithNEquals:!0,supSubsRequireOperand:!0,charsThatBreakOutOfSupSub:"+-=<>*",autoCommands:sl(),autoSubscriptNumerals:!0,restrictMismatchedBrackets:!0,typingPercentWritesPercentOf:!0,substituteTextarea:function(){if(!Xc&&(Jc||Qc)){let t=document.createElement("span");return t.classList.add("dcg-mathquill-input-span"),t.setAttribute("tabindex","0"),t.setAttribute("role","textbox"),la(t,{display:"inline-block",height:"1px",width:"1px"}),t}if(Gh&&Vh){let t=document.createElement("textarea");return t.setAttribute("readonly",""),t.setAttribute("inputmode","none"),t.setAttribute("autocorrect","off"),t.setAttribute("autocapitalize","none"),t.setAttribute("spellcheck","false"),t.setAttribute("autocomplete","off"),ee(t).on("keydown",function(){this.readOnly=!1,this.select()}).on("blur",function(){this.readOnly=!0}),t}let e=document.createElement("textarea");return e.setAttribute("inputmode","none"),e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","none"),e.setAttribute("spellcheck","false"),e.setAttribute("autocomplete","off"),e},autoOperatorNames:cl(),quietEmptyDelimiters:"( [",resetCursorOnBlur:!0,enableDigitGrouping:!0,disableAutoSubstitutionInSubscripts:!0,interpretTildeAsSim:!0});var Na=im;function ln(e){var t=e;if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object")return t;if(Array.isArray(t))return t.map(ln);var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=ln(t[n]));return r}ll();var Ot={},$r=co();if(typeof Desmos!="undefined"&&Desmos.config)for(dl in Desmos.config)Desmos.config.hasOwnProperty(dl)&&($r[dl]=Desmos.config[dl]);var dl,Sn=function(e){return $r.hasOwnProperty(e)},Se=function(e){Ot[e]=Sn(e)},ot=function(e){Ot[e]=!Sn("no"+e)};Se("testing");Se("maintenance");Se("disableScrollFix");Se("nativeOnscreenKeypad");Se("hidden");Se("disableMouseInteractions");Se("advancedStyling");Se("outofdom");Se("beta3d");$r.lang&&(Ot.language=$r.lang);$r.fontSize&&(Ot.fontSize=$r.fontSize);$r.backgroundColor&&(Ot.backgroundColor="#"+$r.backgroundColor);$r.textColor&&(Ot.textColor="#"+$r.textColor);Ot.no_navigation_warning=Sn("noconcat")||Sn("testing");Ot.previewMessage="You're previewing some new accessibility features.";Ot.previewFeedbackUrl="mailto:feedback@desmos.com";var GE=location&&location.hostname==="preview.desmos.com";Ot.previewMode=Sn("previewMode")||GE;Se("lockViewport");Se("authorFeatures");Se("degreeMode");Se("clearIntoDegreeMode");Se("plaidMode");Se("wireframe");Se("editOnWeb");Se("crossOriginSaveTest");Se("showResetButtonOnGraphpaper");Se("transparentBackground");Se("forceLogModeRegressions");ot("links");ot("trace");ot("zoomFit");Se("expressionsCollapsed");Se("invertedColors");Se("projectorMode");ot("images");ot("folders");ot("settingsMenu");ot("expressionsTopbar");ot("zoomButtons");ot("keypad");ot("graphpaper");ot("expressions");ot("branding");ot("pointsOfInterest");ot("plotSingleVariableImplicitEquations");ot("plotImplicits");ot("plotInequalities");ot("notes");ot("sliders");Se("pauseWhenOffscreen");Se("worksheetSVG");ot("brailleControls");Se("audioTraceKeypad");ot("audio");Se("sciKeypad");Se("4fnKeypad");Se("ans");Sn("braille")&&(Ot.braille=!0);ot("qwertyKeyboard");Se("restrictedFunctions");Se("forceEnableGeometryFunctions");ot("functionDefinition");Se("singleExpression");Se("restrictedEditing");Se("replaceCommaWith10Exp");Se("replaceRoundWithReciprocal");Sn("typingAsteriskWritesTimesSymbol")&&(Ot.typingAsteriskWritesTimesSymbol=!0);ot("substitutions");ot("logScales");ot("labels");ot("distributions");Ot["4fnKeypad"]?Se("decimalToFraction"):ot("decimalToFraction");Se("3d");Se("disableWorkerOnZoom");Se("disableLighting");Sn("exponentButtonForSquareRoot")?Ot.additionalFunctions=["exponent"]:$r.additionalFunctions&&typeof $r.additionalFunctions=="string"&&(Ot.additionalFunctions=$r.additionalFunctions.split(","));Sn("actions")?Ot.actions=!0:Sn("noactions")?Ot.actions=!1:Sn("clickableObjects")&&(Ot.actions=!0);function om(e){return Ot[e]}function sm(){return ln(Ot)}var lm=function(e,t,r){if(e===void 0||t===void 0)return!1;let n,a=t.getBoundingClientRect().height,c=e.getBoundingClientRect().height,l=Ku(e),g=Ku(t);if(!l||!g)return!1;let p=t.scrollTop,f=l.top+p-g.top,w=f-r,M=c+f+r-a;return w>=M?n=Math.min(Math.max(p,M),w):n=.5*(w+M),n!==p?(t.scrollTop=n,t.scrollTop!=p):!1};var Gr=he(me());var gf=he(me()),ht=class extends gf.Class{constructor(r,n){super(r,n)}init(){this.controller=this.props.controller(),this.model=this.controller.model,this.dispatch=this.controller.dispatch,this.s=this.controller.s}};var wl=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},kl=Array.prototype,dp=Object.prototype,hf=typeof Symbol!="undefined"?Symbol.prototype:null,NL=kl.push,zC=kl.slice,vl=dp.toString,KC=dp.hasOwnProperty,WC=Array.isArray,mf=Object.keys,ff=Object.create,HC=wl.isNaN,IL=wl.isFinite,sp=function(){};function Ft(e){if(e instanceof Ft)return e;if(!(this instanceof Ft))return new Ft(e);this._wrapped=e}var PL=Ft.VERSION="1.10.2";function El(e,t,r){if(t===void 0)return e;switch(r==null?3:r){case 1:return function(n){return e.call(t,n)};case 3:return function(n,a,c){return e.call(t,n,a,c)};case 4:return function(n,a,c,l){return e.call(t,n,a,c,l)}}return function(){return e.apply(t,arguments)}}function xf(e,t,r){return e==null?xT:da(e)?El(e,t,r):xo(e)&&!Ms(e)?wT(e):Gf(e)}Ft.iteratee=wf;function wf(e,t){return xf(e,t,1/0)}function ai(e,t,r){return Ft.iteratee!==wf?Ft.iteratee(e,t):xf(e,t,r)}function pn(e,t){return t=t==null?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),a=0;a<r;a++)n[a]=arguments[a+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var c=Array(t+1);for(a=0;a<t;a++)c[a]=arguments[a];return c[t]=n,e.apply(this,c)}}function jC(e){if(!xo(e))return{};if(ff)return ff(e);sp.prototype=e;var t=new sp;return sp.prototype=null,t}function vf(e){return function(t){return t==null?void 0:t[e]}}function mo(e,t){return e!=null&&KC.call(e,t)}function kf(e,t){for(var r=t.length,n=0;n<r;n++){if(e==null)return;e=e[t[n]]}return r?e:void 0}var YC=Math.pow(2,53)-1,ii=vf("length");function fo(e){var t=ii(e);return typeof t=="number"&&t>=0&&t<=YC}function Ss(e,t,r){t=El(t,r);var n,a;if(fo(e))for(n=0,a=e.length;n<a;n++)t(e[n],n,e);else{var c=zn(e);for(n=0,a=c.length;n<a;n++)t(e[c[n]],c[n],e)}return e}function up(e,t,r){t=ai(t,r);for(var n=!fo(e)&&zn(e),a=(n||e).length,c=Array(a),l=0;l<a;l++){var g=n?n[l]:l;c[l]=t(e[g],g,e)}return c}function Ef(e){var t=function(r,n,a,c){var l=!fo(r)&&zn(r),g=(l||r).length,p=e>0?0:g-1;for(c||(a=r[l?l[p]:p],p+=e);p>=0&&p<g;p+=e){var f=l?l[p]:p;a=n(a,r[f],f,r)}return a};return function(r,n,a,c){var l=arguments.length>=3;return t(r,El(n,c,4),a,l)}}var OL=Ef(1),FL=Ef(-1);function Ds(e,t,r){var n=[];return t=ai(t,r),Ss(e,function(a,c,l){t(a,c,l)&&n.push(a)}),n}function Pa(e,t,r,n){return fo(e)||(e=Sl(e)),(typeof r!="number"||n)&&(r=0),nT(e,t,r)>=0}var _L=pn(function(e,t,r){var n,a;return da(t)?a=t:Ms(t)&&(n=t.slice(0,-1),t=t[t.length-1]),up(e,function(c){var l=a;if(!l){if(n&&n.length&&(c=kf(c,n)),c==null)return;l=c[t]}return l==null?l:l.apply(c,r)})});function JC(e,t){return up(e,Gf(t))}function QC(e,t,r){var n=-1/0,a=-1/0,c,l;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=fo(e)?e:Sl(e);for(var g=0,p=e.length;g<p;g++)c=e[g],c!=null&&c>n&&(n=c)}else t=ai(t,r),Ss(e,function(f,w,M){l=t(f,w,M),(l>a||l===-1/0&&n===-1/0)&&(n=f,a=l)});return n}function Cl(e,t){return function(r,n,a){var c=t?[[],[]]:{};return n=ai(n,a),Ss(r,function(l,g){var p=n(l,g,r);e(c,l,p)}),c}}var RL=Cl(function(e,t,r){mo(e,r)?e[r].push(t):e[r]=[t]}),qL=Cl(function(e,t,r){e[r]=t}),BL=Cl(function(e,t,r){mo(e,r)?e[r]++:e[r]=1});var UL=Cl(function(e,t,r){e[r?0:1].push(t)},!0);function yo(e,t,r,n){n=n||[];for(var a=n.length,c=0,l=ii(e);c<l;c++){var g=e[c];if(fo(g)&&(Ms(g)||lp(g)))if(t)for(var p=0,f=g.length;p<f;)n[a++]=g[p++];else yo(g,t,r,n),a=n.length;else r||(n[a++]=g)}return n}var Cf=pn(function(e,t){return XC(e,t)});function pp(e,t,r,n){bT(t)||(n=r,r=t,t=!1),r!=null&&(r=ai(r,n));for(var a=[],c=[],l=0,g=ii(e);l<g;l++){var p=e[l],f=r?r(p,l,e):p;t&&!r?((!l||c!==f)&&a.push(p),c=f):r?Pa(c,f)||(c.push(f),a.push(p)):Pa(a,p)||a.push(p)}return a}var $L=pn(function(e){return pp(yo(e,!0,!0))});var XC=pn(function(e,t){return t=yo(t,!0,!0),Ds(e,function(r){return!Pa(t,r)})});function ZC(e){for(var t=e&&QC(e,ii).length||0,r=Array(t),n=0;n<t;n++)r[n]=JC(e,n);return r}var zL=pn(ZC);function Tf(e){return function(t,r,n){r=ai(r,n);for(var a=ii(t),c=e>0?0:a-1;c>=0&&c<a;c+=e)if(r(t[c],c,t))return c;return-1}}var eT=Tf(1),tT=Tf(-1);function rT(e,t,r,n){r=ai(r,n,1);for(var a=r(t),c=0,l=ii(e);c<l;){var g=Math.floor((c+l)/2);r(e[g])<a?c=g+1:l=g}return c}function Sf(e,t,r){return function(n,a,c){var l=0,g=ii(n);if(typeof c=="number")e>0?l=c>=0?c:Math.max(c+g,l):g=c>=0?Math.min(c+1,g):c+g+1;else if(r&&c&&g)return c=r(n,a),n[c]===a?c:-1;if(a!==a)return c=t(zC.call(n,l,g),yT),c>=0?c+l:-1;for(c=e>0?l:g-1;c>=0&&c<g;c+=e)if(n[c]===a)return c;return-1}}var nT=Sf(1,eT,rT),KL=Sf(-1,tT);function Df(e,t,r,n,a){if(!(n instanceof t))return e.apply(r,a);var c=jC(e.prototype),l=e.apply(c,a);return xo(l)?l:c}var aT=pn(function(e,t,r){if(!da(e))throw new TypeError("Bind must be called on a function");var n=pn(function(a){return Df(e,n,t,this,r.concat(a))});return n}),Tl=pn(function(e,t){var r=Tl.placeholder,n=function(){for(var a=0,c=t.length,l=Array(c),g=0;g<c;g++)l[g]=t[g]===r?arguments[a++]:t[g];for(;a<arguments.length;)l.push(arguments[a++]);return Df(e,n,this,this,l)};return n});Tl.placeholder=Ft;var WL=pn(function(e,t){t=yo(t,!1,!1);var r=t.length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=aT(e[n],e)}});var iT=pn(function(e,t,r){return setTimeout(function(){return e.apply(null,r)},t)}),HL=Tl(iT,Ft,1);function bo(e,t,r){var n,a,c,l,g=0;r||(r={});var p=function(){g=r.leading===!1?0:bf(),n=null,l=e.apply(a,c),n||(a=c=null)},f=function(){var w=bf();!g&&r.leading===!1&&(g=w);var M=t-(w-g);return a=this,c=arguments,M<=0||M>t?(n&&(clearTimeout(n),n=null),g=w,l=e.apply(a,c),n||(a=c=null)):!n&&r.trailing!==!1&&(n=setTimeout(p,M)),l};return f.cancel=function(){clearTimeout(n),g=0,n=a=c=null},f}function oT(e){return function(){return!e.apply(this,arguments)}}function sT(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}var jL=Tl(sT,2),Mf=!{toString:null}.propertyIsEnumerable("toString"),yf=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function Af(e,t){var r=yf.length,n=e.constructor,a=da(n)&&n.prototype||dp,c="constructor";for(mo(e,c)&&!Pa(t,c)&&t.push(c);r--;)c=yf[r],c in e&&e[c]!==a[c]&&!Pa(t,c)&&t.push(c)}function zn(e){if(!xo(e))return[];if(mf)return mf(e);var t=[];for(var r in e)mo(e,r)&&t.push(r);return Mf&&Af(e,t),t}function gp(e){if(!xo(e))return[];var t=[];for(var r in e)t.push(r);return Mf&&Af(e,t),t}function Sl(e){for(var t=zn(e),r=t.length,n=Array(r),a=0;a<r;a++)n[a]=e[t[a]];return n}function cT(e){for(var t={},r=zn(e),n=0,a=r.length;n<a;n++)t[e[r[n]]]=r[n];return t}function hp(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||r==null)return r;for(var a=1;a<n;a++)for(var c=arguments[a],l=e(c),g=l.length,p=0;p<g;p++){var f=l[p];(!t||r[f]===void 0)&&(r[f]=c[f])}return r}}var lT=hp(gp),dT=hp(zn);function uT(e,t,r){return t in r}var pT=pn(function(e,t){var r={},n=t[0];if(e==null)return r;da(n)?(t.length>1&&(n=El(n,t[1])),t=gp(e)):(n=uT,t=yo(t,!1,!1),e=Object(e));for(var a=0,c=t.length;a<c;a++){var l=t[a],g=e[l];n(g,l,e)&&(r[l]=g)}return r}),YL=pn(function(e,t){var r=t[0],n;return da(r)?(r=oT(r),t.length>1&&(n=t[1])):(t=up(yo(t,!1,!1),String),r=function(a,c){return!Pa(t,c)}),pT(e,r,n)}),JL=hp(gp,!0);function Lf(e){return xo(e)?Ms(e)?e.slice():lT({},e):e}function gT(e,t){var r=zn(t),n=r.length;if(e==null)return!n;for(var a=Object(e),c=0;c<n;c++){var l=r[c];if(t[l]!==a[l]||!(l in a))return!1}return!0}function cp(e,t,r,n){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var a=typeof e;return a!=="function"&&a!=="object"&&typeof t!="object"?!1:hT(e,t,r,n)}function hT(e,t,r,n){e instanceof Ft&&(e=e._wrapped),t instanceof Ft&&(t=t._wrapped);var a=vl.call(e);if(a!==vl.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return hf.valueOf.call(e)===hf.valueOf.call(t)}var c=a==="[object Array]";if(!c){if(typeof e!="object"||typeof t!="object")return!1;var l=e.constructor,g=t.constructor;if(l!==g&&!(da(l)&&l instanceof l&&da(g)&&g instanceof g)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var p=r.length;p--;)if(r[p]===e)return n[p]===t;if(r.push(e),n.push(t),c){if(p=e.length,p!==t.length)return!1;for(;p--;)if(!cp(e[p],t[p],r,n))return!1}else{var f=zn(e),w;if(p=f.length,zn(t).length!==p)return!1;for(;p--;)if(w=f[p],!(mo(t,w)&&cp(e[w],t[w],r,n)))return!1}return r.pop(),n.pop(),!0}function ua(e,t){return cp(e,t)}function zr(e){return function(t){return vl.call(t)==="[object "+e+"]"}}var Ms=WC||zr("Array");function xo(e){var t=typeof e;return t==="function"||t==="object"&&!!e}var lp=zr("Arguments"),da=zr("Function"),QL=zr("String"),mT=zr("Number"),XL=zr("Date"),ZL=zr("RegExp"),eG=zr("Error"),tG=zr("Symbol"),rG=zr("Map"),nG=zr("WeakMap"),aG=zr("Set"),iG=zr("WeakSet");(function(){lp(arguments)||(lp=function(e){return mo(e,"callee")})})();var fT=wl.document&&wl.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof fT!="function"&&(da=function(e){return typeof e=="function"||!1});function yT(e){return mT(e)&&HC(e)}function bT(e){return e===!0||e===!1||vl.call(e)==="[object Boolean]"}function xT(e){return e}function Gf(e){return Ms(e)?function(t){return kf(t,e)}:vf(e)}function wT(e){return e=dT({},e),function(t){return gT(t,e)}}var bf=Date.now||function(){return new Date().getTime()},Vf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},vT=cT(Vf);function Nf(e){var t=function(c){return e[c]},r="(?:"+zn(e).join("|")+")",n=RegExp(r),a=RegExp(r,"g");return function(c){return c=c==null?"":""+c,n.test(c)?c.replace(a,t):c}}var kT=Nf(Vf),oG=Nf(vT);var ET=0;function If(e){var t=++ET+"";return e?e+t:t}var sG=Ft.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};function Pf(e,t){return e._chain?Ft(t).chain():t}Ss(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=kl[e];Ft.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),(e==="shift"||e==="splice")&&r.length===0&&delete r[0],Pf(this,r)}});Ss(["concat","join","slice"],function(e){var t=kl[e];Ft.prototype[e]=function(){return Pf(this,t.apply(this._wrapped,arguments))}});Ft.prototype.value=function(){return this._wrapped};Ft.prototype.valueOf=Ft.prototype.toJSON=Ft.prototype.value;Ft.prototype.toString=function(){return String(this._wrapped)};function As(e,t){if(!(isNaN(e)||isNaN(t)))return e>=0?Math.atan(t/e):Math.atan(t/e)+Math.PI}function mp(e,t,r=1){if(e===t)return!0;if(!isFinite(e)||!isFinite(t))return!1;if(r>50)throw new Error("Within "+(52-r)+" bits isn't really approximate any more");let n=Math.max(Math.max(Math.abs(e),Math.abs(t)),1),a=r===1?.5:Math.pow(.5,r);return n===n+a*Math.abs(t-e)}function wo(e,t=1e6){if(e===1/0)return{n:1/0,d:1};if(e===-1/0)return{n:-1/0,d:1};if(!isFinite(e))return{n:NaN,d:1};let r,n=0,a=1,c=1,l=0,g,p;for(;r=Math.floor(e),g=r*a+n,p=r*l+c,!(p>t||(n=a,c=l,a=g,l=p,e===r));)e=1/(e-r);return{n:a,d:l}}var TT=/\.?0+$/;function ST(e){return e.indexOf(".")===-1?e:e.replace(TT,"")}function DT(e){let t=/\.?0+e/;return e.replace(t,"e")}function Of(e){return 1e6/Math.sqrt(Math.abs(e))}function Dl(e){let t=Of(e);if(t<1||t>1e12)return!1;let{n:r,d:n}=wo(e,t);return n===1?!1:e===e+Math.pow(2,-3)*Math.abs(r/n-e)}function MT(e,t){if(t=t||{},isNaN(e)||!isFinite(e))return{type:"undefined"};if(e===0||t.zeroCutoff&&Math.abs(e)<t.zeroCutoff)return{type:"decimal",value:"0"};let r=t.smallCutoff||.001,n=t.bigCutoff||1e6,a=t.digits||10,l=DT(e.toExponential(a-2)).match(/([\d\.\-]+)e\+?([\d\-]+)/);if(!l)return{type:"undefined"};let g=parseInt(l[2],10)>=a;if(Dl(e)&&t.displayAsFraction){let f=wo(e,Of(e));return{type:"fraction",numerator:f.n.toString(),denominator:f.d.toString()}}else{if(Math.abs(e)>n||Math.abs(e)<r||g)return{type:"scientific",mantissa:l[1],exponent:l[2]};{let f=ST(e.toPrecision(a));return e!==Number(f)&&t.addEllipses&&(f+="..."),{type:"decimal",value:f}}}}function Ls(e,t){let r=MT(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return r.value;case"scientific":return r.mantissa+"\\times10^{"+r.exponent+"}";case"fraction":return r.denominator==="1"?r.numerator:r.numerator[0]==="-"?`-\\frac{${r.numerator.slice(1)}}{${r.denominator}}`:`\\frac{${r.numerator}}{${r.denominator}}`;default:return r}}function kt(e){e=e.replace("\\","");let t={pi:"\u03C0",tau:"\u03C4",theta:"\u03B8",phi:"\u03D5",div:"\xF7",cdot:"\u22C5",times:"\xD7",lt:"<",gt:">",le:"\u2264",ge:"\u2265",sim:"\u223C",ldots:"\u2026",prime:"\u2032",approx:"\u2248",to:"\u2192","->":"\u2192"};return t.hasOwnProperty(e)?t[e]:e}function Ff(e){let t=e.match(/^\$(\d+)$/);if(t)return`\\token{${t[1]}}`;let r=e.split("_"),n="";return r[0].length>1&&(n+="\\"),n+=r[0],r[1]&&(n+="_{"+r[1]+"}"),n}function fp(e){let t=e.match(/\\token\{(\d+)\}/);return t?`$${t[1]}`:(e=e.replace(/\\operatorname\{(.*)\}/,"$1"),e.replace(/[{}\\]/g,""))}var AT=/^[\+\-]?[\d]*(\.\d+)?$/;var _f=Na.StaticMath(document.createElement("span"));function bp(e){let t="";return AT.test(e)?(/^\+/.test(e)?(t="positive ",e=e.slice(1)):/^\-/.test(e)&&(t="negative ",e=e.slice(1)),t+=e.replace(/(\.)([0-9]+)/g,(r,n,a)=>n+a.split("").join(" ").trim())):(_f.latex(e),t=_f.mathspeak().trim()),t}var Ke=he(me());var qp={};eE(qp,{add:()=>KT,det:()=>aS,div:()=>YT,inv:()=>nS,isMatrix:()=>Pl,leftScale:()=>ZT,mul:()=>QT,nadd:()=>zT,ndiv:()=>jT,neg:()=>$T,nmul:()=>JT,nneg:()=>UT,npow:()=>eS,nsqrt:()=>rS,nsub:()=>WT,pow:()=>tS,rightScale:()=>XT,rref:()=>sS,sub:()=>HT,trace:()=>iS,transpose:()=>oS});function Gs(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e=Math.round(e),t=Math.round(t),e<0&&(e=-e),t<0&&(t=-t),t>e){let n=t;t=e,e=n}if(t===0)return e;let r=e%t;for(;r>0;)e=t,t=r,r=e%t;return t}function Vs(e,t){if(!isFinite(e)&&t===0)return NaN;if(e>=0||t===Math.floor(t))return Math.pow(e,t);let r=wo(t,100);return mp(r.n/r.d,t,2)&&r.d%2===1?(r.n%2===0?1:-1)*Math.pow(-e,t):NaN}function xp(e,t){return{n:e,d:t}}function At(e){return typeof e=="object"&&typeof e.n=="number"&&typeof e.d=="number"}var Ns=Math.pow(2,53)-1;function Is(e){let t=e.match(/^(-)?(\d*)?(?:\.(\d*))?$/);if(!t)return NaN;let r=t[1],n=t[2],a=t[3];if(!n&&!a)return NaN;let c=!!r;if(a){let l=a.replace(/0+$/,""),g=l.length,p=Math.pow(10,g),f=parseInt(n||"0",10)*p+parseInt(l||"0",10);return f>Ns||p>Ns?parseFloat(e):Qe(c?-f:f,p)}else{let l=parseInt(n,10);return l>Ns?parseFloat(e):Qe(c?-l:l,1)}}function ze(e){return At(e)?e.n/e.d:+e}function Qe(e,t){if(!isFinite(e)||!isFinite(t)||t===0||Math.floor(e)!==e||Math.floor(t)!==t||Math.abs(e)>Ns||Math.abs(t)>Ns)return e/t;t<0&&(e=-e,t=-t);let r=Gs(e,t);return xp(e/r,t/r)}function Kn(e){return At(e)?xp(-e.n,e.d):-e}function Rf(e){return At(e)?e.n===0?e.d/e.n:xp(e.n<0?-e.d:e.d,Math.abs(e.n)):1/e}function pa(e,t){if(!At(e)||!At(t))return ze(e)+ze(t);var r=Gs(e.d,t.d);return Qe(e.n*(t.d/r)+t.n*(e.d/r),e.d/r*t.d)}function Oa(e,t){if(!At(e)||!At(t))return ze(e)*ze(t);var r=Gs(e.n,t.d),n=Gs(t.n,e.d);return Qe(e.n/r*(t.n/n),e.d/n*(t.d/r))}function Ps(e,t){return pa(e,Kn(t))}function Fa(e,t){return!At(e)||!At(t)?ze(e)/ze(t):Oa(e,Rf(t))}function GT(e,t){let r=e,n=t;if(t.n<0&&(n=Kn(t),r=Rf(e)),!At(r)||!At(n))return Vs(ze(e),ze(t));if(e=r,t=n,t.d===1)return Qe(Math.pow(e.n,t.n),Math.pow(e.d,t.n));let a=e.n<0;if(a&&t.d%2!==1)return NaN;let l=(a?-1:1)*Math.round(Math.pow(Math.abs(e.n),1/t.d)),g=Math.round(Math.pow(Math.abs(e.d),1/t.d));return Math.pow(l,t.d)!==e.n||Math.pow(g,t.d)!==e.d?Vs(ze(e),ze(t)):Qe(Math.pow(l,t.n),Math.pow(g,t.n))}function qf(e,t){if(!At(e)||!At(t))return Vs(ze(e),ze(t));let r=GT(e,t);return At(r)?r:Vs(ze(e),ze(t))}function Bf(e){if(!At(e))return Math.sqrt(e);let t=Math.round(Math.sqrt(e.n)),r=Math.round(Math.sqrt(e.d));return t*t!==e.n||r*r!==e.d?Math.sqrt(ze(e)):Qe(t,r)}var VT=Math.pow(2,-52);function $f(e){let t=[];for(let r of e)t.push(r.slice());return t}function zf(e){let{numRows:t,numCols:r}=Wr(e),n=[];for(let a=0;a<r;a++)n.push([]);for(let a=0;a<t;a++)for(let c=0;c<r;c++)n[c].push(e[a][c]);return n}function Wr(e){let t=e.length,r=t>0?e[0].length:0;return{numRows:t,numCols:r}}function ga(e){let{numRows:t,numCols:r}=Wr(e);return t===r}function Os(e,t){var r=Wr(e),n=Wr(t);return r.numCols===n.numCols&&r.numRows===n.numRows}function Ml(e){if(!ga(e))return!0;let t=ze(Ep(e));return!isFinite(t)||t===0}function wp(){throw new Error("Matrix dimension mismatch")}function vp(){throw new Error("Expected square matrix")}function Kf(e,t){Os(e,t)||wp();let r=[];for(let n=0;n<e.length;n++){let a=[];for(let c=0;c<e[n].length;c++)a.push(pa(e[n][c],t[n][c]));r.push(a)}return r}function Wf(e,t){Os(e,t)||wp();let r=[];for(let n=0;n<e.length;n++){let a=[];for(let c=0;c<e[n].length;c++)a.push(Ps(e[n][c],t[n][c]));r.push(a)}return r}function vo(e,t){let r=Wr(e),n=Wr(t);r.numCols!==n.numRows&&wp();let a=[];for(let c=0;c<r.numRows;c++){let l=[];for(let g=0;g<n.numCols;g++){let p=Qe(0,1);for(let f=0;f<e[c].length;f++)p=pa(p,Oa(e[c][f],t[f][g]));l.push(p)}a.push(l)}return a}function Hf(e,t){if(ga(e)||vp(),t=ze(t),t!==Math.floor(t))throw new Error("Cannot raise a matrix to a fractional power");let r=NT(Wr(e).numCols);if(t===0)return r;t<0&&(t=-t,e=Cp(e));let n=r;for(;t>1;)t%2===1?(n=vo(e,n),e=vo(e,e),t=(t-1)/2):(e=vo(e,e),t=t/2);return vo(e,n)}function kp(e,t){let r=[];for(let n of e){let a=[];for(let c of n)a.push(Oa(c,t));r.push(a)}return r}function jf(e,t){let r=[];for(let n of e){let a=[];for(let c of n)a.push(Fa(c,t));r.push(a)}return r}function Yf(e){let t=[];for(let r of e){let n=[];for(let a of r)n.push(Kn(a));t.push(n)}return t}function Ep(e){let{determinant:t}=Tp($f(e));return t}function Jf(e){ga(e)||vp();let{numRows:t}=Wr(e),r=Qe(0,1);for(let n=0;n<t;n++)r=pa(r,e[n][n]);return r}function Cp(e){if(ga(e)||vp(),Ml(e))throw new Error("Cannot invert a singular matrix");let{numRows:t,numCols:r}=Wr(e),n=[];for(let c=0;c<t;c++){let l=e[c].slice();for(let g=0;g<r;g++)l.push(Qe(c===g?1:0,1));n.push(l)}Tp(n);let a=[];for(let c of n)a.push(c.slice(r));return a}function NT(e){let t=[];for(let r=0;r<e;r++){let n=[];for(let a=0;a<e;a++)n.push(Qe(r===a?1:0,1));t.push(n)}return t}function Qf(e){let t=$f(e);return Tp(t),t}function IT(e){let t=0;for(let r of e)for(let n of r){let a=Math.abs(ze(n));if(!isFinite(a))return NaN;a>t&&(t=a)}return t}function Uf(e){for(let t=0;t<e.length;t++)for(let r=0;r<e[t].length;r++)e[t][r]=NaN}function Tp(e){let{numRows:t,numCols:r}=Wr(e),n=IT(e);if(!isFinite(n))return Uf(e),{determinant:NaN,rank:0};let a=Math.max(t,r)*n*VT,c=Qe(1,1),l=0,g=0;for(;l<t&&g<r;){let p=l,f=Math.abs(ze(e[l][g]));for(let M=l+1;M<t;M++){let G=Math.abs(ze(e[M][g]));(!isFinite(G)||G>f)&&(f=G,p=M)}if(!isFinite(f))return Uf(e),{determinant:NaN,rank:0};if(f===0){c=Qe(0,1),g+=1;continue}if(!At(e[p][g])&&f<a){for(let M=l;M<t;M++)e[l][M]=0;c=0,g+=1;continue}if(p!==l){c=Kn(c);let M=e[l];e[l]=e[p],e[p]=M}for(let M=0;M<t;M++){if(M===l)continue;let G=Fa(e[M][g],e[l][g]);e[M][g]=Qe(0,1);for(let R=g+1;R<r;R++)e[M][R]=Ps(e[M][R],Oa(G,e[l][R]))}let w=e[l][g];c=Oa(c,w),e[l][g]=Qe(1,1);for(let M=g+1;M<r;M++)e[l][M]=Fa(e[l][M],w);l+=1,g+=1}return{rank:l,determinant:l===t&&l===r?c:Qe(0,1)}}function wr(e,t,r){return{input:e,start:t,end:r}}function An(e,t){return wr(e,t,t)}function nr(e,t){if(e.input!==t.input)throw new Error("Programming Error: cannot form a span on different inputs");return wr(e.input,e.start,t.end)}function ar(e){return e.input.slice(e.start,e.end)}var Zf=()=>({type:"unknown"});function $(e,t){return{key:e,vars:t}}var gn=0,V=1,ko=2,J=3,Ar=4,Al=5,Fr=6,mt=7,ha=8,Hr=9,Wn=10,Eo=11,Ll=12,Qt=13,_a=14,si=15,_t=16,ci=17,ut=18,ma=19,tt=20,li=21,nt=22,di=23,qe=24,ui=25,Et=26,pi=27,Rt=28,fa=29,vt=30,ya=31,st=32,gi=33,Xt=34,hi=35,je=100,mi=101,jr=102,fi=103,wi=104,yi=105,vi=106,bi=107,Yr=108,xi=109,FT={Any:gn,Number:V,Bool:ko,Point:J,Point3D:je,Distribution:Ar,Action:Al,ListOfAny:Fr,ListOfNumber:mt,ListOfBool:ha,ListOfPoint:Hr,ListOfPoint3D:mi,ListOfDistribution:Wn,EmptyList:Eo,ErrorType:Ll,SeedType:Qt,RGBColor:_a,ListOfColor:si,Polygon:_t,ListOfPolygon:ci,Segment:ut,ListOfSegment:ma,Circle:tt,ListOfCircle:li,Arc:nt,ListOfArc:di,Line:qe,ListOfLine:ui,Ray:Et,ListOfRay:pi,Vector:Xt,ListOfVector:hi,AngleMarker:Rt,ListOfAngleMarker:fa,DirectedAngleMarker:vt,ListOfDirectedAngleMarker:ya,Transformation:st,ListOfTransformation:gi,Segment3D:jr,ListOfSegment3D:fi,Triangle3D:wi,ListOfTriangle3D:yi,Sphere3D:vi,ListOfSphere3D:bi,Vector3D:Yr,ListOfVector3D:xi},yG=Object.values(FT);function ty(e){return Array.isArray(e)?e.length:e.initial.length}function ry(e){return Array.isArray(e)?e.length:1/0}function Fs(e){if(typeof e=="number")return qT(e)?{meta:"union",types:[e,RT(e)]}:e;let t=[];for(let r of e.types){let n=Fs(r);typeof n=="number"?t.push(n):t.push(...n.types)}return{meta:"union",types:t}}function ki(e){return Array.isArray(e)?e.map(Fs):{type:"variadic",initial:e.initial.map(Fs),rest:Fs(e.rest)}}function _T(e){switch(e){case gn:return"Any";case V:return"Number";case ko:return"Bool";case J:return"Point";case je:return"Point3D";case Ar:return"Distribution";case Al:return"Action";case Fr:return"ListOfAny";case mt:return"ListOfNumber";case ha:return"ListOfBool";case Hr:return"ListOfPoint";case mi:return"ListOfPoint3D";case Wn:return"ListOfDistribution";case Eo:return"EmptyList";case Ll:return"ErrorType";case Qt:return"SeedType";case _a:return"RGBColor";case si:return"ListOfColor";case _t:return"Polygon";case ci:return"ListOfPolygon";case ut:return"Segment";case ma:return"ListOfSegment";case tt:return"Circle";case li:return"ListOfCircle";case nt:return"Arc";case di:return"ListOfArc";case qe:return"Line";case ui:return"ListOfLine";case Et:return"Ray";case pi:return"ListOfRay";case Xt:return"Vector";case hi:return"ListOfVector";case Rt:return"Angle";case fa:return"ListOfAngle";case vt:return"DirectedAngle";case ya:return"ListOfDirectedAngle";case st:return"Transformation";case gi:return"ListOfTransformation";case jr:return"Segment3D";case fi:return"ListOfSegment3D";case Yr:return"Vector3D";case xi:return"ListOfVector3D";case wi:return"Triangle3D";case yi:return"ListOfTriangle3D";case vi:return"Sphere3D";case bi:return"ListOfSphere3D";default:let t=e;throw new Error(`Invalid type: ${t}`)}}var Ei=[Fr,mt,ha,Hr,mi,Wn,Eo,si,ci,ma,li,di,ui,pi,hi,fa,ya,gi,fi,xi,yi,bi],bG={[Fr]:gn,[Eo]:V,[mt]:V,[ha]:ko,[Hr]:J,[mi]:je,[Wn]:Ar,[si]:_a,[ci]:_t,[ma]:ut,[li]:tt,[di]:nt,[ui]:qe,[pi]:Et,[hi]:Xt,[fa]:Rt,[ya]:vt,[gi]:st,[fi]:jr,[xi]:Yr,[yi]:wi,[bi]:vi};function RT(e){switch(e){case gn:return Fr;case V:return mt;case ko:return ha;case J:return Hr;case je:return mi;case Ar:return Wn;case _a:return si;case _t:return ci;case ut:return ma;case tt:return li;case nt:return di;case qe:return ui;case Et:return pi;case Xt:return hi;case Rt:return fa;case vt:return ya;case st:return gi;case jr:return fi;case Yr:return xi;case wi:return yi;case vi:return bi;case Eo:case mt:case ha:case Hr:case mi:case Wn:case si:case ci:case ma:case li:case di:case ui:case pi:case hi:case fa:case ya:case gi:case fi:case xi:case yi:case bi:case Fr:case Ll:case Qt:case Al:throw new Error("Type "+_T(e)+" does not implement listType.");default:let t=e;throw new Error(`Invalid type: ${t}`)}}function qT(e){switch(e){case gn:case V:case ko:case J:case je:case Ar:case _a:case _t:case ut:case tt:case nt:case qe:case Et:case Xt:case Rt:case vt:case st:case jr:case Yr:case wi:case vi:return!0;case Eo:case mt:case ha:case Hr:case mi:case Wn:case si:case ci:case ma:case li:case di:case ui:case pi:case hi:case fa:case ya:case gi:case fi:case xi:case yi:case bi:case Fr:case Qt:case Al:case Ll:return!1;default:throw new Error(`Invalid type: ${e}`)}}var Ra=class{constructor(){this.exportPenalty=0;this._dependencies=[],this._dummyDependencies=[],this._updateSymbols=[],this._substitutionSymbols=[],this._scope={definitions:[],dependencies:[],substitutionDependencies:[],isSubstitutionBody:!1,scopes:[]},this._exports=[]}setInputSpan(t){this._inputSpan=t}getInputString(){return this._inputSpan===void 0?"":ar(this._inputSpan)}getInputSpan(){return this._inputSpan}shouldExportAns(){return!1}getAnsVariable(){return this.shouldExportAns()&&this.userData&&this.userData.hasOwnProperty("index")?["ans_"+this.userData.index]:[]}addDependency(t){this._dependencies.indexOf(t)===-1&&this._dependencies.push(t),this._scope.dependencies.indexOf(t)===-1&&this._scope.dependencies.push(t)}addDependencies(t){for(var r=0;r<t.length;r++)this.addDependency(t[r])}addDummyDependency(t){this._dependencies.indexOf(t)===-1&&this._dependencies.push(t),this._dummyDependencies.indexOf(t)===-1&&this._dummyDependencies.push(t)}addDummyDependencies(t){for(var r=0;r<t.length;r++)this.addDummyDependency(t[r])}addUpdateSymbol(t){this._dependencies.indexOf(t)===-1&&this._dependencies.push(t),this._updateSymbols.indexOf(t)===-1&&this._updateSymbols.push(t)}addSubstitutionSymbol(t){this._dummyDependencies.indexOf(t)===-1&&this._dummyDependencies.push(t),this._substitutionSymbols.indexOf(t)===-1&&this._substitutionSymbols.push(t)}addSubstitutionDependencies(t){for(var r=0;r<t.length;r++){var n=t[r];if(this._dependencies.indexOf(n)===-1)throw new Error("Programming error: substitution dependency "+n+" must also be registered as a regular dependency");this._scope.substitutionDependencies.indexOf(n)===-1&&this._scope.substitutionDependencies.push(n)}}mergeDependencies(...t){for(var r=0;r<t.length;r++){var n=t[r],a;for(a=0;a<n._dependencies.length;a++)this._dependencies.indexOf(n._dependencies[a])===-1&&this._dependencies.push(n._dependencies[a]);for(a=0;a<n._updateSymbols.length;a++)this._updateSymbols.indexOf(n._updateSymbols[a])===-1&&this._updateSymbols.push(n._updateSymbols[a]);for(a=0;a<n._substitutionSymbols.length;a++)this._substitutionSymbols.indexOf(n._substitutionSymbols[a])===-1&&this._substitutionSymbols.push(n._substitutionSymbols[a]);for(a=0;a<n._scope.dependencies.length;a++)this._scope.dependencies.indexOf(n._scope.dependencies[a])===-1&&this._scope.dependencies.push(n._scope.dependencies[a]);for(a=0;a<n._scope.substitutionDependencies.length;a++)this._scope.substitutionDependencies.indexOf(n._scope.substitutionDependencies[a])===-1&&this._scope.substitutionDependencies.push(n._scope.substitutionDependencies[a]);this.addDummyDependencies(n.getDummyDependencies()),Array.prototype.push.apply(this._scope.scopes,n._scope.scopes)}}mergeDependenciesInScope(t,r,n){this.addDummyDependencies(t);var a=r.getScope(),c={definitions:t,dependencies:a.dependencies,substitutionDependencies:a.substitutionDependencies,scopes:a.scopes,isSubstitutionBody:!!(n&&n.isSubstitutionBody)};this._scope.scopes.push(c);for(var l=0;l<r._dependencies.length;l++)this._dependencies.indexOf(r._dependencies[l])===-1&&this._dependencies.push(r._dependencies[l]);for(l=0;l<r._updateSymbols.length;l++)this._updateSymbols.indexOf(r._updateSymbols[l])===-1&&this._updateSymbols.push(r._updateSymbols[l]);for(l=0;l<r._substitutionSymbols.length;l++)this._substitutionSymbols.indexOf(r._substitutionSymbols[l])===-1&&this._substitutionSymbols.push(r._substitutionSymbols[l]);this.addDummyDependencies(r.getDummyDependencies())}getDependencies(){return this._dependencies}graphmodeDependencies(t,r){return this.getDependencies()}getDummyDependencies(){return this._dummyDependencies}getUpdateSymbols(){return this._updateSymbols}getSubstitutionSymbols(){return this._substitutionSymbols}getScope(){return this._scope}dependsOn(t){return this._dependencies.indexOf(t)>-1}getExports(t){var r=this._exports||[];if(this.userData&&"id"in this.userData){var n=this.userData.id;r=r.concat(["idref_"+n])}return t.ansEnabled()&&(r=r.concat(this.getAnsVariable())),r}getLegalExports(t){return this.getExports(t).filter(function(r){return!t.assignmentForbidden(r)})}exportsSymbol(t){return this._exports.indexOf(t)>-1}exportTo(t,r,n){for(var a=this.getLegalExports(t),c=0;c<a.length;c++){var l=a[c];if(n[l])return;n[l]=r.blocksExport?r:this}}getOperator(){return this.operator||"="}isInequality(){return!1}isShadeBetween(){return!1}getAllIds(){return this.userData?[this.userData.id]:[]}getEvaluationInfo(){return!1}shouldPromoteToSlider(t){return!1}getSliderVariables(t,r,n){var a=t.sliderVariables(n!=null?n:r.getDependencies());return r.valueType===J||r.valueType===Hr?a.filter(function(c){return!t.validParametricVariable(c)}):a}getCompiledDerivative(){var t=this.getDependencies(),n=this.takeDerivative(t[0]||"x");return n.getCompiledFunction()}asValue(){}boundDomain(t){return Zf()}getCursorContext(){}polynomialOrder(t){}getPolynomialCoefficients(t){}asTypedValue(){}substitute(t){}getExpressionType(t,r){}tableInfo(t,r){}analyzeFourFunction(t,r,n){}analyzeScientific(t,r,n){}analyzeSingleExpressionScientific(t,r,n){}getGraphMode(t,r){}};var z=class extends Ra{constructor(r){super();this.isError=!0;this._msg=r,this.blocksExport=!0}evaluateOnce(r){return this._msg}getError(){return this._msg}setDependencies(r){return this.addDependencies(r),this}setActionValue(r){this.actionValue=r}allowExport(){return this.blocksExport=!1,this}setCursorContext(r){this.cursorContext=r}getCursorContext(){return this.cursorContext}};var BT=!1;function ny(...e){BT&&console.error(...e)}function Ci(e){if(ny){let t=e instanceof Error?e:new Error(`${e}`);ny(t.stack)}return new z($("shared-calculator-error-parse-error"))}function Sp(e){return e=kt(e),new z($("shared-calculator-error-unrecognized-symbol",{symbol:e}))}function ay(){return new z($("shared-calculator-error-unexpected-inequality"))}function Ti(e){return e=kt(e),new z($("shared-calculator-error-unexpected-symbol",{symbol:e}))}function iy(e){return new z($("shared-calculator-error-add-type-error",{symbol1:e[0],symbol2:e[1]})).allowExport()}function oy(e){return new z($("shared-calculator-error-subtract-type-error",{symbol1:e[0],symbol2:e[1]})).allowExport()}function sy(e){return new z($("shared-calculator-error-multiply-type-error",{symbol1:e[0],symbol2:e[1]})).allowExport()}function cy(e){return new z($("shared-calculator-error-divide-type-error",{symbol1:e[0],symbol2:e[1]})).allowExport()}function ly(e){return new z($("shared-calculator-error-exponent-type-error",{symbol1:e[0],symbol2:e[1]})).allowExport()}function dy(e){return new z($("shared-calculator-error-negative-type-error",{symbol:e[0]})).allowExport()}function uy(e,t){switch(t.length){case 1:return new z($("shared-calculator-error-function-type-error-1",{fn:kt(e),arg:t[0]})).allowExport();case 2:return new z($("shared-calculator-error-function-type-error-2",{fn:kt(e),arg1:t[0],arg2:t[1]})).allowExport();default:return new z($("shared-calculator-error-function-type-error-many",{fn:kt(e)})).allowExport()}}function py(){return new z($("shared-calculator-error-update-rule-non-identifier-lhs",{arrow:"\u2192",example:"a"}))}function Vl(e,t,r,n){e=kt(e);var a,c;if(t===1)n||(n=e+"(x)"),c=$("shared-calculator-error-wrong-arity-supplement",{recommendation:n}),r>1?a=$("shared-calculator-error-wrong-arity-single-arg-too-many",{dependency:e,supplement:c}):a=$("shared-calculator-error-wrong-arity-single-arg-too-few",{dependency:e,supplement:c});else{var l=[];if(!n){for(var g=0;g<t;g++)l[g]=g+1;n=kt(e)+"("+l.join(", ")+")"}c=$("shared-calculator-error-wrong-arity-supplement",{recommendation:n}),a=$("shared-calculator-error-wrong-arity-many-arg",{dependency:e,assignment_arity:t,supplement:c})}return new z(a)}function Dp(){return new z($("shared-calculator-error-primed-function-arity"))}function Mp(e){return e=kt(e),new z($("shared-calculator-error-bad-implicit-call",{symbol:e}))}function gy(e,t){return new z($("shared-calculator-error-adjacent-numbers",{left:e,right:t}))}function Ap(e){return new z($("shared-calculator-error-adjacent-mixed-number",{mixedNumber:e}))}function hy(){return new z($("shared-calculator-error-token-with-subscript"))}function my(e){return e=kt(e),e==="%"&&(e="% of"),new z($("shared-calculator-error-binary-operator-missing-operand",{symbol:e}))}function fy(e){return e=kt(e),new z($("shared-calculator-error-unary-operator-missing-left",{symbol:e}))}function yy(e){return e=kt(e),new z($("shared-calculator-error-unary-operator-missing-right",{symbol:e}))}function by(){return new z($("shared-calculator-error-fraction-missing-numerator"))}function xy(){return new z($("shared-calculator-error-fraction-missing-denominator"))}function wy(){return new z($("shared-calculator-error-fraction-empty"))}function Lp(){return new z($("shared-calculator-error-empty-subscript"))}function vy(){return new z($("shared-calculator-error-empty-superscript"))}function ky(e){return e=kt(e),new z($("shared-calculator-error-invalid-subscript",{symbol:e}))}function Ey(){return new z($("shared-calculator-error-invalid-operator-name"))}function Cy(){return new z($("shared-calculator-error-unexpected-subscript"))}function Ty(){return new z($("shared-calculator-error-superscript-with-prime"))}function Gp(){return new z($("shared-calculator-error-unexpected-prime"))}function Vp(){return new z($("shared-calculator-error-prime-without-paren"))}function Sy(){return new z($("shared-calculator-error-empty-radical"))}function Dy(){return new z($("shared-calculator-error-empty-radical-index"))}function My(){return new z($("shared-calculator-error-empty-paren"))}function Ay(){return new z($("shared-calculator-error-empty-square-bracket"))}function Ly(){return new z($("shared-calculator-error-empty-pipe"))}function Gy(e){var t=e+"^2",r=e+"^-1";return new z($("shared-calculator-error-bad-trig-exponent",{form1:t,form2:r}))}function Vy(e){var t=e+"^2";return new z($("shared-calculator-error-bad-log-exponent",{form:t}))}function Np(){return new z($("shared-calculator-error-inequality-chain-too-long"))}function Ny(){return new z($("shared-calculator-error-piecewise-missing-condition"))}function Iy(){return new z($("shared-calculator-error-piecewise-part-missing-condition"))}function Py(){return new z($("shared-calculator-error-colon-missing-condition"))}function Oy(){return new z($("shared-calculator-error-blank-expression"))}function Fy(e){return e=kt(e),new z($("shared-calculator-error-function-not-defined",{dependency:e}))}function _y(e){return e=kt(e),new z($("shared-calculator-error-cannot-subscript",{symbol:e}))}function Ry(e){if(e=e.map(kt),e.length===0)return new z($("shared-calculator-error-too-many-variables-no-symbols"));var t=e.pop()||"";return e.length>0?new z($("shared-calculator-error-too-many-variables-many-symbols",{variables:e.join("', '"),lastVariable:t})):new z($("shared-calculator-error-too-many-variables-one-symbol",{variable:t}))}function qy(e){return e=kt(e),new z($("shared-calculator-error-variable-as-function",{dependency:e}))}function By(){return new z($("shared-calculator-error-invalid-half-empty-range"))}function Uy(){return new z($("shared-calculator-error-sum-missing-bound"))}function $y(){return new z($("shared-calculator-error-product-missing-bound"))}function zy(){return new z($("shared-calculator-error-incorrect-sum-lower-bound"))}function Ky(){return new z($("shared-calculator-error-incorrect-product-lower-bound"))}function Wy(){return new z($("shared-calculator-error-integral-missing-bound"))}function Hy(){return new z($("shared-calculator-error-integral-missing-differential"))}function jy(){return new z($("shared-calculator-error-differential-with-superscript"))}function Yy(){return new z($("shared-calculator-error-sum-missing-body"))}function Jy(){return new z($("shared-calculator-error-product-missing-body"))}function Qy(){return new z($("shared-calculator-error-integral-missing-body"))}function Xy(){return new z($("shared-calculator-error-derivative-missing-body"))}function Zy(e,t){return e=kt(e),t=kt(t),new z($("shared-calculator-error-mismatched-braces",{symbol1:e,symbol2:t}))}function eb(){return new z($("shared-calculator-error-percent-missing-of"))}function Co(e){return new z($("shared-calculator-error-bad-symbol-context",{symbol:kt(e)}))}function Ip(){return new z($("shared-calculator-error-write-integral",{command:"integral",symbol:"\u222B"}))}function Nl(e){return new z($("shared-calculator-error-function-unsupported",{symbol:kt(e)}))}function tb(){return new z($("shared-calculator-error-function-definition-unsupported"))}function Pp(){return new z($("shared-calculator-error-equations-unsupported"))}function Si(){return new z($("shared-calculator-error-inequalities-unsupported"))}function rb(){return new z($("shared-calculator-error-regressions-unsupported"))}function nb(){return new z($("shared-calculator-error-points-unsupported"))}function Ye(){return new z($("shared-calculator-error-feature-unavailable"))}function Op(){return new z($("basic-calculator-error-fractions-unavailable"))}function ab(){return new z($("shared-calculator-error-non-square-determinant"))}function ib(){return new z($("shared-calculator-error-non-square-trace"))}function ob(){return new z($("shared-calculator-error-non-square-inverse"))}function Fp(){return new z($("shared-calculator-error-non-singular-inverse"))}function sb(){return new z($("shared-calculator-error-matrix-assignment"))}function cb(){return new z($("shared-calculator-error-matrix-add-dimensions"))}function lb(){return new z($("shared-calculator-error-matrix-subtract-dimensions"))}function db(){return new z($("shared-calculator-error-matrix-multiply-dimensions"))}function ub(){return new z($("shared-calculator-error-matrix-fractional-power"))}function pb(){return new z($("shared-calculator-error-matrix-power-dimensions"))}function gb(e){return new z($("shared-calculator-error-matrix-element-type-error",{arg:e[0]}))}function hb(e){return new z($("shared-calculator-error-matrix-invalid-variable",{symbol:kt(e)}))}function mb(){return new z($("shared-calculator-error-incorrect-list-comprehension-input"))}function _p(){return new z($("shared-calculator-error-unexpected-for-keyword"))}function fb(){return new z($("shared-calculator-error-substitution-invalid-assignments"))}function Rp(){return new z($("shared-calculator-error-substitution-nested"))}function Il(){return new z($("shared-calculator-error-substitution-ambiguous-comma"))}function yb(e){return new z($("shared-calculator-error-substitution-duplicate-assignment",{symbol:e}))}var UT=Kn,$T=Yf,zT=pa;function KT(e,t){if(!Os(e,t))throw cb();return Kf(e,t)}var WT=Ps;function HT(e,t){if(!Os(e,t))throw lb();return Wf(e,t)}var jT=Fa,YT=jf,JT=Oa;function Pl(e){return Array.isArray(e)}function QT(e,t){if(Wr(e).numCols!==Wr(t).numRows)throw db();return vo(e,t)}var XT=kp;function ZT(e,t){return kp(t,e)}var eS=qf;function tS(e,t){if(t=ze(t),Math.floor(t)!==t)throw ub();if(!ga(e))throw pb();if(t<0&&Ml(e))throw Fp();return Hf(e,t)}var rS=Bf;function nS(e){if(!ga(e))throw ob();if(Ml(e))throw Fp();return Cp(e)}function aS(e){if(!ga(e))throw ab();return Ep(e)}function iS(e){if(!ga(e))throw ib();return Jf(e)}var oS=zf,sS=Qf;var ft=he(me());lr();var IG=function(){{var e="_*_";ee.Event.prototype.wasHandled=function(t){t=t||e;var r=this.originalEvent,n=r&&r.handledBy;if(n&&n[t])return!0;if(t!==e)return!1;var a=this.target.closest("[handleEvent]");return a&&a!==this.currentTarget?a.getAttribute("handleEvent")!=="false":!1},ee.Event.prototype.handle=function(t){t=t||e;var r=this.originalEvent;if(r){var n=r.handledBy;n||(n=r.handledBy={}),n[t]=!0}}}}();var cS=function(){{var e=function(){for(var t={8:this.BACKSPACE="Backspace",9:this.TAB="Tab",13:this.ENTER="Enter",16:this.SHIFT="Shift",17:this.CONTROL="Control",18:this.ALT="Alt",20:this.CAPSLOCK="CapsLock",27:this.ESCAPE="Esc",32:this.SPACEBAR="Space",33:this.PAGEUP="PageUp",34:this.PAGEDOWN="PageDown",35:this.END="End",36:this.HOME="Home",37:this.LEFT="Left",38:this.UP="Up",39:this.RIGHT="Right",40:this.DOWN="Down",46:this.DELETE="Del"},r={Backspace:this.BACKSPACE,Tab:this.TAB,Enter:this.ENTER,Shift:this.SHIFT,Control:this.CONTROL,Alt:this.ALT,CapsLock:this.CAPSLOCK,Escape:this.ESCAPE," ":this.SPACEBAR,PageUp:this.PAGEUP,PageDown:this.PAGEDOWN,End:this.END,Home:this.HOME,ArrowLeft:this.LEFT,ArrowUp:this.UP,ArrowRight:this.RIGHT,ArrowDown:this.DOWN,Delete:this.DELETE},n={UIKeyInputUpArrow:this.UP,UIKeyInputDownArrow:this.DOWN,UIKeyInputLeftArrow:this.LEFT,UIKeyInputRightArrow:this.RIGHT,UIKeyInputEscape:this.ESCAPE,UIKeyInputPageUp:this.PAGEUP,UIKeyInputPageDown:this.PAGEDOWN},a=["0123456789abcdefghijklmnopqrstuvwxyz","\xBA\xA1\u2122\xA3\xA2\u221E\xA7\xB6\u2022\xAA\xE5\u222B\xE7\u2202 \u0192\xA9\u02D9 \u2206\u02DA\xAC\xB5 \xF8\u03C0\u0153\xAE\xDF\u2020 \u221A\u2211\u2248\xA5\u03A9","\u201A\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB0\xB7\xC5\u0131\xC7\xCE\xB4\xCF\u02DD\xD3\u02C6\xD4\uF8FF\xD2\xC2\u02DC\xD8\u220F\u0152\u2030\xCD\u02C7\xA8\u25CA\u201E\u02DB\xC1\xB8"].map(function(G){return G.split("")}),c=a[0],l=a[1],g=a[2],p={},f={},w=0;w<c.length;w++){var M=c[w];l[w]!==" "&&(p[l[w]]=M.toUpperCase()),g[w]!==" "&&(f[g[w]]=M.toUpperCase())}this.isUndo=function(G){return!G.altKey&&!G.shiftKey&&(G.ctrlKey||G.metaKey)&&(G.key=="z"||G.which==90)},this.isRedo=function(G){return!G.altKey&&(G.ctrlKey||G.metaKey)&&(G.key==="y"||G.which==89||G.shiftKey&&(G.key==="Z"||G.key==="z"||G.which===90))},this.isSelectAll=function(G){return!G.altKey&&(G.ctrlKey||G.metaKey)&&(G.key==="a"||G.key==="A"||G.which==65)},this.isBacktick=function(G){return!G.altKey&&!G.ctrlKey&&!G.metaKey&&!G.shiftKey&&(G.key==="`"||G.which==192)},this.isHelp=function(G){return!G.altKey&&(G.ctrlKey||G.metaKey)&&(G.key==="/"||G.which==191)},this.lookup=function(G){return r[G.key]||t[G.which]||n[G.key]},this.lookupChar=function(G){if(!G.key)return String.fromCharCode(G.which);if(Mh.IS_APPLE&&G.altKey){var R=G.shiftKey?f:p;if(R[G.key])return R[G.key]}if(G.key.length===1)return G.key.toUpperCase();if(G.key==="Enter")return String.fromCharCode(13);if(G.key==="Tab")return String.fromCharCode(9)}};return new e}}();var{isUndo:bb,isRedo:xb,isSelectAll:FG,isBacktick:_G,isHelp:RG,BACKSPACE:wb,TAB:vb,ENTER:Bp,SHIFT:qG,CONTROL:BG,ALT:UG,CAPSLOCK:$G,ESCAPE:Ol,SPACEBAR:Up,PAGEUP:zG,PAGEDOWN:KG,END:WG,HOME:HG,LEFT:kb,UP:jG,RIGHT:Eb,DOWN:YG,DELETE:JG,lookup:qt,lookupChar:QG}=cS;var Qr=he(me());lr();var Rl=he(me());var Cb=he(me());var vr=he(me());function Fl(e){return{shouldBeFocused:()=>lS(e),onFocusedChanged:t=>{dS(e,t)}}}function lS(e){let t=e.predicate;if(t&&!t())return!1;let r=e.controller.getFocusLocation();return r&&ua(r,e.location)}function dS(e,t){let r=e.predicate;r&&!r()||(t?e.controller.dispatch({type:"set-focus-location",location:e.location}):e.controller.dispatch({type:"blur-focus-location",location:e.location}))}var{If:$p}=vr.Components,_l=class extends vr.Class{init(){this.controller=this.props.controller()}template(){return vr.createElement("span",{class:()=>{var r,n;let t=this.parentOrChildHovered();return{"dcg-geo-token-view":!0,"dcg-static-token":(n=(r=this.props).isStatic)==null?void 0:n.call(r),"dcg-selected-token":this.isTokenSelected(),"dcg-hidden-token":this.isHidden(),"dcg-token-has-label":this.hasLabel(),"dcg-child-of-hovered-token":t==="child","dcg-parent-of-hovered-token":t==="parent","dcg-assignment-token":!!this.getAssignment()}},style:()=>({color:this.getColor()}),role:this.bindFn(this.getAriaRole),"dcg-token-type":()=>this.getTokenInfo().iconType,"aria-roledescription":()=>this.props.insideGroup()?void 0:this.controller.s("graphing-calculator-narration-geometry-construction-role-description"),"aria-label":this.bindFn(this.getAriaLabel),"aria-selected":this.bindFn(this.isTokenSelected),tabindex:()=>this.props.putInTabOrder()?0:-1,manageFocus:()=>this.props.focusLocation?Fl({controller:this.controller,location:this.props.focusLocation()}):void 0,onTapStart:this.bindFn(this.onTapStart),onTap:this.bindFn(this.onTap),onPointerOver:this.bindFn(this.onPointerOver),onPointerOut:this.bindFn(this.onPointerOut)},vr.createElement("span",{class:vr.const("dcg-token-background")}),vr.createElement("span",{class:()=>({"dcg-token-icon":!0,[this.getAdditionalTokenClass()]:this.getAdditionalTokenClass(),"dcg-token-is-list":this.getIsList()&&!this.getAssignment()}),style:()=>({"--dcg-icon-angle":this.getIconAngle()})},vr.createElement($p,{predicate:()=>!!this.getIcon()},()=>vr.createElement("i",{class:this.bindFn(this.getIcon)}))),vr.createElement($p,{predicate:()=>!!this.getAssignment()},()=>vr.createElement(Lt,{latex:this.bindFn(this.getAssignment),config:this.const({})})),vr.createElement($p,{predicate:()=>this.hasLabel()},()=>vr.createElement("span",{class:()=>({"dcg-token-label":!0})},()=>this.getLabel())))}getIconAngle(){let t=this.controller.getItemsByIdentifier(this.props.identifier());if(!t||t.length!==1)return;let r=t[0];if(!r||!r.formula||!r.formula.typed_constant_value)return;let n;switch(this.getIconType()){case"vector":case"translate":if(r.formula.typed_constant_value.valueType!==Xt)return;let[a,c]=r.formula.typed_constant_value.value[0];n=As(a,c);break;case"segment":{if(r.formula.typed_constant_value.valueType!==ut)return;let[[l,g],[p,f]]=r.formula.typed_constant_value.value;n=As(p-l,f-g);break}case"line":{if(r.formula.typed_constant_value.valueType!==qe)return;let[[l,g],[p,f]]=r.formula.typed_constant_value.value;n=As(p-l,f-g);break}case"ray":{if(r.formula.typed_constant_value.valueType!==Et)return;let[[l,g],[p,f]]=r.formula.typed_constant_value.value;n=As(p-l,f-g);break}}return n!==void 0?`${-Number(n).toFixed(2)}rad`:void 0}getAdditionalTokenClass(){if(this.getAssignment()||this.hasError())return"";switch(this.getIconType()){case"glider":return"dcg-token-glider";case"line":return"dcg-token-line";case"segment":return"dcg-token-segment";case"ray":return"dcg-token-ray";case"intersection":return"dcg-token-intersection";case"midpoint":return"dcg-token-midpoint";case"parallel":return"dcg-token-parallel";case"perpendicular":return"dcg-token-perpendicular";case"rotate":return"dcg-token-rotate";case"circle":return"dcg-token-circle";case"arc":return"dcg-token-arc";case"vector":return"dcg-token-vector";case"dilate":return"dcg-token-dilate";case"reflect":return"dcg-token-reflect";case"translate":return"dcg-token-translate";case"transformation":return"dcg-token-transformation";case"point":case"start":case"end":return"dcg-token-point";case"polygon":return"dcg-token-polygon";case"angle":return"dcg-token-angle";case"angles":return"dcg-token-angles";case"directedangle":case"directedangles":return"dcg-token-directedangle"}return""}getIdFromParentRef(t){if(t)return this.controller.getExpressionIdForIdentifier(t[0])}parentOrChildHovered(){var f,w,M,G,R,ue;if(!this.props.showParentChildrenHover||!this.props.showParentChildrenHover())return!1;let t=this.controller.getHoveredOrFocusedTokenIdentifier(),r=this.controller.getExpressionIdForIdentifier(t),n=this.props.identifier(),a=this.props.controller().getExpressionIdForIdentifier(n)||"";if(!r)return!1;let c=this.controller.getItemModel(r),l=this.controller.getItemModel(a);if(!c||c.type!=="expression"||!l||l.type!=="expression")return!1;let g=((M=(w=(f=c.formula)==null?void 0:f.geometry)==null?void 0:w.call)==null?void 0:M.parents)||[],p=((ue=(R=(G=l.formula)==null?void 0:G.geometry)==null?void 0:R.call)==null?void 0:ue.parents)||[];for(let pe=0;pe<g.length;pe++)if(this.getIdFromParentRef(g[pe])===a)return"parent";for(let pe=0;pe<p.length;pe++)if(this.getIdFromParentRef(p[pe])===r)return"child";return!1}willUnmount(){this.implicitMouseOut()}didUpdate(){let t=this.props.identifier();this.currentlyActiveIdentifier&&t!==this.currentlyActiveIdentifier&&this.implicitMouseOut()}implicitMouseOut(){this.currentlyActiveIdentifier&&this.controller.runAfterDispatch(()=>{let t=this.currentlyActiveIdentifier;t&&(this.currentlyActiveIdentifier=void 0,this.controller.dispatch({type:"unset-active-token",identifier:t,style:"hovered"}))})}isHidden(){return this.getTokenInfo().isHidden}hasError(){let t=this.getTokenInfo();return!t||t.hasError}getIcon(){if(this.getAssignment())return;let t=this.getTokenInfo();if(this.hasError())return"dcg-icon-error";switch(t.iconType){case"point":case"glider":case"intersection":case"strictintersection":case"midpoint":case"start":case"end":return"dcg-icon-point";case"translate":case"vector":return"dcg-icon-vector";case"dilate":return"dcg-icon-dilation";case"rotate":return"dcg-icon-rotation";case"reflect":return"dcg-icon-reflection";case"transformation":return"dcg-icon-title";case"angle":case"angles":case"directedangle":case"directedangles":return"dcg-icon-angle";case"polygon":return"dcg-icon-polygon-solid";case"apply":case"arc":case"circle":case"clockwise":case"counterclockwise":case"error":case"line":case"parallel":case"perpendicular":case"ray":case"reflex":case"segment":case"segments":case"unknown":case"vertices":return;default:return t.iconType}}hasLabel(){return!!this.getLabel()}getLabel(){if(this.getAssignment())return"";let t=this.getTokenInfo().label.trim();return t.length<=2?t:""}getAssignment(){let t=this.props.identifier();return t[0]!=="$"?Ff(t):""}getAriaLabel(){let{description:t}=this.getTokenInfo();return this.isHidden()?this.controller.s("graphing-calculator-narration-geometry-hidden-construction-description",{description:t}):t}isTransformation(){var t;return((t=this.getTokenInfo())==null?void 0:t.groupType)==="transformation"}getColor(){if(this.getAssignment())return;let t=this.getTokenInfo();return this.hasError()?"#fa824c":this.isTransformation()||this.isHidden()?"#aaa":t.color}getIconType(){return this.getTokenInfo().iconType}getIsList(){return this.getTokenInfo().isList}getTokenInfo(){let t=this.props.identifier();return this.controller.getTokenRenderInfoByIdentifier(t)}onPointerOver(t){var r,n;(n=(r=this.props).isStatic)!=null&&n.call(r)||t.pointerType==="mouse"&&(this.currentlyActiveIdentifier=this.props.identifier(),this.controller.dispatch({type:"set-active-token",identifier:this.currentlyActiveIdentifier,style:"hovered"}))}onPointerOut(t){var r,n;(n=(r=this.props).isStatic)!=null&&n.call(r)||t.pointerType==="mouse"&&this.currentlyActiveIdentifier&&(this.controller.dispatch({type:"unset-active-token",identifier:this.currentlyActiveIdentifier,style:"hovered"}),this.currentlyActiveIdentifier=void 0)}onTapStart(t){var r,n;(n=(r=this.props).isStatic)!=null&&n.call(r)||t.handle()}onTap(t){var r,n;(n=(r=this.props).isStatic)!=null&&n.call(r)||(t.handle(),this.props.focusLocation&&this.controller.dispatch({type:"set-focus-location",location:this.props.focusLocation()}),this.controller.dispatch({type:"select-expression-that-defines-token",identifier:this.props.identifier(),toggle:this.isTokenSelected(),multiSelectMode:this.controller.isMultiSelectEnabled()&&!!t.shiftKey}))}isTokenSelected(){let t=this.getTokenInfo();return!!(t&&t.isSelected)}getAriaRole(){var t,r;if(!((r=(t=this.props).isStatic)!=null&&r.call(t)))return this.props.insideGroup()?"option":"button"}};var To=e=>{let t=function(){return e};return t.isDcgViewConst=!0,t},So=class{constructor(t,r,n){this.tokenController=t,this.mathNode=r,this.isStatic=n}updateTokens(t){if(!this.mathNode)return;if(!this.lastTokenInfo||this.lastTokenInfo.latex!==t)if(!this.tokenController.doesLatexContainToken(t))this.lastTokenInfo={latex:t,tokens:[]};else{let n=[];this.mathNode.querySelectorAll(".dcg-mq-token").forEach(a=>{n.push(a)}),this.lastTokenInfo={latex:t,tokens:n}}let r=this.lastTokenInfo.tokens;for(let n of r){let a=n.dcgTokenView;if(a)a.update();else{let c=n.getAttribute("data-dcg-mq-token")||"",l=Cb.mountToNode(_l,n,{controller:To(this.tokenController),identifier:To("$"+c),insideMQ:To(!0),insideGroup:To(!1),putInTabOrder:To(!1),isStatic:To(this.isStatic)});n.dcgTokenView=l}}}};var Lt=class extends Rl.Class{template(){return this.children.length===1?this.children[0]:Rl.createElement("div",{didMount:t=>this.didMountMathquill(t)})}didMount(){this.children.length===1&&this.didMountMathquill(this.findRootNode())}didMountMathquill(t){this.props.tokenController&&(this.mathquillTokenHelper=new So(this.props.tokenController(),t,!0)),this.staticMath=Na.StaticMath(t,ye({},this.props.config())),t.classList.add("dcg-static-mathquill-view"),this.updateMathquill()}didUpdate(){this.updateMathquill()}updateMathquill(){var t;this.updateMathquillAria(),this.updateMathquillLatex(),(t=this.mathquillTokenHelper)==null||t.updateTokens(this.props.latex())}updateMathquillLatex(){if(!this.staticMath)return;let t=this.props.latex();this.lastLatex!==t&&(this.staticMath.latex(t),this.lastLatex=t,this.props.onReflow&&this.props.onReflow())}updateMathquillAria(){if(!this.staticMath||!this.props.getAriaLabel)return;let t=this.props.getAriaLabel();t!==this.staticMath.getAriaLabel()&&this.staticMath.setAriaLabel(t)}};function Tb(e){return 48<=e&&e<=57}function uS(e){return 97<=e&&e<=122}function pS(e){return 65<=e&&e<=90}function ql(e){return uS(e)||pS(e)}function Bl(e){return e===92}function zp(e){return e===39}function Sb(e){if(9<=e&&e<=13||8192<=e&&e<=8202)return!0;switch(e){case 32:case 160:case 5760:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}function Ba(e,t){return nr(e.token.span,t.prevSpan)}function qa(e,t,r){return{type:e,span:t,val:r}}function gS(e,t,r,n){return{input:e,prevSpan:t,pos:r,token:n}}function Ul(e){return Db(e,0,An(e,0))}function Db(e,t,r){for(;Sb(e.charCodeAt(t));)t+=1;let n=fS(e,t);return gS(e,r,t,n)}function Jr(e){return Db(e.input,e.token.span.end,e.token.span)}function Lr(e){return e.token}function Hn(e,t){if(Lr(e).type!==t)throw`Parse Error: expected ${t}.`;return Jr(e)}function Mb(e,t){return Lr(e).type===t}function Do(e){return e.pos>=e.input.length}var hS={"\\left":"Left","\\right":"Right","\\sqrt":"Sqrt","\\frac":"Frac","\\operatorname":"OperatorName","\\token":"Token"},mS={"[":"[","]":"]","{":"{","}":"}","^":"^",_:"_"};function fS(e,t){let r=t;if(t>=e.length)return qa("End",An(e,t),"");let n=e.charCodeAt(t);if(Tb(n)){let a=wr(e,r,t+1);return qa("Digit",a,e.charAt(r))}else if(ql(n)){let a=wr(e,r,t+1);return qa("Letter",a,e.charAt(r))}else if(Bl(n))if(t+=1,ql(e.charCodeAt(t))){for(;ql(e.charCodeAt(t));)t+=1;let a=wr(e,r,t),c=ar(a),l=hS[c]||"Cmd";return qa(l,a,c)}else{t+=1;let a=wr(e,r,t),c=ar(a);return qa("EscapedSymbol",a,c)}else if(zp(n)){for(t+=1;zp(e.charCodeAt(t));)t+=1;if(e.charAt(t)==="^"){t+=1;let a=wr(e,r,t),c=ar(a);return qa("Primes^",a,c)}else{let a=wr(e,r,t),c=ar(a);return qa("Primes",a,c)}}else{let a=wr(e,r,t+1),c=e.charAt(r),l=mS[c]||"Symbol";return qa(l,a,c)}}function $l(e){let t=Ul(e),r=0;for(;!Do(t);)r+=1,t=Jr(t);return r}var{If:yS}=Qr.Components,Ab=500,hn=class e extends Qr.Class{constructor(){super(...arguments),this.lastLatexProp="",this.wasFocusedLastUpdate=!1}template(){return Qr.createElement("div",{class:Qr.const("dcg-mq-container")},Qr.createElement(yS,{predicate:()=>this.getPlaceholder().trim().length>0},()=>Qr.createElement("span",{class:Qr.const("dcg-mq-placeholder")},Qr.createElement(Lt,{config:()=>this.props.config(),latex:()=>this.getPlaceholder()}))),Qr.createElement("div",{class:()=>({"dcg-math-field":!0,"dcg-no-fadeout":this.props.noFadeout&&this.props.noFadeout(),"dcg-invalid":this.props.hasError(),"dcg-focus":this.props.isFocused()}),didMount:t=>this.didMountMathquill(t),"data-dcg-label":()=>this.props.dataLabelAttributeValue?this.props.dataLabelAttributeValue():void 0}))}didMount(){this.children.length===1&&this.didMountMathquill(this.findRootNode())}willUnmount(){this.$mathField.off(".view"),this.mathField=void 0}getPlaceholder(){return!this.props.placeholder||this.props.isFocused()||this.props.latex()?"":this.props.placeholder()}didMountMathquill(t){let r=Dt(ye({},this.props.config()),{handlers:{reflow:n=>{this.props.onReflow&&this.mathField&&this.props.onReflow(n)}},onCut:()=>{this.mathField&&this.props.onUserChangedLatex(this.mathField.latex())},onPaste:()=>{this.mathField&&this.props.onUserChangedLatex(this.mathField.latex())},overrideTypedText:n=>{this.mathField&&this.viewCanAcceptText(n)&&(this.props.onUserTypedText?this.props.onUserTypedText(n):(this.mathField.typedText(n),this.props.onUserChangedLatex(this.mathField.latex())))},overrideKeystroke:(n,a)=>{if(n==="Backspace"&&a.preventDefault(),!this.mathField)return;if(n==="Spacebar"&&this.props.disableSpace&&this.props.disableSpace())return a.preventDefault();let c=qt(a);if(c==="Up"||c==="Down"||c==="Left"||c==="Right"||c==="Esc"){let l=[];a.ctrlKey&&l.push("Ctrl"),a.metaKey&&l.push("Meta"),a.altKey&&l.push("Alt"),a.shiftKey&&l.push("Shift"),l.length?(l.push(c),n=l.join("-")):n=c}this.props.onUserPressedKey?this.props.onUserPressedKey(n,a):(this.mathField.keystroke(n,a),this.props.onUserChangedLatex(this.mathField.latex())),this.maybeTriggerOnSelectionChange()}});this.props.needsSystemKeypad&&this.props.needsSystemKeypad()&&(r.substituteTextarea=()=>{let n=document.createElement("textarea");return n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","none"),n.setAttribute("spellcheck","false"),n.setAttribute("autocomplete","off"),n}),this.props.tokenController&&(this.mathquillTokenHelper=new So(this.props.tokenController(),t,!1)),this.$mathField=ee(t),this.mathField=Na.MathField(t,r),t._mqMathFieldInstance=this.mathField,t._mqViewInstance=this,this.$mathField.on("focusin.view focusout.view",n=>this.onFocusEvent(n)).on("paste.view",n=>this.onPasteEvent(n)),!Xc&&(Jc||Qc)&&this.$mathField.on("keypress.view",n=>this.onKeypressEvent(n)),this.hookupMQTapTouch(),this.updateMathquill()}didUpdate(){this.updateMathquill()}updateMathquill(){var t;this.updateMathquillAria(),this.updateMathquillLatex(),this.updateMathquillFocused(),this.updateMathquillPostLabel(),(t=this.mathquillTokenHelper)==null||t.updateTokens(this.props.latex())}onFocusEvent(t){let r=this.isFocused();r!==this.shouldBeFocused()&&this.props.onFocusedChanged(r,t)}onPasteEvent(t){let r="",n=window.clipboardData,a=t.originalEvent;n&&n.getData?r=n.getData("Text"):a&&a.clipboardData&&a.clipboardData.getData&&(r=a.clipboardData.getData("text/plain"));var c=this.viewCanAcceptText(r);return!c&&this.props.onExpressionSizeExceeded&&this.props.onExpressionSizeExceeded(),c}viewCanAcceptText(t){return e.canAcceptText(this.mathField,this.props.capExpressionSize(),t)}static canAcceptText(t,r,n){if(!t)return!1;if(!r)return!0;let a=t.latex();return $l(a)+$l(n)<=Ab}onKeypressEvent(t){if(t.stopPropagation(),t.preventDefault(),!!this.mathField){var r=t.key&&t.key.length===1?t.key:void 0;r&&this.viewCanAcceptText(r)&&(this.props.onUserTypedText?this.props.onUserTypedText(r):(this.mathField.typedText(r),this.props.onUserChangedLatex(this.mathField.latex())))}}hookupMQTapTouch(){this.$mathField.on("dcg-tapstart.view",()=>{let t="dcg-tapend.mathquill-selection-change";ee(document).on(t,()=>{this.maybeTriggerOnSelectionChange(),ee(document).off(t)})}),this.$mathField.on("dcg-tap.view",t=>{let r=t;if(r.device!=="touch"||r.wasHandled()||!this.mathField)return;let n=r.changedTouches[0];this.mathField.clickAt(n.clientX,n.clientY,n.target),this.isFocused()||this.mathField.focus();let a;setTimeout(function(){a=Date.now()},0),this.mathField.ignoreNextMousedown(function(){return a===void 0?!0:Date.now()-a<500})})}updateMathquillAria(){if(!this.mathField)return;let t=this.props.getAriaLabel();t!==this.mathField.getAriaLabel()&&this.mathField.setAriaLabel(t)}updateMathquillPostLabel(){this.mathField&&this.mathField.setAriaPostLabel(this.props.getAriaPostLabel(),this.props.hasError()?5e3:1e3)}updateMathquillLatex(){let t=this.props.latex();this.mathField&&this.lastLatexProp!==t&&(this.props.capExpressionSize()&&$l(t)>Ab||(this.lastLatexProp=t,this.mathField.latex()!==t&&this.mathField.latex(t)))}updateMathquillFocused(){if(!this.mathField)return;let t=this.isFocused(),r=this.shouldBeFocused();r&&r!==this.wasFocusedLastUpdate&&this.props.selectOnFocus&&this.props.selectOnFocus()&&this.mathField.select(),this.wasFocusedLastUpdate=r,t!==r&&(r?this.mathField.focus():this.mathField.blur())}isFocused(){return!!(document.activeElement&&this.$mathField[0].contains(document.activeElement))}shouldBeFocused(){return this.props.isFocused()}maybeTriggerOnSelectionChange(){let t=this.props.onSelectionChanged;if(!t||!this.mathField)return;let r=this.mathField.selection();ua(r,this.lastSelection)||(this.lastSelection=r,t(r))}static getFocusedMathquill(){if(!document.activeElement)return;let t=document.activeElement.closest(".dcg-mq-editable-field");if(t)return t._mqMathFieldInstance}static getMQViewInstance(t){let r=t.el();if(r)return r._mqViewInstance}static applyArrowKeyAndReturnIfWasAtBounds(t,r,n){var a=t.selection();let c=a.startIndex===0&&a.endIndex===a.latex.length;if((r==="Up"||r==="Down")&&c)return t.keystroke(r,n),!0;t.keystroke(r,n);var l=t.selection(),g=l.latex!==a.latex||l.startIndex!==a.startIndex||l.endIndex!==a.endIndex;return!g}static simulateKeypress(t,r){var n=e.getMQViewInstance(t);n&&(n.props.onUserPressedKey?n.props.onUserPressedKey(r):(t.keystroke(r),n.props.onUserChangedLatex(t.latex())),n.maybeTriggerOnSelectionChange())}static simulateUserChangedLatex(t){var r=e.getMQViewInstance(t);r&&r.mathField&&r.props.onUserChangedLatex(r.mathField.latex())}static handleKeystrokeAndDecideIfSpecialEvent(t,r,n){return r==="Enter"||r==="Delete"&&t.latex()===""||r==="Backspace"&&t.latex()===""?!0:r==="Up"||r==="Down"||r==="Left"||r==="Right"?e.applyArrowKeyAndReturnIfWasAtBounds(t,r,n):(t.keystroke(r,n),!1)}};var{For:Lb,IfElse:bS}=ft.Components,Mo=class extends ht{template(){let e=this.props.editableId()||"";return ft.createElement("div",{class:ft.const("dcg-matrix-container"),style:()=>({"border-color":this.controller.getTextColor()})},ft.createElement("div",{class:ft.const("dcg-top-occluder"),style:()=>({background:this.controller.getBackgroundColor()})}),ft.createElement("div",{class:ft.const("dcg-bottom-occluder"),style:()=>({background:this.controller.getBackgroundColor()})}),ft.createElement(Lb,{each:()=>this.getRowKeys()},ft.createElement("div",{"aria-label":()=>this.props.variable?this.controller.s("matrix-calculator-narration-matrix-with-variable",{variable:this.props.variable()}):this.controller.s("matrix-calculator-narration-matrix-without-variable"),role:ft.const("grid"),class:ft.const("dcg-matrix-view")},t=>ft.createElement(Lb,{each:()=>this.getColumnKeys()},ft.createElement("div",{role:ft.const("row"),class:ft.const("dcg-matrix-view-row")},r=>ft.createElement(Kp,{controller:this.props.controller,isEditable:()=>!!this.props.editableId(),isFocused:()=>this.model.isMatrixExpressionCellFocused(e,t,r),ariaLabel:()=>this.controller.s("shared-calculator-narration-table-cell-coordinates",{rowNumber:t+1,columnNumber:r+1}),latex:()=>this.getCellContents(t,r),onFocusedChanged:n=>{n?this.dispatch({type:"focus-matrix-expression-cell",id:e,row:t,col:r}):this.dispatch({type:"blur-matrix-expression-cell",id:e,row:t,col:r})}}))))))}getCellContents(e,t){return this.props.matrix()[e][t]}getRowKeys(){let e=[],t=this.props.matrix();if(t)for(let r=0;r<t.length;r++)e.push(r);return e}getColumnKeys(){let e=[],t=this.props.matrix(),r=t&&t[0];if(r)for(let n=0;n<r.length;n++)e.push(n);return e}},Kp=class extends ht{template(){return ft.createElement("div",{role:ft.const("gridcell"),class:ft.const("dcg-matrix-view-cell")},bS(this.props.isEditable,{true:()=>ft.createElement(hn,{latex:this.props.latex,isFocused:this.props.isFocused,capExpressionSize:()=>this.model.isEnabled("capExpressionSize"),config:()=>this.controller.getMathquillConfig(),getAriaLabel:()=>this.props.ariaLabel(),getAriaPostLabel:()=>"",noFadeout:this.const(!0),hasError:()=>!1,onFocusedChanged:this.props.onFocusedChanged,placeholder:this.const("0"),selectOnFocus:this.const(!0),onUserPressedKey:(t,r)=>{this.dispatch({type:"keypad/press-key",key:t,evt:r})},onUserTypedText:t=>{this.dispatch({type:"keypad/type-text",text:t})},onUserChangedLatex:t=>{this.dispatch({type:"mq-updated-latex",latex:t})}}),false:()=>ft.createElement(Lt,{config:this.const({}),latex:this.props.latex})}))}};var yt=he(me());lr();function zl(e){return Array.from(e.querySelectorAll('input:enabled, button:enabled, select:enabled, textarea:enabled, [tabindex="0"], a[href]')).filter(t=>!t.getAttribute("aria-hidden")&&!t.getAttribute("aria-disabled")&&nm(t))}function Gb(e){return function(r){if(qt(r)==vb&&e){let n=zl(e);if(n.length===0)return;let a=n[0],c=n[n.length-1];r.shiftKey&&document.activeElement===a?(r.preventDefault(),ee(c).trigger("focus")):!r.shiftKey&&document.activeElement===c?(r.preventDefault(),ee(a).trigger("focus")):document.activeElement&&!e.contains(document.activeElement)&&(r.preventDefault(),ee(a).trigger("focus"))}}}lr();function Kl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}var{IfElse:xS,Switch:wS}=yt.Components,vS=500,ir=5,Wp=class extends yt.Class{init(){this.latexKey=0,this.uuid=this.props.uuid()}template(){return yt.createElement("div",{class:()=>({[this.getCustomClassName()]:!0,"dcg-tooltip-positioning-container":!0,"dcg-latex-tooltip-positioning-container":!!this.props.renderAsLatex,"dcg-tooltip-gravity-ne-se":this.props.gravity()==="ne"||this.props.gravity()==="se","dcg-tooltip-gravity-nw-sw":this.props.gravity()==="nw"||this.props.gravity()==="sw","dcg-tooltip-gravity-n-s":this.props.gravity()==="n"||this.props.gravity()==="s","dcg-tooltip-gravity-e-w":this.props.gravity()==="e"||this.props.gravity()==="w"}),style:()=>({top:`${this.props.hitAreaRect().top+(this.props.offset().top||0)}px`,left:`${this.props.hitAreaRect().left+(this.props.offset().left||0)}px`,width:`${this.props.hitAreaRect().width}px`,height:`${this.props.hitAreaRect().height}px`})},yt.createElement("div",{class:yt.const("dcg-tooltip-message-container"),style:this.bindFn(this.getMessageStyle)},xS(()=>!!this.props.renderAsLatex,{true:()=>yt.createElement("div",{role:yt.const("tooltip"),id:this.const(this.uuid),class:()=>({"dcg-tooltip-message":!0,"dcg-latex":!0,"dcg-sticky-not-stuck":this.props.isStickyAndNotStuck(),"dcg-tooltip-overflow":this.messageOverflows()}),style:()=>({"max-width":`${this.getMaxWidth()}px`}),didMount:t=>{this.tooltipMessage=t}},yt.createElement(wS,{key:()=>this.latexKey},()=>this.props.renderAsLatex().view(this.props.tooltip()))),false:()=>yt.createElement("div",{role:yt.const("tooltip"),id:this.const(this.uuid),class:yt.const("dcg-tooltip-message"),style:()=>({background:this.getBackgroundColor(),cursor:this.props.isStickyAndNotStuck()?"pointer":"default"})},this.props.tooltip)})),yt.createElement("div",{class:()=>({"dcg-tooltip-arrow":!0,[this.getTooltipGravityClass()]:!0}),style:()=>this.props.renderAsLatex?this.getArrowWithBorderStyle():this.getSolidArrowStyle()}))}getTooltipGravityClass(){switch(this.props.gravity()){case"n":case"ne":case"nw":return"dcg-tooltip-gravity-n";case"s":case"se":case"sw":return"dcg-tooltip-gravity-s";case"e":return"dcg-tooltip-gravity-e";case"w":return"dcg-tooltip-gravity-w"}}willUpdate(){this.latexKey++}getCustomClassName(){return this.props.class?this.props.class():""}messageOverflows(){return this.tooltipMessage&&this.tooltipMessage.getBoundingClientRect().width>=this.getMaxWidth()}getArrowWithBorderStyle(){let t=this.props.gravity(),r="10px",n=this.getBackgroundColor(),a="#bbb",c=this.props.isStickyAndNotStuck()?".95":"1",l="8px",g={width:l,height:l,border:`1px solid ${a}`,background:n,opacity:c};switch(t){case"s":return Dt(ye({},g),{top:"100%",left:"50%","margin-top":"1px","border-right":"0","border-bottom":"0"});case"sw":return Dt(ye({},g),{top:"100%",right:r,"margin-top":"1px","border-right":"0","border-bottom":"0"});case"se":return Dt(ye({},g),{top:"100%",left:r,"margin-top":"1px","border-right":"0","border-bottom":"0"});case"n":return Dt(ye({},g),{bottom:"100%",left:"50%","margin-bottom":"1px","border-left":"0","border-top":"0"});case"nw":return Dt(ye({},g),{bottom:"100%",right:r,"margin-bottom":"1px","border-left":"0","border-top":"0"});case"ne":return Dt(ye({},g),{bottom:"100%",left:r,"margin-bottom":"1px","border-left":"0","border-top":"0"});case"e":return Dt(ye({},g),{top:"50%",left:"100%","margin-left":"1px","border-right":"0","border-top":"0"});case"w":return Dt(ye({},g),{top:"50%",right:"100%","margin-right":"1px","border-left":"0","border-bottom":"0"});default:return t}}getSolidArrowStyle(){let t=this.props.gravity(),r=`${this.props.hitAreaRect().width/2}px`,n=this.getBackgroundColor(),a=`transparent transparent ${n} transparent`,c=`${n} transparent transparent transparent`,l=`transparent ${n} transparent transparent`,g=`transparent transparent transparent ${n}`,p=`-${ir}px`;switch(t){case"s":return{top:"100%",left:"50%",border:`${ir}px solid transparent`,"border-color":a,"margin-top":p,"margin-left":p};case"sw":return{top:"100%",right:r,border:`${ir}px solid transparent`,"border-color":a,"margin-top":p,"margin-right":p};case"se":return{top:"100%",left:r,border:`${ir}px solid transparent`,"border-color":a,"margin-top":p,"margin-left":p};case"n":return{bottom:"100%",left:"50%",border:`${ir}px solid transparent`,"border-color":c,"margin-bottom":p,"margin-left":p};case"nw":return{bottom:"100%",right:r,border:`${ir}px solid transparent`,"border-color":c,"margin-bottom":p,"margin-right":p};case"ne":return{bottom:"100%",left:r,border:`${ir}px solid transparent`,"border-color":c,"margin-bottom":p,"margin-left":p};case"e":return{top:"50%",left:"100%",border:`${ir}px solid transparent`,"border-color":l,"margin-left":`-${ir}px`,"margin-top":p};case"w":return{top:"50%",right:"100%",border:`${ir}px solid transparent`,"border-color":g,"margin-right":p,"margin-top":p};default:return t}}getBackgroundColor(){return this.props.renderAsLatex?"#fff":this.props.isStickyAndNotStuck()?"#666":"#000"}getMaxWidth(){let r=this.props.gravity(),n=this.props.hitAreaRect().left+(this.props.offset().left||0),a=n+this.props.hitAreaRect().width,c=.5*this.props.hitAreaRect().width+n,l=5,g=window.innerWidth-5;switch(r){case"se":case"ne":case"e":return g-n;case"sw":case"nw":case"w":return a-l;case"s":case"n":return Math.min(g-c,c-l)*2;default:return r}}getMessageStyle(){let t=this.props.hitAreaRect(),r=this.props.gravity(),n=this.props.maxWidth();switch(r){case"s":return{top:"100%",width:`${n}px`,transform:"translate(-50%, 0)",left:`${.5*t.width}px`,"margin-top":`${ir}px`,"text-align":"center"};case"sw":return{top:"100%",width:`${n}px`,right:"0","margin-top":`${ir}px`,"text-align":"right"};case"se":return{top:"100%",width:`${n}px`,"margin-top":`${ir}px`,"text-align":"left"};case"n":return{bottom:"100%",width:`${n}px`,transform:"translate(-50%, 0)",left:`${.5*t.width}px`,"margin-bottom":`${ir}px`,"text-align":"center"};case"nw":return{bottom:"100%",right:"0",width:`${n}px`,"margin-bottom":`${ir}px`,"text-align":"right"};case"ne":return{bottom:"100%",width:`${n}px`,"margin-bottom":`${ir}px`,"text-align":"left"};case"e":return{transform:"translate(0, -50%)",left:"100%",width:`${n}px`,top:`${.5*t.height}px`,"margin-left":`${ir}px`,"text-align":"left"};case"w":return{transform:"translate(0, -50%)",right:"100%",width:`${n}px`,top:`${.5*t.height}px`,"margin-right":`${ir}px`,"text-align":"right"};default:return r}}};function kS(){return document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}var Xr=class extends yt.Class{init(){this.uuid=`dcg-tooltip-${Kl()}`}template(){return yt.createElement("div",{class:yt.const("dcg-tooltip-hit-area-container"),handleevent:yt.const("true"),didMount:t=>{this.isMounted=!0,this.hitAreaNode=t,this.setupEventListeners(this.hitAreaNode)},onTap:()=>{if(this.shouldStickOnTargetClick())if(this.isStuck)this.clearTimeouts(),this.hideTooltip();else{if(this.props.disabled&&this.props.disabled())return;this.showTooltip(),this.stickTooltip()}else if(this.shouldShowOnTapstart()){if(this.props.disabled&&this.props.disabled())return;this.showTooltip(),this.setUpHideOnExternalMousedown()}}},this.children)}shouldShowOnTapstart(){return this.props.showOnTapstart&&this.props.showOnTapstart()}didUpdate(){this.updateTooltip()}updateTooltip(){if(!this.wrapperRef)return;if(!this.props.tooltip()){this.hideTooltip();return}let t=this.hitAreaNode.getBoundingClientRect(),r=this.wrapperRef.elt.getBoundingClientRect(),{originalTop:n,originalLeft:a}=this.wrapperRef,c=t.top-r.top,l=t.left-r.left;Math.abs(c-n)>3||Math.abs(l-a)>3?this.hideTooltip():this.wrapperRef.view.update()}handleShowEvent(t){if(this.props.disabled&&this.props.disabled())return;let r=this.props.delay?this.props.delay():vS;this.clearTimeouts(),this.showTooltipTimeout=setTimeout(t,r)}handleHideEvent(){this.clearTimeouts(),this.hideTooltipTimeout=setTimeout(this.bindFn(this.hideTooltip),150)}setupEventListeners(t){ee(t).on("tipsyshow",r=>{r.target===t&&this.handleShowEvent(()=>{this.showTooltip()})}).on("tipsyhide",r=>{r.target!==t||this.isStuck||this.handleHideEvent()})}willUnmount(){this.clearTimeouts(),this.isMounted=!1,this.hideTooltip()}setUpHideOnExternalMousedown(){ee(document).on(`mousedown.dcg-tooltip-${this.uuid} touchstart.dcg-tooltip-${this.uuid} pointerdown.dcg-tooltip-${this.uuid}`,t=>{this.wrapperRef&&(this.hitAreaNode.contains(t.target)||this.wrapperRef.elt.contains(t.target)||this.hideTooltip())})}stickTooltip(){this.isMounted&&this.wrapperRef&&(this.isStuck||(this.setUpHideOnExternalMousedown(),this.isStuck=!0,this.updateTooltip()))}clearTimeouts(){clearTimeout(this.showTooltipTimeout),clearTimeout(this.hideTooltipTimeout)}showTooltip(){if(!this.isMounted||this.wrapperRef||!this.props.tooltip())return;let t=this.hitAreaNode.getBoundingClientRect(),r=document.createElement("div");r.className="dcg-tooltip-mount-pt";let n=this.hitAreaNode.closest(".dcg-tap-container"),a=kS();(!!a&&a.contains(this.hitAreaNode)&&a.closest(".dcg-tap-container")?a:n).appendChild(r);let l=r.getBoundingClientRect(),g=t.left-l.left,p=t.top-l.top,f=Math.min(200,this.props.maxParentWidthOverflow?t.width+2*this.props.maxParentWidthOverflow():1/0),w={tooltip:this.props.tooltip,class:this.props.class,isStickyAndNotStuck:()=>this.shouldStickOnTargetClick()&&!this.isStuck,offset:()=>this.props.offset?this.props.offset():{},gravity:()=>this.props.gravity?this.props.gravity():"s",renderAsLatex:this.props.renderAsLatex,maxWidth:()=>f,hitAreaRect:()=>({top:p||0,left:g||0,width:t.width||0,height:t.height||0}),uuid:()=>this.uuid};this.setupEventListeners(r),ee(r).on("dcg-tap",()=>{this.shouldStickOnTargetClick()&&this.stickTooltip()});let M=yt.mountToNode(Wp,r,w);ee(document).on(`keydown.dcg-tooltip-${this.uuid}`,R=>{qt(R)===Ol&&this.hideTooltip()});let G=()=>this.updateTooltip();window.addEventListener("scroll",G,!0),this.wrapperRef={elt:r,view:M,originalLeft:g,originalTop:p,onScroll:G},this.assignAriaDescribedBy()}hideTooltip(){this.clearTimeouts(),this.wrapperRef&&(this.isStuck=!1,ee(document).off(`.dcg-tooltip-${this.uuid}`),window.removeEventListener("scroll",this.wrapperRef.onScroll,!0),this.restoreAriaDescribedBy(),yt.unmountFromNode(this.wrapperRef.elt),this.wrapperRef.elt.parentNode&&this.wrapperRef.elt.parentNode.removeChild(this.wrapperRef.elt),this.wrapperRef=void 0)}assignAriaDescribedBy(){let t=zl(this.hitAreaNode)[0]||this.hitAreaNode;this.originalDescribedBy=t.getAttribute("aria-describedby"),t.setAttribute("aria-describedby",this.uuid)}restoreAriaDescribedBy(){let t=zl(this.hitAreaNode)[0]||this.hitAreaNode;this.originalDescribedBy?t.setAttribute("aria-describedby",this.originalDescribedBy):t.removeAttribute("aria-describedby")}shouldStickOnTargetClick(){return!!this.props.sticky&&this.props.sticky()}};var{SwitchUnion:ES,If:Vb}=Ke.Components,Wl=class extends ht{template(){return Ke.createElement("div",{class:()=>({"dcg-latex-expression":!0,"dcg-focused":this.model.isLatexExpressionFocused(this.props.id()),"dcg-do-not-blur":!0}),style:()=>({background:this.props.controller().getBackgroundColor()})},Ke.createElement(hn,{latex:()=>this.getItem().latex,isFocused:()=>this.model.isLatexExpressionFocused(this.props.id()),capExpressionSize:()=>this.model.isEnabled("capExpressionSize"),config:()=>this.controller.getMathquillConfig(),getAriaLabel:()=>this.controller.s("shared-calculator-narration-expression"),getAriaPostLabel:()=>{let e=this.getError();if(e)return this.controller.unpack(e);let t=this.getAnswer();switch(t.type){case"number":return this.controller.s("shared-calculator-narration-evaluation",{answer:bp(Ls(ze(t.value),{displayAsFraction:this.shouldDisplayEvaluationAsFraction()}))});case"matrix":var r=this.getMatrixEvaluationAria(t.matrix);try{let a=this.controller.s("matrix-calculator-narration-evaluation",{rowCount:r.length,columnCount:r[0].length});for(var n=0;n<r.length;n++)a+=" "+this.controller.s("matrix-calculator-narration-evaluation-row",{rowNumber:n+1,values:r[n].map(c=>c.toString()).join(", ")});return a}catch(a){return this.controller.raw("")}default:return this.controller.raw("")}},hasError:()=>!!this.getError(),onUserPressedKey:(e,t)=>{this.dispatch({type:"keypad/press-key",key:e,evt:t})},onUserTypedText:this.bindFn(this.onUserTypedText),onUserChangedLatex:e=>{this.dispatch({type:"mq-updated-latex",latex:e})},onFocusedChanged:e=>{e?this.dispatch({type:"focus-latex-expression",id:this.props.id()}):this.dispatch({type:"blur-latex-expression",id:this.props.id()})}}),ES("type",()=>this.getAnswer())({number:e=>Ke.createElement("div",{class:Ke.const("dcg-evaluation dcg-number-evaluation")},Ke.createElement("span",{class:Ke.const("dcg-output")},Ke.createElement(Lt,{latex:()=>"="+Ls(ze(e().value),{displayAsFraction:this.shouldDisplayEvaluationAsFraction()}),config:this.const({})})),this.fractionToggleTemplate()),matrix:e=>Ke.createElement("div",{class:Ke.const("dcg-evaluation dcg-matrix-evaluation")},Ke.createElement("span",{class:Ke.const("dcg-equals-sign")},Ke.const("=")),Ke.createElement(Mo,{controller:this.props.controller,editableId:this.const(void 0),matrix:()=>this.getMatrixEvaluationLatex(e().matrix)}),this.fractionToggleTemplate()),none:()=>{}}),Ke.createElement(Vb,{predicate:()=>!!this.getError()},()=>Ke.createElement(Xr,{gravity:this.const("w"),sticky:this.const(!0),tooltip:()=>{let e=this.getError();return e!==void 0?this.controller.unpack(e):this.controller.raw("")}},Ke.createElement("div",{class:Ke.const("dcg-expression-error")},Ke.createElement("i",{class:Ke.const("dcg-icon-error"),"aria-hidden":Ke.const("true")})))))}fractionToggleTemplate(){return Ke.createElement(Vb,{predicate:this.bindFn(this.canDisplayEvaluationAsFraction)},()=>Ke.createElement(Xr,{tooltip:this.bindFn(this.getFractionMessage),gravity:this.const("sw")},Ke.createElement("span",{role:Ke.const("button"),tabindex:Ke.const("0"),"aria-label":this.bindFn(this.getFractionDisplayAriaLabel),class:()=>({"dcg-basic-fraction-toggle":!0,"dcg-selected":this.isFractionEvaluation()}),onTap:this.bindFn(this.toggleFractionEvaluation)},Ke.createElement("i",{class:Ke.const("dcg-icon-fraction"),"aria-hidden":Ke.const("true")}))))}onUserTypedText(e){let t=this.getItem().latex;e==="x"&&t&&t.match(/(.*)matri$/)&&this.model.hasUnusedMatrixVariables()?(this.dispatch({type:"mq-updated-latex",latex:t.replace(/(.*)matri$/,"$1")}),this.dispatch({type:"add-new-matrix"})):this.dispatch({type:"keypad/type-text",text:e})}getItem(){return this.model.getExpressionById(this.props.id())}getError(){return this.model.getEvaluations()[this.props.id()].error}getAnswer(){var e=this.model.getEvaluations()[this.props.id()].answer;return e===void 0?{type:"none"}:Pl(e)?{type:"matrix",matrix:e}:{type:"number",value:e}}getMatrixEvaluationLatex(e){let t=this.isFractionEvaluation(),r=[];for(let n of e){let a=[];for(let c of n)a.push(Ls(ze(c),{digits:6,bigCutoff:1e6,smallCutoff:.001,displayAsFraction:t}));r.push(a)}return r}getMatrixEvaluationAria(e){let t=this.isFractionEvaluation(),r=[];for(let n of e){let a=[];for(let c of n)a.push(bp(Ls(ze(c),{digits:6,bigCutoff:1e6,smallCutoff:.001,displayAsFraction:t})));r.push(a)}return r}canDisplayEvaluationAsFraction(){if(!this.model.isEnabled("decimalToFraction"))return!1;let e=this.model.getEvaluations()[this.props.id()].answer;if(e===void 0)return!1;if(Pl(e)){let t=!1;for(let r of e)for(let n of r){if(!At(n))return!1;Dl(ze(n))&&(t=!0)}return t}return Dl(ze(e))}getFractionMessage(){return this.shouldDisplayEvaluationAsFraction()?this.controller.s("shared-calculator-label-tooltip-convert-to-decimal"):this.controller.s("shared-calculator-label-tooltip-convert-to-fraction")}getFractionDisplayAriaLabel(){return this.shouldDisplayEvaluationAsFraction()?this.controller.s("shared-calculator-narration-display-as-decimal"):this.controller.s("shared-calculator-narration-display-as-fraction")}shouldDisplayEvaluationAsFraction(){return this.canDisplayEvaluationAsFraction()&&this.isFractionEvaluation()}toggleFractionEvaluation(){this.controller.dispatch({type:"set-display-as-fraction",id:this.props.id(),value:!this.getItem().displayAsFraction})}isFractionEvaluation(){return this.getItem().displayAsFraction}};var or=he(me());var{If:CS}=or.Components,Hl=class extends ht{template(){return or.createElement("div",{class:()=>({"dcg-matrix-expression":!0,"dcg-focused":this.model.isExpressionFocused(this.props.id()),"dcg-do-not-blur":!0}),onTapStart:e=>this.onTapBlankSpace(e)},or.createElement("span",{class:or.const("dcg-variable-definition")},or.createElement(Lt,{config:this.const({}),latex:()=>this.getItem().variable+"="})),or.createElement(Mo,{controller:this.props.controller,editableId:this.props.id,matrix:()=>this.getItem().matrix,variable:()=>this.getItem().variable}),or.createElement(CS,{predicate:()=>!!this.getEvaluation().error},()=>or.createElement("div",{class:or.const("dcg-matrix-expression-error-container")},or.createElement(Xr,{gravity:this.const("w"),sticky:this.const(!0),tooltip:()=>{let e=this.getEvaluation().error;return e!==void 0?this.controller.unpack(e):this.controller.raw("")}},or.createElement("div",{class:or.const("dcg-matrix-expression-error")},or.createElement("i",{class:or.const("dcg-icon-error"),"aria-hidden":or.const("true")}))))))}getItem(){return this.model.getExpressionById(this.props.id())}onTapBlankSpace(e){e.target.classList.contains("dcg-matrix-expression")&&this.dispatch({type:"focus-matrix-expression-cell",id:this.props.id(),row:0,col:0})}getEvaluation(){return this.model.getEvaluations()[this.props.id()]}};var{For:TS,Switch:SS}=Gr.Components,jl=class extends ht{template(){return Gr.createElement("div",{class:Gr.const("dcg-matrix-list-container"),didMount:e=>this.didMountNode(e)},Gr.createElement("div",{class:Gr.const("dcg-matrix-list-placeholder")}),Gr.createElement(TS,{each:()=>this.model.getExpressionOrder()},Gr.createElement("div",{class:()=>({"dcg-matrix-list":!0,"dcg-projector-mode":this.controller.isProjectorMode()}),role:Gr.const("region"),"aria-label":()=>this.controller.s("shared-calculator-narration-expression-list")},e=>Gr.createElement(SS,{key:()=>this.model.getExpressionById(e).type},t=>t==="latex"?Gr.createElement(Wl,{controller:this.props.controller,id:this.const(e)}):t==="matrix"?Gr.createElement(Hl,{controller:this.props.controller,id:this.const(e)}):Gr.createElement("span",null)))))}didMountNode(e){this.node=e}didUpdate(){let e=this.node.querySelector(".dcg-focused");e&&lm(e,this.node,0)}};var Gt=he(me());var Ai=he(me());var Nb=he(me()),Mi=class extends Nb.Class{init(){this.controller=this.props.controller()}};var Rs=class extends Mi{template(){return Ai.createElement("div",{class:Ai.const("dcg-keypad-control-bar dcg-do-not-blur"),role:Ai.const("group"),"aria-label":()=>this.controller.s("shared-calculator-narration-keypad-controlbar")},Ai.createElement("div",{class:Ai.const("dcg-keypad-control-bar-contents")},this.children))}};var Ao=he(me()),jn=class extends Ao.Class{template(){return Ao.createElement("div",{didMount:e=>{this.didMountRoot(e),this.props.didMount&&this.props.didMount(e)},class:()=>({"dcg-keypad-control-btn":!0,"dcg-menu-btn":!!this.props.menu(),"dcg-btn-primary":!!this.props.menu(),"dcg-disabled":!!this.props.disabled(),"dcg-selected":!!this.props.disabled()&&this.props.selected(),"dcg-selectable-btn":this.props.disabled()&&this.props.selectable()}),role:Ao.const("button"),"aria-disabled":()=>this.props.disabled(),"aria-label":this.props.ariaLabel||this.props.command,"dcg-command":this.props.command,onTap:e=>{this.props.disabled()||this.props.onTap(e)},onKeydown:e=>{this.props.onKeydown&&this.props.onKeydown(e)},onFocusin:e=>this.onFocusEvent(e),onFocusout:e=>this.onFocusEvent(e),"aria-pressed":()=>!this.hasPopup()&&this.props.selectable()&&!this.props.disabled()&&this.props.selected()||void 0,"aria-expanded":()=>this.hasPopup()&&this.props.selectable()&&!this.props.disabled()&&this.props.selected()||void 0,tabindex:()=>this.props.disabled()||this.props.ignoreInTabOrder()?-1:0},this.children)}didMountRoot(e){var t,r;this.root=e,(r=(t=this.props).shouldBeFocused)!=null&&r.call(t)&&!this.isFocused()&&this.root.focus()}didUpdate(){var e,t;(t=(e=this.props).shouldBeFocused)!=null&&t.call(e)&&!this.isFocused()&&this.root.focus()}hasPopup(){return this.props.ariaPopup?this.props.ariaPopup():!1}isFocused(){return!!(document.activeElement&&this.root.contains(document.activeElement))}onFocusEvent(e){if(!this.props.shouldBeFocused||!this.props.onFocusedChanged)return;let t=this.isFocused();t!==this.props.shouldBeFocused()&&this.props.onFocusedChanged(t,e)}};var kr=he(me());var dr=he(me());lr();var Zr=he(me());var ba=class extends Zr.Class{template(){return Zr.createElement("div",{role:Zr.const("checkbox"),tabindex:()=>this.props.disabled&&this.props.disabled()?-1:0,"aria-label":()=>{var t,r;return(r=(t=this.props).ariaLabel)==null?void 0:r.call(t)},"aria-labelledby":()=>{var t,r;return(r=(t=this.props).labelledBy)==null?void 0:r.call(t)},"aria-describedby":()=>{var t,r;return(r=(t=this.props).describedBy)==null?void 0:r.call(t)},"aria-disabled":()=>this.props.disabled&&this.props.disabled(),"aria-checked":this.props.checked,manageFocus:()=>{var t,r;return(r=(t=this.props).manageFocus)==null?void 0:r.call(t)},class:()=>({"dcg-component-checkbox":!0,"dcg-checked":this.props.checked(),"dcg-disabled":this.props.disabled&&this.props.disabled(),"dcg-small":this.props.small&&this.props.small(),[this.props.class===void 0?"":this.props.class()]:this.props.class!==void 0}),style:()=>this.props.style?this.props.style():{},onTap:this.bindFn(this.onChange)},Zr.createElement("span",{class:Zr.const("dcg-checkbox")},Zr.createElement("i",{class:Zr.const("dcg-icon-check"),"aria-hidden":Zr.const("true")})),Zr.createElement("span",{class:Zr.const("dcg-checkbox-children")},this.children))}onChange(t){let r=t.target;r&&r.getAttribute("href")||this.props.disabled&&this.props.disabled()||this.props.onChange(!this.props.checked())}};var sr=he(me());var{For:DS,If:MS}=sr.Components,Yl=class extends sr.Class{init(){this.config=this.props.staticConfig()}template(){return sr.createElement(DS,{each:()=>this.config,key:t=>t.key},sr.createElement("div",{class:sr.const("dcg-segmented-control-container"),role:sr.const("group"),"aria-label":this.props.ariaGroupLabel},t=>sr.createElement("div",{class:()=>({"dcg-segmented-control-btn":!0,"dcg-selected":t.selected(),"dcg-theme-mini":this.getTheme()==="mini","dcg-theme-default":this.getTheme()==="default","dcg-disabled":this.isDisabled(),[t.class?t.class():""]:!!t.class}),role:sr.const("button"),tabindex:sr.const(0),"aria-label":()=>this.getAriaLabel(t),style:()=>({"min-width":this.props.minButtonWidth?this.props.minButtonWidth()+"px":void 0}),"aria-pressed":()=>t.selected(),onTap:()=>{this.isDisabled()||t.onSelect()},manageFocus:()=>{if(t.focusHelperOptions)return Fl(t.focusHelperOptions)}},sr.createElement(Xr,{tooltip:()=>t.tooltip?t.tooltip():"",gravity:()=>t.tooltipGravity?t.tooltipGravity():"s",disabled:()=>!(t.tooltip&&t.tooltip())},sr.createElement("div",{class:sr.const("dcg-segmented-control-interior")},()=>t.label?t.label():"",sr.createElement(MS,{predicate:()=>!!t.icon},()=>sr.createElement("i",{class:()=>t.icon?t.icon():""})))))))}getAriaLabel(t){return t.ariaLabel?t.ariaLabel():t.label?t.label():t.tooltip?t.tooltip():""}isDisabled(){return this.props.disabled&&this.props.disabled()}getTheme(){return this.props.theme?this.props.theme():"default"}};var{If:AS}=dr.Components,Jl=class extends ht{template(){return dr.createElement("div",{class:()=>({"dcg-settings-dropdown":!0,"dcg-popover":!0,"dcg-has-background-color":this.controller.hasBackgroundColor(),"dcg-point-left":this.controller.getContainerSize().height<=420}),role:dr.const("region"),"aria-label":()=>this.controller.s("matrix-calculator-narration-settings-menu"),didMount:this.bindFn(this.didMountSettingsDropdown),didUnmount:this.bindFn(this.didUnmountSettingsDropdown)},dr.createElement("div",{class:dr.const("dcg-popover-interior"),style:()=>({background:this.controller.getBackgroundColor()})},dr.createElement("div",{class:()=>({"dcg-settings-menu-option":!0,"dcg-displaysize-container":!0})},dr.createElement(Yl,{ariaGroupLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size"),staticConfig:this.bindFn(this.getProjectorModeOptions)})),dr.createElement(ba,{onChange:this.bindFn(this.onToggleInvertedColors),checked:()=>this.controller.getInvertedColors(),class:this.const("dcg-settings-menu-option dcg-do-not-blur dcg-reverse-contrast")},dr.createElement("span",{class:dr.const("dcg-checkbox-label")},()=>this.controller.s("shared-calculator-button-reverse-contrast"))),dr.createElement(AS,{predicate:()=>!!this.getVersionNumber()},()=>dr.createElement("div",{class:dr.const("dcg-version-number")},dr.const("Version: "),()=>this.getVersionNumber()))))}getProjectorModeOptions(){return[{key:"default",label:()=>"A",ariaLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size-default"),class:()=>"dcg-displaysize-default",selected:()=>!this.controller.isProjectorMode(),onSelect:()=>this.onSelectProjectorModeOption(!1)},{key:"large",label:()=>"A",ariaLabel:()=>this.controller.s("shared-calculator-narration-settings-display-size-large"),class:()=>"dcg-displaysize-large",selected:()=>this.controller.isProjectorMode(),onSelect:()=>this.onSelectProjectorModeOption(!0)}]}onSelectProjectorModeOption(t){this.controller.dispatch({type:"update-projector-mode",mode:t})}getVersionNumber(){let t=window;if(t&&t.AppBridge)return t.AppBridge.versionNumber}didUnmountSettingsDropdown(){ee(document.documentElement).off(".dcg-settings-view")}didMountSettingsDropdown(t){this.settingsGroupNode=t,ee(document.documentElement).on("dcg-tapstart.dcg-settings-view",r=>{r.target.closest(".dcg-basic-settings-container")||this.controller.dispatch({type:"close-settings-menu"})}),ee(document.documentElement).on("keydown.dcg-settings-view",r=>{if(qt(r)==="Esc"&&(this.controller.dispatch({type:"close-settings-menu"}),this.controller.dispatch({type:"focus-last-expression"})),qt(r)==="Tab"&&!r.altKey&&!r.metaKey&&!r.ctrlKey){let n=document.activeElement,a=ee(this.props.settingsButtonNode()),c=this.settingsGroupNode.querySelectorAll(".dcg-settings-menu-option"),l=ee(c[c.length-1]);!r.shiftKey&&n===l[0]?(a.trigger("focus"),r.preventDefault(),r.stopPropagation()):r.shiftKey&&n===a[0]&&(l.trigger("focus"),r.preventDefault(),r.stopPropagation())}})}onToggleInvertedColors(){this.controller.dispatch({type:"update-inverted-colors",invertedColors:!this.controller.getInvertedColors()})}setDefaultDisplaySize(){this.controller.dispatch({type:"update-projector-mode",mode:!1})}setLargeDisplaySize(){this.controller.dispatch({type:"update-projector-mode",mode:!0})}};var{If:LS}=kr.Components,Ql=class extends ht{template(){let e=this.props.controller();return kr.createElement("div",{class:kr.const("dcg-basic-settings-container")},kr.createElement(jn,{menu:kr.const(!1),didMount:t=>this.settingsButtonNode=t,command:this.const("settings"),ariaLabel:()=>e.s("matrix-calculator-button-settings"),onTap:this.bindFn(this.onToggleSettingsMenu),ignoreInTabOrder:kr.const(!1),selectable:kr.const(!0),selected:()=>this.controller.isSettingsMenuOpen(),disabled:kr.const(!1),ariaPopup:this.const(!0)},kr.createElement("i",{class:kr.const("dcg-icon-wrench"),"aria-hidden":kr.const("true")})),kr.createElement(LS,{predicate:()=>this.controller.isSettingsMenuOpen()},()=>kr.createElement(Jl,{controller:this.props.controller,settingsButtonNode:()=>this.settingsButtonNode})))}onToggleSettingsMenu(){this.controller.dispatch({type:"toggle-settings-menu"})}};var{If:Hp}=Gt.Components,Xl=class extends ht{template(){return Gt.createElement(Rs,{controller:this.props.controller},Gt.createElement(jn,{menu:()=>!0,disabled:()=>!this.model.hasUnusedMatrixVariables(),selected:()=>!1,selectable:()=>!1,ignoreInTabOrder:()=>!1,command:()=>"add-matrix",ariaLabel:()=>this.controller.s("matrix-calculator-button-new"),onTap:()=>{this.model.hasUnusedMatrixVariables()&&this.dispatch({type:"add-new-matrix"})},onKeydown:e=>{e.key==="Tab"&&e.shiftKey&&this.dispatch({type:"tab-backward-from-control-bar",evt:e})},shouldBeFocused:()=>this.model.isAddMatrixButtonFocused(),onFocusedChanged:(e,t)=>{this.controller.dispatch({type:e?"focus-add-matrix-button":"blur-add-matrix-button"})}},Gt.createElement("span",null,()=>this.controller.s("matrix-calculator-button-new"))),Gt.createElement(jn,{menu:()=>!1,disabled:()=>!this.controller.canUndo(),selected:()=>!1,selectable:()=>!1,ignoreInTabOrder:()=>!1,command:()=>"undo",ariaLabel:()=>this.controller.s("shared-calculator-narration-undo"),onTap:()=>this.dispatch({type:"undo"})},Gt.createElement("i",{class:Gt.const("dcg-icon-undo"),"aria-hidden":Gt.const("true")})),Gt.createElement(jn,{menu:()=>!1,disabled:()=>!this.controller.canRedo(),selected:()=>!1,selectable:()=>!1,ignoreInTabOrder:()=>!1,command:()=>"redo",ariaLabel:()=>this.controller.s("shared-calculator-narration-redo"),onTap:()=>this.dispatch({type:"redo"})},Gt.createElement("i",{class:Gt.const("dcg-icon-redo"),"aria-hidden":Gt.const("true")})),Gt.createElement(Hp,{predicate:()=>this.controller.shouldShowClear()},()=>Gt.createElement(jn,{menu:()=>!1,disabled:()=>!1,selected:()=>!1,selectable:()=>!1,ignoreInTabOrder:()=>!1,command:()=>"clear",ariaLabel:()=>this.controller.s("shared-calculator-button-clear"),onTap:()=>this.dispatch({type:"clear-focused-expression"})},()=>this.controller.s("shared-calculator-button-clear"))),Gt.createElement(Hp,{predicate:()=>!this.controller.shouldShowClear()},()=>Gt.createElement(jn,{menu:()=>!1,disabled:()=>!this.model.canClear(),selected:()=>!1,selectable:()=>!1,ignoreInTabOrder:()=>!1,command:()=>"clear-all",ariaLabel:()=>this.controller.s("shared-calculator-button-clear-all"),onTap:()=>this.dispatch({type:"clear-all"})},()=>this.controller.s("shared-calculator-button-clear-all"))),Gt.createElement(Hp,{predicate:()=>this.props.controller().getSettingsMenu()},()=>Gt.createElement(Ql,{controller:this.props.controller})))}};var be=he(me());var Zl=he(me());var qs=class extends Mi{template(){return Zl.createElement("div",{class:Zl.const("dcg-basic-keypad dcg-do-not-blur")},this.children)}};var Lo=he(me()),Ua=class extends Lo.Class{template(){return Lo.createElement("div",{class:Lo.const("dcg-keypad-row")},this.children)}};var xa=he(me()),We=class extends xa.Class{template(){return xa.createElement("div",{class:()=>({"dcg-keypad-btn-container":!0,"dcg-disabled":this.isDisabled()}),style:()=>({"flex-grow":this.getColSpan()})},xa.createElement("span",{role:xa.const("button"),class:this.bindFn(this.getClasses),"dcg-command":this.props.command,"aria-label":this.bindFn(this.getAriaLabel),"aria-disabled":this.bindFn(this.isDisabled),"aria-controls":this.props.ariaControls?this.props.ariaControls:this.const(void 0),"aria-expanded":this.props.ariaExpanded?this.bindFn(this.getAriaExpanded):this.const(void 0),onTap:()=>{this.isDisabled()||this.props.onTap()}},xa.createElement("span",{class:xa.const("dcg-keypad-btn-content")},this.children)))}getClasses(){let t={"dcg-keypad-btn":!0,"dcg-keypad-btn-active":this.isActive()},r=this.props.style();switch(r){case"default":t["dcg-btn-light-on-gray"]=!0;break;case"highlight":t["dcg-btn-dark-on-gray"]=!0;break;case"popover":t["dcg-btn-light-gray"]=!0;break;case"blue":t["dcg-btn-short-blue"]=!0;break;case"tall-blue":t["dcg-btn-tall-blue"]=!0;break;default:return r}return t}isActive(){return this.props.active?this.props.active():!1}getAriaLabel(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()}getColSpan(){if(this.props.colspan)return this.props.colspan()}isDisabled(){return this.props.disabled&&this.props.disabled()}getAriaExpanded(){return this.props.ariaExpanded?this.props.ariaExpanded():void 0}};var T=he(me()),{IfElse:Ob,If:Ib,Switch:GS}=T.Components;function De(e,t){return e===void 0?T.const(t):typeof e=="function"?e:T.const(e)}function Go(e){return(t,r,n={},a)=>T.createElement(We,{command:T.const(e.command||e.typedText||e.keys[0]),ariaLabel:()=>e.ariaLabelKey?a(e.ariaLabelKey):e.typedText||e.keys[0],colspan:De(n.colspan,1),style:()=>n.style||"default",onTap:()=>r({type:"keypad/type-text",text:e.typedText||e.keys[0]})},Ob(()=>e.keys[0]==="{"||e.keys[0]==="[",{true:()=>T.createElement("span",{class:T.const("dcg-mq-math-mode"),style:T.const("font-size: 120%")},T.const(e.keys[0]),T.const("\xA0"),T.createElement("span",{style:T.const("color: #999")},T.const(e.keys[1]))),false:()=>T.createElement("span",{class:T.const("dcg-either-or-btn")},T.createElement(Lt,{config:T.const({}),latex:T.const(e.keys[0])}),T.createElement("span",{style:T.const("color: #999")},T.createElement(Lt,{config:T.const({}),latex:T.const(e.keys[1])})))}))}function Vo(e){return(t,r,n={},a)=>T.createElement(We,{command:T.const(e.command||e.typedText||e.keys[1]),ariaLabel:()=>e.ariaLabelKey?a(e.ariaLabelKey):e.typedText||e.keys[0],colspan:De(n.colspan,1),style:De(n.style,"default"),onTap:()=>r({type:"keypad/type-text",text:e.typedText||e.keys[1]})},Ob(()=>e.keys[1]==="}"||e.keys[1]==="]",{true:()=>T.createElement("span",{class:T.const("dcg-mq-math-mode"),style:T.const("font-size: 120%")},T.createElement("span",{style:T.const("color: #999")},T.const(e.keys[0])),T.const("\xA0"),T.const(e.keys[1])),false:()=>T.createElement("span",null,T.createElement("span",{style:T.const("color: #999")},T.createElement(Lt,{config:T.const({}),latex:T.const(e.keys[0])})),T.createElement(Lt,{config:T.const({}),latex:T.const(e.keys[1])}))}))}function VS(e){return(t,r,n={},a)=>T.createElement(We,{command:T.const(e.command),ariaLabel:()=>e.ariaLabelKey?a(e.ariaLabelKey):t,colspan:De(n.colspan,1),style:()=>n.style||"default",onTap:()=>{r({type:"keypad/audio-trace",command:e.command})}},T.createElement(Ib,{predicate:T.const(e.iconClass!==void 0)},()=>T.createElement("span",{class:()=>({"dcg-button-icon":!0,"dcg-icon-only":e.contentKey===void 0})},T.createElement("i",{class:T.const(e.iconClass),"aria-hidden":T.const("true")}))),T.createElement(Ib,{predicate:T.const(e.contentKey!==void 0)},()=>T.createElement("span",null,()=>a(e.contentKey)||t)))}function q(e){return(t,r,n={},a)=>T.createElement(We,{command:T.const(e.command||t),ariaLabel:()=>e.ariaLabelKey?a(e.ariaLabelKey):t,colspan:De(n.colspan,1),style:()=>n.style||"default",onTap:()=>r({type:"keypad/type-text",text:e.typedText||t})},T.createElement(Lt,{config:T.const({}),latex:T.const(e.content||t)}))}function Pb(e){return(t,r,n={},a)=>T.createElement(We,{command:T.const(e.command||t),ariaLabel:()=>e.ariaLabelKey?a(e.ariaLabelKey):t,colspan:De(n.colspan,1),style:()=>n.style||"default",onTap:()=>r({type:"keypad/type-text",text:e.typedText||t})},T.createElement("span",{class:T.const("dcg-mq-math-mode")},T.const(e.content||t)))}function U(e){return(t,r,n={},a)=>T.createElement(We,{command:T.const(t),ariaLabel:()=>e.ariaLabelKey?a(e.ariaLabelKey):t,colspan:De(n.colspan,1),style:()=>n.style||"default",onTap:()=>r({type:"keypad/type-text",text:t+"("})},T.createElement(GS,{key:()=>t.match(/^[a-z]{2,}$/)},c=>c?T.createElement("span",{class:T.const("dcg-mq-math-mode dcg-static-mathquill-view")},T.createElement("span",{class:T.const("dcg-mq-root-block")},T.createElement("span",{class:T.const("dcg-mq-operator-name")},()=>t))):T.createElement(Lt,{config:T.const({}),latex:T.const(t)})))}function Zt(e){return(t,r,n={},a)=>T.createElement(We,{command:T.const(e.command),ariaLabel:()=>e.ariaLabelKey?a(e.ariaLabelKey):e.command,colspan:De(n.colspan,1),style:()=>n.style||"default",onTap:()=>{r({type:"keypad/custom-command",command:e.command})}},T.createElement(Lt,{config:T.const({}),latex:T.const(e.content)}))}var NS={"{":Pb({ariaLabelKey:"shared-calculator-narration-keypad-key-left-bracket"}),"}":Pb({ariaLabelKey:"shared-calculator-narration-keypad-key-right-bracket"}),"(":q({ariaLabelKey:"shared-calculator-narration-keypad-key-left-paren"}),")":q({ariaLabelKey:"shared-calculator-narration-keypad-key-right-paren"}),sqrt:q({content:"\\sqrt{}",ariaLabelKey:"shared-calculator-narration-keypad-key-sqrt"}),"/":q({ariaLabelKey:"shared-calculator-narration-keypad-key-divide"}),division:q({content:"\xF7",typedText:"/",command:"/",ariaLabelKey:"shared-calculator-narration-keypad-key-divide"}),obelus:q({content:"\xF7",typedText:"\xF7",ariaLabelKey:"shared-calculator-narration-keypad-key-divide"}),"*":q({ariaLabelKey:"shared-calculator-narration-keypad-key-times"}),multiplication:q({content:"\xD7",typedText:"*",command:"*",ariaLabelKey:"shared-calculator-narration-keypad-key-times"}),"\xB1":q({ariaLabelKey:"shared-calculator-narration-keypad-plus-minus"}),"-":q({ariaLabelKey:"shared-calculator-narration-keypad-key-minus"}),"+":q({ariaLabelKey:"shared-calculator-narration-keypad-key-plus"}),".":q({ariaLabelKey:"shared-calculator-narration-keypad-key-decimal"}),ans:(e,t,r={},n)=>T.createElement(We,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-ans"),colspan:De(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/type-text",text:e})},T.const("ans")),enter:(e,t,r={},n)=>T.createElement(We,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-enter"),colspan:De(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/press-key",key:"Enter"})},T.createElement("i",{class:T.const("dcg-icon-arrow-enter"),"aria-hidden":T.const("true")})),shift:(e,t,r={},n)=>T.createElement(We,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-shift"),colspan:De(r.colspan,1),style:()=>r.style||"default",active:De(r.active,!1),onTap:()=>t({type:"keypad/shift"})},T.createElement("i",{class:T.const("dcg-icon-shift"),"aria-hidden":T.const("true")})),left:(e,t,r={},n)=>T.createElement(We,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-left-arrow"),colspan:De(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/press-key",key:"Left"})},T.createElement("i",{class:T.const("dcg-icon-arrow-left"),"aria-hidden":T.const("true")})),right:(e,t,r={},n)=>T.createElement(We,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-right-arrow"),colspan:De(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/press-key",key:"Right"})},T.createElement("i",{class:T.const("dcg-icon-arrow-right"),"aria-hidden":T.const("true")})),123:(e,t,r={},n)=>T.createElement(We,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-toggle-numbers"),colspan:De(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/123"})},T.const("1 2 3")),ABC:(e,t,r={},n)=>T.createElement(We,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-toggle-letters"),colspan:De(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/abc"})},T.const("A B C")),Audio:(e,t,r={},n)=>T.createElement(We,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-toggle-audio-trace"),colspan:De(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"on"})},T.createElement("i",{class:T.const("dcg-icon-volume"),"aria-hidden":T.const("true")})),backspace:(e,t,r={},n)=>T.createElement(We,{command:T.const(e),ariaLabel:()=>n("shared-calculator-narration-keypad-key-backspace"),colspan:De(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/press-key",key:"Backspace"})},T.createElement("i",{class:T.const("dcg-icon-delete"),"aria-hidden":T.const("true")})),pi:q({content:"\\pi",ariaLabelKey:"shared-calculator-narration-keypad-key-pi"}),alpha:q({content:"\\alpha",ariaLabelKey:"shared-calculator-narration-keypad-key-alpha"}),beta:q({content:"\\beta",ariaLabelKey:"shared-calculator-narration-keypad-key-beta"}),theta:q({content:"\\theta",ariaLabelKey:"shared-calculator-narration-keypad-key-theta"}),tau:q({content:"\\tau",ariaLabelKey:"shared-calculator-narration-keypad-key-tau"}),"a^2":Zt({command:"a^2",content:"a^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"a^3":Zt({command:"a^3",content:"a^3",ariaLabelKey:"shared-calculator-narration-keypad-key-cubed"}),"x^3":Zt({command:"a^3",content:"x^3",ariaLabelKey:"shared-calculator-narration-keypad-key-cubed"}),"a^b":q({content:"a^b",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-superscript"}),a_b:q({content:"a_b",typedText:"_",ariaLabelKey:"shared-calculator-narration-keypad-key-subscript"}),"a/b":Zt({content:"\\frac{a}{b}",command:"a/b",ariaLabelKey:"shared-calculator-narration-keypad-key-fraction"}),"x^2":Zt({command:"a^2",content:"x^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"x^y":q({content:"x^y",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-superscript"}),"x/y":q({content:"\\frac{x}{y}",typedText:"/",ariaLabelKey:"shared-calculator-narration-keypad-key-fraction"}),nthroot:Zt({command:"nthroot",content:"\\sqrt[n]{}",ariaLabelKey:"shared-calculator-narration-keypad-key-nthroot"}),ythroot:Zt({command:"nthroot",content:"\\sqrt[y]{}",ariaLabelKey:"shared-calculator-narration-keypad-key-ythroot"}),sin:U({ariaLabelKey:"shared-calculator-narration-keypad-key-sin"}),cos:U({ariaLabelKey:"shared-calculator-narration-keypad-key-cos"}),tan:U({ariaLabelKey:"shared-calculator-narration-keypad-key-tan"}),sec:U({ariaLabelKey:"shared-calculator-narration-keypad-key-sec"}),csc:U({ariaLabelKey:"shared-calculator-narration-keypad-key-csc"}),cot:U({ariaLabelKey:"shared-calculator-narration-keypad-key-cot"}),sinh:U({ariaLabelKey:"shared-calculator-narration-keypad-key-sinh"}),cosh:U({ariaLabelKey:"shared-calculator-narration-keypad-key-cosh"}),tanh:U({ariaLabelKey:"shared-calculator-narration-keypad-key-tanh"}),sech:U({ariaLabelKey:"shared-calculator-narration-keypad-key-csch"}),csch:U({ariaLabelKey:"shared-calculator-narration-keypad-key-csch"}),coth:U({ariaLabelKey:"shared-calculator-narration-keypad-key-coth"}),arcsin:Zt({command:"arcsin",content:"sin^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arcsin"}),arccos:Zt({command:"arccos",content:"cos^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccos"}),arctan:Zt({command:"arctan",content:"tan^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arctan"}),arccsc:Zt({command:"arccsc",content:"csc^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccsc"}),arcsec:Zt({command:"arcsec",content:"sec^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arcsec"}),arccot:Zt({command:"arccot",content:"cot^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccot"}),"|a|":q({typedText:"|",ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),"|x|":q({typedText:"|",ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),ln:U({ariaLabelKey:"shared-calculator-narration-keypad-key-ln"}),midpoint:U({ariaLabelKey:"shared-calculator-narration-keypad-key-midpoint"}),segment:U({ariaLabelKey:"shared-calculator-narration-keypad-key-segment"}),line:U({ariaLabelKey:"shared-calculator-narration-keypad-key-line"}),ray:U({ariaLabelKey:"shared-calculator-narration-keypad-key-ray"}),parallel:U({ariaLabelKey:"shared-calculator-narration-keypad-key-parallel"}),perpendicular:U({ariaLabelKey:"shared-calculator-narration-keypad-key-perpendicular"}),circle:U({ariaLabelKey:"shared-calculator-narration-keypad-key-circle"}),arc:U({ariaLabelKey:"shared-calculator-narration-keypad-key-arc"}),angle:U({ariaLabelKey:"shared-calculator-narration-keypad-key-angle"}),directedangle:U({ariaLabelKey:"shared-calculator-narration-keypad-key-directed-angle"}),glider:U({ariaLabelKey:"shared-calculator-narration-keypad-key-glider"}),coterminal:U({ariaLabelKey:"shared-calculator-narration-keypad-key-coterminal"}),supplement:U({ariaLabelKey:"shared-calculator-narration-keypad-key-supplement"}),dilate:U({ariaLabelKey:"shared-calculator-narration-keypad-key-dilate"}),rotate:U({ariaLabelKey:"shared-calculator-narration-keypad-key-rotate"}),translate:U({ariaLabelKey:"shared-calculator-narration-keypad-key-translate"}),reflect:U({ariaLabelKey:"shared-calculator-narration-keypad-key-reflect"}),vertices:U({ariaLabelKey:"shared-calculator-narration-keypad-key-vertices"}),angles:U({ariaLabelKey:"shared-calculator-narration-keypad-key-angles"}),directedangles:U({ariaLabelKey:"shared-calculator-narration-keypad-key-directed-angles"}),segments:U({ariaLabelKey:"shared-calculator-narration-keypad-key-segments"}),radius:U({ariaLabelKey:"shared-calculator-narration-keypad-key-radius"}),center:U({ariaLabelKey:"shared-calculator-narration-keypad-key-center"}),intersection:U({ariaLabelKey:"shared-calculator-narration-keypad-key-intersection"}),area:U({ariaLabelKey:"shared-calculator-narration-keypad-key-area"}),perimeter:U({ariaLabelKey:"shared-calculator-narration-keypad-key-perimeter"}),log:U({ariaLabelKey:"shared-calculator-narration-keypad-key-log"}),quantile:U({ariaLabelKey:"shared-calculator-narration-keypad-key-quantile"}),quartile:U({ariaLabelKey:"shared-calculator-narration-keypad-key-quartile"}),var:U({}),varp:U({}),nCr:U({}),loga:Zt({command:"loga",content:"log_a",ariaLabelKey:"shared-calculator-narration-keypad-key-loga"}),stdev:U({ariaLabelKey:"shared-calculator-narration-keypad-key-stdev"}),mad:U({}),nPr:U({}),total:U({}),count:U({}),length:U({}),for:U({}),min:U({}),max:U({}),cov:U({ariaLabelKey:"shared-calculator-narration-keypad-key-cov"}),covp:U({ariaLabelKey:"shared-calculator-narration-keypad-key-covp"}),corr:U({ariaLabelKey:"shared-calculator-narration-keypad-key-corr"}),spearman:U({ariaLabelKey:"shared-calculator-narration-keypad-key-spearman"}),stats:U({ariaLabelKey:"shared-calculator-narration-keypad-key-stats"}),polygon:U({ariaLabelKey:"shared-calculator-narration-keypad-key-polygon"}),distance:U({ariaLabelKey:"shared-calculator-narration-keypad-key-distance"}),triangle:U({ariaLabelKey:"shared-calculator-narration-keypad-key-triangle"}),sphere:U({ariaLabelKey:"shared-calculator-narration-keypad-key-sphere"}),vector:U({ariaLabelKey:"shared-calculator-narration-keypad-key-vector"}),mean:U({ariaLabelKey:"shared-calculator-narration-keypad-key-mean"}),stdevp:U({ariaLabelKey:"shared-calculator-narration-keypad-key-stdevp"}),mod:U({}),"e^x":q({typedText:"e^",ariaLabelKey:"shared-calculator-narration-keypad-key-exp"}),"10^n":q({content:"\\times10^{n}",typedText:"*10^",ariaLabelKey:"shared-calculator-narration-keypad-key-10-n"}),"a^{-1}":q({typedText:"^-1",ariaLabelKey:"shared-calculator-narration-keypad-key-reciprocal"}),sum:q({content:"\\sum",ariaLabelKey:"shared-calculator-narration-keypad-key-sum"}),prod:q({content:"\\prod",ariaLabelKey:"shared-calculator-narration-keypad-key-product"}),floor:U({ariaLabelKey:"shared-calculator-narration-keypad-key-floor"}),ceil:U({ariaLabelKey:"shared-calculator-narration-keypad-key-ceil"}),round:U({ariaLabelKey:"shared-calculator-narration-keypad-key-round"}),abs:U({ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),"!":q({ariaLabelKey:"shared-calculator-narration-keypad-key-factorial"}),"n!":q({typedText:"!",ariaLabelKey:"shared-calculator-narration-keypad-key-factorial"}),median:U({ariaLabelKey:"shared-calculator-narration-keypad-key-median"}),lcm:U({}),gcd:U({}),gcf:U({}),ddx:Zt({command:"ddx",content:"\\frac{d}{dx}"}),integral:Zt({command:"integral",content:"\\int",ariaLabelKey:"shared-calculator-narration-keypad-key-int"}),"%":q({content:"\\%",ariaLabelKey:"shared-calculator-narration-keypad-key-percent-of"}),"->":q({content:"\\to",ariaLabelKey:"shared-calculator-narration-keypad-key-action-to"}),with:q({typedText:"with",content:"with",ariaLabelKey:"shared-calculator-narration-keypad-key-action-with"}),prime:q({typedText:"'",content:"f'",ariaLabelKey:"shared-calculator-narration-keypad-key-prime"}),exp:q({}),sign:U({}),normaldist:U({ariaLabelKey:"shared-calculator-narration-keypad-key-normaldist"}),poissondist:U({ariaLabelKey:"shared-calculator-narration-keypad-key-poissondist"}),binomialdist:U({ariaLabelKey:"shared-calculator-narration-keypad-key-binomialdist"}),uniformdist:U({ariaLabelKey:"shared-calculator-narration-keypad-key-uniformdist"}),erf:U({ariaLabelKey:"shared-calculator-narration-keypad-key-erf"}),histogram:U({ariaLabelKey:"shared-calculator-narration-keypad-key-histogram"}),boxplot:U({ariaLabelKey:"shared-calculator-narration-keypad-key-boxplot"}),dotplot:U({ariaLabelKey:"shared-calculator-narration-keypad-key-dotplot"}),tscore:U({ariaLabelKey:"shared-calculator-narration-keypad-key-tscore"}),ittest:U({ariaLabelKey:"shared-calculator-narration-keypad-key-ittest"}),ttest:U({ariaLabelKey:"shared-calculator-narration-keypad-key-ttest"}),tdist:U({ariaLabelKey:"shared-calculator-narration-keypad-key-tdist"}),pdf:U({ariaLabelKey:"shared-calculator-narration-keypad-key-pdf"}),cdf:U({ariaLabelKey:"shared-calculator-narration-keypad-key-pdf"}),random:U({ariaLabelKey:"shared-calculator-narration-keypad-key-random"}),inversecdf:U({ariaLabelKey:"shared-calculator-narration-keypad-key-inversecdf"}),hsv:U({}),rgb:U({}),sort:U({}),shuffle:U({}),unique:U({}),join:U({}),"A^-1":Zt({command:"A^-1",content:"A^{-1}",ariaLabelKey:"matrix-calculator-narration-keypad-key-inverse"}),"A^T":Zt({command:"A^T",content:"A^T",ariaLabelKey:"matrix-calculator-narration-keypad-key-transpose"}),"A^2":Zt({command:"A^2",content:"A^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"A^n":q({content:"A^n",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-exp"}),det:U({ariaLabelKey:"matrix-calculator-narration-keypad-key-det"}),trace:U({ariaLabelKey:"matrix-calculator-narration-keypad-key-trace"}),rref:U({ariaLabelKey:"matrix-calculator-narration-keypad-key-rref"}),a:q({}),b:q({}),c:q({}),d:q({}),e:q({}),f:q({}),g:q({}),h:q({}),i:q({}),j:q({}),k:q({}),l:q({}),m:q({}),n:q({}),o:q({}),p:q({}),q:q({}),r:q({}),s:q({}),t:q({}),u:q({}),v:q({}),w:q({}),x:q({}),boldX:q({content:"x",typedText:"x"}),y:q({}),boldY:q({content:"y",typedText:"y"}),z:q({}),boldZ:q({content:"z",typedText:"z"}),A:q({}),B:q({}),C:q({}),D:q({}),E:q({}),F:q({}),G:q({}),H:q({}),I:q({}),J:q({}),K:q({}),L:q({}),M:q({}),N:q({}),O:q({}),P:q({}),Q:q({}),R:q({}),S:q({}),T:q({}),U:q({}),V:q({}),W:q({}),X:q({}),Y:q({}),Z:q({}),0:q({}),1:q({}),2:q({}),3:q({}),4:q({}),5:q({}),6:q({}),7:q({}),8:q({}),9:q({}),",":q({}),"=":q({}),"[":q({}),"]":q({}),"{}_left":Go({keys:["{","}"]}),"{}_right":Vo({keys:["{","}"]}),"()_left":Go({keys:["(",")"]}),"()_right":Vo({keys:["(",")"]}),"[]_left":Go({keys:["[","]"]}),"[]_right":Vo({keys:["[","]"]}),",'_left":Go({keys:[",","\u2032"]}),",'_right":Vo({keys:[",","\u2032"],typedText:"'"}),'"':q({}),"'":q({}),"~":q({}),":":q({}),">":q({}),"<":q({}),">=":q({content:"\\ge"}),"<=":q({content:"\\le"}),"!%_left":Go({keys:["!","{}^{%}"]}),"!%_right":Vo({keys:["!","{}^{%}"],typedText:"%"}),"~:_left":Go({keys:["~","{}^{:}"]}),"~:_right":Vo({keys:["~","{}^{:}"],typedText:":"}),"audio-trace-off":VS({contentKey:"graphing-calculator-button-keypad-audio-trace-off",command:"off"}),"hear-graph":(e,t,r={},n)=>T.createElement(We,{command:T.const(e),disabled:De(r.disabled,!1),colspan:De(r.colspan,1),style:De(r.style,"blue"),onTap:()=>{t({type:"keypad/audio-trace",command:"hear-graph"})}},T.createElement("span",{class:T.const("dcg-play-icon-container")},T.createElement("i",{class:T.const("dcg-icon-play"),"aria-hidden":T.const("true")})),T.createElement("span",null,()=>n("graphing-calculator-button-audio-trace-hear-graph"))),"stop-graph":(e,t,r={},n)=>T.createElement(We,{command:T.const(e),disabled:De(r.disabled,!1),colspan:De(r.colspan,1),style:De(r.style,"blue"),onTap:()=>{t({type:"keypad/audio-trace",command:"stop-graph"})}},T.createElement("span",{class:T.const("dcg-stop-icon-container")},T.createElement("span",{class:T.const("dcg-stop-icon")})),T.createElement("span",null,()=>n("graphing-calculator-button-audio-trace-stop-graph"))),"volume-down":(e,t,r={},n)=>T.createElement(We,{command:T.const(e),ariaLabel:()=>n("graphing-calculator-narration-keypad-key-volume-down"),disabled:De(r.disabled,!1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"volume-down"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-volume-down"),"aria-hidden":T.const("true")}))),"volume-up":(e,t,r={},n)=>T.createElement(We,{command:T.const(e),ariaLabel:()=>n("graphing-calculator-narration-keypad-key-volume-up"),disabled:De(r.disabled,!1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"volume-up"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-volume-up"),"aria-hidden":T.const("true")}))),"speed-down":(e,t,r={},n)=>T.createElement(We,{command:T.const(e),ariaLabel:()=>n("graphing-calculator-narration-keypad-key-speed-down"),disabled:De(r.disabled,!1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"speed-down"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-hide"),"aria-hidden":T.const("true")}))),"speed-up":(e,t,r={},n)=>T.createElement(We,{command:T.const(e),ariaLabel:()=>n("graphing-calculator-narration-keypad-key-speed-up"),disabled:De(r.disabled,!1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"speed-up"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-show"),"aria-hidden":T.const("true")}))),"previous-point":(e,t,r={},n)=>T.createElement(We,{ariaLabel:()=>n("graphing-calculator-narration-keypad-key-previous-point"),command:T.const(e),disabled:De(r.disabled,!1),colspan:De(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"previous-point"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-thin-arrow-left"),"aria-hidden":T.const("true")}))),"next-point":(e,t,r={},n)=>T.createElement(We,{ariaLabel:()=>n("graphing-calculator-narration-keypad-key-next-point"),command:T.const(e),disabled:De(r.disabled,!1),colspan:De(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"next-point"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-thin-arrow-right"),"aria-hidden":T.const("true")}))),"previous-poi":(e,t,r={},n)=>T.createElement(We,{ariaLabel:()=>n("graphing-calculator-narration-keypad-key-previous-poi"),command:T.const(e),disabled:De(r.disabled,!1),colspan:De(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"previous-poi"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-hide"),"aria-hidden":T.const("true")}))),"next-poi":(e,t,r={},n)=>T.createElement(We,{ariaLabel:()=>n("graphing-calculator-narration-keypad-key-next-poi"),command:T.const(e),disabled:De(r.disabled,!1),colspan:De(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"next-poi"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-show"),"aria-hidden":T.const("true")}))),"previous-curve":(e,t,r={},n)=>T.createElement(We,{ariaLabel:()=>n("graphing-calculator-narration-keypad-key-previous-curve"),command:T.const(e),disabled:De(r.disabled,!1),colspan:De(r.colspan,1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"previous-curve"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-caret-up"),"aria-hidden":T.const("true")}))),"next-curve":(e,t,r={},n)=>T.createElement(We,{ariaLabel:()=>n("graphing-calculator-narration-keypad-key-next-curve"),command:T.const(e),disabled:De(r.disabled,!1),style:()=>r.style||"default",onTap:()=>t({type:"keypad/audio-trace",command:"next-curve"})},T.createElement("span",{class:T.const("dcg-button-icon dcg-icon-only")},T.createElement("i",{class:T.const("dcg-icon-caret-down"),"aria-hidden":T.const("true")})))};function Me(e,t,r={}){let n=e.dispatch;return NS[t](t,n,r,e.s)}function Li(e=1){return T.createElement("div",{style:T.const(`flex-grow:${e}`)})}var Ae=he(me());var Bs=class extends ht{template(){return Ae.createElement("div",{class:Ae.const("dcg-edit-matrix-bar dcg-do-not-blur"),role:Ae.const("toolbar"),"aria-label":()=>this.controller.s("matrix-calculator-narration-resize-controls")},Ae.createElement("div",{class:Ae.const("dcg-edit-section-title")},()=>this.controller.s("matrix-calculator-heading-edit-matrix",{variable:this.getItem().variable})),Ae.createElement("div",{class:Ae.const("dcg-resize-section")},Ae.createElement(No,{id:()=>this.props.id(),op:Ae.const("remove-matrix-row"),ariaLabel:()=>this.controller.s("matrix-calculator-narration-remove-row"),iconClass:Ae.const("dcg-icon-minus"),controller:()=>this.props.controller()}),Ae.createElement("span",{class:Ae.const("dcg-resize-info")},Ae.createElement("span",{class:Ae.const("dcg-resize-category")},()=>this.controller.s("matrix-calculator-label-rows")),Ae.createElement("span",{class:Ae.const("dcg-resize-count")},()=>this.numRows())),Ae.createElement(No,{id:()=>this.props.id(),op:Ae.const("add-matrix-row"),ariaLabel:()=>this.controller.s("matrix-calculator-narration-add-row"),iconClass:Ae.const("dcg-icon-plus"),controller:()=>this.props.controller()})),Ae.createElement("div",{class:Ae.const("dcg-resize-section")},Ae.createElement(No,{id:()=>this.props.id(),op:Ae.const("remove-matrix-col"),ariaLabel:()=>this.controller.s("matrix-calculator-narration-remove-column"),iconClass:Ae.const("dcg-icon-minus"),controller:()=>this.props.controller()}),Ae.createElement("span",{class:Ae.const("dcg-resize-info")},Ae.createElement("span",{class:Ae.const("dcg-resize-category")},()=>this.controller.s("matrix-calculator-label-columns")),Ae.createElement("span",{class:Ae.const("dcg-resize-count")},()=>this.numCols())),Ae.createElement(No,{id:()=>this.props.id(),op:Ae.const("add-matrix-col"),ariaLabel:()=>this.controller.s("matrix-calculator-narration-add-column"),iconClass:Ae.const("dcg-icon-plus"),controller:()=>this.props.controller()})))}numRows(){return this.getItem().matrix.length}numCols(){let t=this.getItem().matrix;return t.length===0?0:t[0].length}getItem(){return this.model.getExpressionById(this.props.id())}},No=class extends ht{template(){return Ae.createElement("span",{class:()=>({"dcg-resize-action":!0,"dcg-disabled":this.isDisabled()}),tabindex:()=>this.isDisabled()?-1:0,onTap:()=>{this.isDisabled()||this.controller.dispatch({type:this.props.op(),id:this.props.id()})},onMount:t=>this.didMountRoot(t),onFocusin:t=>this.onFocusEvent(t),onFocusout:t=>this.onFocusEvent(t),onKeydown:t=>this.onKey(t),role:Ae.const("button"),"aria-label":()=>this.props.ariaLabel(),"aria-disabled":()=>this.isDisabled(),"dcg-command":()=>this.props.op()},Ae.createElement("i",{class:()=>this.props.iconClass(),"aria-hidden":Ae.const("true")}))}didMountRoot(t){this.root=t,this.shouldBeFocused()&&!this.isFocused()&&this.root.focus()}didUpdate(){this.shouldBeFocused()&&!this.isFocused()&&this.root.focus()}onFocusEvent(t){let r=this.isFocused();r!==this.shouldBeFocused()&&this.controller.dispatch({type:r?"focus-resize-button":"blur-resize-button",id:this.props.id(),op:this.props.op()})}shouldBeFocused(){return this.model.isResizeButtonFocused(this.props.id(),this.props.op())}isDisabled(){return this.model.isResizeOpDisabled(this.props.id(),this.props.op())}isFocused(){return!!(document.activeElement&&this.root.contains(document.activeElement))}onKey(t){t.key==="Tab"&&this.controller.dispatch({type:"edit-bar/press-key",key:t.key,evt:t})}};var{If:Ct}=be.Components,ed=class extends ht{template(){return be.createElement("div",{role:be.const("region"),"aria-label":()=>this.controller.s("shared-calculator-narration-keypad"),class:be.const("dcg-basic-keypad-container")},be.createElement(qs,{controller:this.props.controller},be.createElement(Ua,null,be.createElement(Ct,{predicate:this.bindFn(this.shouldShowEditMatrixBar)},()=>Li(4)),be.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Me(this,"A")),be.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Me(this,"B")),be.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Me(this,"C")),be.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Me(this,"D")),be.createElement("div",{class:be.const("dcg-partition-placeholder")}),Me(this,"7",{style:"highlight"}),Me(this,"8",{style:"highlight"}),Me(this,"9",{style:"highlight"}),Me(this,"division"),be.createElement("div",{class:be.const("dcg-partition-placeholder")}),Me(this,"("),Me(this,")")),be.createElement(Ua,null,be.createElement(Ct,{predicate:this.bindFn(this.shouldShowEditMatrixBar)},()=>Li(4)),be.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Me(this,"E")),be.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Me(this,"F")),be.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Me(this,"G")),be.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Me(this,"H")),be.createElement("div",{class:be.const("dcg-partition-placeholder")}),Me(this,"4",{style:"highlight"}),Me(this,"5",{style:"highlight"}),Me(this,"6",{style:"highlight"}),Me(this,"multiplication"),be.createElement("div",{class:be.const("dcg-partition-placeholder")}),Me(this,"left",{style:"highlight"}),Me(this,"right",{style:"highlight"})),be.createElement(Ua,null,be.createElement(Ct,{predicate:this.bindFn(this.shouldShowEditMatrixBar)},()=>Li(4)),be.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Me(this,"A^2")),be.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Me(this,"A^-1")),be.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Me(this,"A^T")),be.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Me(this,"A^n")),be.createElement("div",{class:be.const("dcg-partition-placeholder")}),Me(this,"1",{style:"highlight"}),Me(this,"2",{style:"highlight"}),Me(this,"3",{style:"highlight"}),Me(this,"+"),be.createElement("div",{class:be.const("dcg-partition-placeholder")}),Li(.5),Me(this,"backspace",{style:"highlight",colspan:1.5})),be.createElement(Ua,null,be.createElement(Ct,{predicate:this.bindFn(this.shouldShowEditMatrixBar)},()=>Li(4)),be.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Me(this,"rref")),be.createElement(Ct,{predicate:this.bindFn(this.showBtn)},()=>Me(this,"det")),be.createElement(Ct,{predicate:()=>!this.controller.isNarrow()&&this.showBtn()},()=>Me(this,"trace")),be.createElement(Ct,{predicate:()=>!this.controller.isNarrow()&&this.showBtn()},()=>Li(1)),be.createElement(Ct,{predicate:()=>this.controller.isNarrow()&&this.showBtn()},()=>Me(this,"trace",{colspan:2})),be.createElement("div",{class:be.const("dcg-partition-placeholder")}),Me(this,"0",{style:"highlight"}),Me(this,".",{style:"highlight"}),Me(this,"sqrt"),Me(this,"-"),be.createElement("div",{class:be.const("dcg-partition-placeholder")}),Me(this,"enter",{style:"blue",colspan:2}))),be.createElement(Ct,{predicate:()=>this.shouldShowEditMatrixBar()},()=>be.createElement(Bs,{id:()=>this.model.getIdOfFocus(),controller:this.props.controller})))}showBtn(){return!this.shouldShowEditMatrixBar()}shouldShowEditMatrixBar(){let e=this.model.getIdOfFocus();return e===void 0?!1:this.model.getExpressionById(e).type==="matrix"}};var Nr=he(me());lr();var PS=document.location.href.indexOf("dcgDebugTouchTracking=dcgYES")!==-1,$a,Io;window._touchtracking_id_counter==null&&(window._touchtracking_id_counter=0);window._touchtracking_id_counter+=1;var $s="touchtracking_id_"+window._touchtracking_id_counter,bt=function(e){Io&&(Io.value="("+Date.now()+") "+e+`
`+Io.value)};function nd(e){if(e.classList.add("dcg-tap-container",$s),PS){$a&&$a.remove(),$a=document.createElement("div"),la($a,{position:"absolute",bottom:"10px",right:"10px"});let t=document.createElement("textarea");t.setAttribute("rows","30"),t.setAttribute("cols","40"),$a.append(t);let r=document.createElement("div");r.id="dcg-touchtracking-debug-copy",r.classList.add("dcg-btn-blue"),r.innerText="COPY LOGS",$a.append(r),Io=$a.querySelector("textarea"),e.append($a),r.addEventListener("mousedown",function(){Io&&(Io.select(),document.execCommand("copy"))},!0),bt("monitor touches")}}var zs=0,mn=1,Ks=2,Po=3,va=4,Ge=zs,jp={},Ln={},wa=[],Yp=0,Us=null,rd=null,Gi=!1,td=null,Fb=Gi,za=function(e){e.type.startsWith("key")?Gi=!0:e.type.startsWith("pointer")&&(Gi=!1);let t=document.activeElement;t&&!t.closest(".dcg-tap-container."+$s)&&(t=null),t!==td?(td&&td.classList.remove("dcg-focus-visible"),t&&Gi&&t.classList.add("dcg-focus-visible")):Fb!==Gi&&t&&(Gi?t.classList.add("dcg-focus-visible"):t.classList.remove("dcg-focus-visible")),Fb=Gi,td=t};document.addEventListener("keydown",za,{capture:!0});document.addEventListener("keydown",za);document.addEventListener("pointerdown",za);document.addEventListener("pointerdown",za,{capture:!0});document.addEventListener("focusin",za,{capture:!0});document.addEventListener("focusin",za);document.addEventListener("focusout",za,{capture:!0});document.addEventListener("focusout",za);var _b,_r=[],Jp=function(e){if(!(e instanceof Element))return[];let t=e.closest(".dcg-tap-container."+$s);if(!t)return[];let r=e,n=[];for(;r;){if(n.push(r),r===t)return n;r=r.parentNode}return[]},ad=function(e,t){rd=null,Ge=e,bt("beginMode:"+Ge),Ge===mn?wa=Jp(t.originalEvent.touches[0].target):wa=Jp(t.target),wa.forEach(r=>{r.classList.add("dcg-depressed"),Ub(r)&&r.classList.add("dcg-focus-by-tap")}),wa.forEach(function(r){let n=ee(r);n.data({originalScrollTop:n.scrollTop(),originalScrollLeft:n.scrollLeft()})}),Ln={}};function Qp(e){return e.matches('input, textarea, select, [role="textbox"]')||e.classList.contains("dcg-mathquill-input-span")||e.matches("[contenteditable=true]")}var Fo=function(e){if(!(e instanceof Element))return!1;let t=e.closest(".dcg-tap-container");return t?t.matches(".dcg-tap-container."+$s):!1},Ub=function(e){return Ge!==Po&&!Qp(e)&&Fo(e)},_o=function(e,t){rd=null;let r=!1;bt("endMode:"+Ge),document.querySelectorAll(".dcg-depressed").forEach(a=>{a.classList.remove("dcg-depressed")});let n=document.activeElement;if(!Kb(e.target)&&n&&Ub(n))try{n.blur()}catch(a){}if(document.querySelectorAll(".dcg-focus-by-tap").forEach(a=>a.classList.remove("dcg-focus-by-tap")),wa.forEach(function(a){let c=ee(a),l=c.data("originalScrollTop")-c.scrollTop(),g=c.data("originalScrollLeft")-c.scrollLeft();(l||g)&&(Ln.scroll=!0)}),Ln["dcg-tapstart"]===1&&Ln["dcg-tapend"]===1&&!Ln["dcg-tapcancel"]&&!Ln.scroll){bt("potential dcg-tap");let a=t.changedTouches[0].clientX,c=t.changedTouches[0].clientY;if(e&&!e.device&&a===0&&c===0){bt("event appears to be simulated"),r=!0,Ge=Po;let p=e.target.getBoundingClientRect();a=(p.left+p.right)/2,c=(p.top+p.bottom)/2}bt("potential dcg-tap coords:"+a+":"+c);let l=!1,g=!1;for(let p of wa){if(l)break;let f;if(typeof p.getBoundingClientRect=="function"&&(f=p.getBoundingClientRect()),typeof p.getAttribute=="function"&&p.getAttribute("tapboundary")==="true"&&(l=!0),!(f&&(a<f.left||c<f.top||a>f.right||c>f.bottom))){rd=p,g=!0,Vr("dcg-tap",e,{target:rd,touches:t.touches,changedTouches:t.changedTouches});break}}bt("result of dcg-tap:  did_dispatch="+g+"  did_escape="+l)}Ge===mn||Ge===va?Us=setTimeout(function(){Us=null,Yp=new Date().getTime()},1e3):r&&(Us=setTimeout(function(){Us=null,Yp=new Date().getTime()},100)),wa=[],Ge=zs},Oo=function(){return Us||new Date().getTime()-Yp<500},$b=function(e){return e.identifier!==void 0?e.identifier:e.pointerId},Rb=function(e){let t=[];for(let r of e)t.push({identifier:$b(r),x:r.pageX,y:r.pageY,screenX:r.screenX,screenY:r.screenY,pageX:r.pageX,pageY:r.pageY,clientX:r.clientX,clientY:r.clientY});return t},Vr=function(e,t,r){let n=$b(t),a=Rb(r.touches),c=Rb(r.changedTouches);if(bt("dispatchEvent:"+e),e==="dcg-tapstart")jp[n]={type:e,pageX:c[0].pageX,pageY:c[0].pageY};else if(e==="dcg-tapmove"){let f=c[0],w=jp[n];if(w&&f.pageX===w.pageX&&f.pageY===w.pageY||(Ge===mn||Ge===va)&&w&&w.type==="dcg-tapstart"&&Math.abs(w.pageX-f.pageX)+Math.abs(w.pageY-f.pageY)<2)return;jp[n]={type:e,pageX:c[0].pageX,pageY:c[0].pageY}}let l=e.toLowerCase();Ln[l]===void 0?Ln[l]=1:Ln[l]++;let g=ee.event.fix(t.originalEvent);g.type=e,g.device=Ge===mn||Ge===va?"touch":Ge===Po?"keyboard":"mouse",g.touches=a,g.changedTouches=c,g.target=r.target?r.target:t.target;let p=g.device!=="keyboard"&&Ln["dcg-longhold"]>0;g.wasLongheld=function(){return p},g.preventTap=function(){Ln["dcg-tapcancel"]=1},clearTimeout(_b),g.type==="dcg-tapstart"&&g.device!=="keyboard"&&g.touches.length===1&&(_b=setTimeout(function(){Vr("dcg-longhold",t,r)},500)),g.target&&g.target.nodeName&&g.target.nodeName.toLowerCase()==="a"&&g.type==="dcg-tap"&&g.device==="keyboard"&&g.target.click&&g.target.click(),bt("trigger event:"+g.type),ee(g.target).trigger(g)},id=function(e){let t=wa,r=!!wa.length,n=document.querySelectorAll(".dcg-tap-container."+$s+" .dcg-hovered"),a=Array.from(n).filter(Fo),c=[],l=[],g=[];e&&Jp(e).forEach(function(p){(!r||t.indexOf(p)!==-1)&&(a.indexOf(p)===-1&&g.push(p),c.push(p))});for(let p of a)c.indexOf(p)===-1&&l.push(p);l.forEach(p=>{p&&p.classList.remove("dcg-hovered"),ee(p).trigger("tipsyhide")}),g.forEach(p=>{p&&p.classList.add("dcg-hovered"),ee(p).trigger("tipsyshow")})},od=function(e){for(let t of _r)if(t.pointerId===e)return!0;return!1},Xp=function(e){for(let t=0;t<_r.length;t++)if(_r[t].pointerId===e){_r.splice(t,1)[0];return}},zb=function(e){Ge===zs&&ad(va,e),id(null),_r.push(e.originalEvent),Vr("dcg-tapstart",e,{touches:_r,changedTouches:[e.originalEvent]})},qb=function(e){Xp(e.originalEvent.pointerId);let t={touches:_r,changedTouches:[e.originalEvent]};Vr("dcg-tapcancel",e,t),_r.length===0&&_o(e,t)},Bb=function(e){Xp(e.originalEvent.pointerId);let t={touches:_r,changedTouches:[e.originalEvent]};Vr("dcg-tapend",e,t),_r.length===0&&_o(e,t)},sd=function(e){return e.originalEvent.pointerType==="touch"},Ro=function(e,t){e.trim().split(/\s+/).forEach(function(r){let n=OS?{passive:!1}:void 0;document.addEventListener(r,function(a){bt("document.on:"+a.type),t(ee.event.fix(a))},n)})};Ro("pointerdown MSPointerDown",function(e){if(!(Ge===Ks||Ge===mn||!sd(e))){if(od(e.originalEvent.pointerId)){bt("exit. pointer id already exists: "+e.originalEvent.pointerId);return}zb(e)}});Ro("pointermove MSPointerMove",function(e){Ge===Ks||Ge===mn||!sd(e)||(od(e.originalEvent.pointerId)||(bt("pointer id already exists: "+e.originalEvent.pointerId),zb(e)),Xp(e.originalEvent.pointerId),_r.push(e.originalEvent),Vr("dcg-tapmove",e,{touches:_r,changedTouches:[e.originalEvent]}))});ee(document).on("pointercancel MSPointerCancel",function(e){if(bt("document.on:"+e.type),Ge!==va||!sd(e)||!od(e.originalEvent.pointerId))return;qb(e);let t;for(;t=_r.pop();){let r=ee.Event(t,{originalEvent:t});qb(r)}});ee(document).on("pointerup MSPointerUp",function(e){if(bt("document.on:"+e.type),Ge!==va||!sd(e)||!od(e.originalEvent.pointerId))return;Bb(e);let t;for(;t=_r.pop();){let r=ee.Event(t,{originalEvent:t});Bb(r)}});var OS=function(){let e=!1;try{let t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",function(){},t),window.removeEventListener("test",function(){},t)}catch(t){}return e}();Ro("touchstart",function(e){Ge===Ks||Ge===va||(Ge===zs&&ad(mn,e),id(null),Vr("dcg-tapstart",e,{touches:e.originalEvent.touches,changedTouches:e.originalEvent.changedTouches}))});Ro("touchmove",function(e){Ge===mn&&Vr("dcg-tapmove",e,{touches:e.originalEvent.touches,changedTouches:e.originalEvent.changedTouches})});Ro("touchcancel",function(e){if(Ge!==mn)return;let t={touches:e.originalEvent.touches,changedTouches:e.originalEvent.changedTouches};Vr("dcg-tapcancel",e,t),e.originalEvent.touches.length===0&&_o(e,t)});Ro("touchend",function(e){if(Ge!==mn)return;let t={touches:e.originalEvent.touches,changedTouches:e.originalEvent.changedTouches};Vr("dcg-tapend",e,t),e.originalEvent.touches.length===0&&_o(e,t)});ee(document).on("mousedown",function(e){if(bt("document.on:"+e.type),!(e.button===1||e.button===2)){if(Ge===mn||Ge===va||Oo()){!e.target.matches("input, textarea, select")&&Fo(e.target)&&e.preventDefault(),bt("abort mousedown: "+Ge+":"+Oo());return}ad(Ks,e),Vr("dcg-tapstart",e,{touches:[e],changedTouches:[e]})}});var Kb=function(e){if(!(e instanceof Element))return!1;let t=!!e.closest(".dcg-do-not-blur"),r=!!e.closest(".dcg-do-blur");return!!(t&&!r&&Fo(e))};ee(document).on("mousedown",function(e){if(bt("document.on:"+e.type),!!Kb(e.target)){e.preventDefault();try{let t=window.getSelection();if(t.rangeCount===1){let r=t.getRangeAt(0);r.startContainer===r.endContainer&&r.startContainer.closest(".dcg-text-selectable")&&t.removeAllRanges()}}catch(t){}}});ee(document).on("mouseleave",function(e){if(bt("document.on:"+e.type),Ge===zs){if(Oo()){bt("abort mouseleave: "+Ge+":"+Oo());return}id(null)}});ee(document).on("mousemove",function(e){if(bt("document.on:"+e.type),!(e.button===1||e.button===2)&&!(Ge===mn||Ge===va)){if(Oo()){bt("abort mousemove: "+Ge+":"+Oo());return}id(e.target),Vr("dcg-tapmove",e,{touches:[e],changedTouches:[e]})}});ee(document).on("mouseup",function(e){if(bt("document.on:"+e.type),e.button===1||e.button===2||Ge!==Ks)return;let t={touches:[],changedTouches:[e]};Vr("dcg-tapend",e,t),_o(e,t)});ee(document).on("keydown",function(e){if(bt("document.on:"+e.type),!(qt(e)!==Bp&&qt(e)!==Up||!Fo(e.target))&&Ge!==Po){if(e.target.matches('a:not([ontap]), button:not([ontap]), input, textarea, select, [role="textbox"], [contenteditable="true"]'))return;e.preventDefault(),ad(Po,e),Vr("dcg-tapstart",e,{touches:[e],changedTouches:[e]})}});ee(document).on("keyup",function(e){if(bt("document.on:"+e.type),qt(e)!==Bp&&qt(e)!==Up||!Fo(e.target)||Ge!==Po)return;let t={touches:[],changedTouches:[e]};Vr("dcg-tapend",e,t),_o(e,t)});var{If:FS}=Nr.Components,cd=class extends ht{template(){return Nr.createElement(FS,{predicate:()=>this.controller.shouldRender()},()=>Nr.createElement("div",{class:Nr.const("dcg-matrix-api-container"),style:Nr.const("width: 100%; height: 100%; position: relative;")},Nr.createElement("div",{class:()=>({"dcg-calc-matrix-main-wrapper":!0,"dcg-container":!0,"dcg-has-background-color":this.controller.hasBackgroundColor(),"dcg-narrow":this.controller.isNarrow(),"dcg-very-narrow":this.controller.isVeryNarrow(),"dcg-very-very-narrow":this.controller.isVeryVeryNarrow()}),didMount:this.bindFn(this.didMountRoot),onKeydown:this.bindFn(this.handleRootKeydown),"x-ms-format-detection":Nr.const("none"),style:()=>({color:this.controller.getTextColor(),filter:this.model.isEnabled("invertedColors")?"invert(100%)":"none"})},Nr.createElement("div",{class:()=>({"dcg-calc-matrix-main":!0,"dcg-projector-mode":this.controller.isProjectorMode()}),style:()=>({background:this.controller.getBackgroundColor(),"font-size":`${this.controller.getFontSize()}px`}),role:Nr.const("application"),"aria-label":()=>this.props.controller().s("matrix-calculator-narration-title")},Nr.createElement(jl,{controller:this.props.controller}),Nr.createElement(Xl,{controller:this.props.controller}),Nr.createElement(ed,{controller:this.props.controller})))))}didMountRoot(e){nd(e)}handleRootKeydown(e){return bb(e)?(this.dispatch({type:"undo"}),!1):xb(e)?(this.dispatch({type:"redo"}),!1):!(!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&qt(e)===wb&&(!document.activeElement||!Qp(document.activeElement)))}};function ld(e){return{type:"constant",value:e}}function Hb(e){return{type:"matrix",elements:e}}function dd(e){return{type:"identifier",symbol:e}}function Zp(e,t){return{type:"functionCall",symbol:e,args:t}}function jb(e,t){return{type:"functionExponent",symbol:e,args:t}}function qo(e,t){return{type:"op",symbol:e,args:t}}function Yb(e){return qo("add",e)}function Jb(e){return qo("sub",e)}function Bo(e){return qo("mul",e)}function Qb(e){return qo("div",e)}function ud(e){return qo("pow",e)}function Xb(e){return qo("neg",e)}function Zb(e){return{type:"constant",value:e,valueType:"number"}}function ex(e){return{type:"matrix",elements:e,valueType:"matrix"}}function pd(e,t,r){return{type:"intrinsic",symbol:e,args:t,valueType:r}}var tx=function(){{var e=function(){},t=["log","info","warn","error","assert","dir","clear","profile","profileEnd","time","timeEnd","group","groupCollapsed","groupEnd","trace"],r={},n=function(a){typeof window!="undefined"&&window.console&&window.console[a]?r[a]=function(){Function.prototype.apply.call(window.console[a],window.console,arguments)}:r[a]=e};return t.forEach(n),r}}(),Vt=tx,{log:cP,warn:lP,error:dP,assert:uP,dir:pP,clear:gP,profile:hP,profileEnd:mP,time:fP,timeEnd:yP,group:bP,groupCollapsed:xP,groupEnd:wP,trace:vP}=tx;function gd(e){var t=[];for(let n of e)if(!(!n||typeof n!="string")){var r=n.split("-")[0];t.push(n),t.push(r);for(let a in ka){let c=ka[a];a.split("-")[0]===r&&c.useAsRoot&&t.push(a)}}return t}var ka={en:{displayName:"English (US)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},es:{displayName:"Espa\xF1ol (LATAM)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ES-ES.pdf",useAsRoot:!0},et:{displayName:"Eesti",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ru:{displayName:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_RU.pdf",useAsRoot:!1},da:{displayName:"Dansk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},de:{displayName:"Deutsch",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_DE.pdf",useAsRoot:!1},"pt-BR":{displayName:"Portugu\xEAs (Brasil)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!0},"pt-PT":{displayName:"Portugu\xEAs (Portugal)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ca:{displayName:"Catal\xE0",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},fr:{displayName:"Fran\xE7ais",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_FR.pdf",useAsRoot:!1},it:{displayName:"Italiano",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_IT.pdf",useAsRoot:!1},is:{displayName:"\xCDslenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},nl:{displayName:"Nederlands",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},no:{displayName:"Norsk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"sv-SE":{displayName:"Svenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!0},hu:{displayName:"Magyar",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},cs:{displayName:"\u010Ce\u0161tina",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},pl:{displayName:"Polski",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_PL.pdf",useAsRoot:!1},id:{displayName:"Bahasa Indonesia",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},vi:{displayName:"Ti\u1EBFng Vi\u1EC7t",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_VI.pdf",useAsRoot:!1},el:{displayName:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_EL.pdf",useAsRoot:!1},uk:{displayName:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ka:{displayName:"\u10E5\u10D0\u10E0\u10D7\u10E3\u10DA\u10D8",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},th:{displayName:"\u0E20\u0E32\u0E29\u0E32\u0E44\u0E17\u0E22",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},tr:{displayName:"T\xFCrk\xE7e",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_TR.pdf",useAsRoot:!1},"zh-CN":{displayName:"\u7B80\u4F53\u4E2D\u6587",useAsRoot:!0,userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-CN.pdf"},"zh-TW":{displayName:"\u7E41\u9AD4\u4E2D\u6587",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-TW.pdf",useAsRoot:!1},ko:{displayName:"\uD55C\uAD6D\uC5B4",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ja:{displayName:"\u65E5\u672C\u8A9E",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_JA.pdf",useAsRoot:!1}};var rx=`account-shell-text-login-window-blocked-apple = Login window blocked. Please allow popups from desmos.com to sign in with Apple
account-shell-text-login-window-blocked-google = Login window blocked. Please allow popups from desmos.com to sign in with Google.
shared-button-accept = Accept
shared-button-cancel = Cancel
shared-button-change-email-address = Change email address
shared-button-change-email-and-password = Change email and password
shared-button-close-dialog = Close Dialog
shared-button-confirm-name = Confirm Name
shared-button-continue-to-desmos = Continue to Desmos
shared-button-create-account = Create Account
shared-button-delete-account-question = Delete your Desmos account?
shared-button-email-address-narrow = Email
shared-button-email-address-wide = Email Address
shared-button-external-account-narrow = External
shared-button-external-account-wide = External Account
shared-button-go-to-account-settings = Go to Account Settings
shared-button-google-account-narrow = Google
shared-button-google-account-wide = Google Account
shared-button-login = Log in
shared-button-login-capitalized = Log In
shared-button-recover-password = Recover Password
shared-button-save = Save
shared-button-send-delete-account-email = Send Delete Account Email
shared-button-send-email = Send Email
shared-button-sign-in-with-apple = Sign in with Apple
shared-button-sign-in-with-google = Sign in with Google
shared-button-try-again = Didn't work? Try again!
shared-calculator-button-clear = clear
shared-calculator-button-clear-all = clear all
shared-calculator-button-language = Language
shared-calculator-button-print = Print
shared-calculator-button-reverse-contrast = Reverse Contrast
shared-calculator-error-add-type-error = Cannot add { $symbol1 } and { $symbol2 }.
shared-calculator-error-adjacent-mixed-number = Sorry, I don't know what to do with mixed number '{ $mixedNumber }'. Try using a '*' symbol around it.
shared-calculator-error-adjacent-numbers = Sorry, I don't know what to do with adjacent numbers '{ $left }' and '{ $right }'. Try using parentheses or a '*' symbol.
shared-calculator-error-bad-implicit-call = Use parentheses around the argument of '{ $symbol }'.
shared-calculator-error-bad-log-exponent = Only { $form } is supported. Otherwise, use parens.
shared-calculator-error-bad-symbol-context = You can't use '{ $symbol }' in this context.
shared-calculator-error-bad-trig-exponent = Only { $form1 } and { $form2 } are supported. Otherwise, use parens.
shared-calculator-error-binary-operator-missing-operand = You need something on both sides of the '{ $symbol }' symbol.
shared-calculator-error-blank-expression = You haven't written anything yet.
shared-calculator-error-cannot-subscript = '{ $symbol }' cannot have a subscript.
shared-calculator-error-colon-missing-condition = The left side of a ':' must be a condition, like 'x>1'.
shared-calculator-error-derivative-missing-body = What do you want to take the derivative of?
shared-calculator-error-differential-with-superscript = Integration variable cannot have a superscript.
shared-calculator-error-divide-type-error = Cannot divide { $symbol1 } by { $symbol2 }.
shared-calculator-error-empty-paren = Parentheses cannot be empty.
shared-calculator-error-empty-pipe = Absolute value symbol cannot be empty.
shared-calculator-error-empty-radical = Radical cannot be empty.
shared-calculator-error-empty-radical-index = Radical index cannot be empty.
shared-calculator-error-empty-square-bracket = Square brackets cannot be empty.
shared-calculator-error-empty-subscript = Subscripts cannot be empty.
shared-calculator-error-empty-superscript = Superscripts cannot be empty.
shared-calculator-error-equations-unsupported = This calculator does not support this type of equation.
shared-calculator-error-exponent-type-error = Cannot raise { $symbol1 } to { $symbol2 }.
shared-calculator-error-feature-unavailable = This feature is not available in the current calculator.
shared-calculator-error-fraction-empty = You need a numerator and denominator for your fraction.
shared-calculator-error-fraction-missing-denominator = You need a denominator for the bottom of your fraction.
shared-calculator-error-fraction-missing-numerator = You need a numerator for the top of your fraction.
shared-calculator-error-function-definition-unsupported = This calculator does not support function definitions.
shared-calculator-error-function-not-defined = Function '{ $dependency }' is not defined.
shared-calculator-error-function-type-error-1 = Function '{ $fn }' cannot be applied to { $arg }.
shared-calculator-error-function-type-error-2 = Function '{ $fn }' cannot be applied to { $arg1 } and { $arg2 }.
shared-calculator-error-function-type-error-many = Function '{ $fn }' cannot be applied to these arguments.
shared-calculator-error-function-unsupported = This calculator does not support the '{ $symbol }' function.
shared-calculator-error-incorrect-list-comprehension-input = Inputs to a list comprehension must set a variable equal to a list. Try i=[1...10].
shared-calculator-error-incorrect-product-lower-bound = Lower bound of a product must set a variable equal to a number. Try n=1.
shared-calculator-error-incorrect-sum-lower-bound = Lower bound of a sum must set a variable equal to a number. Try n=1.
shared-calculator-error-inequalities-unsupported = This calculator does not support inequalities.
shared-calculator-error-inequality-chain-too-long = Cannot chain more than 2 inequalities.
shared-calculator-error-integral-missing-body = What do you want to take the integral of?
shared-calculator-error-integral-missing-bound = Integrals must have upper and lower bounds.
shared-calculator-error-integral-missing-differential = Integrand must end with an integration variable, like dx.
shared-calculator-error-invalid-half-empty-range = Range must have an upper and lower bound.
shared-calculator-error-invalid-operator-name = Operator names may only contain letters.
shared-calculator-error-invalid-subscript = Subscripts may only contain letters and digits. '{ $symbol }' is not allowed.
shared-calculator-error-matrix-add-dimensions = Cannot add matrices with different dimensions.
shared-calculator-error-matrix-assignment = This calculator does not support this type of variable definition. Try using 'New Matrix'.
shared-calculator-error-matrix-element-type-error = Cannot use { $arg } as an element of a matrix.
shared-calculator-error-matrix-fractional-power = A matrix can only be raised to integer powers.
shared-calculator-error-matrix-invalid-variable = Cannot use '{ $symbol }' as a variable.
shared-calculator-error-matrix-multiply-dimensions = Cannot multiply matrices with incompatible dimensions.
shared-calculator-error-matrix-power-dimensions = Only square matrices can be raised to a power.
shared-calculator-error-matrix-subtract-dimensions = Cannot subtract matrices with different dimensions.
shared-calculator-error-mismatched-braces = Expected '{ $symbol1 }' to match '{ $symbol2 }'.
shared-calculator-error-multiply-type-error = Cannot multiply { $symbol1 } by { $symbol2 }.
shared-calculator-error-negative-type-error = Cannot negate { $symbol }.
shared-calculator-error-non-singular-inverse = Singular matrices do not have an inverse.
shared-calculator-error-non-square-determinant = Only square matrices have a determinant.
shared-calculator-error-non-square-inverse = Only square matrices have an inverse.
shared-calculator-error-non-square-trace = Only square matrices have a trace.
shared-calculator-error-parse-error = Sorry, I don't understand this.
shared-calculator-error-percent-missing-of = '%' must be used with 'of'. Try '25% of 12'.
shared-calculator-error-piecewise-missing-condition = A piecewise expression must have at least one condition.
shared-calculator-error-piecewise-part-missing-condition = Every part of a piecewise expression must have a condition except the last.
shared-calculator-error-points-unsupported = This calculator does not support points.
shared-calculator-error-prime-without-paren = Primed function calls must use parentheses.
shared-calculator-error-primed-function-arity = Prime notation can only be used for functions of a single argument.
shared-calculator-error-product-missing-body = What do you want to take the product of?
shared-calculator-error-product-missing-bound = Products must have upper and lower bounds.
shared-calculator-error-regressions-unsupported = This calculator does not support regressions.
shared-calculator-error-substitution-ambiguous-comma = Ambiguous use of ',' and 'with'. Add parentheses around the 'with' expression.
shared-calculator-error-substitution-duplicate-assignment = A 'with' expression cannot make multiple substitutions for '{ $symbol }'.
shared-calculator-error-substitution-invalid-assignments = 'with' must be followed by one or more variable assignments.
shared-calculator-error-substitution-nested = Using one 'with' expression inside another 'with' expression is not allowed.
shared-calculator-error-subtract-type-error = Cannot subtract { $symbol2 } from { $symbol1 }.
shared-calculator-error-sum-missing-body = What do you want to take the sum of?
shared-calculator-error-sum-missing-bound = Sums must have upper and lower bounds.
shared-calculator-error-superscript-with-prime = Superscripts and primes cannot be combined.
shared-calculator-error-token-with-subscript = Tokens may not have subscripts.
shared-calculator-error-too-many-variables-many-symbols = Too many variables. Try defining '{ $variables }' or '{ $lastVariable }'.
shared-calculator-error-too-many-variables-no-symbols = Too many variables, I don't know what to do with this.
shared-calculator-error-too-many-variables-one-symbol = Too many variables. Try defining '{ $variable }'.
shared-calculator-error-unary-operator-missing-left = You need something before the '{ $symbol }' symbol.
shared-calculator-error-unary-operator-missing-right = You need something after the '{ $symbol }' symbol.
shared-calculator-error-unexpected-for-keyword = 'for' can only be used inside a list. Try [i for i=[1...10]].
shared-calculator-error-unexpected-inequality = Cannot use an inequality here.
shared-calculator-error-unexpected-prime = Sorry, I don't understand this use of prime notation.
shared-calculator-error-unexpected-subscript = Only functions and variables may have subscripts.
shared-calculator-error-unexpected-symbol = Sorry, I don't understand the way that '{ $symbol }' is used here.
shared-calculator-error-unrecognized-symbol = Sorry, I don't understand the '{ $symbol }' symbol.
shared-calculator-error-update-rule-non-identifier-lhs = The left hand side of '{ $arrow }' should be a variable name like '{ $example }'.
shared-calculator-error-variable-as-function = Variable '{ $dependency }' can't be used as a function.
shared-calculator-error-write-integral = Type '{ $command }' for { $symbol }.
shared-calculator-error-wrong-arity-many-arg = Function '{ $dependency }' requires { $assignment_arity } arguments. { $supplement }
shared-calculator-error-wrong-arity-single-arg-too-few = Function '{ $dependency }' requires an argument. { $supplement }
shared-calculator-error-wrong-arity-single-arg-too-many = Function '{ $dependency }' requires only 1 argument. { $supplement }
shared-calculator-error-wrong-arity-supplement = For example, try typing: { $recommendation }.
shared-calculator-label-accessibility = Accessibility
shared-calculator-label-tooltip-convert-to-decimal = Convert to decimal.
shared-calculator-label-tooltip-convert-to-fraction = Convert to fraction.
shared-calculator-label-value-type-matrix = a matrix
shared-calculator-label-value-type-number = a number
shared-calculator-narration-display-as-decimal = Displaying as fraction. Press Enter to display as Decimal
shared-calculator-narration-display-as-fraction = Displaying as decimal. Press Enter to display as Fraction
shared-calculator-narration-evaluation = equals { $answer }
shared-calculator-narration-expression = Expression
shared-calculator-narration-expression-list = Expression List
shared-calculator-narration-keypad = keypad
shared-calculator-narration-keypad-controlbar = Control Bar
shared-calculator-narration-keypad-key-10-n = Times ten to the power of
shared-calculator-narration-keypad-key-abs = Absolute Value
shared-calculator-narration-keypad-key-action-to = Set Value To
shared-calculator-narration-keypad-key-action-with = Substitute With
shared-calculator-narration-keypad-key-alpha = Alpha
shared-calculator-narration-keypad-key-angle = Angle
shared-calculator-narration-keypad-key-angles = Angles
shared-calculator-narration-keypad-key-ans = Answer
shared-calculator-narration-keypad-key-arc = Arc
shared-calculator-narration-keypad-key-arccos = Inverse Cosine
shared-calculator-narration-keypad-key-arccot = Inverse Cotangent
shared-calculator-narration-keypad-key-arccsc = Inverse Cosecant
shared-calculator-narration-keypad-key-arcsec = Inverse Secant
shared-calculator-narration-keypad-key-arcsin = Inverse Sine
shared-calculator-narration-keypad-key-arctan = Inverse Tangent
shared-calculator-narration-keypad-key-area = Area
shared-calculator-narration-keypad-key-backspace = Backspace
shared-calculator-narration-keypad-key-beta = Beta
shared-calculator-narration-keypad-key-binomialdist = Binomial Distribution
shared-calculator-narration-keypad-key-boxplot = Box Plot
shared-calculator-narration-keypad-key-ceil = Ceiling
shared-calculator-narration-keypad-key-center = Center
shared-calculator-narration-keypad-key-circle = Circle
shared-calculator-narration-keypad-key-corr = Correlation
shared-calculator-narration-keypad-key-cos = Cosine
shared-calculator-narration-keypad-key-cosh = Hyperbolic Cosine
shared-calculator-narration-keypad-key-cot = Cotangent
shared-calculator-narration-keypad-key-coterminal = Coterminal
shared-calculator-narration-keypad-key-coth = Hyperbolic Cotangent
shared-calculator-narration-keypad-key-cov = Co Variance
shared-calculator-narration-keypad-key-covp = Population Co Variance
shared-calculator-narration-keypad-key-csc = Cosecant
shared-calculator-narration-keypad-key-csch = Hyperbolic Cosecant
shared-calculator-narration-keypad-key-cubed = Cubed
shared-calculator-narration-keypad-key-decimal = Decimal
shared-calculator-narration-keypad-key-dilate = Dilate
shared-calculator-narration-keypad-key-directed-angle = Directed Angle
shared-calculator-narration-keypad-key-directed-angles = Directed Angles
shared-calculator-narration-keypad-key-distance = Distance
shared-calculator-narration-keypad-key-divide = Divide
shared-calculator-narration-keypad-key-dotplot = Dot Plot
shared-calculator-narration-keypad-key-enter = Enter
shared-calculator-narration-keypad-key-erf = Error Function
shared-calculator-narration-keypad-key-exp = Exponent
shared-calculator-narration-keypad-key-factorial = Factorial
shared-calculator-narration-keypad-key-floor = Floor
shared-calculator-narration-keypad-key-fraction = A over B
shared-calculator-narration-keypad-key-glider = Glider
shared-calculator-narration-keypad-key-histogram = Histogram
shared-calculator-narration-keypad-key-int = Integral
shared-calculator-narration-keypad-key-intersection = Intersection
shared-calculator-narration-keypad-key-inversecdf = Inverse CDF function
shared-calculator-narration-keypad-key-ittest = Independent T Test
shared-calculator-narration-keypad-key-left-arrow = Left Arrow
shared-calculator-narration-keypad-key-left-bracket = Left Bracket
shared-calculator-narration-keypad-key-left-paren = Left Parenthesis
shared-calculator-narration-keypad-key-line = Line
shared-calculator-narration-keypad-key-ln = Natural Log
shared-calculator-narration-keypad-key-log = Log
shared-calculator-narration-keypad-key-loga = Log A
shared-calculator-narration-keypad-key-mean = Mean
shared-calculator-narration-keypad-key-median = Median
shared-calculator-narration-keypad-key-midpoint = Midpoint
shared-calculator-narration-keypad-key-minus = Minus
shared-calculator-narration-keypad-key-normaldist = Normal Distribution
shared-calculator-narration-keypad-key-nthroot = Nth Root
shared-calculator-narration-keypad-key-parallel = Parallel
shared-calculator-narration-keypad-key-pdf = Probability Density Function
shared-calculator-narration-keypad-key-percent-of = Percent Of
shared-calculator-narration-keypad-key-perimeter = Perimeter
shared-calculator-narration-keypad-key-perpendicular = Perpendicular
shared-calculator-narration-keypad-key-pi = Pi
shared-calculator-narration-keypad-key-plus = Plus
shared-calculator-narration-keypad-key-poissondist = Poisson Distribution
shared-calculator-narration-keypad-key-polygon = Polygon
shared-calculator-narration-keypad-key-prime = Function derivative
shared-calculator-narration-keypad-key-product = Product
shared-calculator-narration-keypad-key-quantile = Quantile
shared-calculator-narration-keypad-key-quartile = Quartile
shared-calculator-narration-keypad-key-radius = Radius
shared-calculator-narration-keypad-key-random = Random Number
shared-calculator-narration-keypad-key-ray = Ray
shared-calculator-narration-keypad-key-reciprocal = Reciprocal
shared-calculator-narration-keypad-key-reflect = Reflect
shared-calculator-narration-keypad-key-right-arrow = Right Arrow
shared-calculator-narration-keypad-key-right-bracket = Right Bracket
shared-calculator-narration-keypad-key-right-paren = Right Parenthesis
shared-calculator-narration-keypad-key-rotate = Rotate
shared-calculator-narration-keypad-key-round = Round
shared-calculator-narration-keypad-key-sec = Secant
shared-calculator-narration-keypad-key-segment = Segment
shared-calculator-narration-keypad-key-segments = Segments
shared-calculator-narration-keypad-key-shift = Shift
shared-calculator-narration-keypad-key-sin = Sine
shared-calculator-narration-keypad-key-sinh = Hyperbolic Sine
shared-calculator-narration-keypad-key-spearman = Spearman Rank Correlation
shared-calculator-narration-keypad-key-sphere = Sphere
shared-calculator-narration-keypad-key-sqrt = Square Root
shared-calculator-narration-keypad-key-squared = Squared
shared-calculator-narration-keypad-key-stats = Summary statistics
shared-calculator-narration-keypad-key-stdev = Standard Deviation
shared-calculator-narration-keypad-key-stdevp = Standard Deviation of Population
shared-calculator-narration-keypad-key-subscript = Subscript
shared-calculator-narration-keypad-key-sum = Sum
shared-calculator-narration-keypad-key-superscript = Superscript
shared-calculator-narration-keypad-key-supplement = Supplement
shared-calculator-narration-keypad-key-tan = Tangent
shared-calculator-narration-keypad-key-tanh = Hyperbolic Tangent
shared-calculator-narration-keypad-key-tau = Tau
shared-calculator-narration-keypad-key-tdist = Student-t Distribution
shared-calculator-narration-keypad-key-theta = Theta
shared-calculator-narration-keypad-key-times = Times
shared-calculator-narration-keypad-key-toggle-audio-trace = Toggle Audio Trace
shared-calculator-narration-keypad-key-toggle-letters = Toggle Letters
shared-calculator-narration-keypad-key-toggle-numbers = Toggle Numbers
shared-calculator-narration-keypad-key-translate = Translate
shared-calculator-narration-keypad-key-triangle = Triangle
shared-calculator-narration-keypad-key-tscore = T Score
shared-calculator-narration-keypad-key-ttest = T Test
shared-calculator-narration-keypad-key-uniformdist = Uniform Distribution
shared-calculator-narration-keypad-key-vector = Vector
shared-calculator-narration-keypad-key-vertices = Vertices
shared-calculator-narration-keypad-key-ythroot = Yth Root
shared-calculator-narration-keypad-plus-minus = Plus-Minus
shared-calculator-narration-redo = redo
shared-calculator-narration-settings-display-size = Display Size
shared-calculator-narration-settings-display-size-default = Display size: default
shared-calculator-narration-settings-display-size-large = Display size: large
shared-calculator-narration-table-cell-coordinates = Row { $rowNumber } Column { $columnNumber }
shared-calculator-narration-undo = undo
shared-label-email = Email
shared-label-family-name = Last Name (optional)
shared-label-given-name-or-nickname = First Name or Nickname
shared-label-name = Name
shared-label-new-email-address = New Email Address
shared-label-password = Password
shared-message-account-reactivated = You previously requested to delete your account, but because you logged back in within 30 days, we will not delete your account. Welcome back!
shared-message-change-password-email-sent = We will send a link to your email address ({ $emailAddress }) so you can change your password.
shared-message-check-email-for-delete-link = Please check your email ({ $emailAddress }) for the link to delete your account.
shared-message-check-email-for-link = Please check { $emailAddress } for the Change Email link.
shared-message-check-email-for-password-link = Please check your email ({ $emailAddress }) for the link to change your password.
shared-message-check-email-for-password-recovery-link = Message sent. Please check your email for a password recovery link.
shared-message-consent-delete-information = If you don't want Desmos to hold onto this information, you may delete your account from the Account Settings menu at any time.
shared-message-consent-information = When you created your Desmos account, you gave us your name, email address, and password (unless you signed in with Google, in which case you gave us access to the name and email address associated with that account). You also gave us access to your saved work. To continue using your Desmos account, please consent below to the collection of this information.
shared-message-consent-text = I agree to let Desmos store and maintain the information I provide (e.g. login credentials, saved work) in order to provide and improve its service. To withdraw consent, you may delete your account at any time.
shared-message-cookie-notice = <1>Note:</1> Desmos uses cookies to enable persistence when you are signed in. If you do not wish to use cookies, please use Desmos without logging in. <2>Learn More.</2>
shared-message-delete-account-notice = When you delete your account, <1>we will retain your data for 30 days.</1> You can reactivate your account at any time during those 30 days by logging back in. If there's something about Desmos we can improve, please <2>let us know.</2>
shared-message-delete-account-will-send-email = We will send you a link to your email address ({ $email }) so you can delete your account.
shared-message-email-sent = Email sent
shared-message-email-settings-will-send-email = We will send a Change Email link to { $emailAddress }.
shared-message-google-login-not-available = Google Login is not available on this device.
shared-message-information-saved = Saved!
shared-message-or-login-with-desmos = Or log in with Desmos
shared-message-please-review-name = We tried to split your name into first and last name. Please review your name below and edit any mistakes.
shared-message-privacy-notice = I have read, understand, and accept the <1>Terms of Service</1> and <2>Privacy Policy</2>.
shared-message-set-new-email-address = Set a new email address and password.
shared-prompt-already-have-account = Already have a Desmos account?
shared-prompt-enter-email-for-password-recovery-link = Enter your email address to get a password recovery link.
shared-prompt-forgot-your-password = Forgot your password?
shared-prompt-new-to-desmos-sign-up-here = New to Desmos? <1>Sign up</1>.
shared-prompt-new-to-desmos-teacher-or-student = New to Desmos? <1>Sign up!</1>
shared-prompt-please-consent-to-sign-up-with-apple = Please consent above to sign up with Apple
shared-prompt-please-consent-to-sign-up-with-google = Please consent above to sign up with Google
shared-prompt-sign-up-with-apple = Sign up with Apple
shared-prompt-sign-up-with-google = Sign up with Google
shared-title-account-reactivated = Your account has been reactivated.
shared-title-account-settings = Account Settings
shared-title-change-email-address = Change your Desmos email address
shared-title-change-password-narrow = Password
shared-title-change-password-wide = Change Password
shared-title-consent = We value your privacy
shared-title-delete-account = Are you sure you want to delete your account?
shared-title-email-settings = Email
shared-title-language-menu = Language
shared-title-login = Log In
shared-title-profile-information-narrow = Profile
shared-title-profile-information-wide = Profile Information
shared-title-recover-password = Recover Password
shared-title-signup = Sign-Up
basic-calculator-error-fractions-unavailable = Fractions are not available in the current calculator.
basic-calculator-link-help = Help
basic-calculator-link-privacy-policy = Privacy Policy
basic-calculator-link-terms-of-service = Terms of Service
graphing-calculator-button-audio-trace-hear-graph = Hear Graph
graphing-calculator-button-audio-trace-stop-graph = Stop Graph
graphing-calculator-button-keypad-audio-trace-off = Audio Trace Off
graphing-calculator-narration-geometry-construction-role-description = construction
graphing-calculator-narration-geometry-hidden-construction-description = Hidden { $description }
graphing-calculator-narration-keypad-key-next-curve = Next Curve
graphing-calculator-narration-keypad-key-next-poi = Next Point of Interest
graphing-calculator-narration-keypad-key-next-point = Next Point
graphing-calculator-narration-keypad-key-previous-curve = Previous Curve
graphing-calculator-narration-keypad-key-previous-poi = Previous Point of Interest
graphing-calculator-narration-keypad-key-previous-point = Previous Point
graphing-calculator-narration-keypad-key-speed-down = Speed Down
graphing-calculator-narration-keypad-key-speed-up = Speed Up
graphing-calculator-narration-keypad-key-volume-down = Volume Down
graphing-calculator-narration-keypad-key-volume-up = Volume Up
matrix-calculator-button-new = New Matrix
matrix-calculator-button-settings = settings
matrix-calculator-heading-edit-matrix = Edit Matrix { $variable }
matrix-calculator-label-columns = Columns
matrix-calculator-label-rows = Rows
matrix-calculator-narration-add-column = Add Column
matrix-calculator-narration-add-row = Add Row
matrix-calculator-narration-evaluation = equals { $rowCount } by { $columnCount } matrix.
matrix-calculator-narration-evaluation-row = Row { $rowNumber }: { $values }.
matrix-calculator-narration-keypad-key-det = Determinant
matrix-calculator-narration-keypad-key-inverse = Inverse
matrix-calculator-narration-keypad-key-rref = Reduced row echelon form
matrix-calculator-narration-keypad-key-trace = Trace
matrix-calculator-narration-keypad-key-transpose = Transpose
matrix-calculator-narration-matrix-with-variable = Matrix { $variable }
matrix-calculator-narration-matrix-without-variable = Matrix
matrix-calculator-narration-new-dimensions = Matrix size: { $rows } by { $cols }
matrix-calculator-narration-remove-column = Remove Column
matrix-calculator-narration-remove-row = Remove Row
matrix-calculator-narration-resize-controls = Resize Matrix Controls
matrix-calculator-narration-settings-menu = Settings Menu
matrix-calculator-narration-title = Desmos Matrix Calculator
frontpage-button-account-menu = Account Menu
frontpage-error-something-went-wrong-try-again-later = Sorry! Something went wrong. Please try again later.
frontpage-heading-header-maintenance-mode = Desmos is currently undergoing scheduled maintenance, and accounts are temporarily unavailable.
frontpage-heading-main-using-desmos-classroom-link = Desmos Classroom is a free teaching and learning platform, <1>now part of Amplify.</1>
frontpage-link-header-classroom = Classroom
frontpage-link-header-math-tools = Math Tools
frontpage-link-header-resources = Resources
frontpage-link-main-for-students = For Students
frontpage-link-main-for-teachers = For Teachers
frontpage-link-shared-about-us = About Us
frontpage-link-shared-account-settings = Account Settings
frontpage-link-shared-assessments = Assessments
frontpage-link-shared-blog = Des-Blog
frontpage-link-shared-careers = Careers
frontpage-link-shared-curriculum = Desmos Math 6\u2013A1
frontpage-link-shared-equity-principles = Equity Principles
frontpage-link-shared-four-function-calculator = Four-Function Calculator
frontpage-link-shared-geometry-tool = Geometry Tool
frontpage-link-shared-graphing-calculator = Graphing Calculator
frontpage-link-shared-guiding-principles = Guiding Principles
frontpage-link-shared-help-center = Help Center
frontpage-link-shared-log-in = Log In
frontpage-link-shared-log-out = Log Out
frontpage-link-shared-matrix-calculator = Matrix Calculator
frontpage-link-shared-scientific-calculator = Scientific Calculator
frontpage-link-shared-store = Desmos Store
frontpage-link-shared-test-practice = Test Practice
frontpage-narration-shared-desmos-logo = Desmos Logo
frontpage-text-header-app-links = Download our apps in the <1>Google Play Store</1> and <2>iOS App Store</2>.
frontpage-text-header-terms-update = We've updated our Terms of Service.
frontpage-text-header-terms-update-link = Read about the changes.



























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































`;var BS={ar:!0,de:!0,en:!0,es:!0,et:!0,fr:!0,id:!0,it:!0,ja:!0,ko:!0,nl:!0,pl:!0,"pt-BR":!0,ru:!0,"sv-SE":!0,th:!0,tr:!0,vi:!0,"zh-CN":!0,"zh-TW":!0};function nx(e){return!!BS[e]}var Ka=class{constructor(t){this.value=t}valueOf(){return this.value}},pt=class extends Ka{constructor(t="???"){super(t)}toString(t){return`{${this.value}}`}},en=class extends Ka{constructor(t,r={}){super(t),this.opts=r}toString(t){try{return t.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(r){return t.reportError(r),this.value.toString(10)}}},Ea=class extends Ka{constructor(t,r={}){super(t),this.opts=r}toString(t){try{return t.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(r){return t.reportError(r),new Date(this.value).toISOString()}}};var ax=100,US="\u2068",$S="\u2069";function zS(e,t,r){if(r===t||r instanceof en&&t instanceof en&&r.value===t.value)return!0;if(t instanceof en&&typeof r=="string"){let n=e.memoizeIntlObject(Intl.PluralRules,t.opts).select(t.value);if(r===n)return!0}return!1}function ix(e,t,r){return t[r]?Uo(e,t[r].value):(e.reportError(new RangeError("No default")),new pt)}function eg(e,t){let r=[],n=Object.create(null);for(let a of t)a.type==="narg"?n[a.name]=Ws(e,a.value):r.push(Ws(e,a));return{positional:r,named:n}}function Ws(e,t){switch(t.type){case"str":return t.value;case"num":return new en(t.value,{minimumFractionDigits:t.precision});case"var":return KS(e,t);case"mesg":return WS(e,t);case"term":return HS(e,t);case"func":return jS(e,t);case"select":return YS(e,t);default:return new pt}}function KS(e,{name:t}){let r;if(e.params)if(Object.prototype.hasOwnProperty.call(e.params,t))r=e.params[t];else return new pt(`$${t}`);else if(e.args&&Object.prototype.hasOwnProperty.call(e.args,t))r=e.args[t];else return e.reportError(new ReferenceError(`Unknown variable: $${t}`)),new pt(`$${t}`);if(r instanceof Ka)return r;switch(typeof r){case"string":return r;case"number":return new en(r);case"object":if(r instanceof Date)return new Ea(r.getTime());default:return e.reportError(new TypeError(`Variable type not supported: $${t}, ${typeof r}`)),new pt(`$${t}`)}}function WS(e,{name:t,attr:r}){let n=e.bundle._messages.get(t);if(!n)return e.reportError(new ReferenceError(`Unknown message: ${t}`)),new pt(t);if(r){let a=n.attributes[r];return a?Uo(e,a):(e.reportError(new ReferenceError(`Unknown attribute: ${r}`)),new pt(`${t}.${r}`))}return n.value?Uo(e,n.value):(e.reportError(new ReferenceError(`No value: ${t}`)),new pt(t))}function HS(e,{name:t,attr:r,args:n}){let a=`-${t}`,c=e.bundle._terms.get(a);if(!c)return e.reportError(new ReferenceError(`Unknown term: ${a}`)),new pt(a);if(r){let g=c.attributes[r];if(g){e.params=eg(e,n).named;let p=Uo(e,g);return e.params=null,p}return e.reportError(new ReferenceError(`Unknown attribute: ${r}`)),new pt(`${a}.${r}`)}e.params=eg(e,n).named;let l=Uo(e,c.value);return e.params=null,l}function jS(e,{name:t,args:r}){let n=e.bundle._functions[t];if(!n)return e.reportError(new ReferenceError(`Unknown function: ${t}()`)),new pt(`${t}()`);if(typeof n!="function")return e.reportError(new TypeError(`Function ${t}() is not callable`)),new pt(`${t}()`);try{let a=eg(e,r);return n(a.positional,a.named)}catch(a){return e.reportError(a),new pt(`${t}()`)}}function YS(e,{selector:t,variants:r,star:n}){let a=Ws(e,t);if(a instanceof pt)return ix(e,r,n);for(let c of r){let l=Ws(e,c.key);if(zS(e,a,l))return Uo(e,c.value)}return ix(e,r,n)}function tg(e,t){if(e.dirty.has(t))return e.reportError(new RangeError("Cyclic reference")),new pt;e.dirty.add(t);let r=[],n=e.bundle._useIsolating&&t.length>1;for(let a of t){if(typeof a=="string"){r.push(e.bundle._transform(a));continue}if(e.placeables++,e.placeables>ax)throw e.dirty.delete(t),new RangeError(`Too many placeables expanded: ${e.placeables}, max allowed is ${ax}`);n&&r.push(US),r.push(Ws(e,a).toString(e)),n&&r.push($S)}return e.dirty.delete(t),r.join("")}function Uo(e,t){return typeof t=="string"?e.bundle._transform(t):tg(e,t)}var hd=class{constructor(t,r,n){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=t,this.errors=r,this.args=n}reportError(t){if(!this.errors)throw t;this.errors.push(t)}memoizeIntlObject(t,r){let n=this.bundle._intls.get(t);n||(n={},this.bundle._intls.set(t,n));let a=JSON.stringify(r);return n[a]||(n[a]=new t(this.bundle.locales,r)),n[a]}};function ox(e,t){let r=Object.create(null);for(let[n,a]of Object.entries(e))t.includes(n)&&(r[n]=a.valueOf());return r}var JS=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function sx(e,t){let r=e[0];if(r instanceof pt)return new pt(`NUMBER(${r.valueOf()})`);if(r instanceof en||r instanceof Ea)return new en(r.valueOf(),ye(ye({},r.opts),ox(t,JS)));throw new TypeError("Invalid argument to NUMBER")}var QS=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function cx(e,t){let r=e[0];if(r instanceof pt)return new pt(`DATETIME(${r.valueOf()})`);if(r instanceof en||r instanceof Ea)return new Ea(r.valueOf(),ye(ye({},r.opts),ox(t,QS)));throw new TypeError("Invalid argument to DATETIME")}var Hs=class{constructor(t,{functions:r,useIsolating:n=!0,transform:a=c=>c}={}){this._terms=new Map,this._messages=new Map,this._intls=new WeakMap,this.locales=Array.isArray(t)?t:[t],this._functions=ye({NUMBER:sx,DATETIME:cx},r),this._useIsolating=n,this._transform=a}hasMessage(t){return this._messages.has(t)}getMessage(t){return this._messages.get(t)}addResource(t,{allowOverrides:r=!1}={}){let n=[];for(let a=0;a<t.body.length;a++){let c=t.body[a];if(c.id.startsWith("-")){if(r===!1&&this._terms.has(c.id)){n.push(new Error(`Attempt to override an existing term: "${c.id}"`));continue}this._terms.set(c.id,c)}else{if(r===!1&&this._messages.has(c.id)){n.push(new Error(`Attempt to override an existing message: "${c.id}"`));continue}this._messages.set(c.id,c)}}return n}formatPattern(t,r=null,n=null){if(typeof t=="string")return this._transform(t);let a=new hd(this,n,r);try{return tg(a,t).toString(a)}catch(c){if(a.errors)return a.errors.push(c),new pt().toString(a);throw c}}};var rg=/^(-?[a-zA-Z][\w-]*) *= */gm,lx=/\.([a-zA-Z][\w-]*) *= */y,XS=/\*?\[/y,ng=/(-?[0-9]+(?:\.([0-9]+))?)/y,ZS=/([a-zA-Z][\w-]*)/y,dx=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,e0=/^[A-Z][A-Z0-9_-]*$/,md=/([^{}\n\r]+)/y,t0=/([^\\"\n\r]*)/y,ux=/\\([\\"])/y,px=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,r0=/^\n+/,gx=/ +$/,n0=/ *\r?\n/g,a0=/( *)$/,i0=/{\s*/y,hx=/\s*}/y,o0=/\[\s*/y,s0=/\s*] */y,c0=/\s*\(\s*/y,l0=/\s*->\s*/y,d0=/\s*:\s*/y,u0=/\s*,?\s*/y,p0=/\s+/y,$o=class{constructor(t){this.body=[],rg.lastIndex=0;let r=0;for(;;){let Q=rg.exec(t);if(Q===null)break;r=rg.lastIndex;try{this.body.push(p(Q[1]))}catch(ce){if(ce instanceof SyntaxError)continue;throw ce}}function n(Q){return Q.lastIndex=r,Q.test(t)}function a(Q,ce){if(t[r]===Q)return r++,!0;if(ce)throw new ce(`Expected ${Q}`);return!1}function c(Q,ce){if(n(Q))return r=Q.lastIndex,!0;if(ce)throw new ce(`Expected ${Q.toString()}`);return!1}function l(Q){Q.lastIndex=r;let ce=Q.exec(t);if(ce===null)throw new SyntaxError(`Expected ${Q.toString()}`);return r=Q.lastIndex,ce}function g(Q){return l(Q)[1]}function p(Q){let ce=w(),Ze=f();if(ce===null&&Object.keys(Ze).length===0)throw new SyntaxError("Expected message value or attributes");return{id:Q,value:ce,attributes:Ze}}function f(){let Q=Object.create(null);for(;n(lx);){let ce=g(lx),Ze=w();if(Ze===null)throw new SyntaxError("Expected attribute value");Q[ce]=Ze}return Q}function w(){let Q;if(n(md)&&(Q=g(md)),t[r]==="{"||t[r]==="}")return M(Q?[Q]:[],1/0);let ce=it();return ce?Q?M([Q,ce],ce.length):(ce.value=ge(ce.value,r0),M([ce],ce.length)):Q?ge(Q,gx):null}function M(Q=[],ce){for(;;){if(n(md)){Q.push(g(md));continue}if(t[r]==="{"){Q.push(G());continue}if(t[r]==="}")throw new SyntaxError("Unbalanced closing brace");let gr=it();if(gr){Q.push(gr),ce=Math.min(ce,gr.length);continue}break}let Ze=Q.length-1,nn=Q[Ze];typeof nn=="string"&&(Q[Ze]=ge(nn,gx));let Ht=[];for(let gr of Q)gr instanceof fd&&(gr=gr.value.slice(0,gr.value.length-ce)),gr&&Ht.push(gr);return Ht}function G(){c(i0,SyntaxError);let Q=R();if(c(hx))return Q;if(c(l0)){let ce=_e();return c(hx,SyntaxError),ye({type:"select",selector:Q},ce)}throw new SyntaxError("Unclosed placeable")}function R(){if(t[r]==="{")return G();if(n(dx)){let[,Q,ce,Ze=null]=l(dx);if(Q==="$")return{type:"var",name:ce};if(c(c0)){let nn=ue();if(Q==="-")return{type:"term",name:ce,attr:Ze,args:nn};if(e0.test(ce))return{type:"func",name:ce,args:nn};throw new SyntaxError("Function names must be all upper-case")}return Q==="-"?{type:"term",name:ce,attr:Ze,args:[]}:{type:"mesg",name:ce,attr:Ze}}return Le()}function ue(){let Q=[];for(;;){switch(t[r]){case")":return r++,Q;case void 0:throw new SyntaxError("Unclosed argument list")}Q.push(pe()),c(u0)}}function pe(){let Q=R();return Q.type!=="mesg"?Q:c(d0)?{type:"narg",name:Q.name,value:Le()}:Q}function _e(){let Q=[],ce=0,Ze;for(;n(XS);){a("*")&&(Ze=ce);let nn=$e(),Ht=w();if(Ht===null)throw new SyntaxError("Expected variant value");Q[ce++]={key:nn,value:Ht}}if(ce===0)return null;if(Ze===void 0)throw new SyntaxError("Expected default variant");return{variants:Q,star:Ze}}function $e(){c(o0,SyntaxError);let Q;return n(ng)?Q=Re():Q={type:"str",value:g(ZS)},c(s0,SyntaxError),Q}function Le(){if(n(ng))return Re();if(t[r]==='"')return Je();throw new SyntaxError("Invalid expression")}function Re(){let[,Q,ce=""]=l(ng),Ze=ce.length;return{type:"num",value:parseFloat(Q),precision:Ze}}function Je(){a('"',SyntaxError);let Q="";for(;;){if(Q+=g(t0),t[r]==="\\"){Q+=It();continue}if(a('"'))return{type:"str",value:Q};throw new SyntaxError("Unclosed string literal")}}function It(){if(n(ux))return g(ux);if(n(px)){let[,Q,ce]=l(px),Ze=parseInt(Q||ce,16);return Ze<=55295||57344<=Ze?String.fromCodePoint(Ze):"\uFFFD"}throw new SyntaxError("Unknown escape sequence")}function it(){let Q=r;switch(c(p0),t[r]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return ta(t.slice(Q,r))}return t[r-1]===" "?ta(t.slice(Q,r)):!1}function ge(Q,ce){return Q.replace(ce,"")}function ta(Q){let ce=Q.replace(n0,`
`),Ze=a0.exec(Q)[1].length;return new fd(ce,Ze)}}},fd=class{constructor(t,r){this.value=t,this.length=r}};var h0=["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"],ag=class{constructor(t){this.value=t}},yd=class e{constructor(t,r){this.bundles=t;this.onError=r}static fromSources(t,r,n){let a=[];for(let{lang:c,source:l}of t){let g=c.split("-")[0],p=new Hs(c,Dt(ye({},n),{useIsolating:h0.indexOf(g)>=0}));p.addResource(new $o(l),{allowOverrides:!1}),p.addResource(new $o(`
l10n-internal-date-day-month-year = {DATETIME($d, month: "short", day: "numeric", year: "numeric")}
l10n-internal-date-day-month = {DATETIME($d, month: "short", day: "numeric")}
l10n-internal-time = {DATETIME($d, minute: "numeric", hour: "numeric")}
      `),{allowOverrides:!1}),a.push(p)}return new e(a,r)}format(t,r){for(let n of this.bundles){if(!n.hasMessage(t))continue;let a=n.getMessage(t);if(!(a!=null&&a.value))return;let c=[],l=n.formatPattern(a.value,this.coerceNumericVariables(r),c);for(let g of c)this.onError(`Error formatting ${t} for locale ${n.locales.join(",")}: ${g}`);return l}this.onError(`Couldn't find message for key ${t} for locales ${this.getLocales().join(",")}`)}formatDate(t,r){return r.showYear?this.format("l10n-internal-date-day-month-year",{d:t}):this.format("l10n-internal-date-day-month",{d:t})}formatTime(t){let r=this.format("l10n-internal-time",{d:t});return this.getLocales()[0]==="en"?r==null?void 0:r.toLowerCase():r}hasTranslation(t,r){for(let n of this.bundles)if(n.locales.indexOf(r)>=0)return n.hasMessage(t);return!1}coerceNumericVariables(t){let r={};for(let n in t){let a=t[n];a instanceof ag?r[n]=a.value:typeof a=="number"?r[n]=`${a}`:r[n]=a}return r}getLocales(){return this.bundles.reduce((t,r)=>t.concat(r.locales),[])}};var sg="",ig={},mx={},og={},m0=["ar","hy-AM","hi","tr","xx-XX"];function bd(e){sg=e||""}function cg(e){for(let t in e)delete og[t],mx[t]=e[t]}function lg(){for(let e in ka)nx(e)||delete ka[e]}function js(e,t){let r=t!=null?t:sg;return yx(r).hasTranslation(e,r)}function Vi(e,t){if(t)for(var r in t)t.hasOwnProperty(r)&&(e=e.split("__"+r+"__").join(t[r]));return e}function Ve(e,t,r){return fx(e,t!=null?t:{},r!=null?r:sg)}function Ys(e){return function(r,n){return fx(r,n!=null?n:{},e())}}function f0(e){let t={};for(let r in e){let n=e[r];n!==void 0&&(t[r]=n)}return t}function fx(e,t,r){let a=yx(r).format(e,f0(t));return a==null?(Vt.warn(`Could not format string ${e}`),""):a}function yx(e){let t=og[e];if(!t){ig[e]||(ig[e]=gd([e]));let r=[];for(let a of ig[e]){let c=mx[a];c&&r.push({lang:a,source:c})}let n={};e==="xx-XX"&&(n.transform=a=>a.replace(/[a-z]/gi,"\u2666")),t=og[e]=yd.fromSources([...r,{lang:"en",source:rx}],a=>{Vt.warn(a)},n)}return t}function dg(e){return ka.hasOwnProperty(e)||Pa(m0,e)}function xd(e,t){if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number")return""+e;let r=e.vars,n;if(r){n={};for(let a in r)r.hasOwnProperty(a)&&(n[a]=xd(r[a],t))}return Ve(e.key,n,t)}var wd={cb20221031:"1"};var Js=typeof desmosLocaleData=="object"?desmosLocaleData:{};function Qs(){for(var e=gd([om("language"),navigator.userLanguage,navigator.language]),t=0;t<e.length;t++){var r=e[t];if(dg(r))return r}return"en"}async function vd(e){if(Js[e]||e==="en"||e==="xx-XX")return bd(e),!0;if(!dg(e)){let n=e.indexOf("-")!==-1?e.split("-")[0]:e;for(let a in ka)if(n===a.split("-")[0]&&ka[a].useAsRoot){e=a;break}}let t=await fetch(`/api/v1/calculator/language/${e}.ftl?${new URLSearchParams(wd)}`,{headers:{Accept:"application/json"}});if(!t.ok)throw t.status===404&&Vt.warn(e+" is not an available language."),void 0;let r=await t.json();return Js[e]=r[e],cg(Js),bd(e),!0}function bx(e){return!!Js[e]}cg(Js);bd(Qs());function ug(e,t){return{type:"Group",span:e,args:t}}function xx(e,t,r){return{type:"Sqrt",span:e,optArg:t,arg:r}}function wx(e,t,r){return{type:"Frac",span:e,num:t,den:r}}function vx(e,t,r,n){return{type:"SupSub",span:e,sup:t,sub:r,nprimes:n}}function kx(e,t,r,n){return{type:"LeftRight",span:e,left:t,right:r,arg:n}}function Ex(e,t){return{type:"OperatorName",span:e,arg:t}}function Cx(e,t){return{type:"TokenNode",span:e,arg:t}}function Tx(e,t){return{type:"Symbol",span:e,val:t}}function Sx(e){switch(e){case"Frac":return 2;case"^":case"_":case"Primes^":case"Left":case"Sqrt":case"OperatorName":case"Token":return 1;default:return 0}}function Dx(e){let{state:t,tree:r}=kd(Ul(e),!1);if(!Do(t))throw`Parse error: unexpected ${ar(Lr(t).span)}.`;return r}function fn(e,t){return{state:e,tree:t}}function kd(e,t){let r=e,n=[];e:for(;!Do(e);){let c=Lr(e);switch(c.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":case"[":case"{":case"^":case"_":case"Primes":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":case"Token":case"]":{if(c.type==="]"&&t)break e;let g;if({state:e,tree:g}=Mx(e),g.type==="Group")for(let p of g.args)n.push(p);else n.push(g);break}case"}":case"Right":case"End":break e;default:throw`Unexpected token type ${c.type}.`}}let a=Ba(r,e);return fn(e,ug(a,n))}function Mx(e){let t=Lr(e);switch(t.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":return e=Jr(e),fn(e,t);case"[":case"]":return e=Jr(e),fn(e,Tx(t.span,t.val));case"{":{e=Jr(e);let n;return{state:e,tree:n}=kd(e,!1),e=Hn(e,"}"),fn(e,n)}case"^":case"_":case"Primes":case"Primes^":return E0(e);case"Left":return k0(e);case"Frac":return v0(e);case"Sqrt":return w0(e);case"OperatorName":return b0(e);case"Token":return x0(e);case"}":case"Right":throw`Parse Error: unexpected ${t.val}.`;case"End":throw"Parse Error: unexpected end.";default:throw`Unexpected token type ${t.type}.`}}function b0(e){let t=e,r=Lr(e);e=Hn(e,"OperatorName");let n;({state:e,tree:n}=Wa(e,r));let a=Ba(t,e);return fn(e,Ex(a,n))}function x0(e){let t=e,r=Lr(e);e=Hn(e,"Token");let n;({state:e,tree:n}=Wa(e,r));let a=Ba(t,e);return fn(e,Cx(a,n))}function w0(e){let t=e,r=Lr(e);e=Hn(e,"Sqrt");let n;Mb(e,"[")&&({state:e,tree:n}=C0(e));let a;({state:e,tree:a}=Wa(e,r));let c=Ba(t,e);return fn(e,xx(c,n,a))}function v0(e){let t=e,r=Lr(e);e=Hn(e,"Frac");let n;({state:e,tree:n}=Wa(e,r));let a;({state:e,tree:a}=Wa(e,r));let c=Ba(t,e);return fn(e,wx(c,n,a))}function k0(e){let t=e;e=Hn(e,"Left");let r=Lr(e);e=Jr(e);let n;({state:e,tree:n}=kd(e,!1)),e=Hn(e,"Right");let a=Lr(e);e=Jr(e);let c=Ba(t,e);return fn(e,kx(c,r,a,n))}function E0(e){let t=e,r,n,a=0;e:for(;!Do(e);){let l=Lr(e);switch(l.type){case"^":if(e=Jr(e),r)throw"Parse Error: double superscript.";({state:e,tree:r}=Wa(e,l));break;case"_":if(e=Jr(e),n)throw"Parse Error: double subscript.";({state:e,tree:n}=Wa(e,l));break;case"Primes":if(e=Jr(e),a>0)throw"Parse Error: double primes.";a=l.val.length;break;case"Primes^":if(e=Jr(e),a>0)throw"Parse Error: double primes.";if(r)throw"Parse Error: double superscript";a=l.val.length-1,{state:e,tree:r}=Wa(e,l);break;default:break e}}let c=Ba(t,e);return fn(e,vx(c,r,n,a))}function Wa(e,t){let r=Sx(t.type),n;if(r<=0)throw new Error("Programming Error: greediness must be greater than 0.");let a=Sx(Lr(e).type);if(a>0&&a<=r){let c=ar(t.span);throw`Parse Error: can't use ${ar(Lr(e).span)} as argument of ${c}. Use {}.`}return{state:e,tree:n}=Mx(e),n.type!=="Group"&&(n=ug(n.span,[n])),fn(e,n)}function C0(e){e=Hn(e,"[");let t;return{state:e,tree:t}=kd(e,!0),e=Hn(e,"]"),fn(e,t)}var T0={mcd:"gcd",gcf:"gcd",mcm:"lcm",signum:"sign",sgn:"sign",stdDevP:"stdevp",stddevp:"stdevp",stdDev:"stdev",stddev:"stdev",variance:"var",TTest:"ttest",TScore:"tscore",IndependentTTest:"ittest",iTTest:"ittest",inverseCdf:"quantile",inversecdf:"quantile",arsinh:"arcsinh",arcosh:"arccosh",artanh:"arctanh",arcsch:"arccsch",arsech:"arcsech",arcoth:"arccoth"};function Ax(e){let t=0;for(;Bl(e.charCodeAt(t));)t+=1;return t>0&&(e=e.slice(t)),T0[e]||e}function Lx(e,t){return{type:"Equals",span:e,args:t}}function Xs(e,t,r){return{type:"Inequality",span:e,symbol:t,args:r}}function Gx(e,t,r){return{type:"TrailingInequalityPiece",span:e,symbol:t,args:r}}function Vx(e,t,r){return{type:"InequalityChain",span:e,first:t,chain:r}}function Nx(e,t){return{type:"Tilde",span:e,args:t}}function Ix(e,t){return{type:"Pos",span:e,args:t}}function Px(e,t){return{type:"Neg",span:e,args:t}}function Ox(e,t){return{type:"Add",span:e,args:t}}function Fx(e,t){return{type:"Sub",span:e,args:t}}function _x(e,t){return{type:"Mul",span:e,args:t}}function Rx(e,t){return{type:"DotMul",span:e,args:t}}function qx(e,t){return{type:"CrossMul",span:e,args:t}}function Bx(e,t){return{type:"Div",span:e,args:t}}function Ux(e,t){return{type:"Bang",span:e,args:t}}function Zs(e,t){return{type:"Call",span:e,args:t}}function pg(e,t){return{type:"ImplicitCall",span:e,args:t}}function $x(e,t){return{type:"Index",span:e,args:t}}function gg(e,t){return{type:"Paren",span:e,args:t}}function hg(e,t){return{type:"List",span:e,args:t}}function zx(e,t){return{type:"Pipes",span:e,args:t}}function mg(e,t){return{type:"Subscript",span:e,args:t}}function Ed(e,t){return{type:"Superscript",span:e,args:t}}function ec(e,t,r){return{type:"Prime",span:e,nprimes:t,args:r}}function Cd(e,t){return{type:"Seq",span:e,args:t}}function Kx(e,t){return{type:"Sqrt",span:e,args:t}}function Wx(e,t){return{type:"Nthroot",span:e,args:t}}function Hx(e,t){return{type:"Frac",span:e,args:t}}function jx(e,t){return{type:"Derivative",span:e,args:t}}function Yx(e,t){return{type:"Integral",span:e,args:t}}function Jx(e,t){return{type:"EmptyIntegral",span:e,args:t}}function Qx(e,t){return{type:"Sum",span:e,args:t}}function Xx(e,t){return{type:"Product",span:e,args:t}}function Zx(e,t){return{type:"Piecewise",span:e,args:t}}function ew(e){return{type:"EmptyPiecewise",span:e}}function tw(e){return{type:"EmptyRangeEnd",span:e}}function rw(e,t){return{type:"Colon",span:e,args:t}}function fg(e,t){return{type:"Ellipsis",span:e,args:t}}function nw(e,t){return{type:"For",span:e,args:t}}function aw(e,t){return{type:"With",span:e,args:t}}function iw(e,t){return{type:"Dot",span:e,args:t}}function ow(e,t){return{type:"PercentOf",span:e,args:t}}function sw(e,t){return{type:"RightArrow",span:e,args:t}}function yg(e,t){return{type:"Juxt",span:e,args:t}}function cw(e,t){return{type:"Letter",span:e,val:t}}function Td(e,t){return{type:"Decimal",span:e,val:t}}function Ni(e,t){return{type:"Cmd",span:e,val:Ax(t)}}function lw(e,t){return{type:"Alphanumeric",span:e,val:t}}function dw(e,t,r,n){return{type:"MixedNumber",span:e,whole:t,num:r,den:n}}function Bt(e){if(e.type==="Subscript"){if(e.args[1].type!=="Alphanumeric")return!1;e=e.args[0]}switch(e.type){case"Cmd":return!0;case"Letter":return!0;default:return!1}}function uw(e){return e.type!=="Superscript"?!1:Bt(e.args[0])}function pw(e,t){if(e.type!=="Letter"||e.val!=="d"||t.type!=="Juxt")return!1;let[r,n]=t.args;return r.type!=="Letter"||r.val!=="d"?!1:Bt(n)}function Ut(e){return e.type==="Seq"?e.args:[e]}function oe(e,t){return{type:"Err",span:e,error:t}}function bg(){return{type:"UnexpectedParseError"}}function gw(){return{type:"EmptyInput"}}function hw(){return{type:"EmptyGroup"}}function xg(){return{type:"EmptySubscript"}}function mw(){return{type:"EmptySuperscript"}}function wg(){return{type:"EmptyRadical"}}function fw(){return{type:"EmptySquareBracket"}}function yw(){return{type:"EmptyPipe"}}function bw(){return{type:"EmptyRadicalIndex"}}function vg(){return{type:"UnexpectedEnd"}}function Ha(e){return{type:"BinaryOperatorMissingRight",val:e}}function xw(e){return{type:"BinaryOperatorMissingLeft",val:e}}function kg(e){return{type:"UnaryOperatorMissingRight",val:e}}function Eg(e){return{type:"UnaryOperatorMissingLeft",val:e}}function ww(e,t){return{type:"MissingCloseDelimiter",open:e,close:t}}function tc(e,t){return{type:"UnexpectedCloseDelimiter",open:e,close:t}}function vw(){return{type:"UnexpectedDifferential"}}function kw(e){return{type:"UnrecognizedSymbol",val:e}}function Ew(e){return{type:"InvalidSubscript",val:e}}function Cw(e){return{type:"UnexpectedSubscript",base:e}}function Cg(e){return{type:"FunctionMissingArgument",val:e}}function Tw(){return{type:"PercentMissingOf"}}function Tg(){return{type:"PrimeWithoutParen"}}function Sw(){return{type:"SuperscriptWithPrime"}}function Sd(){return{type:"UnexpectedPrime"}}function Dw(){return{type:"SumMissingBound"}}function Mw(){return{type:"ProductMissingBound"}}function Sg(){return{type:"MissingBound"}}function Aw(){return{type:"IntegralMissingBound"}}function Lw(){return{type:"SumMissingBody"}}function Gw(){return{type:"ProductMissingBody"}}function Vw(){return{type:"IntegralMissingBody"}}function Nw(){return{type:"DerivativeMissingBody"}}function Iw(){return{type:"IntegralMissingDifferential"}}function Pw(){return{type:"DifferentialWithSuperscript"}}function Ow(){return{type:"FractionMissingNumerator"}}function Fw(){return{type:"FractionMissingDenominator"}}function _w(){return{type:"FractionEmpty"}}function Dg(e){return{type:"AdjacentNumbers",args:e}}function Rw(){return{type:"UnexpectedFor"}}function qw(){return{type:"TokenWithSubscript"}}var M0={"+":!0,"-":!0,"*":!0,"\\cdot":!0,"\\times":!0,"/":!0,"!":!0,"(":!0,")":!0,"\\{":!0,"\\}":!0,"(|":!0,"|)":!0,"[":!0,"]":!0,",":!0,"...":!0,":":!0,"=":!0,">":!0,"<":!0,">=":!0,"<=":!0,"->":!0,"~":!0,"%":!0,".":!0,for:!0,with:!0,Letter:!0,Decimal:!0,Cmd:!0,TokenNode:!0,Differential:!0,End:!0,Trig:!0,Ln:!0,Log:!0,Int:!0,Sum:!0,Prod:!0,Err:!0},ja={"\\lt":"<","\\gt":">","\\le":"<=","\\ge":">=","\\leq":"<=","\\geq":">=","\\ldots":"...","\\sim":"~","\\to":"->","\\cdot":"\\cdot","\\times":"\\times","\\div":"/","\\ln":"Ln","\\log":"Log","\\int":"Int","\\sum":"Sum","\\prod":"Prod","\\backslash":"Err","\\for":"for","\\with":"with"},A0=["sin","cos","tan","cot","sec","csc"];for(let e of A0)ja["\\"+e]="Trig",ja["\\"+e+"h"]="Trig",ja["\\arc"+e]="Trig",ja["\\arc"+e+"h"]="Trig",ja["\\ar"+e+"h"]="Trig";var Mg={"+":"+","-":"-","*":"*","/":"/","!":"!","(":"(",")":")","[":"[","]":"]",",":",","...":"...",":":":","=":"=",">=":">=","<=":"<=",">":">","<":"<","~":"~",".":"."},Bw={"\\{":"\\{","\\}":"\\}","\\%":"%"},Uw={"|":"(|","\\{":"\\{","[":"[","(":"("},$w={"|":"|)","\\}":"\\}","]":"]",")":")"},zw=Object.keys(M0);function Kw(e,t,r,n,a,c,l,g){return{opts:e,input:t,prevSpan:r,startIndex:n,endIndex:a,token:c,mode:l,parent:g}}function ae(e,t){return nr(e.token.span,t.prevSpan)}function gt(e,t){return nr(e,t.prevSpan)}function Lg(e){return An(e.token.span.input,e.token.span.start)}function L0(e,t){return{type:"Differential",span:e,val:t}}function ur(e,t,r){return{type:e,span:t,val:r}}function Ca(e,t){let r=An(e.span.input,e.span.start);return Gg(t,e,0,r,void 0,void 0)}function Gg(e,t,r,n,a,c){let l=t.args;if(r>l.length&&c)return Ww(c,n);r=rc(l,r);let{token:g,endIndex:p}=Hw(t,r,a);if(g.type==="End"&&c){let f=c.input.args[c.startIndex];if(f.type==="LeftRight"){let w=f.right,M=$w[w.val]||"Err",G=ur(M,w.span,w.val);return Kw(e,t,n,r,p,G,a,c)}}else g.type==="Int"?a=G0(a):g.type==="Differential"&&(a=V0(a));return Kw(e,t,n,r,p,g,a,c)}function de(e){let t=e.input.args[e.startIndex],r=e.token.span;return t&&t.type==="LeftRight"?Gg(e.opts,t.arg,0,r,e.mode,e):Ww(e,r)}function Ww(e,t){let{input:r,endIndex:n,mode:a,parent:c}=e;return Gg(e.opts,r,n+1,t,a,c)}function $t(e){return e.token}function G0(e){return{type:"integral",parent:e}}function V0(e){if(!e||e.type!=="integral")throw new Error("Programming Error: expected lexer to be in integral mode.");return e.parent}function zt(e,t){return $t(e).type===t}function Ad(e){return e.startIndex>=e.input.args.length}function Vg(e,t){return t.token.span.start>e.token.span.start}function Tt(e,t){return{token:t,endIndex:e}}function Hw(e,t,r){let n=e.args;if(t>=n.length){let l=An(e.span.input,e.span.end);return Tt(t,ur("End",l,""))}let a=e.args[t];switch(a.type){case"Sqrt":case"Frac":case"SupSub":return Tt(t,a);case"Letter":{if(!r||r.type!=="integral"||a.val!="d")return Tt(t,a);let{endIndex:w,token:M}=Hw(e,t+1,r);if(M.type==="Letter"||M.type==="Cmd"){let G=L0(nr(a.span,M.span),M.val);return Tt(w,G)}else return Tt(t,a)}case"LeftRight":{let w=a.left,M=Uw[w.val]||"Err";var c=nr(a.span,w.span);return Tt(t,ur(M,c,w.val))}case"OperatorName":let l=[];for(let w of a.arg.args){if(w.type!=="Letter")return Tt(t,ur("Err",a.span,ar(a.arg.span)));l.push(w.val)}let g="\\"+l.join(""),p=ja[g]||"Cmd";return Tt(t,ur(p,a.span,g));case"TokenNode":{let w="$";if(a.arg.args.length===0)return Tt(t,ur("Err",a.span,ar(a.arg.span)));for(let M of a.arg.args){if(M.type!=="Digit")return Tt(t,ur("Err",a.span,ar(a.arg.span)));w+=M.val}return Tt(t,ur("TokenNode",a.span,w))}case"Cmd":{let w=ja[a.val]||"Cmd";return Tt(t,ur(w,a.span,a.val))}case"EscapedSymbol":{let w=Bw[a.val]||"Err";return Tt(t,ur(w,a.span,a.val))}case"Symbol":return N0(e,t,a);case"Digit":return jw(e,t);default:throw`Unexpected atom ${a.type}.`}}function N0(e,t,r){switch(r.val){case".":return I0(e,t);case"-":{let a=e.args[t+1];if(a&&Dd(a,">")){let c=ur("->",nr(r.span,a.span),"->");return Tt(t+1,c)}break}case"<":{let a=e.args[t+1];if(a&&Dd(a,"=")){let c=ur("<=",nr(r.span,a.span),"<=");return Tt(t+1,c)}break}case">":{let a=e.args[t+1];if(a&&Dd(a,"=")){let c=ur(">=",nr(r.span,a.span),">=");return Tt(t+1,c)}break}}let n=Mg[r.val]||"Err";return Tt(t,ur(n,r.span,r.val))}function I0(e,t){let r=e.args[t];if(r.type!=="Symbol"||r.val!==".")throw new Error("Programming Error: expected '.'");if(t+2<e.args.length&&Md(e.args[t+1])&&Md(e.args[t+2])){let c=nr(r.span,e.args[t+2].span);return Tt(t+2,ur("...",c,ar(c)))}let n=rc(e.args,t+1);if(n<e.args.length&&e.args[n].type==="Digit")return jw(e,t);let a=Mg[r.val]||"Err";return Tt(t,ur(a,r.span,r.val))}function jw(e,t){let r=P0(e,t);if(r)return r;let n=e.args,a=e.args[t].span,c=[],l=!1,g=!1;for(;t<n.length;t++){let f=rc(n,t);if(f>=n.length)break;let w=n[f];if(w.type==="Digit")t=f,l=!0,c.push(w.val);else if(!g&&Md(w)){if(f+1<n.length&&Md(e.args[f+1]))break;t=f,g=!0,c.push(".")}else break}if(!l)throw new Error("Programming Error: decimals must have at least one digit.");let p=nr(a,e.args[t-1].span);return Tt(t-1,ur("Decimal",p,c.join("")))}function P0(e,t){let r=e.args,n=r[t].span,a=[];for(;t<r.length;t++){let f=rc(r,t);if(f>=r.length)break;let w=r[f];if(w.type!=="Digit")break;t=f,a.push(w.val)}if(t=rc(r,t),t>=r.length)return;let c=r[t];if(c.type!=="Frac")return;let l=[],g=[];for(let f of c.num.args)if(!Ag(f)){if(f.type!=="Digit")return;l.push(f.val)}for(let f of c.den.args)if(!Ag(f)){if(f.type!=="Digit")return;g.push(f.val)}let p=nr(n,c.span);return Tt(t,dw(p,a.join(""),l.join(""),g.join("")))}function Ag(e){switch(e.type){case"Sqrt":case"Frac":case"SupSub":case"LeftRight":case"OperatorName":case"TokenNode":case"Symbol":case"Letter":case"Digit":return!1;case"Cmd":return e.val==="\\space";case"EscapedSymbol":return e.val==="\\ "||e.val==="\\:"||e.val==="\\,"||e.val==="\\;";default:throw`Unexpected atom ${e.type}.`}}function rc(e,t){for(;t<e.length&&Ag(e[t]);)t+=1;return t}function Md(e){return Dd(e,".")}function Dd(e,t){return e.type==="Symbol"&&e.val===t}function zo(e){return{type:"initial",tokenType:e}}function nc(e){return{type:"l",tokenType:e}}function ac(e){return{type:"r",tokenType:e}}function Ne(e){return{type:"la",tokenType:e}}function Ko(e){return{type:"ra",tokenType:e}}function Yw(e,t){for(let r of zw)if(t[r]===void 0)throw new Error(`Programming Error: token ${r} must be a assigned a ${e} precedence`)}function Ii(e,t,r,n){if(t[r]!==void 0)throw new Error(`Programming Error: duplicate ${e} entry for token ${r}.`);t[r]=n}function Jw(e){let t={},r={},n={};for(let g=0;g<e.length;g++){let p=e[g];for(let{type:f,tokenType:w}of p)switch(f){case"initial":Ii("initial",t,w,g);break;case"l":Ii("left",r,w,g);break;case"r":Ii("right",n,w,g);break;case"la":Ii("left",r,w,g),Ii("right",n,w,g);break;case"ra":Ii("left",r,w,g),Ii("right",n,w,g-1);break}}Yw("left",r),Yw("right",n);function a(g){return n[g]}function c(g){return r[g]}function l(g){let p=t[g];return p===void 0?a(g):p}return{rightPrec:a,leftPrec:c,initialPrec:l}}var Wo={},O0=["sin","cos","tan","cot","sec","csc","sinh","cosh","tanh","coth","sech","csch"];O0.forEach(function(e){Wo[e]="arc"+e,Wo["arc"+e]=e});var F0=0;function ev(e,t){return _0(e,t)}function ve(e,t){let r=[];for(let n=0;n<t.length;n++)r.push(Xe(e,t[n]));return r}function _0(e,t){return e.setInput(R0(e,t),t.span)}function tv(e){if(e.type!=="Call")return;let[t,r]=e.args,n=Ut(r);if(Bt(t)&&n.every(Bt))return{base:t,args:n}}function rv(e){return tv(e)!==void 0}function nv(e){return e.type==="Paren"&&e.args[0].type==="Seq"&&e.args[0].args.every(Bt)}function Ig(e){return Bt(e)||nv(e)}function R0(e,t){let r=e.nodes;switch(t.type){case"Equals":{let[n,a]=t.args,c=tv(n);if(c){let{base:l,args:g}=c;return r.FunctionDefinition(Xe(e,l),ve(e,g),Xe(e,a))}else if(Ig(n)){let l=Xe(e,a);return nv(n)?r.CoordinateEquation(Xe(e,n),l):r.Assignment(Xe(e,n),l)}return r.Equation(Xe(e,n),Xe(e,a))}case"Tilde":{let[n,a]=ve(e,t.args);return r.Regression(n,a)}case"Inequality":return Pi(e,t);case"InequalityChain":{if(t.chain.length>1)throw Np();let{first:{symbol:n,args:[a,c]},chain:[{symbol:l,args:[g]}]}=t;return Bt(c)?r.DoubleInequality([Xe(e,a),n,Xe(e,c),l,Xe(e,g)]):Pi(e,t)}case"Call":{let[n,a]=t.args;if(n.type==="Cmd")switch(n.val){case"histogram":return r.Histogram(ve(e,Ut(a)));case"dotplot":return r.DotPlot(ve(e,Ut(a)));case"boxplot":return r.BoxPlot(ve(e,Ut(a)));case"ttest":return r.TTest(ve(e,Ut(a)));case"ittest":return r.IndependentTTest(ve(e,Ut(a)));case"stats":return r.Stats(ve(e,Ut(a)));default:return ic(e,t)}return ic(e,t)}default:return ic(e,t)}}function av(e){if(e.type!=="Paren")return!1;let[t]=e.args;return t.type!=="Seq"?!1:t.args.length===2||t.args.length===3}function Xe(e,t){return e.setInput(ic(e,t),t.span)}function ic(e,t){let r=e.nodes;switch(t.type){case"Pos":return Xe(e,t.args[0]);case"Neg":let n=-1,a=t.args[0];for(;;)if(a.type==="Pos"||a.type==="Paren"&&!av(a))a=a.args[0];else if(a.type==="Neg")a=a.args[0],n*=-1;else break;switch(a.type){case"Decimal":{let l=Xw(a);return r.Constant(n===-1?Kn(l):l)}case"MixedNumber":{let l=Zw(a);return r.MixedNumber(n===-1?Kn(l):l)}default:return n===-1?r.Negative([Xe(e,a)]):Xe(e,a)}case"Add":return r.Add(ve(e,t.args));case"Sub":return r.Subtract(ve(e,t.args));case"Mul":return r.Multiply(ve(e,t.args));case"DotMul":return r.DotMultiply(ve(e,t.args));case"CrossMul":return r.CrossMultiply(ve(e,t.args));case"Div":return r.Divide(ve(e,t.args));case"Bang":{let[l]=t.args;return l.type==="Call"&&!Ld(l.args[0])?r.FunctionFactorial(ve(e,l.args)):r.FunctionCall("\\factorial",ve(e,t.args))}case"PercentOf":return r.PercentOf(ve(e,t.args));case"Call":return Qw(e,t);case"ImplicitCall":return K0(t),Qw(e,t);case"Dot":{let l=t.args[1],[g,p]=ve(e,t.args);if(Ld(l)){let f=An(l.span.input,l.span.end),w=e.setInput(sv(e),f);p=e.setInput(r.SeededFunctionCall(p,[w]),l.span)}else if(l.type==="Letter")switch(l.val){case"x":case"y":case"z":return r.NamedCoordinateAccess(l.val,[g]);default:break}else if(l.type==="Call"){let f=l.args[0];if(f.type==="Letter")switch(f.val){case"x":case"y":case"z":return r.Multiply([e.setInput(r.NamedCoordinateAccess(f.val,[g]),nr(t.args[0].span,f.span)),Xe(e,l.args[1])])}}return r.DotAccess([g,p])}case"Prime":{let[l]=t.args;if(l.type==="Call"){let[g,p]=l.args,f=Ut(p).length;if(g.type==="Cmd"&&g.val==="logbase"){if(f!==2)throw Dp()}else if(f!==1)throw Dp();return r.Prime(t.nprimes,ve(e,t.args))}else throw l.type==="ImplicitCall"?Vp():Gp()}case"Index":{let[l,g]=t.args;if(g.type==="Seq")return r.ListAccess([Xe(e,l),e.setInput(r.List(ve(e,g.args)),void 0)]);if(g.type==="Ellipsis"){let[p,f]=g.args;return r.ListAccess([Xe(e,l),e.setInput(r.Range([e.setInput(r.List(ve(e,Ut(p))),void 0),e.setInput(r.List(f.type==="EmptyRangeEnd"?[]:ve(e,Ut(f))),void 0)]),void 0)])}return ov(g)?r.ListAccess([Xe(e,l),e.setInput(Pi(e,g),void 0)]):r.ListAccess(ve(e,t.args))}case"Paren":{let[l]=t.args;if(l.type==="Seq"){if(l.args.length===0)throw My();return r.ParenSeq(ve(e,l.args))}else return Xe(e,l)}case"List":{if(t.args.length===0)return r.List([]);let l=t.args[0];if(l.type==="Ellipsis"){let[g,p]=l.args;return r.Range([e.setInput(r.List(ve(e,Ut(g))),void 0),e.setInput(r.List(ve(e,Ut(p))),void 0)])}else if(l.type==="For"){let[g,p]=l.args,f=e.setInput(r.Identifier(`_comprehensionIndex_${F0++}`),void 0),w=Xe(Gd(e,{prefix:"li",expr:f}),g),M=[];for(let G of Ut(p)){if(!oc(G))throw mb();M.push(e.setInput(r.AssignmentExpression(ve(e,G.args)),G.span))}return r.ListComprehension(f,w,M)}return r.List(ve(e,Ut(l)))}case"Pipes":{let[l]=t.args;return r.Norm([Xe(e,l)])}case"Subscript":{let[l,g]=t.args;if(g.val.length===0)throw Lp();let p;switch(l.type){case"Letter":p=l.val;break;case"Cmd":p=l.val;break;default:throw Cy()}if(p==="ans")throw Ti("ans");return r.Identifier(`${p}_${g.val}`)}case"Superscript":{let[l,g]=t.args;if(l.type==="Call"&&l.args[1].type!=="Seq"&&!Ld(l.args[0])&&!W0(l))return r.FunctionExponent(ve(e,[l.args[0],l.args[1],g]));if(l.type==="Dot"){let p=l.args[1],[f,w]=ve(e,l.args),M=Xe(e,g);if(p.type==="Letter")switch(p.val){case"x":case"y":case"z":return r.Exponent([e.setInput(r.NamedCoordinateAccess(p.val,[f]),l.span),M]);default:break}else if(p.type==="Call"){let G=p.args[0];if(G.type==="Letter")switch(G.val){case"x":case"y":case"z":return r.Multiply([e.setInput(r.NamedCoordinateAccess(G.val,[f]),nr(l.args[0].span,G.span)),e.setInput(r.Exponent([Xe(e,p.args[1]),M]),wr(t.span.input,p.args[0].span.end,g.span.end))]);default:break}}return r.Exponent([e.setInput(r.DotAccess([f,w]),l.span),M])}else return r.Exponent(ve(e,t.args))}case"Sqrt":return r.FunctionCall("sqrt",ve(e,t.args));case"Nthroot":return r.FunctionCall("nthroot",ve(e,[t.args[1],t.args[0]]));case"Frac":return r.Divide(ve(e,t.args));case"Derivative":{let l=ve(e,t.args);if(!Bt(t.args[0]))throw Ci(`Expected identifier in derivative, but found ${t.args[0].type}`);return r.Derivative(l[0],[l[1]])}case"Integral":{let[l,g,p,f]=t.args,w=ve(e,[l,g,p,f]);return r.Integral(w)}case"EmptyIntegral":{let[l,g,p]=ve(e,t.args),f=e.setInput(r.Constant(Qe(1,1)),void 0);return r.Integral([l,g,p,f])}case"Sum":{let[l,g,p]=t.args;if(!oc(g))throw zy();let f=ve(e,[g.args[0],g.args[1],p]),w=Xe(Gd(e,{prefix:"ro",expr:f[0]}),l);return r.Sum(f.concat(w))}case"Product":{let[l,g,p]=t.args;if(!oc(g))throw Ky();let f=ve(e,[g.args[0],g.args[1],p]),w=Xe(Gd(e,{prefix:"ro",expr:f[0]}),l);return r.Product(f.concat(w))}case"Juxt":{if(e.writeIntegral){let[p,f]=t.args;if(f.type==="Letter"&&f.val==="t"&&p.type==="Juxt"&&([p,f]=p.args,f.type==="Letter"&&f.val==="n")){if(p.type==="Juxt"){if([p,f]=p.args,f.type==="Letter"&&f.val==="i")throw Ip()}else if(p.type==="Letter"&&p.val==="i")throw Ip()}}let[l,g]=t.args;if(l.type==="MixedNumber"&&!(Bt(g)||g.type==="Piecewise"||g.type==="Call"||g.type==="Paren"))throw Ap(Vd(l));if(g.type==="MixedNumber")throw Ap(Vd(g));return r.Multiply(ve(e,t.args))}case"Letter":return r.Identifier(t.val);case"Cmd":{let l=t.val;switch(l){case"ans":{if(e.currentIndex===void 0)throw Co("ans");return r.Ans(`ans_{${e.currentIndex-1}}`)}case"approx":throw Sp(l);case"dt":{if(!e.allowDt)throw Co(l);return r.Identifier(l)}case"index":{if(!e.allowIndex)throw Co(l);return r.Identifier(l)}default:return r.Identifier(l)}}case"With":{if(e.isSubstitutionRHS)throw Rp();let[l,g]=t.args,p=Dt(ye({},e),{isSubstitutionRHS:!0});return r.Substitution(Xe(p,l),U0(p,g))}case"Decimal":return r.Constant(Xw(t));case"MixedNumber":return r.MixedNumber(Zw(t));case"Piecewise":return z0(e,t);case"RightArrow":return $0(e,t);case"Seq":return r.BareSeq(ve(e,t.args));case"EmptyPiecewise":if(!r.Piecewise.empty)throw Ye();return r.Piecewise.empty();case"Equals":throw Ti("=");case"Inequality":case"InequalityChain":throw ay();case"Tilde":throw Ti("~");case"Colon":throw Ti(":");case"Ellipsis":throw Ti("...");case"For":throw _p();case"EmptyRangeEnd":throw By();case"Err":throw H0(t.error);default:throw`Unexpected surface node ${t.type}.`}}function Ng(e){return Wo.hasOwnProperty(e)}function iv(e){return e==="ln"||e==="log"||e==="logbase"}function q0(e){return e.type==="Decimal"&&e.val==="2"}function B0(e){return e.type!=="Neg"?!1:(e=e.args[0],e.type==="Decimal"&&e.val==="1")}function Qw(e,t){let r=e.nodes,[n,a]=t.args,c=Xe(e,n),l=Ut(a),g=ve(e,l);if(Ld(n)){let p=An(a.span.input,a.span.start),f=e.setInput(sv(e),p);return r.SeededFunctionCall(c,[f].concat(g))}if(Bt(n))return r.FunctionCall(c,g);if(n.type==="Superscript"){let[p,f]=n.args;if(p.type==="Cmd"){let w=p.val;if(Ng(w)||iv(w)){if(q0(f))return r.Exponent([e.setInput(r.FunctionCall(w,g),void 0),Xe(e,f)]);if(B0(f)&&Wo[w]!==void 0)return r.FunctionCall(Wo[w],g);throw Ng(w)?Gy(w):Vy(w==="logbase"?"log":w)}}}return r.Multiply([c,Xe(e,a)])}function U0(e,t){let r=e.nodes;if(t.type==="Seq"){let l=!1,g=!1;for(let p=0;p<t.args.length;p++){if(t.args[p].type==="With")throw Il();oc(t.args[p])?l=!0:g=!0}if(l&&g)throw Il()}if(t.type==="With")throw Rp();let n=Ut(t),a=[],c=[];for(let l of n){if(!oc(l))throw fb();let g=e.setInput(r.AssignmentExpression(ve(e,l.args)),l.span),p=g._symbol;if(c.indexOf(p)>=0)throw yb(p);c.push(p),a.push(g)}return a}function $0(e,t){let r=e.nodes;if(!Bt(t.args[0]))throw py();return e=Gd(e,{prefix:"ec",expr:e.setInput(r.Identifier("globalEventCount"),void 0)}),r.UpdateRule(ve(e,t.args))}function z0(e,t){let r=e.nodes,[n]=t.args,a=Ut(n),c,l=[];e:for(c=0;c<a.length;c++){let G=a[c];switch(G.type){case"Colon":{let[R,ue]=G.args;if(!ov(R))throw Py();if(ue.type==="With"&&ue.args[1].type==="Seq")throw Il();l.push({condition:e.setInput(Pi(e,R),R.span),if_expr:Xe(e,ue)});break}case"Equals":case"Inequality":case"InequalityChain":l.push({condition:e.setInput(Pi(e,G),G.span),if_expr:e.setInput(r.Constant(Qe(1,1)),wr("1",0,1))});break;default:break e}}if(c===0)throw Ny();if(c<a.length-1)throw Iy();let g,p;c===a.length-1?(g=ic(e,a[c]),p=a[c]):g=r.Constant(NaN);let f=g,w=p==null?void 0:p.span,M;for(;l.length;)M=l.pop(),f=r.Piecewise([M.condition,M.if_expr,e.setInput(f,w)]),w=void 0;return f}function ov(e){return e.type==="Equals"||e.type==="Inequality"||e.type==="InequalityChain"}function Pi(e,t){let r=e.nodes;switch(t.type){case"Equals":return r.Comparator["="](ve(e,t.args));case"Inequality":return r.Comparator[t.symbol](ve(e,t.args));case"InequalityChain":if(t.chain.length>1)throw Np();let{first:{symbol:n,args:[a,c]},chain:[{symbol:l,args:[g]}]}=t,p=An(t.span.input,t.span.start);return r.And([e.setInput(Pi(e,Xs(p,n,[a,c])),nr(a.span,c.span)),e.setInput(Pi(e,Xs(p,l,[c,g])),nr(c.span,g.span))]);default:throw Ci(`Unexpected type for condition: ${t.type}`)}}function K0(e){let[t,r]=e.args;if(t.type==="Superscript"&&(t=t.args[0]),t.type==="Cmd"&&t.val==="logbase"&&r.type==="Seq"&&r.args.length===2){if(!Gn(r.args[0]))throw Mp("log")}else if(!Gn(r))throw t.type==="Cmd"?Mp(t.val):Ci(`Unexpected type for args of implicit call: ${r.type}`)}function Xw(e){return Is(e.val)}function Zw(e){let t=Is(e.whole),r=Is(e.num),n=Is(e.den);return pa(t,Fa(r,n))}function W0(e){if(e.type!=="Call")return!1;let t=e.args[0];for(;t.type==="Superscript"||t.type==="Subscript"||t.type==="Prime";)t=t.args[0];return t.type!=="Cmd"?!1:Ng(t.val)||iv(t.val)}function oc(e){return e.type==="Equals"&&Bt(e.args[0])}function H0(e){switch(e.type){case"UnexpectedParseError":case"MissingBound":case"EmptyGroup":case"UnexpectedDifferential":case"UnexpectedEnd":return Ci(`Unexpected error type: ${e.type}`);case"InvalidOperatorName":return Ey();case"UnexpectedCloseDelimiter":case"MissingCloseDelimiter":return Zy(e.open,e.close);case"UnrecognizedSymbol":return e.val==="."?Ti(e.val):Sp(e.val);case"EmptyInput":return Oy();case"BinaryOperatorMissingRight":case"BinaryOperatorMissingLeft":return my(e.val==="%"?"% of":e.val);case"UnaryOperatorMissingLeft":return fy(e.val);case"UnaryOperatorMissingRight":return yy(e.val);case"UnexpectedSubscript":return _y(e.base);case"PercentMissingOf":return eb();case"SumMissingBound":return Uy();case"ProductMissingBound":return $y();case"IntegralMissingBound":return Wy();case"SumMissingBody":return Yy();case"ProductMissingBody":return Jy();case"IntegralMissingBody":return Qy();case"DerivativeMissingBody":return Xy();case"IntegralMissingDifferential":return Hy();case"DifferentialWithSuperscript":return jy();case"FractionMissingNumerator":return by();case"FractionMissingDenominator":return xy();case"FractionEmpty":return wy();case"EmptySuperscript":return vy();case"EmptySubscript":return Lp();case"InvalidSubscript":return ky(e.val);case"SuperscriptWithPrime":return Ty();case"PrimeWithoutParen":return Vp();case"UnexpectedPrime":return Gp();case"EmptyRadical":return Sy();case"EmptyRadicalIndex":return Dy();case"EmptySquareBracket":return Ay();case"EmptyPipe":return Ly();case"FunctionMissingArgument":return Vl(e.val,1,0);case"AdjacentNumbers":return gy(Vd(e.args[0]),Vd(e.args[1]));case"TokenWithSubscript":return hy();case"UnexpectedFor":return _p();default:throw`Unexpected surface node ${e.type}.`}}function Vd(e){switch(e.type){case"Decimal":return e.val;case"MixedNumber":return`${e.whole} ${e.num}/${e.den}`;default:let t=e;throw new Error(`Unexpected node type ${t.type}`)}}function Gn(e){switch(e.type){case"Letter":case"Decimal":case"MixedNumber":case"Cmd":case"EmptyPiecewise":return!0;case"Neg":{let r=e.args[0];for(;;)if(r.type==="Pos"||r.type==="Paren"&&!av(r))r=r.args[0];else if(r.type==="Neg")r=r.args[0];else break;return r.type==="Decimal"||r.type==="MixedNumber"}case"Pos":return Gn(e.args[0]);case"Paren":return Gn(e.args[0]);case"Juxt":case"Mul":case"DotMul":case"CrossMul":case"Div":return Gn(e.args[0])&&Gn(e.args[1]);case"Subscript":return Gn(e.args[0]);case"Superscript":case"Frac":case"Add":case"Sub":return Gn(e.args[0])&&Gn(e.args[1]);case"Piecewise":{let[r]=e.args;return r.type==="Equals"||r.type==="Inequality"||r.type==="InequalityChain"}case"Call":{let[r,n]=e.args;return Bt(r)||uw(r)?!1:Gn(r)&&Gn(n)}case"Derivative":case"Sqrt":case"Nthroot":case"Pipes":case"Bang":return!1;case"Equals":case"Inequality":case"InequalityChain":case"Tilde":case"ImplicitCall":case"Index":case"List":case"Seq":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Colon":case"Ellipsis":case"For":case"With":case"Dot":case"PercentOf":case"Prime":case"EmptyRangeEnd":case"RightArrow":return!1;default:throw`Unexpected surface node ${e.type}.`}}function Ld(e){return e.type!=="Cmd"?!1:e.val==="random"||e.val==="shuffle"}function sv(e){let t=e.nodes.ExtendSeed("",[e.setInput(e.nodes.Identifier("globalRandomSeed"),void 0),e.setInput(e.nodes.Seed(e.nextSeed()),void 0)]);if(!e.seedExtensions)return t;for(let{prefix:r,expr:n}of e.seedExtensions)t=e.nodes.ExtendSeed(r,[e.setInput(t,void 0),n]);return t}function Gd(e,t){let r=e.seedExtensions||[];return Dt(ye({},e),{seedExtensions:r.concat(t)})}var j0=[[zo("("),Ne(")"),zo("\\{"),Ne("\\}"),ac("["),Ne("]"),zo("(|"),Ne("|)"),Ne("Differential"),Ne("End")],[Ne("for")],[ac("with")],[Ko("...")],[Ne(",")],[Ko(":")],[ac("->")],[nc("with")],[Ne("="),Ne(">"),Ne("<"),Ne(">="),Ne("<="),Ne("~")],[nc("->")],[Ne("+"),Ne("-")],[Ne("*"),Ne("\\cdot"),Ne("\\times"),Ne("/"),Ne("Decimal"),Ne("MixedNumber"),Ne("Letter"),Ne("Cmd"),Ne("TokenNode"),Ne("%"),ac("("),Ne("\\{"),Ne("(|"),Ne("Frac"),Ne("Sqrt"),Ne("Trig"),Ne("Ln"),Ne("Log"),Ko("Int"),Ko("Sum"),Ko("Prod")],[zo("+"),zo("-")],[Ne("!")],[Ne("SupSub")],[nc("["),Ne(".")],[nc("(")],[Ne("Err")]],{leftPrec:Nd,rightPrec:cv,initialPrec:pv}=Jw(j0),lv={trailingComma:!1};function gv(e,t){let r=t?ye(ye({},lv),t):lv,n=Ca(e,r),a=Y0(n);return a.type==="Err"&&a.error.type==="EmptyGroup"?oe(a.span,gw()):a}function Y0(e){return Ya(e,{isToplevel:!0})}function Ya(e,{isToplevel:t}={isToplevel:!1}){if(Ad(e))return oe(ae(e,e),hw());let{state:r,tree:n}=xt(e,0,{isToplevel:t});return n.type!=="Err"&&!Ad(r)?Og(r).tree:n}function P(e,t){return{state:e,tree:t}}function xt(e,t,{isToplevel:r}={isToplevel:!1}){let n=e,a;if({state:n,tree:a}=J0(n),a.type==="Err")return P(n,a);if(!Vg(e,n))throw new Error("Programming Error: parseInitial did not advance state.");for(;!Ad(n);){let c;if(zt(n,"(")&&!Z0(a)?c=cv("("):c=Nd($t(n).type),t>=c)break;let l=n,g=Q0(n,a,r)?Nd(",")-1:cv($t(n).type);if({state:n,tree:a}=X0(n,a,g),a.type==="Err")return P(n,a);if(!Vg(l,n))throw new Error("Programming Error: parseSuccessor did not advance state.")}return P(n,a)}function Ir(e){return e.type==="UnexpectedDifferential"||e.type==="UnexpectedCloseDelimiter"||e.type==="UnexpectedEnd"||e.type==="BinaryOperatorMissingLeft"}function J0(e){let t=e,r=$t(e),n=pv(r.type),a;switch(r.type){case"+":{if(e=de(e),{state:e,tree:a}=xt(e,n),a.type==="Err"){if(!Ir(a.error))return P(e,a);let l=ae(t,e),g=oe(l,kg(r.val));return P(e,g)}return P(e,Ix(ae(t,e),[a]))}case"-":if(e=de(e),{state:e,tree:a}=xt(e,n),a.type==="Err"){if(!Ir(a.error))return P(e,a);let l=ae(t,e),g=oe(l,kg(r.val));return P(e,g)}else return P(e,Px(ae(t,e),[a]));case"(":return sc(e);case"\\{":return e=de(e),zt(e,"\\}")?(e=de(e),P(e,ew(ae(t,e)))):({state:e,tree:a}=xt(e,n),{state:e,tree:a}=cc(t,e,a,"\\{","\\}"),a.type==="Err"?P(e,a):P(e,Zx(ae(t,e),[a])));case"[":return e=de(e),zt(e,"]")?(e=de(e),P(e,hg(ae(t,e),[]))):({state:e,tree:a}=xt(e,n),{state:e,tree:a}=cc(t,e,a,"[","]"),a.type==="Err"?P(e,a):P(e,hg(ae(t,e),[a])));case"(|":{if(e=de(e),zt(e,"|)")){e=de(e);let l=ae(t,e);return P(e,oe(l,yw()))}return{state:e,tree:a}=xt(e,n),{state:e,tree:a}=cc(t,e,a,"(|","|)"),a.type==="Err"?P(e,a):P(e,zx(ae(t,e),[a]))}case"Frac":{if(e.opts.disallowFrac)throw Op();e=de(e);let l=Ya(Ca(r.num,e.opts)),g=Ya(Ca(r.den,e.opts));if(l.type==="Err"&&l.error.type==="EmptyGroup"&&g.type==="Err"&&g.error.type==="EmptyGroup"){let p=ae(t,e),f=oe(p,_w());return P(e,f)}if(l.type==="Err"&&l.error.type==="EmptyGroup"){let p=ae(t,e),f=oe(p,Ow());return P(e,f)}if(g.type==="Err"&&g.error.type==="EmptyGroup"){let p=ae(t,e),f=oe(p,Fw());return P(e,f)}if(l.type==="Err")return P(e,l);if(g.type==="Err")return P(e,g);if(pw(l,g)&&g.type==="Juxt"){let p=g.args[1],f;if({state:e,tree:f}=xt(e,Nd("*")-1),f.type==="Err"){if(Ir(f.error)){let w=ae(t,e);return P(e,oe(w,Nw()))}return P(e,f)}return P(e,jx(ae(t,e),[p,f]))}return P(e,Hx(ae(t,e),[l,g]))}case"Sqrt":if(e=de(e),r.optArg){let l=Ya(Ca(r.optArg,e.opts));if(l.type==="Err")return l.error.type==="EmptyGroup"?P(e,oe(l.span,bw())):P(e,l);let g=Ya(Ca(r.arg,e.opts));return g.type==="Err"?g.error.type==="EmptyGroup"?P(e,oe(g.span,wg())):P(e,g):P(e,Wx(ae(t,e),[l,g]))}else{let l=Ya(Ca(r.arg,e.opts));return l.type==="Err"?l.error.type==="EmptyGroup"?P(e,oe(l.span,wg())):P(e,l):P(e,Kx(ae(t,e),[l]))}case"Trig":case"Ln":{e=de(e);let l=Ni(ae(t,e),r.val),g=0,p=$t(e);if(p.type==="SupSub"){if(e=de(e),p.sub){let M=ae(t,e),G=oe(M,Cw(l.val));return P(e,G)}let w=Id(p,e.opts);if(w){if(w.type==="Err")return P(e,w);l=Ed(ae(t,e),[l,w])}g=p.nprimes}let f=zt(e,"(");if(f){if({state:e,tree:a}=sc(e),a.type==="Err")return P(e,a);a=Zs(ae(t,e),[l,a.args[0]])}else{if({state:e,tree:a}=xt(e,n-1),a.type==="Err")return Ir(a.error)?P(e,oe(ae(t,e),Cg(r.val))):P(e,a);a=pg(ae(t,e),[l,a])}if(g>0){let w=ae(t,e);if(!f){let M=oe(w,Tg());return P(e,M)}a=ec(w,g,[a])}return P(e,a)}case"Log":{e=de(e);let l=ae(t,e),g=Ni(l,r.val),p=0,f,w,M=$t(e);if(M.type==="SupSub"&&(e=de(e),f=hv(M,e.opts),w=Id(M,e.opts),p=M.nprimes),f&&f.type==="Err")return P(e,f);if(w&&w.type==="Err")return P(e,w);let G=zt(e,"(");if(G){if({state:e,tree:a}=sc(e),a.type==="Err")return P(e,a);a=a.args[0]}else if({state:e,tree:a}=xt(e,n-1),a.type==="Err")return Ir(a.error)?P(e,oe(ae(t,e),Cg(r.val))):P(e,a);let R=f?Ni(l,"\\logbase"):g,ue=f?Cd(ae(t,e),Ut(a).concat(f)):a;if(w&&(R=Ed(ae(t,e),[R,w])),G?a=Zs(ae(t,e),[R,ue]):a=pg(ae(t,e),[R,ue]),p>0){let pe=ae(t,e);if(!G){let _e=oe(pe,Tg());return P(e,_e)}a=ec(pe,p,[a])}return P(e,a)}case"Int":{e=de(e);let l=$t(e);e=de(e);let g=Pg(l,t,e);if(g.type==="Err")return g.error.type==="MissingBound"?P(e,oe(g.span,Aw())):P(e,g);let{sup:p,sub:f}=g,w;if(zt(e,"Differential"))return{state:e,tree:w}=uv(e),w.type==="Err"?P(e,w):P(e,Jx(ae(t,e),[w,f,p]));if({state:e,tree:a}=xt(e,n),a.type==="Err")return Ir(a.error)?P(e,oe(a.span,Vw())):P(e,a);let M=a;return zt(e,"Differential")?({state:e,tree:w}=uv(e),w.type==="Err"?P(e,w):P(e,Yx(ae(t,e),[w,f,p,M]))):P(e,oe(ae(t,e),Iw()))}case"Sum":{e=de(e);let l=$t(e);e=de(e);let g=Pg(l,t,e);if(g.type==="Err")return g.error.type==="MissingBound"?P(e,oe(g.span,Dw())):P(e,g);let{sup:p,sub:f}=g;return{state:e,tree:a}=xt(e,n),a.type==="Err"?Ir(a.error)?P(e,oe(a.span,Lw())):P(e,a):P(e,Qx(ae(t,e),[a,f,p]))}case"Prod":{e=de(e);let l=$t(e);e=de(e);let g=Pg(l,t,e);if(g.type==="Err")return g.error.type==="MissingBound"?P(e,oe(g.span,Mw())):P(e,g);let{sup:p,sub:f}=g;return{state:e,tree:a}=xt(e,n),a.type==="Err"?Ir(a.error)?P(e,oe(a.span,Gw())):P(e,a):P(e,Xx(ae(t,e),[a,f,p]))}case"Cmd":return e=de(e),a=Ni(ae(t,e),r.val),P(e,a);case"TokenNode":{e=de(e);let l=$t(e);return l.type==="SupSub"&&l.sub?(e=de(e),P(e,oe(ae(t,e),qw()))):(a=Ni(ae(t,e),r.val),P(e,a))}case"Letter":return e=de(e),a=cw(ae(t,e),r.val),P(e,a);case"Decimal":{e=de(e);let l=Td(ae(t,e),r.val),g=e.token;if(g.type==="Decimal"||g.type==="MixedNumber"){let p=e;e=de(e);let f=ae(t,e),w=g.type==="MixedNumber"?g:Td(ae(p,e),g.val);return P(e,oe(f,Dg([l,w])))}return P(e,l)}case"MixedNumber":{if(e.opts.disallowFrac)throw Op();e=de(e);let l=e.token;if(l.type==="Decimal"||l.type==="MixedNumber"){let g=e;e=de(e);let p=ae(t,e),f=l.type==="MixedNumber"?l:Td(ae(g,e),l.val);return P(e,oe(p,Dg([r,f])))}return P(e,r)}case"*":case"\\cdot":case"\\times":case"/":case",":case"=":case">":case"<":case">=":case"<=":case"->":case"~":case":":case"...":case"%":case".":{e=de(e);let l=ae(t,e),g=oe(l,xw(r.val));return P(e,g)}case"for":{e=de(e);let l=ae(t,e),g=oe(l,Rw());return P(e,g)}case"with":{e=de(e);let l=ae(t,e),g=oe(l,bg());return P(e,g)}case"!":{e=de(e);let l=ae(t,e),g=oe(l,Eg(r.val));return P(e,g)}case"SupSub":{e=de(e);let l="supsub";r.sub?l="subscript":r.sup?l="superscript":r.nprimes>0&&(l="prime");let g=ae(t,e),p=oe(g,Eg(l));return P(e,p)}case")":case"\\}":case"]":case"|)":case"Differential":return Og(e);case"Err":{e=de(e);let l=ae(t,e),g=oe(l,kw(r.val));return P(e,g)}case"End":{let l=ae(t,e),g=oe(l,vg());return P(e,g)}default:throw`Unexpected token type ${r.type}.`}}function Q0(e,t,r){return zt(e,"=")&&r&&(rv(t)||Ig(t))}function X0(e,t,r){let n=$t(e),a;switch(n.type){case"+":case"-":case"*":case"\\cdot":case"\\times":case"/":case"=":case"~":case":":case".":case"->":case"for":{if(e=de(e),{state:e,tree:a}=xt(e,r),a.type==="Err")if(Ir(a.error)){let l=gt(t.span,e),g=oe(l,Ha(n.val));return P(e,g)}else return P(e,a);return P(e,dv(n.type,gt(t.span,e),[t,a]))}case"with":{if(e=de(e),{state:e,tree:a}=xt(e,r),a.type==="Err")if(Ir(a.error)){let l=gt(t.span,e),g=oe(l,Ha(n.val));return P(e,g)}else return P(e,a);return P(e,dv(n.type,gt(t.span,e),[t,a]))}case"%":{e=de(e);let l=$t(e);if(l.type!=="Cmd"||l.val!=="of"&&l.val!=="\\of"){let g=oe(n.span,Tw());return P(e,g)}if(e=de(e),{state:e,tree:a}=xt(e,r),a.type==="Err")if(Ir(a.error)){let g=gt(t.span,e),p=oe(g,Ha(n.val));return P(e,p)}else return P(e,a);return P(e,ow(gt(t.span,e),[t,a]))}case">=":case"<=":case">":case"<":{let l=n.type;if(e=de(e),{state:e,tree:a}=xt(e,r),a.type==="Err")if(Ir(a.error)){let w=gt(t.span,e),M=oe(w,Ha(n.val));return P(e,M)}else return P(e,a);let g=Xs(gt(t.span,e),l,[t,a]),p=[],f=$t(e).type;for(;f===">="||f==="<="||f===">"||f==="<";){let w=e;if(l=f,e=de(e),{state:e,tree:a}=xt(e,r),a.type==="Err")if(Ir(a.error)){let M=gt(t.span,e),G=oe(M,Ha(n.val));return P(e,G)}else return P(e,a);p.push(Gx(ae(w,e),l,[a])),f=$t(e).type}return p.length?P(e,Vx(gt(t.span,e),g,p)):P(e,g)}case"!":return e=de(e),P(e,Ux(gt(t.span,e),[t]));case"[":{let l=e;if(e=de(e),zt(e,"]")){e=de(e);let g=ae(l,e);return P(e,oe(g,fw()))}return{state:e,tree:a}=xt(e,r),{state:e,tree:a}=cc(l,e,a,"[","]"),a.type==="Err"?P(e,a):P(e,$x(gt(t.span,e),[t,a]))}case"Sqrt":case"Frac":case"Letter":case"Cmd":case"TokenNode":case"Trig":case"Ln":case"Log":case"Sum":case"Int":case"Prod":case"Decimal":case"MixedNumber":case"\\{":case"(|":return{state:e,tree:a}=xt(e,r),a.type==="Err"?P(e,a):P(e,yg(gt(t.span,e),[t,a]));case"(":if(Bt(t)){if({state:e,tree:a}=sc(e),a.type==="Err")return P(e,a);let l=gt(t.span,e);return P(e,Zs(l,[t,a.args[0]]))}else if(t.type==="Prime"&&Bt(t.args[0])){if({state:e,tree:a}=sc(e),a.type==="Err")return P(e,a);let l=gt(t.span,e);return P(e,ec(l,t.nprimes,[Zs(l,[t.args[0],a.args[0]])]))}else return{state:e,tree:a}=xt(e,r),a.type==="Err"?P(e,a):P(e,yg(gt(t.span,e),[t,a]));case"SupSub":{e=de(e);let l=mv(n),g=Id(n,e.opts);if(l&&l.type==="Err")return P(e,l);if(g&&g.type==="Err")return P(e,g);if(l&&(t=mg(gt(t.span,e),[t,l])),g&&(t=Ed(gt(t.span,e),[t,g])),n.nprimes>0){let p=gt(t.span,e);if(!Bt(t)){let f=oe(p,Sd());return P(e,f)}t=ec(p,n.nprimes,[t])}return P(e,t)}case",":{let l=[t];for(;zt(e,",")&&(e=de(e),!(zt(e,"...")||e.opts.trailingComma&&eD(e)));){if({state:e,tree:a}=xt(e,r),a.type==="Err")if(Ir(a.error)){let g=gt(t.span,e),p=oe(g,Ha(n.val));return P(e,p)}else return P(e,a);l.push(a)}return P(e,Cd(gt(t.span,e),l))}case"...":{if(e=de(e),zt(e,",")&&(e=de(e)),r>=Nd($t(e).type))return P(e,fg(gt(t.span,e),[t,tw(Lg(e))]));if({state:e,tree:a}=xt(e,r),a.type==="Err")if(Ir(a.error)){let l=gt(t.span,e),g=oe(l,Ha(n.val));return P(e,g)}else return P(e,a);return P(e,fg(gt(t.span,e),[t,a]))}case"]":case")":case"\\}":case"|)":case"Differential":return Og(e);case"Err":return xt(e,r);case"End":{let l=ae(e,e),g=oe(l,vg());return P(e,g)}default:throw`Unexpected token type ${n.type}.`}}function Z0(e){return!!(Bt(e)||e.type==="Prime"&&Bt(e.args[0]))}function dv(e,t,r){switch(e){case"+":return Ox(t,r);case"-":return Fx(t,r);case"*":return _x(t,r);case"\\cdot":return Rx(t,r);case"\\times":return qx(t,r);case"/":return Bx(t,r);case"=":return Lx(t,r);case"~":return Nx(t,r);case":":return rw(t,r);case".":return iw(t,r);case"->":return sw(t,r);case"for":return nw(t,r);case"with":return aw(t,r);default:throw`Unexpected token type ${e}.`}}function hv(e,t){if(!e.sub)return;let r=e.sub,n=Ya(Ca(r,t));return n.type==="Err"&&n.error.type==="EmptyGroup"?oe(n.span,xg()):n}function mv(e){if(!e.sub)return;let t=e.sub;if(t.args.length===0)return oe(t.span,xg());let r=[];for(let n of t.args)if(n.type==="Digit"||n.type==="Letter")r.push(n.val);else{let a=n.span;return oe(a,Ew(ar(a)))}return lw(t.span,r.join(""))}function Id(e,t){if(!e.sup)return;let r=Ya(Ca(e.sup,t));return r.type==="Err"?r.error.type==="EmptyGroup"?oe(r.span,mw()):r:e.nprimes>0?oe(e.span,Sw()):r}function Pg(e,t,r){if(e.type!=="SupSub"){let c=ae(t,r);return oe(c,Sg())}if(e.nprimes>0){let c=ae(t,r);return oe(c,Sd())}let n=hv(e,r.opts),a=Id(e,r.opts);if(!n||n.type==="Err"&&n.error.type==="EmptySubscript"||!a||a.type==="Err"&&a.error.type==="EmptySuperscript"){let c=ae(t,r);return oe(c,Sg())}return n.type==="Err"?n:a.type==="Err"?a:{type:"Bounds",sup:a,sub:n}}function sc(e){let t=e,r=$t(e),n=pv(r.type);if(zt(e,"("))e=de(e);else throw new Error("Programming Error: expected '(' at start of parseParen.");if(zt(e,")")){let c=Cd(Lg(e),[]);e=de(e);let l=ae(t,e);return P(e,gg(l,[c]))}let a;return{state:e,tree:a}=xt(e,n),{state:e,tree:a}=cc(t,e,a,"(",")"),a.type==="Err"?P(e,a):P(e,gg(ae(t,e),[a]))}function uv(e){let t=e,r=$t(e);if(r.type!=="Differential")throw new Error("Programming Error: expected differential");e=de(e);let n=Ni(r.span,r.val),a=$t(e);if(a.type==="SupSub"){e=de(e);let c=ae(t,e),l=mv(a);if(l){if(l.type==="Err")return P(e,l);n=mg(c,[n,l])}if(a.sup)return P(e,oe(c,Pw()));if(a.nprimes>0)return P(e,oe(c,Sd()))}return P(e,n)}function cc(e,t,r,n,a){if(r.type==="Err"&&r.error.type!=="UnexpectedEnd")return P(t,r);if(r.type==="Err"||!zt(t,a)){let c=ae(e,t),l=oe(c,ww(n,a));return P(t,l)}return t=de(t),P(t,r)}function Og(e){let t=e;switch($t(e).type){case")":{e=de(e);let n=ae(t,e);return P(e,oe(n,tc("(",")")))}case"]":{e=de(e);let n=ae(t,e);return P(e,oe(n,tc("[","]")))}case"\\}":{e=de(e);let n=ae(t,e);return P(e,oe(n,tc("\\{","\\}")))}case"|)":{e=de(e);let n=ae(t,e);return P(e,oe(n,tc("|","|")))}case"Differential":{e=de(e);let n=ae(t,e);return P(e,oe(n,vw()))}default:{e=de(e);let n=ae(t,e);return P(e,oe(n,bg()))}}}function eD(e){return zt(e,")")||zt(e,"]")||zt(e,"\\}")}var Jn=class extends Ra{constructor(r,n){if(!Array.isArray(r))throw new TypeError("Argument to expression constructor must be an Array.");super();this.args=r,(!n||!n.skipRegisterDependencies)&&this.registerDependencies()}shouldExportAns(){return!0}registerDependencies(){for(var r=0;r<this.args.length;r++)this.mergeDependencies(this.args[r])}copyWithArgs(r){return new this.constructor(r)}};var Qn=class extends Jn{constructor(r){super([]);this.isConstant=!0;typeof r=="number"&&(r=Qe(r,1)),this._constantValue=r}asValue(){let r=this._constantValue;return typeof r=="boolean"?r:ze(r)}asCompilerValue(){return this._constantValue}scalarExprString(){return this.asValue()>0?String(this.asValue()):"("+String(this.asValue())+")"}getEvaluationInfo(){return[{val:this.asValue()}]}isNaN(){let r=this.asValue();return typeof r=="number"&&isNaN(r)}};var lc=class extends Jn{constructor(r){super([]);this._symbol=fp(r),this._errorSymbol=this._symbol,this.addDependency(this._symbol)}setInputSpan(r){super.setInputSpan(r),this._errorSymbol=fp(this.getInputString())}getInputSpan(){return this._inputSpan===void 0?wr(this._symbol,0,this._symbol.length):this._inputSpan}};function nD(e){switch(e){case"default":case"trig":case"inverseTrig":case"trig2":case"never-broadcast":return[V];case"reducer":return[mt];case"doubleReducer":return[mt,mt];case"parameterizedReducer":return[mt,V];case"color":return[V,V,V]}}function aD(e){switch(e){case"default":case"trig":case"inverseTrig":case"trig2":case"doubleReducer":case"color":case"never-broadcast":return!1;case"reducer":case"parameterizedReducer":return!0}}function iD(e,t,r){return e==="reducer"?1/0:t+r}function D(e,t,r){var w,M,G,R,ue;let n=(w=r==null?void 0:r.tag)!=null?w:"default",a=(M=r==null?void 0:r.argumentTypes)!=null?M:nD(n),c=r!=null&&r.defaultArguments?r.defaultArguments.length:0,l=a.length-c,g=iD(n,l,c),p=(G=r==null?void 0:r.allowDotCall)!=null?G:aD(n),f=(R=r==null?void 0:r.noPeel)!=null?R:!1;return{module:e,symbol:t,argumentTypes:a,defaultArguments:r==null?void 0:r.defaultArguments,returnType:(ue=r==null?void 0:r.returnType)!=null?ue:V,tag:n,minArity:l,maxArity:g,allowDotCall:p,noPeel:f}}function qg(e){if(!At(e))throw new Error("Programming Error: numeric constants should be rational");return{type:1,valueType:V,value:e}}var Oi=qg(Qe(0,1)),Fi=qg(Qe(1,1)),Rg=qg(Qe(1,2));function yv(e){let t;return e in dc&&(t=dc[e].tag),t==="trig"||t==="trig2"||t==="inverseTrig"?!0:e==="angle"||e==="angles"||e==="directedangle"||e==="directedangles"||e==="rotate"}var dc={sin:D("BuiltIn","sin",{tag:"trig"}),cos:D("BuiltIn","cos",{tag:"trig"}),tan:D("BuiltIn","tan",{tag:"trig"}),cot:D("BuiltIn","cot",{tag:"trig"}),sec:D("BuiltIn","sec",{tag:"trig"}),csc:D("BuiltIn","csc",{tag:"trig"}),arcsin:D("Math","asin",{tag:"inverseTrig"}),arccos:D("Math","acos",{tag:"inverseTrig"}),arctan:D("Math","atan2",{argumentTypes:[V,V],defaultArguments:[Fi],tag:"inverseTrig"}),arccot:D("BuiltIn","acot",{tag:"inverseTrig"}),arcsec:D("BuiltIn","asec",{tag:"inverseTrig"}),arccsc:D("BuiltIn","acsc",{tag:"inverseTrig"}),sinh:D("BuiltIn","sinh"),cosh:D("BuiltIn","cosh"),tanh:D("BuiltIn","tanh"),coth:D("BuiltIn","coth"),sech:D("BuiltIn","sech"),csch:D("BuiltIn","csch"),arcsinh:D("BuiltIn","asinh"),arccosh:D("BuiltIn","acosh"),arctanh:D("BuiltIn","atanh"),arccoth:D("BuiltIn","acoth"),arcsech:D("BuiltIn","asech"),arccsch:D("BuiltIn","acsch"),sqrt:D("Math","sqrt"),rtxsqpone:D("BuiltIn","sqrtxsqp1"),rtxsqmone:D("BuiltIn","sqrtxsqm1"),nthroot:D("BuiltIn","nthroot",{argumentTypes:[V,V]}),hypot:D("BuiltIn","hypot",{argumentTypes:[V,V]}),log:D("BuiltIn","common_log"),logbase:D("BuiltIn","log_base",{argumentTypes:[V,V]}),ln:D("BuiltIn","log"),exp:D("Math","exp"),floor:D("Math","floor"),ceil:D("Math","ceil"),round:D("Math","round"),abs:D("Math","abs"),sign:D("BuiltIn","sign"),mod:D("BuiltIn","mod",{argumentTypes:[V,V]}),nCr:D("BuiltIn","nCr",{argumentTypes:[V,V]}),nPr:D("BuiltIn","nPr",{argumentTypes:[V,V]}),factorial:D("BuiltIn","factorial"),polyGamma:D("BuiltIn","polyGamma",{argumentTypes:[V,V]}),lcm:D("BuiltIn","listLCM",{tag:"reducer"}),gcd:D("BuiltIn","listGCD",{tag:"reducer"}),distance:D("BuiltIn","distance",{argumentTypes:[J,J]}),polygon:D("BuiltIn","polygon",{tag:"reducer",argumentTypes:[Hr],returnType:_t}),area:D("BuiltIn","polygonArea",{argumentTypes:[_t]}),perimeter:D("BuiltIn","polygonPerimeter",{argumentTypes:[_t]}),pointDet:D("BuiltIn","pointDet",{argumentTypes:[J,J]}),pointDot:D("BuiltIn","pointDot",{argumentTypes:[J,J]}),pointPerp:D("BuiltIn","pointPerp",{argumentTypes:[J],returnType:J}),segment:D("BuiltIn","segment",{argumentTypes:[J,J],returnType:ut}),line:D("BuiltIn","line",{argumentTypes:[J,J],returnType:qe}),ray:D("BuiltIn","ray",{argumentTypes:[J,J],returnType:Et}),vector:D("BuiltIn","vector",{argumentTypes:[J,J],returnType:Xt}),vectorThreeD:D("BuiltIn","vectorThreeD",{argumentTypes:[je,je],returnType:Yr}),mathVector:D("BuiltIn","mathVector",{argumentTypes:[J,J],returnType:Xt}),mathVectorThreeD:D("BuiltIn","mathVectorThreeD",{argumentTypes:[je,je],returnType:Yr}),vectorDisplacementAsPoint:D("BuiltIn","vectorDisplacementAsPoint",{argumentTypes:[Xt],returnType:J}),vectorThreeDDisplacementAsPoint:D("BuiltIn","vectorThreeDDisplacementAsPoint",{argumentTypes:[Yr],returnType:je}),basePointFromVector:D("BuiltIn","basePointFromVector",{argumentTypes:[Xt],returnType:J}),basePointFromVectorThreeD:D("BuiltIn","basePointFromVectorThreeD",{argumentTypes:[Yr],returnType:je}),circle:D("BuiltIn","circle",{argumentTypes:[J,V],returnType:tt}),center:D("BuiltIn","center",{argumentTypes:[tt],returnType:J,allowDotCall:!0}),radius:D("BuiltIn","radius",{argumentTypes:[tt],returnType:V,allowDotCall:!0}),arc:D("BuiltIn","arc",{argumentTypes:[J,J,J],returnType:nt}),arcCenter:D("BuiltIn","arcCenter",{argumentTypes:[nt],returnType:J}),arcOmega:D("BuiltIn","arcOmega",{argumentTypes:[nt],returnType:V}),undirectedAngleMarker:D("BuiltIn","undirectedAngleMarker",{argumentTypes:[vt],returnType:Rt}),directedAngleMarker:D("BuiltIn","directedAngleMarker",{argumentTypes:[J,V,V,V],returnType:vt}),directedCoterminalAngle:D("BuiltIn","directedCoterminalAngle",{argumentTypes:[vt],returnType:vt}),undirectedCoterminalAngle:D("BuiltIn","undirectedCoterminalAngle",{argumentTypes:[Rt],returnType:Rt}),supplement:D("BuiltIn","supplementAngle",{argumentTypes:[vt],returnType:vt}),directedAngleMarkerRawDelta:D("BuiltIn","angleMarkerRawDelta",{argumentTypes:[vt],returnType:V}),undirectedAngleMarkerRawDelta:D("BuiltIn","angleMarkerRawDelta",{argumentTypes:[Rt],returnType:V}),directedAngleMarkerMultiplier:D("BuiltIn","angleMarkerMultiplier",{argumentTypes:[vt],returnType:V}),undirectedAngleMarkerMultiplier:D("BuiltIn","angleMarkerMultiplier",{argumentTypes:[Rt],returnType:V}),polygonInteriorUndirectedAngles:D("BuiltIn","polygonInteriorUndirectedAngles",{argumentTypes:[_t,V],returnType:fa,allowDotCall:!0,tag:"never-broadcast"}),polygonInteriorDirectedAngles:D("BuiltIn","polygonInteriorDirectedAngles",{argumentTypes:[_t,V],returnType:ya,allowDotCall:!0,tag:"never-broadcast"}),vertices:D("BuiltIn","vertices",{argumentTypes:[_t],returnType:Hr,allowDotCall:!0,tag:"never-broadcast"}),segments:D("BuiltIn","polygonEdges",{argumentTypes:[_t],returnType:ma,allowDotCall:!0,tag:"never-broadcast"}),scaleTangentSegment:D("BuiltIn","scaleTangentSegment",{argumentTypes:[ut,V],returnType:ut}),scaleTangentLine:D("BuiltIn","scaleTangentLine",{argumentTypes:[qe,V],returnType:qe}),scaleTangentRay:D("BuiltIn","scaleTangentRay",{argumentTypes:[Et,V],returnType:Et}),scaleTangentCircle:D("BuiltIn","scaleTangentCircle",{argumentTypes:[tt,V],returnType:tt}),scaleTangentArc:D("BuiltIn","scaleTangentArc",{argumentTypes:[nt,V],returnType:tt}),scaleTangentDirectedAngleMarker:D("BuiltIn","scaleTangentAngle",{argumentTypes:[vt,V],returnType:vt}),scaleTangentUndirectedAngleMarker:D("BuiltIn","scaleTangentAngle",{argumentTypes:[Rt,V],returnType:Rt}),addTangentSegment:D("BuiltIn","addTangentSegment",{argumentTypes:[ut,ut],returnType:ut}),addTangentSegmentThreeD:D("BuiltIn","addTangentSegmentThreeD",{argumentTypes:[jr,jr],returnType:jr}),addTangentLine:D("BuiltIn","addTangentLine",{argumentTypes:[qe,qe],returnType:qe}),addTangentRay:D("BuiltIn","addTangentRay",{argumentTypes:[Et,Et],returnType:Et}),addTangentCircle:D("BuiltIn","addTangentCircle",{argumentTypes:[tt,tt],returnType:tt}),addTangentArc:D("BuiltIn","addTangentArc",{argumentTypes:[nt,nt],returnType:nt}),addTangentDirectedAngleMarker:D("BuiltIn","addTangentAngle",{argumentTypes:[vt,vt],returnType:vt}),addTangentUndirectedAngleMarker:D("BuiltIn","addTangentAngle",{argumentTypes:[Rt,Rt],returnType:Rt}),segmentGlider:D("BuiltIn","segmentGlider",{argumentTypes:[ut,V],returnType:J}),segmentThreeDGlider:D("BuiltIn","segmentThreeDGlider",{argumentTypes:[jr,V],returnType:je}),lineGlider:D("BuiltIn","lineGlider",{argumentTypes:[qe,V],returnType:J}),rayGlider:D("BuiltIn","rayGlider",{argumentTypes:[Et,V],returnType:J}),circleGlider:D("BuiltIn","circleGlider",{argumentTypes:[tt,V],returnType:J}),arcGlider:D("BuiltIn","arcGlider",{argumentTypes:[nt,V],returnType:J}),polygonGlider:D("BuiltIn","polygonGlider",{argumentTypes:[_t,V],returnType:J}),chooseNonIncidentPoint:D("BuiltIn","chooseNonIncidentPoint",{argumentTypes:[J,J,J],returnType:J}),circleCircleIntersection:D("BuiltIn","circleCircleIntersection",{argumentTypes:[tt,tt,V],returnType:J}),circleArcIntersection:D("BuiltIn","circleArcIntersection",{argumentTypes:[tt,nt,V],returnType:J}),circleLineIntersection:D("BuiltIn","circleLineIntersection",{argumentTypes:[tt,qe,V],returnType:J}),arcCircleIntersection:D("BuiltIn","arcCircleIntersection",{argumentTypes:[nt,tt,V],returnType:J}),arcArcIntersection:D("BuiltIn","arcArcIntersection",{argumentTypes:[nt,nt,V],returnType:J}),arcLineIntersection:D("BuiltIn","arcLineIntersection",{argumentTypes:[nt,qe,V],returnType:J}),lineCircleIntersection:D("BuiltIn","lineCircleIntersection",{argumentTypes:[qe,tt,V],returnType:J}),lineArcIntersection:D("BuiltIn","lineArcIntersection",{argumentTypes:[qe,nt,V],returnType:J}),lineLineIntersection:D("BuiltIn","lineLineIntersection",{argumentTypes:[qe,qe,V],returnType:J}),lineFromSegment:D("BuiltIn","identity",{argumentTypes:[ut],returnType:qe}),lineFromRay:D("BuiltIn","identity",{argumentTypes:[Et],returnType:qe}),parallel:D("BuiltIn","parallel",{argumentTypes:[qe,J],returnType:qe}),perpendicular:D("BuiltIn","perpendicular",{argumentTypes:[qe,J],returnType:qe}),translation:D("BuiltIn","translation",{argumentTypes:[J],returnType:st}),dilation:D("BuiltIn","dilation",{argumentTypes:[J,V],returnType:st}),rotation:D("BuiltIn","rotation",{tag:"trig2",argumentTypes:[J,V],returnType:st}),reflection:D("BuiltIn","reflection",{argumentTypes:[qe],returnType:st}),compose:D("BuiltIn","composeTransformation",{argumentTypes:[st,st],returnType:st}),inverse:D("BuiltIn","invertTransformation",{argumentTypes:[st],returnType:st}),transformPoint:D("BuiltIn","transformPoint",{argumentTypes:[st,J],returnType:J}),transformSegment:D("BuiltIn","transformSegment",{argumentTypes:[st,ut],returnType:ut}),transformLine:D("BuiltIn","transformLine",{argumentTypes:[st,qe],returnType:qe}),transformRay:D("BuiltIn","transformRay",{argumentTypes:[st,Et],returnType:Et}),transformVector:D("BuiltIn","transformVector",{argumentTypes:[st,Xt],returnType:Xt}),transformCircle:D("BuiltIn","transformCircle",{argumentTypes:[st,tt],returnType:tt}),transformArc:D("BuiltIn","transformArc",{argumentTypes:[st,nt],returnType:nt}),transformPolygon:D("BuiltIn","transformPolygon",{argumentTypes:[st,_t],returnType:_t}),transformAngleMarker:D("BuiltIn","transformAngleMarker",{argumentTypes:[st,Rt],returnType:Rt}),transformDirectedAngleMarker:D("BuiltIn","transformAngleMarker",{argumentTypes:[st,vt],returnType:vt}),distanceThreeD:D("BuiltIn","distanceThreeD",{argumentTypes:[je,je]}),segmentThreeD:D("BuiltIn","segmentThreeD",{argumentTypes:[je,je],returnType:jr}),triangle:D("BuiltIn","triangle",{argumentTypes:[je,je,je],returnType:wi}),sphere:D("BuiltIn","sphere",{argumentTypes:[je,V],returnType:vi}),mean:D("BuiltIn","mean",{tag:"reducer"}),total:D("BuiltIn","total",{tag:"reducer"}),stdev:D("BuiltIn","stdev",{tag:"reducer"}),stdevp:D("BuiltIn","stdevp",{tag:"reducer"}),mad:D("BuiltIn","mad",{tag:"reducer"}),count:D("BuiltIn","listLength",{tag:"reducer",argumentTypes:[Fr],noPeel:!0}),min:D("BuiltIn","listMin",{tag:"reducer"}),max:D("BuiltIn","listMax",{tag:"reducer"}),argmin:D("BuiltIn","argMin",{tag:"reducer",noPeel:!0}),argmax:D("BuiltIn","argMax",{tag:"reducer",noPeel:!0}),median:D("BuiltIn","median",{tag:"reducer"}),var:D("BuiltIn","variance",{tag:"reducer"}),varp:D("BuiltIn","varp",{tag:"reducer"}),cov:D("BuiltIn","cov",{tag:"doubleReducer"}),covp:D("BuiltIn","covp",{tag:"doubleReducer"}),corr:D("BuiltIn","corr",{tag:"doubleReducer"}),spearman:D("BuiltIn","spearman",{tag:"doubleReducer"}),quantile:D("BuiltIn","quantile",{tag:"parameterizedReducer"}),quartile:D("BuiltIn","quartile",{tag:"parameterizedReducer"}),upperQuantileIndex:D("BuiltIn","upperQuantileIndex",{tag:"parameterizedReducer"}),lowerQuantileIndex:D("BuiltIn","lowerQuantileIndex",{tag:"parameterizedReducer"}),quartileIndex:D("BuiltIn","quartileIndex",{tag:"parameterizedReducer"}),upperQuartileIndex:D("BuiltIn","upperQuartileIndex",{tag:"parameterizedReducer"}),lowerQuartileIndex:D("BuiltIn","lowerQuartileIndex",{tag:"parameterizedReducer"}),normalcdf:D("BuiltIn","normalcdf",{argumentTypes:[V,V,V,V],defaultArguments:[Oi,Fi]}),normalpdf:D("BuiltIn","normalpdf",{argumentTypes:[V,V,V],defaultArguments:[Oi,Fi]}),binomcdf:D("BuiltIn","binomcdf",{argumentTypes:[V,V,V,V],defaultArguments:[Rg]}),binompdf:D("BuiltIn","binompdf",{argumentTypes:[V,V,V],defaultArguments:[Rg]}),poissoncdf:D("BuiltIn","poissoncdf",{argumentTypes:[V,V,V]}),poissonpdf:D("BuiltIn","poissonpdf",{argumentTypes:[V,V,V]}),uniformcdf:D("BuiltIn","uniformcdf",{argumentTypes:[V,V,V,V],defaultArguments:[Oi,Fi]}),uniformpdf:D("BuiltIn","uniformpdf",{argumentTypes:[V,V,V],defaultArguments:[Oi,Fi]}),invT:D("BuiltIn","invT",{argumentTypes:[V,V]}),invPoisson:D("BuiltIn","invPoisson",{argumentTypes:[V,V]}),invBinom:D("BuiltIn","invBinom",{argumentTypes:[V,V,V]}),invUniform:D("BuiltIn","invUniform",{argumentTypes:[V,V,V]}),tpdf:D("BuiltIn","tpdf",{argumentTypes:[V,V]}),tcdf:D("BuiltIn","tcdf",{argumentTypes:[V,V,V]}),erf:D("BuiltIn","erf"),invNorm:D("BuiltIn","invNorm"),tscore:D("BuiltIn","tscore",{tag:"parameterizedReducer",defaultArguments:[Oi]}),normalSample:D("BuiltIn","normalSample",{argumentTypes:[Qt,V,V]}),uniformSample:D("BuiltIn","uniformSample",{argumentTypes:[Qt,V,V]}),tSample:D("BuiltIn","tSample",{argumentTypes:[Qt,V]}),poissonSample:D("BuiltIn","poissonSample",{argumentTypes:[Qt,V]}),binomSample:D("BuiltIn","binomSample",{argumentTypes:[Qt,V,V]}),rgb:D("BuiltIn","rgb",{returnType:_a,tag:"color"}),hsv:D("BuiltIn","hsv",{returnType:_a,tag:"color"}),validateRangeLength:D("BuiltIn","validateRangeLength",{returnType:V,argumentTypes:[mt,mt,V,V],tag:"never-broadcast",noPeel:!0}),validateSampleCount:D("BuiltIn","validateSampleCount",{returnType:V,argumentTypes:[V]}),select:D("BuiltIn","select",{argumentTypes:[Fr,ha],returnType:e=>e[0],tag:"never-broadcast",noPeel:!0}),shuffle:D("BuiltIn","shuffle",{argumentTypes:[Qt,Fr],returnType:e=>e[1],tag:"never-broadcast"}),sortPerm:D("BuiltIn","sortPerm",{argumentTypes:[mt],returnType:mt,tag:"never-broadcast",noPeel:!0}),elementsAt:D("BuiltIn","elementsAt",{argumentTypes:[Fr,mt],returnType:e=>e[0],tag:"never-broadcast",noPeel:!0}),uniquePerm:D("BuiltIn","uniquePerm",{argumentTypes:[Fr],returnType:mt,tag:"never-broadcast",noPeel:!0})};function fe(e,t){var ue,pe,_e,$e,Le;let r=t==null?void 0:t.defaultArguments,n=1/0,a=0,c=(ue=r==null?void 0:r.length)!=null?ue:0;t!=null&&t.noBroadcast||(e=e.map(ki));for(let Re of e){let Je=ty(Re)-c;Je<n&&(n=Je);let It=ry(Re);It>a&&(a=It)}let l=(pe=t==null?void 0:t.fallthroughUnlessDistribution)!=null?pe:!1,g=(_e=t==null?void 0:t.allowDotCall)!=null?_e:!1,p=($e=t==null?void 0:t.isSeeded)!=null?$e:!1,f=t==null?void 0:t.minArityExampleArgs,w=t==null?void 0:t.maxArityExampleArgs,M=t==null?void 0:t.dotMinArityExampleArgs,G=t==null?void 0:t.dotMaxArityExampleArgs,R=(Le=t==null?void 0:t.noPeel)!=null?Le:!1;return{minArity:n,argumentTypes:e,maxArity:a,defaultArguments:r,fallthroughUnlessDistribution:l,minArityExampleArgs:f,maxArityExampleArgs:w,dotMinArityExampleArgs:M,dotMaxArityExampleArgs:G,allowDotCall:g,isSeeded:p,noPeel:R}}function Vn(){return fe([{type:"variadic",initial:[],rest:gn}],{})}var Pd={meta:"union",types:[ut,tt,qe,Et,nt]},Fg={meta:"union",types:[ut,qe,Et,Xt]},Ho={meta:"union",types:[J,ut,tt,qe,Et,Xt,nt,_t,Rt,vt,st]},_g={meta:"union",types:[...Ei.filter(e=>e!==Wn),Ar]},Bg={midpoint:fe([[J,J],[je,je],[ut],[jr]],{allowDotCall:!0}),segment:fe([[J,J],[je,je]]),vector:fe([[J,J],[je,je]]),distance:fe([[J,J],[je,je]]),glider:fe([[{meta:"union",types:[ut,tt,qe,Et,nt,_t]},V]]),circle:fe([[J,ut],[J,J],[J,V]],{}),center:fe([[tt],[nt]],{allowDotCall:!0}),radius:fe([[tt],[nt]],{allowDotCall:!0}),intersection:fe([[Pd,Pd]]),strictintersection:fe([[Pd,Pd]]),parallel:fe([[Fg,J]]),perpendicular:fe([[Fg,J]]),start:fe([[Xt],[Yr]],{allowDotCall:!0}),end:fe([[Xt],[Yr]],{allowDotCall:!0}),length:fe([[{meta:"union",types:Ei}],ki([jr]),ki([Yr]),ki([ut]),ki([nt]),{type:"variadic",initial:[gn],rest:gn}],{allowDotCall:!0,noBroadcast:!0,noPeel:!0}),translate:fe([[Ho,Xt],[Ho,J,J]]),dilate:fe([[Ho,J,V]]),rotate:fe([[Ho,J,V]]),reflect:fe([[Ho,Fg]]),apply:fe([[st,Ho]]),points:fe([]),lines:fe([]),circles:fe([]),arcs:fe([]),polygons:fe([]),rays:fe([]),vectors:fe([]),angle:fe([[J,J,J]]),directedangle:fe([[J,J,J]]),angles:fe([[_t]],{allowDotCall:!0}),directedangles:fe([[_t]],{allowDotCall:!0}),coterminal:fe([[Rt],[vt]]),round:fe([[V],[V,V]]),sort:fe([[mt],[{meta:"union",types:Ei},mt]],{minArityExampleArgs:"([3,2,1])",maxArityExampleArgs:"([1,2,3],[3,2,1])",dotMaxArityExampleArgs:"([3,4])",allowDotCall:!0}),shuffle:fe([[Qt,{meta:"union",types:Ei}],[Qt,{meta:"union",types:Ei},V]],{minArityExampleArgs:"([1,2,3])",maxArityExampleArgs:"([1,2,3],2)",dotMaxArityExampleArgs:"(2)",allowDotCall:!0,isSeeded:!0,noBroadcast:!0}),join:fe([{type:"variadic",initial:[gn,gn],rest:gn}],{minArityExampleArgs:"([1,2],[3,4])",dotMinArityExampleArgs:"([3,4])",allowDotCall:!0}),unique:fe([[{meta:"union",types:Ei.filter(e=>e!==Wn&&e!==Fr)}]],{minArityExampleArgs:"([1,2,3])",maxArityExampleArgs:"([1,2,3])",allowDotCall:!0}),normaldist:fe([[V,V]],{defaultArguments:[Oi,Fi]}),tdist:fe([[V]]),binomialdist:fe([[V,V]],{defaultArguments:[Rg]}),poissondist:fe([[V]]),uniformdist:fe([[V,V]],{defaultArguments:[Oi,Fi]}),pdf:fe([[Ar,V]],{allowDotCall:!0}),cdf:fe([[Ar,V],[Ar,V,V]],{allowDotCall:!0}),median:fe([[Ar]],{fallthroughUnlessDistribution:!0,allowDotCall:!0}),stdev:fe([[Ar]],{fallthroughUnlessDistribution:!0,allowDotCall:!0}),var:fe([[Ar]],{fallthroughUnlessDistribution:!0,allowDotCall:!0}),quantile:fe([[Ar,V]],{fallthroughUnlessDistribution:!0,allowDotCall:!0,minArityExampleArgs:"([1,2,3], 1)",maxArityExampleArgs:"([1,2,3], 1)",dotMinArityExampleArgs:"(x)",dotMaxArityExampleArgs:"(x)"}),random:fe([[Qt],[Qt,V],[Qt,V,V],[Qt,_g],[Qt,_g,V],[Qt,_g,V,V]],{allowDotCall:!0,isSeeded:!0,noBroadcast:!0}),polygon:fe([{type:"variadic",initial:[],rest:J},[Hr],[mt,mt],[V,mt],[mt,V]]),total:fe([V,J,je].map(fv),{allowDotCall:!0}),mean:fe([[Ar],...[V,J,je].map(fv)],{allowDotCall:!0}),histogram:Vn(),dotplot:Vn(),boxplot:Vn(),ttest:Vn(),ittest:Vn(),stats:Vn(),det:Vn(),inv:Vn(),transpose:Vn(),rref:Vn(),trace:Vn()};function fv(e){return ki({type:"variadic",initial:[e],rest:e})}var Od=class extends Jn{constructor(r,n){super(n,{skipRegisterDependencies:!0});typeof r=="string"&&(r=new lc(r)),this._identifier=r,this._symbol=r._symbol,this._errorSymbol=r._errorSymbol==="logbase"?"log":r._errorSymbol,this.registerDependencies()}registerDependencies(){this.addDependency(this._symbol),super.registerDependencies(),yv(this._symbol)&&this.addDependency("trigAngleMultiplier")}copyWithArgs(r){return new this.constructor(new lc(this._symbol),r)}};var Fd=class extends Jn{};var _d={pi:new Qn(Math.PI),tau:new Qn(2*Math.PI),e:new Qn(Math.E),trigAngleMultiplier:new Qn(Qe(1,1)),infty:new Qn(1/0),identityTransformation:new Od("translation",[new Fd([new Qn(0),new Qn(0)])])};var Rd=class extends Ra{constructor(){super(...arguments);this.isFunction=!0}},Xn,Ja={};for(Xn in _d)_d.hasOwnProperty(Xn)&&(Ja[Xn]=_d[Xn]);for(Xn in dc)dc.hasOwnProperty(Xn)&&(Ja[Xn]=new Rd);for(Xn in Bg)Bg.hasOwnProperty(Xn)&&(Ja[Xn]=new Rd);function bv(e){return e=e.replace(/\\operatorname\{(.*)\}/,"$1"),e.replace(/[{}\\]/g,"")}var sD={Constant:e=>ld(e),MixedNumber:e=>ld(e),Identifier:e=>dd(bv(e)),FunctionCall:function(e,t){let r;return typeof e=="string"?r=bv(e):r=e.symbol,Zp(r,t)},FunctionExponent:function(e){return jb(e[0].symbol,e.slice(1))},Add:Yb,Subtract:Jb,Multiply:Bo,DotMultiply:Bo,CrossMultiply:Bo,Divide:Qb,Exponent:ud,Negative:Xb,And:()=>{throw Si()},Ans:()=>{throw Co("ans")},Assignment:()=>{throw sb()},CoordinateEquation:()=>{throw Ye()},Comparator:{"<":()=>{throw Si()},">":()=>{throw Si()},"<=":()=>{throw Si()},">=":()=>{throw Si()},"=":()=>{throw Pp()}},Derivative:()=>{throw Ye()},DoubleInequality:()=>{throw Si()},Equation:()=>{throw Pp()},FunctionDefinition:()=>{throw tb()},Integral:()=>{throw Ye()},List:()=>{throw Ye()},ListAccess:()=>{throw Ye()},ParenSeq:()=>{throw nb()},NamedCoordinateAccess:()=>{throw Ye()},Norm:()=>{throw Nl("abs")},Piecewise:()=>{throw Ye()},Prime:()=>{throw Ye()},Product:()=>{throw Ye()},Range:()=>{throw Ye()},Regression:()=>{throw rb()},Sum:()=>{throw Ye()},DotAccess:()=>{throw Ye()},Histogram:function(){throw Ye()},DotPlot:function(){throw Ye()},BoxPlot:function(){throw Ye()},TTest:function(){throw Ye()},IndependentTTest:function(){throw Ye()},Stats:function(){throw Ye()},PercentOf:function(){throw Ye()},FunctionFactorial:function(){throw Ye()},SeededFunctionCall:function(){throw Ye()},BareSeq:function(){throw Ye()},AssignmentExpression:function(){throw Ye()},ListComprehension:function(){throw Ye()},Substitution:function(){throw Ye()},UpdateRule:function(){throw Ye()},Seed:function(){throw Ye()},ExtendSeed:function(){throw Ye()}};function cD(e,t){return e}function lD(){throw new Error("Programming error: function 'sample' not implemented in the matrix calculator.")}function $g(e){let t=Dx(e),r=gv(t);return ev({nodes:sD,setInput:cD,nextSeed:lD,allowIndex:!1,allowDt:!1,writeIntegral:!1},r)}function zg(e){let t=[];for(let r of e){let n=[];for(let a of r)a===""?n.push(ld(Qe(0,1))):n.push($g(a));t.push(n)}return Hb(t)}var dD={canDefine:e=>/^[A-F]$/.test(e)};function wv(){return{frame:{},policy:dD}}function qd(e){throw new Error("Unexpected object: "+e)}var Ug={add:[[["number","number"],"number","nadd"],[["matrix","matrix"],"matrix","add"]],sub:[[["number","number"],"number","nsub"],[["matrix","matrix"],"matrix","sub"]],mul:[[["number","number"],"number","nmul"],[["number","matrix"],"matrix","leftScale"],[["matrix","number"],"matrix","rightScale"],[["matrix","matrix"],"matrix","mul"]],div:[[["number","number"],"number","ndiv"],[["matrix","number"],"matrix","div"]],pow:[[["number","number"],"number","npow"],[["matrix","number"],"matrix","pow"]],sqrt:[[["number"],"number","nsqrt"]],neg:[[["number"],"number","nneg"],[["matrix"],"matrix","neg"]],inv:[[["matrix"],"matrix","inv"]],det:[[["matrix"],"number","det"]],trace:[[["matrix"],"number","trace"]],transpose:[[["matrix"],"matrix","transpose"]],rref:[[["matrix"],"matrix","rref"]]};function xv(e,t){for(let r=0;r<e.length;r++){if(t.length!==e[r][0].length)continue;let n=!0;for(let a=0;a<t.length;a++)if(t[a].valueType!==e[r][0][a]){n=!1;break}if(n)return e[r]}}function uD(e){var t=e[0][0].length;for(let r=1;r<e.length;r++)if(e[r][0].length!==t)return-1;return t}function vv(e){switch(e){case"matrix":return Ve("shared-calculator-label-value-type-matrix");case"number":return Ve("shared-calculator-label-value-type-number");default:return qd(e)}}function _i(e){return e.map(t=>vv(t.valueType))}function Nn(e,t){switch(t.type){case"constant":return Zb(t.value);case"matrix":{let r=t.elements.map(n=>n.map(a=>Nn(e,a)));return r.forEach(n=>n.forEach(a=>{if(a.valueType!=="number")throw gb([vv(a.valueType)])})),ex(r)}case"op":{if(t.symbol==="pow"&&t.args.length===2){let c=Nn(e,t.args[0]),l=t.args[1];if(c.valueType==="matrix"&&l.type==="identifier"&&l.symbol==="T")return pd("transpose",[c],"matrix")}let r=t.args.map(c=>Nn(e,c)),n=Ug[t.symbol],a=xv(n,r);if(!a){let c=t.symbol;switch(c){case"add":throw iy(_i(r));case"sub":throw oy(_i(r));case"mul":throw sy(_i(r));case"div":throw cy(_i(r));case"pow":throw ly(_i(r));case"neg":throw dy(_i(r));default:return qd(c)}}return pd(a[2],r,a[1])}case"functionCall":{let r=Ug[t.symbol];if(!r){if(t.args.length===1)return Nn(e,Bo([dd(t.symbol),t.args[0]]));throw e.frame[t.symbol]?qy(t.symbol):Ja[t.symbol]&&Ja[t.symbol].isFunction?Nl(t.symbol):Fy(t.symbol)}let n=t.args.map(c=>Nn(e,c)),a=xv(r,n);if(!a){let c=uD(r);throw c>=0&&c!==n.length?Vl(t.symbol,c,n.length):uy(t.symbol,_i(n))}return pd(a[2],n,a[1])}case"functionExponent":{let r=Ug[t.symbol];return t.args.length===2&&!r?Nn(e,Bo([dd(t.symbol),ud([t.args[0],t.args[1]])])):Nn(e,ud([Zp(t.symbol,[t.args[0]]),t.args[1]]))}case"identifier":{if(e.frame[t.symbol])return Nn(e,e.frame[t.symbol]);throw e.policy.canDefine(t.symbol)?Ry([t.symbol]):Ja[t.symbol]&&Ja[t.symbol].isFunction?Nl(t.symbol):hb(t.symbol)}default:return qd(t)}}function uc(e){switch(e.type){case"constant":return e.value;case"matrix":return e.elements.map(t=>t.map(r=>uc(r)));case"intrinsic":return qp[e.symbol].apply(void 0,e.args.map(uc));default:return qd(e)}}function kv(e){let t={},{expressions:r,order:n}=e,a=wv();return n.forEach(c=>{let l=r[c];if(l.type==="matrix")try{a.frame[l.variable]=zg(l.matrix)}catch(g){}}),n.forEach(c=>{let l=r[c],g={};try{if(l.type==="latex"){if(l.latex){let p=$g(l.latex);p.type!=="constant"&&(g.answer=uc(Nn(a,p)))}}else if(l.type==="matrix")uc(Nn(a,zg(l.matrix)));else return l}catch(p){p instanceof z?g.error=p.getError():g.error=Ci(p).getError()}t[l.id]=g}),t}function In(e){return Lf(e)}function Ta(e){this.setState(e)}Ta.prototype.setState=function(e){this.state=e};Ta.prototype.getState=function(){return this.state};Ta.prototype.set=function(e,t){if(arguments.length===1){this.state=e;return}else if(typeof e=="string"){this.state=In(this.state),this.state[e]=t;return}var r=e.length-2,n=e[r+1],a;this.state=a=In(this.state);for(var c=0;c<=r;c++){var l=e[c];a=a[l]=In(a[l])}a[n]=t};Ta.prototype.deepMutate=function(e,t){if(arguments.length===1){t=e,this.state=ln(this.state),t(this.state);return}else if(typeof e=="string"){this.state=In(this.state),this.state[e]=ln(this.state[e]),t(this.state[e]);return}for(var r=e.length-2,n=e[r+1],a=this.state=In(this.state),c=0;c<=r;c++){var l=e[c];a=a[l]=In(a[l])}a=a[n]=ln(a[n]),t(a)};Ta.prototype.shallowMutate=function(e,t){if(arguments.length===1){t=e,this.state=In(this.state),t(this.state);return}else if(typeof e=="string"){this.state=In(this.state),this.state[e]=In(this.state[e]),t(this.state[e]);return}for(var r=e.length-1,n=this.state=In(this.state),a=0;a<=r;a++){var c=e[a];n=n[c]=In(n[c])}t(n)};Ta.areShallowEqual=function(e,t){};Ta.areDeepEqual=function(e,t){};var Ev=6,Cv="1",Tv=["A","B","C","D","E","F","G","H"],Ri=["remove-matrix-row","add-matrix-row","remove-matrix-col","add-matrix-col"],pc=class{constructor(t){this._nextObjectId=0;this.clearAll(),this.config=t}setOption(t,r){this.config[t]=r}generateObjectId(){return(this._nextObjectId++).toString()}updateNextObjectId(){let t=this.getState().order,r=/^[0-9]+$/;for(let n of t)if(r.test(n)){let a=parseInt(n,10);a>=this._nextObjectId&&(this._nextObjectId=a+1)}}generateMatrixVariable(){let t={},{expressions:r}=this.getState();for(let n in r){let a=r[n];a.type==="matrix"&&(t[a.variable]=!0)}for(let n of Tv)if(!t[n])return n;return""}isEnabled(t){return!!this.config[t]}getTextColor(){return this.config.textColor}getBackgroundColor(){return this.config.backgroundColor}getFontSize(){return this.config.fontSize||16}getLanguage(){return this.config.language}hasUnusedMatrixVariables(){let{expressions:t}=this.getState();return Ds(t,r=>r.type==="matrix").length<Tv.length}clearShouldDebounceUndoRedo(){this._shouldDebounceUndoRedo=!1}markShouldDebounceUndoRedo(){this._shouldDebounceUndoRedo=!0}getShouldDebounceUndoRedo(){return this._shouldDebounceUndoRedo}clearAll(){let t=this.store?this.store.getState().ui.containerSize:{width:0,height:0},r={version:Cv,expressions:{1:{id:"1",type:"latex",latex:"",displayAsFraction:!1}},order:["1"],ui:{focus:void 0,settingsMenuOpen:!1,containerSize:t}};this.store?this.store.set(r):this.store=new Ta(r),this.updateNextObjectId()}getPersistedState(){let{version:t,expressions:r,order:n}=this.getState();return{version:t,expressions:r,order:n}}getState(){return this.store.getState()}setState(t){this.store.set({version:t.version,expressions:t.expressions,order:t.order,ui:this.getState().ui}),this.updateNextObjectId()}setStateFromAPI(t){let r=t||{};var n=r.expressions||{},a=r.order||[];this.store.set({version:Cv,expressions:n,order:a,ui:this.getState().ui}),this.updateNextObjectId()}shouldShowClear(){if(this.getNumberOfExpressions()===1)return!1;let t=this.getIdOfFocus();if(!t)return!1;let r=this.getExpressionById(t);return r?!!(r.type==="matrix"||r.latex):!1}canClear(){if(this.getNumberOfExpressions()>1)return!0;let t=this.getExpressionOrder()[0],r=this.getExpressionById(t);return r.type!=="latex"?!0:r.latex!==""}deleteExpression(t){this.store.shallowMutate("expressions",n=>{delete n[t]});let r=Cf(this.getState().order,t);this.store.shallowMutate(n=>{n.order=r})}addBlankLatexExpressionAfterFocus(){let t=this.getIndexOfFocus(),r;t===-1?r=this.getState().order.length:r=t+1;let n=this.addNewLatexExpression(r,"");this.focusLatexExpression(n)}addNewLatexExpression(t,r){let n=this.generateObjectId();return this.store.shallowMutate("expressions",a=>{a[n]={id:n,type:"latex",latex:r,displayAsFraction:!1}}),this.store.shallowMutate("order",a=>{a.splice(t,0,n)}),n}clearFocusedExpression(){let t=this.getIdOfFocus();t&&(this.store.shallowMutate("expressions",r=>{r[t]={id:t,type:"latex",latex:"",displayAsFraction:!1}}),this.store.set(["ui","focus"],{type:"latex-expression",id:t}))}setExpressionLatex(t,r){this.store.shallowMutate(["expressions",t],n=>{n.type==="latex"&&(n.latex=r)})}addNewMatrixExpression(){let t=!1,r=this.getExpressionOrder(),n=r.length,a=this.generateMatrixVariable(),c=2,l=2,g,p,f=this.getIdOfFocus();f?(p=f,g=this.getIndexOfFocus()):(g=r.length-1,p=r[r.length-1]);let w=this.getExpressionById(p);if(w&&w.type==="latex"){let pe=w.latex.replace(/\\ /gi,""),_e=pe.match(/^([A-Z])=?$/);if(pe=="")n=g,t=!0;else if(_e){let $e=_e[1],Le=this.getState().expressions,Re=!1;for(let Je in Le)Le[Je].type==="matrix"&&Le[Je].variable===$e&&(Re=!0);Re||(a=$e,t=!0,n=g)}}let M=[];for(var G=0;G<c;G++){let pe=[];M.push(pe);for(var R=0;R<l;R++)pe.push("")}let ue=this.generateObjectId();return this.store.shallowMutate("expressions",pe=>{p&&t&&delete pe[p],pe[ue]={id:ue,type:"matrix",variable:a,matrix:M}}),this.store.shallowMutate("order",pe=>{pe.splice(n,t?1:0,ue)}),ue}addMatrixRow(t){this.store.deepMutate(["expressions",t],r=>{if(r.type!=="matrix"||r.matrix.length===0)return;let n=[];for(let a=0;a<r.matrix[0].length;a++)n.push("");r.matrix.push(n)})}removeMatrixRow(t){this.store.deepMutate(["expressions",t],r=>{r.type==="matrix"&&r.matrix.pop()})}addMatrixCol(t){this.store.deepMutate(["expressions",t],r=>{if(r.type==="matrix")for(let n of r.matrix)n.push("")})}removeMatrixCol(t){this.store.deepMutate(["expressions",t],r=>{if(r.type==="matrix")for(let n of r.matrix)n.pop()})}setLatexAtFocus(t){let r=this.getState().ui.focus;if(r)switch(r.type){case"latex-expression":this.setExpressionLatex(r.id,t);break;case"matrix-cell":this.setMatrixCellLatex(r.id,r.row,r.col,t);break;case"matrix-resize-button":case"add-matrix-button":break;default:return r}}setDisplayAsFraction(t,r){this.store.deepMutate(["expressions",t],n=>{n.type==="latex"&&(n.displayAsFraction=r)})}setMatrixCellLatex(t,r,n,a){this.store.deepMutate(["expressions",t],c=>{c.type==="matrix"&&(c.matrix[r][n]=a)})}setMatrixVariable(t,r){this.store.shallowMutate(["expressions",t],n=>{n.type==="matrix"&&(n.variable=r)})}isResizeOpDisabled(t,r){let n=this.getExpressionById(t);if(n.type!=="matrix")return!0;let a=n.matrix.length,c=a===0?0:n.matrix[0].length;switch(r){case"remove-matrix-row":return a<=1;case"add-matrix-row":return a>=Ev;case"remove-matrix-col":return c<=1;case"add-matrix-col":return c>=Ev}}setContainerSize(t){this.store.set(["ui","containerSize"],t)}getContainerSize(){return this.getState().ui.containerSize}setFocus(t){this.store.set(["ui","focus"],t)}setFocusInPreparationForKeypadEvent(){let{order:t,expressions:r}=this.getState(),n=t.length-1,a=t[n],c=r[a];if(c.type==="latex"&&!c.latex)this.focusLatexExpression(a);else{let l=this.addNewLatexExpression(n+1,"");this.focusLatexExpression(l)}}setSettingsMenuOpen(t){this.store.set(["ui","settingsMenuOpen"],t.isOpen)}isSettingsMenuOpen(){return this.getState().ui.settingsMenuOpen}isExpressionFocused(t){let r=this.getState().ui.focus;return!r||r.type==="add-matrix-button"?!1:r.id===t}isLatexExpressionFocused(t){let r=this.getState().ui.focus;return!r||r.type!=="latex-expression"?!1:r.id===t}isResizeButtonFocused(t,r){let n=this.getState().ui.focus;return!n||n.type!=="matrix-resize-button"?!1:n.id===t&&n.op===r}isAddMatrixButtonFocused(){let t=this.getState().ui.focus;return t?t.type==="add-matrix-button":!1}isMatrixExpressionFocused(t){let r=this.getState().ui.focus;return!r||r.type!=="matrix-cell"?!1:r.id===t}isMatrixExpressionCellFocused(t,r,n){let a=this.getState().ui.focus;return!a||a.type!=="matrix-cell"?!1:a.id===t&&a.row===r&&a.col===n}focusMatrixExpressionCell(t,r,n){this.setFocus({type:"matrix-cell",id:t,row:r,col:n})}focusResizeButton(t,r){this.setFocus({type:"matrix-resize-button",id:t,op:r})}focusAddMatrixButton(){this.setFocus({type:"add-matrix-button"})}focusLatexExpression(t){this.setFocus({type:"latex-expression",id:t})}blurLatexExpression(t){this.isLatexExpressionFocused(t)&&this.setFocus(void 0)}blurMatrixExpressionCell(t,r,n){this.isMatrixExpressionCellFocused(t,r,n)&&this.setFocus(void 0)}blurResizeButton(t,r){this.isResizeButtonFocused(t,r)&&this.setFocus(void 0)}blurAddMatrixButton(){this.isAddMatrixButtonFocused()&&this.setFocus(void 0)}getIdOfFocus(){let t=this.getState().ui.focus;if(t&&t.type!=="add-matrix-button")return t.id}getIndexOfFocus(){let t=this.getState().ui.focus;if(!t||t.type==="add-matrix-button")return-1;let r=this.getState().order;for(var n=0;n<r.length;n++)if(r[n]===t.id)return n;return-1}isFinalExpressionFocused(){return this.getIndexOfFocus()===this.getState().order.length-1}moveFocusInDirection(t){let r=this.getState().ui.focus;if(!r)return;let n=this.getIndexOfFocus();if(n!==-1)switch(r.type){case"latex-expression":t==="Up"?this.moveFocusFromIndexToIndex(n,n-1):t==="Down"&&this.moveFocusFromIndexToIndex(n,n+1);break;case"matrix-cell":let{lastRow:a,lastCol:c}=this.getSizeOfMatrixExpression(r.id);t==="Up"?r.row>0?this.focusMatrixExpressionCell(r.id,r.row-1,r.col):this.moveFocusFromIndexToIndex(n,n-1):t==="Down"?r.row<a?this.focusMatrixExpressionCell(r.id,r.row+1,r.col):this.moveFocusFromIndexToIndex(n,n+1):t==="Left"?r.col>0?this.focusMatrixExpressionCell(r.id,r.row,r.col-1):r.row>0&&this.focusMatrixExpressionCell(r.id,r.row-1,c):t==="Right"&&(r.col<c?this.focusMatrixExpressionCell(r.id,r.row,r.col+1):r.row<a&&this.focusMatrixExpressionCell(r.id,r.row+1,0));break;case"matrix-resize-button":case"add-matrix-button":break;default:return r}}moveFocusFromIndexToIndex(t,r){let{order:n,expressions:a}=this.getState(),c=n[r],l=a[c];if(l)switch(l.type){case"latex":this.focusLatexExpression(c);break;case"matrix":if(t<r)this.focusMatrixExpressionCell(c,0,0);else{let{lastRow:p,lastCol:f}=this.getSizeOfMatrixExpression(c);this.focusMatrixExpressionCell(c,p,f)}break;default:return l}}attemptToMoveFocusWithBackspace(){let{ui:t,expressions:r,order:n}=this.getState(),a=t.focus;if(!a||a.type==="add-matrix-button")return!1;let c=this.getIndexOfFocus();if(c===-1)return!1;let l=r[a.id];if(!l)return;let g=n.length;switch(a.type){case"latex-expression":return l.type==="latex"?l.latex||g===1?!1:(c>0?this.moveFocusInDirection("Up"):this.moveFocusInDirection("Down"),this.deleteExpression(a.id),!0):!1;case"matrix-cell":if(l.type==="matrix"){if(l.matrix[a.row][a.col])return!1;if(a.col===0){if(a.row===0){if(g===1)return this.clearAll(),this.focusLastExpression(),!1;c===0?this.moveFocusFromIndexToIndex(0,1):this.moveFocusInDirection("Up"),this.deleteExpression(a.id)}else this.moveFocusInDirection("Left");return!0}else this.moveFocusInDirection("Left")}return!1;case"matrix-resize-button":return!1;default:return a}}firstEnabledResizeOp(t){for(let r of Ri)if(!this.isResizeOpDisabled(t.id,r))return r;return Ri[Ri.length-1]}lastEnabledResizeOp(t){for(let r of Ri.slice().reverse())if(!this.isResizeOpDisabled(t.id,r))return r;return Ri[0]}nextEnabledResizeOp(t,r){let n=!1;for(let a of Ri){if(n&&!this.isResizeOpDisabled(t.id,a))return a;a===r&&(n=!0)}}prevEnabledResizeOp(t,r){let n=!1;for(let a of Ri.slice().reverse()){if(n&&!this.isResizeOpDisabled(t.id,a))return a;a===r&&(n=!0)}}attemptToMoveFocusWithTab({shiftKey:t}){let r=this.getState().ui.focus;if(!r)return!1;let n=this.getIndexOfFocus(),a;if(n!==-1){let c=this.getState().order[n-1];a=c?this.getExpressionById(c):void 0}switch(r.type){case"latex-expression":return t&&a&&a.type==="matrix"?(this.focusResizeButton(a.id,this.lastEnabledResizeOp(a)),!0):!1;case"matrix-cell":if(t)return a&&a.type==="matrix"&&r.row===0&&r.col===0?(this.focusResizeButton(a.id,this.lastEnabledResizeOp(a)),!0):!1;{let{lastRow:c,lastCol:l}=this.getSizeOfMatrixExpression(r.id);return r.row===c&&r.col===l?(this.focusResizeButton(r.id,this.firstEnabledResizeOp(this.getExpressionById(r.id))),!0):!1}case"matrix-resize-button":if(t){let c=this.prevEnabledResizeOp(this.getExpressionById(r.id),r.op);if(c!==void 0)return this.focusResizeButton(r.id,c),!0;let{lastRow:l,lastCol:g}=this.getSizeOfMatrixExpression(r.id);return this.focusMatrixExpressionCell(r.id,l,g),!0}else{let c=this.nextEnabledResizeOp(this.getExpressionById(r.id),r.op);return c!==void 0?(this.focusResizeButton(r.id,c),!0):this.isFinalExpressionFocused()?(this.focusAddMatrixButton(),!0):n===-1?!1:(this.moveFocusFromIndexToIndex(n,n+1),!0)}case"add-matrix-button":{if(!t)return!1;let c=this.getState().order,l=c[c.length-1];if(!l)return!1;let g=this.getExpressionById(l);return g.type!=="matrix"?!1:(this.focusResizeButton(g.id,this.lastEnabledResizeOp(g)),!0)}}}getSizeOfMatrixExpression(t){let r=this.getExpressionById(t);return r?{lastRow:r.matrix.length-1,lastCol:r.matrix[0].length-1}:{lastRow:0,lastCol:0}}getEvaluations(){let t=this.getState();return this._lastEvaluationState===t?this._evaluations:(this._lastEvaluationState=t,this._evaluations=kv(this._lastEvaluationState),this._evaluations)}getExpressionById(t){return this.getState().expressions[t]}getExpressionOrder(){return this.getState().order}focusFirstExpression(){let t=this.getExpressionOrder()[0];this.focusLatexExpression(t)}focusLastExpression(){let t=this.getExpressionOrder();this.focusLatexExpression(t[t.length-1])}getNumberOfExpressions(){return this.getState().order.length}updateTheComputedWorld(){var t=this.getIdOfFocus();t&&!this.getExpressionById(t)&&this.setFocus(void 0)}};function pD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var gD="ID_",Bd=function(){function e(){pD(this,e),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return e.prototype.register=function(r){var n=gD+this._lastID++;return this._callbacks[n]=r,n},e.prototype.unregister=function(r){this._callbacks[r]||gc(!1,"Dispatcher.unregister(...): `%s` does not map to a registered callback.",r),delete this._callbacks[r]},e.prototype.waitFor=function(r){this._isDispatching||gc(!1,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var n=0;n<r.length;n++){var a=r[n];if(this._isPending[a]){this._isHandled[a]||gc(!1,"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",a);continue}this._callbacks[a]||gc(!1,"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",a),this._invokeCallback(a)}},e.prototype.dispatch=function(r){this._isDispatching&&gc(!1,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this._startDispatching(r);try{for(var n in this._callbacks)this._isPending[n]||this._invokeCallback(n)}finally{this._stopDispatching()}},e.prototype.isDispatching=function(){return this._isDispatching},e.prototype._invokeCallback=function(r){this._isPending[r]=!0,this._callbacks[r](this._pendingPayload),this._isHandled[r]=!0},e.prototype._startDispatching=function(r){for(var n in this._callbacks)this._isPending[n]=!1,this._isHandled[n]=!1;this._pendingPayload=r,this._isDispatching=!0},e.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},e}();function gc(e,t,r,n,a,c,l,g){if(t===void 0)throw new Error("invariant requires an error message argument");if(!e){var p;if(t===void 0)p=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[r,n,a,c,l,g],w=0;p=new Error(t.replace(/%s/g,function(){return f[w++]})),p.name="Invariant Violation"}throw p.framesToPop=1,p}}var hc=class{constructor(t=100){this.clear(),this._sizeLimit=t}clear(){this._stack=[],this._stackPointer=-1}getState(){return this._stack[this._stackPointer]}serializeForBugsnag(){function t(r){try{return JSON.stringify(r,null,2)}catch(n){return"[[could not jsonify]]"}}return{currentState:t(this._stack[this._stackPointer]),undoState:t(this._stack[this._stackPointer-1]),redoState:t(this._stack[this._stackPointer+1])}}addState(t){this.canRedo()&&this._stack.splice(this._stackPointer+1),this._stack.push(t),this._stack.length>this._sizeLimit&&this._stack.shift(),this._stackPointer=this._stack.length-1}replaceState(t){this.canRedo()&&this._stack.splice(this._stackPointer+1),this.replaceInteriorState(t)}replaceInteriorState(t){this._stack.length===0?(this._stack.push(t),this._stackPointer=0):this._stack[this._stackPointer]=t}canUndo(){return this._stackPointer>0}canRedo(){return this._stackPointer<this._stack.length-1}undo(){this.canUndo()&&(this._stackPointer-=1)}redo(){this.canRedo()&&(this._stackPointer+=1)}};var hD={loga:e=>{e.write("\\log_{}"),e.typedText("("),e.keystroke("Left"),e.keystroke("Down")},nthroot:e=>{e.write("\\sqrt[]{}"),e.keystroke("Left"),e.keystroke("Left")},ddx:e=>{e.write("\\frac{d}{dx}")},arcsin:e=>{e.write("sin^{-1}"),e.typedText("(")},arccos:e=>{e.write("cos^{-1}"),e.typedText("(")},arctan:e=>{e.write("tan^{-1}"),e.typedText("(")},arcsec:e=>{e.write("sec^{-1}"),e.typedText("(")},arccsc:e=>{e.write("csc^{-1}"),e.typedText("(")},arccot:e=>{e.write("cot^{-1}"),e.typedText("(")},"A^T":e=>{e.typedText("^T"),e.keystroke("Right")},"A^-1":e=>{e.typedText("^-1"),e.keystroke("Right")},"A^2":e=>{e.typedText("^2"),e.keystroke("Right")},"a^2":e=>{e.typedText("^2"),e.keystroke("Right")},"a^3":e=>{e.typedText("^3"),e.keystroke("Right")},"a/b":e=>{e.write("\\frac{}{}"),e.keystroke("Left")},integral:e=>{e.cmd("integral")}};function Sv(e,t){hD[t](e)}ho();function Ud(e){return Yo(e)?(e.match(/^#([A-Fa-f0-9]{3})$/g)&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),e.toLowerCase()):e}function Yo(e){return typeof e=="string"&&(e.match(/^#([A-Fa-f0-9]{3})$/g)||e.match(/^#([A-Fa-f0-9]{6})$/g))}function Kg(e){if(e=Ud(e),!Yo(e))return e;let t="0123456789abcdef";return"#"+e.slice(1).split("").map(r=>t[15-t.indexOf(r)]).join("")}var jo={RED:"#c74440",BLUE:"#2d70b3",GREEN:"#388c46",PURPLE:"#6042a6",ORANGE:"#fa7e19",BLACK:"#000000",GRAY:"#aaaaaa",FOCUS_OUTLINE:"#6a93d2"},OF={RED:jo.RED,BLUE:jo.BLUE,GREEN:jo.GREEN,ORANGE:jo.ORANGE,PURPLE:jo.PURPLE,GRAY:jo.GRAY};ll();var $d=class{constructor(t,r){this.cb=t;this.document=r;this.observedAriaLiveElements=new WeakMap;this.destroyed=!1;this.onAriaLabelFocus=t=>{let r=t.target;if(this.isElement(r)){let n=r.getAttribute("aria-label");n&&this.cb(n,"label")}};this.document.documentElement.addEventListener("focus",this.onAriaLabelFocus,!0),this.ariaLiveContentObserver=new MutationObserver(n=>this.handleAriaLiveContentMutations(n)),r.documentElement.querySelectorAll('[aria-live="assertive"]').forEach(n=>this.startObservingAriaLiveElement(n)),this.treeObserver=new MutationObserver(n=>this.handleDocumentTreeMutations(n)),this.treeObserver.observe(r.documentElement,{childList:!0,subtree:!0,attributeFilter:["aria-live"]})}destroy(){this.destroyed=!0,this.document.documentElement.removeEventListener("focus",this.onAriaLabelFocus,!0),this.ariaLiveContentObserver.disconnect()}isObservingElement(t){return!!this.observedAriaLiveElements.get(t)}handleAriaLiveContentMutations(t){var n;let r=new Map;for(let a of t){if(!this.observedAriaLiveElements.get(a.target))continue;let c=r.get(a.target);c||(c=[],r.set(a.target,c)),c.push(a)}for(let[a,c]of r){let l=a.cloneNode(!0),g=[l.textContent||""];for(let p=c.length-1;p>=0;p--){let f=c[p];switch(f.type){case"attributes":{f.attributeName!==null&&l.setAttribute(f.attributeName,f.oldValue||""),g.push(l.textContent||"");break}case"characterData":{f.oldValue!==null&&(l.textContent=f.oldValue),l.textContent&&l.textContent!==g[g.length-1]&&g.push(l.textContent);break}case"childList":{if(f.addedNodes.length>1||f.removedNodes.length>1)throw new Error(`Expected at most one removed node and one added node, but got ${f.removedNodes.length} removed nodes and ${f.addedNodes.length} added nodes`);f.addedNodes.length===1&&((n=l.firstChild)==null||n.remove()),f.removedNodes.length===1&&f.removedNodes.forEach(w=>l.appendChild(w.cloneNode(!0))),l.textContent&&l.textContent!==g[g.length-1]&&g.push(l.textContent);break}}}for(let p of g.reverse())this.cb(p,"alert")}}startObservingAriaLiveElement(t){this.destroyed||t.getAttribute("aria-live")==="assertive"&&(this.observedAriaLiveElements.get(t)||(this.observedAriaLiveElements.set(t,!0),t.textContent&&this.cb(t.textContent,"alert"),this.ariaLiveContentObserver.observe(t,{attributes:!0,characterData:!0,childList:!0,attributeOldValue:!0,characterDataOldValue:!0})))}stopObservingAriaLiveElement(t){this.observedAriaLiveElements.set(t,!1)}handleDocumentTreeMutations(t){for(let r of t)r.addedNodes.forEach(n=>{this.isElement(n)&&n.getAttribute("aria-live")==="assertive"&&this.startObservingAriaLiveElement(n)}),this.isElement(r.target)&&r.attributeName==="aria-live"&&(r.target.getAttribute("aria-live")==="assertive"?this.startObservingAriaLiveElement(r.target):this.stopObservingAriaLiveElement(r.target)),r.removedNodes.forEach(n=>{this.isElement(n)&&(this.stopObservingAriaLiveElement(n),n.querySelectorAll('[aria-live="assertive"]').forEach(a=>this.stopObservingAriaLiveElement(a)))})}isElement(t){var n;let r=(n=this.document.defaultView)==null?void 0:n.Element;return r?t instanceof r:!1}};var Qa,zd=[],Dv="",fD;function yD(e){zd.push(e)}function Mv(e){if(e!==void 0&&yD(e),Qa&&zd.length>0){let t=zd.join(" ").replace(/ +(?= )/g,"");Qa.setAttribute("aria-relevant",Dv===t&&Ah?"all":"additions text"),Qa.textContent=t,Dv=t}zd.length=0}function bD(){Qa=document.createElement("p"),Qa.setAttribute("aria-live","assertive"),Qa.setAttribute("aria-atomic","true"),Qa.classList.add("dcg-aria-alert"),document.body.appendChild(Qa),co().logAria&&(fD=new $d((t,r)=>Vt.log(`[aria ${r}] ${t}`),document))}am(bD);var mc=class{constructor(t,r){this._queuedCallbacks=[];this.raw=(t,r)=>Vi(t,r);this.s=Ys(this.getLanguage.bind(this));this.hasTranslation=t=>js(t,this.getLanguage());this.unpack=t=>xd(t,this.getLanguage());this.dispatch=t=>{fl("dispatch",{type:t.type}),this.dispatcher.dispatch(t);let r;for(;r=this._queuedCallbacks.shift();)r()};this.model=t,this.dispatcher=new Bd,this.stateStack=new hc,this.stateStack.addState(this.getPersistedState()),this.settingsProxy=r,this.syncPublicSettings(),this.dispatcher.register(n=>{if(this.enqueueEvent("render"),n.type==="render")return;let a=!1;switch(n.type){case"clear-all":this.model.clearAll(),this.model.focusLastExpression();break;case"clear-focused-expression":this.model.clearFocusedExpression();break;case"undo":this.undo(),a=!0;break;case"redo":this.redo(),a=!0;break;case"set-state-from-api":n.opts.allowUndo||this.stateStack.clear(),this.model.setStateFromAPI(n.state);break;case"clear-from-api":n.opts.allowUndo||this.stateStack.clear(),this.model.clearAll();break;case"add-new-matrix":let c=this.model.addNewMatrixExpression();this.model.focusMatrixExpressionCell(c,0,0);break;case"focus-latex-expression":this.model.focusLatexExpression(n.id);break;case"focus-first-expression":this.model.focusFirstExpression();break;case"focus-last-expression":this.model.focusLastExpression();break;case"blur-latex-expression":this.model.blurLatexExpression(n.id);break;case"focus-matrix-expression-cell":this.model.focusMatrixExpressionCell(n.id,n.row,n.col);break;case"blur-matrix-expression-cell":this.model.blurMatrixExpressionCell(n.id,n.row,n.col);break;case"blur-resize-button":this.model.blurResizeButton(n.id,n.op);break;case"focus-resize-button":this.model.focusResizeButton(n.id,n.op);break;case"focus-add-matrix-button":this.model.focusAddMatrixButton();break;case"blur-add-matrix-button":this.model.blurAddMatrixButton();break;case"mq-updated-latex":t.setLatexAtFocus(n.latex);break;case"add-matrix-row":t.addMatrixRow(n.id),this.alertSizeOfMatrix(n.id);break;case"remove-matrix-row":t.removeMatrixRow(n.id),this.alertSizeOfMatrix(n.id);break;case"add-matrix-col":t.addMatrixCol(n.id),this.alertSizeOfMatrix(n.id);break;case"remove-matrix-col":t.removeMatrixCol(n.id),this.alertSizeOfMatrix(n.id);break;case"set-display-as-fraction":this.model.setDisplayAsFraction(n.id,n.value);break;case"keypad/press-key":this.applyPressedKey(n.key,n.evt);break;case"edit-bar/press-key":this.editBarPressedKey(n.key,n.evt);break;case"keypad/type-text":this.applyTypedText(n.text);break;case"keypad/custom-command":this.applyCustomCommand(n.command);break;case"tab-backward-from-control-bar":this.model.attemptToMoveFocusWithTab({shiftKey:!0})&&n.evt.preventDefault();break;case"update-inverted-colors":this.model.setOption("invertedColors",!!n.invertedColors);break;case"update-projector-mode":this.model.setOption("projectorMode",!!n.mode);break;case"update-cap-expression-size":this.model.setOption("capExpressionSize",!!n.mode);break;case"update-text-color":this.model.setOption("textColor",n.textColor);break;case"update-background-color":this.model.setOption("backgroundColor",n.backgroundColor);break;case"update-font-size":this.model.setOption("fontSize",n.fontSize);break;case"update-decimal-to-fraction":this.model.setOption("decimalToFraction",n.value);break;case"keypad/shift":case"keypad/123":case"keypad/abc":case"keypad/audio-trace":break;case"update-language":this.setLanguage(n.language);break;case"toggle-settings-menu":this.toggleSettingsMenu();break;case"enable-settings-menu":this.model.setOption("settingsMenu",!0);break;case"disable-settings-menu":this.model.setOption("settingsMenu",!1);break;case"close-settings-menu":this.closeSettingsMenu();break;case"ui/container-resized":this.model.setContainerSize(n.size);break;default:return n}this.model.updateTheComputedWorld(),a||(this.model.getShouldDebounceUndoRedo()?(this.commitUndoRedoDebounced(),this.model.clearShouldDebounceUndoRedo()):this.commitUndoRedoSynchronously()),this.runAfterDispatch(this.syncPublicSettings.bind(this))})}runAfterDispatch(t){this._queuedCallbacks.push(t)}enqueueEvent(t){this.runAfterDispatch(()=>{this.onEventEmitted&&this.onEventEmitted(t)})}getPersistedState(){return this.model.getPersistedState()}setStateFromAPI(t,r){this.dispatch({type:"set-state-from-api",state:t,opts:r})}clearFromAPI(t){this.dispatch({type:"clear-from-api",opts:t})}focusFirstExpression(){this.dispatch({type:"focus-first-expression"})}syncPublicSettings(){this.settingsProxy.setProperty("invertedColors",this.model.isEnabled("invertedColors")),this.settingsProxy.setProperty("projectorMode",this.model.isEnabled("projectorMode")),this.settingsProxy.setProperty("capExpressionSize",this.model.isEnabled("capExpressionSize")),this.settingsProxy.setProperty("invertedColors",this.getInvertedColors()),this.settingsProxy.setProperty("textColor",this.getTextColor()),this.settingsProxy.setProperty("backgroundColor",this.getBackgroundColor()),this.settingsProxy.setProperty("fontSize",this.getFontSize()),this.settingsProxy.setProperty("language",this.getLanguage())}ensureMathquillIsFocusedAndReturnFocusedMathquill(){let t=hn.getFocusedMathquill();return t||(this.model.setFocusInPreparationForKeypadEvent(),this.onEventEmitted&&this.onEventEmitted("render"),hn.getFocusedMathquill())}applyTypedText(t){let r=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();r&&hn.canAcceptText(r,this.model.isEnabled("capExpressionSize"),t)&&(r.typedText(t),this.model.setLatexAtFocus(r.latex()))}applyCustomCommand(t){let r=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();r&&(Sv(r,t),this.model.setLatexAtFocus(r.latex()))}applyPressedKey(t,r){let n=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();n&&(t==="Up"||t==="Down"||t==="Left"||t==="Right"?hn.applyArrowKeyAndReturnIfWasAtBounds(n,t,r)&&this.model.moveFocusInDirection(t):t==="Enter"?(r&&(r.preventDefault(),r.stopPropagation()),this.model.addBlankLatexExpressionAfterFocus()):t==="Backspace"?this.model.attemptToMoveFocusWithBackspace()||(n.keystroke(t,r),this.model.setLatexAtFocus(n.latex())):t==="Delete"?(n.keystroke(t,r),this.model.setLatexAtFocus(n.latex())):t==="Tab"||t==="Shift-Tab"?this.model.attemptToMoveFocusWithTab({shiftKey:t==="Shift-Tab"})?r&&(r.preventDefault(),r.stopPropagation()):(n.keystroke(t,r),this.model.setLatexAtFocus(n.latex())):(n.keystroke(t,r),this.model.setLatexAtFocus(n.latex())))}editBarPressedKey(t,r){t==="Tab"&&this.model.attemptToMoveFocusWithTab({shiftKey:!!(r!=null&&r.shiftKey)})&&r&&r.preventDefault()}commitUndoRedoDebounced(){let t=this.getPersistedState(),r=this.stateStack.getState();if(ua(r,t))return;let n=new Date().getTime();n-this._lastDebouncedTime<1e3?this.stateStack.replaceState(t):this.stateStack.addState(t),this._lastDebouncedTime=n,this.enqueueEvent("change")}commitUndoRedoSynchronously(){let t=this.getPersistedState(),r=this.stateStack.getState();ua(r,t)||(this._lastDebouncedTime=0,this.stateStack.addState(t),this.enqueueEvent("change"))}undo(){this.stateStack.canUndo()&&(this.stateStack.undo(),this.model.setState(this.stateStack.getState()),this.enqueueEvent("change"))}redo(){this.stateStack.canRedo()&&(this.stateStack.redo(),this.model.setState(this.stateStack.getState()),this.enqueueEvent("change"))}canUndo(){return this.stateStack.canUndo()}canRedo(){return this.stateStack.canRedo()}getInvertedColors(){return this.model.isEnabled("invertedColors")}getTextColor(){let t=Ud(this.model.getTextColor()||"#000");return this.getInvertedColors()&&t!=="#000000"?Kg(t):t}hasBackgroundColor(){return this.getBackgroundColor()!=="#ffffff"}getBackgroundColor(){let t=Ud(this.model.getBackgroundColor()||"#fff");return this.getInvertedColors()&&t!=="#ffffff"?Kg(t):t}getFontSize(){return this.model.getFontSize()}setLanguage(t){t!=="en"&&!bx(t)?Vt.warn(`Translation for '${t}' isn't currently available. Using '${this.getLanguage()}' instead.`):this.model.setOption("language",t)}getLanguage(){return this.model.getLanguage()}getSettingsMenu(){return this.model.isEnabled("settingsMenu")}closeSettingsMenu(){this.model.setSettingsMenuOpen({isOpen:!1})}toggleSettingsMenu(){this.model.setSettingsMenuOpen({isOpen:!this.isSettingsMenuOpen()})}isSettingsMenuOpen(){return this.model.isSettingsMenuOpen()}isProjectorMode(){return this.model.isEnabled("projectorMode")}getContainerSize(){return this.model.getContainerSize()}isNarrow(){return this.getContainerSize().width<570}isVeryNarrow(){return this.getContainerSize().width<420}isVeryVeryNarrow(){return this.getContainerSize().width<370}shouldShowClear(){return this.model.shouldShowClear()}shouldRender(){let{width:t,height:r}=this.getContainerSize();return t>0&&r>0}alertSizeOfMatrix(t){let r=this.model.getExpressionById(t);if(!r||r.type!=="matrix")return;let n=r.matrix.length,a=n===0?0:r.matrix[0].length;Mv(this.s("matrix-calculator-narration-new-dimensions",{rows:n,cols:a}))}getMathquillConfig(){return{autoCommands:sl(),autoOperatorNames:cl()}}};var wD=0,vD="guid_"+Math.round(Math.random()*1e6)+"_"+new Date().getTime()+"_",Wg=class{constructor(){this.__observers={},this.__eventObservers={},this.__oldProperties={},this.__propertyComparators={},this.guid=vD+ ++wD}unobserveAll(){this.__observers={},this.__eventObservers={}}getProperty(t){return this[t]}getOldProperty(t){return this.__oldProperties[t]}setProperty(t,r){var n=this[t];this[t]=r;var a=this.__propertyComparators[t];if(a){if(a(n,r))return}else if(ua(n,r))return;this.__oldProperties[t]=n,this.notifyPropertyChange(t)}setProperties(t){for(var r in t)t.hasOwnProperty(r)&&this.setProperty(r,t[r])}setPropertyComparator(t,r){this.__propertyComparators[t]=r}notifyPropertyChange(t){this.__callObservers(this.__observers,t,this)}observe(t,r){this.__addObservers(this.__observers,t,r)}unobserve(t){this.__removeObservers(this.__observers,t)}observeAndSync(t,r){this.observe(t,r);for(var n=t.split(" "),a=0;a<n.length;a++){var c=n[a].split("."),l=c[0];this.hasOwnProperty(l)&&r(l,this)}}triggerEvent(t,r){this.__callObservers(this.__eventObservers,t,r)}observeEvent(t,r){this.__addObservers(this.__eventObservers,t,r)}unobserveEvent(t){this.__removeObservers(this.__eventObservers,t)}__callObservers(t,r,n){var a=t[r];if(a)for(var c=0;c<a.length;c++)a[c].callback(r,n)}__removeObservers(t,r){for(var n=r.split(" "),a=0;a<n.length;a++){var c=n[a].split("."),l=c[0],g=c[1];if(l&&g){var p=t[l],f=[];if(!p)continue;for(var w=0;w<p.length;w++){var M=p[w];M.namespace!==g&&f.push(M)}t[l]=f}else if(l)delete t[l];else if(g)for(l in t)t.hasOwnProperty(l)&&this.__removeObservers(t,l+"."+g)}}__addObservers(t,r,n){for(var a=r.split(" "),c=0;c<a.length;c++){var l=a[c].split("."),g=l[0];if(!g)throw"Must supply a property to observe";var p=l[1],f={namespace:p,callback:n},w=t[g];w?w.push(f):t[g]=[f]}}},Jo=Wg;lr();var kD=function(){{var e=0,t=1,r=2,n=!1,a=function(){c(document),n=!0},c=function(l){n||ee(l).bind("touchstart",function(g){var p=ee(g.target),f=e,w=null;if(!p[0].closest("[disablescroll]"))for(;f===e&&p.length&&p[0].tagName!==void 0;){var M=getComputedStyle(p[0]).overflow,G=getComputedStyle(p[0]).overflowY;if(M!=="hidden"&&M!=="visible"&&G!=="hidden"&&G!=="hidden"){var R=p.scrollTop();R!==0&&(f=r),p.scrollTop(R+1),p.scrollTop()!==R&&(f=t|f,p.scrollTop(R))}p=ee(p[0].parentElement)}if(f!==e){w=[];for(var ue=g.originalEvent.touches,pe=0;pe<ue.length;pe++){var _e={};for(var $e in ue[pe])ue[pe].hasOwnProperty($e)&&(_e[$e]=ue[pe][$e]);w.push(_e)}}ee(document).on("touchmove.scrollfix",function(Le){if(w){var Re=w[0],Je=Le.originalEvent.touches[0],It=Je.screenY-Re.screenY;(It>0&&!(f&r)||It<0&&!(f&t))&&(f=e),It&&(w=null)}f===e&&Le.preventDefault()}),ee(document).on("touchend.scrollfix",function(){ee(document).off(".scrollfix")})})};return{limitScrollOnElement:c,limitScrollOnDocument:a}}}();var{limitScrollOnElement:Av,limitScrollOnDocument:ZF}=kD;function CD(e){Lh?setTimeout(e,25):requestAnimationFrame(e)}var Lv=1,Qo={},fc=!1;function Vv(){fc=!0,CD(TD)}var Gv={};function TD(){Gv.rafSPY&&Gv.rafSPY(),fc=!1;for(let e in Qo)Qo[e].detectAndEnqueueEvent(),fc=!0;if(fc){Vv();for(let e in Qo)Qo[e].dispatchQueuedEvent()}}var yc=class{constructor(t,r){this.elt=t;this.cb=r;this.destroyed=!1;this.lastOffscreen=!1;this.id=Lv.toString(),this.appliedScale={x:1,y:1},Lv++}stopWatching(){delete Qo[this.id]}startWatching(){this.checkForChanges(),Qo[this.id]=this,fc||Vv()}resetAppliedScalingAndGetBoundingClientRect(){var t=this.elt.getBoundingClientRect(),r={x:t.width/this.elt.offsetWidth,y:t.height/this.elt.offsetHeight};if(r.x===this.appliedScale.x&&r.y===this.appliedScale.y)return t;let n=this.elt.querySelector(".dcg-dom-change-wrapper");return n&&(this.appliedScale=r,la(n,{transform:"scale("+1/this.appliedScale.x+","+1/this.appliedScale.y+")",width:100*this.appliedScale.x+"%",height:100*this.appliedScale.y+"%",transformOrigin:"0 0"})),t}detectAndEnqueueEvent(){if(this.destroyed)return;let t=!0;if(!(document.body&&document.body.contains(this.elt)))this.lastSize&&(this.lastSize=void 0,this.queuedEvent={type:"removed",target:this.elt,isOffscreen:!0});else{let n=this.resetAppliedScalingAndGetBoundingClientRect();t=n.top>window.innerHeight||n.bottom<0||n.left>window.innerWidth||n.right<0,this.lastSize?(n.width!==this.lastSize.width||n.height!==this.lastSize.height||window.devicePixelRatio!==this.lastSize.pixelRatio)&&(this.lastSize.width=n.width,this.lastSize.height=n.height,this.lastSize.pixelRatio=window.devicePixelRatio,this.queuedEvent={type:"resized",target:this.elt,size:ye({},this.lastSize),isOffscreen:t}):(this.lastSize={width:n.width,height:n.height,pixelRatio:window.devicePixelRatio},this.queuedEvent={type:"added",target:this.elt,size:ye({},this.lastSize),isOffscreen:t})}t!==this.lastOffscreen&&(this.lastOffscreen=t,this.queuedEvent||(this.queuedEvent={type:"offscreen-noop",target:this.elt,isOffscreen:t}))}dispatchQueuedEvent(){let t=this.queuedEvent;t&&(this.queuedEvent=void 0,this.cb(t))}checkForChanges(){this.detectAndEnqueueEvent(),this.dispatchQueuedEvent()}destroy(){this.stopWatching();for(var t in this)this.hasOwnProperty(t)&&delete this[t];this.destroyed=!0}};var bc=class{constructor(t){if(this.rootElt=t,this.eventModel=new Jo,!t)throw new Error("must pass an HTMLElement to the API")}setupDomChangeDetector(t){this.autoSize=t,Av(this.rootElt),this.domChangeDetector=new yc(this.rootElt,r=>{switch(r.type){case"added":this.view=this.onCreateView(),this.onResizeView(r.size);break;case"removed":this.onDestroyView(),this.view=void 0;break;case"resized":this.onResizeView(r.size);break}}),this.autoSize!==!1?this.domChangeDetector.startWatching():this.domChangeDetector.checkForChanges()}detach(){Vt.warn(".detach() is deprecated. It should no longer be necessary")}destroy(){this.view&&this.onDestroyView(),this.domChangeDetector.destroy();function t(c){Vt.warn("You've destroyed this API instance. You can no longer call ."+c+"()")}for(var r={},n=this;n;)Object.getOwnPropertyNames(n).forEach(l=>r[l]=!0),n=Object.getPrototypeOf(n);for(var a in r)typeof this[a]=="function"?this[a]=t.bind(this,a):this.hasOwnProperty(a)&&delete this[a];this.destroy=function(){}}resize(){this.domChangeDetector.checkForChanges()}updateView(){this.view&&document.body&&document.body.contains(this.rootElt)&&this.view.update()}triggerEvent(t,r){this.eventModel.triggerEvent(t,r)}observeEvent(t,r){this.eventModel.observeEvent(t,r)}unobserveEvent(t){this.eventModel.unobserveEvent(t)}};function Hg(e){return e==="es-ES"?(Vt.warn("{language: 'es-ES'} has been deprecated. Proceeding with {language: 'es'}"),"es"):e}var Wd=he(me());function SD(e){var t={language:"en",autosize:!0,invertedColors:!1,projectorMode:!1,capExpressionSize:!1,textColor:"#000",backgroundColor:"#fff",fontSize:16,settingsMenu:!0,decimalToFraction:!0};e||(e={});for(let r in e)if(t.hasOwnProperty(r)){let n=r;if(n==="textColor"||n==="backgroundColor"){let a=e[n];if(!a)continue;Yo(a)?t[n]=a:Vt.warn(`Invalid ${n}. Color must be a 3- or 6-character hex color (e.g. #000 or #001111)`)}else if(n==="fontSize"){let a=e[n];if(a===void 0)continue;typeof a!="number"?Vt.warn(`Invalid ${n}. fontSize must be a number`):t[n]=a}else if(n==="language"){let a=e[n];if(a===void 0)continue;typeof a!="string"?Vt.warn(`Invalid ${n}. language must be a string`):t[n]=Hg(a)}else t[n]=!!e[n]}return t}function Nv(e){return{allowUndo:!!(e&&e.allowUndo)}}var Kd=class extends bc{constructor(r,n){typeof _Desmos!="undefined"&&typeof desmosLocaleData!="undefined"&&_Desmos.supportedLanguages===void 0&&(_Desmos.supportedLanguages=["en"].concat(Object.keys(desmosLocaleData)));super(r);this.rootElt=r;let a=SD(n);this.settings=new Jo,this.model=new pc(a),this.controller=new mc(this.model,this.settings),this.controller.onEventEmitted=c=>{c==="render"&&this.updateView()},this.setupDomChangeDetector(a.autosize)}updateSettings(r){if(r)for(let n in r)switch(n){case"language":let a=r[n];if(a===void 0)continue;this.controller.dispatch({type:"update-language",language:Hg(a)});break;case"settingsMenu":r.settingsMenu?this.controller.dispatch({type:"enable-settings-menu"}):this.controller.dispatch({type:"disable-settings-menu"});break;case"invertedColors":let c=r[n];if(c===void 0)continue;this.controller.dispatch({type:"update-inverted-colors",invertedColors:c});break;case"projectorMode":{let w=r[n];if(w===void 0)continue;this.controller.dispatch({type:"update-projector-mode",mode:w});break}case"capExpressionSize":let l=r[n];if(l===void 0)return;this.controller.dispatch({type:"update-cap-expression-size",mode:l});break;case"decimalToFraction":this.controller.dispatch({type:"update-decimal-to-fraction",value:!!r[n]});break;case"textColor":let g=r[n];if(g===void 0)continue;if(!Yo(g)){Vt.warn("invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)");continue}this.controller.dispatch({type:"update-text-color",textColor:g});break;case"backgroundColor":let p=r[n];if(p===void 0)continue;if(!Yo(p)){Vt.warn("invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #000 or #001111)");continue}this.controller.dispatch({type:"update-background-color",backgroundColor:p});break;case"fontSize":let f=r[n];if(f===void 0)continue;if(typeof f!="number"){Vt.warn(`Invalid ${n}. fontSize must be a number`);continue}this.controller.dispatch({type:"update-font-size",fontSize:f});break}}onCreateView(){return Wd.mountToNode(cd,this.rootElt,{controller:()=>this.controller})}onDestroyView(){Wd.unmountFromNode(this.rootElt)}onResizeView(r){this.controller.dispatch({type:"ui/container-resized",size:r})}getState(){return ln(this.controller.getPersistedState())}setState(r,n){let a;typeof r=="string"?a=JSON.parse(r):a=ln(r||{}),this.controller.setStateFromAPI(a,Nv(n))}setBlank(r){this.controller.clearFromAPI(Nv(r))}focusFirstExpression(){this.controller.focusFirstExpression()}};function jg(...e){return new Kd(...e)}jg.prototype=Kd.prototype;ho();lr();var xn=he(me());var Ov=he(Pv()),Fv=he(me());ho();function _v(e){nd(document.body),/testing/.test(document.location.search)||of(Ov.default);let t=document.getElementById("main-container");if(!t)throw'Expected to find an element with id="main-container"';let r=Fv.mountToNode(e,t,{});return document.querySelector(".dcg-loading-div-container").style.display="none",Th(),r}var pr=he(me());var _=he(me());lr();var jd=he(me());var Hd=class extends jd.Class{template(){return jd.createElement("span",{onMount:this.bindFn(this.addSVGLogo)})}addSVGLogo(t){t.innerHTML=`
    <svg version="1.1" class="dcg-desmos-svg-logo" id="svg-desmos" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
    viewBox="0 0 909.3 188.4" xml:space="preserve">
    <title>${Ve("frontpage-narration-shared-desmos-logo")}</title>
    <g>
      <path d="M129.6,0c-6.8,0-12.4,5.5-12.4,12.4v48c-27.7-25.4-70.6-24-96.7,3.1c-27.4,28.4-27.4,73.4,0,101.8
        c26.1,27.1,69.1,28.4,96.8,3v8.8c2,6.5,9,10.2,15.5,8.2c3.9-1.2,7-4.3,8.2-8.2V12.4C141.1,5.9,136.1,0.5,129.6,0z M103.9,148.7
        c-17.3,18.2-46.1,18.9-64.3,1.6c-0.6-0.5-1.1-1.1-1.6-1.6c-18.4-19.2-18.4-49.5,0-68.7c17.3-18.2,46.1-18.9,64.3-1.6
        c0.6,0.5,1.1,1.1,1.6,1.6C122.3,99.3,122.3,129.6,103.9,148.7z"/>
      <path d="M298.3,124c2.2-2.3,3.4-5.3,3.5-8.4c-0.1-19-7.6-37.2-20.9-50.7c-26.6-27.6-70.6-28.4-98.2-1.8c-0.6,0.6-1.2,1.2-1.8,1.8
        c-27.4,28.4-27.4,73.4,0,101.8c21.8,22.6,56.2,27.7,83.7,12.4c10-5.6,18.5-13.5,24.8-23.1c3.4-5.5,1.9-12.7-3.3-16.5
        c-5.5-3.3-12.6-1.7-16.4,3.5c-4.2,6.4-9.9,11.6-16.6,15.4c-6.8,3.8-14.4,5.8-22.2,5.8c-12.5,0-24.4-5.1-33.1-14.1
        c-6-6.3-10.3-14-12.4-22.4h104C292.7,127.6,296,126.3,298.3,124z M231.3,67.2c12.4,0.1,24.3,5.2,33,14.1
        c6.1,6.3,10.4,14.1,12.4,22.6h-90.7c2.1-8.5,6.3-16.3,12.4-22.6C207,72.4,218.8,67.3,231.3,67.2z"/>
      <path d="M763.5,63c-26.7-28.1-71.1-29.2-99.2-2.5c-0.8,0.8-1.7,1.6-2.5,2.5c-13.7,13.9-21.3,32.7-20.9,52.2
        c-0.2,19.3,7.2,37.8,20.7,51.6c27.7,28.2,73.1,28.7,101.3,0.9c0.3-0.3,0.6-0.6,0.9-0.9c13.4-13.8,20.9-32.4,20.7-51.7
        c0.2-19.4-7.3-38.2-21.1-51.9 M712.8,66.7c12.4,0,24.2,5.2,32.5,14.4c8.9,9.2,13.8,21.5,13.6,34.3c0.2,12.7-4.6,25-13.5,34.1
        c-8.5,9.2-20.5,14.2-33,13.9c-12.3,0.3-24.2-4.7-32.5-13.8c-8.8-9.1-13.6-21.4-13.3-34.1c-0.3-12.9,4.7-25.4,13.8-34.6
        c8.2-9.3,20-14.6,32.4-14.4"/>
      <path d="M623.8,92.6v81.9c0.3,6.8-4.9,12.7-11.8,13c-6.8,0.3-12.7-4.9-13-11.8V93.1c0-7.5-3-14.6-8.3-19.8
        c-4.3-4.7-10.2-7.6-16.5-8.1h-1.9c-7-0.1-13.6,2.9-18.2,8.2c-4.8,4.9-7.5,11.5-7.7,18.3v2l0,0v81.1c0,6.8-5.5,12.4-12.4,12.4
        c-6.5,0-11.9-4.9-12.4-11.4V91.5c-0.6-4.3-1.8-8.4-3.5-12.4c-1.2-2.3-2.6-4.5-4.3-6.4c-4.7-5.2-11.3-8.3-18.3-8.3
        c-7,0-13.6,3-18.1,8.3c-5.1,5.2-8,12.3-7.9,19.6V176c-0.8,6.3-6.1,11-12.4,10.9c-6.8,0-12.4-5.5-12.4-12.4V52.9
        c-0.7-6.8,4.2-12.9,11-13.6c5.9-0.6,11.4,3,13.1,8.7l2.9-1.9c7.4-3.9,15.6-6,23.9-5.9c12.3-0.1,24.1,4.3,33.3,12.4
        c1.1,0.9,2.1,2,3,3.1c0.9,0.7,1.7,1.5,2.5,2.4l2.2-2.4c0.9-1.1,1.9-2.2,3-3.1c9.2-8.1,21-12.5,33.2-12.4h4.3
        c10.8,0.8,21,5.1,29,12.4c0.9,1,2,1.9,3,2.9C618.9,65.3,624,78.7,623.8,92.6"/>
      <path d="M427.2,145.4c0.1,23.4-18.6,42.5-42,43h-50.8c-6.8,0-12.4-5.5-12.4-12.4s5.5-12.4,12.4-12.4H384c10-0.2,17.9-8.4,17.8-18.3
        c0.1-9.9-7.9-18-17.8-18.1c0,0-0.1,0-0.1,0h-24.8c-23.8-1.3-42-21.6-40.8-45.4c1.2-22,18.8-39.6,40.8-40.8h50.2
        c6.8,0,12.4,5.5,12.4,12.4s-5.5,12.4-12.4,12.4h-49.1c-10,0.8-17.5,9.6-16.7,19.7c0.7,8.9,7.8,15.9,16.7,16.7H385
        c5.9,0,11.8,1.2,17.2,3.7C417.7,112.8,427.2,128.4,427.2,145.4"/>
      <path d="M908.9,145.2c0,23.4-18.3,42.7-41.6,43.3h-50.8c-6.8,0-12.4-5.5-12.4-12.4s5.5-12.4,12.4-12.4h50.2
        c10-0.2,17.9-8.4,17.8-18.3c0.1-9.9-7.9-18-17.8-18.1c0,0-0.1,0-0.1,0h-24.8c-23.8-1.3-42-21.6-40.8-45.4
        c1.2-22,18.8-39.6,40.8-40.8h49.6c6.8,0,12.4,5.5,12.4,12.4s-5.5,12.4-12.4,12.4h-49.6c-10.1,0-18.2,8.2-18.2,18.2c0,0,0,0,0,0
        c0,9.9,8,18,17.8,18.1h24.8c5.9,0,11.8,1.3,17.2,3.7C898.9,112.8,908.9,128.2,908.9,145.2"/>
    </g>
    </svg>
    `}};var yn=he(me()),Yd=he(Yv());var Qg=/\{\$([a-zA-Z0-9\-]+([a-zA-Z0-9\-]+_)*[a-zA-Z0-9\-]+)\}/;function Jv(e,t){let r=0,n=0,a={},c={},l=g(e);if(!/^<0>/.test(l)||!/<\/0>$/.test(l))throw new Error("Expected template string to start and end with <0> and </0>, but found "+JSON.stringify(l));return l.slice(3,-4).trim();function g(f){if(t.isConst(f))return PD(t.getConstValue(f));if(t.isNamedBinding(f)){let w=p(a,t.getBindingName(f)),M=`{$${w}}`;if(!Qg.test(M))throw new Error(`Invalid <Localize> variable: ${M}.`);return t.addBinding&&t.addBinding(w,f),a[w]=!0,M}else if(f!==e&&t.isView(f)){let w=p(c,t.getViewName(f));if(!/[a-zA-Z0-9\-_]/.test(w))throw new Error(`Invalid <Localize> subview identifier: ${w}.`);return t.addView&&t.addView(w,f),c[w]=!0,`<${w}/>`}else if(t.isBinding(f)){let w=p(a,`v${r++}`),M=`{$${w}}`;return t.addBinding&&t.addBinding(w,f),a[w]=!0,M}else{let w=`${n++}`;t.addElement&&t.addElement(w,f);let M=[];return t.forEachChild(f,G=>{M.push(g(G))}),c[w]=!0,M.length>0?`<${w}>${M.join("")}</${w}>`:`<${w}/>`}}function p(f,w){let M=0,G=w;for(;f[G];)G=`${w}-${++M}`;return G}}var ID=!0;function PD(e){return ID?e:e.replace(/\{|\}/g,t=>`{"${t}"}`).replace(/(^|[\s\n]+)(\[|\]|\.)/g,(t,r,n)=>`${r}{"${n}"}`)}function OD(e){return e.__DCGViewLocalizeBindingName}function FD(e){return typeof e=="function"&&e.__DCGViewLocalizeViewName}var Pr=class extends yn.Class{init(){this.viewMap={},this.elementMap={},this.bindingMap={},this.i18n=this.props.i18n(),this.templateString=this.serializeToTemplateString(yn.createElement("div",null,this.children))}template(){return yn.createElement(yn.Components.If,{predicate:()=>this.shouldShow()},()=>yn.createElement(yn.Components.Switch,{key:()=>Xg(this.translatedString())},t=>this.renderDeserializedTemplateNode(this.parseAndValidate(t))))}shouldShow(){let t=this.props.options&&this.props.options();return t&&t.hideUntranslatedView&&this.i18n.hasTranslation?this.i18n.hasTranslation(this.props.key()):!0}translatedString(){let t={};for(let r in this.bindingMap)t[r]=Vi(`{$${r}}`);return this.i18n.s(this.props.key(),t)}static variable(t,r){let n=()=>r();return n.__DCGViewLocalizeBindingName=t,n}static subview(t,r){let n=()=>r();return n.__DCGViewLocalizeViewName=t,n}parseAndValidate(t){let r=(0,Yd.parse)(t),n={},a={};c(r);for(let l in this.elementMap)if(!a[l])return(0,Yd.parse)(Xg(this.templateString));for(let l in this.bindingMap)if(!n[l])return(0,Yd.parse)(Xg(this.templateString));return r;function c(l){if(Array.isArray(l)){for(let g of l)c(g);return}l.name==="token"?n[l.attrs.id]=!0:l.type!=="text"&&(a[l.name]=!0,c(l.children))}}renderDeserializedTemplateNode(t){if(Array.isArray(t))return t.map(r=>this.renderDeserializedTemplateNode(r));if(t.type==="text")return yn.const(t.content||"");if(t.name==="token"){let r=this.bindingMap[t.attrs.id];return r||(()=>"")}else if(this.elementMap[t.name]){let r=this.elementMap[t.name],n=t.children.map(a=>this.renderDeserializedTemplateNode(a));return Xv(r.type,r.attrs,n)}else return this.viewMap[t.name]?this.viewMap[t.name]():Xv("span",{},[])}serializeToTemplateString(t){return Jv(t,{isView:FD,isConst:Qv,isBinding:r=>typeof r=="function",isNamedBinding:OD,getConstValue:r=>r(),getBindingName:r=>r.__DCGViewLocalizeBindingName,getViewName:r=>r.__DCGViewLocalizeViewName,addBinding:(r,n)=>{this.bindingMap[r]=n},addElement:(r,n)=>{this.elementMap[r]={type:n.tagName,attrs:n.attrs}},addView:(r,n)=>{if(this.viewMap[r])throw new Error(`Unexpected duplicate view ${r}.`);this.viewMap[r]=n},forEachChild:(r,n)=>{for(let a of r.children){if(!Qv(a)&&typeof a!="function"&&a._isDCGView)throw new Error("Bare DCGViews are not allowed inside <Localize>. Use Localize.subview().");n(a)}}})}};function Qv(e){return typeof e=="function"&&e.isDCGViewConst}function Xv(e,t,r){return yn.createElement(e,t,r)}function Xg(e){return`<0>${e}</0>`.replace(new RegExp(Qg.source,"g"),(r,n)=>`<token id="${n}"/>`)}var Zv={"homepage-cta":"hc","promo-header":"ph","promo-bottom":"pb","demo-link":"dl","header-dropdown":"hd"},Zg=Sl(Zv),_D=pp(Zg);if(Zg.length!==_D.length)throw new Error(`Expected referrer locations to have a unique set of short codes, but found duplicates: ${Zg.sort()}`);function ek(e,t){return`${e}?r=w.${Zv[t]}`}var RD=[{href:"/calculator",icon:"dcg-icon-graphing",text:()=>Ve("frontpage-link-shared-graphing-calculator")},{href:"/scientific",icon:"dcg-icon-scientific",text:()=>Ve("frontpage-link-shared-scientific-calculator")},{href:"/fourfunction",icon:"dcg-icon-four-function",text:()=>Ve("frontpage-link-shared-four-function-calculator")},{href:"/practice",icon:"dcg-icon-test-mode",text:()=>Ve("frontpage-link-shared-test-practice")},{href:"/matrix",icon:"dcg-icon-matrix",text:()=>Ve("frontpage-link-shared-matrix-calculator")},{href:"/geometry",icon:"dcg-icon-geometry",text:()=>Ve("frontpage-link-shared-geometry-tool")}],qD=[{href:"https://teacher.desmos.com",text:()=>Ve("frontpage-link-main-for-teachers")},{href:"https://student.desmos.com",text:()=>Ve("frontpage-link-main-for-students")},{href:"/curriculum",text:()=>Ve("frontpage-link-shared-curriculum")}],BD=[{href:"/about",text:()=>Ve("frontpage-link-shared-about-us")},{href:"/careers",text:()=>Ve("frontpage-link-shared-careers")},{href:"https://help.desmos.com",text:()=>Ve("frontpage-link-shared-help-center")},{href:"/accessibility",text:()=>Ve("shared-calculator-label-accessibility")},{href:"/testing",text:()=>Ve("frontpage-link-shared-assessments")},{href:"/equity",text:()=>Ve("frontpage-link-shared-equity-principles")},{href:"/guiding-principles",text:()=>Ve("frontpage-link-shared-guiding-principles")},{href:"//store.desmos.com",text:()=>Ve("frontpage-link-shared-store")},{href:"https://blog.desmos.com",text:()=>Ve("frontpage-link-shared-blog")}],qi={MATH_TOOLS:{links:RD,title:()=>Ve("frontpage-link-header-math-tools")},CLASSROOM:{links:qD,title:()=>Ve("frontpage-link-header-classroom")},RESOURCES:{links:BD,title:()=>Ve("frontpage-link-header-resources")}};var rn=he(me());var bn=he(me());var Ue=he(me());lr();var eh=class{constructor(){this.handlers=[],ee(document).on("keydown.delegator",t=>this.handleEvent(t))}push(t){let r=If("delegator_");return this.handlers.push({token:r,handler:t}),()=>this.handlers=Ds(this.handlers,n=>n.token!=r)}handleEvent(t){if(!t.isDefaultPrevented()&&this.handlers.length){let r=!1,n=()=>r=!0;for(let{handler:a}of this.handlers.slice().reverse())if(a(t,n),r)return}}},tk=new eh;var{If:rk}=Ue.Components,Er=class extends Ue.Class{init(){this.i18n=this.props.i18n(),this.isMounted=!1}template(){return Ue.createElement("div",{class:()=>({"dcg-shared-modal-container":!0,[this.props.class?this.props.class():""]:!!this.props.class}),didMount:this.bindFn(this.didMount),didUnmount:this.bindFn(this.didUnmount)},Ue.createElement("div",{class:()=>({"dcg-shared-modal-cover":!0,"dcg-shared-has-close-button":this.showX(),"dcg-shared-modal-fullscreen":this.props.size()==="fullscreen","dcg-shared-modal-wide":this.props.size()==="wide","dcg-shared-modal-medium":this.props.size()==="medium","dcg-shared-modal-narrow":this.props.size()==="narrow"})},Ue.createElement("div",{class:Ue.const("dcg-shared-modal-background"),onTap:this.props.onClose}),Ue.createElement("div",{class:Ue.const("dcg-shared-modal-transition-container")},Ue.createElement("div",{class:Ue.const("dcg-shared-modal"),role:Ue.const("dialog"),"aria-modal":Ue.const("true"),"aria-label":()=>{let t="";return this.props.ariaLabel?t=this.props.ariaLabel():this.props.title&&(t=this.props.title()),t}},Ue.createElement(rk,{predicate:()=>this.showX()},()=>Ue.createElement("div",{class:Ue.const("dcg-shared-close-cross-container")},Ue.createElement(Xr,{tooltip:()=>this.i18n.s("shared-button-close-dialog")},Ue.createElement("div",{role:Ue.const("link"),tabindex:Ue.const("0"),"aria-label":()=>this.i18n.s("shared-button-close-dialog"),class:Ue.const("dcg-shared-close-cross"),onTap:this.props.onClose},Ue.createElement("i",{class:Ue.const("dcg-icon-remove"),"aria-hidden":Ue.const("true")}))))),Ue.createElement("div",{class:Ue.const("dcg-shared-modal-contents-wrapper")},Ue.createElement(rk,{predicate:()=>!!this.props.title&&!!this.props.title()},()=>Ue.createElement("h1",{class:()=>({"dcg-shared-modal-title":!0,"dcg-shared-left-align-title":this.leftAlignTitle()})},()=>this.props.title())),Ue.createElement("div",{class:Ue.const("dcg-shared-modal-scrollable-content")},this.children))))))}showX(){return!!this.props.showX&&this.props.showX()}leftAlignTitle(){return!!this.props.leftAlignTitle&&this.props.leftAlignTitle()}didMount(){var g,p;if(this.isMounted)return;this.isMounted=!0;let t=this.findRootNode();function r(){let f=t.querySelector(".dcg-shared-close-cross");f&&f.focus()}function n(){let f=t.querySelector(".dcg-shared-modal-scrollable-content");f&&(f.tabIndex>=0||(f.tabIndex=0),f.focus())}let a=t.querySelector(".dcg-shared-modal-scrollable-content"),c=(p=(g=this.props).setFocus)==null?void 0:p.call(g);c==="close"?this.showX()?r():a&&n():c==="content"&&n();let l=Gb(t);this.unsub=tk.push((f,w)=>{qt(f)==Ol&&(this.onClose(),w());let M=f.altKey||f.shiftKey||f.metaKey||f.ctrlKey;this.props.onArrowKey&&qt(f)===kb&&!M&&this.props.onArrowKey("Left"),this.props.onArrowKey&&qt(f)===Eb&&!M&&this.props.onArrowKey("Right"),l(f)})}onClose(){this.props.onClose&&this.props.onClose()}didUnmount(){this.isMounted&&(this.isMounted=!1,this.unsub())}};var Jd=class extends bn.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller}template(){return bn.createElement(Er,{title:()=>this.i18n.s("shared-title-account-reactivated"),size:this.const("narrow"),showX:this.const(!0),onClose:()=>this.controller.dispatch({type:"close-modal"}),i18n:this.props.controller},bn.createElement("div",{class:bn.const("dcg-shared-recover-password-dialog dcg-shared-account-dialog")},bn.createElement("div",{class:bn.const("dcg-shared-account-paragraph")},()=>this.i18n.s("shared-message-account-reactivated")),bn.createElement("div",{class:bn.const("dcg-shared-modal-actions-container")},bn.createElement("button",{class:()=>({"dcg-btn-blue":!0}),onTap:()=>this.controller.dispatch({type:"close-modal"})},()=>this.i18n.s("shared-button-continue-to-desmos")))))}};var wt=he(me());var j=he(me());var Fe=he(me());var tn=he(me());var{If:UD,For:$D}=tn.Components,cr=class extends tn.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller}template(){return tn.createElement(UD,{predicate:()=>!!this.props.errors().length},()=>tn.createElement($D,{each:this.props.errors},tn.createElement("span",null,t=>tn.createElement("div",{class:tn.const("dcg-shared-account-modal-errors"),role:tn.const("alert")},tn.createElement("span",null,()=>this.i18n.raw(t))))))}};var Qd=class extends Fe.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.formErrors=[]}template(){return Fe.createElement("div",{class:Fe.const("dcg-shared-delete-account dcg-shared-account-settings-section")},Fe.createElement("h1",{class:Fe.const("dcg-shared-left-align-title")},()=>this.i18n.s("shared-title-delete-account")),Fe.createElement("div",{class:Fe.const("dcg-shared-account-paragraph")},Fe.createElement(Pr,{key:this.const("shared-message-delete-account-notice"),i18n:this.props.controller},Fe.const("When you delete your account,"),Fe.const(" "),Fe.createElement("b",null,Fe.const("we will retain your data for 30 days.")),Fe.const(" "),Fe.const("You can reactivate your account at any time during those 30 days by logging back in."),Fe.const(" "),Fe.const("If there's something about Desmos we can improve, please"),Fe.const(" "),Fe.createElement("a",{href:Fe.const("mailto:support@desmos.com"),class:Fe.const("dcg-blue-link")},Fe.const("let us know.")))),Fe.createElement("div",{class:Fe.const("dcg-shared-account-paragraph")},()=>this.i18n.s("shared-message-delete-account-will-send-email",{email:this.i18n.raw(this.controller.userController.getEmail())})),Fe.createElement("form",{onSubmit:this.bindFn(this.onSubmit)},Fe.createElement(cr,{controller:this.props.controller,errors:()=>this.formErrors}),Fe.createElement("div",{class:Fe.const("dcg-shared-modal-actions-container")},Fe.createElement("div",{role:Fe.const("link"),tabindex:Fe.const(0),class:Fe.const("dcg-gray-link"),onTap:()=>(this.controller.logJSON("shared-delete-account",{action:"cancel-delete-account"}),this.props.hideForm())},()=>this.i18n.s("shared-button-cancel")),Fe.createElement("button",{class:()=>({"dcg-btn-red":!0,"dcg-disabled":this.disabled}),"aria-disabled":()=>this.disabled,tabindex:()=>this.disabled?"-1":"0",type:Fe.const("submit")},()=>this.i18n.s("shared-button-send-delete-account-email")))))}onAccountDeleted(){return this.props.submitForm()}onAccountDeletionFailed(){if(this.formErrors=[this.controller.getSomethingWentWrongText()],!this.unmounted)return this.update()}doDeleteAccount(){this.disabled||(this.controller.logJSON("shared-delete-account",{action:"send-delete-account-email"}),this.controller.userController.initiateAccountDeletion({lang:this.controller.getLanguage()}).then(this.bindFn(this.onAccountDeleted),this.bindFn(this.onAccountDeletionFailed)))}didUnmount(){return this.unmounted=!0}onSubmit(t){t.preventDefault(),this.doDeleteAccount()}};var xe=he(me());var{If:th}=xe.Components,Xo=0,nk=1,zD=2,ak=3,Xd=class extends xe.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.formStatus=Xo,this.emailDisabled=null}template(){return xe.createElement("div",{class:xe.const("dcg-shared-email-field-container")},xe.createElement(th,{predicate:()=>this.formStatus===Xo},()=>xe.createElement("div",{class:xe.const("dcg-shared-email-field")},xe.createElement("div",{class:xe.const("dcg-shared-profile-info-container")},xe.createElement("span",{class:xe.const("dcg-shared-profile-info-title"),role:xe.const("heading"),"aria-level":xe.const("1")},()=>this.i18n.s("shared-title-email-settings")),xe.createElement("div",{class:xe.const("dcg-shared-profile-info-content")},()=>this.i18n.raw(this.controller.userController.getEmail()),xe.createElement("div",{class:xe.const("dcg-shared-message-container")},xe.createElement("div",{role:xe.const("link"),tabindex:xe.const(0),class:xe.const("dcg-blue-link"),onTap:()=>this.setFormStatus(nk)},()=>this.i18n.s("shared-button-change-email-address"))))))),xe.createElement(th,{predicate:()=>this.formStatus===nk},()=>xe.createElement("div",{class:xe.const("dcg-shared-change-email-container")},xe.createElement("div",{class:xe.const("dcg-shared-change-email-description")},()=>this.i18n.s("shared-message-email-settings-will-send-email",{emailAddress:this.i18n.raw(this.controller.userController.getEmail())})),xe.createElement(cr,{controller:this.props.controller,errors:()=>this.formErrors}),xe.createElement("div",{class:xe.const("dcg-shared-modal-actions-container")},xe.createElement("span",{role:xe.const("link"),tabindex:xe.const(0),class:xe.const("dcg-gray-link"),onTap:()=>this.setFormStatus(Xo)},()=>this.i18n.s("shared-button-cancel")),xe.createElement("button",{class:()=>({"dcg-btn-blue":!0,"dcg-disabled":this.emailDisabled}),"aria-disabled":()=>this.disabled,tabindex:()=>this.disabled?"-1":"0",type:xe.const("submit"),onTap:()=>this.emailDisabled||this.sendChangeEmail()},()=>this.i18n.s("shared-button-send-email"))))),xe.createElement(th,{predicate:()=>this.formStatus===ak},()=>xe.createElement("div",{"aria-live":xe.const("assertive"),"aria-atomic":xe.const("true"),class:xe.const("dcg-shared-confirmation-message-container")},xe.createElement("div",{class:xe.const("dcg-shared-confirmation-message")},xe.createElement("i",{class:()=>({"dcg-icon-check":!0,"dcg-success-marker":!0}),"aria-hidden":xe.const("true")}),()=>this.i18n.s("shared-message-email-sent")),xe.createElement("div",null,()=>this.i18n.s("shared-message-check-email-for-link",{emailAddress:this.i18n.raw(this.controller.userController.getEmail())})))))}didUnmount(){this.unmounted=!0}setToast(t){this.toastMessage||(this.toastMessage=t,this.unmounted||this.update(),setTimeout(()=>{this.toastMessage=null,this.unmounted||this.update()},5e3),this.formStatus===zD&&setTimeout(()=>{this.setFormStatus(Xo),this.unmounted||this.update()},5200))}setFormStatus(t){this.formStatus=t,this.toastMessage=null,this.formErrors=[],this.update()}onEmailSent(){this.formStatus=ak,this.emailDisabled=null,this.unmounted||this.update(),setTimeout(()=>{this.formStatus=Xo,this.unmounted||this.update()},5e3),setTimeout(()=>{this.formStatus=Xo,this.unmounted||this.update()},5200)}onEmailSendingFailed(){this.formErrors=[this.controller.getSomethingWentWrongText()],this.emailDisabled=null,this.unmounted||this.update()}sendChangeEmail(){this.emailDisabled=!0,this.unmounted||this.update(),this.controller.userController.initiateEmailChange({lang:this.controller.getLanguage()}).then(this.bindFn(this.onEmailSent),this.bindFn(this.onEmailSendingFailed))}};var{If:ok,Input:ah,Switch:KD,SwitchUnion:WD}=j.Components,rh=0,ik=1,nh=2,Zd=class extends j.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.deleteAccount=rh}template(){return j.createElement("div",{class:j.const("dcg-shared-profile-info dcg-shared-account-settings-section")},j.createElement(KD,{key:()=>this.deleteAccount},t=>{switch(t){case rh:return j.createElement("div",null,j.createElement("div",{class:j.const("dcg-shared-email-form-container")},j.createElement(ih,{controller:this.props.controller})),j.createElement(Xd,{controller:this.props.controller}),j.createElement("div",{role:j.const("link"),tabindex:j.const(0),class:j.const("dcg-gray-link dcg-shared-delete-link"),onTap:()=>this.confirmDeletion()},()=>this.i18n.s("shared-button-delete-account-question")));case ik:return j.createElement(Qd,{hideForm:()=>this.setDeleteAccount(rh),submitForm:()=>this.setDeleteAccount(nh),controller:this.props.controller});case nh:return j.createElement("div",{"aria-live":j.const("assertive"),"aria-atomic":j.const("true"),class:j.const("dcg-shared-confirmation-message-container")},j.createElement("div",{class:j.const("dcg-shared-confirmation-message")},j.createElement("i",{class:()=>({"dcg-icon-check":!0,"dcg-success-marker":!0}),"aria-hidden":j.const("true")}),()=>this.i18n.s("shared-message-email-sent")),j.createElement("div",null,()=>this.i18n.s("shared-message-check-email-for-delete-link",{emailAddress:this.i18n.raw(this.controller.userController.getEmail())})))}}))}didUnmount(){this.unmounted=!0}setDeleteAccount(t){this.deleteAccount=t,t===nh&&setTimeout(()=>{this.controller.userController.logout().then(()=>this.controller.dispatch({type:"close-modal"}))},5e3),this.unmounted||this.update()}confirmDeletion(){this.controller.logJSON("shared-profile-info",{action:"delete-account"}),this.setDeleteAccount(ik),this.unmounted||this.update()}},ih=class extends j.Class{init(){this.controller=this.props.controller();let t=this.controller.userController.getNameDetail();t.source=="legacy"?this.state={state:"legacy",name:t.given,previousName:t.given}:t.source=="parsed"?this.state={state:"name-detail",confirm:!0,given:t.given,family:t.family||"",previousGiven:"",previousFamily:""}:this.state={state:"name-detail",confirm:!1,given:t.given,family:t.family||"",previousGiven:t.given,previousFamily:t.family||""}}template(){return WD("state",()=>this.state)({legacy:t=>j.createElement(oh,{state:t,controller:this.props.controller,onSaveName:this.bindFn(this.onSaveName),showSavedNotice:()=>this.showSavedNotice,updateState:r=>{this.state.state=="legacy"&&(this.state=ye(ye({},this.state),r),this.unmounted||this.update())}}),"name-detail":t=>j.createElement(sh,{state:t,controller:this.props.controller,showSavedNotice:()=>this.showSavedNotice,onSaveName:this.bindFn(this.onSaveName),updateState:r=>{this.state.state=="name-detail"&&(this.state=ye(ye({},this.state),r),this.unmounted||this.update())}})})}onSaveName(){switch(this.state.state){case"legacy":this.controller.userController.setNameLegacy({name:this.state.name,lang:this.controller.getLanguage()}).then(this.bindFn(this.onSaved));break;case"name-detail":this.controller.userController.setNameDetail({given:this.state.given,family:this.state.family,lang:this.controller.getLanguage()}).then(this.bindFn(this.onSaved));break}}maybeUpdate(){this.unmounted||this.update()}onSaved(){switch(this.state.state){case"legacy":this.state.previousName=this.state.name;break;case"name-detail":this.state.previousGiven=this.state.given,this.state.previousFamily=this.state.family,this.state.confirm=!1;break}this.showSavedNotice=!0,this.maybeUpdate(),setTimeout(()=>{this.showSavedNotice=!1,this.maybeUpdate()},3e3)}willUnmount(){this.unmounted=!0}didMount(){this.unmounted=!1}},oh=class extends j.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller}template(){return j.createElement("div",{class:j.const("dcg-shared-name-field")},j.createElement("div",{class:j.const("dcg-shared-profile-info-container")},j.createElement("span",{class:j.const("dcg-shared-profile-info-title"),role:j.const("heading"),"aria-level":j.const("1")},()=>this.i18n.s("shared-label-name")),j.createElement(ah,{type:j.const("text"),name:j.const("name"),class:j.const("dcg-shared-input-blue-outline dcg-shared-profile-info-content"),didMount:this.bindFn(this.didMountName),onInput:this.bindFn(this.onNameInput),"aria-label":()=>this.i18n.s("shared-label-name"),value:()=>this.props.state().name,autocomplete:j.const("off")})),j.createElement("div",{class:j.const("dcg-shared-modal-actions-container")},j.createElement(eu,{showSavedNotice:this.props.showSavedNotice,i18n:this.props.controller}),j.createElement("div",{role:j.const("button"),"aria-disabled":this.bindFn(this.nameFieldDisabled),tabindex:()=>this.nameFieldDisabled()?"-1":"0",class:()=>({"dcg-btn-blue":!0,"dcg-disabled":this.nameFieldDisabled()}),onTap:this.bindFn(this.onSaveName)},()=>this.i18n.s("shared-button-save"))))}onNameInput(t){this.props.updateState({name:t})}didMountName(t){Tn||t.focus()}onSaveName(){this.nameFieldDisabled()||this.props.onSaveName()}nameFieldDisabled(){let t=this.props.state();return!t.name||t.name===t.previousName}},sh=class extends j.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller}template(){return j.createElement("div",{class:j.const("dcg-shared-name-field")},j.createElement("div",{class:()=>({"dcg-shared-confirm-name":this.props.state().confirm})},j.createElement(ok,{predicate:()=>this.props.state().confirm},()=>j.createElement("span",null,()=>this.i18n.s("shared-message-please-review-name"))),j.createElement("div",{class:j.const("dcg-shared-profile-info-container")},j.createElement("div",{class:j.const("dcg-shared-name-input")},j.createElement("span",{class:j.const("dcg-shared-profile-info-title"),role:j.const("heading"),"aria-level":j.const("1")},()=>this.i18n.s("shared-label-given-name-or-nickname")),j.createElement(ah,{type:j.const("text"),name:j.const("given-name"),class:j.const("dcg-shared-input-blue-outline dcg-shared-profile-info-content"),didMount:this.bindFn(this.didMountName),onInput:t=>this.props.updateState({given:t}),"aria-label":()=>this.i18n.s("shared-label-given-name-or-nickname"),value:()=>this.props.state().given,autocomplete:j.const("off")})),j.createElement("div",{class:j.const("dcg-shared-name-input")},j.createElement("span",{class:j.const("dcg-shared-profile-info-title"),role:j.const("heading"),"aria-level":j.const("1")},()=>this.i18n.s("shared-label-family-name")),j.createElement(ah,{type:j.const("text"),name:j.const("family-name"),class:j.const("dcg-shared-input-blue-outline dcg-shared-profile-info-content"),onInput:t=>this.props.updateState({family:t}),"aria-label":()=>this.i18n.s("shared-label-family-name"),value:()=>this.props.state().family,autocomplete:j.const("off")}))),j.createElement("div",{class:j.const("dcg-shared-modal-actions-container")},j.createElement(eu,{i18n:this.props.controller,showSavedNotice:this.props.showSavedNotice}),j.createElement("div",{role:j.const("button"),"aria-disabled":()=>!this.canSubmit(),tabindex:()=>this.canSubmit()?"0":"-1",class:()=>({"dcg-btn-blue":!0,"dcg-disabled":!this.canSubmit()}),onTap:this.bindFn(this.onSaveName)},()=>this.props.state().confirm?this.i18n.s("shared-button-confirm-name"):this.i18n.s("shared-button-save")))))}didMountName(t){Tn||t.focus()}onSaveName(){this.canSubmit()&&this.props.onSaveName()}canSubmit(){let t=this.props.state();return t.given?t.confirm?!0:!(t.given===t.previousGiven&&t.family===t.previousFamily):!1}},eu=class extends j.Class{template(){return j.createElement(ok,{predicate:()=>this.props.showSavedNotice()},()=>j.createElement("span",{"aria-live":j.const("assertive"),"aria-atomic":j.const("true"),class:j.const("dcg-shared-confirmation-message")},j.createElement("i",{class:()=>({"dcg-icon-check":!0,"dcg-success-marker":!0}),"aria-hidden":j.const("true")}),()=>this.props.i18n().s("shared-message-information-saved")))}};var at=he(me());var{If:sk}=at.Components,HD=0,ch=1,ck=2,tu=class extends at.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.mode=ch,this.formErrors=[]}template(){return at.createElement("div",{class:at.const("dcg-shared-change-password dcg-shared-account-settings-section")},at.createElement(sk,{predicate:()=>this.mode===ch},()=>at.createElement("div",{class:at.const("dcg-shared-reset-by-email")},at.createElement("div",{class:at.const("dcg-shared-account-paragraph")},()=>this.i18n.s("shared-message-change-password-email-sent",{emailAddress:this.i18n.raw(this.controller.userController.getEmail())})),at.createElement(cr,{controller:this.props.controller,errors:()=>this.formErrors}),at.createElement("div",{class:at.const("dcg-shared-modal-actions-container")},at.createElement("div",{role:at.const("button"),"aria-disabled":()=>this.emailDisabled,tabindex:()=>this.emailDisabled?"-1":"0",class:()=>({"dcg-btn-blue":!0,"dcg-disabled":this.emailDisabled}),onTap:()=>this.sendResetPasswordEmail()},()=>this.i18n.s("shared-button-send-email"))))),at.createElement(sk,{predicate:()=>this.mode===ck},()=>at.createElement("div",{"aria-live":at.const("assertive"),"aria-atomic":at.const("true"),class:at.const("dcg-shared-confirmation-message-container")},at.createElement("div",{class:at.const("dcg-shared-confirmation-message")},at.createElement("i",{class:()=>({"dcg-icon-check":!0,"dcg-success-marker":!0}),"aria-hidden":at.const("true")}),()=>this.i18n.s("shared-message-email-sent")),at.createElement("div",null,()=>this.i18n.s("shared-message-check-email-for-password-link",{emailAddress:this.i18n.raw(this.controller.userController.getEmail())})))))}didUnmount(){this.unmounted=!0}onEmailSent(){this.mode=ck,this.unmounted||this.update(),setTimeout(()=>{this.mode=HD,this.unmounted||this.update()},5e3),setTimeout(()=>{this.mode=ch,this.unmounted||this.update()},5200)}onEmailSendingFailed(){this.formErrors=[this.controller.getSomethingWentWrongText()],this.unmounted||this.update()}sendResetPasswordEmail(){this.controller.userController.recoverPassword({email:this.controller.userController.getEmail(),lang:this.controller.getLanguage()}).then(this.bindFn(this.onEmailSent),this.bindFn(this.onEmailSendingFailed))}};lr();var{For:jD,Switch:YD}=wt.Components,ru="profile-info",lh="change-password",nu=class extends wt.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.settingsView=this.props.initialTab&&this.props.initialTab()||ru,this.breakPoint=660,this.measureWindow()}template(){return wt.createElement(Er,{title:()=>this.i18n.s("shared-title-account-settings"),size:this.const("wide"),showX:this.const(!0),leftAlignTitle:this.const(!0),onClose:()=>this.controller.dispatch({type:"close-modal"}),i18n:this.props.controller},wt.createElement("div",{class:wt.const("dcg-shared-account-settings-dialog dcg-shared-account-dialog")},wt.createElement(jD,{each:()=>this.getTabs(),key:t=>""+t.key},wt.createElement("div",{class:wt.const("dcg-shared-navigation-tabs"),role:wt.const("tablist")},t=>wt.createElement("div",{role:wt.const("tab"),tabindex:wt.const("0"),"aria-selected":()=>this.settingsView===t.key,class:()=>({"dcg-shared-tab-gray-underline":!0,[t.class]:!0,"dcg-selected":this.settingsView===t.key}),onTap:()=>this.updateSettingsView(t.key)},t.label))),wt.createElement("div",{class:wt.const("dcg-shared-content-container")},wt.createElement(YD,{key:()=>this.settingsView},t=>t===ru?wt.createElement(Zd,{controller:this.props.controller}):t===lh?wt.createElement(tu,{controller:this.props.controller}):this.props.extraTabs?wt.createElement("div",{class:wt.const("dcg-shared-profile-info dcg-shared-account-settings-section")},this.props.extraTabs().createView(t)):wt.createElement("span",null)))))}getTabs(){let t=[{key:ru,label:this.bindFn(this.profileTitle),class:"profile-view-button"},{key:lh,label:this.bindFn(this.passwordTitle),class:"change-password-view-button"}];return this.props.extraTabs?[...t,...this.props.extraTabs().tabs.map(({key:r,narrowLabel:n,wideLabel:a,class:c})=>({key:r,label:()=>this.windowWidth>this.breakPoint?n():a(),class:`${c}-button`}))]:t}updateSettingsView(t){this.settingsView=t,this.unmounted||this.update()}profileTitle(){return this.windowWidth>this.breakPoint?this.i18n.s("shared-title-profile-information-wide"):this.i18n.s("shared-title-profile-information-narrow")}passwordTitle(){return this.windowWidth>this.breakPoint?this.i18n.s("shared-title-change-password-wide"):this.i18n.s("shared-title-change-password-narrow")}measureWindow(){return this.windowWidth=ee(window).width()}didMount(){ee(window).on("resize.account-dialog",bo(()=>{this.measureWindow(),this.unmounted||this.update()},200))}didUnmount(){ee(window).off("resize.account-dialog"),this.unmounted=!0}isProfileSelected(){return this.settingsView===ru}isChangePasswordSelected(){return this.settingsView===lh}};var Be=he(me());var{Input:lk}=Be.Components,au=class extends Be.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.formErrors=[]}template(){return Be.createElement(Er,{title:()=>this.i18n.s("shared-title-change-email-address"),size:this.const("narrow"),showX:this.const(!0),onClose:()=>this.controller.dispatch({type:"close-modal"}),i18n:this.props.controller},Be.createElement("div",{class:Be.const("dcg-shared-change-email dcg-shared-account-dialog")},Be.createElement("div",{class:Be.const("dcg-shared-account-paragraph")},()=>this.i18n.s("shared-message-set-new-email-address")),Be.createElement("form",{onSubmit:this.bindFn(this.onSubmit),method:Be.const("post"),class:Be.const("dcg-shared-email-form-container")},Be.createElement("label",null,Be.createElement("span",{class:Be.const("dcg-shared-input-title")},()=>this.i18n.s("shared-label-new-email-address")),Be.createElement(lk,{type:Be.const("email"),name:Be.const("newEmail"),class:Be.const("dcg-shared-input-blue-outline"),"aria-label":()=>this.i18n.s("shared-label-new-email-address"),required:Be.const("true"),didMount:t=>{Tn||t.focus()},value:()=>this.newEmail,onInput:t=>{this.newEmail=t,this.unmounted||this.update()}})),Be.createElement("label",{for:Be.const("password")},Be.createElement("span",null,()=>this.i18n.s("shared-label-password")),Be.createElement(lk,{type:Be.const("password"),class:Be.const("dcg-shared-input-blue-outline"),"aria-label":()=>this.i18n.s("shared-label-password"),required:Be.const("true"),value:()=>this.password,name:this.const("password"),onInput:t=>{if(this.password=t,!this.unmounted)return this.update()}})),Be.createElement(cr,{controller:this.props.controller,errors:()=>this.formErrors}),Be.createElement("div",{class:Be.const("dcg-shared-sign-in-options")},Be.createElement("button",{class:()=>({"dcg-btn-blue":!0,"dcg-disabled":!this.submitEnabled()}),"aria-disabled":()=>!this.submitEnabled(),tabindex:()=>this.submitEnabled()?"0":"-1",type:Be.const("submit")},()=>this.i18n.s("shared-button-change-email-and-password"))))))}submitEnabled(){return!!(this.password&&this.newEmail)}didUnmount(){this.unmounted=!0}async onSubmit(t){if(t.preventDefault(),this.submitEnabled())try{await this.controller.userController.setEmail({changeToken:this.getChangeToken(),password:this.password,newEmail:this.newEmail,lang:this.controller.getLanguage()}),this.controller.dispatch({type:"close-modal"}),history.replaceState(null,null,document.location.pathname)}catch(r){r.status===409?this.formErrors=["Sorry, someone has already registered with this email address."]:this.formErrors=[this.controller.getSomethingWentWrongText()],this.unmounted||this.update()}}getChangeToken(){return this.controller.userController.getEmailChangeToken()||""}};var Kt=he(me());var iu=class extends Kt.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.openTime=Date.now(),this.formErrors=[],this.controller.logJSON("shared-consent-modal",{action:"show-consent-modal"})}template(){return Kt.createElement(Er,{title:()=>this.i18n.s("shared-title-consent"),size:this.const("narrow"),onClose:()=>this.controller.dispatch({type:"close-modal"}),i18n:this.props.controller},Kt.createElement("div",{class:Kt.const("dcg-shared-consent-modal-container dcg-shared-account-dialog")},Kt.createElement("div",{class:Kt.const("dcg-shared-consent-contents")},()=>this.i18n.s("shared-message-consent-information")),Kt.createElement("div",{class:Kt.const("dcg-shared-consent-contents")},()=>this.i18n.s("shared-message-consent-delete-information")),Kt.createElement("div",{class:Kt.const("dcg-shared-modal-actions-container")},Kt.createElement("span",{role:Kt.const("button"),tabindex:Kt.const("0"),class:Kt.const("dcg-gray-link"),onTap:t=>this.openAccountSettings(t.device)},()=>this.i18n.s("shared-button-go-to-account-settings")),Kt.createElement("div",{role:Kt.const("button"),tabindex:()=>this.isConsentingToCollection()?-1:0,"aria-disabled":()=>this.isConsentingToCollection(),class:()=>({"dcg-btn-blue":!0,"dcg-disabled":this.isConsentingToCollection()}),onTap:this.bindFn(this.consentToCollection)},()=>this.i18n.s("shared-button-accept")),Kt.createElement(cr,{controller:this.props.controller,errors:()=>this.formErrors}))))}willUpdate(){this.formErrors=[],this.controller.userController.didPrivacyConsentFail()&&(this.formErrors=[this.controller.getSomethingWentWrongText()])}isConsentingToCollection(){return this.controller.userController.isConsentingToPrivacy()}didPrivacyConsentFail(){return this.controller.userController.didPrivacyConsentFail()}openAccountSettings(t){this.controller.logJSON("shared-consent-modal",{action:"edit-account",ts:Date.now()-this.openTime}),this.controller.dispatch({type:"show-modal",modal:"account-settings",device:t})}consentToCollection(){this.controller.logJSON("shared-consent-modal",{action:"consent",ts:Date.now()-this.openTime}),this.controller.userController.setPrivacyConsent({lang:this.controller.getLanguage()}),this.controller.dispatch({type:"close-modal"})}};var W=he(me());var Nt=he(me());var Bi=class extends Nt.Class{template(){return Nt.createElement("div",{class:Nt.const("dcg-shared-cookie-notice")},Nt.createElement(Pr,{key:this.const("shared-message-cookie-notice"),i18n:this.props.i18n},Nt.createElement("b",null,Nt.const("Note:")),Nt.const(" "),Nt.const("Desmos uses cookies to enable persistence when you are signed"),Nt.const(" "),Nt.const("in. If you do not wish to use cookies, please use Desmos without"),Nt.const(" "),Nt.const("logging in."),Nt.const(" "),Nt.createElement("a",{class:Nt.const("dcg-shared-cookie-notice-learn-more dcg-gray-link"),href:Nt.const("/privacy"),target:Nt.const("_blank")},Nt.const("Learn More."))))}};var{If:xc,Input:dk,IfElse:JD}=W.Components,ou=class extends W.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.email="",this.password="",this.isSubmittingForm=!1,this.formErrors=[],this.controller.getModalStartingError()&&this.formErrors.push(this.controller.getModalStartingError())}template(){return W.createElement(Er,{title:()=>this.i18n.s("shared-title-login"),size:this.const("narrow"),showX:this.const(!0),onClose:()=>this.controller.dispatch({type:"close-modal"}),i18n:this.props.controller},W.createElement("div",{class:W.const("dcg-shared-login-dialog dcg-shared-account-dialog")},JD(()=>this.canChooseRole(),{true:()=>W.createElement("div",{class:W.const("dcg-shared-switch-account-message")},W.createElement(Pr,{key:this.const("shared-prompt-new-to-desmos-teacher-or-student"),i18n:this.props.controller},W.const("New to Desmos?"),W.const(" "),W.createElement("a",{role:W.const("link"),tabindex:W.const("0"),class:W.const("dcg-gray-link"),onTap:t=>this.controller.dispatch({type:"show-modal",modal:"signup",device:t.device})},W.const("Sign up!")))),false:()=>W.createElement("div",{class:W.const("dcg-shared-switch-account-message")},W.createElement(Pr,{key:this.const("shared-prompt-new-to-desmos-sign-up-here"),i18n:this.props.controller},W.const("New to Desmos?"),W.const(" "),W.createElement("a",{role:W.const("link"),tabindex:W.const("0"),class:W.const("dcg-gray-link"),onTap:t=>this.controller.dispatch({type:"show-modal",modal:"signup",device:t.device})},W.const("Sign up")),W.const(".")))}),W.createElement("div",{class:W.const("dcg-shared-account-content-container")},W.createElement(xc,{predicate:()=>window.googleAuthConnectionFailed},()=>W.createElement("div",{class:W.const("dcg-shared-google-auth-unavailable")},()=>this.i18n.s("shared-message-google-login-not-available"))),W.createElement(xc,{predicate:()=>!window.googleAuthConnectionFailed},()=>W.createElement("div",{class:W.const("dcg-btn-gray-outline dcg-shared-google-login"),role:W.const("button"),tabindex:W.const("0"),onTap:()=>this.googleLogin()},W.createElement("div",{class:W.const("dcg-shared-google-icon dcg-shared-external-login-logo")}),W.createElement("span",null,()=>this.i18n.s("shared-button-sign-in-with-google")))),W.createElement(xc,{predicate:()=>this.controller.allowSignInWithApple()},()=>W.createElement("div",{class:W.const("dcg-btn-gray-outline dcg-shared-apple-login"),role:W.const("button"),tabindex:W.const("0"),onTap:()=>this.appleLogin()},W.createElement("div",{class:W.const("dcg-shared-apple-icon dcg-shared-external-login-logo")}),W.createElement("span",null,()=>this.i18n.s("shared-button-sign-in-with-apple"))))),W.createElement("div",{class:W.const("dcg-shared-bg-line")},W.createElement("span",null,()=>this.i18n.s("shared-message-or-login-with-desmos"))),W.createElement(cr,{controller:this.props.controller,errors:()=>this.formErrors}),W.createElement("form",{class:W.const("dcg-shared-action-submit"),onSubmit:this.bindFn(this.onSubmit)},W.createElement("div",{class:W.const("dcg-shared-email-form-container")},W.createElement("label",null,W.createElement("span",{class:W.const("dcg-shared-input-title")},()=>this.i18n.s("shared-label-email")),W.createElement(dk,{type:W.const("email"),name:W.const("email"),class:W.const("dcg-shared-input-blue-outline"),"aria-label":()=>this.i18n.s("shared-label-email"),required:W.const("required"),didMount:t=>{Tn||t.focus()},value:()=>this.email,onInput:t=>{this.email=t,this.unmounted||this.update()}})),W.createElement("div",{class:W.const("dcg-shared-password-container")},W.createElement("label",{for:W.const("password")},W.createElement("span",null,()=>this.i18n.s("shared-label-password")),W.createElement(dk,{type:W.const("password"),class:W.const("dcg-shared-input-blue-outline"),"aria-label":()=>this.i18n.s("shared-label-password"),required:W.const("true"),value:()=>this.password,name:this.const("password"),onInput:t=>{if(this.password=t,!this.unmounted)return this.update()}}),W.createElement("span",{class:W.const("dcg-shared-password-recovery-link")},W.createElement("a",{role:W.const("link"),tabindex:W.const(0),class:W.const("dcg-shared-action-password"),onTap:t=>this.controller.dispatch({type:"show-modal",modal:"recover-password",device:t.device})},()=>this.i18n.s("shared-prompt-forgot-your-password"))))),W.createElement("div",{class:W.const("dcg-shared-sign-in-options")},W.createElement(xc,{predicate:()=>this.isSubmittingForm},()=>W.createElement("div",{class:W.const("dcg-shared-progress-indicator dcg-shared-create-account-progress")},W.createElement("div",{class:W.const("dcg-shared-spinner")}))),W.createElement(xc,{predicate:()=>!this.isSubmittingForm},()=>W.createElement("div",{class:W.const("dcg-shared-submit-container")},W.createElement("button",{type:W.const("submit"),class:()=>({"dcg-btn-blue":!0,"dcg-disabled":!this.submitEnabled()}),"aria-disabled":()=>!this.submitEnabled(),tabindex:()=>this.submitEnabled()?"0":"-1"},()=>this.i18n.s("shared-button-login-capitalized"))))),W.createElement(Bi,{i18n:this.const(this.i18n)})))))}canChooseRole(){return!this.controller.getLimitedSignupRole()}didUnmount(){this.unmounted=!0}onSubmit(t){t.preventDefault(),this.submitForm()}googleLogin(){this.controller.dispatch({type:"close-modal"}),this.controller.userController.googleLogin({fromUI:"login"})}appleLogin(){this.controller.dispatch({type:"close-modal"}),this.controller.userController.appleLogin({fromUI:"login"})}submitEnabled(){return!!(this.email&&this.password)}async submitForm(){if(this.submitEnabled()){this.isSubmittingForm=!0,this.formErrors=[];try{let t=await this.controller.userController.checkPendingDeletion({email:this.email,lang:this.controller.getLanguage()});this._pendingDeletion=t.pendingDeletion}catch(t){this._pendingDeletion=!1}if(!this.unmounted){this.unmounted||this.update();try{if(await this.controller.userController.desmosLogin({email:this.email,password:this.password,lang:this.controller.getLanguage()}),this.unmounted)return;this._pendingDeletion?this.controller.dispatch({type:"show-modal",modal:"account-reenabled",device:"mouse"}):this.controller.dispatch({type:"close-modal"})}catch(t){this.formErrors=this.controller.parseJSONErrors(t)}this.unmounted||(this.isSubmittingForm=!1,this.controller.dispatch({type:"render"}))}}}};var Ce=he(me());var{If:su,Input:QD}=Ce.Components,cu=class extends Ce.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.email=this.controller.userController.getEmail(),this.formErrors=[],this.isSubmittingForm=!1,this.didSendRecoveryEmail=!1}template(){return Ce.createElement(Er,{title:()=>this.i18n.s("shared-title-recover-password"),size:this.const("narrow"),showX:this.const(!0),onClose:()=>this.controller.dispatch({type:"close-modal"}),i18n:this.props.controller},Ce.createElement("div",{class:Ce.const("dcg-shared-recover-password-dialog dcg-shared-account-dialog")},Ce.createElement(cr,{controller:this.props.controller,errors:()=>this.formErrors}),Ce.createElement(su,{predicate:()=>this.didSendRecoveryEmail},()=>Ce.createElement("div",{role:Ce.const("alert"),class:Ce.const("dcg-shared-account-paragraph")},()=>this.i18n.s("shared-message-check-email-for-password-recovery-link"),Ce.const(" "),Ce.createElement("a",{href:Ce.const("#"),class:Ce.const("dcg-blue-link"),onTap:t=>(this.didSendRecoveryEmail=!1,this.controller.dispatch({type:"show-modal",modal:"recover-password",device:t.device}))},()=>this.i18n.s("shared-button-try-again")))),Ce.createElement(su,{predicate:()=>!this.didSendRecoveryEmail},()=>Ce.createElement("form",{class:Ce.const("dcg-shared-email-form-container"),onSubmit:this.bindFn(this.onSubmit)},Ce.createElement("div",{class:Ce.const("dcg-shared-account-paragraph")},()=>this.i18n.s("shared-prompt-enter-email-for-password-recovery-link")),Ce.createElement("label",null,Ce.createElement("span",{class:Ce.const("dcg-shared-input-title")},()=>this.i18n.s("shared-label-email")),Ce.createElement(QD,{type:Ce.const("email"),name:Ce.const("email"),class:Ce.const("dcg-shared-input-blue-outline"),"aria-label":()=>this.i18n.s("shared-label-email"),required:Ce.const("true"),didMount:t=>{Tn&&t.focus()},value:()=>this.email,onInput:t=>{this.email=t,this.unmounted||this.update()}})),Ce.createElement("div",{class:Ce.const("dcg-shared-sign-in-options")},Ce.createElement(su,{predicate:()=>this.isSubmittingForm},()=>Ce.createElement("div",{class:Ce.const("dcg-shared-progress-indicator dcg-shared-create-account-progress")},Ce.createElement("div",{class:Ce.const("dcg-shared-spinner")}))),Ce.createElement(su,{predicate:()=>!this.isSubmittingForm},()=>Ce.createElement("button",{class:()=>({"dcg-shared-btn-blue":!0}),type:Ce.const("submit")},()=>this.i18n.s("shared-button-recover-password"))))))))}didUnmount(){this.unmounted=!0}onSubmit(t){t.preventDefault(),this.submitForm()}async submitForm(){this.formErrors=[],this.isSubmittingForm=!0;try{await this.controller.userController.recoverPassword({email:this.email,lang:this.controller.getLanguage()}),this.didSendRecoveryEmail=!0}catch(t){this.formErrors=this.controller.parseJSONErrors(t)}finally{this.isSubmittingForm=!1,this.unmounted||this.update()}}};var O=he(me());lr();var{If:wc,Input:lu,Switch:XD}=O.Components,du=0,dh=1,uu=class extends O.Class{template(){return O.createElement("span",{class:O.const("dcg-shared-terms-notice")},O.createElement(Pr,{key:this.const("shared-message-privacy-notice"),i18n:this.props.i18n},O.const("I have read, understand, and accept the"),O.const(" "),O.createElement("a",{href:O.const("/terms"),target:O.const("_blank"),class:O.const("dcg-blue-link")},O.const("Terms of Service")),O.const(" "),O.const("and"),O.const(" "),O.createElement("a",{href:O.const("/privacy"),target:O.const("_blank"),class:O.const("dcg-blue-link")},O.const("Privacy Policy")),O.const(".")))}},pu=class extends O.Class{init(){this.controller=this.props.controller(),this.i18n=this.controller,this.selectedView=du,this.givenName="",this.familyName="",this.email="",this.password="",this.consentChecked=!1,this.isSubmittingForm=!1,this.formErrors=[],this.breakPoint=660,this.measureWindow(),this.controller.getModalStartingError()&&this.formErrors.push(this.controller.getModalStartingError())}template(){return O.createElement(Er,{title:()=>this.i18n.s("shared-title-signup"),size:this.const("narrow"),showX:this.const(!0),onClose:()=>this.controller.dispatch({type:"close-modal"}),i18n:this.props.controller},O.createElement("div",{class:()=>({"dcg-shared-signup-dialog":!0,"dcg-shared-account-dialog":!0})},O.createElement("div",{class:O.const("dcg-shared-switch-account-message")},()=>this.i18n.s("shared-prompt-already-have-account"),this.const(this.i18n.raw(" ")),O.createElement("a",{role:O.const("link"),tabindex:O.const("0"),class:O.const("dcg-gray-link"),onTap:t=>this.controller.dispatch({type:"show-modal",modal:"login",device:t.device})},()=>this.i18n.s("shared-button-login")),O.const(".")),O.createElement("div",{class:O.const("dcg-shared-navigation-tabs"),role:O.const("tablist")},O.createElement("div",{role:O.const("tab"),tabindex:O.const("0"),"aria-selected":this.bindFn(this.isGoogleSelected),class:()=>({"dcg-shared-tab-gray-underline":!0,"dcg-shared-tab-always-underline":!0,"dcg-shared-profile-view-button":!0,"dcg-selected":this.isGoogleSelected()}),onTap:()=>this.updateView(du)},this.bindFn(this.externalTitle)),O.createElement("div",{role:O.const("tab"),tabindex:O.const("0"),"aria-selected":this.bindFn(this.isDesmosSelected),class:()=>({"dcg-shared-tab-gray-underline":!0,"dcg-shared-tab-always-underline":!0,"dcg-shared-password-view-button":!0,"dcg-selected":this.isDesmosSelected()}),onTap:()=>this.updateView(dh)},this.bindFn(this.desmosTitle))),O.createElement("div",{class:O.const("dcg-shared-account-content-container")},O.createElement(XD,{key:()=>this.selectedView},t=>t===du?O.createElement("div",{class:O.const("dcg-shared-notice-checkbox-google")},O.createElement(ba,{checked:()=>this.consentChecked,disabled:this.const(!1),onChange:()=>{if(this.consentChecked=!this.consentChecked,!this.unmounted)return this.update()}},this.bindFn(this.consentText)),O.createElement(ba,{checked:()=>this.privacyChecked,disabled:this.const(!1),onChange:()=>{if(this.privacyChecked=!this.privacyChecked,!this.unmounted)return this.update()}},O.createElement(uu,{i18n:this.const(this.i18n)})),O.createElement(wc,{predicate:()=>window.googleAuthConnectionFailed},()=>O.createElement("div",{class:O.const("dcg-shared-google-auth-unavailable")},()=>this.i18n.s("shared-message-google-login-not-available"))),O.createElement(wc,{predicate:()=>!window.googleAuthConnectionFailed},()=>O.createElement("div",{class:()=>({"dcg-btn-gray-outline":!0,"dcg-shared-google-login":!0,"dcg-disabled":this.hasNotConsented()}),role:O.const("button"),tabindex:()=>this.hasNotConsented()?"-1":"0","aria-disabled":this.bindFn(this.hasNotConsented),onTap:()=>this.googleLogin()},O.createElement("div",{class:O.const("dcg-shared-google-icon dcg-shared-external-login-logo")}),O.createElement("span",null,this.bindFn(this.getGoogleLoginText)))),O.createElement(wc,{predicate:()=>this.controller.allowSignInWithApple()},()=>O.createElement("div",{class:()=>({"dcg-btn-gray-outline":!0,"dcg-shared-apple-login":!0,"dcg-disabled":this.hasNotConsented()}),role:O.const("button"),tabindex:()=>this.hasNotConsented()?"-1":"0","aria-disabled":this.bindFn(this.hasNotConsented),onTap:()=>this.appleLogin()},O.createElement("div",{class:O.const("dcg-shared-apple-icon dcg-shared-external-login-logo")}),O.createElement("span",null,this.bindFn(this.getAppleLoginText))))):t===dh?O.createElement("div",null,O.createElement(cr,{controller:this.props.controller,errors:()=>this.formErrors}),O.createElement("form",{class:O.const("dcg-shared-action-submit"),onSubmit:this.bindFn(this.onSubmit),didMount:this.bindFn(this.didMountForm)},O.createElement("div",{class:O.const("dcg-shared-email-form-container")},O.createElement("label",null,O.createElement("span",{class:O.const("dcg-shared-input-title")},()=>this.i18n.s("shared-label-email")),O.createElement(lu,{type:O.const("email"),name:O.const("email"),class:O.const("dcg-shared-input-blue-outline"),required:O.const("true"),"aria-describedby":O.const("email-description"),didMount:r=>{Tn||r.focus()},value:()=>this.email,onInput:r=>{if(this.email=r,!this.unmounted)return this.update()}})),O.createElement("div",{class:O.const("dcg-shared-name-container")},O.createElement("div",{class:O.const("dcg-shared-name-input")},O.createElement("label",null,O.createElement("span",{class:O.const("dcg-shared-input-title")},()=>this.i18n.s("shared-label-given-name-or-nickname")),O.createElement(lu,{type:O.const("text"),name:O.const("given-name"),class:O.const("dcg-shared-input-blue-outline"),required:O.const("true"),"aria-describedby":O.const("given-name-description"),value:()=>this.givenName,onInput:r=>{if(this.givenName=r,!this.unmounted)return this.update()}}))),O.createElement("div",{class:O.const("dcg-shared-name-input")},O.createElement("label",null,O.createElement("span",{class:O.const("dcg-shared-input-title")},()=>this.i18n.s("shared-label-family-name")),O.createElement(lu,{type:O.const("text"),name:O.const("family-name"),class:O.const("dcg-shared-input-blue-outline"),"aria-describedby":O.const("family-name-description"),value:()=>this.familyName,onInput:r=>{if(this.familyName=r,!this.unmounted)return this.update()}})))),O.createElement("label",null,O.createElement("span",null,()=>this.i18n.s("shared-label-password")),O.createElement(lu,{type:O.const("password"),class:O.const("dcg-shared-input-blue-outline"),name:O.const("password"),required:O.const("true"),value:()=>this.password,onInput:r=>{if(this.password=r,!this.unmounted)return this.update()}})),O.createElement("div",{class:O.const("dcg-shared-notice-checkbox-email")},O.createElement(ba,{checked:()=>this.consentChecked,disabled:this.const(!1),onChange:()=>{if(this.consentChecked=!this.consentChecked,!this.unmounted)return this.update()}},this.bindFn(this.consentText))),O.createElement(ba,{checked:()=>this.privacyChecked,disabled:this.const(!1),onChange:()=>{if(this.privacyChecked=!this.privacyChecked,!this.unmounted)return this.update()}},O.createElement(uu,{i18n:this.const(this.i18n)})),O.createElement("div",{class:O.const("dcg-shared-sign-in-options")},O.createElement(wc,{predicate:()=>this.isSubmittingForm},()=>O.createElement("div",{class:O.const("dcg-shared-progress-indicator dcg-shared-create-account-progress")},O.createElement("div",{class:O.const("dcg-shared-spinner")}))),O.createElement(wc,{predicate:()=>!this.isSubmittingForm},()=>O.createElement("div",{class:O.const("dcg-shared-submit-container")},O.createElement("button",{type:O.const("submit"),class:()=>({"dcg-btn-blue":!0,"dcg-disabled":!this.submitEnabled()}),"aria-disabled":()=>!this.submitEnabled(),tabindex:()=>this.submitEnabled()?"0":"-1"},()=>this.i18n.s("shared-button-create-account")))))))):O.createElement("span",null)),O.createElement(Bi,{i18n:this.const(this.i18n)}))))}canSwitchRoles(){return!this.controller.getLimitedSignupRole()}didMountForm(t){this.form=t}submitEnabled(){var a,c,l;if(!this.consentChecked||!this.privacyChecked||!this.form)return!1;let t=(a=this.form.querySelector('[name="password"]'))==null?void 0:a.value,r=(c=this.form.querySelector('[name="email"]'))==null?void 0:c.value,n=(l=this.form.querySelector('[name="given-name"]'))==null?void 0:l.value;return!!(t&&r&&n)}onSubmit(t){t.preventDefault(),this.submitEnabled()&&this.submitForm()}googleLogin(){this.controller.dispatch({type:"close-modal"}),this.controller.userController.googleLogin({fromUI:"create"})}appleLogin(){this.controller.dispatch({type:"close-modal"}),this.controller.userController.appleLogin({fromUI:"create"})}getGoogleLoginText(){return this.consentChecked&&this.privacyChecked?this.i18n.s("shared-prompt-sign-up-with-google"):this.i18n.s("shared-prompt-please-consent-to-sign-up-with-google")}getAppleLoginText(){return this.consentChecked&&this.privacyChecked?this.i18n.s("shared-prompt-sign-up-with-apple"):this.i18n.s("shared-prompt-please-consent-to-sign-up-with-apple")}async submitForm(){this.formErrors=[],this.isSubmittingForm=!0,this.unmounted||this.update();try{if(await this.controller.userController.createAccount({userProvidedName:{given:this.givenName,family:this.familyName.length?this.familyName:void 0},email:this.email,password:this.password,teacher:!1,lang:this.controller.getLanguage()}),!this.unmounted)return this.controller.dispatch({type:"close-modal"})}catch(t){this.formErrors=this.controller.parseJSONErrors(t)}finally{this.isSubmittingForm=!1,this.unmounted||this.update()}}updateView(t){this.selectedView=t,this.unmounted||this.update()}externalTitle(){return this.controller.allowSignInWithApple()?this.windowWidth>this.breakPoint?this.i18n.s("shared-button-external-account-wide"):this.i18n.s("shared-button-external-account-narrow"):this.windowWidth>this.breakPoint?this.i18n.s("shared-button-google-account-wide"):this.i18n.s("shared-button-google-account-narrow")}desmosTitle(){return this.windowWidth>this.breakPoint?this.i18n.s("shared-button-email-address-wide"):this.i18n.s("shared-button-email-address-narrow")}measureWindow(){return this.windowWidth=ee(window).width()}didMount(){ee(window).on("resize.create-account",bo(()=>{this.measureWindow(),this.update()},200))}didUnmount(){ee(window).off("resize.create-account"),this.unmounted=!0}consentText(){return this.i18n.s("shared-message-consent-text")}isGoogleSelected(){return this.selectedView===du}isDesmosSelected(){return this.selectedView===dh}hasNotConsented(){return!this.consentChecked||!this.privacyChecked}};var{SwitchUnion:ZD}=rn.Components,gu=class extends rn.Class{template(){return ZD(()=>this.props.controller().getModal(),{login:()=>rn.createElement(ou,{controller:this.props.controller}),signup:()=>rn.createElement(pu,{controller:this.props.controller}),"account-reenabled":()=>rn.createElement(Jd,{controller:this.props.controller}),"recover-password":()=>rn.createElement(cu,{controller:this.props.controller}),"account-settings":()=>rn.createElement(nu,{controller:this.props.controller}),"change-email":()=>rn.createElement(au,{controller:this.props.controller}),consent:()=>rn.createElement(iu,{controller:this.props.controller}),none:()=>rn.createElement("span",null)})}};lr();var Or=he(me());var Wt=he(me());var{For:e1,If:t1}=Wt.Components,hu=class extends Wt.Class{init(){this.i18n=this.props.i18n()}template(){return Wt.createElement("div",{class:()=>({"dcg-language-picker":!0,"dcg-two-columns":this.getLanguages().length>7})},Wt.createElement("div",{class:Wt.const("dcg-language-header"),role:Wt.const("heading"),"aria-level":Wt.const("2")},()=>this.i18n.s("shared-title-language-menu")),Wt.createElement(e1,{each:()=>this.getLanguages()},Wt.createElement("ul",{class:Wt.const("dcg-unstyled-list dcg-languages-list")},t=>Wt.createElement("li",{class:()=>({"dcg-listitem":!0,"dcg-language-option":!0,"dcg-selected":this.isLanguageSelected(t)}),lang:this.const(this.getLangCode(t)),role:Wt.const("menuitem"),tabindex:Wt.const("0"),"aria-current":()=>this.isLanguageSelected(t),onTap:()=>this.updateLang(t)},()=>this.i18n.raw(this.getLanguageDisplayName(t))))),Wt.createElement(t1,{predicate:()=>this.shouldShowFooterLink()},()=>Wt.createElement("a",{class:Wt.const("dcg-language-footer-link dcg-blue-link"),href:()=>this.getFooterLinkURL()},()=>this.getFooterLinkText())))}shouldShowFooterLink(){return!!(this.props.footerLink&&this.props.footerLink())}getFooterLinkURL(){let t=this.props.footerLink&&this.props.footerLink();if(t)return t.url}getFooterLinkText(){let t=this.props.footerLink&&this.props.footerLink();return t?t.text:this.i18n.raw("")}getCurrentLang(){return this.props.currentLang()}getLanguages(){return Object.keys(this.props.getAllLangs())}getLanguageDisplayName(t){return this.props.getAllLangs()[t].display_name}updateLang(t){let r=this.props.getAllLangs()[t].code;return this.props.onLangChosen(r)}getLangCode(t){return this.props.getAllLangs()[t].code}isLanguageSelected(t){return this.getLangCode(t)===this.getCurrentLang()}};var Zn=he(me());var Zo=class extends Zn.Class{template(){return Zn.createElement("div",{class:Zn.const("dcg-icon-button-container")},Zn.createElement(Xr,{tooltip:this.props.label,gravity:this.props.tooltipGravity},Zn.createElement("i",{role:Zn.const("button"),tabindex:Zn.const("0"),"aria-label":this.props.label,class:this.props.iconClass,onTap:this.props.onTap,"aria-expanded":()=>{var t,r;return(r=(t=this.props).isExpanded)==null?void 0:r.call(t)}})))}};var{If:uk}=Or.Components,r1={en:{code:"en",display_name:"English"},de:{code:"de",display_name:"Deutsch"},es:{code:"es",display_name:"Espa\xF1ol (LATAM)"},et:{code:"et",display_name:"Eesti"},fr:{code:"fr",display_name:"Fran\xE7ais"},id:{code:"id",display_name:"Bahasa Indonesia"},it:{code:"it",display_name:"Italiano"},ja:{code:"ja",display_name:"\u65E5\u672C\u8A9E"},ko:{code:"ko",display_name:"\uD55C\uAD6D\uC5B4"},nl:{code:"nl",display_name:"Nederlands"},pl:{code:"pl",display_name:"Polski"},"pt-BR":{code:"pt-BR",display_name:"Portugu\xEAs (Brasil)"},ru:{code:"ru",display_name:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"},"sv-SE":{code:"sv-SE",display_name:"Svenska"},th:{code:"th",display_name:"\u0E20\u0E32\u0E29\u0E32\u0E44\u0E17\u0E22"},tr:{code:"tr",display_name:"T\xFCrk\xE7e"},vi:{code:"vi",display_name:"Ti\u1EBFng Vi\u1EC7t"},"zh-CN":{code:"zh-CN",display_name:"\u7B80\u4F53\u4E2D\u6587"},"zh-TW":{code:"zh-TW",display_name:"\u7E41\u9AD4\u4E2D\u6587"}},mu=class extends Or.Class{init(){this.controller=this.props.controller(),this.namespace="language-picker-container",this.isOpen=!1}template(){return Or.createElement(uk,{predicate:this.bindFn(this.isDisplayed)},()=>Or.createElement("div",{role:Or.const("menu"),class:Or.const("dcg-language-picker-container"),didMount:this.bindFn(this.didMountContainer),willUnmount:this.bindFn(this.willUnmountContainer),"aria-label":()=>Ve("shared-calculator-button-language")},Or.createElement(Zo,{label:()=>Ve("shared-calculator-button-language"),iconClass:this.const("dcg-icon-world"),tooltipGravity:this.const("sw"),onTap:this.bindFn(this.toggleOpen),isExpanded:()=>this.isOpen}),Or.createElement(uk,{predicate:()=>this.isOpen},()=>Or.createElement("div",{class:Or.const("dcg-language-picker-dropdown")},Or.createElement(hu,{i18n:this.props.controller,getAllLangs:this.const(r1),onLangChosen:this.bindFn(this.onLangChosen),currentLang:()=>this.controller.getLanguage()})))))}isDisplayed(){return this.controller.getShowLanguagePicker()}didMountContainer(t){ee(document.body).on(`dcg-tapstart.${this.namespace} dcg-tap.${this.namespace}`,({target:r})=>{this.isOpen&&!ee.contains(t,r)&&this.toggleOpen()})}willUnmountContainer(){ee(document.body).off(this.namespace)}toggleOpen(){this.isOpen=!this.isOpen,this.update()}onLangChosen(t){vd(t).then(()=>{this.isOpen=!1,this.controller.dispatch({type:"set-language",language:t})})}};var Ui=he(me());var{If:n1}=Ui.Components,fu=class extends Ui.Class{template(){return Ui.createElement(n1,{predicate:this.props.isDisplayed},()=>Ui.createElement(Zo,{label:()=>Ve("shared-calculator-button-print"),iconClass:this.const("dcg-icon-print"),tooltipGravity:this.const("sw"),onTap:()=>window.print()}))}};var Pn=he(me());var yu=class extends Pn.Class{template(){return Pn.createElement(Pr,{i18n:this.props.controller,key:this.const("frontpage-heading-main-using-desmos-classroom-link")},Pn.const("Desmos Classroom is a free teaching and learning platform,"),Pn.const(" "),Pn.createElement("a",{href:Pn.const("https://blog.desmos.com/articles/desmos-amplify-join-forces/"),class:Pn.const("dcg-shared-blue-link")},Pn.const("now part of Amplify.")))}};var{If:vc,Each:uh}=_.Components,a1=0,es=class extends _.Class{init(){this.open=!1,this.id=a1++}getAriaLabel(){var t,r;return(r=(t=this.props).ariaLabel)==null?void 0:r.call(t)}template(){return _.createElement("div",{class:()=>({"dcg-header-link":!0,"dcg-math-tools":this.props.mathToolsMenu}),didMount:this.bindFn(this.didMountRoot),willUnmount:this.bindFn(this.willUnmountRoot),"aria-label":this.bindFn(this.getAriaLabel),"aria-labelledby":this.props.ariaLabel?this.const(void 0):this.const(this.getUniqueName())},_.createElement("span",{class:_.const("dcg-header-link-title-container"),role:_.const("button"),tabindex:_.const("0"),id:this.const(this.getUniqueName()),"aria-expanded":()=>this.open,onTap:()=>this.toggleOpen()},this.props.title,_.createElement("i",{class:_.const("dcg-icon-caret-down"),"aria-hidden":_.const("true")})),_.createElement("div",{class:_.const("dcg-header-link-dropdown"),style:()=>({display:this.open?void 0:"none"})},this.children))}getUniqueName(){return`header-link-${this.id}`}didMountRoot(t){ee(document.body).on(`dcg-tapstart.${this.getUniqueName()} dcg-tap.${this.getUniqueName()}`,r=>{if(this.open){let n=r.target;ee.contains(t,n)||this.toggleOpen()}})}willUnmountRoot(){ee(document.body).off(`.${this.getUniqueName()}`)}toggleOpen(){this.open=!this.open,this.update()}},bu=class extends _.Class{init(){this.controller=this.props.controller()}template(){return _.createElement("header",{class:()=>({"dcg-header-container":!0,"dcg-scrolled":this.isScrolled}),didMount:this.bindFn(this.didMountRoot),didUnmount:this.bindFn(this.didUnmountRoot)},_.createElement(vc,{predicate:()=>this.controller.isMaintenanceMode()},()=>_.createElement("div",{class:_.const("dcg-notice-wrapper"),role:_.const("heading"),"aria-level":_.const("1")},_.createElement("div",{class:_.const("dcg-maintenance-notice")},_.createElement("i",{class:_.const("dcg-icon-error"),"aria-hidden":_.const("true")}),()=>this.controller.s("frontpage-heading-header-maintenance-mode")))),_.createElement(vc,{predicate:()=>this.controller.shouldShowTopBanner()},()=>_.createElement("div",{role:_.const("banner"),class:_.const("dcg-top-banner")},()=>this.controller.s("frontpage-text-header-terms-update"),_.createElement("a",{class:_.const("dcg-primary-link"),target:_.const("_blank"),href:_.const("https://blog.desmos.com/articles/desmos-studio-terms-update/")},()=>this.controller.s("frontpage-text-header-terms-update-link")))),_.createElement("div",{class:_.const("dcg-main-header-container")},_.createElement("div",{class:_.const("dcg-header-left-content")},_.createElement("a",{class:_.const("dcg-home-link"),href:_.const("/")},_.createElement(Hd,null))),_.createElement("nav",{class:_.const("dcg-header-center-content")},_.createElement(es,{title:qi.MATH_TOOLS.title,mathToolsMenu:()=>!0},_.createElement("ul",{class:_.const("dcg-unstyled-list")},uh(()=>qi.MATH_TOOLS.links,{item:({href:t,icon:r,text:n})=>_.createElement("li",null,_.createElement("a",{href:this.const(t),class:_.const("dcg-dropdown-link")},_.createElement("div",{class:_.const("dcg-math-tool-icon-container")},_.createElement("i",{class:this.const(r),"aria-hidden":_.const("true")})),_.createElement("span",{class:_.const("dcg-dropdown-text")},n))),key:({href:t})=>t}),_.createElement("li",{class:_.const("dcg-app-links")},_.createElement(Pr,{i18n:this.const(this.controller),key:this.const("frontpage-text-header-app-links")},_.const("Download our apps in the"),_.const(" "),_.createElement("a",{class:_.const("dcg-primary-link"),href:_.const("https://play.google.com/store/apps/developer?id=Desmos+Inc")},_.const("Google Play Store")),_.const(" "),_.const("and"),_.const(" "),_.createElement("a",{class:_.const("dcg-primary-link"),href:_.const("https://apps.apple.com/us/developer/desmos/id653517543")},_.const("iOS App Store")),_.const("."))))),_.createElement(es,{title:qi.CLASSROOM.title},_.createElement("ul",{class:_.const("dcg-unstyled-list")},uh(()=>qi.CLASSROOM.links,{item:({href:t,text:r})=>_.createElement("li",null,_.createElement("a",{href:this.const(ek(t,"header-dropdown")),class:_.const("dcg-dropdown-link")},r)),key:({href:t})=>t})),_.createElement("div",{class:_.const("dcg-classroom-about-link-dropdown-container")},_.createElement(yu,{controller:this.props.controller}))),_.createElement(es,{title:qi.RESOURCES.title},_.createElement("ul",{class:_.const("dcg-unstyled-list")},uh(()=>qi.RESOURCES.links,{item:({href:t,text:r})=>_.createElement("li",null,_.createElement("a",{href:this.const(t),class:_.const("dcg-dropdown-link")},r)),key:({href:t})=>t})))),_.createElement("div",{class:_.const("dcg-header-right-content")},_.createElement(vc,{predicate:()=>!this.hideAccounts()},()=>_.createElement("div",null,_.createElement(vc,{predicate:()=>!this.controller.userController.isLoggedIn()},()=>_.createElement("div",{class:_.const("dcg-account-container")},_.createElement("div",{role:_.const("link"),tabindex:_.const("0"),class:_.const("dcg-log-in"),onTap:t=>{this.controller.dispatch({type:"show-modal",modal:"login",device:t.device})}},()=>this.controller.s("frontpage-link-shared-log-in")))),_.createElement(vc,{predicate:()=>this.controller.userController.isLoggedIn()},()=>_.createElement("div",{class:_.const("dcg-account-dropdown-container")},_.createElement(es,{title:()=>this.controller.userController.getFirstName(),ariaLabel:()=>this.controller.s("frontpage-button-account-menu")},_.createElement("ul",{class:_.const("dcg-unstyled-list")},_.createElement("li",{class:_.const("dcg-user-name")},()=>this.controller.userController.getFullName()),_.createElement("li",{class:_.const("dcg-email")},()=>this.controller.userController.getEmail()),_.createElement("li",null,_.createElement("div",{onTap:t=>{this.controller.dispatch({type:"show-modal",modal:"account-settings",device:t.device})},role:_.const("link"),tabindex:_.const(0),class:_.const("dcg-dropdown-link")},()=>this.controller.s("frontpage-link-shared-account-settings"))),_.createElement("div",{class:_.const("dcg-line-divider")}),_.createElement("li",null,_.createElement("div",{onTap:()=>this.controller.userController.logout(),role:_.const("link"),tabindex:_.const(0),class:_.const("dcg-dropdown-link")},()=>this.controller.s("frontpage-link-shared-log-out"))))))))),_.createElement(mu,{controller:this.props.controller}),_.createElement(fu,{isDisplayed:this.bindFn(this.shouldShowPrintIcon)}))),_.createElement(gu,{controller:this.props.controller}))}didMountRoot(){ee(document).on("scroll.header-container",()=>{let t=ee(document).scrollTop()||0,n=this.controller.shouldShowTopBanner()?t>=30:t>0;n!==this.isScrolled&&(this.isScrolled=n,this.update())})}hideAccounts(){return this.controller.isMaintenanceMode()?!0:this.props.hideAccounts&&this.props.hideAccounts()}didUnmountRoot(){ee(document).off(".header-container")}shouldShowPrintIcon(){var t,r;return!!((r=(t=this.props).showPrintIcon)!=null&&r.call(t))}};var xu=class extends pr.Class{template(){return pr.createElement("div",{id:pr.const("navigation"),role:pr.const("navigation")},pr.createElement(bu,{controller:this.props.controller,showPrintIcon:this.props.showPrintIcon}),pr.createElement("div",{class:pr.const("dcg-basic-calculator-footer")},pr.createElement("a",{href:pr.const("/terms")},()=>Ve("basic-calculator-link-terms-of-service")),pr.const("|"),pr.createElement("a",{href:pr.const("/privacy")},()=>Ve("basic-calculator-link-privacy-policy")),pr.const("|"),pr.createElement("a",{href:this.props.helpLink},()=>Ve("basic-calculator-link-help"))))}};ho();lr();function pk(e){let t={};return ee.extend(!0,t,e),ee.param(t)}var wu="";function ph(){return wu}var gk=[];function hk(e){gk.push(e)}function i1(e){if(e.status===401)for(let t of gk)t()}async function o1(e){if(e&&e.routeDeprecated)throw e.js&&new Function(e.js)(),e}function s1(){throw{status:0,responseJSON:{errors:[{message:"Connection failed. Check your internet connection?"}]}}}async function gh(e){let t=await e.catch(s1);if(i1(t),!t.ok){let n;try{n=await t.json()}catch(a){}throw{status:t.status,responseJSON:n}}let r=await t.json();return await o1(r),r}async function ea(e,t){let r={method:"POST",credentials:"include",headers:{Accept:"application/json, text/javascript, */*; q=0.01"}};return t!==void 0&&(r.body=pk(t),r.headers["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),await gh(fetch(wu+e,r))}async function mk(e,t){let r={method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json, text/javascript, */*; q=0.01"},body:JSON.stringify(t||null)};return await gh(fetch(wu+e,r))}async function kc(e,t){t===void 0&&(t={}),t=ye(ye({},t),wd);let r={method:"GET",credentials:"include",headers:{Accept:"application/json, text/javascript, */*; q=0.01"}},n=/\?/.test(e)?"&":"?";return await gh(fetch(`${wu}${e}${n}${new URLSearchParams(t)}`,r))}function hh(){return ea("/account/logout_xhr")}function fk(e){let t=function(){return ea("/account/login_xhr",e)};return hh().then(t,t).then(()=>$i({lang:e.lang}))}function $i(e){return kc("/account/user_info",e)}async function yk(){let e=await kc("/account/user_info?no401");if(e.loggedIn===!1)throw e;return e}function bk(e){return ea("/account/check_account_status",e)}function xk(e){return ea("/account/register_xhr",e).then(()=>$i({lang:e.lang}))}function wk(e){e===void 0&&(e={});let t="?source="+(e.fromUI||"");return e.teacher&&(t+="&teacher=true"),ph()+"/drive_api/calculator/login"+t}function vk(e){e===void 0&&(e={});let t="?source="+(e.fromUI||"");return e.teacher&&(t+="&teacher=true"),ph()+"/apple_api/calculator/login"+t}function kk(e){return ea("/account/change_name",e).then(()=>$i({lang:e.lang}))}function Ek(e){return ea("/account/change_name_detail",{lang:e.lang,userProvidedName:{given:e.given,family:e.family}}).then(()=>$i({lang:e.lang}))}function Ck(e){return ea("/account/recover_xhr",e)}function Tk(e){return kc("/account/initiate_delete_account",e)}function Sk(e){return kc("/account/initiate_email_change",e)}function Dk(e){return ea("/account/set_email",e).then(()=>$i({lang:e.lang}))}function Mk(e){return mk("/account/update_feature_flags",e).then(()=>$i({lang:e.lang}))}function Ak(e){return ea("/account/set_privacy_consent",e).then(()=>$i({lang:e.lang}))}function Vk(e,t){e.closed?t.askServerIfLoggedIn():setTimeout(()=>{Vk(e,t)},1e3)}function Gk(e){var t=window.open(e.url,"login_window","width=650,height=530,resizable,scrollbars");t?Vk(t,e.userController):alert(e.blockedMessage)}function Nk(e,t){window.userController=e,e.observeEvent("googleLogin",function(r,n){Gk({url:wk(n),userController:e,blockedMessage:t("account-shell-text-login-window-blocked-google")})}),e.observeEvent("appleLogin",function(r,n){Gk({url:vk(n),userController:e,blockedMessage:t("account-shell-text-login-window-blocked-apple")})})}bl();var vu=class extends Jo{constructor(){super();this.loggedIn=!1;this.logoutFailed=!1;this.loggingOut=!1;this.consentingToPrivacy=!1;this.privacyConsentFailed=!1;this.userId="";this.name="";this.email="";this.teacher=!1;this.featureFlags=[];this.verificationStatus="";this.subscriptions=[];this.privacyConsent=null;hk(()=>this.logout())}desmosLogin(r){return fk(r).then(this.completeLogin.bind(this))}googleLogin(r){this.triggerEvent("googleLogin",r)}appleLogin(r){this.triggerEvent("appleLogin",r)}askServerIfLoggedIn(){return yk().then(this.completeLogin.bind(this),this.logout.bind(this))}driveCallback(){return this.askServerIfLoggedIn()}createAccount(r){let n=Dt(ye({},r),{name:r.userProvidedName.given});return n.teacher===!1&&delete n.teacher,xk(n).then(this.completeLogin.bind(this))}checkPendingDeletion(r){return bk(r)}isTeacher(){return!!this.teacher}setNameLegacy(r){return kk(r).then(n=>{this.name=n.name||"",this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)})}setNameDetail(r){return Ek(r).then(n=>{this.name=n.name||"",this.nameDetail=n.nameDetail,this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)})}recoverPassword(r){return Ck(r)}completeLogin(r){this.loggedIn=!0,this.userId=r.userId||"",this.name=r.name||"",this.nameDetail=r.nameDetail,this.email=r.email||"",this.featureFlags=r.featureFlags||[],this.subscriptions=r.subscriptions||[],this.verificationStatus=r.verificationStatus||"",this.privacyConsent=r.privacyConsent,this.teacher=!!r.isTeacher,this.triggerEvent("loginChanged",void 0),this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)}async logout(){this.loggingOut=!0,this.triggerEvent("logout",void 0),this.triggerEvent("triggerRender",void 0);try{await hh(),this.completeLogout()}catch(r){this._onLogoutFailure()}finally{this.loggingOut=!1,this.triggerEvent("triggerRender",void 0)}}completeLogout(){this.loggedIn=!1,this.logoutFailed=!1,this.userId="",this.email="",this.name="",this.subscriptions=[],this.featureFlags=[],this.verificationStatus="",this.privacyConsent=null,this.teacher=!1,this.triggerEvent("loginChanged",void 0),this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)}_onLogoutFailure(){this.logoutFailed=!0,this.triggerEvent("triggerRender",void 0),setTimeout(()=>{this.logoutFailed=!1,this.triggerEvent("triggerRender",void 0)},2e3)}initiateAccountDeletion(r){return Tk(r)}getEmailChangeToken(){return lf(location.search,"changeToken")}initiateEmailChange(r){return Sk(r)}setEmail(r){return Dk(r).then(()=>{this.email=r.newEmail||"",this.verificationStatus="VERIFYING",this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)})}async setPrivacyConsent(r){this.consentingToPrivacy=!0,this.triggerEvent("triggerRender",void 0);try{let n=await Ak(r);this.completePrivacyConsent(n)}catch(n){this.onPrivacyConsentFailure()}finally{this.consentingToPrivacy=!1,this.triggerEvent("triggerRender",void 0)}}completePrivacyConsent(r){this.privacyConsent=r.privacyConsent,this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)}onPrivacyConsentFailure(){this.privacyConsentFailed=!0,this.triggerEvent("triggerRender",void 0),setTimeout(()=>{this.privacyConsentFailed=!1,this.triggerEvent("triggerRender",void 0)},2e3)}updateFeatureFlags(r){return Mk(r).then(n=>{this.featureFlags=n.featureFlags,this.triggerEvent("userUpdated",void 0)})}getFeatureFlags(){return this.featureFlags}hasFeatureFlag(r){return this.featureFlags.some(n=>n===r)}didPrivacyConsentFail(){return!!this.privacyConsentFailed}isConsentingToPrivacy(){return!!this.consentingToPrivacy}isLoggedIn(){return!!this.loggedIn}isLoggingOut(){return!!this.loggingOut}didLogoutFail(){return!!this.logoutFailed}getEmail(){return this.email}getFirstName(){return d1(this.name)}getFullName(){return this.name}getNameDetail(){return this.nameDetail||{given:this.name,source:"legacy"}}getUserId(){return this.userId}getSubscriptions(){return this.subscriptions}getVerificationStatus(){return this.verificationStatus}hasConsentedToCollection(){return!!this.privacyConsent}getUserAsJSON(){if(this.isLoggedIn())return{email:this.email,name:this.name,verificationStatus:this.verificationStatus,subscriptions:this.subscriptions,privacyConsent:this.privacyConsent}}};function d1(e){if(!e)return"";if(e.match(/[\d@_&\.\']/))return e;var t=e.split(" ");return t[0].length>=3?t[0]:e}bl();function u1(e){var r;let t=(r=e==null?void 0:e.responseJSON)==null?void 0:r.errors;return Array.isArray(t)?t:[{message:"Unexpected server error. Try again, or e-mail calculator@desmos.com."}]}function Ik(e){return u1(e).map(t=>t.message)}var p1=50,ku=class{constructor(t,r){this.throttledFlushBatchedLogs=bo(async()=>{if(this.requestInFlight||this.batchedLogs.length==0)return;let t=this.batchedLogs.splice(0,p1);this.requestInFlight=!0;try{await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:t})})}catch(r){}this.requestInFlight=!1,this.throttledFlushBatchedLogs()},1e3,{leading:!1});this.batchedLogs=[],this.requestInFlight=!1,this.getSessionData=r,this.apiUrl=t}log(t){this.batchedLogs.push(ye(ye({},this.getSessionData()),t)),this.throttledFlushBatchedLogs()}};var Pk,g1={eventType:"eventType",pageLoadId:window.pageLoadId||Kl(),source:"browser",app:"knox",userAgent:navigator.userAgent};var h1=new ku("/data-events",()=>g1);function m1(e){h1.log(ye({url:document.location.href},e))}function fh(e,t){m1({eventType:e,payloadJSON:JSON.stringify(Dt(ye({},t),{userId:Pk}))})}var mh;function Ok(e){let t=document.location.href,r=navigator.userLanguage||navigator.language,n=document.referrer,a=Dt(ye({browserLang:r,referrer:n},e),{isFirstPageLoad:mh===void 0});Pk=e.userId,mh!==t&&(mh=t,fh("page-load",a))}var Ec=class{constructor(t){this._queuedCallbacks=[];this.s=Ys(()=>this.language);this.dispatch=t=>{fl("dispatch::frontpage-controller",{type:t.type}),this.dispatcher.dispatch(t);let r;for(;r=this._queuedCallbacks.shift();)r()};this.modal="none",this.dispatcher=new Bd,this.language=Qs(),this.maintenance=!1,this.setupUserController(),this.showLanguagePicker=t.showLanguagePicker,this.limitSignupRole=t.limitSignupRole,this.showNotice=t.showNotice,t.allowAllLanguages||lg(),this.dispatcher.register(r=>{if(this.enqueueEvent("render"),r.type!=="render")switch(r.type){case"close-modal":this.modal="none",this.modalDevice=void 0;break;case"show-modal":this.modal=r.modal,this.modalDevice=r.device,this.modalLocation=r.location;break;case"set-language":this.language=r.language,this.updateUrlForLang(this.language),this.enqueueEvent("changeLang");break;default:return r}})}raw(t,r){return Vi(t,r)}hasTranslation(t){return js(t,this.language)}runAfterDispatch(t){this._queuedCallbacks.push(t)}logJSON(t,r){fh(t,r)}enqueueEvent(t){this.runAfterDispatch(()=>{this.onEventEmitted&&this.onEventEmitted(t)})}getShowLanguagePicker(){return this.showLanguagePicker}getShowNotice(){return!this.maintenance&&this.showNotice}getLimitedSignupRole(){return this.limitSignupRole}setupUserController(){this.userController=new vu;let t;try{let r=document.body.getAttribute("data-user-info");r&&(t=JSON.parse(r))}catch(r){}t&&t.user&&this.userController.completeLogin(t.user),t&&(this.maintenance=!!t.maintenance),Ok({userId:this.userController.getUserId(),desmosLang:this.getLanguage()}),this.userController.observeEvent("triggerRender",()=>{this.dispatch({type:"render"})}),Nk(this.userController,this.s.bind(this))}updateUrlForLang(t){if(!(window.history&&history.replaceState))return;let{origin:r,pathname:n,search:a,hash:c}=location,l=yl(a,"lang",t),g=`${r}${n}${l}${c}`;history.replaceState(null,"",g)}getLanguage(){return this.language}getModal(){return this.modal}getModalLocation(){return this.modalLocation}wasModalOpenedWithKeyboard(){return this.modalDevice==="keyboard"}getModalStartingError(){return""}getSomethingWentWrongText(){return this.s("frontpage-error-something-went-wrong-try-again-later")}allowSignInWithApple(){return!0}parseJSONErrors(t){return Ik(t)}isMaintenanceMode(){return this.maintenance}getDispatcher(){return this.dispatcher}shouldShowTopBanner(){return!1}};var{If:f1}=xn.Components;function y1(e){var t=sm(),r=jg(e,t);window.Calc=r,r.focusFirstExpression();var n=r.controller;cf(function(c){var l=n.stateStack;l&&l.serializeForBugsnag&&(c.metaData.states=l.serializeForBugsnag())}),n.dispatch({type:"update-language",language:ts}),ee(document.documentElement).on("keydown",function(c){c.target.closest(".dcg-calc-matrix-main-wrapper")||r.view&&r.view.handleRootKeydown(c)});var a=function(){var c=n.getInvertedColors();document.body.classList.toggle("dcg-inverted-colors",c);var l=n.getBackgroundColor();la(document.body,{background:l}),la(e,{borderColor:l})};return r.settings.observeAndSync("invertedColors",a),r.settings.observeAndSync("backgroundColor",a),n}var ts=Qs();function Fk(e){ts=e,_v(bh)}var yh=new Ec({showLanguagePicker:!0,allowAllLanguages:!0,limitSignupRole:"student",showNotice:!1}),bh=class extends xn.Class{init(){yh.onEventEmitted=t=>{t==="changeLang"&&this.calcController&&(ts=yh.getLanguage(),this.calcController.dispatch({type:"update-language",language:ts})),this.update()}}template(){return xn.createElement("div",null,xn.createElement(f1,{predicate:()=>window.platform==="www"},()=>xn.createElement(xu,{controller:this.const(yh),helpLink:this.const("https://help.desmos.com/hc/en-us/articles/4404851938445-Matrix-Calculator"),showPrintIcon:this.const(!1)})),xn.createElement("div",{id:xn.const("main"),class:xn.const("dcg-matrix-container"),didMount:this.bindFn(this.onCalcContainerMounted)}))}onCalcContainerMounted(t){this.calcController=y1(t)}};vd(ts).then(function(){return Fk(ts)},function(){return Fk("en")});window.Desmos.MathQuill=Na;})();
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */
